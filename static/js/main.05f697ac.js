/*! For license information please see main.05f697ac.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),i=n(43),o=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(a(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),k=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var T=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var R=Symbol.iterator;function F(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var I=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===I?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case x:return"Suspense";case E:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case f:return"Portal";case k:return(e.displayName||"Context")+".Provider";case b:return(e._context.displayName||"Context")+".Consumer";case D:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case S:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return P(e(t))}catch(n){}}return null}var M=Array.isArray,_=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},j=[],L=-1;function B(e){return{current:e}}function W(e){0>L||(e.current=j[L],j[L]=null,L--)}function U(e,t){L++,j[L]=e.current,e.current=t}var q=B(null),H=B(null),z=B(null),V=B(null);function K(e,t){switch(U(z,t),U(H,e),U(q,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?id(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=od(t=id(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}W(q),U(q,e)}function Y(){W(q),W(H),W(z)}function G(e){null!==e.memoizedState&&U(V,e);var t=q.current,n=od(t,e.type);t!==n&&(U(H,e),U(q,n))}function Q(e){H.current===e&&(W(q),W(H)),V.current===e&&(W(V),Gd._currentValue=O)}var X=Object.prototype.hasOwnProperty,Z=r.unstable_scheduleCallback,J=r.unstable_cancelCallback,$=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,oe=r.unstable_NormalPriority,ae=r.unstable_LowPriority,se=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(me(e)/fe|0)|0},me=Math.log,fe=Math.LN2;var ge=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function we(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,o=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~o)?i=ve(r):0!==(a&=s)?i=ve(a):n||0!==(n=s&~e)&&(i=ve(n)):0!==(s=r&~o)?i=ve(s):0!==a?i=ve(a):n||0!==(n=r&~e)&&(i=ve(n)),0===i?0:0!==t&&t!==i&&0===(t&o)&&((o=i&-i)>=(n=t&-t)||32===o&&0!==(4194048&n))?t:i}function be(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function ke(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function De(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function xe(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function Ee(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Se(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ae(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-pe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ce(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-pe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Te(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Re(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Fe(){var e=N.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Ie=Math.random().toString(36).slice(2),Pe="__reactFiber$"+Ie,Me="__reactProps$"+Ie,_e="__reactContainer$"+Ie,Ne="__reactEvents$"+Ie,Oe="__reactListeners$"+Ie,je="__reactHandles$"+Ie,Le="__reactResources$"+Ie,Be="__reactMarker$"+Ie;function We(e){delete e[Pe],delete e[Me],delete e[Ne],delete e[Oe],delete e[je]}function Ue(e){var t=e[Pe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[_e]||n[Pe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wd(e);null!==e;){if(n=e[Pe])return n;e=wd(e)}return t}n=(e=n).parentNode}return null}function qe(e){if(e=e[Pe]||e[_e]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function He(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function ze(e){var t=e[Le];return t||(t=e[Le]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ve(e){e[Be]=!0}var Ke=new Set,Ye={};function Ge(e,t){Qe(e,t),Qe(e+"Capture",t)}function Qe(e,t){for(Ye[e]=t,e=0;e<t.length;e++)Ke.add(t[e])}var Xe,Ze,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$e={},et={};function tt(e,t,n){if(i=t,X.call(et,i)||!X.call($e,i)&&(Je.test(i)?et[i]=!0:($e[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Xe)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xe=t&&t[1]||"",Ze=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Xe+e+Ze}var ot=!1;function at(e,t){if(!e||ot)return"";ot=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(o){r=o}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),a=o[0],s=o[1];if(a&&s){var l=a.split("\n"),c=s.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{ot=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function st(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=st(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var mt=/[\n"\\]/g;function ft(e){return e.replace(mt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,i,o,a,s){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?vt(e,a,ct(t)):null!=n?vt(e,a,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=o&&(e.defaultChecked=!!o),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.name=""+ct(s):e.removeAttribute("name")}function yt(e,t,n,r,i,o,a,s){if(null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.type=o),null!=t||null!=n){if(!("submit"!==o&&"reset"!==o||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function vt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function bt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function kt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(M(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function Dt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var xt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||xt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function St(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Et(e,i,r)}else for(var o in t)t.hasOwnProperty(o)&&Et(e,o,t[o])}function At(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rt(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ft=null;function It(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Mt=null;function _t(e){var t=qe(e);if(t&&(e=t.stateNode)){var n=e[Me]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ft(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Me]||null;if(!i)throw Error(a(90));gt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":bt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var Nt=!1;function Ot(e,t,n){if(Nt)return e(t,n);Nt=!0;try{return e(t)}finally{if(Nt=!1,(null!==Pt||null!==Mt)&&(Uc(),Pt&&(t=Pt,e=Mt,Mt=Pt=null,_t(t),e)))for(t=0;t<e.length;t++)_t(e[t])}}function jt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Me]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Lt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Bt=!1;if(Lt)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch(Mh){Bt=!1}var Ut=null,qt=null,Ht=null;function zt(){if(Ht)return Ht;var e,t,n=qt,r=n.length,i="value"in Ut?Ut.value:Ut.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Ht=i.slice(e,1<t?1-t:void 0)}function Vt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function Yt(){return!1}function Gt(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Kt:Yt,this.isPropagationStopped=Yt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var Qt,Xt,Zt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$t=Gt(Jt),en=h({},Jt,{view:0,detail:0}),tn=Gt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zt&&(Zt&&"mousemove"===e.type?(Qt=e.screenX-Zt.screenX,Xt=e.screenY-Zt.screenY):Xt=Qt=0,Zt=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),rn=Gt(nn),on=Gt(h({},nn,{dataTransfer:0})),an=Gt(h({},en,{relatedTarget:0})),sn=Gt(h({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Gt(h({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Gt(h({},Jt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function mn(){return pn}var fn=Gt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Vt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mn,charCode:function(e){return"keypress"===e.type?Vt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Vt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Gt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=Gt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mn})),vn=Gt(h({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),wn=Gt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bn=Gt(h({},Jt,{newState:0,oldState:0})),kn=[9,13,27,32],Dn=Lt&&"CompositionEvent"in window,xn=null;Lt&&"documentMode"in document&&(xn=document.documentMode);var En=Lt&&"TextEvent"in window&&!xn,Sn=Lt&&(!Dn||xn&&8<xn&&11>=xn),An=String.fromCharCode(32),Cn=!1;function Tn(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Fn=!1;var In={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!In[e.type]:"textarea"===t}function Mn(e,t,n,r){Pt?Mt?Mt.push(r):Mt=[r]:Pt=r,0<(t=zu(t,"onChange")).length&&(n=new $t("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var _n=null,Nn=null;function On(e){Ou(e,0)}function jn(e){if(ht(He(e)))return e}function Ln(e,t){if("change"===e)return t}var Bn=!1;if(Lt){var Wn;if(Lt){var Un="oninput"in document;if(!Un){var qn=document.createElement("div");qn.setAttribute("oninput","return;"),Un="function"===typeof qn.oninput}Wn=Un}else Wn=!1;Bn=Wn&&(!document.documentMode||9<document.documentMode)}function Hn(){_n&&(_n.detachEvent("onpropertychange",zn),Nn=_n=null)}function zn(e){if("value"===e.propertyName&&jn(Nn)){var t=[];Mn(t,Nn,e,It(e)),Ot(On,t)}}function Vn(e,t,n){"focusin"===e?(Hn(),Nn=n,(_n=t).attachEvent("onpropertychange",zn)):"focusout"===e&&Hn()}function Kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return jn(Nn)}function Yn(e,t){if("click"===e)return jn(t)}function Gn(e,t){if("input"===e||"change"===e)return jn(t)}var Qn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xn(e,t){if(Qn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!X.call(t,i)||!Qn(e[i],t[i]))return!1}return!0}function Zn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,r=Zn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zn(r)}}function $n(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?$n(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Lt&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,or=null,ar=!1;function sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==pt(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&Xn(or,r)||(or=r,0<(r=zu(ir,"onSelect")).length&&(t=new $t("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}Lt&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var pr=hr("animationend"),mr=hr("animationiteration"),fr=hr("animationstart"),gr=hr("transitionrun"),yr=hr("transitionstart"),vr=hr("transitioncancel"),wr=hr("transitionend"),br=new Map,kr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){br.set(e,t),Ge(t,[e])}kr.push("scrollEnd");var xr=new WeakMap;function Er(e,t){if("object"===typeof e&&null!==e){var n=xr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},xr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Sr=[],Ar=0,Cr=0;function Tr(){for(var e=Ar,t=Cr=Ar=0;t<e;){var n=Sr[t];Sr[t++]=null;var r=Sr[t];Sr[t++]=null;var i=Sr[t];Sr[t++]=null;var o=Sr[t];if(Sr[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==o&&Pr(n,i,o)}}function Rr(e,t,n,r){Sr[Ar++]=e,Sr[Ar++]=t,Sr[Ar++]=n,Sr[Ar++]=r,Cr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Fr(e,t,n,r){return Rr(e,t,n,r),Mr(e)}function Ir(e,t){return Rr(e,null,null,t),Mr(e)}function Pr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(i=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,i&&null!==t&&(i=31-pe(n),null===(r=(e=o.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),o):null}function Mr(e){if(50<Pc)throw Pc=0,Mc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var _r={};function Nr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(e,t,n,r){return new Nr(e,t,n,r)}function jr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lr(e,t){var n=e.alternate;return null===n?((n=Or(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Br(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Wr(e,t,n,r,i,o){var s=0;if(r=e,"function"===typeof e)jr(e)&&(s=1);else if("string"===typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,q.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Or(31,n,t,i)).elementType=C,e.lanes=o,e;case g:return Ur(n.children,i,o,t);case y:s=8,i|=24;break;case v:return(e=Or(12,n,t,2|i)).elementType=v,e.lanes=o,e;case x:return(e=Or(13,n,t,i)).elementType=x,e.lanes=o,e;case E:return(e=Or(19,n,t,i)).elementType=E,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:case k:s=10;break e;case b:s=9;break e;case D:s=11;break e;case S:s=14;break e;case A:s=16,r=null;break e}s=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Or(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ur(e,t,n,r){return(e=Or(7,e,r,t)).lanes=n,e}function qr(e,t,n){return(e=Or(6,e,null,t)).lanes=n,e}function Hr(e,t,n){return(t=Or(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var zr=[],Vr=0,Kr=null,Yr=0,Gr=[],Qr=0,Xr=null,Zr=1,Jr="";function $r(e,t){zr[Vr++]=Yr,zr[Vr++]=Kr,Kr=e,Yr=t}function ei(e,t,n){Gr[Qr++]=Zr,Gr[Qr++]=Jr,Gr[Qr++]=Xr,Xr=e;var r=Zr;e=Jr;var i=32-pe(r)-1;r&=~(1<<i),n+=1;var o=32-pe(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Zr=1<<32-pe(t)+i|n<<i|r,Jr=o+e}else Zr=1<<o|n<<i|r,Jr=e}function ti(e){null!==e.return&&($r(e,1),ei(e,1,0))}function ni(e){for(;e===Kr;)Kr=zr[--Vr],zr[Vr]=null,Yr=zr[--Vr],zr[Vr]=null;for(;e===Xr;)Xr=Gr[--Qr],Gr[Qr]=null,Jr=Gr[--Qr],Gr[Qr]=null,Zr=Gr[--Qr],Gr[Qr]=null}var ri=null,ii=null,oi=!1,ai=null,si=!1,li=Error(a(519));function ci(e){throw fi(Er(Error(a(418,"")),e)),li}function ui(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Pe]=e,t[Me]=r,n){case"dialog":ju("cancel",t),ju("close",t);break;case"iframe":case"object":case"embed":ju("load",t);break;case"video":case"audio":for(n=0;n<_u.length;n++)ju(_u[n],t);break;case"source":ju("error",t);break;case"img":case"image":case"link":ju("error",t),ju("load",t);break;case"details":ju("toggle",t);break;case"input":ju("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":ju("invalid",t);break;case"textarea":ju("invalid",t),kt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Xu(t.textContent,n)?(null!=r.popover&&(ju("beforetoggle",t),ju("toggle",t)),null!=r.onScroll&&ju("scroll",t),null!=r.onScrollEnd&&ju("scrollend",t),null!=r.onClick&&(t.onclick=Zu),t=!0):t=!1,t||ci(e)}function di(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(si=!1);case 27:case 3:return void(si=!0);default:ri=ri.return}}function hi(e){if(e!==ri)return!1;if(!oi)return di(e),oi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ad(e.type,e.memoizedProps)),t=!t),t&&ii&&ci(e),di(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=yd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,pd(e.type)?(e=vd,vd=null,ii=e):ii=n):ii=ri?yd(e.stateNode.nextSibling):null;return!0}function pi(){ii=ri=null,oi=!1}function mi(){var e=ai;return null!==e&&(null===wc?wc=e:wc.push.apply(wc,e),ai=null),e}function fi(e){null===ai?ai=[e]:ai.push(e)}var gi=B(null),yi=null,vi=null;function wi(e,t,n){U(gi,t._currentValue),t._currentValue=n}function bi(e){e._currentValue=gi.current,W(gi)}function ki(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Di(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var o=i.dependencies;if(null!==o){var s=i.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),ki(o.return,n,e),r||(s=null);break e}o=l.next}}else if(18===i.tag){if(null===(s=i.return))throw Error(a(341));s.lanes|=n,null!==(o=s.alternate)&&(o.lanes|=n),ki(s,n,e),s=null}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===e){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}}function xi(e,t,n,r){e=null;for(var i=t,o=!1;null!==i;){if(!o)if(0!==(524288&i.flags))o=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var s=i.alternate;if(null===s)throw Error(a(387));if(null!==(s=s.memoizedProps)){var l=i.type;Qn(i.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(i===V.current){if(null===(s=i.alternate))throw Error(a(387));s.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Gd):e=[Gd])}i=i.return}null!==e&&Di(t,e,n,r),t.flags|=262144}function Ei(e){for(e=e.firstContext;null!==e;){if(!Qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Si(e){yi=e,vi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ai(e){return Ti(yi,e)}function Ci(e,t){return null===yi&&Si(e),Ti(e,t)}function Ti(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===vi){if(null===e)throw Error(a(308));vi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vi=vi.next=t;return n}var Ri="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Fi=r.unstable_scheduleCallback,Ii=r.unstable_NormalPriority,Pi={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mi(){return{controller:new Ri,data:new Map,refCount:0}}function _i(e){e.refCount--,0===e.refCount&&Fi(Ii,function(){e.controller.abort()})}var Ni=null,Oi=0,ji=0,Li=null;function Bi(){if(0===--Oi&&null!==Ni){null!==Li&&(Li.status="fulfilled");var e=Ni;Ni=null,ji=0,Li=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Wi=_.S;_.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ni){var n=Ni=[];Oi=0,ji=Ru(),Li={status:"pending",value:void 0,then:function(e){n.push(e)}}}Oi++,t.then(Bi,Bi)}(0,t),null!==Wi&&Wi(e,t)};var Ui=B(null);function qi(){var e=Ui.current;return null!==e?e:rc.pooledCache}function Hi(e,t){U(Ui,null===t?Ui.current:t.pool)}function zi(){var e=qi();return null===e?null:{parent:Pi._currentValue,pool:e}}var Vi=Error(a(460)),Ki=Error(a(474)),Yi=Error(a(542)),Gi={then:function(){}};function Qi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xi(){}function Zi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Xi,Xi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e;default:if("string"===typeof t.status)t.then(Xi,Xi);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e}throw Ji=t,Vi}}var Ji=null;function $i(){if(null===Ji)throw Error(a(459));var e=Ji;return Ji=null,e}function eo(e){if(e===Vi||e===Yi)throw Error(a(483))}var to=!1;function no(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function io(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Mr(e),Pr(e,null,n),t}return Rr(e,r,t,n),Mr(e)}function ao(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}function so(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var lo=!1;function co(){if(lo){if(null!==Li)throw Li}}function uo(e,t,n,r){lo=!1;var i=e.updateQueue;to=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(a=0,u=c=l=null,s=o;;){var p=-536870913&s.lane,m=p!==s.lane;if(m?(oc&p)===p:(r&p)===p){0!==p&&p===ji&&(lo=!0),null!==u&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var f=e,g=s;p=t;var y=n;switch(g.tag){case 1:if("function"===typeof(f=g.payload)){d=f.call(y,d,p);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(p="function"===typeof(f=g.payload)?f.call(y,d,p):f)||void 0===p)break e;d=h({},d,p);break e;case 2:to=!0}}null!==(p=s.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=i.callbacks)?i.callbacks=[p]:m.push(p))}else m={lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=m,l=d):u=u.next=m,a|=p;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(m=s).next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===o&&(i.shared.lanes=0),pc|=a,e.lanes=a,e.memoizedState=d}}function ho(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function po(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ho(n[e],t)}var mo=B(null),fo=B(0);function go(e,t){U(fo,e=dc),U(mo,t),dc=e|t.baseLanes}function yo(){U(fo,dc),U(mo,mo.current)}function vo(){dc=fo.current,W(mo),W(fo)}var wo=0,bo=null,ko=null,Do=null,xo=!1,Eo=!1,So=!1,Ao=0,Co=0,To=null,Ro=0;function Fo(){throw Error(a(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qn(e[n],t[n]))return!1;return!0}function Po(e,t,n,r,i,o){return wo=o,bo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_.H=null===e||null===e.memoizedState?Ka:Ya,So=!1,o=n(r,i),So=!1,Eo&&(o=_o(t,n,r,i)),Mo(e),o}function Mo(e){_.H=Va;var t=null!==ko&&null!==ko.next;if(wo=0,Do=ko=bo=null,xo=!1,Co=0,To=null,t)throw Error(a(300));null===e||Cs||null!==(e=e.dependencies)&&Ei(e)&&(Cs=!0)}function _o(e,t,n,r){bo=e;var i=0;do{if(Eo&&(To=null),Co=0,Eo=!1,25<=i)throw Error(a(301));if(i+=1,Do=ko=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}_.H=Ga,o=t(n,r)}while(Eo);return o}function No(){var e=_.H,t=e.useState()[0];return t="function"===typeof t.then?Uo(t):t,e=e.useState()[0],(null!==ko?ko.memoizedState:null)!==e&&(bo.flags|=1024),t}function Oo(){var e=0!==Ao;return Ao=0,e}function jo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Lo(e){if(xo){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}xo=!1}wo=0,Do=ko=bo=null,Eo=!1,Co=Ao=0,To=null}function Bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Do?bo.memoizedState=Do=e:Do=Do.next=e,Do}function Wo(){if(null===ko){var e=bo.alternate;e=null!==e?e.memoizedState:null}else e=ko.next;var t=null===Do?bo.memoizedState:Do.next;if(null!==t)Do=t,ko=e;else{if(null===e){if(null===bo.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(ko=e).memoizedState,baseState:ko.baseState,baseQueue:ko.baseQueue,queue:ko.queue,next:null},null===Do?bo.memoizedState=Do=e:Do=Do.next=e}return Do}function Uo(e){var t=Co;return Co+=1,null===To&&(To=[]),e=Zi(To,e,t),t=bo,null===(null===Do?t.memoizedState:Do.next)&&(t=t.alternate,_.H=null===t||null===t.memoizedState?Ka:Ya),e}function qo(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Uo(e);if(e.$$typeof===k)return Ai(e)}throw Error(a(438,String(e)))}function Ho(e){var t=null,n=bo.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=bo.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},bo.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=T;return t.index++,n}function zo(e,t){return"function"===typeof t?t(e):t}function Vo(e){return Ko(Wo(),ko,e)}function Ko(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var i=e.baseQueue,o=r.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}t.baseQueue=i=o,r.pending=null}if(o=e.baseState,null===i)e.memoizedState=o;else{var l=s=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(oc&h)===h:(wo&h)===h){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===ji&&(d=!0);else{if((wo&p)===p){u=u.next,p===ji&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,s=o):c=c.next=h,bo.lanes|=p,pc|=p}h=u.action,So&&n(o,h),o=u.hasEagerState?u.eagerState:n(o,h)}else p={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,s=o):c=c.next=p,bo.lanes|=h,pc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?s=o:c.next=l,!Qn(o,e.memoizedState)&&(Cs=!0,d&&null!==(n=Li)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=c,r.lastRenderedState=o}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Yo(e){var t=Wo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);Qn(o,t.memoizedState)||(Cs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Go(e,t,n){var r=bo,i=Wo(),o=oi;if(o){if(void 0===n)throw Error(a(407));n=n()}else n=t();var s=!Qn((ko||i).memoizedState,n);if(s&&(i.memoizedState=n,Cs=!0),i=i.queue,ya(2048,8,Zo.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||null!==Do&&1&Do.memoizedState.tag){if(r.flags|=2048,ma(9,{destroy:void 0,resource:void 0},Xo.bind(null,r,i,n,t),null),null===rc)throw Error(a(349));o||0!==(124&wo)||Qo(r,t,n)}return n}function Qo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=bo.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},bo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Xo(e,t,n,r){t.value=n,t.getSnapshot=r,Jo(t)&&$o(e)}function Zo(e,t,n){return n(function(){Jo(t)&&$o(e)})}function Jo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qn(e,n)}catch(r){return!0}}function $o(e){var t=Ir(e,2);null!==t&&Oc(t,e,2)}function ea(e){var t=Bo();if("function"===typeof e){var n=e;if(e=n(),So){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:e},t}function ta(e,t,n,r){return e.baseState=n,Ko(e,ko,"function"===typeof r?r:zo)}function na(e,t,n,r,i){if(qa(e))throw Error(a(485));if(null!==(e=t.action)){var o={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==_.T?n(!0):o.isTransition=!1,r(o),null===(n=t.pending)?(o.next=t.pending=o,ra(t,o)):(o.next=n.next,t.pending=n.next=o)}}function ra(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var o=_.T,a={};_.T=a;try{var s=n(i,r),l=_.S;null!==l&&l(a,s),ia(e,t,s)}catch(c){aa(e,t,c)}finally{_.T=o}}else try{ia(e,t,o=n(i,r))}catch(u){aa(e,t,u)}}function ia(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){oa(e,t,n)},function(n){return aa(e,t,n)}):oa(e,t,n)}function oa(e,t,n){t.status="fulfilled",t.value=n,sa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ra(e,n)))}function aa(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,sa(t),t=t.next}while(t!==r)}e.action=null}function sa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function la(e,t){return t}function ca(e,t){if(oi){var n=rc.formState;if(null!==n){e:{var r=bo;if(oi){if(ii){t:{for(var i=ii,o=si;8!==i.nodeType;){if(!o){i=null;break t}if(null===(i=yd(i.nextSibling))){i=null;break t}}i="F!"===(o=i.data)||"F"===o?i:null}if(i){ii=yd(i.nextSibling),r="F!"===i.data;break e}}ci(r)}r=!1}r&&(t=n[0])}}return(n=Bo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:t},n.queue=r,n=Ba.bind(null,bo,r),r.dispatch=n,r=ea(!1),o=Ua.bind(null,bo,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Bo()).queue=i,n=na.bind(null,bo,i,o,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function ua(e){return da(Wo(),ko,e)}function da(e,t,n){if(t=Ko(e,t,la)[0],e=Vo(zo)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Uo(t)}catch(a){if(a===Vi)throw Yi;throw a}else r=t;var i=(t=Wo()).queue,o=i.dispatch;return n!==t.memoizedState&&(bo.flags|=2048,ma(9,{destroy:void 0,resource:void 0},ha.bind(null,i,n),null)),[r,o,e]}function ha(e,t){e.action=t}function pa(e){var t=Wo(),n=ko;if(null!==n)return da(t,n,e);Wo(),t=t.memoizedState;var r=(n=Wo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ma(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=bo.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},bo.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function fa(){return Wo().memoizedState}function ga(e,t,n,r){var i=Bo();r=void 0===r?null:r,bo.flags|=e,i.memoizedState=ma(1|t,{destroy:void 0,resource:void 0},n,r)}function ya(e,t,n,r){var i=Wo();r=void 0===r?null:r;var o=i.memoizedState.inst;null!==ko&&null!==r&&Io(r,ko.memoizedState.deps)?i.memoizedState=ma(t,o,n,r):(bo.flags|=e,i.memoizedState=ma(1|t,o,n,r))}function va(e,t){ga(8390656,8,e,t)}function wa(e,t){ya(2048,8,e,t)}function ba(e,t){return ya(4,2,e,t)}function ka(e,t){return ya(4,4,e,t)}function Da(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function xa(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ya(4,4,Da.bind(null,t,e),n)}function Ea(){}function Sa(e,t){var n=Wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Aa(e,t){var n=Wo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Io(t,r[1]))return r[0];if(r=e(),So){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function Ca(e,t,n){return void 0===n||0!==(1073741824&wo)?e.memoizedState=t:(e.memoizedState=n,e=Nc(),bo.lanes|=e,pc|=e,n)}function Ta(e,t,n,r){return Qn(n,t)?n:null!==mo.current?(e=Ca(e,n,r),Qn(e,t)||(Cs=!0),e):0===(42&wo)?(Cs=!0,e.memoizedState=n):(e=Nc(),bo.lanes|=e,pc|=e,t)}function Ra(e,t,n,r,i){var o=N.p;N.p=0!==o&&8>o?o:8;var a=_.T,s={};_.T=s,Ua(e,!1,t,n);try{var l=i(),c=_.S;if(null!==c&&c(s,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r);Wa(e,t,u,_c())}else Wa(e,t,r,_c())}catch(d){Wa(e,t,{then:function(){},status:"rejected",reason:d},_c())}finally{N.p=o,_.T=a}}function Fa(){}function Ia(e,t,n,r){if(5!==e.tag)throw Error(a(476));var i=Pa(e).queue;Ra(e,i,t,O,null===n?Fa:function(){return Ma(e),n(r)})}function Pa(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:O},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ma(e){Wa(e,Pa(e).next.queue,{},_c())}function _a(){return Ai(Gd)}function Na(){return Wo().memoizedState}function Oa(){return Wo().memoizedState}function ja(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=_c(),r=oo(t,e=io(n),n);return null!==r&&(Oc(r,t,n),ao(r,t,n)),t={cache:Mi()},void(e.payload=t)}t=t.return}}function La(e,t,n){var r=_c();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},qa(e)?Ha(t,n):null!==(n=Fr(e,t,n,r))&&(Oc(n,e,r),za(n,t,r))}function Ba(e,t,n){Wa(e,t,n,_c())}function Wa(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(qa(e))Ha(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Qn(s,a))return Rr(e,t,i,0),null===rc&&Tr(),!1}catch(l){}if(null!==(n=Fr(e,t,i,r)))return Oc(n,e,r),za(n,t,r),!0}return!1}function Ua(e,t,n,r){if(r={lane:2,revertLane:Ru(),action:r,hasEagerState:!1,eagerState:null,next:null},qa(e)){if(t)throw Error(a(479))}else null!==(t=Fr(e,n,r,2))&&Oc(t,e,2)}function qa(e){var t=e.alternate;return e===bo||null!==t&&t===bo}function Ha(e,t){Eo=xo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function za(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}var Va={readContext:Ai,use:qo,useCallback:Fo,useContext:Fo,useEffect:Fo,useImperativeHandle:Fo,useLayoutEffect:Fo,useInsertionEffect:Fo,useMemo:Fo,useReducer:Fo,useRef:Fo,useState:Fo,useDebugValue:Fo,useDeferredValue:Fo,useTransition:Fo,useSyncExternalStore:Fo,useId:Fo,useHostTransitionStatus:Fo,useFormState:Fo,useActionState:Fo,useOptimistic:Fo,useMemoCache:Fo,useCacheRefresh:Fo},Ka={readContext:Ai,use:qo,useCallback:function(e,t){return Bo().memoizedState=[e,void 0===t?null:t],e},useContext:Ai,useEffect:va,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ga(4194308,4,Da.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ga(4194308,4,e,t)},useInsertionEffect:function(e,t){ga(4,2,e,t)},useMemo:function(e,t){var n=Bo();t=void 0===t?null:t;var r=e();if(So){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Bo();if(void 0!==n){var i=n(t);if(So){he(!0);try{n(t)}finally{he(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=La.bind(null,bo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Bo().memoizedState=e},useState:function(e){var t=(e=ea(e)).queue,n=Ba.bind(null,bo,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ea,useDeferredValue:function(e,t){return Ca(Bo(),e,t)},useTransition:function(){var e=ea(!1);return e=Ra.bind(null,bo,e.queue,!0,!1),Bo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=bo,i=Bo();if(oi){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===rc)throw Error(a(349));0!==(124&oc)||Qo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,va(Zo.bind(null,r,o,e),[e]),r.flags|=2048,ma(9,{destroy:void 0,resource:void 0},Xo.bind(null,r,o,n,t),null),n},useId:function(){var e=Bo(),t=rc.identifierPrefix;if(oi){var n=Jr;t="\xab"+t+"R"+(n=(Zr&~(1<<32-pe(Zr)-1)).toString(32)+n),0<(n=Ao++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ro++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:_a,useFormState:ca,useActionState:ca,useOptimistic:function(e){var t=Bo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ua.bind(null,bo,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ho,useCacheRefresh:function(){return Bo().memoizedState=ja.bind(null,bo)}},Ya={readContext:Ai,use:qo,useCallback:Sa,useContext:Ai,useEffect:wa,useImperativeHandle:xa,useInsertionEffect:ba,useLayoutEffect:ka,useMemo:Aa,useReducer:Vo,useRef:fa,useState:function(){return Vo(zo)},useDebugValue:Ea,useDeferredValue:function(e,t){return Ta(Wo(),ko.memoizedState,e,t)},useTransition:function(){var e=Vo(zo)[0],t=Wo().memoizedState;return["boolean"===typeof e?e:Uo(e),t]},useSyncExternalStore:Go,useId:Na,useHostTransitionStatus:_a,useFormState:ua,useActionState:ua,useOptimistic:function(e,t){return ta(Wo(),0,e,t)},useMemoCache:Ho,useCacheRefresh:Oa},Ga={readContext:Ai,use:qo,useCallback:Sa,useContext:Ai,useEffect:wa,useImperativeHandle:xa,useInsertionEffect:ba,useLayoutEffect:ka,useMemo:Aa,useReducer:Yo,useRef:fa,useState:function(){return Yo(zo)},useDebugValue:Ea,useDeferredValue:function(e,t){var n=Wo();return null===ko?Ca(n,e,t):Ta(n,ko.memoizedState,e,t)},useTransition:function(){var e=Yo(zo)[0],t=Wo().memoizedState;return["boolean"===typeof e?e:Uo(e),t]},useSyncExternalStore:Go,useId:Na,useHostTransitionStatus:_a,useFormState:pa,useActionState:pa,useOptimistic:function(e,t){var n=Wo();return null!==ko?ta(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Ho,useCacheRefresh:Oa},Qa=null,Xa=0;function Za(e){var t=Xa;return Xa+=1,null===Qa&&(Qa=[]),Zi(Qa,e,t)}function Ja(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function $a(e,t){if(t.$$typeof===p)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function es(e){return(0,e._init)(e._payload)}function ts(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Lr(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=qr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===A&&es(o)===t.type)?(Ja(t=i(t,n.props),n),t.return=e,t):(Ja(t=Wr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Ur(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=qr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return Ja(n=Wr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case f:return(t=Hr(t,e.mode,n)).return=e,t;case A:return h(e,t=(0,t._init)(t._payload),n)}if(M(t)||F(t))return(t=Ur(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Za(t),n);if(t.$$typeof===k)return h(e,Ci(e,t),n);$a(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===i?c(e,t,n,r):null;case f:return n.key===i?u(e,t,n,r):null;case A:return p(e,t,n=(i=n._init)(n._payload),r)}if(M(n)||F(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return p(e,t,Za(n),r);if(n.$$typeof===k)return p(e,t,Ci(e,n),r);$a(e,n)}return null}function y(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case f:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(M(r)||F(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return y(e,t,n,Za(r),i);if(r.$$typeof===k)return y(e,t,n,Ci(t,r),i);$a(t,r)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var w=u.key;null!==c;){if(c.key===w){if((w=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=i(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===w||"object"===typeof w&&null!==w&&w.$$typeof===A&&es(w)===c.type){n(l,c.sibling),Ja(d=i(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=Ur(u.props.children,l.mode,d,u.key)).return=l,l=d):(Ja(d=Wr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return s(l);case f:e:{for(w=u.key;null!==c;){if(c.key===w){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=i(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Hr(u,l.mode,d)).return=l,l=d}return s(l);case A:return v(l,c,u=(w=u._init)(u._payload),d)}if(M(u))return function(i,a,s,l){for(var c=null,u=null,d=a,m=a=0,f=null;null!==d&&m<s.length;m++){d.index>m?(f=d,d=null):f=d.sibling;var g=p(i,d,s[m],l);if(null===g){null===d&&(d=f);break}e&&d&&null===g.alternate&&t(i,d),a=o(g,a,m),null===u?c=g:u.sibling=g,u=g,d=f}if(m===s.length)return n(i,d),oi&&$r(i,m),c;if(null===d){for(;m<s.length;m++)null!==(d=h(i,s[m],l))&&(a=o(d,a,m),null===u?c=d:u.sibling=d,u=d);return oi&&$r(i,m),c}for(d=r(d);m<s.length;m++)null!==(f=y(d,i,m,s[m],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?m:f.key),a=o(f,a,m),null===u?c=f:u.sibling=f,u=f);return e&&d.forEach(function(e){return t(i,e)}),oi&&$r(i,m),c}(l,c,u,d);if(F(u)){if("function"!==typeof(w=F(u)))throw Error(a(150));return function(i,s,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,m=s,f=s=0,g=null,v=l.next();null!==m&&!v.done;f++,v=l.next()){m.index>f?(g=m,m=null):g=m.sibling;var w=p(i,m,v.value,c);if(null===w){null===m&&(m=g);break}e&&m&&null===w.alternate&&t(i,m),s=o(w,s,f),null===d?u=w:d.sibling=w,d=w,m=g}if(v.done)return n(i,m),oi&&$r(i,f),u;if(null===m){for(;!v.done;f++,v=l.next())null!==(v=h(i,v.value,c))&&(s=o(v,s,f),null===d?u=v:d.sibling=v,d=v);return oi&&$r(i,f),u}for(m=r(m);!v.done;f++,v=l.next())null!==(v=y(m,i,f,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?f:v.key),s=o(v,s,f),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(i,e)}),oi&&$r(i,f),u}(l,c,u=w.call(u),d)}if("function"===typeof u.then)return v(l,c,Za(u),d);if(u.$$typeof===k)return v(l,c,Ci(l,u),d);$a(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=i(c,u)).return=l,l=d):(n(l,c),(d=qr(u,l.mode,d)).return=l,l=d),s(l)):n(l,c)}return function(e,t,n,r){try{Xa=0;var i=v(e,t,n,r);return Qa=null,i}catch(a){if(a===Vi||a===Yi)throw a;var o=Or(29,a,null,e.mode);return o.lanes=r,o.return=e,o}}}var ns=ts(!0),rs=ts(!1),is=B(null),os=null;function as(e){var t=e.alternate;U(us,1&us.current),U(is,e),null===os&&(null===t||null!==mo.current||null!==t.memoizedState)&&(os=e)}function ss(e){if(22===e.tag){if(U(us,us.current),U(is,e),null===os){var t=e.alternate;null!==t&&null!==t.memoizedState&&(os=e)}}else ls()}function ls(){U(us,us.current),U(is,is.current)}function cs(e){W(is),os===e&&(os=null),W(us)}var us=B(0);function ds(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function hs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ps={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=_c(),i=io(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=oo(e,i,r))&&(Oc(t,e,r),ao(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=_c(),i=io(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=oo(e,i,r))&&(Oc(t,e,r),ao(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_c(),r=io(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=oo(e,r,n))&&(Oc(t,e,n),ao(t,e,n))}};function ms(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Xn(n,r)||!Xn(i,o))}function fs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ps.enqueueReplaceState(t,t.state,null)}function gs(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var ys="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function vs(e){ys(e)}function ws(e){console.error(e)}function bs(e){ys(e)}function ks(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ds(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function xs(e,t,n){return(n=io(n)).tag=3,n.payload={element:null},n.callback=function(){ks(e,t)},n}function Es(e){return(e=io(e)).tag=3,e}function Ss(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var o=r.value;e.payload=function(){return i(o)},e.callback=function(){Ds(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){Ds(t,n,r),"function"!==typeof i&&(null===Ec?Ec=new Set([this]):Ec.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var As=Error(a(461)),Cs=!1;function Ts(e,t,n,r){t.child=null===e?rs(t,null,n,r):ns(t,e.child,n,r)}function Rs(e,t,n,r,i){n=n.render;var o=t.ref;if("ref"in r){var a={};for(var s in r)"ref"!==s&&(a[s]=r[s])}else a=r;return Si(t),r=Po(e,t,n,a,o,i),s=Oo(),null===e||Cs?(oi&&s&&ti(t),t.flags|=1,Ts(e,t,r,i),t.child):(jo(e,t,i),Qs(e,t,i))}function Fs(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||jr(o)||void 0!==o.defaultProps||null!==n.compare?((e=Wr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Is(e,t,o,r,i))}if(o=e.child,!Xs(e,i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:Xn)(a,r)&&e.ref===t.ref)return Qs(e,t,i)}return t.flags|=1,(e=Lr(o,r)).ref=t.ref,e.return=t,t.child=e}function Is(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(Xn(o,r)&&e.ref===t.ref){if(Cs=!1,t.pendingProps=r=o,!Xs(e,i))return t.lanes=e.lanes,Qs(e,t,i);0!==(131072&e.flags)&&(Cs=!0)}}return Ns(e,t,n,r,i)}function Ps(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==o?o.baseLanes|n:n,null!==e){for(i=t.child=e.child,o=0;null!==i;)o=o|i.lanes|i.childLanes,i=i.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return Ms(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Ms(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Hi(0,null!==o?o.cachePool:null),null!==o?go(t,o):yo(),ss(t)}else null!==o?(Hi(0,o.cachePool),go(t,o),ls(),t.memoizedState=null):(null!==e&&Hi(0,null),yo(),ls());return Ts(e,t,i,n),t.child}function Ms(e,t,n,r){var i=qi();return i=null===i?null:{parent:Pi._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Hi(0,null),yo(),ss(t),null!==e&&xi(e,t,r,!0),null}function _s(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ns(e,t,n,r,i){return Si(t),n=Po(e,t,n,r,void 0,i),r=Oo(),null===e||Cs?(oi&&r&&ti(t),t.flags|=1,Ts(e,t,n,i),t.child):(jo(e,t,i),Qs(e,t,i))}function Os(e,t,n,r,i,o){return Si(t),t.updateQueue=null,n=_o(t,r,n,i),Mo(e),r=Oo(),null===e||Cs?(oi&&r&&ti(t),t.flags|=1,Ts(e,t,n,o),t.child):(jo(e,t,o),Qs(e,t,o))}function js(e,t,n,r,i){if(Si(t),null===t.stateNode){var o=_r,a=n.contextType;"object"===typeof a&&null!==a&&(o=Ai(a)),o=new n(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=ps,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},no(t),a=n.contextType,o.context="object"===typeof a&&null!==a?Ai(a):_r,o.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(hs(t,n,a,r),o.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(a=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),a!==o.state&&ps.enqueueReplaceState(o,o.state,null),uo(t,r,o,i),co(),o.state=t.memoizedState),"function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var s=t.memoizedProps,l=gs(n,s);o.props=l;var c=o.context,u=n.contextType;a=_r,"object"===typeof u&&null!==u&&(a=Ai(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate,s=t.pendingProps!==s,u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s||c!==a)&&fs(t,o,r,a),to=!1;var h=t.memoizedState;o.state=h,uo(t,r,o,i),co(),c=t.memoizedState,s||h!==c||to?("function"===typeof d&&(hs(t,n,d,r),c=t.memoizedState),(l=to||ms(t,n,l,r,h,c,a))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=a,r=l):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ro(e,t),u=gs(n,a=t.memoizedProps),o.props=u,d=t.pendingProps,h=o.context,c=n.contextType,l=_r,"object"===typeof c&&null!==c&&(l=Ai(c)),(c="function"===typeof(s=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&fs(t,o,r,l),to=!1,h=t.memoizedState,o.state=h,uo(t,r,o,i),co();var p=t.memoizedState;a!==d||h!==p||to||null!==e&&null!==e.dependencies&&Ei(e.dependencies)?("function"===typeof s&&(hs(t,n,s,r),p=t.memoizedState),(u=to||ms(t,n,u,r,h,p,l)||null!==e&&null!==e.dependencies&&Ei(e.dependencies))?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,_s(e,t),r=0!==(128&t.flags),o||r?(o=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=ns(t,e.child,null,i),t.child=ns(t,null,n,i)):Ts(e,t,n,i),t.memoizedState=o.state,e=t.child):e=Qs(e,t,i),e}function Ls(e,t,n,r){return pi(),t.flags|=256,Ts(e,t,n,r),t.child}var Bs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ws(e){return{baseLanes:e,cachePool:zi()}}function Us(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function qs(e,t,n){var r,i=t.pendingProps,o=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&us.current)),r&&(o=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(oi){if(o?as(t):ls(),oi){var l,c=ii;if(l=c){e:{for(l=c,c=si;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=yd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Xr?{id:Zr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},(l=Or(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ci(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gd(c)?t.lanes=32:t.lanes=536870912,null;cs(t)}return c=i.children,i=i.fallback,o?(ls(),c=zs({mode:"hidden",children:c},o=t.mode),i=Ur(i,o,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(o=t.child).memoizedState=Ws(n),o.childLanes=Us(e,r,n),t.memoizedState=Bs,i):(as(t),Hs(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(s)256&t.flags?(as(t),t.flags&=-257,t=Vs(e,t,n)):null!==t.memoizedState?(ls(),t.child=e.child,t.flags|=128,t=null):(ls(),o=i.fallback,c=t.mode,i=zs({mode:"visible",children:i.children},c),(o=Ur(o,c,n,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,ns(t,e.child,null,n),(i=t.child).memoizedState=Ws(n),i.childLanes=Us(e,r,n),t.memoizedState=Bs,t=o);else if(as(t),gd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(a(419))).stack="",i.digest=r,fi({value:i,source:null,stack:null}),t=Vs(e,t,n)}else if(Cs||xi(e,t,n,!1),r=0!==(n&e.childLanes),Cs||r){if(null!==(r=rc)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:Te(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Ir(e,i),Oc(r,e,i),As;"$?"===c.data||Yc(),t=Vs(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=yd(c.nextSibling),ri=t,oi=!0,ai=null,si=!1,null!==e&&(Gr[Qr++]=Zr,Gr[Qr++]=Jr,Gr[Qr++]=Xr,Zr=e.id,Jr=e.overflow,Xr=t),(t=Hs(t,i.children)).flags|=4096);return t}return o?(ls(),o=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=Lr(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?o=Lr(u,o):(o=Ur(o,c,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,null===(c=e.child.memoizedState)?c=Ws(n):(null!==(l=c.cachePool)?(u=Pi._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=zi(),c={baseLanes:c.baseLanes|n,cachePool:l}),o.memoizedState=c,o.childLanes=Us(e,r,n),t.memoizedState=Bs,i):(as(t),e=(n=e.child).sibling,(n=Lr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Hs(e,t){return(t=zs({mode:"visible",children:t},e.mode)).return=e,e.child=t}function zs(e,t){return(e=Or(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Vs(e,t,n){return ns(t,e.child,null,n),(e=Hs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ks(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ki(e.return,t,n)}function Ys(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Gs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ts(e,t,r.children,n),0!==(2&(r=us.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ks(e,n,t);else if(19===e.tag)Ks(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(U(us,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ds(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ys(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ds(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ys(t,!0,n,null,o);break;case"together":Ys(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(xi(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Lr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xs(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ei(e))}function Zs(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Cs=!0;else{if(!Xs(e,n)&&0===(128&t.flags))return Cs=!1,function(e,t,n){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),wi(0,Pi,e.memoizedState.cache),pi();break;case 27:case 5:G(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:wi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(as(t),t.flags|=128,null):0!==(n&t.child.childLanes)?qs(e,t,n):(as(t),null!==(e=Qs(e,t,n))?e.sibling:null);as(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(xi(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Gs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),U(us,us.current),r)break;return null;case 22:case 23:return t.lanes=0,Ps(e,t,n);case 24:wi(0,Pi,e.memoizedState.cache)}return Qs(e,t,n)}(e,t,n);Cs=0!==(131072&e.flags)}else Cs=!1,oi&&0!==(1048576&t.flags)&&ei(t,Yr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===D){t.tag=11,t=Rs(null,t,r,e,n);break e}if(i===S){t.tag=14,t=Fs(null,t,r,e,n);break e}}throw t=P(r)||r,Error(a(306,t,""))}jr(r)?(e=gs(r,e),t.tag=1,t=js(null,t,r,e,n)):(t.tag=0,t=Ns(null,t,r,e,n))}return t;case 0:return Ns(e,t,t.type,t.pendingProps,n);case 1:return js(e,t,r=t.type,i=gs(r,t.pendingProps),n);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var o=t.memoizedState;i=o.element,ro(e,t),uo(t,r,null,n);var s=t.memoizedState;if(r=s.cache,wi(0,Pi,r),r!==o.cache&&Di(t,[Pi],n,!0),co(),r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ls(e,t,r,n);break e}if(r!==i){fi(i=Er(Error(a(424)),t)),t=Ls(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=yd(e.firstChild),ri=t,oi=!0,ai=null,si=!0,n=rs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===i){t=Qs(e,t,n);break e}Ts(e,t,r,n)}t=t.child}return t;case 26:return _s(e,t),null===e?(n=Td(t.type,null,t.pendingProps,null))?t.memoizedState=n:oi||(n=t.type,e=t.pendingProps,(r=rd(z.current).createElement(n))[Pe]=t,r[Me]=e,ed(r,n,e),Ve(r),t.stateNode=r):t.memoizedState=Td(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return G(t),null===e&&oi&&(r=t.stateNode=bd(t.type,t.pendingProps,z.current),ri=t,si=!0,i=ii,pd(t.type)?(vd=i,ii=yd(r.firstChild)):ii=i),Ts(e,t,t.pendingProps.children,n),_s(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&oi&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Be])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===o)return e}if(null===(e=yd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,si))?(t.stateNode=r,ri=t,ii=yd(r.firstChild),si=!1,i=!0):i=!1),i||ci(t)),G(t),i=t.type,o=t.pendingProps,s=null!==e?e.memoizedProps:null,r=o.children,ad(i,o)?r=null:null!==s&&ad(i,s)&&(t.flags|=32),null!==t.memoizedState&&(i=Po(e,t,No,null,null,n),Gd._currentValue=i),_s(e,t),Ts(e,t,r,n),t.child;case 6:return null===e&&oi&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(n,t.pendingProps,si))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ci(t)),null;case 13:return qs(e,t,n);case 4:return K(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ns(t,null,r,n):Ts(e,t,r,n),t.child;case 11:return Rs(e,t,t.type,t.pendingProps,n);case 7:return Ts(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ts(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,wi(0,t.type,r.value),Ts(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Si(t),r=r(i=Ai(i)),t.flags|=1,Ts(e,t,r,n),t.child;case 14:return Fs(e,t,t.type,t.pendingProps,n);case 15:return Is(e,t,t.type,t.pendingProps,n);case 19:return Gs(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=zs(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Lr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ps(e,t,n);case 24:return Si(t),r=Ai(Pi),null===e?(null===(i=qi())&&(i=rc,o=Mi(),i.pooledCache=o,o.refCount++,null!==o&&(i.pooledCacheLanes|=n),i=o),t.memoizedState={parent:r,cache:i},no(t),wi(0,Pi,i)):(0!==(e.lanes&n)&&(ro(e,t),uo(t,null,null,n),co()),i=e.memoizedState,o=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),wi(0,Pi,r)):(r=o.cache,wi(0,Pi,r),r!==i.cache&&Di(t,[Pi],n,!0))),Ts(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Js(e){e.flags|=4}function $s(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Ud(t)){if(null!==(t=is.current)&&((4194048&oc)===oc?null!==os:(62914560&oc)!==oc&&0===(536870912&oc)||t!==os))throw Ji=Gi,Ki;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?xe():536870912,e.lanes|=t,yc|=t)}function tl(e,t){if(!oi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),bi(Pi),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hi(t)?Js(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,mi())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Js(t),null!==n?(nl(t),$s(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Js(t),nl(t),$s(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Js(t),nl(t),t.flags&=-16777217),null;case 27:Q(t),n=z.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Js(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}e=q.current,hi(t)?ui(t):(e=bd(i,r,n),t.stateNode=e,Js(t))}return nl(t),null;case 5:if(Q(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Js(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}if(e=q.current,hi(t))ui(t);else{switch(i=rd(z.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Pe]=t,e[Me]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Js(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Js(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=z.current,hi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Pe]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Xu(e.nodeValue,n)))||ci(t)}else(e=rd(e).createTextNode(r))[Pe]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[Pe]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),i=!1}else i=mi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(cs(t),t):(cs(t),null)}if(cs(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var o=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return Y(),null===e&&Wu(t.stateNode.containerInfo),nl(t),null;case 10:return bi(t.type),nl(t),null;case 19:if(W(us),null===(i=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(o=i.rendering))if(r)tl(i,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=ds(e))){for(t.flags|=128,tl(i,!1),e=o.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Br(n,e),n=n.sibling;return U(us,1&us.current|2),t.child}e=e.sibling}null!==i.tail&&te()>Dc&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ds(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!oi)return nl(t),null}else 2*te()-i.renderingStartTime>Dc&&536870912!==n&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=i.last)?e.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=us.current,U(us,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return cs(t),vo(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&W(Ui),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),bi(Pi),nl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function il(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return bi(Pi),Y(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 13:if(cs(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return W(us),null;case 4:return Y(),null;case 10:return bi(t.type),null;case 22:case 23:return cs(t),vo(),null!==e&&W(Ui),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return bi(Pi),null;default:return null}}function ol(e,t){switch(ni(t),t.tag){case 3:bi(Pi),Y();break;case 26:case 27:case 5:Q(t);break;case 4:Y();break;case 13:cs(t);break;case 19:W(us);break;case 10:bi(t.type);break;case 22:case 23:cs(t),vo(),null!==e&&W(Ui);break;case 24:bi(Pi)}}function al(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var o=n.create,a=n.inst;r=o(),a.destroy=r}n=n.next}while(n!==i)}}catch(s){uu(t,t.return,s)}}function sl(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var o=i.next;r=o;do{if((r.tag&e)===e){var a=r.inst,s=a.destroy;if(void 0!==s){a.destroy=void 0,i=t;var l=n,c=s;try{c()}catch(u){uu(i,l,u)}}}r=r.next}while(r!==o)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{po(t,n)}catch(r){uu(e,e.return,r)}}}function cl(e,t,n){n.props=gs(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){uu(e,t,r)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){uu(e,t,i)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){uu(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(o){uu(e,t,o)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){uu(e,e.return,i)}}function pl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,o=null,s=null,l=null,c=null,u=null,d=null;for(m in n){var h=n[m];if(n.hasOwnProperty(m)&&null!=h)switch(m){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(m)||Ju(e,t,m,null,r,h)}}for(var p in r){var m=r[p];if(h=n[p],r.hasOwnProperty(p)&&(null!=m||null!=h))switch(p){case"type":o=m;break;case"name":i=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":s=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(a(137,t));break;default:m!==h&&Ju(e,t,p,m,r,h)}}return void gt(e,s,l,c,u,d,o,i);case"select":for(o in m=s=l=p=null,n)if(c=n[o],n.hasOwnProperty(o)&&null!=c)switch(o){case"value":break;case"multiple":m=c;default:r.hasOwnProperty(o)||Ju(e,t,o,null,r,c)}for(i in r)if(o=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=o||null!=c))switch(i){case"value":p=o;break;case"defaultValue":l=o;break;case"multiple":s=o;default:o!==c&&Ju(e,t,i,o,r,c)}return t=l,n=s,r=m,void(null!=p?wt(e,!!n,p,!1):!!r!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in m=p=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Ju(e,t,l,null,r,i)}for(s in r)if(i=r[s],o=n[s],r.hasOwnProperty(s)&&(null!=i||null!=o))switch(s){case"value":p=i;break;case"defaultValue":m=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(a(91));break;default:i!==o&&Ju(e,t,s,i,r,o)}return void bt(e,p,m);case"option":for(var f in n)if(p=n[f],n.hasOwnProperty(f)&&null!=p&&!r.hasOwnProperty(f))if("selected"===f)e.selected=!1;else Ju(e,t,f,null,r,p);for(c in r)if(p=r[c],m=n[c],r.hasOwnProperty(c)&&p!==m&&(null!=p||null!=m))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else Ju(e,t,c,p,r,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g)&&Ju(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(null!=p||null!=m))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:Ju(e,t,u,p,r,m)}return;default:if(At(t)){for(var y in n)p=n[y],n.hasOwnProperty(y)&&void 0!==p&&!r.hasOwnProperty(y)&&$u(e,t,y,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||void 0===p&&void 0===m||$u(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&null!=p&&!r.hasOwnProperty(v)&&Ju(e,t,v,null,r,p);for(h in r)p=r[h],m=n[h],!r.hasOwnProperty(h)||p===m||null==p&&null==m||Ju(e,t,h,p,r,m)}(r,e.type,n,t),r[Me]=t}catch(i){uu(e,e.return,i)}}function ml(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&pd(e.type)||4===e.tag}function fl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&pd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zu));else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ed(t,r,n),t[Pe]=e,t[Me]=n}catch(o){uu(e,e.return,o)}}var wl=!1,bl=!1,kl=!1,Dl="function"===typeof WeakSet?WeakSet:Set,xl=null;function El(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:jl(e,n),4&r&&al(5,n);break;case 1:if(jl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){uu(n,n.return,a)}else{var i=gs(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){uu(n,n.return,s)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(jl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{po(e,t)}catch(a){uu(n,n.return,a)}}break;case 27:null===t&&4&r&&vl(n);case 26:case 5:jl(e,n),null===t&&4&r&&hl(n),512&r&&ul(n,n.return);break;case 12:jl(e,n);break;case 13:jl(e,n),4&r&&Fl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=mu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||wl)){t=null!==t&&null!==t.memoizedState||bl,i=wl;var o=bl;wl=r,(bl=t)&&!o?Bl(e,n,0!==(8772&n.subtreeFlags)):jl(e,n),wl=i,bl=o}break;case 30:break;default:jl(e,n)}}function Sl(e){var t=e.alternate;null!==t&&(e.alternate=null,Sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&We(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Al=null,Cl=!1;function Tl(e,t,n){for(n=n.child;null!==n;)Rl(e,t,n),n=n.sibling}function Rl(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(o){}switch(n.tag){case 26:bl||dl(n,t),Tl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:bl||dl(n,t);var r=Al,i=Cl;pd(n.type)&&(Al=n.stateNode,Cl=!1),Tl(e,t,n),kd(n.stateNode),Al=r,Cl=i;break;case 5:bl||dl(n,t);case 6:if(r=Al,i=Cl,Al=null,Tl(e,t,n),Cl=i,null!==(Al=r))if(Cl)try{(9===Al.nodeType?Al.body:"HTML"===Al.nodeName?Al.ownerDocument.body:Al).removeChild(n.stateNode)}catch(a){uu(n,t,a)}else try{Al.removeChild(n.stateNode)}catch(a){uu(n,t,a)}break;case 18:null!==Al&&(Cl?(md(9===(e=Al).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Ch(e)):md(Al,n.stateNode));break;case 4:r=Al,i=Cl,Al=n.stateNode.containerInfo,Cl=!0,Tl(e,t,n),Al=r,Cl=i;break;case 0:case 11:case 14:case 15:bl||sl(2,n,t),bl||sl(4,n,t),Tl(e,t,n);break;case 1:bl||(dl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),Tl(e,t,n);break;case 21:Tl(e,t,n);break;case 22:bl=(r=bl)||null!==n.memoizedState,Tl(e,t,n),bl=r;break;default:Tl(e,t,n)}}function Fl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ch(e)}catch(n){uu(t,t.return,n)}}function Il(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Dl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Dl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var r=fu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(pd(l.type)){Al=l.stateNode,Cl=!1;break e}break;case 5:Al=l.stateNode,Cl=!1;break e;case 3:case 4:Al=l.stateNode.containerInfo,Cl=!0;break e}l=l.return}if(null===Al)throw Error(a(160));Rl(o,s,i),Al=null,Cl=!1,null!==(o=i.alternate)&&(o.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)_l(t,e),t=t.sibling}var Ml=null;function _l(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pl(t,e),Nl(e),4&r&&(sl(3,e,e.return),al(3,e),sl(5,e,e.return));break;case 1:Pl(t,e),Nl(e),512&r&&(bl||null===n||dl(n,n.return)),64&r&&wl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Ml;if(Pl(t,e),Nl(e),512&r&&(bl||null===n||dl(n,n.return)),4&r){var o=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(o=i.getElementsByTagName("title")[0])||o[Be]||o[Pe]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=i.createElement(r),i.head.insertBefore(o,i.querySelector("head > title"))),ed(o,r,n),o[Pe]=e,Ve(o),r=o;break e;case"link":var s=Bd("link","href",i).get(r+(n.href||""));if(s)for(var l=0;l<s.length;l++)if((o=s[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&o.getAttribute("rel")===(null==n.rel?null:n.rel)&&o.getAttribute("title")===(null==n.title?null:n.title)&&o.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(l,1);break t}ed(o=i.createElement(r),r,n),i.head.appendChild(o);break;case"meta":if(s=Bd("meta","content",i).get(r+(n.content||"")))for(l=0;l<s.length;l++)if((o=s[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&o.getAttribute("name")===(null==n.name?null:n.name)&&o.getAttribute("property")===(null==n.property?null:n.property)&&o.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&o.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(l,1);break t}ed(o=i.createElement(r),r,n),i.head.appendChild(o);break;default:throw Error(a(468,r))}o[Pe]=e,Ve(o),r=o}e.stateNode=r}else Wd(i,e.type,e.stateNode);else e.stateNode=_d(i,r,e.memoizedProps);else o!==r?(null===o?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):o.count--,null===r?Wd(i,e.type,e.stateNode):_d(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&pl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Pl(t,e),Nl(e),512&r&&(bl||null===n||dl(n,n.return)),null!==n&&4&r&&pl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Pl(t,e),Nl(e),512&r&&(bl||null===n||dl(n,n.return)),32&e.flags){i=e.stateNode;try{Dt(i,"")}catch(m){uu(e,e.return,m)}}4&r&&null!=e.stateNode&&pl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(kl=!0);break;case 6:if(Pl(t,e),Nl(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){uu(e,e.return,m)}}break;case 3:if(Ld=null,i=Ml,Ml=Ed(t.containerInfo),Pl(t,e),Ml=i,Nl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ch(t.containerInfo)}catch(m){uu(e,e.return,m)}kl&&(kl=!1,Ol(e));break;case 4:r=Ml,Ml=Ed(e.stateNode.containerInfo),Pl(t,e),Nl(e),Ml=r;break;case 12:default:Pl(t,e),Nl(e);break;case 13:Pl(t,e),Nl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(kc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Il(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=wl,d=bl;if(wl=u||i,bl=d||c,Pl(t,e),bl=d,wl=u,Nl(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||wl||bl||Ll(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(o=c.stateNode,i)"function"===typeof(s=o.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,p=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(m){uu(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(m){uu(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Il(e,n))));break;case 19:Pl(t,e),Nl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Il(e,r)));case 30:case 21:}}function Nl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(ml(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var i=n.stateNode;yl(e,fl(e),i);break;case 5:var o=n.stateNode;32&n.flags&&(Dt(o,""),n.flags&=-33),yl(e,fl(e),o);break;case 3:case 4:var s=n.stateNode.containerInfo;gl(e,fl(e),s);break;default:throw Error(a(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ol(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ol(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function jl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)El(e,t.alternate,t),t=t.sibling}function Ll(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sl(4,t,t.return),Ll(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Ll(t);break;case 27:kd(t.stateNode);case 26:case 5:dl(t,t.return),Ll(t);break;case 22:null===t.memoizedState&&Ll(t);break;default:Ll(t)}e=e.sibling}}function Bl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,o=t,a=o.flags;switch(o.tag){case 0:case 11:case 15:Bl(i,o,n),al(4,o);break;case 1:if(Bl(i,o,n),"function"===typeof(i=(r=o).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){uu(r,r.return,c)}if(null!==(i=(r=o).updateQueue)){var s=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)ho(l[i],s)}catch(c){uu(r,r.return,c)}}n&&64&a&&ll(o),ul(o,o.return);break;case 27:vl(o);case 26:case 5:Bl(i,o,n),n&&null===r&&4&a&&hl(o),ul(o,o.return);break;case 12:Bl(i,o,n);break;case 13:Bl(i,o,n),n&&4&a&&Fl(i,o);break;case 22:null===o.memoizedState&&Bl(i,o,n),ul(o,o.return);break;case 30:break;default:Bl(i,o,n)}t=t.sibling}}function Wl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&_i(n))}function Ul(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&_i(e))}function ql(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hl(e,t,n,r),t=t.sibling}function Hl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:ql(e,t,n,r),2048&i&&al(9,t);break;case 1:case 13:default:ql(e,t,n,r);break;case 3:ql(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&_i(e)));break;case 12:if(2048&i){ql(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,a=o.id,s=o.onPostCommit;"function"===typeof s&&s(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else ql(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,a=t.alternate,null!==t.memoizedState?2&o._visibility?ql(e,t,n,r):Vl(e,t):2&o._visibility?ql(e,t,n,r):(o._visibility|=2,zl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&Wl(a,t);break;case 24:ql(e,t,n,r),2048&i&&Ul(t.alternate,t)}}function zl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,a=t,s=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:zl(o,a,s,l,i),al(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?zl(o,a,s,l,i):Vl(o,a):(u._visibility|=2,zl(o,a,s,l,i)),i&&2048&c&&Wl(a.alternate,a);break;case 24:zl(o,a,s,l,i),i&&2048&c&&Ul(a.alternate,a);break;default:zl(o,a,s,l,i)}t=t.sibling}}function Vl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Vl(n,r),2048&i&&Wl(r.alternate,r);break;case 24:Vl(n,r),2048&i&&Ul(r.alternate,r);break;default:Vl(n,r)}t=t.sibling}}var Kl=8192;function Yl(e){if(e.subtreeFlags&Kl)for(e=e.child;null!==e;)Gl(e),e=e.sibling}function Gl(e){switch(e.tag){case 26:Yl(e),e.flags&Kl&&null!==e.memoizedState&&function(e,t,n){if(null===qd)throw Error(a(475));var r=qd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Rd(n.href),o=e.querySelector(Fd(i));if(o)return null!==(e=o._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=zd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=o,void Ve(o);o=e.ownerDocument||e,n=Id(n),(i=Dd.get(i))&&Od(n,i),Ve(o=o.createElement("link"));var s=o;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ed(o,"link",n),t.instance=o}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=zd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ml,e.memoizedState,e.memoizedProps);break;case 5:default:Yl(e);break;case 3:case 4:var t=Ml;Ml=Ed(e.stateNode.containerInfo),Yl(e),Ml=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Kl,Kl=16777216,Yl(e),Kl=t):Yl(e))}}function Ql(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Xl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];xl=r,$l(r,e)}Ql(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Zl(e),e=e.sibling}function Zl(e){switch(e.tag){case 0:case 11:case 15:Xl(e),2048&e.flags&&sl(9,e,e.return);break;case 3:case 12:default:Xl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Jl(e)):Xl(e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];xl=r,$l(r,e)}Ql(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:sl(8,t,t.return),Jl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function $l(e,t){for(;null!==xl;){var n=xl;switch(n.tag){case 0:case 11:case 15:sl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:_i(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,xl=r;else e:for(n=e;null!==xl;){var i=(r=xl).sibling,o=r.return;if(Sl(r),r===n){xl=null;break e}if(null!==i){i.return=o,xl=i;break e}xl=o}}}var ec={getCacheForType:function(e){var t=Ai(Pi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,ic=null,oc=0,ac=0,sc=null,lc=!1,cc=!1,uc=!1,dc=0,hc=0,pc=0,mc=0,fc=0,gc=0,yc=0,vc=null,wc=null,bc=!1,kc=0,Dc=1/0,xc=null,Ec=null,Sc=0,Ac=null,Cc=null,Tc=0,Rc=0,Fc=null,Ic=null,Pc=0,Mc=null;function _c(){if(0!==(2&nc)&&0!==oc)return oc&-oc;if(null!==_.T){return 0!==ji?ji:Ru()}return Fe()}function Nc(){0===gc&&(gc=0===(536870912&oc)||oi?De():536870912);var e=is.current;return null!==e&&(e.flags|=32),gc}function Oc(e,t,n){(e!==rc||2!==ac&&9!==ac)&&null===e.cancelPendingCommit||(Hc(e,0),Wc(e,oc,gc,!1)),Se(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(mc|=n),4===hc&&Wc(e,oc,gc,!1)),Du(e))}function jc(e,t,n){if(0!==(6&nc))throw Error(a(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||be(e,t),i=r?function(e,t){var n=nc;nc|=2;var r=Vc(),i=Kc();rc!==e||oc!==t?(xc=null,Dc=te()+500,Hc(e,t)):cc=be(e,t);e:for(;;)try{if(0!==ac&&null!==ic){t=ic;var o=sc;t:switch(ac){case 1:ac=0,sc=null,$c(e,t,o,1);break;case 2:case 9:if(Qi(o)){ac=0,sc=null,Jc(t);break}t=function(){2!==ac&&9!==ac||rc!==e||(ac=7),Du(e)},o.then(t,t);break e;case 3:ac=7;break e;case 4:ac=5;break e;case 7:Qi(o)?(ac=0,sc=null,Jc(t)):(ac=0,sc=null,$c(e,t,o,7));break;case 5:var s=null;switch(ic.tag){case 26:s=ic.memoizedState;case 5:case 27:var l=ic;if(!s||Ud(s)){ac=0,sc=null;var c=l.sibling;if(null!==c)ic=c;else{var u=l.return;null!==u?(ic=u,eu(u)):ic=null}break t}}ac=0,sc=null,$c(e,t,o,5);break;case 6:ac=0,sc=null,$c(e,t,o,6);break;case 8:qc(),hc=6;break e;default:throw Error(a(462))}}Xc();break}catch(d){zc(e,d)}return vi=yi=null,_.H=r,_.A=i,nc=n,null!==ic?0:(rc=null,oc=0,Tr(),hc)}(e,t):Gc(e,t,!0),o=r;;){if(0===i){cc&&!r&&Wc(e,t,0,!1);break}if(n=e.current.alternate,!o||Bc(n)){if(2===i){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;i=vc;var c=l.current.memoizedState.isDehydrated;if(c&&(Hc(l,s).flags|=256),2!==(s=Gc(l,s,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=o,mc|=o,i=4;break e}o=wc,wc=i,null!==o&&(null===wc?wc=o:wc.push.apply(wc,o))}i=s}if(o=!1,2!==i)continue}}if(1===i){Hc(e,0),Wc(e,t,0,!0);break}e:{switch(r=e,o=i){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Wc(r,t,gc,!lc);break e;case 2:wc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(i=kc+300-te())){if(Wc(r,t,gc,!lc),0!==we(r,0,!0))break e;r.timeoutHandle=ld(Lc.bind(null,r,n,wc,xc,bc,t,gc,mc,yc,lc,o,2,-0,0),i)}else Lc(r,n,wc,xc,bc,t,gc,mc,yc,lc,o,0,-0,0)}break}i=Gc(e,t,!1),o=!1}Du(e)}function Lc(e,t,n,r,i,o,s,l,c,u,d,h,p,m){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(qd={stylesheets:null,count:0,unsuspend:Hd},Gl(t),null!==(h=function(){if(null===qd)throw Error(a(475));var e=qd;return e.stylesheets&&0===e.count&&Kd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Kd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nu.bind(null,e,t,o,n,r,i,s,l,c,d,1,p,m)),void Wc(e,o,s,!u);nu(e,t,o,n,r,i,s,l,c)}function Bc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Qn(o(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wc(e,t,n,r){t&=~fc,t&=~mc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var o=31-pe(i),a=1<<o;r[o]=-1,i&=~a}0!==n&&Ae(e,n,t)}function Uc(){return 0!==(6&nc)||(xu(0,!1),!1)}function qc(){if(null!==ic){if(0===ac)var e=ic.return;else vi=yi=null,Lo(e=ic),Qa=null,Xa=0,e=ic;for(;null!==e;)ol(e.alternate,e),e=e.return;ic=null}}function Hc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),qc(),rc=e,ic=n=Lr(e.current,null),oc=t,ac=0,sc=null,lc=!1,cc=be(e,t),uc=!1,yc=gc=fc=mc=pc=hc=0,wc=vc=null,bc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-pe(r),o=1<<i;t|=e[i],r&=~o}return dc=t,Tr(),n}function zc(e,t){bo=null,_.H=Va,t===Vi||t===Yi?(t=$i(),ac=3):t===Ki?(t=$i(),ac=4):ac=t===As?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,sc=t,null===ic&&(hc=1,ks(e,Er(t,e.current)))}function Vc(){var e=_.H;return _.H=Va,null===e?Va:e}function Kc(){var e=_.A;return _.A=ec,e}function Yc(){hc=4,lc||(4194048&oc)!==oc&&null!==is.current||(cc=!0),0===(134217727&pc)&&0===(134217727&mc)||null===rc||Wc(rc,oc,gc,!1)}function Gc(e,t,n){var r=nc;nc|=2;var i=Vc(),o=Kc();rc===e&&oc===t||(xc=null,Hc(e,t)),t=!1;var a=hc;e:for(;;)try{if(0!==ac&&null!==ic){var s=ic,l=sc;switch(ac){case 8:qc(),a=6;break e;case 3:case 2:case 9:case 6:null===is.current&&(t=!0);var c=ac;if(ac=0,sc=null,$c(e,s,l,c),n&&cc){a=0;break e}break;default:c=ac,ac=0,sc=null,$c(e,s,l,c)}}Qc(),a=hc;break}catch(u){zc(e,u)}return t&&e.shellSuspendCounter++,vi=yi=null,nc=r,_.H=i,_.A=o,null===ic&&(rc=null,oc=0,Tr()),a}function Qc(){for(;null!==ic;)Zc(ic)}function Xc(){for(;null!==ic&&!$();)Zc(ic)}function Zc(e){var t=Zs(e.alternate,e,dc);e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function Jc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Os(n,t,t.pendingProps,t.type,void 0,oc);break;case 11:t=Os(n,t,t.pendingProps,t.type.render,t.ref,oc);break;case 5:Lo(t);default:ol(n,t),t=Zs(n,t=ic=Br(t,dc),dc)}e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function $c(e,t,n,r){vi=yi=null,Lo(t),Qa=null,Xa=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&xi(t,n,i,!0),null!==(n=is.current)){switch(n.tag){case 13:return null===os?Yc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Gi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),du(e,r,i)),!1;case 22:return n.flags|=65536,r===Gi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),du(e,r,i)),!1}throw Error(a(435,n.tag))}return du(e,r,i),Yc(),!1}if(oi)return null!==(t=is.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&fi(Er(e=Error(a(422),{cause:r}),n))):(r!==li&&fi(Er(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Er(r,n),so(e,i=xs(e.stateNode,r,i)),4!==hc&&(hc=2)),!1;var o=Error(a(520),{cause:r});if(o=Er(o,n),null===vc?vc=[o]:vc.push(o),4!==hc&&(hc=2),null===t)return!0;r=Er(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,so(n,e=xs(n.stateNode,r,e)),!1;case 1:if(t=n.type,o=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==o&&"function"===typeof o.componentDidCatch&&(null===Ec||!Ec.has(o))))return n.flags|=65536,i&=-i,n.lanes|=i,Ss(i=Es(i),e,n,r),so(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,oc))return hc=1,ks(e,Er(n,e.current)),void(ic=null)}catch(o){if(null!==i)throw ic=i,o;return hc=1,ks(e,Er(n,e.current)),void(ic=null)}32768&t.flags?(oi||1===r?e=!0:cc||0!==(536870912&oc)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=is.current)&&13===r.tag&&(r.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=rl(t.alternate,t,dc);if(null!==n)return void(ic=n);if(null!==(t=t.sibling))return void(ic=t);ic=t=e}while(null!==t);0===hc&&(hc=5)}function tu(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(ic=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ic=e);ic=e=n}while(null!==e);hc=6,ic=null}function nu(e,t,n,r,i,o,s,l,c){e.cancelPendingCommit=null;do{su()}while(0!==Sc);if(0!==(6&nc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(o=t.lanes|t.childLanes,function(e,t,n,r,i,o){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-pe(n),d=1<<u;s[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var p=h[u];null!==p&&(p.lane&=-536870913)}n&=~d}0!==r&&Ae(e,r,0),0!==o&&0===i&&0!==e.tag&&(e.suspendedLanes|=o&~(a&~t))}(e,n,o|=Cr,s,l,c),e===rc&&(ic=rc=null,oc=0),Cc=t,Ac=e,Tc=n,Rc=o,Fc=i,Ic=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,Z(oe,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=_.T,_.T=null,i=N.p,N.p=2,s=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(g){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==o||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++u===i&&(l=s),p===o&&++d===r&&(c=s),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,xl=t;null!==xl;)if(e=(t=xl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,xl=e;else for(;null!==xl;){switch(o=(t=xl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==o){e=void 0,n=t,i=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var f=gs(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(f,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){uu(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))fd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,xl=e;break}xl=t.return}}(e,t)}finally{nc=s,N.p=i,_.T=r}}Sc=1,ru(),iu(),ou()}}function ru(){if(1===Sc){Sc=0;var e=Ac,t=Cc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=_.T,_.T=null;var r=N.p;N.p=2;var i=nc;nc|=4;try{_l(t,e);var o=nd,a=er(e.containerInfo),s=o.focusedElem,l=o.selectionRange;if(a!==s&&s&&s.ownerDocument&&$n(s.ownerDocument.documentElement,s)){if(null!==l&&tr(s)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in s)s.selectionStart=c,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var p=h.getSelection(),m=s.textContent.length,f=Math.min(l.start,m),g=void 0===l.end?f:Math.min(l.end,m);!p.extend&&f>g&&(a=g,g=f,f=a);var y=Jn(s,f),v=Jn(s,g);if(y&&v&&(1!==p.rangeCount||p.anchorNode!==y.node||p.anchorOffset!==y.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var w=d.createRange();w.setStart(y.node,y.offset),p.removeAllRanges(),f>g?(p.addRange(w),p.extend(v.node,v.offset)):(w.setEnd(v.node,v.offset),p.addRange(w))}}}}for(d=[],p=s;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}nh=!!td,nd=td=null}finally{nc=i,N.p=r,_.T=n}}e.current=t,Sc=2}}function iu(){if(2===Sc){Sc=0;var e=Ac,t=Cc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=_.T,_.T=null;var r=N.p;N.p=2;var i=nc;nc|=4;try{El(e,t.alternate,t)}finally{nc=i,N.p=r,_.T=n}}Sc=3}}function ou(){if(4===Sc||3===Sc){Sc=0,ee();var e=Ac,t=Cc,n=Tc,r=Ic;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Sc=5:(Sc=0,Cc=Ac=null,au(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Ec=null),Re(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=_.T,i=N.p,N.p=2,_.T=null;try{for(var o=e.onRecoverableError,a=0;a<r.length;a++){var s=r[a];o(s.value,{componentStack:s.stack})}}finally{_.T=t,N.p=i}}0!==(3&Tc)&&su(),Du(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Mc?Pc++:(Pc=0,Mc=e):Pc=0,xu(0,!1)}}function au(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,_i(t)))}function su(e){return ru(),iu(),ou(),lu()}function lu(){if(5!==Sc)return!1;var e=Ac,t=Rc;Rc=0;var n=Re(Tc),r=_.T,i=N.p;try{N.p=32>n?32:n,_.T=null,n=Fc,Fc=null;var o=Ac,s=Tc;if(Sc=0,Cc=Ac=null,Tc=0,0!==(6&nc))throw Error(a(331));var l=nc;if(nc|=4,Zl(o.current),Hl(o,o.current,s,n),nc=l,xu(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,o)}catch(c){}return!0}finally{N.p=i,_.T=r,au(e,t)}}function cu(e,t,n){t=Er(n,t),null!==(e=oo(e,t=xs(e.stateNode,t,2),2))&&(Se(e,2),Du(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ec||!Ec.has(r))){e=Er(n,e),null!==(r=oo(t,n=Es(2),2))&&(Ss(n,r,t,e),Se(r,2),Du(r));break}}t=t.return}}function du(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(uc=!0,i.add(n),e=hu.bind(null,e,t,n),t.then(e,e))}function hu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(oc&n)===n&&(4===hc||3===hc&&(62914560&oc)===oc&&300>te()-kc?0===(2&nc)&&Hc(e,0):fc|=n,yc===oc&&(yc=0)),Du(e)}function pu(e,t){0===t&&(t=xe()),null!==(e=Ir(e,t))&&(Se(e,t),Du(e))}function mu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pu(e,n)}function fu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),pu(e,n)}var gu=null,yu=null,vu=!1,wu=!1,bu=!1,ku=0;function Du(e){e!==yu&&null===e.next&&(null===yu?gu=yu=e:yu=yu.next=e),wu=!0,vu||(vu=!0,dd(function(){0!==(6&nc)?Z(re,Eu):Su()}))}function xu(e,t){if(!bu&&wu){bu=!0;do{for(var n=!1,r=gu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var o=0;else{var a=r.suspendedLanes,s=r.pingedLanes;o=(1<<31-pe(42|e)+1)-1,o=201326741&(o&=i&~(a&~s))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,Tu(r,o))}else o=oc,0===(3&(o=we(r,r===rc?o:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||be(r,o)||(n=!0,Tu(r,o));r=r.next}}while(n);bu=!1}}function Eu(){Su()}function Su(){wu=vu=!1;var e=0;0!==ku&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==sd&&(sd=e,!0);return sd=null,!1}()&&(e=ku),ku=0);for(var t=te(),n=null,r=gu;null!==r;){var i=r.next,o=Au(r,t);0===o?(r.next=null,null===n?gu=i:n.next=i,null===i&&(yu=n)):(n=r,(0!==e||0!==(3&o))&&(wu=!0)),r=i}xu(e,!1)}function Au(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var a=31-pe(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=ke(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}if(n=oc,n=we(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===ac||9===ac)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&J(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||be(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&J(r),Re(n)){case 2:case 8:n=ie;break;case 32:default:n=oe;break;case 268435456:n=se}return r=Cu.bind(null,e),n=Z(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&J(r),e.callbackPriority=2,e.callbackNode=null,2}function Cu(e,t){if(0!==Sc&&5!==Sc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(su()&&e.callbackNode!==n)return null;var r=oc;return 0===(r=we(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(jc(e,r,t),Au(e,te()),null!=e.callbackNode&&e.callbackNode===n?Cu.bind(null,e):null)}function Tu(e,t){if(su())return null;jc(e,t,!0)}function Ru(){return 0===ku&&(ku=De()),ku}function Fu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Rt(""+e)}function Iu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Pu=0;Pu<kr.length;Pu++){var Mu=kr[Pu];Dr(Mu.toLowerCase(),"on"+(Mu[0].toUpperCase()+Mu.slice(1)))}Dr(pr,"onAnimationEnd"),Dr(mr,"onAnimationIteration"),Dr(fr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(gr,"onTransitionRun"),Dr(yr,"onTransitionStart"),Dr(vr,"onTransitionCancel"),Dr(wr,"onTransitionEnd"),Qe("onMouseEnter",["mouseout","mouseover"]),Qe("onMouseLeave",["mouseout","mouseover"]),Qe("onPointerEnter",["pointerout","pointerover"]),Qe("onPointerLeave",["pointerout","pointerover"]),Ge("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ge("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ge("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ge("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_u));function Ou(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=c;try{o(i)}catch(u){ys(u)}i.currentTarget=null,o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=c;try{o(i)}catch(u){ys(u)}i.currentTarget=null,o=l}}}}function ju(e,t){var n=t[Ne];void 0===n&&(n=t[Ne]=new Set);var r=e+"__bubble";n.has(r)||(Uu(t,e,2,!1),n.add(r))}function Lu(e,t,n){var r=0;t&&(r|=4),Uu(n,e,r,t)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function Wu(e){if(!e[Bu]){e[Bu]=!0,Ke.forEach(function(t){"selectionchange"!==t&&(Nu.has(t)||Lu(t,!1,e),Lu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bu]||(t[Bu]=!0,Lu("selectionchange",!1,t))}}function Uu(e,t,n,r){switch(ch(t)){case 2:var i=rh;break;case 8:i=ih;break;default:i=oh}n=i.bind(null,t,n,e),i=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qu(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===i)return;a=a.return}for(;null!==s;){if(null===(a=Ue(s)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=o=a;continue e}s=s.parentNode}}r=r.return}Ot(function(){var r=o,i=It(n),a=[];e:{var s=br.get(e);if(void 0!==s){var c=$t,u=e;switch(e){case"keypress":if(0===Vt(n))break e;case"keydown":case"keyup":c=fn;break;case"focusin":u="focus",c=an;break;case"focusout":u="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=yn;break;case pr:case mr:case fr:c=sn;break;case wr:c=vn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=wn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=bn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),p=d?null!==s?s+"Capture":null:s;d=[];for(var m,f=r;null!==f;){var g=f;if(m=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===m||null===p||null!=(g=jt(f,p))&&d.push(Hu(f,g,m)),h)break;f=f.return}0<d.length&&(s=new c(s,u,null,n,i),a.push({event:s,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Ft||!(u=n.relatedTarget||n.fromElement)||!Ue(u)&&!u[_e])&&(c||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Ue(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,g="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",p="onPointerEnter",f="pointer"),h=null==c?s:He(c),m=null==u?s:He(u),(s=new d(g,f+"leave",c,n,i)).target=h,s.relatedTarget=m,g=null,Ue(i)===r&&((d=new d(p,f+"enter",u,n,i)).target=m,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(p=u,f=0,m=d=c;m;m=Vu(m))f++;for(m=0,g=p;g;g=Vu(g))m++;for(;0<f-m;)d=Vu(d),f--;for(;0<m-f;)p=Vu(p),m--;for(;f--;){if(d===p||null!==p&&d===p.alternate)break e;d=Vu(d),p=Vu(p)}d=null}else d=null;null!==c&&Ku(a,s,c,d,!1),null!==u&&null!==h&&Ku(a,h,u,d,!0)}if("select"===(c=(s=r?He(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var y=Ln;else if(Pn(s))if(Bn)y=Gn;else{y=Kn;var v=Vn}else!(c=s.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&At(r.elementType)&&(y=Ln):y=Yn;switch(y&&(y=y(e,r))?Mn(a,y,n,i):(v&&v(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&vt(s,"number",s.value)),v=r?He(r):window,e){case"focusin":(Pn(v)||"true"===v.contentEditable)&&(rr=v,ir=r,or=null);break;case"focusout":or=ir=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,sr(a,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":sr(a,n,i)}var w;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Fn?Tn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Sn&&"ko"!==n.locale&&(Fn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Fn&&(w=zt()):(qt="value"in(Ut=i)?Ut.value:Ut.textContent,Fn=!0)),0<(v=zu(r,b)).length&&(b=new cn(b,e,null,n,i),a.push({event:b,listeners:v}),w?b.data=w:null!==(w=Rn(n))&&(b.data=w))),(w=En?function(e,t){switch(e){case"compositionend":return Rn(t);case"keypress":return 32!==t.which?null:(Cn=!0,An);case"textInput":return(e=t.data)===An&&Cn?null:e;default:return null}}(e,n):function(e,t){if(Fn)return"compositionend"===e||!Dn&&Tn(e,t)?(e=zt(),Ht=qt=Ut=null,Fn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(b=zu(r,"onBeforeInput")).length&&(v=new cn("onBeforeInput","beforeinput",null,n,i),a.push({event:v,listeners:b}),v.data=w)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var o=Fu((i[Me]||null).action),a=r.submitter;a&&null!==(t=(t=a[Me]||null)?Fu(t.formAction):a.getAttribute("formAction"))&&(o=t,a=null);var s=new $t("action","action",null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==ku){var e=a?Iu(i,a):new FormData(i);Ia(n,{pending:!0,data:e,method:i.method,action:o},null,e)}}else"function"===typeof o&&(s.preventDefault(),e=a?Iu(i,a):new FormData(i),Ia(n,{pending:!0,data:e,method:i.method,action:o},o,e))},currentTarget:i}]})}}(a,e,r,n,i)}Ou(a,t)})}function Hu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===o||(null!=(i=jt(e,n))&&r.unshift(Hu(e,i,o)),null!=(i=jt(e,t))&&r.push(Hu(e,i,o))),3===e.tag)return r;e=e.return}return[]}function Vu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Ku(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===c||(l=c,i?null!=(c=jt(n,o))&&a.unshift(Hu(n,c,l)):i||null!=(c=jt(n,o))&&a.push(Hu(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yu=/\r\n?/g,Gu=/\u0000|\uFFFD/g;function Qu(e){return("string"===typeof e?e:""+e).replace(Yu,"\n").replace(Gu,"")}function Xu(e,t){return t=Qu(t),Qu(e)===t}function Zu(){}function Ju(e,t,n,r,i,o){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Dt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Dt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":St(e,r,o);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Rt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof o&&("formAction"===n?("input"!==t&&Ju(e,t,"name",i.name,i,null),Ju(e,t,"formEncType",i.formEncType,i,null),Ju(e,t,"formMethod",i.formMethod,i,null),Ju(e,t,"formTarget",i.formTarget,i,null)):(Ju(e,t,"encType",i.encType,i,null),Ju(e,t,"method",i.method,i,null),Ju(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Rt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Zu);break;case"onScroll":null!=r&&ju("scroll",e);break;case"onScrollEnd":null!=r&&ju("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Rt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":ju("beforetoggle",e),ju("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Ct.get(n)||n,r)}}function $u(e,t,n,r,i,o){switch(n){case"style":St(e,r,o);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Dt(e,r):("number"===typeof r||"bigint"===typeof r)&&Dt(e,""+r);break;case"onScroll":null!=r&&ju("scroll",e);break;case"onScrollEnd":null!=r&&ju("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Zu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ye.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(o=null!=(o=e[Me]||null)?o[n]:null)&&e.removeEventListener(t,o,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof o&&null!==o&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ju("error",e),ju("load",e);var r,i=!1,o=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Ju(e,t,r,s,n,null)}}return o&&Ju(e,t,"srcSet",n.srcSet,n,null),void(i&&Ju(e,t,"src",n.src,n,null));case"input":ju("invalid",e);var l=r=s=o=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":o=d;break;case"type":s=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:Ju(e,t,i,d,n,null)}}return yt(e,r,l,c,u,s,o,!1),void dt(e);case"select":for(o in ju("invalid",e),i=s=r=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":r=l;break;case"defaultValue":s=l;break;case"multiple":i=l;default:Ju(e,t,o,l,n,null)}return t=r,n=s,e.multiple=!!i,void(null!=t?wt(e,!!i,t,!1):null!=n&&wt(e,!!i,n,!0));case"textarea":for(s in ju("invalid",e),r=o=i=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":i=l;break;case"defaultValue":o=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Ju(e,t,s,l,n,null)}return kt(e,i,o,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Ju(e,t,c,i,n,null);return;case"dialog":ju("beforetoggle",e),ju("toggle",e),ju("cancel",e),ju("close",e);break;case"iframe":case"object":ju("load",e);break;case"video":case"audio":for(i=0;i<_u.length;i++)ju(_u[i],e);break;case"image":ju("error",e),ju("load",e);break;case"details":ju("toggle",e);break;case"embed":case"source":case"link":ju("error",e),ju("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Ju(e,t,u,i,n,null)}return;default:if(At(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&$u(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Ju(e,t,l,i,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function id(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function od(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ad(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sd=null;var ld="function"===typeof setTimeout?setTimeout:void 0,cd="function"===typeof clearTimeout?clearTimeout:void 0,ud="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ud?function(e){return ud.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout(function(){throw e})}function pd(e){return"head"===e}function md(e,t){var n=t,r=0,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&kd(a.documentElement),2&n&&kd(a.body),4&n)for(kd(n=a.head),a=n.firstChild;a;){var s=a.nextSibling,l=a.nodeName;a[Be]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=s}}if(0===i)return e.removeChild(o),void Ch(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=o}while(n);Ch(t)}function fd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":fd(n),We(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vd=null;function wd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function bd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function kd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);We(e)}var Dd=new Map,xd=new Set;function Ed(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Sd=N.d;N.d={f:function(){var e=Sd.f(),t=Uc();return e||t},r:function(e){var t=qe(e);null!==t&&5===t.tag&&"form"===t.type?Ma(t):Sd.r(e)},D:function(e){Sd.D(e),Cd("dns-prefetch",e,null)},C:function(e,t){Sd.C(e,t),Cd("preconnect",e,t)},L:function(e,t,n){Sd.L(e,t,n);var r=Ad;if(r&&e&&t){var i='link[rel="preload"][as="'+ft(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+ft(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+ft(n.imageSizes)+'"]')):i+='[href="'+ft(e)+'"]';var o=i;switch(t){case"style":o=Rd(e);break;case"script":o=Pd(e)}Dd.has(o)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Dd.set(o,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Fd(o))||"script"===t&&r.querySelector(Md(o))||(ed(t=r.createElement("link"),"link",e),Ve(t),r.head.appendChild(t)))}},m:function(e,t){Sd.m(e,t);var n=Ad;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+ft(r)+'"][href="'+ft(e)+'"]',o=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Pd(e)}if(!Dd.has(o)&&(e=h({rel:"modulepreload",href:e},t),Dd.set(o,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Md(o)))return}ed(r=n.createElement("link"),"link",e),Ve(r),n.head.appendChild(r)}}},X:function(e,t){Sd.X(e,t);var n=Ad;if(n&&e){var r=ze(n).hoistableScripts,i=Pd(e),o=r.get(i);o||((o=n.querySelector(Md(i)))||(e=h({src:e,async:!0},t),(t=Dd.get(i))&&jd(e,t),Ve(o=n.createElement("script")),ed(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}},S:function(e,t,n){Sd.S(e,t,n);var r=Ad;if(r&&e){var i=ze(r).hoistableStyles,o=Rd(e);t=t||"default";var a=i.get(o);if(!a){var s={loading:0,preload:null};if(a=r.querySelector(Fd(o)))s.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Dd.get(o))&&Od(e,n);var l=a=r.createElement("link");Ve(l),ed(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Nd(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:s},i.set(o,a)}}},M:function(e,t){Sd.M(e,t);var n=Ad;if(n&&e){var r=ze(n).hoistableScripts,i=Pd(e),o=r.get(i);o||((o=n.querySelector(Md(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=Dd.get(i))&&jd(e,t),Ve(o=n.createElement("script")),ed(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}}};var Ad="undefined"===typeof document?null:document;function Cd(e,t,n){var r=Ad;if(r&&"string"===typeof t&&t){var i=ft(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),xd.has(i)||(xd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(ed(t=r.createElement("link"),"link",e),Ve(t),r.head.appendChild(t)))}}function Td(e,t,n,r){var i,o,s,l,c=(c=z.current)?Ed(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Rd(n.href),(r=(n=ze(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Rd(n.href);var u=ze(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Fd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Dd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Dd.set(e,n),u||(i=c,o=e,s=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+o+"]")?l.loading=1:(o=i.createElement("link"),l.preload=o,o.addEventListener("load",function(){return l.loading|=1}),o.addEventListener("error",function(){return l.loading|=2}),ed(o,"link",s),Ve(o),i.head.appendChild(o))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Pd(n),(r=(n=ze(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Rd(e){return'href="'+ft(e)+'"'}function Fd(e){return'link[rel="stylesheet"]['+e+"]"}function Id(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Pd(e){return'[src="'+ft(e)+'"]'}function Md(e){return"script[async]"+e}function _d(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+ft(n.href)+'"]');if(r)return t.instance=r,Ve(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ve(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",i),Nd(r,n.precedence,e),t.instance=r;case"stylesheet":i=Rd(n.href);var o=e.querySelector(Fd(i));if(o)return t.state.loading|=4,t.instance=o,Ve(o),o;r=Id(n),(i=Dd.get(i))&&Od(r,i),Ve(o=(e.ownerDocument||e).createElement("link"));var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ed(o,"link",r),t.state.loading|=4,Nd(o,n.precedence,e),t.instance=o;case"script":return o=Pd(n.src),(i=e.querySelector(Md(o)))?(t.instance=i,Ve(i),i):(r=n,(i=Dd.get(o))&&jd(r=h({},n),i),Ve(i=(e=e.ownerDocument||e).createElement("script")),ed(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Nd(r,n.precedence,e));return t.instance}function Nd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,o=i,a=0;a<r.length;a++){var s=r[a];if(s.dataset.precedence===t)o=s;else if(o!==i)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Od(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function jd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ld=null;function Bd(e,t,n){if(null===Ld){var r=new Map,i=Ld=new Map;i.set(n,r)}else(r=(i=Ld).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var o=n[i];if(!(o[Be]||o[Pe]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var a=o.getAttribute(t)||"";a=e+a;var s=r.get(a);s?s.push(o):r.set(a,[o])}}return r}function Wd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Ud(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var qd=null;function Hd(){}function zd(){if(this.count--,0===this.count)if(this.stylesheets)Kd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Vd=null;function Kd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Vd=new Map,t.forEach(Yd,e),Vd=null,zd.call(e))}function Yd(e,t){if(!(4&t.state.loading)){var n=Vd.get(e);if(n)var r=n.get(null);else{n=new Map,Vd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var a=i[o];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(o=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=zd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),o?o.parentNode.insertBefore(i,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Gd={$$typeof:k,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function Qd(e,t,n,r,i,o,a,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.hiddenUpdates=Ee(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function Xd(e,t,n,r,i,o,a,s,l,c,u,d){return e=new Qd(e,t,n,a,s,l,c,d),t=1,!0===o&&(t|=24),o=Or(3,null,null,t),e.current=o,o.stateNode=e,(t=Mi()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},no(o),e}function Zd(e){return e?e=_r:_r}function Jd(e,t,n,r,i,o){i=Zd(i),null===r.context?r.context=i:r.pendingContext=i,(r=io(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=oo(e,r,t))&&(Oc(n,0,t),ao(n,e,t))}function $d(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){$d(e,t),(e=e.alternate)&&$d(e,t)}function th(e){if(13===e.tag){var t=Ir(e,67108864);null!==t&&Oc(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var i=_.T;_.T=null;var o=N.p;try{N.p=2,oh(e,t,n,r)}finally{N.p=o,_.T=i}}function ih(e,t,n,r){var i=_.T;_.T=null;var o=N.p;try{N.p=8,oh(e,t,n,r)}finally{N.p=o,_.T=i}}function oh(e,t,n,r){if(nh){var i=ah(r);if(null===i)qu(e,t,r,sh,n),vh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return dh=wh(dh,e,t,n,r,i),!0;case"dragenter":return hh=wh(hh,e,t,n,r,i),!0;case"mouseover":return ph=wh(ph,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return mh.set(o,wh(mh.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,fh.set(o,wh(fh.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(vh(e,r),4&t&&-1<yh.indexOf(e)){for(;null!==i;){var o=qe(i);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var a=ve(o.pendingLanes);if(0!==a){var s=o;for(s.pendingLanes|=2,s.entangledLanes|=2;a;){var l=1<<31-pe(a);s.entanglements[1]|=l,a&=~l}Du(o),0===(6&nc)&&(Dc=te()+500,xu(0,!1))}}break;case 13:null!==(s=Ir(o,2))&&Oc(s,0,2),Uc(),eh(o,2)}if(null===(o=ah(r))&&qu(e,t,r,sh,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else qu(e,t,r,null,n)}}function ah(e){return lh(e=It(e))}var sh=null;function lh(e){if(sh=null,null!==(e=Ue(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return sh=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case oe:case ae:return 32;case se:return 268435456;default:return 32}default:return 32}}var uh=!1,dh=null,hh=null,ph=null,mh=new Map,fh=new Map,gh=[],yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":ph=null;break;case"pointerover":case"pointerout":mh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fh.delete(t.pointerId)}}function wh(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=qe(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function bh(e){var t=Ue(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=N.p;try{return N.p=e,t()}finally{N.p=n}}(e.priority,function(){if(13===n.tag){var e=_c();e=Te(e);var t=Ir(n,e);null!==t&&Oc(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function kh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ah(e.nativeEvent);if(null!==n)return null!==(t=qe(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ft=r,n.target.dispatchEvent(r),Ft=null,t.shift()}return!0}function Dh(e,t,n){kh(e)&&n.delete(t)}function xh(){uh=!1,null!==dh&&kh(dh)&&(dh=null),null!==hh&&kh(hh)&&(hh=null),null!==ph&&kh(ph)&&(ph=null),mh.forEach(Dh),fh.forEach(Dh)}function Eh(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,xh)))}var Sh=null;function Ah(e){Sh!==e&&(Sh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Sh===e&&(Sh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===lh(r||n))continue;break}var o=qe(n);null!==o&&(e.splice(t,3),t-=3,Ia(o,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Ch(e){function t(t){return Eh(t,e)}null!==dh&&Eh(dh,e),null!==hh&&Eh(hh,e),null!==ph&&Eh(ph,e),mh.forEach(t),fh.forEach(t);for(var n=0;n<gh.length;n++){var r=gh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<gh.length&&null===(n=gh[0]).blockedOn;)bh(n),null===n.blockedOn&&gh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],o=n[r+1],a=i[Me]||null;if("function"===typeof o)a||Ah(n);else if(a){var s=null;if(o&&o.hasAttribute("formAction")){if(i=o,a=o[Me]||null)s=a.formAction;else if(null!==lh(i))continue}else s=a.action;"function"===typeof s?n[r+1]=s:(n.splice(r,3),r-=3),Ah(n)}}}function Th(e){this._internalRoot=e}function Rh(e){this._internalRoot=e}Rh.prototype.render=Th.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Jd(t.current,_c(),e,t,null,null)},Rh.prototype.unmount=Th.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Jd(e.current,2,null,e,null,null),Uc(),t[_e]=null}},Rh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gh.length&&0!==t&&t<gh[n].priority;n++);gh.splice(n,0,e),0===n&&bh(e)}};var Fh=i.version;if("19.1.1"!==Fh)throw Error(a(527,Fh,"19.1.1"));N.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return u(i),e;if(o===r)return u(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,c=i.child;c;){if(c===n){s=!0,n=i,r=o;break}if(c===r){s=!0,r=i,n=o;break}c=c.sibling}if(!s){for(c=o.child;c;){if(c===n){s=!0,n=o,r=i;break}if(c===r){s=!0,r=o,n=i;break}c=c.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ih={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{ue=Ph.inject(Ih),de=Ph}catch(_h){}}t.createRoot=function(e,t){if(!s(e))throw Error(a(299));var n=!1,r="",i=vs,o=ws,l=bs;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Xd(e,1,!1,null,0,n,r,i,o,l,0,null),e[_e]=t.current,Wu(e),new Th(t)},t.hydrateRoot=function(e,t,n){if(!s(e))throw Error(a(299));var r=!1,i="",o=vs,l=ws,c=bs,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Xd(e,1,!0,t,0,r,i,o,l,c,0,u)).context=Zd(null),n=t.current,(i=io(r=Te(r=_c()))).callback=null,oo(n,i,r),n=r,t.current.lanes=n,Se(t,n),Du(t),e[_e]=t.current,Wu(e),new Rh(t)},t.version="19.1.1"},43:(e,t,n)=>{e.exports=n(288)},44:(e,t,n)=>{n.d(t,{g:()=>o});var r=n(379),i=n(334);class o{constructor(){this.longRunIntensityGuidelines={easy:{description:"Conversational pace, can speak in full sentences",pace:"30-90 seconds slower than marathon pace",heartRate:"65-78% max HR",effort:"Comfortable, sustainable for hours"},steadyState:{description:"Sustained aerobic effort, controlled breathing",pace:"1:15:00 to 2:30:00 race pace (usually 15-45 sec slower than marathon pace)",heartRate:"83-87% max HR",effort:"Moderate effort, what you can sustain for 2-2.5 hours"},marathonPace:{description:"Goal marathon race pace",pace:"Marathon race pace",heartRate:"80-85% max HR",effort:"Controlled hard effort, race-specific"},fastFinish:{description:"Faster than marathon pace for finishing segments",pace:"Half marathon to 10K pace",heartRate:"85-90% max HR",effort:"Strong finish, practice racing on tired legs"}},this.workoutLibrary={TRADITIONAL_EASY:[{name:"Classic Easy Long Run",duration:"60-150 minutes",structure:"Entire run at easy, conversational pace",intensity:"easy",source:"Hal Higdon foundation",description:"Traditional base-building long run",benefits:"Aerobic development, time on feet, mental endurance",progression:"Increase by 1-2 miles per week, stepback every 3rd week",notes:"30-90 seconds slower than marathon pace, finish refreshed"},{name:"Conversational Long Run",duration:"75-120 minutes",structure:"Run with partner/group, maintain conversation throughout",intensity:"easy",source:"Social running philosophy",description:"Easy long run emphasizing conversational pace",benefits:"Aerobic base, social aspect, pace discipline",notes:"If you can't hold a conversation, you're going too fast"}],PROGRESSIVE_RUNS:[{name:"Thirds Progression",duration:"45-90 minutes",structure:"First 1/3 easy, middle 1/3 moderate, final 1/3 strong",intensity:"easy to fastFinish",source:"McMillan Running",description:"Equal time segments with increasing intensity",benefits:"Teaches finishing speed, energy conservation",example:"60 min run: 20 min easy + 20 min moderate + 20 min strong",notes:"Final third at steady state or tempo pace, not all-out"},{name:"DUSA Progression",duration:"50-90 minutes",structure:"75-90% easy pace, final 10-25% strong pace",intensity:"easy to fastFinish",source:"McMillan Running (Discovery USA)",description:"Majority easy with extended fast finish",benefits:"Teaches racing on fatigued legs, builds confidence",example:"60 min run: 45 min easy + 15 min strong pace",notes:"Used by elite marathoners, builds race-specific fitness"},{name:"Super Fast Finish",duration:"50-90 minutes",structure:"Normal easy run + final 3-6 minutes at 5K race effort",intensity:"easy to fastFinish",source:"McMillan (Paul Tergat method)",description:"Easy run with explosive final minutes",benefits:"Finishing kick practice, confidence, speed on tired legs",notes:"Used by Paul Tergat for world record marathon buildup"},{name:"10-Second Dropdowns",duration:"45-75 minutes",structure:"Drop pace by 10 seconds every mile (or every 10 minutes)",intensity:"easy to marathonPace",source:"Runner's World progression method",description:"Gradual, systematic pace progression",benefits:"Smooth pace control, negative split practice",example:"Start 8:30 pace, drop to 8:20, 8:10, 8:00, etc."}],STEADY_STATE_LONG:[{name:"Marathon Pace Long Run",duration:"60-120 minutes",structure:"15-20 min easy warmup + 20-60 min @ marathon pace + 10-15 min easy",intensity:"marathonPace",source:"Marathon-specific training",description:"Extended time at goal marathon pace",benefits:"Race pace practice, aerobic power, confidence",progression:"Start with 20 min MP, build by 5-10 min weekly",notes:"Practice fueling and pacing strategies"},{name:"Steady State Long Run",duration:"50-95 minutes",structure:"15 min easy warmup + 25-75 min steady state + 10 min easy",intensity:"steadyState",source:"McMillan Running",description:"Extended aerobic effort at steady state pace",benefits:"Aerobic power, endurance, lactate clearance",notes:"Pace between 1:15:00 and 2:30:00 race pace"},{name:"Half Marathon Pace Long Run",duration:"60-90 minutes",structure:"15 min easy + 30-60 min @ half marathon pace + 15 min easy",intensity:"steadyState",source:"Half marathon training",description:"Extended half marathon pace practice",benefits:"Race-specific fitness, sustained speed"}],MIXED_PACE_LONG:[{name:"Fast-Slow Long Run",duration:"60-120 minutes",structure:"Alternate fast and easy segments (e.g., 2 min fast / 3 min easy)",intensity:"easy to marathonPace",source:"Varied pace training",description:"Alternating pace segments throughout long run",benefits:"Pace variety, teaches recovery while running, mental engagement",variations:["2 min fast / 3 min easy for entire run","5 min fast / 5 min easy x 6-12 sets","1 mile fast / 2 miles easy pattern"]},{name:"Surge Long Run",duration:"60-120 minutes",structure:"Easy base pace with 30-60 second surges every 5-10 minutes",intensity:"easy to fastFinish",source:"Fartlek adaptation for long runs",description:"Easy long run with regular speed surges",benefits:"Simulates race surges, mental toughness, speed on tired legs",notes:"Surges should be strong but controlled, return to easy pace"},{name:"Out-and-Back Negative Split",duration:"60-120 minutes",structure:"Run out easy, return faster (aim for 30-60 sec negative split)",intensity:"easy to marathonPace",source:"Negative split training",description:"Practice negative splitting over long distance",benefits:"Pacing discipline, finishing strength, race strategy",notes:"Turn around at halfway point, aim to return 30-60 sec faster"}],RACE_SIMULATION:[{name:"Marathon Dress Rehearsal",duration:"120-180 minutes",structure:"20-26 mile run at planned marathon paces with race fueling",intensity:"easy to marathonPace",source:"Marathon preparation",description:"Full marathon simulation 3-4 weeks before race",benefits:"Race day practice, fueling test, confidence",structure_example:"6 easy + 13-16 @ MP + 1-3 easy cooldown",notes:"Practice everything: clothing, fueling, pacing, mindset"},{name:"Half Marathon Simulation",duration:"90-120 minutes",structure:"15 min easy + 8-10 miles @ half pace + 15 min easy",intensity:"easy to marathonPace",source:"Half marathon preparation",description:"Simulate middle miles of half marathon",benefits:"Race pace confidence, fueling practice",notes:"Practice race day routine and mindset"},{name:"Goal Pace Sandwich",duration:"75-120 minutes",structure:"Easy miles + goal pace block + easy miles (mimic race splits)",intensity:"easy to marathonPace",source:"Race-specific training",description:"Practice goal pace within context of longer run",benefits:"Race pacing, mental preparation, confidence",example:"3 easy + 6 @ goal pace + 3 easy for 12-mile long run"}],TERRAIN_SPECIFIC:[{name:"Rolling Hills Long Run",duration:"60-120 minutes",structure:"Long run on rolling terrain, maintain effort (not pace)",intensity:"easy to steadyState",source:"Terrain-specific training",description:"Long run emphasizing varied terrain",benefits:"Hill strength, effort-based pacing, race preparation",notes:"Focus on consistent effort, let pace vary with terrain"},{name:"Trail Long Run",duration:"75-150 minutes",structure:"Long run on trails, emphasis on time not distance",intensity:"easy",source:"Trail running adaptation",description:"Time-based long run on trail terrain",benefits:"Mental break, varied muscle recruitment, adventure",notes:"Time-based rather than distance-based due to terrain"}],RECOVERY_LONG:[{name:"Aerobic Base Long Run",duration:"90-150 minutes",structure:"Very easy pace, focus on time on feet not speed",intensity:"easy",source:"Base building philosophy",description:"Ultra-easy long run for aerobic development",benefits:"Aerobic base, active recovery, mental endurance",notes:"Should feel refreshed after, not fatigued"},{name:"Social Long Run",duration:"75-120 minutes",structure:"Group long run with conversation throughout",intensity:"easy",source:"Social running",description:"Easy long run with group, emphasizing social aspect",benefits:"Mental break, social connection, pace discipline"}]}}prescribeLongRunWorkout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{runEqPreference:n=0,distance:o=null,duration:a=null,paces:s=null}=t;let l=null,c=null;for(const[r,i]of Object.entries(this.workoutLibrary)){const t=i.find(t=>t.name.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(t.name.toLowerCase()));if(t){l=t,c=r;break}}if(!l)throw new Error('Workout "'.concat(e,'" not found'));const u=(0,r.A)((0,r.A)({},l),{},{category:c,intensityGuidance:this.getIntensityGuidance(l),runEqOptions:this.generateRunEqOptions(l,n),customization:this.getCustomizationOptions(l,o,a,s),safetyNotes:this.getLongRunSafetyNotes(l),fuelingGuidance:this.getFuelingGuidance(l),alternatives:this.getLongRunAlternatives(l)});if(s){u.paces=s,u.name=this.injectPacesIntoName(l.name,o,s,l.intensity);const e=(0,i.Y)(l.structure,null,null);if(u.structure=this.injectPacesIntoStructure(e,s),u.description=this.injectPacesIntoDescription(l.description,s),o&&"PROGRESSIVE_RUNS"===c){const e=this.generateProgressionPacing(l.name,o,s);e&&(u.mileByMilePacing=e,u.structure=e)}if(o&&"RACE_SIMULATION"===c){const e=this.generateSandwichPacing(l.name,o,s);e&&(u.mileByMilePacing=e,u.structure=e)}}return o&&null!==s&&void 0!==s&&s.easy&&(u.duration=this.calculateDurationFromDistance(o,s.easy)),o&&(u.distance=o),u}injectPacesIntoName(e,t,n,r){let i=e,o=null;const a=e.toLowerCase(),s=a.includes("dropdown")||a.includes("10-second")||a.includes("thirds")||a.includes("dusa")||a.includes("fast finish")||a.includes("progressive"),l=a.includes("sandwich")||a.includes("simulation")||a.includes("dress rehearsal")||a.includes("marathon pace long")||a.includes("goal pace");if((a.includes("fast finish")||a.includes("super fast"))&&n.easy&&n.interval)o="".concat(n.easy.min,"-").concat(n.easy.max,"/mi \u2192 ").concat(n.interval.pace,"/mi");else if(s&&n.easy)o="".concat(n.easy.max,"/mi start");else if(l&&(n.racePace||n.marathon)){var c,u;const e=(null===(c=n.racePace)||void 0===c?void 0:c.pace)||(null===(u=n.marathon)||void 0===u?void 0:u.pace);o="".concat(e,"/mi goal")}else r&&"marathonPace"===r&&n.marathon?o="".concat(n.marathon.pace,"/mi"):r&&r.includes("threshold")&&n.threshold?o="".concat(n.threshold.pace,"/mi"):n.easy&&(o="".concat(n.easy.min,"-").concat(n.easy.max,"/mi"));return t&&o?i="".concat(t,"-Mile ").concat(e," (").concat(o,")"):t?i="".concat(t,"-Mile ").concat(e):o&&(i="".concat(e," (").concat(o,")")),i}injectPacesIntoStructure(e,t){let n=e;return t.easy&&(n=n.replace(/easy pace/g,"easy pace (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)")),n=n.replace(/easy warmup/g,"easy warmup (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)")),n=n.replace(/\bmin easy/g,"min easy (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)")),n=n.replace(/easy cooldown/g,"easy cooldown (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)")),n=n.replace(/\bmiles easy/g,"miles easy (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)"))),t.marathon&&(n=n.replace(/@ marathon pace/g,"@ ".concat(t.marathon.pace,"/mile marathon pace")),n=n.replace(/@ MP/g,"@ ".concat(t.marathon.pace,"/mile")),n=n.replace(/@ half pace/g,"@ ".concat(t.marathon.pace,"/mile pace"))),t.threshold&&(n=n.replace(/steady state/g,"steady state (".concat(t.threshold.pace,"/mile)")),n=n.replace(/strong pace/g,"strong pace (".concat(t.threshold.pace,"/mile)"))),n}injectPacesIntoDescription(e,t){let n=e;return t.easy&&(n=n.replace(/easy pace/g,"easy pace (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)")),n=n.replace(/conversational pace/g,"conversational pace (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)"))),t.marathon&&(n=n.replace(/marathon pace/g,"marathon pace (".concat(t.marathon.pace,"/mile)")),n=n.replace(/goal pace/g,"goal pace (".concat(t.marathon.pace,"/mile)"))),n}calculateDurationFromDistance(e,t){if(!e||!t)return null;const n=t.min||t,r=t.max||t,i=e=>{if("string"!==typeof e)return 10;const t=e.split(":");return 2!==t.length?10:parseInt(t[0])+parseInt(t[1])/60},o=i(n),a=i(r),s=Math.round(e*o),l=Math.round(e*a),c=e=>{if(e>=120){const t=Math.floor(e/60),n=e%60;return n>0?"".concat(t,"h ").concat(n,"min"):"".concat(t," hours")}return"".concat(e," minutes")};return l-s>=5?"".concat(c(s)," - ").concat(c(l)):c(Math.round((s+l)/2))}generateProgressionPacing(e,t,n){var r,i;if(!t||null===n||void 0===n||!n.easy)return null;const o=e.toLowerCase(),a=n.easy.max,s=n.easy.min,l=(null===(r=n.marathon)||void 0===r?void 0:r.pace)||(null===(i=n.threshold)||void 0===i?void 0:i.pace)||s,c=(e,t,n)=>e===t?"Mile ".concat(e,": ").concat(n,"/mile"):"Miles ".concat(e,"-").concat(t,": ").concat(n,"/mile");if(o.includes("thirds")){const e=Math.floor(t/3),n=e,r=2*e,i=[];return i.push(c(1,n,a)),i.push(c(n+1,r,s)),i.push(c(r+1,t,l)),i.join("\n")}if(o.includes("dropdown")||o.includes("10-second")){const e=e=>{const[t,n]=e.split(":").map(Number);return 60*t+n},n=e=>{const t=Math.floor(e/60),n=Math.round(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))},r=e(a),i=[];for(let o=1;o<=t;o++){const t=10*(o-1),a=n(Math.max(r-t,e(l)));i.push("Mile ".concat(o,": ").concat(a,"/mile"))}return i.join("\n")}if(o.includes("dusa")){const e=Math.ceil(.8*t),n=t-e,r=[];return r.push(c(1,e,a)),n>0&&r.push(c(e+1,t,l)),r.join("\n")}if(o.includes("fast finish")||o.includes("super fast")){var u;const e=t-1,r=(null===(u=n.interval)||void 0===u?void 0:u.pace)||l,i=[];return i.push(c(1,e,a)),i.push("Mile ".concat(t,": ").concat(r,"/mile (5K effort)")),i.join("\n")}return"Miles 1-".concat(t,": ").concat(a,"/mile")}generateSandwichPacing(e,t,n){var r,i;if(!t||null===n||void 0===n||!n.easy)return null;const o=(null===(r=n.racePace)||void 0===r?void 0:r.pace)||(null===(i=n.marathon)||void 0===i?void 0:i.pace);if(!o)return null;e.toLowerCase();const a=n.easy.max,s=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";const i=r?" (".concat(r,")"):"";return e===t?"Mile ".concat(e,": ").concat(n,"/mile").concat(i):"Miles ".concat(e,"-").concat(t,": ").concat(n,"/mile").concat(i)},l=Math.max(2,Math.floor(.25*t)),c=Math.max(1,Math.floor(.2*t)),u=t-l-c,d=Math.max(4,u),h=[];return h.push(s(1,l,a,"warmup")),h.push(s(l+1,l+d,o,"goal pace")),c>0&&h.push(s(l+d+1,t,a,"cooldown")),h.join("\n")}getIntensityGuidance(e){let t=e.intensity;return"string"===typeof e.intensity&&e.intensity.includes(" to ")&&(t=e.intensity.split(" to ")[0]),this.longRunIntensityGuidelines[t]||this.longRunIntensityGuidelines.easy}generateRunEqOptions(e,t){const n={optionA:"Full running workout",optionB:"First half running, second half on stand-up bike",optionC:"Alternate segments between running and biking (if structured workout)",optionD:"Full stand-up bike workout (".concat(2,"x time conversion for easy pace)"),conversionFactor:2};return(e.intensity.includes("marathonPace")||e.intensity.includes("steadyState"))&&(n.optionD="Full stand-up bike workout (2x easy pace, 2.5x marathon pace)",n.conversionNotes="Use 2.5x conversion for marathon pace segments, 2x for easy segments"),n.recommendation=t>=70?"Full stand-up bike workout":t>=40?"Split workout - first half running, second half biking":t>=20?"Alternate major segments if structured workout":"Full running workout",n}getCustomizationOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const i={distanceOptions:{short:"45-75 minutes or 6-10 miles",medium:"75-120 minutes or 10-16 miles",long:"120-180 minutes or 16-26 miles"},adaptForDistance:{},adaptForTime:{}};return(e.name.includes("Progression")||e.name.includes("Progressive"))&&(r&&r.easy&&r.threshold?i.adaptForDistance={"6-8 miles":"2-3 miles easy (".concat(r.easy.min,"-").concat(r.easy.max,"/mile), 2-3 miles moderate, 2 miles strong (").concat(r.threshold.pace,"/mile)"),"10-12 miles":"4 miles easy (".concat(r.easy.min,"-").concat(r.easy.max,"/mile), 4 miles moderate, 4 miles strong (").concat(r.threshold.pace,"/mile)"),"16-18 miles":"6 miles easy (".concat(r.easy.min,"-").concat(r.easy.max,"/mile), 6 miles moderate, 6 miles strong (").concat(r.threshold.pace,"/mile)")}:i.adaptForDistance={"6-8 miles":"2-3 miles easy, 2-3 miles moderate, 2 miles strong","10-12 miles":"4 miles easy, 4 miles moderate, 4 miles strong","16-18 miles":"6 miles easy, 6 miles moderate, 6 miles strong"}),e.name.includes("Marathon Pace")&&(r&&r.easy&&r.marathon?i.adaptForDistance={"10-12 miles":"3 miles easy (".concat(r.easy.min,"-").concat(r.easy.max,"/mile) + 6 miles @ ").concat(r.marathon.pace,"/mile + 2 miles easy"),"14-16 miles":"3 miles easy (".concat(r.easy.min,"-").concat(r.easy.max,"/mile) + 10 miles @ ").concat(r.marathon.pace,"/mile + 3 miles easy"),"18-20 miles":"3 miles easy (".concat(r.easy.min,"-").concat(r.easy.max,"/mile) + 13 miles @ ").concat(r.marathon.pace,"/mile + 4 miles easy")}:i.adaptForDistance={"10-12 miles":"3 miles easy + 6 miles MP + 2 miles easy","14-16 miles":"3 miles easy + 10 miles MP + 3 miles easy","18-20 miles":"3 miles easy + 13 miles MP + 4 miles easy"}),i}getLongRunSafetyNotes(e){const t=["Start conservatively - long runs should feel sustainable","Focus on effort over pace, especially in varying weather/terrain","Plan hydration strategy for runs over 90 minutes","Carry identification and emergency contact information","Know your route and have bailout options"];return(e.intensity.includes("marathonPace")||e.intensity.includes("fastFinish"))&&(t.push("Save faster segments for when you're warmed up (after 15+ minutes)"),t.push("If pace becomes unsustainable, dial back to easy effort")),(e.duration.includes("120")||e.duration.includes("150"))&&(t.push("Practice race-day fueling for runs over 2 hours"),t.push("Consider electrolyte replacement for extended efforts")),(e.name.includes("Progression")||e.name.includes("Progressive"))&&(t.push("Build pace gradually - avoid sudden speed changes"),t.push("Final segments should feel strong but controlled, not all-out")),t}getFuelingGuidance(e){const t=[];return(e.duration.includes("120")||e.duration.includes("150")||e.duration.includes("180"))&&(t.push("This is a key fueling practice opportunity"),t.push("Test gels, sports drinks, or real food you plan to use in races"),t.push("Practice taking fuel while maintaining pace/effort")),{baseFueling:{under60min:"Generally no fueling needed, just hydration","60-90min":"Consider sports drink or small fuel if hot weather","90-120min":"Practice race fueling - 30-60g carbs per hour after first hour",over120min:"Definitely fuel - practice exact race day strategy"},notes:t}}getLongRunAlternatives(e){return{badWeather:{treadmill:"Use 1% incline, break into segments if needed for mental engagement",indoor:"Mall walking, indoor track (expect many laps)",postpone:"Better to move day than compromise safety"},timeConstraints:{shortenDistance:"Maintain workout structure but reduce total time/distance",focusOnQuality:"Keep key pace segments, reduce easy portions",splitAcrossDays:"Not ideal, but could split very long runs across 2 days"},injury:{pool:"Aqua jogging maintaining same effort and time",bike:"Stand-up bike or regular bike with appropriate time conversion",elliptical:"Good alternative maintaining effort level"},terrain:{noHills:"Use treadmill incline or find bridges/overpasses",onlyTrack:"Long run on track requires mental strategies, audiobooks/podcasts help",onlyTreadmill:"Break into segments, vary incline/pace for mental engagement"}}}getWorkoutsByCategory(e){return this.workoutLibrary[e]||[]}getCategories(){return Object.keys(this.workoutLibrary)}getRandomWorkout(e){const t=this.getWorkoutsByCategory(e);if(0===t.length)throw new Error("No workouts found in category: ".concat(e));return t[Math.floor(Math.random()*t.length)]}searchWorkouts(e){const t=[],n=e.toLowerCase();for(const[i,o]of Object.entries(this.workoutLibrary))for(const e of o)(e.name.toLowerCase().includes(n)||e.description.toLowerCase().includes(n)||e.source.toLowerCase().includes(n))&&t.push((0,r.A)((0,r.A)({},e),{},{category:i}));return t}}},106:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,r=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,l=/^\s+|\s+$/g,c="";function u(e){return e?e.replace(l,c):c}e.exports=function(e,l){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];l=l||{};var d=1,h=1;function p(e){var t=e.match(n);t&&(d+=t.length);var r=e.lastIndexOf("\n");h=~r?e.length-r:h+e.length}function m(){var e={line:d,column:h};return function(t){return t.position=new f(e),v(),t}}function f(e){this.start=e,this.end={line:d,column:h},this.source=l.source}function g(t){var n=new Error(l.source+":"+d+":"+h+": "+t);if(n.reason=t,n.filename=l.source,n.line=d,n.column=h,n.source=e,!l.silent)throw n}function y(t){var n=t.exec(e);if(n){var r=n[0];return p(r),e=e.slice(r.length),n}}function v(){y(r)}function w(e){var t;for(e=e||[];t=b();)!1!==t&&e.push(t);return e}function b(){var t=m();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;c!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,c===e.charAt(n-1))return g("End of comment missing");var r=e.slice(2,n-2);return h+=2,p(r),e=e.slice(n),h+=2,t({type:"comment",comment:r})}}function k(){var e=m(),n=y(i);if(n){if(b(),!y(o))return g("property missing ':'");var r=y(a),l=e({type:"declaration",property:u(n[0].replace(t,c)),value:r?u(r[0].replace(t,c)):c});return y(s),l}}return f.prototype.content=e,v(),function(){var e,t=[];for(w(t);e=k();)!1!==e&&(t.push(e),w(t));return t}()}},121:(e,t,n)=>{n.d(t,{j2:()=>je,db:()=>Le,Cn:()=>Be});var r=n(150);(0,r.KO)("firebase","12.5.0","app");var i=n(144),o=n(667),a=n(379),s=n(965),l=n(776),c=n(606),u=n(799);const d="@firebase/installations",h="0.6.19",p=1e4,m="w:".concat(h),f="FIS_v2",g=36e5,y={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},v=new l.FA("installations","Installations",y);function w(e){return e instanceof l.g&&e.code.includes("request-failed")}function b(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function k(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function D(e,t){const n=(await t.json()).error;return v.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function x(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function E(e,t){let{refreshToken:n}=t;const r=x(e);return r.append("Authorization",function(e){return"".concat(f," ").concat(e)}(n)),r}async function S(e){const t=await e();return t.status>=500&&t.status<600?e():t}function A(e){return new Promise(t=>{setTimeout(t,e)})}const C=/^[cdef][\w-]{21}$/;function T(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return C.test(t)?t:""}catch(e){return""}}function R(e){return"".concat(e.appName,"!").concat(e.appId)}const F=new Map;function I(e,t){const n=R(e);P(n,t),function(e,t){const n=_();n&&n.postMessage({key:e,fid:t});N()}(n,t)}function P(e,t){const n=F.get(e);if(n)for(const r of n)r(t)}let M=null;function _(){return!M&&"BroadcastChannel"in self&&(M=new BroadcastChannel("[Firebase] FID Change"),M.onmessage=e=>{P(e.data.key,e.data.fid)}),M}function N(){0===F.size&&M&&(M.close(),M=null)}const O="firebase-installations-store";let j=null;function L(){return j||(j=(0,u.P2)("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(O)}})),j}async function B(e,t){const n=R(e),r=(await L()).transaction(O,"readwrite"),i=r.objectStore(O),o=await i.get(n);return await i.put(t,n),await r.done,o&&o.fid===t.fid||I(e,t.fid),t}async function W(e){const t=R(e),n=(await L()).transaction(O,"readwrite");await n.objectStore(O).delete(t),await n.done}async function U(e,t){const n=R(e),r=(await L()).transaction(O,"readwrite"),i=r.objectStore(O),o=await i.get(n),a=t(o);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||o&&o.fid===a.fid||I(e,a.fid),a}async function q(e){let t;const n=await U(e.appConfig,n=>{const r=function(e){const t=e||{fid:T(),registrationStatus:0};return V(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(v.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const o=b(n),a=x(n),s=r.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:i,authVersion:f,appId:n.appId,sdkVersion:m},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await S(()=>fetch(o,c));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:k(e.authToken)}}throw await D("Create Installation",u)}(e,t);return B(e.appConfig,n)}catch(n){throw w(n)&&409===n.customData.serverCode?await W(e.appConfig):await B(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:H(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function H(e){let t=await z(e.appConfig);for(;1===t.registrationStatus;)await A(100),t=await z(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await q(e);return n||t}return t}function z(e){return U(e,e=>{if(!e)throw v.create("installation-not-found");return V(e)})}function V(e){return 1===(t=e).registrationStatus&&t.registrationTime+p<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function K(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return"".concat(b(e),"/").concat(n,"/authTokens:generate")}(n,t),o=E(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const s={installation:{sdkVersion:m,appId:n.appId}},l={method:"POST",headers:o,body:JSON.stringify(s)},c=await S(()=>fetch(i,l));if(c.ok){return k(await c.json())}throw await D("Generate Auth Token",c)}async function Y(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await U(e.appConfig,r=>{if(!Q(r))throw v.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+g}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await G(e.appConfig);for(;1===n.authToken.requestStatus;)await A(100),n=await G(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Y(e,t):r}(e,n),r;{if(!navigator.onLine)throw v.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return(0,a.A)((0,a.A)({},e),{},{authToken:t})}(r);return t=async function(e,t){try{const n=await K(e,t),r=(0,a.A)((0,a.A)({},t),{},{authToken:n});return await B(e.appConfig,r),n}catch(n){if(!w(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=(0,a.A)((0,a.A)({},t),{},{authToken:{requestStatus:0}});await B(e.appConfig,n)}else await W(e.appConfig);throw n}}(e,n),n}});return t?await t:r.authToken}function G(e){return U(e,e=>{if(!Q(e))throw v.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+p<Date.now()?(0,a.A)((0,a.A)({},e),{},{authToken:{requestStatus:0}}):e;var n})}function Q(e){return void 0!==e&&2===e.registrationStatus}async function X(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await q(e);t&&await t}(n);return(await Y(n,t)).token}function Z(e){return v.create("missing-app-config-values",{valueName:e})}const J="installations",$=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Z("App Configuration");if(!e.name)throw Z("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Z(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:(0,r.j6)(t,"heartbeat"),_delete:()=>Promise.resolve()}},ee=e=>{const t=e.getProvider("app").getImmediate(),n=(0,r.j6)(t,J).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await q(t);return r?r.catch(console.error):Y(t).catch(console.error),n.fid}(n),getToken:e=>X(n,e)}};(0,r.om)(new c.uA(J,$,"PUBLIC")),(0,r.om)(new c.uA("installations-internal",ee,"PRIVATE")),(0,r.KO)(d,h),(0,r.KO)(d,h,"esm2020");const te="analytics",ne="https://www.googletagmanager.com/gtag/js",re=new s.Vy("@firebase/analytics"),ie={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},oe=new l.FA("analytics","Analytics",ie);function ae(e){if(!e.startsWith(ne)){const t=oe.create("invalid-gtag-resource",{gtagURL:e});return re.warn(t.message),""}return e}function se(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function le(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:ae}),r=document.createElement("script"),i="".concat(ne,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function ce(e,t,n,r){return async function(i){try{for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];if("event"===i){const[r,i]=a;await async function(e,t,n,r,i){try{let o=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await se(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){o=[];break}o.push(i)}}0===o.length&&(o=Object.values(t)),await Promise.all(o),e("event",r,i||{})}catch(o){re.error(o)}}(e,t,n,r,i)}else if("config"===i){const[i,o]=a;await async function(e,t,n,r,i,o){const a=r[i];try{if(a)await t[a];else{const e=(await se(n)).find(e=>e.measurementId===i);e&&await t[e.appId]}}catch(s){re.error(s)}e("config",i,o)}(e,t,n,r,i,o)}else if("consent"===i){const[t,n]=a;e("consent",t,n)}else if("get"===i){const[t,n,r]=a;e("get",t,n,r)}else if("set"===i){const[t]=a;e("set",t)}else e(i,...a)}catch(l){re.error(l)}}}const ue=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function de(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function he(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:o}=e.options;if(!r)throw oe.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw oe.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new me;return setTimeout(async()=>{s.abort()},void 0!==n?n:6e4),pe({appId:r,apiKey:i,measurementId:o},a,s,t)}async function pe(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ue;const{appId:a,measurementId:s}=e;try{await function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(o),r(oe.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(n,r)}catch(u){if(s)return re.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(s)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===u||void 0===u?void 0:u.message,"]")),{appId:a,measurementId:s};throw u}try{const t=await async function(e){const{appId:t,apiKey:n}=e,r={method:"GET",headers:de(n)},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",t),o=await fetch(i,r);if(200!==o.status&&304!==o.status){let e="";try{var a;const t=await o.json();null!==(a=t.error)&&void 0!==a&&a.message&&(e=t.error.message)}catch(s){}throw oe.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return o.deleteThrottleMetadata(a),t}catch(u){var c;const t=u;if(!function(e){if(!(e instanceof l.g)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(o.deleteThrottleMetadata(a),s)return re.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(s)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===t||void 0===t?void 0:t.message,"]")),{appId:a,measurementId:s};throw u}const r=503===Number(null===t||void 0===t||null===(c=t.customData)||void 0===c?void 0:c.httpStatus)?(0,l.p9)(i,o.intervalMillis,30):(0,l.p9)(i,o.intervalMillis),d={throttleEndTimeMillis:Date.now()+r,backoffCount:i+1};return o.setThrottleMetadata(a,d),re.debug("Calling attemptFetch again in ".concat(r," millis")),pe(e,d,n,o)}}class me{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let fe,ge;function ye(e){ge=e}function ve(e){fe=e}async function we(e,t,n,r,i,o,a){var s;const c=he(e);c.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&re.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(e=>re.error(e)),t.push(c);const u=async function(){if(!(0,l.zW)())return re.warn(oe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await(0,l.eX)()}catch(e){return re.warn(oe.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[d,h]=await Promise.all([c,u]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(ne)&&n.src.includes(e))return n;return null})(o)||le(o,d.measurementId),ge&&(i("consent","default",ge),ye(void 0)),i("js",new Date);const p=null!==(s=null===a||void 0===a?void 0:a.config)&&void 0!==s?s:{};return p.origin="firebase",p.update=!0,null!=h&&(p.firebase_id=h),i("config",d.measurementId,p),fe&&(i("set",fe),ve(void 0)),d.measurementId}class be{constructor(e){this.app=e}_delete(){return delete ke[this.app.options.appId],Promise.resolve()}}let ke={},De=[];const xe={};let Ee,Se,Ae="dataLayer",Ce="gtag",Te=!1;function Re(e,t,n){!function(){const e=[];if((0,l.sr)()&&e.push("This is a browser extension environment."),(0,l.dM)()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(" "),n=oe.create("invalid-analytics-context",{errorInfo:t});re.warn(n.message)}}();const r=e.options.appId;if(!r)throw oe.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw oe.create("no-api-key");re.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=ke[r])throw oe.create("already-exists",{id:r});if(!Te){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Ae);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=ce(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}(ke,De,xe,Ae,Ce);Se=e,Ee=t,Te=!0}ke[r]=we(e,De,xe,t,Ee,Ae,n);return new be(e)}function Fe(e,t,n){e=(0,l.Ku)(e),async function(e,t,n,r){if(r&&r.global){const t={};for(const e of Object.keys(n))t["user_properties.".concat(e)]=n[e];return e("set",t),Promise.resolve()}e("config",await t,{update:!0,user_properties:n})}(Se,ke[e.app.options.appId],t,n).catch(e=>re.error(e))}function Ie(e,t,n,r){e=(0,l.Ku)(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,(0,a.A)((0,a.A)({},r),{},{send_to:i}))}}(Se,ke[e.app.options.appId],t,n,r).catch(e=>re.error(e))}const Pe="@firebase/analytics",Me="0.10.19";(0,r.om)(new c.uA(te,(e,t)=>{let{options:n}=t;return Re(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),(0,r.om)(new c.uA("analytics-internal",function(e){try{const t=e.getProvider(te).getImmediate();return{logEvent:(e,n,r)=>Ie(t,e,n,r),setUserProperties:(e,n)=>Fe(t,e,n)}}catch(t){throw oe.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,r.KO)(Pe,Me),(0,r.KO)(Pe,Me,"esm2020");var _e=n(889);const Ne={apiKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_API_KEY||"AIzaSyD8w8BevGoG5L5n5wSU5TrVyYe1qi008Do",authDomain:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_AUTH_DOMAIN||"run-plus-plans.firebaseapp.com",projectId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_PROJECT_ID||"run-plus-plans",storageBucket:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_STORAGE_BUCKET||"run-plus-plans.firebasestorage.app",messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_MESSAGING_SENDER_ID||"426458481793",appId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_APP_ID||"1:426458481793:web:dbcb81b021501d94e7f980",measurementId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_MEASUREMENT_ID||"G-HFHB0GWKCC"};const Oe=(0,r.Wp)(Ne),je=(0,i.xI)(Oe),Le=(0,o.aU)(Oe),Be=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)();e=(0,l.Ku)(e);const t=(0,r.j6)(e,te);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(0,r.j6)(e,te);if(n.isInitialized()){const e=n.getImmediate();if((0,l.bD)(t,n.getOptions()))return e;throw oe.create("already-initialized")}const i=n.initialize({options:t})}(e)}(Oe),(0,_e.Uz)(Oe,"us-central1"))},144:(e,t,n)=>{n.d(t,{eJ:()=>gt,xI:()=>Hn,hg:()=>wt,J1:()=>ft,x9:()=>yt,CI:()=>bt,r7:()=>vt});var r=n(986),i=n(379),o=n(150),a=n(776),s=n(965),l=n(606);const c=["providerId"],u=["uid","auth","stsTokenManager"],d=["providerId","signInMethod"];function h(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const p=h,m=new a.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),f=new s.Vy("@firebase/auth");function g(e){if(f.logLevel<=s.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];f.error("Auth (".concat(o.MF,"): ").concat(e),...n)}}function y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw k(e,...n)}function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return k(e,...n)}function w(e,t,n){const r=(0,i.A)((0,i.A)({},p()),{},{[t]:n});return new a.FA("auth","Firebase",r).create(t,{appName:e.name})}function b(e){return w(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function k(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return m.create(e,...n)}function D(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw k(t,...r)}}function x(e){const t="INTERNAL ASSERTION FAILED: "+e;throw g(t),new Error(t)}function E(e,t){e||x(t)}function S(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function A(){return"http:"===C()||"https:"===C()}function C(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class T{constructor(e,t){this.shortDelay=e,this.longDelay=t,E(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,a.jZ)()||(0,a.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(A()||(0,a.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function R(e,t){E(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class F{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void x("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void x("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void x("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const I={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},P=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],M=new T(3e4,6e4);function _(e,t){return e.tenantId&&!t.tenantId?(0,i.A)((0,i.A)({},t),{},{tenantId:e.tenantId}):t}async function N(e,t,n,r){return O(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let o={},s={};r&&("GET"===t?s=r:o={body:JSON.stringify(r)});const l=(0,a.Am)((0,i.A)({key:e.config.apiKey},s)).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u=(0,i.A)({method:t,headers:c},o);return(0,a.c1)()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,a.zJ)(e.emulatorConfig.host)&&(u.credentials="include"),F.fetch()(await L(e,e.config.apiHost,n,l),u)})}async function O(e,t,n){e._canInitEmulator=!1;const r=(0,i.A)((0,i.A)({},I),t);try{const t=new W(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw U(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw U(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw U(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw U(e,"user-disabled",o);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw w(e,s,a);y(e,s)}}catch(o){if(o instanceof a.g)throw o;y(e,"network-request-failed",{message:String(o)})}}async function j(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await N(e,t,n,r,i);return"mfaPendingCredential"in o&&y(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function L(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),o=e,a=o.config.emulator?R(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(P.includes(n)&&(await o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())){return o._getPersistence()._getFinalTarget(a).toString()}return a}function B(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class W{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(v(this.auth,"network-request-failed")),M.get())})}}function U(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=v(e,t,r);return i.customData._tokenResponse=n,i}function q(e){return void 0!==e&&void 0!==e.enterprise}class H{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return B(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function z(e,t){return N(e,"GET","/v2/recaptchaConfig",_(e,t))}async function V(e,t){return N(e,"POST","/v1/accounts:lookup",t)}function K(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Y(e){return 1e3*Number(e)}function G(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return g("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,a.u)(n);return e?JSON.parse(e):(g("Failed to decode base64 JWT payload"),null)}catch(i){return g("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function Q(e){const t=G(e);return D(t,"internal-error"),D("undefined"!==typeof t.exp,"internal-error"),D("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function X(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof a.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Z{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class J{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=K(this.lastLoginAt),this.creationTime=K(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function $(e){var t;const n=e.auth,r=await e.getIdToken(),i=await X(e,V(n,{idToken:r}));D(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=null!==(t=o.providerUserInfo)&&void 0!==t&&t.length?ee(o.providerUserInfo):[],s=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null!==s&&void 0!==s&&s.length),h=!!u&&d,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new J(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,p)}function ee(e){return e.map(e=>{let{providerId:t}=e,n=(0,r.A)(e,c);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class te{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){D(e.idToken,"internal-error"),D("undefined"!==typeof e.idToken,"internal-error"),D("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Q(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){D(0!==e.length,"internal-error");const t=Q(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(D(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await O(e,{},async()=>{const n=(0,a.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=await L(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();s["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:s,body:n};return e.emulatorConfig&&(0,a.zJ)(e.emulatorConfig.host)&&(l.credentials="include"),F.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new te;return n&&(D("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(D("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(D("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new te,this.toJSON())}_performRefresh(){return x("not implemented")}}function ne(e,t){D("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class re{constructor(e){let{uid:t,auth:n,stsTokenManager:i}=e,o=(0,r.A)(e,u);this.providerId="firebase",this.proactiveRefresh=new Z(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new J(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await X(this,this.stsTokenManager.getToken(this.auth,e));return D(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,a.Ku)(e),r=await n.getIdToken(t),i=G(r);D(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:K(Y(i.auth_time)),issuedAtTime:K(Y(i.iat)),expirationTime:K(Y(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,a.Ku)(e);await $(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(D(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>(0,i.A)({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new re((0,i.A)((0,i.A)({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){D(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await $(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,o.xZ)(this.auth.app))return Promise.reject(b(this.auth));const e=await this.getIdToken();return await X(this,async function(e,t){return N(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return(0,i.A)((0,i.A)({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>(0,i.A)({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,o,a,s,l,c,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,p=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,m=null!==(a=t.photoURL)&&void 0!==a?a:void 0,f=null!==(s=t.tenantId)&&void 0!==s?s:void 0,g=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,y=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:w,emailVerified:b,isAnonymous:k,providerData:x,stsTokenManager:E}=t;D(w&&E,e,"internal-error");const S=te.fromJSON(this.name,E);D("string"===typeof w,e,"internal-error"),ne(d,e.name),ne(h,e.name),D("boolean"===typeof b,e,"internal-error"),D("boolean"===typeof k,e,"internal-error"),ne(p,e.name),ne(m,e.name),ne(f,e.name),ne(g,e.name),ne(y,e.name),ne(v,e.name);const A=new re({uid:w,auth:e,email:h,emailVerified:b,displayName:d,isAnonymous:k,photoURL:m,phoneNumber:p,tenantId:f,stsTokenManager:S,createdAt:y,lastLoginAt:v});return x&&Array.isArray(x)&&(A.providerData=x.map(e=>(0,i.A)({},e))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new te;r.updateFromServerResponse(t);const i=new re({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await $(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];D(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?ee(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),a=new te;a.updateFromIdToken(n);const s=new re({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new J(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(s,l),s}}const ie=new Map;function oe(e){E(e instanceof Function,"Expected a class definition");let t=ie.get(e);return t?(E(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ie.set(e,t),t)}class ae{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ae.type="NONE";const se=ae;function le(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ce{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=le(this.userKey,r.apiKey,i),this.fullPersistenceKey=le("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await V(this.auth,{idToken:e}).catch(()=>{});return t?re._fromGetAccountInfoResponse(this.auth,t,e):null}return re._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ce(oe(se),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||oe(se);const o=le(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(o);if(t){let n;if("string"===typeof t){const r=await V(e,{idToken:t}).catch(()=>{});if(!r)break;n=await re._fromGetAccountInfoResponse(e,r,t)}else n=re._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const s=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&s.length?(i=s[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(o)}catch(t){}})),new ce(i,e,n)):new ce(i,e,n)}}function ue(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(me(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(de(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ge(t))return"Blackberry";if(ye(t))return"Webos";if(he(t))return"Safari";if((t.includes("chrome/")||pe(t))&&!t.includes("edge/"))return"Chrome";if(fe(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/firefox\//i.test(e)}function he(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/crios\//i.test(e)}function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/iemobile/i.test(e)}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/android/i.test(e)}function ge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/blackberry/i.test(e)}function ye(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/webos/i.test(e)}function ve(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function we(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return ve(e)||fe(e)||ye(e)||ge(e)||/windows phone/i.test(e)||me(e)}function be(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ue((0,a.ZQ)());break;case"Worker":t="".concat(ue((0,a.ZQ)()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(o.MF,"/").concat(r)}class ke{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class De{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(o=s.containsNumericCharacter)||void 0===o||o),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class xe{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Se(this),this.idTokenSubscription=new Se(this),this.beforeStateQueue=new ke(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=oe(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await ce.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(o){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await V(this,{idToken:e}),n=await re._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if((0,o.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,a;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,o=null===(a=n)||void 0===a?void 0:a._redirectEventId,s=await this.tryRedirectSignIn(e);t&&t!==o||null===s||void 0===s||!s.user||(n=s.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return D(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,o.xZ)(this.app))return Promise.reject(b(this));const t=e?(0,a.Ku)(e):null;return t&&D(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&D(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,o.xZ)(this.app)?Promise.reject(b(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,o.xZ)(this.app)?Promise.reject(b(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(oe(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return N(e,"GET","/v2/passwordPolicy",_(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new De(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new a.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return N(e,"POST","/v2/accounts:revokeToken",_(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&oe(e)||this._popupRedirectResolver;D(t,this,"argument-error"),this.redirectPersistenceManager=await ce.create(this,[oe(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(D(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return D(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=be(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if((0,o.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(f.logLevel<=s.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];f.warn("Auth (".concat(o.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ee(e){return(0,a.Ku)(e)}class Se{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,a.tD)(e=>this.observer=e)}get next(){return D(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ae={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ce(e){return Ae.loadJS(e)}function Te(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Re{constructor(){this.enterprise=new Fe}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Fe{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ie="NO_RECAPTCHA";class Pe{constructor(e){this.type="recaptcha-enterprise",this.auth=Ee(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;q(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Ie)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Re).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{z(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new H(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&q(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ae.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Ce(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Me(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=new Pe(e);let s;if(o)s=Ie;else try{s=await a.verify(n)}catch(c){s=await a.verify(n,!0)}const l=(0,i.A)({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in l){const e=l.phoneEnrollmentInfo.phoneNumber,t=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const e=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:s}):Object.assign(l,{captchaResponse:s}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function _e(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Me(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Me(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const i=await Me(e,t,n);return r(e,i).catch(async i=>{var o;if("AUDIT"===(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Me(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Me(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Ne(e){const t=Ee(e),n=await z(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new H(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Pe(t).verify()}}function Oe(e,t,n){const r=Ee(e);D(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),o=je(t),{host:s,port:l}=function(e){const t=je(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Le(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Le(t)}}}(t),c=null===l?"":":".concat(l),u={url:"".concat(o,"//").concat(s).concat(c,"/")},d=Object.freeze({host:s,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return D(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void D((0,a.bD)(u,r.config.emulator)&&(0,a.bD)(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,(0,a.zJ)(s)?((0,a.gE)("".concat(o,"//").concat(s).concat(c)),(0,a.P1)("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function je(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Le(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Be{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return x("not implemented")}_getIdTokenResponse(e){return x("not implemented")}_linkToIdToken(e,t){return x("not implemented")}_getReauthenticationResolver(e){return x("not implemented")}}async function We(e,t){return N(e,"POST","/v1/accounts:signUp",t)}async function Ue(e,t){return j(e,"POST","/v1/accounts:signInWithPassword",_(e,t))}async function qe(e,t){return N(e,"POST","/v1/accounts:sendOobCode",_(e,t))}async function He(e,t){return qe(e,t)}class ze extends Be{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ze(e,t,"password")}static _fromEmailAndCode(e,t){return new ze(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return _e(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ue,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return j(e,"POST","/v1/accounts:signInWithEmailLink",_(e,t))}(e,{email:this._email,oobCode:this._password});default:y(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return _e(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",We,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return j(e,"POST","/v1/accounts:signInWithEmailLink",_(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:y(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ve(e,t){return j(e,"POST","/v1/accounts:signInWithIdp",_(e,t))}class Ke extends Be{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ke(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):y("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,o=(0,r.A)(t,d);if(!n||!i)return null;const a=new Ke(n,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){return Ve(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ve(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ve(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,a.Am)(t)}return e}}async function Ye(e,t){return N(e,"POST","/v1/accounts:sendVerificationCode",_(e,t))}const Ge={USER_NOT_FOUND:"user-not-found"};class Qe extends Be{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Qe({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Qe({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return j(e,"POST","/v1/accounts:signInWithPhoneNumber",_(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await j(e,"POST","/v1/accounts:signInWithPhoneNumber",_(e,t));if(n.temporaryProof)throw U(e,"account-exists-with-different-credential",n);return n}(e,(0,i.A)({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return j(e,"POST","/v1/accounts:signInWithPhoneNumber",_(e,(0,i.A)((0,i.A)({},t),{},{operation:"REAUTH"})),Ge)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Qe({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Xe{constructor(e){var t,n,r,i,o,s;const l=(0,a.I9)((0,a.hp)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);D(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(i=l.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=l.lang)&&void 0!==o?o:null,this.tenantId=null!==(s=l.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=(0,a.I9)((0,a.hp)(e)).link,n=t?(0,a.I9)((0,a.hp)(t)).deep_link_id:null,r=(0,a.I9)((0,a.hp)(e)).deep_link_id;return(r?(0,a.I9)((0,a.hp)(r)).link:null)||r||n||t||e}(e);try{return new Xe(t)}catch(n){return null}}}class Ze{constructor(){this.providerId=Ze.PROVIDER_ID}static credential(e,t){return ze._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Xe.parseLink(t);return D(n,"argument-error"),ze._fromEmailAndCode(e,n.code,n.tenantId)}}Ze.PROVIDER_ID="password",Ze.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ze.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Je{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class $e extends Je{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class et extends $e{constructor(){super("facebook.com")}static credential(e){return Ke._fromParams({providerId:et.PROVIDER_ID,signInMethod:et.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return et.credentialFromTaggedObject(e)}static credentialFromError(e){return et.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return et.credential(t.oauthAccessToken)}catch(n){return null}}}et.FACEBOOK_SIGN_IN_METHOD="facebook.com",et.PROVIDER_ID="facebook.com";class tt extends $e{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ke._fromParams({providerId:tt.PROVIDER_ID,signInMethod:tt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return tt.credentialFromTaggedObject(e)}static credentialFromError(e){return tt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return tt.credential(n,r)}catch(i){return null}}}tt.GOOGLE_SIGN_IN_METHOD="google.com",tt.PROVIDER_ID="google.com";class nt extends $e{constructor(){super("github.com")}static credential(e){return Ke._fromParams({providerId:nt.PROVIDER_ID,signInMethod:nt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nt.credentialFromTaggedObject(e)}static credentialFromError(e){return nt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return nt.credential(t.oauthAccessToken)}catch(n){return null}}}nt.GITHUB_SIGN_IN_METHOD="github.com",nt.PROVIDER_ID="github.com";class rt extends $e{constructor(){super("twitter.com")}static credential(e,t){return Ke._fromParams({providerId:rt.PROVIDER_ID,signInMethod:rt.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return rt.credentialFromTaggedObject(e)}static credentialFromError(e){return rt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return rt.credential(n,r)}catch(i){return null}}}async function it(e,t){return j(e,"POST","/v1/accounts:signUp",_(e,t))}rt.TWITTER_SIGN_IN_METHOD="twitter.com",rt.PROVIDER_ID="twitter.com";class ot{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await re._fromIdTokenResponse(e,n,r),o=at(n);return new ot({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=at(n);return new ot({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function at(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class st extends a.g{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,st.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new st(e,t,n,r)}}function lt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw st._fromErrorAndOperation(e,n,t,r);throw n})}async function ct(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await X(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ot._forOperation(e,"link",r)}async function ut(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if((0,o.xZ)(r.app))return Promise.reject(b(r));const i="reauthenticate";try{const o=await X(e,lt(r,i,t,e),n);D(o.idToken,r,"internal-error");const a=G(o.idToken);D(a,r,"internal-error");const{sub:s}=a;return D(e.uid===s,r,"user-mismatch"),ot._forOperation(e,i,o)}catch(a){throw(null===a||void 0===a?void 0:a.code)==="auth/".concat("user-not-found")&&y(r,"user-mismatch"),a}}async function dt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,o.xZ)(e.app))return Promise.reject(b(e));const r="signIn",i=await lt(e,r,t),a=await ot._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function ht(e,t){return dt(Ee(e),t)}function pt(e,t,n){var r;D((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),D("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),D("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(D(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(D(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function mt(e){const t=Ee(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ft(e,t,n){const r=Ee(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&pt(r,i,n),await _e(r,i,"getOobCode",He,"EMAIL_PASSWORD_PROVIDER")}async function gt(e,t,n){if((0,o.xZ)(e.app))return Promise.reject(b(e));const r=Ee(e),i=_e(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",it,"EMAIL_PASSWORD_PROVIDER"),a=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&mt(e),t}),s=await ot._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(s.user),s}function yt(e,t,n){return(0,o.xZ)(e.app)?Promise.reject(b(e)):ht((0,a.Ku)(e),Ze.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&mt(e),t})}async function vt(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=(0,a.Ku)(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await X(i,async function(e,t){return N(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const l=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}function wt(e,t,n,r){return(0,a.Ku)(e).onAuthStateChanged(t,n,r)}function bt(e){return(0,a.Ku)(e).signOut()}function kt(e,t){return N(e,"POST","/v2/accounts/mfaEnrollment:start",_(e,t))}new WeakMap;const Dt="__sak";class xt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Dt,"1"),this.storage.removeItem(Dt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Et extends xt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=we(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,a.lT)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Et.type="LOCAL";const St=Et;function At(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Ct(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Tt{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Ct(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return At(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Ct(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Ct(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=At(n);const i=setInterval(()=>{const e=At(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Tt.type="COOKIE";class Rt extends xt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Rt.type="SESSION";const Ft=Rt;class It{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new It(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(null===o||void 0===o||!o.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map(async e=>e(t.origin,i)),s=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Pt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}It.receivers=[];class Mt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,s)=>{const l=Pt("",20);r.port1.start();const c=setTimeout(()=>{s(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{s(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function _t(){return window}function Nt(){return"undefined"!==typeof _t().WorkerGlobalScope&&"function"===typeof _t().importScripts}const Ot="firebaseLocalStorageDb",jt="firebaseLocalStorage",Lt="fbase_key";class Bt{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wt(e,t){return e.transaction([jt],t?"readwrite":"readonly").objectStore(jt)}function Ut(){const e=indexedDB.open(Ot,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(jt,{keyPath:Lt})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(jt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ot);return new Bt(e).toPromise()}(),t(await Ut()))})})}async function qt(e,t,n){const r=Wt(e,!0).put({[Lt]:t,value:n});return new Bt(r).toPromise()}function Ht(e,t){const n=Wt(e,!0).delete(t);return new Bt(n).toPromise()}class zt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Ut()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Nt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=It._getInstance(Nt()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Mt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ut();return await qt(e,Dt,"1"),await Ht(e,Dt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>qt(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Wt(e,!1).get(t),r=await new Bt(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ht(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Wt(e,!1).getAll();return new Bt(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}zt.type="LOCAL";const Vt=zt;function Kt(e,t){return N(e,"POST","/v2/accounts/mfaSignIn:start",_(e,t))}Te("rcb"),new T(3e4,6e4);const Yt="recaptcha";async function Gt(e,t,n){if(!e._getRecaptchaConfig())try{await Ne(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){D("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},o=_e(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Ie){D((null===n||void 0===n?void 0:n.type)===Yt,e,"argument-error");return kt(e,await Qt(e,t,n))}return kt(e,t)},"PHONE_PROVIDER"),a=await o.catch(e=>Promise.reject(e));return a.phoneSessionInfo.sessionInfo}{var r;D("signin"===t.type,e,"internal-error");const o=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;D(o,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},s=_e(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Ie){D((null===n||void 0===n?void 0:n.type)===Yt,e,"argument-error");return Kt(e,await Qt(e,t,n))}return Kt(e,t)},"PHONE_PROVIDER"),l=await s.catch(e=>Promise.reject(e));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=_e(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Ie){D((null===n||void 0===n?void 0:n.type)===Yt,e,"argument-error");return Ye(e,await Qt(e,t,n))}return Ye(e,t)},"PHONE_PROVIDER"),o=await r.catch(e=>Promise.reject(e));return o.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Qt(e,t,n){D(n.type===Yt,e,"argument-error");const r=await n.verify();D("string"===typeof r,e,"argument-error");const o=(0,i.A)({},t);if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.captchaResponse,n=o.phoneEnrollmentInfo.clientType,i=o.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),o}if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.captchaResponse,t=o.phoneSignInInfo.clientType,n=o.phoneSignInInfo.recaptchaVersion;return Object.assign(o,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),o}return Object.assign(o,{recaptchaToken:r}),o}class Xt{constructor(e){this.providerId=Xt.PROVIDER_ID,this.auth=Ee(e)}verifyPhoneNumber(e,t){return Gt(this.auth,e,(0,a.Ku)(t))}static credential(e,t){return Qe._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Xt.credentialFromTaggedObject(t)}static credentialFromError(e){return Xt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Qe._fromTokenResponse(n,r):null}}function Zt(e,t){return t?oe(t):(D(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Xt.PROVIDER_ID="phone",Xt.PHONE_SIGN_IN_METHOD="phone";class Jt extends Be{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ve(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ve(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ve(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $t(e){return dt(e.auth,new Jt(e),e.bypassAuthState)}function en(e){const{auth:t,user:n}=e;return D(n,t,"internal-error"),ut(n,new Jt(e),e.bypassAuthState)}async function tn(e){const{auth:t,user:n}=e;return D(n,t,"internal-error"),ct(n,new Jt(e),e.bypassAuthState)}class nn{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $t;case"linkViaPopup":case"linkViaRedirect":return tn;case"reauthViaPopup":case"reauthViaRedirect":return en;default:y(this.auth,"internal-error")}}resolve(e){E(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){E(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rn=new T(2e3,1e4);class on extends nn{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,on.currentPopupAction&&on.currentPopupAction.cancel(),on.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return D(e,this.auth,"internal-error"),e}async onExecution(){E(1===this.filter.length,"Popup operations only handle one event");const e=Pt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(v(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(v(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,on.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(v(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,rn.get())};e()}}on.currentPopupAction=null;const an=new Map;class sn extends nn{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=an.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=un(t),r=cn(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}an.set(this.auth._key(),e)}return this.bypassAuthState||an.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ln(e,t){an.set(e._key(),t)}function cn(e){return oe(e._redirectPersistence)}function un(e){return le("pendingRedirect",e.config.apiKey,e.name)}async function dn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,o.xZ)(e.app))return Promise.reject(b(e));const r=Ee(e),i=Zt(r,t),a=new sn(r,i,n),s=await a.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class hn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!mn(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(v(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pn(e))}saveEventToCache(e){this.cachedEventUids.add(pn(e)),this.lastProcessedEventTime=Date.now()}}function pn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function mn(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const fn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gn=/^https?/;async function yn(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return N(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(vn(r))return}catch(n){}y(e,"unauthorized-domain")}function vn(e){const t=S(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!gn.test(n))return!1;if(fn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const wn=new T(3e4,6e4);function bn(){const e=_t().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function kn(e){return new Promise((t,n)=>{var r,i;function o(){bn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{bn(),n(v(e,"network-request-failed"))},timeout:wn.get()})}if(null!==(r=_t().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=_t().gapi)||void 0===i||!i.load){const t=Te("iframefcb");return _t()[t]=()=>{gapi.load?o():n(v(e,"network-request-failed"))},Ce("".concat(Ae.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw Dn=null,e})}let Dn=null;const xn=new T(5e3,15e3),En={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function An(e){const t=e.config;D(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?R(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:o.MF},i=Sn.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat((0,a.Am)(r).slice(1))}async function Cn(e){const t=await function(e){return Dn=Dn||kn(e),Dn}(e),n=_t().gapi;return D(n,e,"internal-error"),t.open({where:document.body,url:An(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:En,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=v(e,"network-request-failed"),o=_t().setTimeout(()=>{r(i)},xn.get());function a(){_t().clearTimeout(o),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const Tn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Rn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Fn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-o)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=(0,i.A)((0,i.A)({},Tn),{},{width:r.toString(),height:o.toString(),top:s,left:l}),d=(0,a.ZQ)().toLowerCase();n&&(c=pe(d)?"_blank":n),de(d)&&(t=t||"http://localhost",u.scrollbars="yes");const h=Object.entries(u).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return ve(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(d)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",c),new Rn(null);const p=window.open(t||"",c,h);D(p,e,"popup-blocked");try{p.focus()}catch(m){}return new Rn(p)}const In="__/auth/handler",Pn="emulator/auth/handler",Mn=encodeURIComponent("fac");async function _n(e,t,n,r,i,s){D(e.config.authDomain,e,"auth-domain-config-required"),D(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:o.MF,eventId:i};if(t instanceof Je){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,a.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))l[e]=t}if(t instanceof $e){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const o of Object.keys(c))void 0===c[o]&&delete c[o];const u=await e._getAppCheckToken(),d=u?"#".concat(Mn,"=").concat(encodeURIComponent(u)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(In);return R(t,Pn)}(e),"?").concat((0,a.Am)(c).slice(1)).concat(d)}const Nn="webStorageSupport";const On=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ft,this._completeRedirectFn=dn,this._overrideRedirectResult=ln}async _openPopup(e,t,n,r){var i;E(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Fn(e,await _n(e,t,n,S(),r),Pt())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){_t().location.href=e}(await _n(e,t,n,S(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(E(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Cn(e),n=new hn(e);return t.register("authEvent",t=>{D(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Nn,{type:Nn},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Nn];void 0!==i&&t(!!i),y(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yn(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return we()||he()||ve()}};var jn="@firebase/auth",Ln="1.11.1";class Bn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){D(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Wn=(0,a.XA)("authIdTokenMaxAge")||300;let Un=null;const qn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Wn)return;const i=null===n||void 0===n?void 0:n.token;Un!==i&&(Un=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))};function Hn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.Sx)();const t=(0,o.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,o.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,a.bD)(r,null!==t&&void 0!==t?t:{}))return e;y(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:On,persistence:[Vt,St,Ft]}),r=(0,a.XA)("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=qn(e.toString());!function(e,t,n){(0,a.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,a.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}const i=(0,a.Tj)("auth");return i&&Oe(n,"http://".concat(i)),n}var zn,Vn;zn={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=v("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Ae=zn,Vn="Browser",(0,o.om)(new l.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;D(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:s,clientPlatform:Vn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:be(Vn)},c=new xe(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(oe);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,o.om)(new l.uA("auth-internal",e=>(e=>new Bn(e))(Ee(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,o.KO)(jn,Ln,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Vn)),(0,o.KO)(jn,Ln,"esm2020")},146:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,r=/-([a-z])/g,i=/^[^-]+$/,o=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,s=function(e,t){return t.toUpperCase()},l=function(e,t){return"".concat(t,"-")};t.camelCase=function(e,t){return void 0===t&&(t={}),function(e){return!e||i.test(e)||n.test(e)}(e)?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(a,l):e.replace(o,l)).replace(r,s))}},150:(e,t,n)=>{n.d(t,{KO:()=>$,MF:()=>X,Sx:()=>J,Wp:()=>Z,j6:()=>V,om:()=>z,xZ:()=>K});var r=n(379),i=n(606),o=n(965),a=n(776),s=n(799);class l{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const c="@firebase/app",u="0.14.5",d=new o.Vy("@firebase/app"),h="@firebase/app-compat",p="@firebase/analytics-compat",m="@firebase/analytics",f="@firebase/app-check-compat",g="@firebase/app-check",y="@firebase/auth",v="@firebase/auth-compat",w="@firebase/database",b="@firebase/data-connect",k="@firebase/database-compat",D="@firebase/functions",x="@firebase/functions-compat",E="@firebase/installations",S="@firebase/installations-compat",A="@firebase/messaging",C="@firebase/messaging-compat",T="@firebase/performance",R="@firebase/performance-compat",F="@firebase/remote-config",I="@firebase/remote-config-compat",P="@firebase/storage",M="@firebase/storage-compat",_="@firebase/firestore",N="@firebase/ai",O="@firebase/firestore-compat",j="firebase",L="[DEFAULT]",B={[c]:"fire-core",[h]:"fire-core-compat",[m]:"fire-analytics",[p]:"fire-analytics-compat",[g]:"fire-app-check",[f]:"fire-app-check-compat",[y]:"fire-auth",[v]:"fire-auth-compat",[w]:"fire-rtdb",[b]:"fire-data-connect",[k]:"fire-rtdb-compat",[D]:"fire-fn",[x]:"fire-fn-compat",[E]:"fire-iid",[S]:"fire-iid-compat",[A]:"fire-fcm",[C]:"fire-fcm-compat",[T]:"fire-perf",[R]:"fire-perf-compat",[F]:"fire-rc",[I]:"fire-rc-compat",[P]:"fire-gcs",[M]:"fire-gcs-compat",[_]:"fire-fst",[O]:"fire-fst-compat",[N]:"fire-vertex","fire-js":"fire-js",[j]:"fire-js-all"},W=new Map,U=new Map,q=new Map;function H(e,t){try{e.container.addComponent(t)}catch(n){d.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function z(e){const t=e.name;if(q.has(t))return d.debug("There were multiple attempts to register component ".concat(t,".")),!1;q.set(t,e);for(const n of W.values())H(n,e);for(const n of U.values())H(n,e);return!0}function V(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function K(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Y={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},G=new a.FA("app","Firebase",Y);class Q{constructor(e,t,n){this._isDeleted=!1,this._options=(0,r.A)({},e),this._config=(0,r.A)({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw G.create("app-deleted",{appName:this._name})}}const X="12.5.0";function Z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const o=(0,r.A)({name:L,automaticDataCollectionEnabled:!0},t),s=o.name;if("string"!==typeof s||!s)throw G.create("bad-app-name",{appName:String(s)});if(n||(n=(0,a.T9)()),!n)throw G.create("no-options");const l=W.get(s);if(l){if((0,a.bD)(n,l.options)&&(0,a.bD)(o,l.config))return l;throw G.create("duplicate-app",{appName:s})}const c=new i.h1(s);for(const r of q.values())c.addComponent(r);const u=new Q(n,o,c);return W.set(s,u),u}function J(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;const t=W.get(e);if(!t&&e===L&&(0,a.T9)())return Z();if(!t)throw G.create("no-app",{appName:e});return t}function $(e,t,n){var r;let o=null!==(r=B[e])&&void 0!==r?r:e;n&&(o+="-".concat(n));const a=o.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const e=['Unable to register library "'.concat(o,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(o,'" contains illegal characters (whitespace or "/")')),a&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void d.warn(e.join(" "))}z(new i.uA("".concat(o,"-version"),()=>({library:o,version:t}),"VERSION"))}const ee="firebase-heartbeat-store";let te=null;function ne(){return te||(te=(0,s.P2)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ee)}catch(n){console.warn(n)}}}).catch(e=>{throw G.create("idb-open",{originalErrorMessage:e.message})})),te}async function re(e,t){try{const n=(await ne()).transaction(ee,"readwrite"),r=n.objectStore(ee);await r.put(t,ie(e)),await n.done}catch(n){if(n instanceof a.g)d.warn(n.message);else{const e=G.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});d.warn(e.message)}}}function ie(e){return"".concat(e.name,"!").concat(e.options.appId)}class oe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new se(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ae();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){d.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ae(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),le(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),le(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,a.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return d.warn(t),""}}}function ae(){return(new Date).toISOString().substring(0,10)}class se{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,a.zW)()&&(0,a.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ne()).transaction(ee),n=await t.objectStore(ee).get(ie(e));return await t.done,n}catch(t){if(t instanceof a.g)d.warn(t.message);else{const e=G.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});d.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function le(e){return(0,a.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var ce;ce="",z(new i.uA("platform-logger",e=>new l(e),"PRIVATE")),z(new i.uA("heartbeat",e=>new oe(e),"PRIVATE")),$(c,u,ce),$(c,u,"esm2020"),$("fire-js","")},166:(e,t,n)=>{n.d(t,{O:()=>a});var r=n(379),i=n(224);function o(e,t){if(null===e||void 0===e)return e;if("string"===typeof e){if(/^\d{1,2}:\d{2}$/.test(e)){const n=(0,i.iY)(e)*t;return(0,i.i8)(n)}const n=/^(\d{1,2}:\d{2})-(\d{1,2}:\d{2})$/,r=e.match(n);if(r){const e=(0,i.iY)(r[1]),n=(0,i.iY)(r[2]),o=(0,i.i8)(e*t),a=(0,i.i8)(n*t);return"".concat(o,"-").concat(a)}return e}if(Array.isArray(e))return e.map(e=>o(e,t));if("object"===typeof e){const n={};for(const[r,i]of Object.entries(e))n[r]=o(i,t);return n}return e}e=n.hmd(e);class a{constructor(){this.distanceMap={"5K":"5K","5k":"5K","5 K":"5K","10K":"10K","10k":"10K","10 K":"10K",Marathon:"marathon",marathon:"marathon",MARATHON:"marathon","Half Marathon":"halfMarathon",Half:"halfMarathon",half:"halfMarathon",halfMarathon:"halfMarathon",HalfMarathon:"halfMarathon"},this.validRanges={"5K":{min:"15:00",max:"45:00"},"10K":{min:"30:00",max:"90:00"},marathon:{min:"2:00:00",max:"6:00:00"},halfMarathon:{min:"1:00:00",max:"3:00:00"}}}timeToSeconds(e){const t=e.split(":").map(Number);if(2===t.length)return 60*t[0]+t[1];if(3===t.length)return 3600*t[0]+60*t[1]+t[2];throw new Error("Invalid time format. Use MM:SS or H:MM:SS")}secondsToTime(e){const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.round(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"))}addBufferToTime(e,t){if(!e||!t)throw new Error("addBufferToTime requires both timeString and multiplier");const n=e.includes("-")?e.split("-")[1]:e,r=this.timeToSeconds(n),i=Math.round(r*t);return this.secondsToTime(i)}convert5KTo10K(e){const t=this.timeToSeconds(e),n=Math.round(2.08*t);return this.secondsToTime(n)}normalizeDistance(e){const t=this.distanceMap[e];if(!t)throw new Error("Unsupported race distance: ".concat(e,". Use '5K', '10K', 'Marathon', or 'Half Marathon'"));return t}isWithinRange(e,t){const n=this.validRanges[e],r=this.timeToSeconds(n.min),i=this.timeToSeconds(n.max);return t>=r&&t<=i}getRangeMessage(e){const t=this.validRanges[e];let n;return n="5K"===e?"5K":"10K"===e?"10K":"marathon"===e?"Marathon":"Half Marathon","Training plans are designed for ".concat(n," times between ").concat(t.min," and ").concat(t.max,". ")+"For goals outside this range, please reach out to the developer for additional support."}findExactMatch(e,t){const n=i.i0[e];return n&&n.find(e=>e.goalTime===t)||null}findSurroundingPoints(e,t){const n=i.i0[e];if(!n)return null;const o=n.map(e=>(0,r.A)((0,r.A)({},e),{},{seconds:this.timeToSeconds(e.goalTime)})).sort((e,t)=>e.seconds-t.seconds);let a=null,s=null;for(let r=0;r<o.length;r++)if(o[r].seconds<=t&&(a=o[r]),o[r].seconds>=t&&!s){s=o[r];break}return a&&s?{lowerPoint:a,upperPoint:s}:null}interpolatePace(e,t,n){const r=(0,i.iY)(e),o=r+((0,i.iY)(t)-r)*n;return(0,i.i8)(o)}interpolatePaceData(e,t,n){const r=this.findSurroundingPoints(e,n);if(!r)throw new Error("Unable to find data points for interpolation");const{lowerPoint:i,upperPoint:o}=r;if(i.goalTime===o.goalTime)return{goalTime:t,paces:i.paces,trackIntervals:i.trackIntervals,interpolated:!1};const a=o.seconds-i.seconds,s=(n-i.seconds)/a,l={easy:{min:this.interpolatePace(i.paces.easy.min,o.paces.easy.min,s),max:this.interpolatePace(i.paces.easy.max,o.paces.easy.max,s),km:i.paces.easy.km},marathon:{pace:this.interpolatePace(i.paces.marathon.pace,o.paces.marathon.pace,s),km:i.paces.marathon.km},threshold:{pace:this.interpolatePace(i.paces.threshold.pace,o.paces.threshold.pace,s),km:i.paces.threshold.km},interval:{pace:this.interpolatePace(i.paces.interval.pace,o.paces.interval.pace,s),km:i.paces.interval.km}},c={threshold:{},interval:{}};for(const[u,d]of Object.entries(i.trackIntervals.threshold))c.threshold[u]=this.interpolatePace(i.trackIntervals.threshold[u],o.trackIntervals.threshold[u],s);for(const[u,d]of Object.entries(i.trackIntervals.interval))c.interval[u]=this.interpolatePace(i.trackIntervals.interval[u],o.trackIntervals.interval[u],s);return{goalTime:t,paces:l,trackIntervals:c,interpolated:!0,interpolatedBetween:{lower:i.goalTime,upper:o.goalTime}}}getPaceData(e,t){let n=this.normalizeDistance(e),i=t;"5K"===n&&(i=this.convert5KTo10K(t),n="10K",console.log("\ud83d\udcca Converting 5K time ".concat(t," to equivalent 10K time: ").concat(i)));const o=this.timeToSeconds(i),a=this.distanceMap[e]||n;if(!this.isWithinRange(a,this.timeToSeconds(t)))throw new Error(this.getRangeMessage(a));const s=this.findExactMatch(n,i);return s?(0,r.A)((0,r.A)({},s),{},{interpolated:!1}):this.interpolatePaceData(n,i,o)}calculateFromGoal(e,t){try{const n=this.getPaceData(e,t);return(0,r.A)({distance:e,goalTime:t,paces:{easy:{pace:"".concat(n.paces.easy.min,"-").concat(n.paces.easy.max),min:n.paces.easy.min,max:n.paces.easy.max,description:"Easy/Recovery runs",heartRate:"65-79% max HR"},marathon:{pace:n.paces.marathon.pace,description:"Marathon race pace",heartRate:"80-85% max HR"},threshold:{pace:n.paces.threshold.pace,description:"Tempo/Threshold runs",heartRate:"86-90% max HR"},interval:{pace:n.paces.interval.pace,description:"VO2 Max intervals (3-8 min)",heartRate:"95-100% max HR"}},trackIntervals:n.trackIntervals,interpolated:n.interpolated},n.interpolated&&{interpolatedBetween:n.interpolatedBetween})}catch(n){throw new Error("Pace calculation failed: ".concat(n.message))}}estimateCurrentVDOT(e,t){let n=30;return!e||e<=0?n=t>=40?40:t>=30?35:t>=20?32:30:(n=e>=18?42:e>=15?40:e>=13?38:e>=10?36:e>=8?34:e>=6?32:30,t>=50?n+=2:t<20&&(n-=2)),Math.max(25,Math.min(55,n))}estimateRaceTimeFromVDOT(e,t){const n={25:{"5K":"31:00","10K":"65:00",halfMarathon:"2:35:00",marathon:"5:30:00"},30:{"5K":"28:00","10K":"58:00",halfMarathon:"2:15:00",marathon:"4:45:00"},32:{"5K":"26:30","10K":"55:00",halfMarathon:"2:08:00",marathon:"4:30:00"},34:{"5K":"25:00","10K":"52:00",halfMarathon:"2:02:00",marathon:"4:15:00"},36:{"5K":"23:45","10K":"49:30",halfMarathon:"1:56:00",marathon:"4:02:00"},38:{"5K":"22:30","10K":"47:00",halfMarathon:"1:50:00",marathon:"3:50:00"},40:{"5K":"21:30","10K":"45:00",halfMarathon:"1:45:00",marathon:"3:40:00"},42:{"5K":"20:30","10K":"43:00",halfMarathon:"1:40:00",marathon:"3:30:00"},45:{"5K":"19:30","10K":"40:30",halfMarathon:"1:33:00",marathon:"3:15:00"},50:{"5K":"17:45","10K":"37:00",halfMarathon:"1:23:00",marathon:"2:55:00"}},r=Object.keys(n).map(Number).sort((e,t)=>e-t);let i=r[0];for(const a of r)Math.abs(a-e)<Math.abs(i-e)&&(i=a);const o=this.normalizeDistance(t);return n[i]["5K"===o?"5K":o]||"2:00:00"}calculateFromCurrentFitness(e,t,n){const r=this.estimateCurrentVDOT(e,t),i=this.estimateRaceTimeFromVDOT(r,n);return console.log("\ud83d\udcca Estimated current fitness: VDOT ".concat(r," = ").concat(n," in ").concat(i)),this.calculateFromGoal(n,i)}blendPaces(e,t,n,r){const o=(n-1)/(r-1),a=this.smoothProgressionCurve(o),s=(e,t)=>{const n=(0,i.iY)(e),r=n-(n-(0,i.iY)(t))*a;return(0,i.i8)(r)},l=e.paces||e,c=t.paces||t;return{paces:{easy:(u=l.easy.min,d=l.easy.max,h=c.easy.min,p=c.easy.max,{min:s(u,h),max:s(d,p)}),marathon:{pace:s(l.marathon.pace,c.marathon.pace)},threshold:{pace:s(l.threshold.pace,c.threshold.pace)},interval:{pace:s(l.interval.pace,c.interval.pace)}},progressionRatio:a,weekNumber:n,totalWeeks:r};var u,d,h,p}smoothProgressionCurve(e){return e<.3?.5*e:e<.7?.15+1.5*(e-.3):.75+.833*(e-.7)}calculateRunEqDistance(e){const t=2*e;return{runDistance:e,bikeDistance:t,factor:2,description:"Ride ".concat(t," miles on stand-up bike (").concat(2,"x run equivalent)")}}getAvailableGoalTimes(e){const t=this.normalizeDistance(e),n=i.i0[t];return n?n.map(e=>e.goalTime):[]}adjustPaces(e,t){if(!e||"object"!==typeof e)throw new Error("adjustPaces requires a valid pace object");return o(JSON.parse(JSON.stringify(e)),t)}}e.exports&&(e.exports={PaceCalculator:a})},169:(e,t,n)=>{n.d(t,{c:()=>o});var r=n(379),i=n(334);class o{constructor(){this.hillGradeGuidelines={gentle:{min:2,max:4,description:"2-4% grade - sustainable for longer efforts"},moderate:{min:4,max:7,description:"4-7% grade - challenging but manageable"},steep:{min:7,max:12,description:"7-12% grade - short, intense efforts"},very_steep:{min:12,max:20,description:"12-20% grade - power/strength focus"}},this.workoutLibrary=this.buildWorkoutLibrary()}buildWorkoutLibrary(){return{short_power:[{name:"Hill Strides",duration:"10-15 seconds",hillRequirement:{grade:"moderate",distance:"50-100 meters",description:"Find a 4-7% grade hill, at least 50m long"},workout:{warmup:"15 min easy + 4x20sec strides on flat",main:"6-8 x 12sec hill strides @ 90% effort",recovery:"Walk/jog down + 1 min easy",cooldown:"10-15 min easy"},focus:"Neuromuscular power, running form, leg turnover",intensity:"Very High (TE 4.0+)",runEqOptions:{optionA:"Full running workout as prescribed",optionB:"Warmup riding (Cyclete/Elliptigo), hill reps running, cooldown riding",optionC:"Hill power intervals on Cyclete/Elliptigo (same RunEQ miles)",optionD:"Full Cyclete/Elliptigo ride (use Garmin RunEQ data field)"}},{name:"Stadium Steps Simulation",duration:"20-30 seconds",hillRequirement:{grade:"steep",distance:"75-150 meters",description:"Find a 7-12% grade hill, stadium steps, or parking garage ramp"},workout:{warmup:"20 min easy + dynamic drills",main:"5-8 x 25sec explosive hill climbs @ 95% effort",recovery:"Walk down + 2 min easy jog",cooldown:"15 min easy"},focus:"Explosive power, anaerobic capacity, mental toughness",intensity:"Maximum (TE 4.5+)"}],medium_vo2:[{name:"Classic Hill Repeats",duration:"2-3 minutes",hillRequirement:{grade:"moderate",distance:"400-800 meters",description:"Find a steady 4-7% grade, like your 0.75-mile hill"},workout:{warmup:"20 min easy + 3x30sec pickups",main:"4-6 x 2.5 min uphill @ threshold effort",recovery:"Jog/walk down + 90sec easy",cooldown:"15 min easy"},focus:"VO2 max, lactate threshold, hill running economy",intensity:"Hard (TE 3.5-4.0)",progression:{week1:"4 x 2 min",week2:"5 x 2 min",week3:"4 x 2.5 min",week4:"5 x 2.5 min"}},{name:"Hill Pyramid",duration:"Variable (1-4 min)",hillRequirement:{grade:"moderate",distance:"600+ meters",description:"Long steady hill - your 0.75-mile hill is perfect"},workout:{warmup:"20 min easy",main:"1-2-3-4-3-2-1 min uphill @ building effort",recovery:"Equal time easy jog/walk down between reps",cooldown:"15 min easy"},focus:"Progressive effort, mental strength, pacing discipline",intensity:"Progressive (TE 3.0-4.0)"}],long_strength:[{name:"Tempo Hills",duration:"6-12 minutes",hillRequirement:{grade:"gentle",distance:"1+ miles",description:"Find a long 2-4% grade - perfect for your 0.75-mile hill!"},workout:{warmup:"15-20 min easy",main:"2-3 x 8-10 min uphill @ tempo effort",recovery:"5 min easy (jog down + flat)",cooldown:"15 min easy"},focus:"Sustained power, aerobic strength, mental endurance",intensity:"Moderately Hard (TE 3.0-3.5)",runEqOptions:{optionA:"Full running workout",optionB:"First rep running, second rep riding (Cyclete/Elliptigo)",optionC:"Alternate running/riding every 2-3 minutes",optionD:"Full Cyclete/Elliptigo ride (use Garmin RunEQ data field)"}},{name:"Long Hill Progression",duration:"8-15 minutes",hillRequirement:{grade:"gentle_to_moderate",distance:"1.5+ miles",description:"Long gradual climb - multiple loops of your hill work great"},workout:{warmup:"20 min easy",main:"12 min continuous uphill: 4min easy\u21924min moderate\u21924min hard",recovery:"Walk/easy jog down",repeat:"1-2 more times depending on fitness",cooldown:"15-20 min easy"},focus:"Progressive effort, race simulation, mental toughness"}],hill_circuits:[{name:"Hill Circuit Training",duration:"30-45 minutes",hillRequirement:{grade:"moderate",distance:"Circuit of 1-2 miles",description:"Perfect for your 2-mile loop with 0.75-mile climb!"},workout:{warmup:"15 min easy + dynamic drills",main:"4-6 complete loops:\n\u2022 0.75mi climb @ steady effort\n\u2022 Downhill recovery @ controlled pace\n\u2022 0.25mi flat @ easy pace",effort:"Build effort each loop (start 70%, finish 85%)",cooldown:"10-15 min easy"},focus:"Hill-specific endurance, downhill control, circuit training",intensity:"Moderate-Hard (TE 3.0-3.5)",seasonal:"Great for base building and hill marathon prep"},{name:"Hill Fartlek",duration:"25-35 minutes",hillRequirement:{grade:"rolling_terrain",distance:"Varied",description:"Rolling hills or repeated loops with varied efforts"},workout:{warmup:"15 min easy",main:"20 min continuous fartlek on hills:\n\u2022 Up hills: surge to moderate-hard\n\u2022 Down hills: controlled but not easy\n\u2022 Flats: settle to steady tempo",style:"Unstructured - respond to terrain",cooldown:"15 min easy"},focus:"Terrain adaptation, variable pacing, race preparation"},{name:"Kenyan Hills",duration:"40-55 minutes total",description:"Tempo-style continuous hill running - maintain effort on BOTH uphills AND downhills. No recovery zone.",hillRequirement:{grade:"moderate",distance:"400m - 1 mile loop",description:"Find an undulating loop with varied terrain - doesn't need to be one big hill"},workout:{warmup:"10-15 min easy jog to the loop",main:"20-30 min continuous loops OR 2x15 min with 2 min recovery",execution:"Maintain EFFORT on uphills, downhills, AND flats - pace varies, effort stays constant",cooldown:"10-15 min easy jog"},intensity:"Moderately Hard (TE 3.0-3.5)",effort:{heartRate:"Zone 3-4 (~85-90% max HR) - may drop slightly on descents but NEVER to recovery zone",perceived:"Tempo effort throughout - comfortably hard, sustainable but challenging"},focus:"Sustained threshold effort on varied terrain, downhill running skill, mental toughness",benefits:"Leg strength and tendon development, threshold endurance, learn to run FAST downhill (race skill!), faster leg turnover on all surfaces",coachingTips:["Plan your loop in advance - don't think about directions while suffering","Great with a training partner, even at different paces","Pace WILL vary - focus on EFFORT staying constant","If you're recovering on the downhills, you're doing regular hills, not Kenyan Hills","The downhill is NOT recovery - that's what makes it 'Kenyan'"],safetyNotes:["Downhill at tempo is higher injury risk - stay controlled","Build up gradually - start with 15 min continuous","Focus on quick cadence on descent, not long strides"],progression:{beginner:"15-20 min continuous",intermediate:"2 x 15 min with 2 min recovery",advanced:"30 min continuous at true tempo effort"},perfectFor:["Bored of regular tempo runs","Hilly race preparation (Boston, Medell\xedn!)","Time-crunched training (high ROI)","Runners who need downhill practice"],runEqOptions:{optionA:"Full running workout as prescribed",optionB:"Warmup/cooldown on Cyclete, Kenyan Hills running",optionC:"Alternate loops: 1 running, 1 Cyclete",optionD:"Full Cyclete on hilly route (maintain tempo effort up AND down)"}}],downhill_specific:[{name:"Controlled Downhill Repeats",duration:"1-3 minutes",hillRequirement:{grade:"moderate",distance:"400-800 meters downhill",description:"The downhill section of your 2-mile loop is ideal"},workout:{warmup:"20 min easy + leg swings",main:"5-8 x 90sec controlled fast downhill",technique:"Quick cadence, lean slightly forward, land on forefoot",recovery:"Walk/jog up hill + 1 min easy",cooldown:"15 min easy + stretching"},focus:"Eccentric strength, downhill speed, injury prevention",intensity:"Moderate (TE 2.5-3.0)",caution:"Start conservative - high injury risk if overdone"}],specialty:[{name:"Hill Progression Run",duration:"45-60 minutes",hillRequirement:{grade:"rolling_or_repeatable",distance:"Multiple miles",description:"Your 2-mile loop repeated, or rolling terrain course"},workout:{warmup:"15 min easy",main:"30-40 min progression:\n\u2022 First 10 min: easy on hills\n\u2022 Middle 15-20 min: moderate effort on climbs\n\u2022 Final 10-15 min: strong effort on all uphills",approach:"Gradual effort increase, maintain form",cooldown:"10-15 min easy"},focus:"Progressive loading, race preparation, mental preparation"},{name:"Over-Under Hills",duration:"Variable",hillRequirement:{grade:"moderate",distance:"Long steady climb",description:"Single long hill or multiple loops of your 0.75-mile climb"},workout:{warmup:"20 min easy",main:"3-4 x 6 min on hill: 3min @ threshold, 3min @ slightly above threshold",pattern:"Switch effort every 3 minutes without stopping",recovery:"4-5 min easy between sets",cooldown:"15 min easy"},focus:"Lactate clearance, threshold power, race-pace variability"}]}}getWorkoutsForTerrain(e){"loop_with_climb"===e&&[].push(...this.workoutLibrary.long_strength.filter(e=>e.name.includes("Tempo")),...this.workoutLibrary.hill_circuits,...this.workoutLibrary.medium_vo2.filter(e=>e.name.includes("Pyramid")));return{short_steep:[...this.workoutLibrary.short_power],medium_steady:[...this.workoutLibrary.medium_vo2],long_gentle:[...this.workoutLibrary.long_strength],rolling_terrain:[...this.workoutLibrary.specialty,...this.workoutLibrary.hill_circuits]}[e]||[]}prescribeHillWorkout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{runEqPreference:n=0,paces:o=null}=t;let a=null,s=null;for(const[r,i]of Object.entries(this.workoutLibrary)){const t=i.find(t=>t.name.toLowerCase().includes(e.toLowerCase()));if(t){a=t,s=r;break}}if(!a)return null;const l=(0,i.p)(a,null,null),c=(0,r.A)((0,r.A)({},l),{},{terrainInstructions:this.generateTerrainInstructions(l.hillRequirement),runEqAdaptation:this.adaptForRunEq(l,n),safetyNotes:this.generateSafetyNotes(s,l),alternatives:this.suggestAlternatives(l.hillRequirement)});return o&&(c.paces=o,c.name=this.injectPacesIntoName(l.name,o,l.intensity)),c}injectPacesIntoName(e,t,n){let r=e;return n&&n.toLowerCase().includes("short")&&t.interval?r="".concat(e," (").concat(t.interval.pace,"/mi)"):t.threshold?r="".concat(e," (").concat(t.threshold.pace,"/mi)"):t.interval&&(r="".concat(e," (").concat(t.interval.pace,"/mi)")),r}generateTerrainInstructions(e){if(!e||!e.grade)return{findHill:"Look for a moderate hill with 4-7% grade",measurement:"Use your phone's inclinometer app or estimate: you should feel challenged but able to maintain form",distance:"Hill should be at least 100 meters long",examples:["Neighborhood hills","Park paths","Treadmill incline"],backup:"If no ideal hill available, use treadmill at appropriate incline or find closest available grade"};const t=this.hillGradeGuidelines[e.grade];return t?{findHill:"Look for a hill with ".concat(t.description),measurement:"Use your phone's inclinometer app or estimate: you should feel challenged but able to maintain form",distance:"Hill should be at least ".concat(e.distance),examples:this.getTerrainExamples(e.grade),backup:"If no ideal hill available, use treadmill at appropriate incline or find closest available grade"}:this.generateTerrainInstructions(null)}getTerrainExamples(e){return{gentle:["Long highway on-ramps","Gradual neighborhood streets","Park paths with slight incline","Treadmill at 2-4% incline"],moderate:["Typical neighborhood hills","Multi-story parking garage ramps","Bridge approaches","Treadmill at 4-7% incline"],steep:["Short neighborhood climbs","Stadium stairs","Steep parking garage ramps","Treadmill at 7-12% incline"],very_steep:["Stadium steps","Ski slope access roads","Short power line hills","Treadmill at 12%+ incline"]}[e]||[]}adaptForRunEq(e,t){return 0===t?{note:"Full running workout as prescribed"}:e.runEqOptions?t<=25?{recommendation:e.runEqOptions.optionA}:t<=50?{recommendation:e.runEqOptions.optionB}:t<=75?{recommendation:e.runEqOptions.optionC}:{recommendation:e.runEqOptions.optionD}:{lowPreference:"Consider doing warmup/cooldown on Cyclete/Elliptigo",mediumPreference:"Alternate running and Cyclete/Elliptigo intervals",highPreference:"Full Cyclete/Elliptigo ride (use Garmin RunEQ data field to track equivalent miles)"}}generateSafetyNotes(e,t){return["Start conservatively and build intensity gradually","Focus on form - don't let hills break down your running mechanics","Stay hydrated and fuel appropriately for longer hill sessions",...{short_power:["Very high intensity - ensure adequate recovery","Perfect form is critical at high speeds"],medium_vo2:["Monitor effort level - hills amplify perceived exertion","Don't start too fast on first rep"],long_strength:["Pace should feel sustainable for the full duration","Mental focus is as important as physical strength"],downhill_specific:["HIGH INJURY RISK - start very conservatively","Focus on quick cadence, not long strides","Stop if you feel excessive quad/knee stress"],hill_circuits:["Monitor cumulative fatigue across multiple loops","Adjust effort based on conditions and fatigue"]}[e]||[]]}suggestAlternatives(e){return{noHill:"Use treadmill with appropriate incline setting",hillTooShort:"Repeat shorter hill multiple times with brief recovery",hillTooLong:"Use only portion of longer hill, mark turnaround point",wrongGrade:"Adjust effort level to compensate - easier on steeper hills, harder on gentler grades",indoorOption:"StairMaster, stadium stairs, or parking garage ramps can substitute"}}getWorkoutsByCategory(e){return this.workoutLibrary[e]||[]}getCategories(){return Object.keys(this.workoutLibrary)}getRandomWorkout(e){const t=this.getWorkoutsByCategory(e);if(0===t.length)throw new Error("No workouts found in category: ".concat(e));return t[Math.floor(Math.random()*t.length)]}searchWorkouts(e){const t=[],n=e.toLowerCase();for(const[i,o]of Object.entries(this.workoutLibrary))for(const e of o)(e.name.toLowerCase().includes(n)||e.focus.toLowerCase().includes(n))&&t.push((0,r.A)((0,r.A)({},e),{},{category:i}));return t}}},180:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var o in r={},t)"key"!==o&&(r[o]=t[o]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},187:(e,t,n)=>{n.d(t,{s:()=>o});var r=n(379),i=n(334);class o{constructor(){this.tempoIntensityGuidelines={comfortablyHard:{description:"Controlled breathing, can speak in short sentences",heartRate:"86-90% max HR",effort:"Medium-hard effort, sustainable for 20-60 minutes"},thresholdPace:{description:"Lactate threshold pace - usually around 1-hour race pace",heartRate:"88-92% max HR",effort:"Controlled discomfort, rhythmic breathing"},tempoPlus:{description:"Slightly faster than threshold - 10K to 15K pace",heartRate:"90-94% max HR",effort:"Harder breathing, shorter sustainable durations"}},this.workoutLibrary={TRADITIONAL_TEMPO:[{name:"Classic Tempo Run",duration:"20-40 minutes",structure:"15-20 min easy warmup + 20-40 min tempo + 10-15 min easy cooldown",intensity:"comfortablyHard",source:"Hal Higdon / McMillan",description:"Continuous run at lactate threshold pace",benefits:"Improves lactate clearance, race pacing, mental toughness",progression:{beginner:"Start with 15-20 min tempo, build by 3-5 min weekly",intermediate:"20-30 min tempo, focus on consistent pacing",advanced:"30-40 min tempo, practice race-specific scenarios"}},{name:"Sandwich Tempo",duration:"30-45 minutes total",structure:"10-15 min easy + 15-20 min tempo + 5-10 min easy",intensity:"comfortablyHard",source:"Hal Higdon adaptation",description:"Tempo effort sandwiched between easy running",benefits:"Teaches body to settle into tempo rhythm, race simulation"}],TEMPO_INTERVALS:[{name:"McMillan 2x2 Miles",duration:"45-50 minutes total",structure:"Warmup + 2x2 miles @ tempo with 3 min recovery + Cooldown",intensity:"thresholdPace",source:"McMillan Running",description:"Two 2-mile repeats at threshold pace",benefits:"Mental preparation for longer races, pacing practice",variations:["2x3 miles for marathon training","3x2 miles for advanced athletes","2x1.5 miles for beginners"]},{name:"Cruise Intervals",duration:"30-40 minutes total",structure:"Warmup + 4-6 x 3-8 min @ tempo with 1-2 min recovery + Cooldown",intensity:"thresholdPace",source:"Jack Daniels / McMillan",description:"Multiple medium-length intervals at threshold pace",benefits:"Accumulates time at threshold, teaches recovery between efforts",examples:["4 x 5 min with 90 sec recovery","5 x 4 min with 2 min recovery","6 x 3 min with 60 sec recovery"]},{name:"Cutdown Tempo Intervals",duration:"40-45 minutes total",structure:"Warmup + 5 min + 4 min + 3 min + 2 min @ tempo (2 min recovery) + Cooldown",intensity:"thresholdPace",source:"Advanced coaching adaptation",description:"Descending interval lengths at consistent tempo pace",benefits:"Mental strength, teaches pace discipline under fatigue"}],ALTERNATING_TEMPO:[{name:"McMillan Minutes Workout",duration:"20-60 minutes total",structure:"Warmup + Alternate 1 min tempo / 1 min easy x 10-30 + Cooldown",intensity:"comfortablyHard",source:"McMillan Running",description:"Alternate tempo and easy minutes without stopping",benefits:"Avoids going too fast, accumulates threshold time",progression:{week1:"10 x (1 min on / 1 min easy)",week4:"20 x (1 min on / 1 min easy)",week8:"25-30 x (1 min on / 1 min easy)"},notes:"Easy minutes naturally get faster as workout progresses"},{name:"2 Minutes On/Off",duration:"32-48 minutes total",structure:"Warmup + 8-12 x (2 min tempo / 2 min easy) + Cooldown",intensity:"comfortablyHard",source:"Tempo progression adaptation",description:"Longer alternating segments for advanced athletes",benefits:"Extended time in tempo zone, teaches rhythm"},{name:"Tempo Fartlek",duration:"25-35 minutes total",structure:"Warmup + 15-20 min of varied tempo surges (30sec-3min) + Cooldown",intensity:"comfortablyHard to tempoPlus",source:"Swedish fartlek adaptation",description:"Unstructured tempo efforts based on feel and terrain",benefits:"Teaches pace variety, mental flexibility, fun factor"}],PROGRESSIVE_TEMPO:[{name:"Build-Up Tempo",duration:"25-35 minutes",structure:"Warmup + 20 min building from easy to tempo + Cooldown",intensity:"easy to comfortablyHard",source:"Progressive training philosophy",description:"Gradually build from easy pace to tempo over 20 minutes",benefits:"Smooth transition to tempo, teaches pacing, less jarring"},{name:"Negative Split Tempo",duration:"30-40 minutes",structure:"Warmup + 2 x 10-15 min (first @ easy-moderate, second @ tempo) + Cooldown",intensity:"moderate to comfortablyHard",source:"Race pacing strategy",description:"Two equal segments with second half at tempo pace",benefits:"Race strategy practice, controlled progression"},{name:"Tempo Ladder",duration:"35-45 minutes",structure:"Warmup + 3-5-7-5-3 min @ tempo (2 min recovery) + Cooldown",intensity:"thresholdPace",source:"Pyramid training adaptation",description:"Ladder format building to longer tempo effort",benefits:"Mental preparation, variety in interval lengths"}],RACE_SPECIFIC:[{name:"Marathon Pace Tempo",duration:"40-70 minutes",structure:"Warmup + 6-13 miles @ marathon pace + Cooldown",intensity:"Slightly easier than comfortablyHard",source:"Ben Parkes / Marathon specific",description:"Extended runs at goal marathon pace",benefits:"Marathon pace practice, aerobic development",progression:"Start at 6 miles, build by 1-2 miles every 2-3 weeks"},{name:"10K Tempo Simulation",duration:"35-45 minutes",structure:"Warmup + 2 miles easy + 4 miles @ 10K pace + 1-2 miles easy",intensity:"tempoPlus",source:"Race pace training",description:"Simulate 10K race effort within longer run",benefits:"10K pacing, mental preparation, race confidence"}]}}prescribeTempoWorkout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{runEqPreference:n=0,paces:o=null,weekNumber:a=null,totalWeeks:s=null}=t;let l=null,c=null;for(const[r,i]of Object.entries(this.workoutLibrary)){const t=i.find(t=>t.name.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(t.name.toLowerCase()));if(t){l=t,c=r;break}}if(!l)throw new Error('Workout "'.concat(e,'" not found'));const u=this.tempoIntensityGuidelines[l.intensity],d=(0,r.A)((0,r.A)({},l),{},{category:c,intensityGuidance:u,runEqOptions:this.generateRunEqOptions(l,n),safetyNotes:this.getTempoSafetyNotes(l),paceGuidance:this.getPaceGuidance(l.intensity),alternatives:this.getTempoAlternatives(l)});return o?(d.paces=o,d.name=this.injectPacesIntoName(l.name,o),d.structure=this.injectPacesIntoStructure(l.structure,o,a,s),d.description=this.injectPacesIntoDescription(l.description,o)):d.structure=(0,i.Y)(l.structure,a,s),d}injectPacesIntoName(e,t){let n=e;return t.threshold&&(n="".concat(e," (").concat(t.threshold.pace,"/mi)")),n}injectPacesIntoStructure(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=(0,i.Y)(e,n,r);return t.threshold&&(o=o.replace(/@ tempo/g,"@ ".concat(t.threshold.pace,"/mile")),o=o.replace(/\bmin tempo\b/g,"min @ ".concat(t.threshold.pace,"/mile")),o=o.replace(/tempo pace/g,"".concat(t.threshold.pace,"/mile"))),t.easy&&(o=o.replace(/\beasy warmup\b/g,"easy (".concat(t.easy.min,"-").concat(t.easy.max,"/mile) warmup")),o=o.replace(/\beasy cooldown\b/g,"easy (".concat(t.easy.min,"-").concat(t.easy.max,"/mile) cooldown")),o=o.replace(/(\d+)(-\d+)? min easy\b/g,"$1$2 min easy (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)"))),t.marathon&&(o=o.replace(/@ marathon pace/g,"@ ".concat(t.marathon.pace,"/mile")),o=o.replace(/@ half pace/g,"@ ".concat(t.marathon.pace,"/mile")),o=o.replace(/@ MP/g,"@ ".concat(t.marathon.pace,"/mile"))),o}injectPacesIntoDescription(e,t){return e}generateRunEqOptions(e,t){const n={optionA:"Full running workout",optionB:"First half running, second half riding (Cyclete/Elliptigo)",optionC:"Alternate running/riding every interval or segment",optionD:"Full Cyclete/Elliptigo ride (use Garmin RunEQ data field to track equivalent miles)"};return n.recommendation=t>=70?"Full Cyclete/Elliptigo ride":t>=40?"Split workout - start running, finish riding":t>=20?"Alternate segments between running and riding":"Full running workout",n}getTempoSafetyNotes(e){const t=["Start conservatively - tempo should feel 'controlled discomfort'","If breathing becomes labored, slow down slightly","Better to run slightly too easy than too hard","Recovery between intervals should be easy jogging or walking"];return(e.name.includes("Minutes")||e.name.includes("Alternating"))&&t.push("Let easy segments naturally speed up as workout progresses"),(e.duration.includes("40")||e.duration.includes("50"))&&(t.push("Fuel appropriately for longer tempo sessions"),t.push("Stay hydrated throughout the workout")),t}getPaceGuidance(e){const t={comfortablyHard:{description:"Half marathon to 10-mile race pace",breathingTest:"Can speak 3-5 words at a time",effortLevel:"7-8 out of 10",commonMistake:"Running too fast - this should feel controlled"},thresholdPace:{description:"15K to 1-hour race pace",breathingTest:"Can speak 2-3 words with some difficulty",effortLevel:"8 out of 10",commonMistake:"Going anaerobic - keep it at threshold level"},tempoPlus:{description:"10K to 8K race pace",breathingTest:"Difficult to speak in sentences",effortLevel:"8-9 out of 10",commonMistake:"Unsustainable pace - should feel hard but controlled"}};return t[e]||t.comfortablyHard}getTempoAlternatives(e){return{treadmill:"Use slight incline (1-2%) to simulate outdoor effort",track:"4-6 laps for every mile of tempo running",badWeather:"Indoor track, treadmill, or covered area like parking garage",injury:"Pool running, elliptical, or Cyclete/Elliptigo ride maintaining same effort level",noTime:"Shorten warmup/cooldown, focus on quality tempo portion",tooHard:"Reduce intensity to comfortable-moderate effort, build gradually",tooEasy:"Slightly increase pace, but avoid going anaerobic"}}getWorkoutsByCategory(e){return this.workoutLibrary[e]||[]}getCategories(){return Object.keys(this.workoutLibrary)}getRandomWorkout(e){const t=this.getWorkoutsByCategory(e);if(0===t.length)throw new Error("No workouts found in category: ".concat(e));return t[Math.floor(Math.random()*t.length)]}searchWorkouts(e){const t=[],n=e.toLowerCase();for(const[i,o]of Object.entries(this.workoutLibrary))for(const e of o)(e.name.toLowerCase().includes(n)||e.description.toLowerCase().includes(n)||e.source.toLowerCase().includes(n))&&t.push((0,r.A)((0,r.A)({},e),{},{category:i}));return t}}},222:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let n=null;if(!e||"string"!==typeof e)return n;const r=(0,i.default)(e),o="function"===typeof t;return r.forEach(e=>{if("declaration"!==e.type)return;const{property:r,value:i}=e;o?t(r,i,e):i&&(n=n||{},n[r]=i)}),n};const i=r(n(106))},224:(e,t,n)=>{n.d(t,{i0:()=>r,i8:()=>o,iY:()=>i});const r={marathon:[{goalTime:"6:00:00",paces:{easy:{min:"12:52",max:"14:04",km:"8:00-8:44"},marathon:{pace:"13:38",km:"8:28"},threshold:{pace:"11:42",km:"7:16"},interval:{pace:"10:00",km:"6:13"}},trackIntervals:{threshold:{"1200m":"8:43","800m":"5:49","600m":"4:22"},interval:{"400m":"2:29","300m":"1:53","200m":"1:15"}}},{goalTime:"5:45:00",paces:{easy:{min:"12:35",max:"13:45",km:"7:49-8:33"},marathon:{pace:"13:05",km:"8:08"},threshold:{pace:"11:20",km:"7:02"},interval:{pace:"9:46",km:"6:04"}},trackIntervals:{threshold:{"1200m":"8:27","800m":"5:38","600m":"4:13"},interval:{"400m":"2:26","300m":"1:49","200m":"1:13"}}},{goalTime:"5:30:00",paces:{easy:{min:"12:17",max:"13:26",km:"7:38-8:21"},marathon:{pace:"12:32",km:"7:47"},threshold:{pace:"10:57",km:"6:49"},interval:{pace:"9:31",km:"5:55"}},trackIntervals:{threshold:{"1200m":"8:10","800m":"5:27","600m":"4:05"},interval:{"400m":"2:22","300m":"1:46","200m":"1:11"}}},{goalTime:"5:15:00",paces:{easy:{min:"11:58",max:"13:06",km:"7:26-8:08"},marathon:{pace:"11:58",km:"7:26"},threshold:{pace:"10:34",km:"6:34"},interval:{pace:"9:16",km:"5:45"}},trackIntervals:{threshold:{"1200m":"7:53","800m":"5:15","600m":"3:57"},interval:{"400m":"2:18","300m":"1:44","200m":"1:09"}}},{goalTime:"5:00:00",paces:{easy:{min:"11:38",max:"12:45",km:"7:14-7:55"},marathon:{pace:"11:25",km:"7:05"},threshold:{pace:"10:11",km:"6:20"},interval:{pace:"9:00",km:"5:35"}},trackIntervals:{threshold:{"1200m":"7:36","800m":"5:04","600m":"3:48"},interval:{"400m":"2:14","300m":"1:41","200m":"1:07"}}},{goalTime:"4:45:00",paces:{easy:{min:"11:18",max:"12:23",km:"7:01-7:42"},marathon:{pace:"10:51",km:"6:45"},threshold:{pace:"9:47",km:"6:05"},interval:{pace:"8:43",km:"5:25"}},trackIntervals:{threshold:{"1200m":"7:18","800m":"4:52","600m":"3:39"},interval:{"400m":"2:10","300m":"1:38","200m":"1:05"}}},{goalTime:"4:30:00",paces:{easy:{min:"10:57",max:"12:00",km:"6:48-7:27"},marathon:{pace:"10:17",km:"6:24"},threshold:{pace:"9:22",km:"5:49"},interval:{pace:"8:26",km:"5:15"}},trackIntervals:{threshold:{"1200m":"6:59","800m":"4:40","600m":"3:30"},interval:{"400m":"2:06","300m":"1:34","200m":"1:03"}}},{goalTime:"4:15:00",paces:{easy:{min:"10:34",max:"11:36",km:"6:34-7:13"},marathon:{pace:"9:43",km:"6:02"},threshold:{pace:"8:57",km:"5:34"},interval:{pace:"8:08",km:"5:03"}},trackIntervals:{threshold:{"1200m":"6:41","800m":"4:27","600m":"3:20"},interval:{"400m":"2:01","300m":"1:31","200m":"1:01"}}},{goalTime:"4:00:00",paces:{easy:{min:"10:11",max:"11:11",km:"6:20-6:57"},marathon:{pace:"9:09",km:"5:41"},threshold:{pace:"8:32",km:"5:18"},interval:{pace:"7:50",km:"4:52"}},trackIntervals:{threshold:{"1200m":"6:22","800m":"4:14","600m":"3:11"},interval:{"400m":"1:57","300m":"1:28","200m":"0:58"}}},{goalTime:"3:45:00",paces:{easy:{min:"9:39",max:"10:36",km:"6:00-6:35"},marathon:{pace:"8:35",km:"5:20"},threshold:{pace:"8:02",km:"5:00"},interval:{pace:"7:24",km:"4:36"}},trackIntervals:{threshold:{"1200m":"6:00","800m":"4:00","600m":"3:00"},interval:{"400m":"1:50","300m":"1:23","200m":"0:55"}}},{goalTime:"3:30:00",paces:{easy:{min:"9:02",max:"9:56",km:"5:37-6:11"},marathon:{pace:"8:01",km:"4:59"},threshold:{pace:"7:31",km:"4:40"},interval:{pace:"6:55",km:"4:18"}},trackIntervals:{threshold:{"1200m":"5:36","800m":"3:44","600m":"2:48"},interval:{"400m":"1:43","300m":"1:17","200m":"0:52"}}},{goalTime:"3:15:00",paces:{easy:{min:"8:25",max:"9:16",km:"5:14-5:46"},marathon:{pace:"7:26",km:"4:37"},threshold:{pace:"7:00",km:"4:21"},interval:{pace:"6:26",km:"4:00"}},trackIntervals:{threshold:{"1200m":"5:13","800m":"3:29","600m":"2:37"},interval:{"400m":"1:36","300m":"1:12","200m":"0:48"}}},{goalTime:"3:00:00",paces:{easy:{min:"7:48",max:"8:36",km:"4:51-5:21"},marathon:{pace:"6:52",km:"4:16"},threshold:{pace:"6:29",km:"4:02"},interval:{pace:"5:58",km:"3:42"}},trackIntervals:{threshold:{"1200m":"4:50","800m":"3:13","600m":"2:25"},interval:{"400m":"1:29","300m":"1:07","200m":"0:44"}}},{goalTime:"2:45:00",paces:{easy:{min:"7:11",max:"7:55",km:"4:28-4:55"},marathon:{pace:"6:18",km:"3:55"},threshold:{pace:"5:58",km:"3:42"},interval:{pace:"5:29",km:"3:24"}},trackIntervals:{threshold:{"1200m":"4:27","800m":"2:58","600m":"2:13"},interval:{"400m":"1:22","300m":"1:01","200m":"0:41"}}},{goalTime:"2:30:00",paces:{easy:{min:"6:33",max:"7:14",km:"4:04-4:30"},marathon:{pace:"5:43",km:"3:33"},threshold:{pace:"5:27",km:"3:23"},interval:{pace:"5:01",km:"3:07"}},trackIntervals:{threshold:{"1200m":"4:04","800m":"2:42","600m":"2:02"},interval:{"400m":"1:15","300m":"0:56","200m":"0:37"}}},{goalTime:"2:15:00",paces:{easy:{min:"5:56",max:"6:33",km:"3:41-4:04"},marathon:{pace:"5:09",km:"3:12"},threshold:{pace:"4:56",km:"3:04"},interval:{pace:"4:32",km:"2:49"}},trackIntervals:{threshold:{"1200m":"3:40","800m":"2:27","600m":"1:50"},interval:{"400m":"1:08","300m":"0:51","200m":"0:34"}}},{goalTime:"2:00:00",paces:{easy:{min:"5:18",max:"5:51",km:"3:18-3:38"},marathon:{pace:"4:34",km:"2:50"},threshold:{pace:"4:25",km:"2:44"},interval:{pace:"4:04",km:"2:32"}},trackIntervals:{threshold:{"1200m":"3:17","800m":"2:12","600m":"1:39"},interval:{"400m":"1:01","300m":"0:45","200m":"0:30"}}}],"10K":[{goalTime:"80:00",paces:{easy:{min:"13:14",max:"14:28",km:"8:13-8:59"},marathon:{pace:"14:04",km:"8:44"},threshold:{pace:"11:58",km:"7:26"},interval:{pace:"10:11",km:"6:20"}},trackIntervals:{threshold:{"1200m":"8:56","800m":"5:58","600m":"4:28"},interval:{"400m":"2:32","300m":"1:54","200m":"1:16"}}},{goalTime:"70:00",paces:{easy:{min:"12:18",max:"13:27",km:"7:38-8:21"},marathon:{pace:"12:35",km:"7:49"},threshold:{pace:"10:59",km:"6:49"},interval:{pace:"9:33",km:"5:56"}},trackIntervals:{threshold:{"1200m":"8:12","800m":"5:28","600m":"4:06"},interval:{"400m":"2:23","300m":"1:47","200m":"1:11"}}},{goalTime:"60:00",paces:{easy:{min:"11:11",max:"12:15",km:"6:57-7:37"},marathon:{pace:"10:58",km:"6:49"},threshold:{pace:"9:48",km:"6:05"},interval:{pace:"8:39",km:"5:22"}},trackIntervals:{threshold:{"1200m":"7:19","800m":"4:53","600m":"3:40"},interval:{"400m":"2:09","300m":"1:37","200m":"1:04"}}},{goalTime:"55:00",paces:{easy:{min:"10:32",max:"11:32",km:"6:33-7:10"},marathon:{pace:"10:15",km:"6:22"},threshold:{pace:"9:09",km:"5:41"},interval:{pace:"8:08",km:"5:03"}},trackIntervals:{threshold:{"1200m":"6:50","800m":"4:33","600m":"3:25"},interval:{"400m":"2:01","300m":"1:31","200m":"1:01"}}},{goalTime:"50:00",paces:{easy:{min:"9:51",max:"10:48",km:"6:07-6:43"},marathon:{pace:"9:29",km:"5:53"},threshold:{pace:"8:29",km:"5:16"},interval:{pace:"7:35",km:"4:43"}},trackIntervals:{threshold:{"1200m":"6:20","800m":"4:13","600m":"3:10"},interval:{"400m":"1:53","300m":"1:25","200m":"0:57"}}},{goalTime:"45:00",paces:{easy:{min:"9:07",max:"10:00",km:"5:40-6:13"},marathon:{pace:"8:41",km:"5:23"},threshold:{pace:"7:46",km:"4:50"},interval:{pace:"6:58",km:"4:20"}},trackIntervals:{threshold:{"1200m":"5:48","800m":"3:52","600m":"2:54"},interval:{"400m":"1:44","300m":"1:18","200m":"0:52"}}},{goalTime:"42:00",paces:{easy:{min:"8:42",max:"9:32",km:"5:24-5:56"},marathon:{pace:"8:15",km:"5:08"},threshold:{pace:"7:23",km:"4:35"},interval:{pace:"6:38",km:"4:07"}},trackIntervals:{threshold:{"1200m":"5:31","800m":"3:40","600m":"2:45"},interval:{"400m":"1:39","300m":"1:14","200m":"0:50"}}},{goalTime:"38:00",paces:{easy:{min:"8:07",max:"8:56",km:"5:02-5:33"},marathon:{pace:"7:36",km:"4:43"},threshold:{pace:"6:51",km:"4:15"},interval:{pace:"6:10",km:"3:50"}},trackIntervals:{threshold:{"1200m":"5:07","800m":"3:24","600m":"2:33"},interval:{"400m":"1:32","300m":"1:09","200m":"0:46"}}},{goalTime:"32:00",paces:{easy:{min:"7:13",max:"7:56",km:"4:29-4:56"},marathon:{pace:"6:40",km:"4:09"},threshold:{pace:"6:03",km:"3:45"},interval:{pace:"5:28",km:"3:23"}},trackIntervals:{threshold:{"1200m":"4:31","800m":"3:01","600m":"2:16"},interval:{"400m":"1:22","300m":"1:01","200m":"0:41"}}}],halfMarathon:[{goalTime:"3:00:00",paces:{easy:{min:"12:59",max:"14:11",km:"8:04-8:49"},marathon:{pace:"13:51",km:"8:36"},threshold:{pace:"11:50",km:"7:21"},interval:{pace:"10:05",km:"6:16"}},trackIntervals:{threshold:{"1200m":"8:50","800m":"5:53","600m":"4:25"},interval:{"400m":"2:30","300m":"1:53","200m":"1:15"}}},{goalTime:"2:45:00",paces:{easy:{min:"12:25",max:"13:34",km:"7:43-8:26"},marathon:{pace:"12:46",km:"7:56"},threshold:{pace:"11:07",km:"6:55"},interval:{pace:"9:37",km:"5:59"}},trackIntervals:{threshold:{"1200m":"8:17","800m":"5:32","600m":"4:09"},interval:{"400m":"2:23","300m":"1:48","200m":"1:12"}}},{goalTime:"2:30:00",paces:{easy:{min:"11:48",max:"12:55",km:"7:20-8:02"},marathon:{pace:"11:40",km:"7:15"},threshold:{pace:"10:22",km:"6:26"},interval:{pace:"9:07",km:"5:40"}},trackIntervals:{threshold:{"1200m":"7:44","800m":"5:09","600m":"3:52"},interval:{"400m":"2:16","300m":"1:42","200m":"1:08"}}},{goalTime:"2:15:00",paces:{easy:{min:"11:07",max:"12:12",km:"6:55-7:35"},marathon:{pace:"10:34",km:"6:34"},threshold:{pace:"9:35",km:"5:57"},interval:{pace:"8:35",km:"5:20"}},trackIntervals:{threshold:{"1200m":"7:08","800m":"4:46","600m":"3:34"},interval:{"400m":"2:08","300m":"1:36","200m":"1:04"}}},{goalTime:"2:00:00",paces:{easy:{min:"10:23",max:"11:24",km:"6:27-7:05"},marathon:{pace:"9:27",km:"5:52"},threshold:{pace:"8:45",km:"5:26"},interval:{pace:"7:59",km:"4:58"}},trackIntervals:{threshold:{"1200m":"6:32","800m":"4:21","600m":"3:16"},interval:{"400m":"1:59","300m":"1:29","200m":"1:00"}}},{goalTime:"1:45:00",paces:{easy:{min:"9:21",max:"10:17",km:"5:49-6:23"},marathon:{pace:"8:19",km:"5:10"},threshold:{pace:"7:48",km:"4:51"},interval:{pace:"7:10",km:"4:27"}},trackIntervals:{threshold:{"1200m":"5:49","800m":"3:52","600m":"2:54"},interval:{"400m":"1:47","300m":"1:20","200m":"0:53"}}},{goalTime:"1:30:00",paces:{easy:{min:"8:07",max:"8:56",km:"5:02-5:33"},marathon:{pace:"7:09",km:"4:27"},threshold:{pace:"6:45",km:"4:11"},interval:{pace:"6:12",km:"3:51"}},trackIntervals:{threshold:{"1200m":"5:02","800m":"3:21","600m":"2:31"},interval:{"400m":"1:33","300m":"1:09","200m":"0:46"}}},{goalTime:"1:15:00",paces:{easy:{min:"6:51",max:"7:33",km:"4:15-4:42"},marathon:{pace:"5:59",km:"3:43"},threshold:{pace:"5:41",km:"3:32"},interval:{pace:"5:14",km:"3:15"}},trackIntervals:{threshold:{"1200m":"4:14","800m":"2:49","600m":"2:07"},interval:{"400m":"1:18","300m":"0:58","200m":"0:39"}}},{goalTime:"1:00:00",paces:{easy:{min:"5:33",max:"6:07",km:"3:27-3:48"},marathon:{pace:"4:47",km:"2:59"},threshold:{pace:"4:36",km:"2:52"},interval:{pace:"4:15",km:"2:38"}},trackIntervals:{threshold:{"1200m":"3:26","800m":"2:17","600m":"1:43"},interval:{"400m":"1:03","300m":"0:47","200m":"0:32"}}}]};function i(e){const t=e.split(":").map(Number);return 60*t[0]+t[1]}function o(e){const t=Math.floor(e/60),n=Math.round(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))}},240:e=>{var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},a=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var r,i=t.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!o)return!1;for(r in e);return"undefined"===typeof r||t.call(e,r)},s=function(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(i)return i(e,n).value}return e[n]};e.exports=function e(){var t,n,r,i,c,u,d=arguments[0],h=1,p=arguments.length,m=!1;for("boolean"===typeof d&&(m=d,d=arguments[1]||{},h=2),(null==d||"object"!==typeof d&&"function"!==typeof d)&&(d={});h<p;++h)if(null!=(t=arguments[h]))for(n in t)r=l(d,n),d!==(i=l(t,n))&&(m&&i&&(a(i)||(c=o(i)))?(c?(c=!1,u=r&&o(r)?r:[]):u=r&&a(r)?r:{},s(d,{name:n,newValue:e(m,u,i)})):"undefined"!==typeof i&&s(d,{name:n,newValue:i}));return d}},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,f(b,y.prototype),b.isPureReactComponent=!0;var k=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},x=Object.prototype.hasOwnProperty;function E(e,t,r,i,o,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(){}function R(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(s){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return R((u=e._init)(e._payload),t,i,o,a)}}if(u)return a=a(e),u=""===o?"."+C(e,0):o,k(a)?(i="",null!=u&&(i=u.replace(A,"$&/")+"/"),R(a,t,i,"",function(e){return e})):null!=a&&(S(a)&&(l=a,c=i+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+u,a=E(l.type,c,void 0,0,0,l.props)),t.push(a)),1;u=0;var d,m=""===o?".":o+":";if(k(e))for(var f=0;f<e.length;f++)u+=R(o=e[f],t,i,s=m+C(o,f),a);else if("function"===typeof(f=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=f.call(e),f=0;!(o=e.next()).done;)u+=R(o=o.value,t,i,s=m+C(o,f++),a);else if("object"===s){if("function"===typeof e.then)return R(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(T,T):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,o,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function F(e,t,n){if(null==e)return e;var r=[],i=0;return R(e,r,"","",function(e){return t.call(n,e,i++)}),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function M(){}t.Children={map:F,forEach:function(e,t,n){F(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return F(e,function(){t++}),t},toArray:function(e){return F(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=w,t.StrictMode=o,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return D.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=f({},e.props),i=e.key;if(null!=t)for(o in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!x.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var a=Array(o),s=0;s<o;s++)a[s]=arguments[s+2];r.children=a}return E(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,i={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)x.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var s=Array(a),l=0;l<a;l++)s[l]=arguments[l+2];i.children=s}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return E(e,o,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.T,n={};D.T=n;try{var r=e(),i=D.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(M,P)}catch(o){P(o)}finally{D.T=t}},t.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},t.use=function(e){return D.H.use(e)},t.useActionState=function(e,t,n){return D.H.useActionState(e,t,n)},t.useCallback=function(e,t){return D.H.useCallback(e,t)},t.useContext=function(e){return D.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return D.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=D.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return D.H.useId()},t.useImperativeHandle=function(e,t,n){return D.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.H.useMemo(e,t)},t.useOptimistic=function(e,t){return D.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return D.H.useReducer(e,t,n)},t.useRef=function(e){return D.H.useRef(e)},t.useState=function(e){return D.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.H.useTransition()},t.version="19.1.1"},294:function(e,t,n){var r=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(n(222)),i=n(146);function o(e,t){var n={};return e&&"string"===typeof e?((0,r.default)(e,function(e,r){e&&r&&(n[(0,i.camelCase)(e,t)]=r)}),n):n}o.default=o,e.exports=o},334:(e,t,n)=>{n.d(t,{Y:()=>i,p:()=>o});var r=n(379);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e||"string"!==typeof e)return e;let r=e;const i=(e,t,n,r)=>{if(n&&r){const i=Math.min(1,n/(.75*r));return Math.round(e+i*(t-e))}return Math.round((e+t)/2)},o=r.match(/(\d+)-(\d+)\s*x\s*(\d+)-(\d+)\s*min/);if(o){const e=parseInt(o[1],10),a=parseInt(o[2],10),s=parseInt(o[3],10),l=parseInt(o[4],10),c=i(e,a,t,n),u=i(s,l,t,n);r=r.replace(/(\d+)-(\d+)\s*x\s*(\d+)-(\d+)\s*min/,"".concat(c," x ").concat(u," min"))}const a=r.match(/(\d+)-(\d+)\s*x\s*\(/);if(a){const e=i(parseInt(a[1],10),parseInt(a[2],10),t,n);r=r.replace(/(\d+)-(\d+)\s*x\s*\(/,"".concat(e," x ("))}const s=r.match(/x\s*(\d+)-(\d+)(?:\s|$|\)|,)/);if(s&&!r.includes("x (")){const e=i(parseInt(s[1],10),parseInt(s[2],10),t,n);r=r.replace(/x\s*(\d+)-(\d+)(?:\s|$|\)|,)/,"x ".concat(e," "))}const l=r.match(/(\d+)\s*x\s*(\d+)-(\d+)\s*min/);if(l){const e=parseInt(l[1],10),o=i(parseInt(l[2],10),parseInt(l[3],10),t,n);r=r.replace(/(\d+)\s*x\s*(\d+)-(\d+)\s*min/,"".concat(e," x ").concat(o," min"))}const c=r.match(/(\d+)-(\d+)\s*min\s*recovery/);if(c){const e=parseInt(c[1],10),t=parseInt(c[2],10),n=Math.round((e+t)/2);if(n<=2){const e=60*n;r=r.replace(/(\d+)-(\d+)\s*min\s*recovery/,"".concat(e," sec recovery"))}else r=r.replace(/(\d+)-(\d+)\s*min\s*recovery/,"".concat(n," min recovery"))}const u=r.match(/(\d+)-(\d+)\s*min\s+(?:easy|warmup|cooldown|tempo|steady)/);if(u){const e=i(parseInt(u[1],10),parseInt(u[2],10),t,n);r=r.replace(/(\d+)-(\d+)\s*min\s+(?:easy|warmup|cooldown|tempo|steady)/,"".concat(e," min $2"))}const d=r.match(/(\d+)-(\d+)\s*x\s*(\d+)\s*min/);if(d){const e=parseInt(d[1],10),o=parseInt(d[2],10),a=d[3],s=i(e,o,t,n);r=r.replace(/(\d+)-(\d+)\s*x\s*(\d+)\s*min/,"".concat(s," x ").concat(a," min"))}const h=r.match(/(\d+)-(\d+)\s*x\s*(\d+)\s*min(?!\s*@)/);if(h&&!r.match(/(\d+)-(\d+)\s*x\s*(\d+)-(\d+)\s*min/)){const e=parseInt(h[1],10),o=parseInt(h[2],10),a=h[3],s=i(e,o,t,n);r=r.replace(/(\d+)-(\d+)\s*x\s*(\d+)\s*min(?!\s*@)/,"".concat(s," x ").concat(a," min"))}const p=r.match(/(\d+)-(\d+)\s*miles?\s*(?:@|at|easy|pace)/);if(p){const e=i(parseInt(p[1],10),parseInt(p[2],10),t,n);r=r.replace(/(\d+)-(\d+)\s*miles?\s*(?:@|at|easy|pace)/,"".concat(e," miles "))}const m=r.match(/(\d+)-(\d+)\s*(?:sec|seconds?|min|minutes?)/);if(m&&!r.match(/\d+-\d+\s*x\s*\d+/)){const e=parseInt(m[1],10),o=parseInt(m[2],10),a=m[0].includes("sec")?"sec":"min",s=i(e,o,t,n);r=r.replace(/(\d+)-(\d+)\s*(?:sec|seconds?|min|minutes?)/,"".concat(s," ").concat(a))}return r}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return e;const o=(0,r.A)({},e);return o.structure&&"string"===typeof o.structure&&(o.structure=i(o.structure,t,n)),o.workout&&(o.workout=(0,r.A)({},o.workout),["warmup","main","recovery","cooldown","repeat"].forEach(e=>{o.workout[e]&&"string"===typeof o.workout[e]&&(o.workout[e]=i(o.workout[e],t,n))})),o}},379:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(705);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},452:(e,t,n)=>{n.d(t,{A:()=>r});const r={log:function(){0},info:function(){0},warn:function(){console.warn(...arguments)},error:function(){console.error(...arguments)}}},462:(e,t,n)=>{function r(e,t){const n={valid:!0,errors:[]};if(!e||!e.weeks)return{valid:!1,errors:["Plan or weeks missing"]};const r=function(e){const t=[];return e.forEach((e,n)=>{e.workouts&&0!==e.workouts.length||t.push("Week ".concat(e.weekNumber||n+1," has 0 workouts - parsing may have failed"))}),t.length>0?(console.error("\u274c WORKOUT PARSING VALIDATION FAILED:",t),{valid:!1,errors:t}):{valid:!0}}(e.weeks);r.valid||(n.valid=!1,n.errors.push(...r.errors));const i=(null===t||void 0===t?void 0:t.qualityDays)||(null===t||void 0===t?void 0:t.hardSessionDays)||[];if(i.length>0){const t=function(e,t){if(!t||0===t.length)return{valid:!0};const n=[];return e.forEach(e=>{e.workouts.forEach(r=>{if(t.includes(r.day)){const t=(r.description||"").toLowerCase(),i="tempo"===r.workoutType||"interval"===r.workoutType||"hill"===r.workoutType||"tempo"===r.type||"interval"===r.type||"hill"===r.type||t.includes("tempo")||t.includes("interval")||t.includes("hill")||t.includes("speed"),o=t.includes("rest")||"rest"===r.type,a=t.includes("easy")&&!i&&!t.includes("tempo")&&!t.includes("interval")&&!t.includes("hill");(o||a&&!i)&&n.push("Week ".concat(e.weekNumber,": ").concat(r.day," is a hard day but has ").concat(r.description))}})}),n.length>0?(console.error("\u274c HARD DAYS VALIDATION FAILED:",n),{valid:!1,errors:n}):{valid:!0}}(e.weeks,i);t.valid||(n.valid=!1,n.errors.push(...t.errors))}if(null!==t&&void 0!==t&&t.restDays){const r=function(e,t){if(!t||0===t.length)return{valid:!0};const n=[];return e.forEach(e=>{e.workouts.forEach(r=>{if(t.includes(r.day)){const t=(r.description||"").toLowerCase(),i=t.includes("tempo")||t.includes("interval")||t.includes("hill")||t.includes("speed"),o=t.includes("rest")||"rest"===r.type;i&&!o&&n.push("Week ".concat(e.weekNumber,": ").concat(r.day," is a rest day but has hard workout: ").concat(r.description))}})}),n.length>0?(console.error("\u274c REST DAYS VALIDATION FAILED:",n),{valid:!1,errors:n}):{valid:!0}}(e.weeks,t.restDays);r.valid||(n.valid=!1,n.errors.push(...r.errors))}const o=function(e){const t=[];return e.forEach(e=>{e.workouts.forEach(n=>{if("bike"===n.type||(n.description||"").toLowerCase().includes("runeq")){const r=n.description||"",i=r.match(/runeq/i);r.match(/\d+\s*(?:mile|miles).*cyclete/i)&&!i&&t.push("Week ".concat(e.weekNumber,": ").concat(n.day," bike workout shows actual miles instead of RunEQ: ").concat(r))}})}),t.length>0?(console.error("\u274c RUNEQ MILES VALIDATION FAILED:",t),{valid:!1,errors:t}):{valid:!0}}(e.weeks);o.valid||(n.valid=!1,n.errors.push(...o.errors));const a=(null===t||void 0===t?void 0:t.longRunDay)||"Sunday",s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Sunday",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=[];return e.forEach((i,o)=>{const a=o===e.length-1;(null!==n?n:a)?i.workouts.some(e=>"race"===e.type||e.name&&e.name.toLowerCase().includes("race")||e.description&&e.description.toLowerCase().includes("race day"))||r.push("Week ".concat(i.weekNumber,": Final week missing race day workout")):i.workouts.some(e=>"longRun"===e.type||e.day===t&&((e.description||"").toLowerCase().includes("long run")||(e.name||"").toLowerCase().includes("long run")))||r.push("Week ".concat(i.weekNumber,": Missing long run on ").concat(t))}),r.length>0?(console.error("\u274c LONG RUN PRESENCE VALIDATION FAILED:",r),{valid:!1,errors:r}):{valid:!0}}(e.weeks,a,null);s.valid||(n.valid=!1,n.errors.push(...s.errors));const l=function(e){const t=[];return e.forEach(e=>{e.workouts.forEach(n=>{if("longRun"===n.type||(n.description||"").toLowerCase().includes("long run")){const r=n.description||"",i=r.match(/\d+-\d+\s*(?:minutes?|min)/i),o=r.match(/(\d+(?:\.\d+)?)\s*(?:miles?|mi)\b/i);i&&!o&&t.push("Week ".concat(e.weekNumber,": ").concat(n.day," long run shows duration instead of distance: ").concat(r)),n.distance&&0!==n.distance||t.push("Week ".concat(e.weekNumber,": ").concat(n.day," long run missing distance property"))}})}),t.length>0?(console.error("\u274c LONG RUN DISTANCE VALIDATION FAILED:",t),{valid:!1,errors:t}):{valid:!0}}(e.weeks);if(l.valid||(n.valid=!1,n.errors.push(...l.errors)),e.planOverview&&null!==t&&void 0!==t&&t.startDate){const r=(c=e.planOverview,u=t.startDate,c&&c.startDate?u&&c.startDate!==u?{valid:!1,errors:["Week 1 start date mismatch: expected ".concat(u,", got ").concat(c.startDate)]}:{valid:!0}:{valid:!1,errors:["Plan overview missing startDate"]});r.valid||(n.valid=!1,n.errors.push(...r.errors))}var c,u;if(e.planOverview&&null!==t&&void 0!==t&&t.raceDate){const r=new Date(t.raceDate),i=new Date(t.startDate||new Date),o=6048e5,a=Math.ceil((r.getTime()-i.getTime())/o),s=function(e,t){return e&&e.totalWeeks?t&&e.totalWeeks!==t?{valid:!1,errors:["Total weeks mismatch: expected ".concat(t,", got ").concat(e.totalWeeks)]}:{valid:!0}:{valid:!1,errors:["Plan overview missing totalWeeks"]}}(e.planOverview,a);s.valid||(n.valid=!1,n.errors.push(...s.errors))}return n.valid?console.log("\u2705 All training plan validations passed"):console.error("\u274c Training plan validation failed:",n.errors),n}n.d(t,{validateTrainingPlan:()=>r})},483:(e,t,n)=>{n.d(t,{e:()=>o});var r=n(379),i=n(334);class o{constructor(){this.intervalIntensityGuidelines={shortSpeed:{description:"All-out sprint efforts, neuromuscular power",pace:"800m to mile race pace",heartRate:"105%+ max HR",effort:"Maximum sustainable for 15-90 seconds",recovery:"Complete recovery between reps (walk/jog)"},vo2Max:{description:"VO2 max development, aerobic power",pace:"3K to 5K race pace",heartRate:"90-100% max HR",effort:"Hard but sustainable for 2-8 minutes",recovery:"Equal time recovery (light jog)"},longIntervals:{description:"Sustained speed, race-specific preparation",pace:"5K to 10K race pace",heartRate:"85-95% max HR",effort:"Controlled hard effort for 4+ minutes",recovery:"50-75% of work interval (easy jog)"}},this.workoutLibrary={SHORT_SPEED:[{name:"Classic 200m Repeats",distance:"200m",repetitions:"6-12 x 200m",intensity:"shortSpeed",recovery:"200m walk/jog (2-3 minutes)",source:"Hal Higdon",description:"Short speed bursts for neuromuscular development",pace:"800m race pace",benefits:"Leg turnover, running economy, speed development",progression:"Start 6 reps, add 1-2 per week to 12 reps"},{name:"400m Speed Intervals",distance:"400m",repetitions:"5-10 x 400m",intensity:"shortSpeed",recovery:"400m jog (3-4 minutes)",source:"Hal Higdon / Track training",description:"Classic one-lap speed intervals",pace:"Mile to 5K race pace",benefits:"Speed endurance, lactate tolerance, mental toughness",progression:"Start 5 reps, build by 1 every 2 weeks to 10"},{name:"Flying 100s",distance:"100m",repetitions:"6-10 x 100m",intensity:"shortSpeed",recovery:"Full recovery (3-5 minutes walk)",source:"Speed development training",description:"Accelerate 30m, sprint 100m, decelerate 30m",pace:"Faster than mile race pace",benefits:"Top-end speed, form at speed, confidence"},{name:"30-Second Strides",distance:"30 seconds",repetitions:"8-12 x 30 seconds",intensity:"shortSpeed",recovery:"90 seconds easy walk/jog",source:"General speed development",description:"Time-based speed intervals",pace:"5K pace or slightly faster",benefits:"Speed without track access, time-efficient"}],VO2_MAX:[{name:"1000m VO2 Max Intervals",distance:"1000m",repetitions:"3-6 x 1000m",intensity:"vo2Max",recovery:"Equal time recovery (3-4 minutes jog)",source:"Runner's World",description:"Classic VO2 max development intervals",pace:"5K race pace",benefits:"Aerobic power, VO2 max improvement, race preparation"},{name:"2-Minute VO2 Intervals",distance:"2 minutes",repetitions:"4-8 x 2 minutes",intensity:"vo2Max",recovery:"2 minutes easy jog",source:"Runner's World",description:"Time-based VO2 max intervals",pace:"5K effort",benefits:"VO2 max development without track access"},{name:"800m Track Intervals",distance:"800m",repetitions:"4-8 x 800m",intensity:"vo2Max",recovery:"400m jog (2-3 minutes)",source:"Classic track training",description:"Two-lap intervals at VO2 max intensity",pace:"3K to 5K race pace",benefits:"Speed endurance, lactate processing, mental strength"},{name:"1200m Extended VO2",distance:"1200m",repetitions:"3-5 x 1200m",intensity:"vo2Max",recovery:"400m jog (3-4 minutes)",source:"Extended VO2 max training",description:"Longer VO2 max intervals for advanced athletes",pace:"5K race pace",benefits:"Extended time at VO2 max, mental toughness"},{name:"Ladder Intervals",distance:"Variable",repetitions:"400-800-1200-800-400m",intensity:"vo2Max",recovery:"Half distance jog between reps",source:"Pyramid training",description:"Ascending and descending interval distances",pace:"5K race pace throughout",benefits:"Variety, mental engagement, comprehensive VO2 stimulus"}],LONG_INTERVALS:[{name:"Mile Repeats",distance:"1 mile",repetitions:"2-5 x 1 mile",intensity:"longIntervals",recovery:"3-4 minutes easy jog",source:"Distance training classic",description:"Sustained speed over longer distance",pace:"5K to 10K race pace",benefits:"Race-specific speed, sustained effort, pacing practice"},{name:"2K Intervals",distance:"2000m",repetitions:"3-4 x 2K",intensity:"longIntervals",recovery:"800m jog (4-5 minutes)",source:"International distance training",description:"Extended intervals for 5K/10K preparation",pace:"10K race pace",benefits:"Race-specific endurance, sustained speed"},{name:"6-Minute Intervals",distance:"6 minutes",repetitions:"3-5 x 6 minutes",intensity:"longIntervals",recovery:"3 minutes easy jog",source:"Time-based distance training",description:"Extended time-based intervals",pace:"10K effort",benefits:"Sustained speed without distance pressure"},{name:"1K-2K-1K Sandwich",distance:"Variable",repetitions:"1K + 2K + 1K",intensity:"longIntervals",recovery:"600m jog between reps",source:"Varied distance training",description:"Build to longer effort, then recover with shorter",pace:"5K-10K race pace",benefits:"Mental challenge, varied stimulus, race simulation"}],MIXED_INTERVALS:[{name:"Progressive Pyramid",distance:"Variable",repetitions:"2:30-3:30-4:30 @ 10K, then repeat @ 5K pace",intensity:"vo2Max to longIntervals",recovery:"Same time recovery as work interval",source:"Runner's World",description:"Build effort, then repeat at higher intensity",pace:"10K pace, then 5K pace",benefits:"Progressive overload, mental toughness, pace variety"},{name:"Fartlek Intervals",distance:"Variable",repetitions:"20-30 minutes of varied surges",intensity:"shortSpeed to longIntervals",recovery:"Easy running between surges",source:"Swedish training method",description:"Unstructured speed play based on feel",pace:"Varies from 5K to 10K effort",benefits:"Mental flexibility, fun factor, natural terrain adaptation"},{name:"Mona Fartlek",distance:"Variable",repetitions:"90s-3min-90s-60s-30s-30s hard efforts",intensity:"vo2Max",recovery:"90 seconds easy between all efforts",source:"Steve Moneghetti training",description:"Structured fartlek with specific time intervals",pace:"5K effort for all intervals",benefits:"Structured variety, comprehensive speed stimulus"}],RACE_SIMULATION:[{name:"5K Simulation Intervals",distance:"1K",repetitions:"5 x 1K",intensity:"longIntervals",recovery:"200m jog (90 seconds)",source:"Race-specific training",description:"Simulate 5K race with brief recoveries",pace:"Goal 5K race pace",benefits:"Race pacing, confidence, mental preparation"},{name:"10K Tempo-Speed Mix",distance:"Variable",repetitions:"2K @ 10K pace, then 4 x 400m @ 5K pace (repeat twice)",intensity:"longIntervals to vo2Max",recovery:"90s jog between 400s, 2 min between sets",source:"10K race preparation",description:"Combine race pace with speed finish",pace:"10K pace + 5K pace",benefits:"Race-specific fitness, finishing kick practice"},{name:"Cut-Down Intervals",distance:"Variable",repetitions:"1200m-1000m-800m-600m-400m",intensity:"longIntervals to shortSpeed",recovery:"400m jog between reps",source:"Descending interval training",description:"Get faster as intervals get shorter",pace:"Start at 10K pace, end at 3K pace",benefits:"Finishing kick, mental toughness, speed development"}]}}calculateRepsFromDistance(e,t,n){if(!t||t<=0)return n;const r={"100m":.062,"200m":.124,"300m":.186,"400m":.249,"600m":.373,"800m":.497,"1000m":.621,"1200m":.746,"1600m":.994,mile:1}[e]||.5,i=t-3.5;if(i<=0){const t=n.match(/(\d+)/);return t?"".concat(t[1]," x ").concat(e):n}const o=1.75*r,a=Math.floor(i/o),s=n.match(/(\d+)-(\d+)/);if(s){const t=parseInt(s[1],10),n=parseInt(s[2],10),r=Math.max(t,Math.min(n,a));return"".concat(r," x ").concat(e)}return"".concat(a," x ").concat(e)}prescribeIntervalWorkout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{runEqPreference:n=0,paces:i=null,trackIntervals:o=null,specificReps:a=null,totalDistance:s=null}=t;let l=null,c=null;for(const[r,p]of Object.entries(this.workoutLibrary)){const t=p.find(t=>t.name.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(t.name.toLowerCase()));if(t){l=t,c=r;break}}if(!l)throw new Error('Workout "'.concat(e,'" not found'));const u=this.intervalIntensityGuidelines[l.intensity];let d;a?d=a:s&&s>0&&l.distance?(d=this.calculateRepsFromDistance(l.distance,s,l.repetitions),console.log("\ud83d\udcca Calculated reps: ".concat(d," from ").concat(s," miles total"))):d=l.repetitions;const h=(0,r.A)((0,r.A)({},l),{},{repetitions:d,category:c,intensityGuidance:u,totalWorkout:this.calculateTotalWorkout(l,i,d,t.weekNumber,t.totalWeeks),runEqOptions:this.generateRunEqOptions(l,n),safetyNotes:this.getIntervalSafetyNotes(l),alternatives:this.getIntervalAlternatives(l),warmupCooldown:this.getWarmupCooldown(l.intensity,i,t.weekNumber,t.totalWeeks)});return i&&(h.paces=i,h.trackIntervals=o,h.name=this.injectPacesIntoName(l.name,d,i,o),h.repetitions=this.injectPacesIntoReps(d,i,o),h.description=this.injectPacesIntoDescription(l.description,l.pace,i)),h}convertToMilePace(e,t){const n=e.split(":"),r=(60*parseInt(n[0],10)+parseInt(n[1],10))/t*1609.34,i=Math.floor(r/60),o=Math.round(r%60);return"".concat(i,":").concat(o.toString().padStart(2,"0"),"/mi")}injectPacesIntoName(e,t,n,r){let i=e;if(n.interval&&r&&r.interval)if(t.includes("400m")&&r.interval["400m"]){const t=this.convertToMilePace(r.interval["400m"],400);i="".concat(e," (").concat(r.interval["400m"],"/400m = ").concat(t,")")}else if(t.includes("800m")&&r.threshold&&r.threshold["800m"]){const t=this.convertToMilePace(r.threshold["800m"],800);i="".concat(e," (").concat(r.threshold["800m"],"/800m = ").concat(t,")")}else if(t.includes("1200m")&&r.threshold&&r.threshold["1200m"]){const t=this.convertToMilePace(r.threshold["1200m"],1200);i="".concat(e," (").concat(r.threshold["1200m"],"/1200m = ").concat(t,")")}else if(t.includes("200m")&&r.interval["200m"]){const t=this.convertToMilePace(r.interval["200m"],200);i="".concat(e," (").concat(r.interval["200m"],"/200m = ").concat(t,")")}else i="".concat(e," (").concat(n.interval.pace,"/mi)");else n.interval&&(i="".concat(e," (").concat(n.interval.pace,"/mi)"));return i}injectPacesIntoReps(e,t,n){let r=e;var i;(n&&n.interval&&(r.includes("400m")&&n.interval["400m"]&&(r=r.replace(/(\d+)\s*x\s*400m/g,"$1 x 400m (".concat(n.interval["400m"]," each)"))),r.includes("800m")&&n.threshold&&n.threshold["800m"]&&(r=r.replace(/(\d+)\s*x\s*800m/g,"$1 x 800m (".concat(n.threshold["800m"]," each)"))),r.includes("1200m")&&n.threshold&&n.threshold["1200m"]&&(r=r.replace(/(\d+)\s*x\s*1200m/g,"$1 x 1200m (".concat(n.threshold["1200m"]," each)"))),r.includes("200m")&&n.interval["200m"]&&(r=r.replace(/(\d+)\s*x\s*200m/g,"$1 x 200m (".concat(n.interval["200m"]," each)")))),n&&n.threshold)&&(r.includes("2K")&&(r=r.replace(/2K\s*@\s*10K pace/g,"2K @ ".concat((null===(i=t.threshold)||void 0===i?void 0:i.pace)||"10K pace","/mile"))));return t.interval&&(r=r.replace(/@\s*5K pace/g,"@ ".concat(t.interval.pace,"/mile"))),t.threshold&&(r=r.replace(/@\s*10K pace/g,"@ ".concat(t.threshold.pace,"/mile"))),t.interval&&(r=r.replace(/(\d+)\s*x\s*1\s*mile/g,"$1 x 1 mile @ ".concat(t.interval.pace,"/mile")),r=r.replace(/(\d+)\s*x\s*2\s*mile/g,"$1 x 2 miles @ ".concat(t.interval.pace,"/mile"))),r}injectPacesIntoDescription(e,t,n){let r=e;return n.interval&&(t.includes("5K")||t.includes("VO2"))&&(r=r.replace(/5K race pace/g,"".concat(n.interval.pace,"/mile (5K race pace)")),r=r.replace(/5K pace/g,"".concat(n.interval.pace,"/mile"))),n.threshold&&(t.includes("10K")||t.includes("threshold"))&&(r=r.replace(/10K race pace/g,"".concat(n.threshold.pace,"/mile (10K/threshold pace)")),r=r.replace(/10K pace/g,"".concat(n.threshold.pace,"/mile"))),r}calculateTotalWorkout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a="15-20 minutes easy + dynamic warmup + 3-4 strides",s="15-20 minutes easy";if(a=(0,i.Y)(a,r,o),s=(0,i.Y)(s,r,o),t&&t.easy){var l,c;const e=(null===(l=a.match(/\d+ minutes/))||void 0===l?void 0:l[0])||"15 minutes",n=(null===(c=s.match(/\d+ minutes/))||void 0===c?void 0:c[0])||"15 minutes";a="".concat(e," easy (").concat(t.easy.min,"-").concat(t.easy.max,"/mile) + dynamic warmup + 3-4 strides"),s="".concat(n," easy (").concat(t.easy.min,"-").concat(t.easy.max,"/mile)")}const u=n||e.repetitions;let d="50-70 minutes total";return"shortSpeed"===e.intensity?d="45-60 minutes total":(u.includes("x 6")||u.includes("x 8"))&&(d="60-75 minutes total"),{structure:"".concat(a," + ").concat(u," + ").concat(s),estimatedTime:d,focusPhase:"Main interval set should take 15-30 minutes"}}generateRunEqOptions(e,t){const n={optionA:"Full running workout",optionB:"First half of intervals running, second half riding (Cyclete/Elliptigo)",optionC:"Alternate each interval between running and riding",optionD:"Full Cyclete/Elliptigo ride (use Garmin RunEQ data field to track equivalent miles)"};return n.recommendation=t>=70?"Full Cyclete/Elliptigo ride":t>=40?"Split intervals - some running, some riding":t>=20?"Alternate every other interval":"Full running workout",n}getIntervalSafetyNotes(e){const t=["Proper warmup is CRUCIAL - never skip the full warmup routine","Start conservatively - first interval should feel controlled","Recovery should be truly easy - avoid rushing between intervals","Stop workout if form breaks down significantly"];return"shortSpeed"===e.intensity?(t.push("Complete recovery between reps - walk or very easy jog only"),t.push("Focus on form and efficiency over pure speed")):"vo2Max"===e.intensity?(t.push("Should reach breathing heavily but not gasping"),t.push("Equal time recovery allows partial recovery while maintaining stimulus")):(t.push("Maintain consistent pace across all intervals"),t.push("These should feel 'comfortably hard' not all-out")),t}getWarmupCooldown(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const o={warmup:"15-20 minutes easy running + 5 minutes dynamic exercises + 3-4 x 20-second strides",cooldown:"15-20 minutes easy running + stretching"};var a,s;(o.warmup=(0,i.Y)(o.warmup,n,r),o.cooldown=(0,i.Y)(o.cooldown,n,r),t&&t.easy)&&(o.warmup="".concat(o.warmup.replace(/15-20 minutes|20-25 minutes/,(null===(a=o.warmup.match(/\d+ minutes/))||void 0===a?void 0:a[0])||"15 minutes")," (").concat(t.easy.min,"-").concat(t.easy.max,"/mile) + 5 minutes dynamic exercises + 3-4 x 20-second strides"),o.cooldown="".concat(o.cooldown.replace(/15-20 minutes/,(null===(s=o.cooldown.match(/\d+ minutes/))||void 0===s?void 0:s[0])||"15 minutes")," (").concat(t.easy.min,"-").concat(t.easy.max,"/mile) + stretching"));if("shortSpeed"===e){var l;const e=(null===(l=o.warmup.match(/\d+ minutes/))||void 0===l?void 0:l[0])||"20 minutes";t&&t.easy?o.warmup="".concat(e," easy running (").concat(t.easy.min,"-").concat(t.easy.max,"/mile) + 10 minutes dynamic warmup + 4-6 progressive strides"):o.warmup="".concat(e," easy running + 10 minutes dynamic warmup + 4-6 progressive strides"),o.notes="Extra warmup time crucial for speed work"}return o}getIntervalAlternatives(e){return{noTrack:{"200m":"20-30 second hard efforts on any surface","400m":"60-90 second hard efforts","800m":"2.5-3 minute hard efforts","1000m":"3-4 minute hard efforts","1 mile":"5-7 minute hard efforts"},badWeather:"Treadmill (use 1% incline), indoor track, or covered parking garage",injury:"Pool running, elliptical, or Cyclete/Elliptigo ride maintaining same effort level",altitude:"Reduce pace by 15-30 seconds per mile, extend recovery time",heat:"Run early morning, extend recovery, focus on effort over pace",beginners:"Start with fewer reps, longer recovery, slightly easier pace"}}getWorkoutsByCategory(e){return this.workoutLibrary[e]||[]}getCategories(){return Object.keys(this.workoutLibrary)}getRandomWorkout(e){const t=this.getWorkoutsByCategory(e);if(0===t.length)throw new Error("No workouts found in category: ".concat(e));return t[Math.floor(Math.random()*t.length)]}searchWorkouts(e){const t=[],n=e.toLowerCase();for(const[i,o]of Object.entries(this.workoutLibrary))for(const e of o)(e.name.toLowerCase().includes(n)||e.description.toLowerCase().includes(n)||e.source.toLowerCase().includes(n))&&t.push((0,r.A)((0,r.A)({},e),{},{category:i}));return t}}},579:(e,t,n)=>{e.exports=n(180)},606:(e,t,n)=>{n.d(t,{h1:()=>s,uA:()=>i});var r=n(776);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const o="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===o?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.component?this.component.multipleInstances?e:o:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class s{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},667:(e,t,n)=>{n.d(t,{arrayUnion:()=>vc,rJ:()=>nl,kd:()=>hc,deleteField:()=>gc,doc:()=>rl,getDoc:()=>sc,GG:()=>cc,aU:()=>cl,aQ:()=>pc,P:()=>Yl,serverTimestamp:()=>yc,setDoc:()=>uc,updateDoc:()=>dc,_M:()=>Ql});var r,i,o=n(379),a=n(150),s=n(606),l=n(965),c=n(776),u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},d={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let o,a=e.g[3];o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[3]+3250441966&4294967295,o=t+(a^(n=i+(o<<22&4294967295|o>>>10))&(i^a))+r[4]+4118548399&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[7]+4249261313&4294967295,o=t+(a^(n=i+(o<<22&4294967295|o>>>10))&(i^a))+r[8]+1770035416&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[11]+2304563134&4294967295,o=t+(a^(n=i+(o<<22&4294967295|o>>>10))&(i^a))+r[12]+1804603682&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[15]+1236535329&4294967295,o=t+(i^a&((n=i+(o<<22&4294967295|o>>>10))^i))+r[1]+4129170786&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[0]+3921069994&4294967295,o=t+(i^a&((n=i+(o<<20&4294967295|o>>>12))^i))+r[5]+3593408605&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[4]+3889429448&4294967295,o=t+(i^a&((n=i+(o<<20&4294967295|o>>>12))^i))+r[9]+568446438&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[8]+1163531501&4294967295,o=t+(i^a&((n=i+(o<<20&4294967295|o>>>12))^i))+r[13]+2850285829&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[12]+2368359562&4294967295,o=t+((n=i+(o<<20&4294967295|o>>>12))^i^a)+r[5]+4294588738&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[14]+4259657740&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^a)+r[1]+2763975236&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[10]+3200236656&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^a)+r[13]+681279174&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[6]+76029189&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^a)+r[9]+3654602809&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[2]+3299628645&4294967295,o=t+(i^((n=i+(o<<23&4294967295|o>>>9))|~a))+r[0]+4096336452&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[5]+4237533241&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~a))+r[12]+1700485571&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[1]+2240044497&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~a))+r[8]+1873313359&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[13]+1309151649&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~a))+r[4]+4149444226&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function o(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let o=this.h,a=0;for(;a<t;){if(0==o)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[o++]=e.charCodeAt(a++),o==this.blockSize){n(this,i),o=0;break}}else for(;a<t;)if(i[o++]=e[a++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var a={};function s(e){return-128<=e&&e<128?function(e,t){var n=a;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new o([0|e],e<0?-1:0)}):new o([0|e],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(e<0)return f(l(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}var c=s(0),u=s(1),h=s(16777216);function p(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function m(e){return-1==e.h}function f(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(u)}function g(e,t){return e.add(f(t))}function y(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function v(e,t){this.g=e,this.h=t}function w(e,t){if(p(t))throw Error("division by zero");if(p(e))return new v(c,c);if(m(e))return t=w(f(e),t),new v(f(t.g),f(t.h));if(m(t))return t=w(e,f(t)),new v(f(t.g),t.h);if(e.g.length>30){if(m(e)||m(t))throw Error("slowDivide_ only works with positive integers.");for(var n=u,r=t;r.l(e)<=0;)n=b(n),r=b(r);var i=k(n,1),o=k(r,1);for(r=k(r,2),n=k(n,2);!p(r);){var a=o.add(r);a.l(e)<=0&&(i=i.add(n),o=a),r=k(r,1),n=k(n,1)}return t=g(e,i.j(t)),new v(i,t)}for(i=c;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),a=(o=l(n)).j(t);m(a)||a.l(e)>0;)a=(o=l(n-=r)).j(t);p(o)&&(o=u),i=i.add(o),e=g(e,a)}return new v(i,e)}function b(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function k(e,t){const n=t>>5;t%=32;const r=e.g.length-n,i=[];for(let o=0;o<r;o++)i[o]=t>0?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new o(i,e.h)}(e=o.prototype).m=function(){if(m(this))return-f(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(p(this))return"0";if(m(this))return"-"+f(this).toString(e);const t=l(Math.pow(e,6));var n=this;let r="";for(;;){const i=w(n,t).g;let o=(((n=g(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(p(n=i))return o+r;for(;o.length<6;)o="0"+o;r=o+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return m(e=g(this,e))?-1:p(e)?0:1},e.abs=function(){return m(this)?f(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let r=0;for(let i=0;i<=t;i++){let t=r+(65535&this.i(i))+(65535&e.i(i)),o=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=o>>>16,t&=65535,o&=65535,n[i]=o<<16|t}return new o(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(p(this)||p(e))return c;if(m(this))return m(e)?f(this).j(f(e)):f(f(this).j(e));if(m(e))return f(this.j(f(e)));if(this.l(h)<0&&e.l(h)<0)return l(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){const i=this.i(r)>>>16,o=65535&this.i(r),a=e.i(t)>>>16,s=65535&e.i(t);n[2*r+2*t]+=o*s,y(n,2*r+2*t),n[2*r+2*t+1]+=i*s,y(n,2*r+2*t+1),n[2*r+2*t+1]+=o*a,y(n,2*r+2*t+1),n[2*r+2*t+2]+=i*a,y(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new o(n,0)},e.B=function(e){return w(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,i=d.Md5=t,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return f(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=l(Math.pow(n,8));let i=c;for(let a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+o),n);o<8?(o=l(Math.pow(n,o)),i=i.j(o).add(l(e))):(i=i.j(r),i=i.add(l(e)))}return i},r=d.Integer=o}).apply("undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var h,p,m,f,g,y,v,w,b="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},k={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof b&&b];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in i))break e;i=i[a]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},o=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=s).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function D(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function E(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function S(e){o.setTimeout(()=>{throw e},0)}function A(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var C=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new T,e=>e.reset());class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let R,F=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=C.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},P=()=>{const e=Promise.resolve(void 0);R=()=>{e.then(M)}};function M(){for(var e;e=A();){try{e.h.call(e.g)}catch(n){S(n)}var t=C;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}F=!1}function _(){this.u=this.u,this.C=this.C}function N(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}_.prototype.u=!1,_.prototype.dispose=function(){this.u||(this.u=!0,this.N())},_.prototype[Symbol.dispose]=function(){this.dispose()},_.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},N.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};o.addEventListener("test",e,t),o.removeEventListener("test",e,t)}catch(n){}return e}();function j(e){return/^[\s\xa0]*$/.test(e)}function L(e,t){N.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(L,N),L.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&L.Z.h.call(this)},L.prototype.h=function(){L.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var B="closure_listenable_"+(1e6*Math.random()|0),W=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++W,this.da=this.fa=!1}function q(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function H(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function z(e){const t={};for(const n in e)t[n]=e[n];return t}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<V.length;t++)n=V[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Y(e){this.src=e,this.g={},this.h=0}function G(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=o>=0)&&Array.prototype.splice.call(i,o,1),r&&(q(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Q(e,t,n,r){for(let i=0;i<e.length;++i){const o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}Y.prototype.add=function(e,t,n,r,i){const o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);const a=Q(e,t,r,i);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var X="closure_lm_"+(1e6*Math.random()|0),Z={};function J(e,t,n,r,i){if(r&&r.once)return ee(e,t,n,r,i);if(Array.isArray(t)){for(let o=0;o<t.length;o++)J(e,t[o],n,r,i);return null}return n=le(n),e&&e[B]?e.J(t,n,a(r)?!!r.capture:!!r,i):$(e,t,n,!1,r,i)}function $(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");const s=a(i)?!!i.capture:!!i;let l=ae(e);if(l||(e[X]=l=new Y(e)),(n=l.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=oe;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ie(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ee(e,t,n,r,i){if(Array.isArray(t)){for(let o=0;o<t.length;o++)ee(e,t[o],n,r,i);return null}return n=le(n),e&&e[B]?e.K(t,n,a(r)?!!r.capture:!!r,i):$(e,t,n,!0,r,i)}function ne(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)ne(e,t[o],n,r,i);else r=a(r)?!!r.capture:!!r,n=le(n),e&&e[B]?(e=e.i,(o=String(t).toString())in e.g&&((n=Q(t=e.g[o],n,r,i))>-1&&(q(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[o],e.h--)))):e&&(e=ae(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Q(t,n,r,i)),(n=e>-1?t[e]:null)&&re(n))}function re(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[B])G(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ie(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ae(t))?(G(n,e),0==n.h&&(n.src=null,t[X]=null)):q(e)}}}function ie(e){return e in Z?Z[e]:Z[e]="on"+e}function oe(e,t){if(e.da)e=!0;else{t=new L(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&re(e),e=n.call(r,t)}return e}function ae(e){return(e=e[X])instanceof Y?e:null}var se="__closure_events_fn_"+(1e9*Math.random()>>>0);function le(e){return"function"===typeof e?e:(e[se]||(e[se]=function(t){return e.handleEvent(t)}),e[se])}function ce(){_.call(this),this.i=new Y(this),this.M=this,this.G=null}function ue(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new N(t,e);else if(t instanceof N)t.target=t.target||e;else{var i=t;K(t=new N(r,e),i)}let o,a;if(i=!0,n)for(a=n.length-1;a>=0;a--)o=t.g=n[a],i=de(o,r,!0,t)&&i;if(o=t.g=e,i=de(o,r,!0,t)&&i,i=de(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)o=t.g=n[a],i=de(o,r,!1,t)&&i}function de(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let o=0;o<t.length;++o){const a=t[o];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&G(e.i,a),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function he(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,he(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(ce,_),ce.prototype[B]=!0,ce.prototype.removeEventListener=function(e,t,n,r){ne(this,e,t,n,r)},ce.prototype.N=function(){if(ce.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)q(n[e]);delete e.g[t],e.h--}}this.G=null},ce.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ce.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class pe extends _{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:he(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function me(e){_.call(this),this.h=e,this.g={}}u(me,_);var fe=[];function ge(e){H(e.g,function(e,t){this.g.hasOwnProperty(t)&&re(e)},e),e.g={}}me.prototype.N=function(){me.Z.N.call(this),ge(this)},me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ye=o.JSON.stringify,ve=o.JSON.parse,we=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function be(){}function ke(){}var De={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xe(){N.call(this,"d")}function Ee(){N.call(this,"c")}u(xe,N),u(Ee,N);var Se={},Ae=null;function Ce(){return Ae=Ae||new ce}function Te(e){N.call(this,Se.Ia,e)}function Re(e){const t=Ce();ue(t,new Te(t))}function Fe(e,t){N.call(this,Se.STAT_EVENT,e),this.stat=t}function Ie(e){const t=Ce();ue(t,new Fe(t,e))}function Pe(e,t){N.call(this,Se.Ja,e),this.size=t}function Me(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){e()},t)}function _e(){this.g=!0}function Ne(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const o=JSON.parse(t);if(o)for(e=0;e<o.length;e++)if(Array.isArray(o[e])){var n=o[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return ye(o)}catch(o){return t}}(e,n)+(r?" "+r:"")})}Se.Ia="serverreachability",u(Te,N),Se.STAT_EVENT="statevent",u(Fe,N),Se.Ja="timingevent",u(Pe,N),_e.prototype.ua=function(){this.g=!1},_e.prototype.info=function(){};var Oe,je={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Le={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Be(){}function We(e){return encodeURIComponent(String(e))}function Ue(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function qe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new me(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new He}function He(){this.i=null,this.g="",this.h=!1}u(Be,be),Be.prototype.g=function(){return new XMLHttpRequest},Oe=new Be;var ze={},Ve={};function Ke(e,t,n){e.M=1,e.A=yt(ht(t)),e.u=n,e.R=!0,Ye(e,null)}function Ye(e,t){e.F=Date.now(),Xe(e),e.B=ht(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),It(n.i,"t",r),e.C=0,n=e.j.L,e.h=new He,e.g=vn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new pe(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(fe[0]=i.toString()),i=fe);for(let o=0;o<i.length;o++){const e=J(n,i[o],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?z(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),Re(),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o){var a="",s=o.split("&");for(let e=0;e<s.length;e++){var l=s[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+l+"&":a+(e+"=redacted&")}}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Ge(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Qe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ve:(n=Number(t.substring(n,r)),isNaN(n)?ze:(r+=1)+n>t.length?Ve:(t=t.slice(r,r+n),e.C=r+n,t))}function Xe(e){e.T=Date.now()+e.H,Ze(e,e.H)}function Ze(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=Me(l(e.aa,e),t)}function Je(e){e.D&&(o.clearTimeout(e.D),e.D=null)}function $e(e){0==e.j.I||e.K||pn(e.j,e)}function et(e){Je(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ge(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function tt(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||at(n.h,e)))if(!e.L&&at(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;hn(n),tn(n)}cn(n),Ie(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=Me(l(n.Va,n),6e3));ot(n.h)<=1&&n.ta&&(n.ta=void 0)}else fn(n,11)}else if((e.L||n.g==e)&&hn(n),!j(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(st(o,o.h),o.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,gt(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=yn(r,r.L?r.ba:null,r.W),a.L){lt(r.h,a);var s=a,c=r.O;c&&(s.H=c),s.D&&(Je(s),Xe(s)),r.g=a}else ln(r);n.i.length>0&&rn(n)}else"stop"!=l[0]&&"close"!=l[0]||fn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?fn(n,7):en(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}Re()}catch(u){}}qe.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Xt(e)?t.j():this.Y(e)},qe.prototype.Y=function(e){try{if(e==this.g)e:{const l=Xt(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Zt(this.g)))){this.K||4!=l||7==c||Re(),Je(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Ge(e))return e.g.la();const t=Zt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Xt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return et(e),$e(e),"";e.h.i=new o.TextDecoder}for(let o=0;o<r;o++)e.h.h=!0,n+=e.h.i.decode(t[o],{stream:!(i&&o==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,o,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(r)){var a=r;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,Ie(12),et(this),$e(this);break e}Ne(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tt(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Qe(this,n),t==Ve){4==l&&(this.m=4,Ie(14),e=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(t==ze){this.m=4,Ie(15),Ne(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Ne(this.i,this.l,t,null),tt(this,t)}if(Ge(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,Ie(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var s=this.j;s.g==this&&s.aa&&!s.P&&(s.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),un(s),s.P=!0,Ie(11))}}else Ne(this.i,this.l,n,"[Invalid Chunked Response]"),et(this),$e(this)}else Ne(this.i,this.l,n,null),tt(this,n);4==l&&et(this),this.o&&!this.K&&(4==l?pn(this.j,this):(this.o=!1,Xe(this)))}else(function(e){const t={};e=(e.g&&Xt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(j(e[r]))continue;var n=Ue(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,Ie(12)):(this.m=0,Ie(13)),et(this),$e(this)}}}catch(te){}},qe.prototype.cancel=function(){this.K=!0,et(this)},qe.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(Re(),Ie(17)),et(this),this.m=2,$e(this)):Ze(this,this.T-e)};var nt=class{constructor(e,t){this.g=e,this.map=t}};function rt(e){this.l=e||10,o.PerformanceNavigationTiming?e=(e=o.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function it(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ot(e){return e.h?1:e.g?e.g.size:0}function at(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function st(e,t){e.g?e.g.add(t):e.h=t}function lt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ct(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return D(e.i)}rt.prototype.cancel=function(){if(this.i=ct(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ut=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dt(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof dt?(this.l=e.l,pt(this,e.j),this.o=e.o,this.g=e.g,mt(this,e.u),this.h=e.h,ft(this,Pt(e.i)),this.m=e.m):e&&(t=String(e).match(ut))?(this.l=!1,pt(this,t[1]||"",!0),this.o=vt(t[2]||""),this.g=vt(t[3]||"",!0),mt(this,t[4]),this.h=vt(t[5]||"",!0),ft(this,t[6]||"",!0),this.m=vt(t[7]||"")):(this.l=!1,this.i=new At(null,this.l))}function ht(e){return new dt(e)}function pt(e,t,n){e.j=n?vt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function mt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function ft(e,t,n){t instanceof At?(e.i=t,function(e,t){t&&!e.j&&(Ct(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(Tt(this,t),It(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=wt(t,Et)),e.i=new At(t,e.l))}function gt(e,t,n){e.i.set(t,n)}function yt(e){return gt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function vt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function wt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,bt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function bt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}dt.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(wt(t,kt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(wt(t,kt,!0),"@"),e.push(We(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(wt(n,"/"==n.charAt(0)?xt:Dt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",wt(n,St)),e.join("")},dt.prototype.resolve=function(e){const t=ht(this);let n=!!e.j;n?pt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)mt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?ft(t,Pt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var kt=/[#\/\?@]/g,Dt=/[#\?:]/g,xt=/[#\?]/g,Et=/[#\?@]/g,St=/#/g;function At(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ct(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,o=null;r>=0?(i=e[n].substring(0,r),o=e[n].substring(r+1)):i=e[n],t(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Tt(e,t){Ct(e),t=Mt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Rt(e,t){return Ct(e),t=Mt(e,t),e.g.has(t)}function Ft(e,t){Ct(e);let n=[];if("string"===typeof t)Rt(e,t)&&(n=n.concat(e.g.get(Mt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function It(e,t,n){Tt(e,t),n.length>0&&(e.i=null,e.g.set(Mt(e,t),D(n)),e.h+=n.length)}function Pt(e){const t=new At;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function Mt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function _t(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(o){}}function Nt(){this.g=new we}function Ot(e){this.i=e.Sb||null,this.h=e.ab||!1}function jt(e,t){ce.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Lt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Bt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Wt(e)}function Wt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ut(e){let t="";return H(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function qt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ut(n),"string"===typeof e?null!=n&&We(n):gt(e,t,n))}function Ht(e){ce.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=At.prototype).add=function(e,t){Ct(this),this.i=null,e=Mt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Ct(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return Ct(this),this.i=null,Rt(this,e=Mt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=Ft(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=We(n);n=Ft(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+We(n[t])),e.push(r)}}return this.i=e.join("&")},u(Ot,be),Ot.prototype.g=function(){return new jt(this.i,this.h)},u(jt,ce),(e=jt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Wt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Bt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Wt(this)),this.g&&(this.readyState=3,Wt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof o.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Lt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Bt(this):Wt(this),3==this.readyState&&Lt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Bt(this))},e.Na=function(e){this.g&&(this.response=e,Bt(this))},e.ga=function(){this.g&&Bt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(jt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Ht,ce);var zt=/^https?$/i,Vt=["POST","PUT"];function Kt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Yt(e),Qt(e)}function Yt(e){e.A||(e.A=!0,ue(e,"complete"),ue(e,"error"))}function Gt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Xt(e))setTimeout(e.Ca.bind(e),0);else if(ue(e,"readystatechange"),4==Xt(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(ut)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!zt.test(t?t.toLowerCase():"")}n=r}if(n)ue(e,"complete"),ue(e,"success");else{e.o=6;try{var a=Xt(e)>2?e.g.statusText:""}catch(s){a=""}e.l=a+" ["+e.ca()+"]",Yt(e)}}finally{Qt(e)}}}function Qt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||ue(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Xt(e){return e.g?e.g.readyState:0}function Zt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Jt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function $t(e){this.za=0,this.i=[],this.j=new _e,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Jt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Jt("baseRetryDelayMs",5e3,e),this.Za=Jt("retryDelaySeedMs",1e4,e),this.Ta=Jt("forwardChannelMaxRetries",2,e),this.va=Jt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new rt(e&&e.concurrentRequestLimit),this.Ba=new Nt,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function en(e){if(nn(e),3==e.I){var t=e.V++,n=ht(e.J);if(gt(n,"SID",e.M),gt(n,"RID",t),gt(n,"TYPE","terminate"),an(e,n),(t=new qe(e,e.j,t)).M=2,t.A=yt(ht(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&o.Image&&((new Image).src=t.A,n=!0),n||(t.g=vn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Xe(t)}gn(e)}function tn(e){e.g&&(un(e),e.g.cancel(),e.g=null)}function nn(e){tn(e),e.v&&(o.clearTimeout(e.v),e.v=null),hn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&o.clearTimeout(e.m),e.m=null)}function rn(e){if(!it(e.h)&&!e.m){e.m=!0;var t=e.Ea;R||P(),F||(R(),F=!0),I.add(t,e),e.D=0}}function on(e,t){var n;n=t?t.l:e.V++;const r=ht(e.J);gt(r,"SID",e.M),gt(r,"RID",n),gt(r,"AID",e.K),an(e,r),e.u&&e.o&&qt(r,e.u,e.o),n=new qe(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=sn(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),st(e.h,n),Ke(n,r,t)}function an(e,t){e.H&&H(e.H,function(e,n){gt(t,n,e)}),e.l&&H({},function(e,n){gt(t,n,e)})}function sn(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var o=i[c].g;const n=i[c].map;if((o-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{o="req"+o+"_"||0;try{var s=n instanceof Map?n:Object.entries(n);for(const[t,n]of s){let r=n;a(n)&&(r=ye(n)),e.push(o+t+"="+encodeURIComponent(r))}}catch(x){throw e.push(o+"type="+encodeURIComponent("_badmap")),x}}catch(x){r&&r(n)}}if(l){s=e.join("&");break e}}s=void 0}return e=e.i.splice(0,n),t.G=e,s}function ln(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;R||P(),F||(R(),F=!0),I.add(t,e),e.A=0}}function cn(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=Me(l(e.Da,e),mn(e,e.A)),e.A++,!0)}function un(e){null!=e.B&&(o.clearTimeout(e.B),e.B=null)}function dn(e){e.g=new qe(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=ht(e.na);gt(t,"RID","rpc"),gt(t,"SID",e.M),gt(t,"AID",e.K),gt(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&gt(t,"TO",e.ia),gt(t,"TYPE","xmlhttp"),an(e,t),e.u&&e.o&&qt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=yt(ht(t)),n.u=null,n.R=!0,Ye(n,e)}function hn(e){null!=e.C&&(o.clearTimeout(e.C),e.C=null)}function pn(e,t){var n=null;if(e.g==t){hn(e),un(e),e.g=null;var r=2}else{if(!at(e.h,t))return;n=t.G,lt(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;ue(r=Ce(),new Pe(r,n)),rn(e)}else ln(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(ot(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=Me(l(e.Ea,e,t),mn(e,e.D)),e.D++,!0))}(e,t)||2==r&&cn(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:fn(e,5);break;case 4:fn(e,10);break;case 3:fn(e,6);break;default:fn(e,2)}}function mn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function fn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new dt(r||"//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||pt(r,"https"),yt(r),t?function(e,t){const n=new _e;if(o.Image){const r=new Image;r.onload=c(_t,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(_t,n,"TestLoadImage: error",!1,t,r),r.onabort=c(_t,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(_t,n,"TestLoadImage: timeout",!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new _e;const n=new AbortController,r=setTimeout(()=>{n.abort(),_t(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?_t(0,0,!0,t):_t(0,0,!1,t)}).catch(()=>{clearTimeout(r),_t(0,0,!1,t)})}(r.toString(),n)}else Ie(2);e.I=0,e.l&&e.l.pa(t),gn(e),nn(e)}function gn(e){if(e.I=0,e.ja=[],e.l){const t=ct(e.h);0==t.length&&0==e.i.length||(E(e.ja,t),E(e.ja,e.i),e.h.i.length=0,D(e.i),e.i.length=0),e.l.oa()}}function yn(e,t,n){var r=n instanceof dt?ht(n):new dt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),mt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new dt(null);r&&pt(e,r),t&&(e.g=t),i&&mt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&gt(r,n,t),gt(r,"VER",e.ka),an(e,r),r}function vn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Ht(new Ot({ab:n})):new Ht(e.ma)).Fa(e.L),t}function wn(){}function bn(){}function kn(e,t){ce.call(this),this.g=new $t(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!j(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!j(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new En(this)}function Dn(e){xe.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function xn(){Ee.call(this),this.status=1}function En(e){this.g=e}(e=Ht.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Oe.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Kt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(Vt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(a){Kt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,ue(this,"complete"),ue(this,"abort"),Qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qt(this,!0)),Ht.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Gt(this):this.Xa())},e.Xa=function(){Gt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Xt(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ve(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=$t.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){Ie(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=yn(this,null,this.W),rn(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new qe(this,this.j,e);let o=this.o;if(this.U&&(o?(o=z(o),K(o,this.U)):o=this.U),null!==this.u||this.R||(i.J=o,o=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=sn(this,i,t),gt(n=ht(this.J),"RID",e),gt(n,"CVER",22),this.G&&gt(n,"X-HTTP-Session-Id",this.G),an(this,n),o&&(this.R?t="headers="+We(Ut(o))+"&"+t:this.u&&qt(n,this.u,o)),st(this.h,i),this.Ra&&gt(n,"TYPE","init"),this.S?(gt(n,"$req",t),gt(n,"SID","null"),i.U=!0,Ke(i,n,null)):Ke(i,n,t),this.I=2}}else 3==this.I&&(e?on(this,e):0==this.i.length||it(this.h)||on(this))},e.Da=function(){if(this.v=null,dn(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=Me(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ie(10),tn(this),dn(this))},e.Va=function(){null!=this.C&&(this.C=null,tn(this),cn(this),Ie(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=wn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},bn.prototype.g=function(e,t){return new kn(e,t)},u(kn,ce),kn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){en(this.g)},kn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ye(e),e=n);t.i.push(new nt(t.Ya++,e)),3==t.I&&rn(t)},kn.prototype.N=function(){this.g.l=null,delete this.j,en(this.g),delete this.g,kn.Z.N.call(this)},u(Dn,xe),u(xn,Ee),u(En,wn),En.prototype.ra=function(){ue(this.g,"a")},En.prototype.qa=function(e){ue(this.g,new Dn(e))},En.prototype.pa=function(e){ue(this.g,new xn)},En.prototype.oa=function(){ue(this.g,"b")},bn.prototype.createWebChannel=bn.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,w=k.createWebChannelTransport=function(){return new bn},v=k.getStatEventTarget=function(){return Ce()},y=k.Event=Se,g=k.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},je.NO_ERROR=0,je.TIMEOUT=8,je.HTTP_ERROR=6,f=k.ErrorCode=je,Le.COMPLETE="complete",m=k.EventType=Le,ke.EventType=De,De.OPEN="a",De.CLOSE="b",De.ERROR="c",De.MESSAGE="d",ce.prototype.listen=ce.prototype.J,p=k.WebChannel=ke,k.FetchXmlHttpFactory=Ot,Ht.prototype.listenOnce=Ht.prototype.K,Ht.prototype.getLastError=Ht.prototype.Ha,Ht.prototype.getLastErrorCode=Ht.prototype.ya,Ht.prototype.getStatus=Ht.prototype.ca,Ht.prototype.getResponseJson=Ht.prototype.La,Ht.prototype.getResponseText=Ht.prototype.la,Ht.prototype.send=Ht.prototype.ea,Ht.prototype.setWithCredentials=Ht.prototype.Fa,h=k.XhrIo=Ht}).apply("undefined"!==typeof b?b:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const D="@firebase/firestore",x="4.9.2";class E{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}E.UNAUTHENTICATED=new E(null),E.GOOGLE_CREDENTIALS=new E("google-credentials-uid"),E.FIRST_PARTY=new E("first-party-uid"),E.MOCK_USER=new E("mock-user");let S="12.3.0";const A=new l.Vy("@firebase/firestore");function C(){return A.logLevel}function T(e){if(A.logLevel<=l.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(I);A.debug("Firestore (".concat(S,"): ").concat(e),...i)}}function R(e){if(A.logLevel<=l.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(I);A.error("Firestore (".concat(S,"): ").concat(e),...i)}}function F(e){if(A.logLevel<=l.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(I);A.warn("Firestore (".concat(S,"): ").concat(e),...i)}}function I(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function P(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,M(e,r,n)}function M(e,t,n){let r="FIRESTORE (".concat(S,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw R(r),new Error(r)}function _(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||M(t,i,r)}function N(e,t){return e}const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends c.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class L{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class B{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class W{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(E.UNAUTHENTICATED))}shutdown(){}}class U{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class q{constructor(e){this.t=e,this.currentUser=E.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new L;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new L,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{T("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(T("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new L)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(T("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(_("string"==typeof t.accessToken,31837,{l:t}),new B(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _(null===e||"string"==typeof e,2055,{h:e}),new E(e)}}class H{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=E.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class z{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new H(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(E.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class V{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,a.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_(void 0===this.o,3512);const n=e=>{null!=e.error&&T("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,T("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{T("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):T("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new V(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(_("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new V(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Y(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class G{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Y(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Q(e,t){return e<t?-1:e>t?1:0}function X(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return $(n)===$(i)?Q(n,i):$(n)?1:-1}return Q(e.length,t.length)}const Z=55296,J=57343;function $(e){const t=e.charCodeAt(0);return t>=Z&&t<=J}function ee(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const te="__name__";class ne{constructor(e,t,n){void 0===t?t=0:t>e.length&&P(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&P(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ne.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ne?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=ne.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Q(e.length,t.length)}static compareSegments(e,t){const n=ne.isNumericId(e),r=ne.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?ne.extractNumericId(e).compare(ne.extractNumericId(t)):X(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return r.fromString(e.substring(4,e.length-2))}}class re extends ne{construct(e,t,n){return new re(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new j(O.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new re(e)}static emptyPath(){return new re([])}}const ie=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class oe extends ne{construct(e,t,n){return new oe(e,t,n)}static isValidIdentifier(e){return ie.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),oe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===te}static keyField(){return new oe([te])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new j(O.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new j(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new j(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new j(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new oe(t)}static emptyPath(){return new oe([])}}class ae{constructor(e){this.path=e}static fromPath(e){return new ae(re.fromString(e))}static fromName(e){return new ae(re.fromString(e).popFirst(5))}static empty(){return new ae(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===re.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return re.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new re(e.slice()))}}function se(e,t,n){if(!n)throw new j(O.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function le(e){if(!ae.isDocumentKey(e))throw new j(O.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ce(e){if(ae.isDocumentKey(e))throw new j(O.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ue(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function de(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":P(12329,{type:typeof e})}function he(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new j(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=de(e);throw new j(O.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function pe(e,t){const n={typeString:e};return t&&(n.value=t),n}function me(e,t){if(!ue(e))throw new j(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,o="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(i&&typeof a!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==o&&a!==o.value){n="Expected '".concat(r,"' field to equal '").concat(o.value,"'");break}}if(n)throw new j(O.INVALID_ARGUMENT,n);return!0}const fe=-62135596800,ge=1e6;class ye{static now(){return ye.fromMillis(Date.now())}static fromDate(e){return ye.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*ge);return new ye(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new j(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new j(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<fe)throw new j(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ge}_compareTo(e){return this.seconds===e.seconds?Q(this.nanoseconds,e.nanoseconds):Q(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(me(e,ye._jsonSchema))return new ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fe;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ye._jsonSchemaVersion="firestore/timestamp/1.0",ye._jsonSchema={type:pe("string",ye._jsonSchemaVersion),seconds:pe("number"),nanoseconds:pe("number")};class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new ye(0,0))}static max(){return new ve(new ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const we=-1;class be{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}be.UNKNOWN_ID=-1;function ke(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ve.fromTimestamp(1e9===r?new ye(n+1,0):new ye(n,r));return new xe(i,ae.empty(),t)}function De(e){return new xe(e.readTime,e.key,we)}class xe{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new xe(ve.min(),ae.empty(),we)}static max(){return new xe(ve.max(),ae.empty(),we)}}function Ee(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ae.comparator(e.documentKey,t.documentKey),0!==n?n:Q(e.largestBatchId,t.largestBatchId))}const Se="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ae{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ce(e){if(e.code!==O.FAILED_PRECONDITION||e.message!==Se)throw e;T("LocalStore","Unexpectedly lost primary lease")}class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&P(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(e){return Te.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.reject(t)}static resolve(e){return new Te((t,n)=>{t(e)})}static reject(e){return new Te((t,n)=>{n(e)})}static waitFor(e){return new Te((t,n)=>{let r=0,i=0,o=!1;e.forEach(e=>{++r,e.next(()=>{++i,o&&i===r&&t()},e=>n(e))}),o=!0,i===r&&t()})}static or(e){let t=Te.resolve(!1);for(const n of e)t=t.next(e=>e?Te.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Te((n,r)=>{const i=e.length,o=new Array(i);let a=0;for(let s=0;s<i;s++){const l=s;t(e[l]).next(e=>{o[l]=e,++a,a===i&&n(o)},e=>r(e))}})}static doWhile(e,t){return new Te((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Re(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fe(e){return"IndexedDbTransactionError"===e.name}class Ie{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ie.ce=-1;const Pe=-1;function Me(e){return null==e}function _e(e){return 0===e&&1/e==-1/0}function Ne(e){return"number"==typeof e&&Number.isInteger(e)&&!_e(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Oe="\x01";function je(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Be(t)),t=Le(e.get(n),t);return Be(t)}function Le(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Oe:n+="\x01\x11";break;default:n+=t}}return n}function Be(e){return e+Oe+"\x01"}const We="remoteDocuments",Ue="owner",qe="mutationQueues",He="mutations";const ze="documentMutations",Ve="remoteDocumentsV14",Ke="remoteDocumentGlobal",Ye="targets",Ge="targetDocuments",Qe="targetGlobal",Xe="collectionParents",Ze="clientMetadata",Je="bundles",$e="namedQueries",et="indexConfiguration",tt="indexState",nt="indexEntries",rt="documentOverlays",it="globals",ot=[qe,He,ze,We,Ye,Ue,Qe,Ge,Ze,Ke,Xe,Je,$e],at=[qe,He,ze,Ve,Ye,Ue,Qe,Ge,Ze,Ke,Xe,Je,$e,rt],st=at,lt=[...st,et,tt,nt];function ct(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ut(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function dt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ht{constructor(e,t){this.comparator=e,this.root=t||mt.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pt(this.root,e,this.comparator,!1)}getReverseIterator(){return new pt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pt(this.root,e,this.comparator,!0)}}class pt{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mt{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:mt.RED,this.left=null!=r?r:mt.EMPTY,this.right=null!=i?i:mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new mt(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return mt.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw P(43730,{key:this.key,value:this.value});if(this.right.isRed())throw P(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw P(27949);return e+(this.isRed()?0:1)}}mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1,mt.EMPTY=new class{constructor(){this.size=0}get key(){throw P(57766)}get value(){throw P(16141)}get color(){throw P(16727)}get left(){throw P(29726)}get right(){throw P(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new mt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ft{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gt(this.data.getIterator())}getIteratorFrom(e){return new gt(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof ft))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ft(this.comparator);return t.data=e,t}}class gt{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class yt{constructor(e){this.fields=e,e.sort(oe.comparator)}static empty(){return new yt([])}unionWith(e){let t=new ft(oe.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new yt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ee(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class vt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new vt("Invalid base64 string: "+e):e}}(e);return new wt(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Q(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const bt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kt(e){if(_(!!e,39018),"string"==typeof e){let t=0;const n=bt.exec(e);if(_(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Dt(e.seconds),nanos:Dt(e.nanos)}}function Dt(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function xt(e){return"string"==typeof e?wt.fromBase64String(e):wt.fromUint8Array(e)}const Et="server_timestamp",St="__type__",At="__previous_value__",Ct="__local_write_time__";function Tt(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[St])||void 0===t?void 0:t.stringValue)===Et}function Rt(e){const t=e.mapValue.fields[At];return Tt(t)?Rt(t):t}function Ft(e){const t=kt(e.mapValue.fields[Ct].timestampValue);return new ye(t.seconds,t.nanos)}class It{constructor(e,t,n,r,i,o,a,s,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=s,this.useFetchStreams=l,this.isUsingEmulator=c}}const Pt="(default)";class Mt{constructor(e,t){this.projectId=e,this.database=t||Pt}static empty(){return new Mt("","")}get isDefaultDatabase(){return this.database===Pt}isEqual(e){return e instanceof Mt&&e.projectId===this.projectId&&e.database===this.database}}const _t="__type__",Ot="__max__",jt={mapValue:{fields:{__type__:{stringValue:Ot}}}},Lt="__vector__",Bt="value";function Wt(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Tt(e)?4:rn(e)?9007199254740991:tn(e)?10:11:P(28295,{value:e})}function Ut(e,t){if(e===t)return!0;const n=Wt(e);if(n!==Wt(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ft(e).isEqual(Ft(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=kt(e.timestampValue),r=kt(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return xt(e.bytesValue).isEqual(xt(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Dt(e.geoPointValue.latitude)===Dt(t.geoPointValue.latitude)&&Dt(e.geoPointValue.longitude)===Dt(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Dt(e.integerValue)===Dt(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Dt(e.doubleValue),r=Dt(t.doubleValue);return n===r?_e(n)===_e(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ee(e.arrayValue.values||[],t.arrayValue.values||[],Ut);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ct(n)!==ct(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ut(n[i],r[i])))return!1;return!0}(e,t);default:return P(52216,{left:e})}}function qt(e,t){return void 0!==(e.values||[]).find(e=>Ut(e,t))}function Ht(e,t){if(e===t)return 0;const n=Wt(e),r=Wt(t);if(n!==r)return Q(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Q(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Dt(e.integerValue||e.doubleValue),r=Dt(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return zt(e.timestampValue,t.timestampValue);case 4:return zt(Ft(e),Ft(t));case 5:return X(e.stringValue,t.stringValue);case 6:return function(e,t){const n=xt(e),r=xt(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Q(n[i],r[i]);if(0!==e)return e}return Q(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Q(Dt(e.latitude),Dt(t.latitude));return 0!==n?n:Q(Dt(e.longitude),Dt(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Vt(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,o){const a=e.fields||{},s=t.fields||{},l=null===(n=a[Bt])||void 0===n?void 0:n.arrayValue,c=null===(r=s[Bt])||void 0===r?void 0:r.arrayValue,u=Q((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(o=c.values)||void 0===o?void 0:o.length)||0);return 0!==u?u:Vt(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===jt.mapValue&&t===jt.mapValue)return 0;if(e===jt.mapValue)return 1;if(t===jt.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let a=0;a<r.length&&a<o.length;++a){const e=X(r[a],o[a]);if(0!==e)return e;const t=Ht(n[r[a]],i[o[a]]);if(0!==t)return t}return Q(r.length,o.length)}(e.mapValue,t.mapValue);default:throw P(23264,{he:n})}}function zt(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Q(e,t);const n=kt(e),r=kt(t),i=Q(n.seconds,r.seconds);return 0!==i?i:Q(n.nanos,r.nanos)}function Vt(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ht(n[i],r[i]);if(e)return e}return Q(n.length,r.length)}function Kt(e){return Yt(e)}function Yt(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=kt(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return xt(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ae.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Yt(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Yt(e.fields[i]));return n+"}"}(e.mapValue):P(61005,{value:e})}function Gt(e){switch(Wt(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Rt(e);return t?16+Gt(t):16;case 5:return 2*e.stringValue.length;case 6:return xt(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Gt(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return ut(e.fields,(e,n)=>{t+=e.length+Gt(n)}),t}(e.mapValue);default:throw P(13486,{value:e})}}function Qt(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Xt(e){return!!e&&"integerValue"in e}function Zt(e){return!!e&&"arrayValue"in e}function Jt(e){return!!e&&"nullValue"in e}function $t(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function en(e){return!!e&&"mapValue"in e}function tn(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[_t])||void 0===t?void 0:t.stringValue)===Lt}function nn(e){if(e.geoPointValue)return{geoPointValue:(0,o.A)({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:(0,o.A)({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ut(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=nn(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=nn(e.arrayValue.values[n]);return t}return(0,o.A)({},e)}function rn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Ot}class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!en(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nn(t)}setAll(e){let t=oe.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=nn(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());en(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ut(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];en(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ut(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new on(nn(this.value))}}function an(e){const t=[];return ut(e.fields,(e,n)=>{const r=new oe([e]);if(en(n)){const e=an(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new yt(t)}class sn{constructor(e,t,n,r,i,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new sn(e,0,ve.min(),ve.min(),ve.min(),on.empty(),0)}static newFoundDocument(e,t,n,r){return new sn(e,1,t,ve.min(),n,r,0)}static newNoDocument(e,t){return new sn(e,2,t,ve.min(),ve.min(),on.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,ve.min(),ve.min(),on.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ln{constructor(e,t){this.position=e,this.inclusive=t}}function cn(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],a=e.position[i];if(r=o.field.isKeyField()?ae.comparator(ae.fromName(a.referenceValue),n.key):Ht(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function un(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ut(e.position[n],t.position[n]))return!1;return!0}class dn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function hn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class pn{}class mn extends pn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Dn(e,t,n):"array-contains"===t?new An(e,n):"in"===t?new Cn(e,n):"not-in"===t?new Tn(e,n):"array-contains-any"===t?new Rn(e,n):new mn(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new xn(e,n):new En(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Ht(t,this.value)):null!==t&&Wt(this.value)===Wt(t)&&this.matchesComparison(Ht(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return P(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends pn{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new fn(e,t)}matches(e){return gn(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gn(e){return"and"===e.op}function yn(e){return vn(e)&&gn(e)}function vn(e){for(const t of e.filters)if(t instanceof fn)return!1;return!0}function wn(e){if(e instanceof mn)return e.field.canonicalString()+e.op.toString()+Kt(e.value);if(yn(e))return e.filters.map(e=>wn(e)).join(",");{const t=e.filters.map(e=>wn(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function bn(e,t){return e instanceof mn?function(e,t){return t instanceof mn&&e.op===t.op&&e.field.isEqual(t.field)&&Ut(e.value,t.value)}(e,t):e instanceof fn?function(e,t){return t instanceof fn&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&bn(n,t.filters[r]),!0)}(e,t):void P(19439)}function kn(e){return e instanceof mn?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Kt(e.value))}(e):e instanceof fn?function(e){return e.op.toString()+" {"+e.getFilters().map(kn).join(" ,")+"}"}(e):"Filter"}class Dn extends mn{constructor(e,t,n){super(e,t,n),this.key=ae.fromName(n.referenceValue)}matches(e){const t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class xn extends mn{constructor(e,t){super(e,"in",t),this.keys=Sn("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class En extends mn{constructor(e,t){super(e,"not-in",t),this.keys=Sn("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Sn(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ae.fromName(e.referenceValue))}class An extends mn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zt(t)&&qt(t.arrayValue,this.value)}}class Cn extends mn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&qt(this.value.arrayValue,t)}}class Tn extends mn{constructor(e,t){super(e,"not-in",t)}matches(e){if(qt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!qt(this.value.arrayValue,t)}}class Rn extends mn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>qt(this.value.arrayValue,e))}}class Fn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function In(e){return new Fn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Pn(e){const t=N(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>wn(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Me(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Kt(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Kt(e)).join(",")),t.Te=e}return t.Te}function Mn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!hn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bn(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!un(e.startAt,t.startAt)&&un(e.endAt,t.endAt)}function _n(e){return ae.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Nn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function On(e,t,n,r,i,o,a,s){return new Nn(e,t,n,r,i,o,a,s)}function jn(e){return new Nn(e)}function Ln(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Bn(e){return null!==e.collectionGroup}function Wn(e){const t=N(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new ft(oe.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new dn(r,n))}),e.has(oe.keyField().canonicalString())||t.Ie.push(new dn(oe.keyField(),n))}return t.Ie}function Un(e){const t=N(e);return t.Ee||(t.Ee=qn(t,Wn(e))),t.Ee}function qn(e,t){if("F"===e.limitType)return In(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new dn(e.field,t)});const n=e.endAt?new ln(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ln(e.startAt.position,e.startAt.inclusive):null;return In(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Hn(e,t){const n=e.filters.concat([t]);return new Nn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function zn(e,t,n){return new Nn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Vn(e,t){return Mn(Un(e),Un(t))&&e.limitType===t.limitType}function Kn(e){return"".concat(Pn(Un(e)),"|lt:").concat(e.limitType)}function Yn(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>kn(e)).join(", "),"]")),Me(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Kt(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Kt(e)).join(",")),"Target(".concat(t,")")}(Un(e)),"; limitType=").concat(e.limitType,")")}function Gn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ae.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Wn(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=cn(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Wn(e),t))&&!(e.endAt&&!function(e,t,n){const r=cn(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Wn(e),t))}(e,t)}function Qn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Xn(e){return(t,n)=>{let r=!1;for(const i of Wn(e)){const e=Zn(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Zn(e,t,n){const r=e.field.isKeyField()?ae.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ht(r,i):P(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return P(19790,{direction:e.dir})}}class Jn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ut(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return dt(this.inner)}size(){return this.innerSize}}const $n=new ht(ae.comparator);function er(){return $n}const tr=new ht(ae.comparator);function nr(){let e=tr;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function rr(e){let t=tr;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ir(){return ar()}function or(){return ar()}function ar(){return new Jn(e=>e.toString(),(e,t)=>e.isEqual(t))}const sr=new ht(ae.comparator),lr=new ft(ae.comparator);function cr(){let e=lr;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const ur=new ft(Q);function dr(){return ur}function hr(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_e(t)?"-0":t}}function pr(e){return{integerValue:""+e}}function mr(e,t){return Ne(t)?pr(t):hr(e,t)}class fr{constructor(){this._=void 0}}function gr(e,t,n){return e instanceof wr?function(e,t){const n={fields:{[St]:{stringValue:Et},[Ct]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Tt(t)&&(t=Rt(t)),t&&(n.fields[At]=t),{mapValue:n}}(n,t):e instanceof br?kr(e,t):e instanceof Dr?xr(e,t):function(e,t){const n=vr(e,t),r=Sr(n)+Sr(e.Ae);return Xt(n)&&Xt(e.Ae)?pr(r):hr(e.serializer,r)}(e,t)}function yr(e,t,n){return e instanceof br?kr(e,t):e instanceof Dr?xr(e,t):n}function vr(e,t){return e instanceof Er?function(e){return Xt(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class wr extends fr{}class br extends fr{constructor(e){super(),this.elements=e}}function kr(e,t){const n=Ar(t);for(const r of e.elements)n.some(e=>Ut(e,r))||n.push(r);return{arrayValue:{values:n}}}class Dr extends fr{constructor(e){super(),this.elements=e}}function xr(e,t){let n=Ar(t);for(const r of e.elements)n=n.filter(e=>!Ut(e,r));return{arrayValue:{values:n}}}class Er extends fr{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Sr(e){return Dt(e.integerValue||e.doubleValue)}function Ar(e){return Zt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Cr{constructor(e,t){this.field=e,this.transform=t}}class Tr{constructor(e,t){this.version=e,this.transformResults=t}}class Rr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rr}static exists(e){return new Rr(void 0,e)}static updateTime(e){return new Rr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fr(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ir{}function Pr(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new qr(e.key,Rr.none()):new jr(e.key,e.data,Rr.none());{const n=e.data,r=on.empty();let i=new ft(oe.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Lr(e.key,r,new yt(i.toArray()),Rr.none())}}function Mr(e,t,n){e instanceof jr?function(e,t,n){const r=e.value.clone(),i=Wr(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Lr?function(e,t,n){if(!Fr(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Wr(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Br(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function _r(e,t,n,r){return e instanceof jr?function(e,t,n,r){if(!Fr(e.precondition,t))return n;const i=e.value.clone(),o=Ur(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Lr?function(e,t,n,r){if(!Fr(e.precondition,t))return n;const i=Ur(e.fieldTransforms,r,t),o=t.data;return o.setAll(Br(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Fr(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Nr(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=vr(r.transform,e||null);null!=i&&(null===n&&(n=on.empty()),n.set(r.field,i))}return n||null}function Or(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ee(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof br&&t instanceof br||e instanceof Dr&&t instanceof Dr?ee(e.elements,t.elements,Ut):e instanceof Er&&t instanceof Er?Ut(e.Ae,t.Ae):e instanceof wr&&t instanceof wr}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class jr extends Ir{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Lr extends Ir{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Br(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Wr(e,t,n){const r=new Map;_(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,yr(a,s,n[i]))}return r}function Ur(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,gr(e,o,t))}return r}class qr extends Ir{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hr extends Ir{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Mr(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=_r(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=_r(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=or();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const s=Pr(o,a);null!==s&&n.set(r.key,s),o.isValidDocument()||o.convertToNoDocument(ve.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),cr())}isEqual(e){return this.batchId===e.batchId&&ee(this.mutations,e.mutations,(e,t)=>Or(e,t))&&ee(this.baseMutations,e.baseMutations,(e,t)=>Or(e,t))}}class Vr{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){_(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=sr;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Vr(e,t,n,r)}}class Kr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Yr{constructor(e,t){this.count=e,this.unchangedNames=t}}var Gr,Qr;function Xr(e){switch(e){case O.OK:return P(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return P(15467,{code:e})}}function Zr(e){if(void 0===e)return R("GRPC error has no .code"),O.UNKNOWN;switch(e){case Gr.OK:return O.OK;case Gr.CANCELLED:return O.CANCELLED;case Gr.UNKNOWN:return O.UNKNOWN;case Gr.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Gr.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Gr.INTERNAL:return O.INTERNAL;case Gr.UNAVAILABLE:return O.UNAVAILABLE;case Gr.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Gr.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Gr.NOT_FOUND:return O.NOT_FOUND;case Gr.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Gr.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Gr.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Gr.ABORTED:return O.ABORTED;case Gr.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Gr.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Gr.DATA_LOSS:return O.DATA_LOSS;default:return P(39323,{code:e})}}(Qr=Gr||(Gr={}))[Qr.OK=0]="OK",Qr[Qr.CANCELLED=1]="CANCELLED",Qr[Qr.UNKNOWN=2]="UNKNOWN",Qr[Qr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qr[Qr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qr[Qr.NOT_FOUND=5]="NOT_FOUND",Qr[Qr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qr[Qr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qr[Qr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qr[Qr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qr[Qr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qr[Qr.ABORTED=10]="ABORTED",Qr[Qr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qr[Qr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qr[Qr.INTERNAL=13]="INTERNAL",Qr[Qr.UNAVAILABLE=14]="UNAVAILABLE",Qr[Qr.DATA_LOSS=15]="DATA_LOSS";let Jr=null;function $r(){return new TextEncoder}const ei=new r([4294967295,4294967295],0);function ti(e){const t=$r().encode(e),n=new i;return n.update(t),new Uint8Array(n.digest())}function ni(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),o=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new r([n,i],0),new r([o,a],0)]}class ri{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ii("Invalid padding: ".concat(t));if(n<0)throw new ii("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ii("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ii("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=r.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(r.fromNumber(n)));return 1===i.compare(ei)&&(i=new r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=ti(e),[n,r]=ni(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ri(i,r,t);return n.forEach(e=>o.insert(e)),o}insert(e){if(0===this.ge)return;const t=ti(e),[n,r]=ni(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ii extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class oi{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ai.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new oi(ve.min(),r,new ht(Q),er(),cr())}}class ai{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ai(n,t,cr(),cr(),cr())}}class si{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class li{constructor(e,t){this.targetId=e,this.Ce=t}}class ci{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wt.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ui{constructor(){this.ve=0,this.Fe=pi(),this.Me=wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=cr(),t=cr(),n=cr();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:P(38017,{changeType:i})}}),new ai(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=pi()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,_(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class di{constructor(e){this.Ge=e,this.ze=new Map,this.je=er(),this.Je=hi(),this.He=hi(),this.Ye=new ht(Q)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:P(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const o=r.target;if(_n(o))if(0===n){const e=new ae(o.path);this.et(t,e,sn.newNoDocument(e,ve.min()))}else _(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),o=n?this.ct(n,e,r):1;if(0!==o){this.it(t);const e=2===o?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=Jr)||void 0===i||i.lt(function(e,t,n,r,i,o,a,s,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===i,hashCount:null!==(o=null===d||void 0===d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(a=null===d||void 0===d||null===(s=d.bits)||void 0===s||null===(s=s.bitmap)||void 0===s?void 0:s.length)&&void 0!==a?a:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,o))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,a;try{o=xt(n).toUint8Array()}catch(e){if(e instanceof vt)return F("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new ri(o,r,i)}catch(e){return F(e instanceof ii?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&_n(i.target)){const t=new ae(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,sn.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=cr();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new oi(e,t,this.Ye,this.je,n);return this.je=er(),this.Je=hi(),this.He=hi(),this.Ye=new ht(Q),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ui,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ft(Q),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ft(Q),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||T("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ui),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function hi(){return new ht(ae.comparator)}function pi(){return new ht(ae.comparator)}const mi={asc:"ASCENDING",desc:"DESCENDING"},fi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gi={and:"AND",or:"OR"};class yi{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vi(e,t){return e.useProto3Json||Me(t)?t:{value:t}}function wi(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function bi(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ki(e,t){return wi(e,t.toTimestamp())}function Di(e){return _(!!e,49232),ve.fromTimestamp(function(e){const t=kt(e);return new ye(t.seconds,t.nanos)}(e))}function xi(e,t){return Ei(e,t).canonicalString()}function Ei(e,t){const n=function(e){return new re(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Si(e){const t=re.fromString(e);return _(Vi(t),10190,{key:t.toString()}),t}function Ai(e,t){return xi(e.databaseId,t.path)}function Ci(e,t){const n=Si(t);if(n.get(1)!==e.databaseId.projectId)throw new j(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new j(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ae(Ii(n))}function Ti(e,t){return xi(e.databaseId,t)}function Ri(e){const t=Si(e);return 4===t.length?re.emptyPath():Ii(t)}function Fi(e){return new re(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ii(e){return _(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Pi(e,t,n){return{name:Ai(e,t),fields:n.value.mapValue.fields}}function Mi(e,t){let n;if(t instanceof jr)n={update:Pi(e,t.key,t.value)};else if(t instanceof qr)n={delete:Ai(e,t.key)};else if(t instanceof Lr)n={update:Pi(e,t.key,t.data),updateMask:zi(t.fieldMask)};else{if(!(t instanceof Hr))return P(16599,{Vt:t.type});n={verify:Ai(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof wr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof br)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Dr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Er)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw P(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ki(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:P(27497)}(e,t.precondition)),n}function _i(e,t){return{documents:[Ti(e,t.path)]}}function Ni(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ti(e,i);const o=function(e){if(0!==e.length)return Hi(fn.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Ui(e.field),direction:Li(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const s=vi(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Oi(e){let t=Ri(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){_(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=ji(e);return t instanceof fn&&yn(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new dn(qi(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,Me(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ln(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new ln(n,t)}(n.endAt)),On(t,i,a,o,s,"F",l,c)}function ji(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=qi(e.unaryFilter.field);return mn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=qi(e.unaryFilter.field);return mn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=qi(e.unaryFilter.field);return mn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=qi(e.unaryFilter.field);return mn.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return P(61313);default:return P(60726)}}(e):void 0!==e.fieldFilter?function(e){return mn.create(qi(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return P(58110);default:return P(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fn.create(e.compositeFilter.filters.map(e=>ji(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return P(1026)}}(e.compositeFilter.op))}(e):P(30097,{filter:e})}function Li(e){return mi[e]}function Bi(e){return fi[e]}function Wi(e){return gi[e]}function Ui(e){return{fieldPath:e.canonicalString()}}function qi(e){return oe.fromServerFormat(e.fieldPath)}function Hi(e){return e instanceof mn?function(e){if("=="===e.op){if($t(e.value))return{unaryFilter:{field:Ui(e.field),op:"IS_NAN"}};if(Jt(e.value))return{unaryFilter:{field:Ui(e.field),op:"IS_NULL"}}}else if("!="===e.op){if($t(e.value))return{unaryFilter:{field:Ui(e.field),op:"IS_NOT_NAN"}};if(Jt(e.value))return{unaryFilter:{field:Ui(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ui(e.field),op:Bi(e.op),value:e.value}}}(e):e instanceof fn?function(e){const t=e.getFilters().map(e=>Hi(e));return 1===t.length?t[0]:{compositeFilter:{op:Wi(e.op),filters:t}}}(e):P(54877,{filter:e})}function zi(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Vi(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ki{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ve.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ve.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:wt.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=s}withSequenceNumber(e){return new Ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Yi{constructor(e){this.yt=e}}function Gi(e){const t=Oi({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?zn(t,t.limit,"L"):t}class Qi{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Dt(e.integerValue));else if("doubleValue"in e){const n=Dt(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),_e(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=kt(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(xt(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?rn(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):tn(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):P(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=Bt,o=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(Dt(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),ae.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Qi.Kt=new Qi;class Xi{constructor(){this.Cn=new Zi}addToCollectionParentIndex(e,t){return this.Cn.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Te.resolve()}deleteFieldIndex(e,t){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,t){return Te.resolve()}getDocumentsMatchingTarget(e,t){return Te.resolve(null)}getIndexType(e,t){return Te.resolve(0)}getFieldIndexes(e,t){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,t){return Te.resolve(xe.min())}getMinOffsetFromCollectionGroup(e,t){return Te.resolve(xe.min())}updateCollectionGroup(e,t,n){return Te.resolve()}updateIndexEntries(e,t){return Te.resolve()}}class Zi{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ft(re.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ft(re.comparator)).toArray()}}new Uint8Array(0);const Ji={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$i=41943040;class eo{static withCacheSize(e){return new eo(e,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}eo.DEFAULT_COLLECTION_PERCENTILE=10,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,eo.DEFAULT=new eo($i,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),eo.DISABLED=new eo(-1,0,0);class to{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new to(0)}static cr(){return new to(-1)}}const no="LruGarbageCollector",ro=1048576;function io(e,t){let[n,r]=e,[i,o]=t;const a=Q(n,i);return 0===a?Q(r,o):a}class oo{constructor(e){this.Ir=e,this.buffer=new ft(io),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();io(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ao{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){T(no,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Fe(e)?T(no,"Ignoring IndexedDB error during garbage collection: ",e):await Ce(e)}await this.Vr(3e5)})}}class so{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Te.resolve(Ie.ce);const n=new oo(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(Ji)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Ji):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,o,a,s,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(T("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),C()<=l.$b.DEBUG&&T("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-s)+"ms\n"+"Total Duration: ".concat(c-u,"ms")),Te.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function lo(e,t){return new so(e,t)}class co{constructor(){this.changes=new Jn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Te.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uo{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ho{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&_r(n.mutation,e,yt.empty(),ye.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,cr()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cr();const r=ir();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=nr();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=ir();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,cr()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=er();const o=ar(),a=ar();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Lr)?i=i.insert(t.key,t):void 0!==a?(o.set(t.key,a.mutation.getFieldMask()),_r(a.mutation,t,a.mutation.getFieldMask(),ye.now())):o.set(t.key,yt.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new uo(t,null!==(n=o.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=ar();let r=new ht((e,t)=>e-t),i=cr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let a=n.get(e)||yt.empty();a=i.applyToLocalView(o,a),n.set(e,a);const s=(r.get(i.batchId)||cr()).add(e);r=r.insert(i.batchId,s)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,l=r.value,c=or();l.forEach(e=>{if(!i.has(e)){const r=Pr(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,s,c))}return Te.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ae.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Bn(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Te.resolve(ir());let a=we,s=i;return o.next(t=>Te.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Te.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{s=s.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,s,t,cr())).next(e=>({batchId:a,changes:rr(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next(e=>{let t=nr();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=nr();return this.indexManager.getCollectionParents(e,i).next(a=>Te.forEach(a,a=>{const s=function(e,t){return new Nn(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next(e=>{e.forEach((e,t)=>{o=o.insert(e,t)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,sn.newInvalidDocument(r)))});let n=nr();return e.forEach((e,r)=>{const o=i.get(e);void 0!==o&&_r(o.mutation,r,yt.empty(),ye.now()),Gn(t,r)&&(n=n.insert(e,r))}),n})}}class po{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Di(e.createTime)}}(t)),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Gi(e.bundledQuery),readTime:Di(e.readTime)}}(t)),Te.resolve()}}class mo{constructor(){this.overlays=new ht(ae.comparator),this.qr=new Map}getOverlay(e,t){return Te.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ir();return Te.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Te.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Te.resolve()}getOverlaysForCollection(e,t,n){const r=ir(),i=t.length+1,o=new ae(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const e=a.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Te.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ht((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=ir(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=ir(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Te.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Kr(t,n));let i=this.qr.get(t);void 0===i&&(i=cr(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class fo{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return Te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Te.resolve()}}class go{constructor(){this.Qr=new ft(yo.$r),this.Ur=new ft(yo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new yo(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new yo(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new ae(new re([])),n=new yo(t,e),r=new yo(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ae(new re([])),n=new yo(t,e),r=new yo(t,e+1);let i=cr();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new yo(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class yo{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ae.comparator(e.key,t.key)||Q(e.Yr,t.Yr)}static Kr(e,t){return Q(e.Yr,t.Yr)||ae.comparator(e.key,t.key)}}class vo{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ft(yo.$r)}checkEmpty(e){return Te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new zr(i,t,n,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new yo(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Te.resolve(o)}lookupMutationBatch(e,t){return Te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Te.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(0===this.mutationQueue.length?Pe:this.tr-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new yo(t,0),r=new yo(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Te.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ft(Q);return t.forEach(e=>{const t=new yo(e,0),r=new yo(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Te.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ae.isDocumentKey(i)||(i=i.child(""));const o=new yo(new ae(i),0);let a=new ft(Q);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},o),Te.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){_(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Te.forEach(t.mutations,r=>{const i=new yo(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new yo(t,0),r=this.Zr.firstAfterOrEqual(n);return Te.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Te.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wo{constructor(e){this.ri=e,this.docs=new ht(ae.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Te.resolve(n?n.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let n=er();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():sn.newInvalidDocument(e))}),Te.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=er();const o=t.path,a=new ae(o.child("__id-9223372036854775808__")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Ee(De(a),n)<=0||(r.has(a.key)||Gn(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Te.resolve(i)}getAllFromCollectionGroup(e,t,n,r){P(9500)}ii(e,t){return Te.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new bo(this)}getSize(e){return Te.resolve(this.size)}}class bo extends co{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class ko{constructor(e){this.persistence=e,this.si=new Jn(e=>Pn(e),Mn),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new go,this.targetCount=0,this.ai=to.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new to(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.Pr(t),Te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Te.waitFor(i).next(()=>r)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Te.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Te.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Te.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Te.resolve(n)}containsKey(e,t){return Te.resolve(this._i.containsKey(t))}}class Do{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ie(0),this.li=!1,this.li=!0,this.hi=new fo,this.referenceDelegate=e(this),this.Pi=new ko(this),this.indexManager=new Xi,this.remoteDocumentCache=function(e){return new wo(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Yi(t),this.Ii=new po(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mo,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new vo(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){T("MemoryPersistence","Starting transaction:",e);const r=new xo(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Te.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class xo extends Ae{constructor(e){super(),this.currentSequenceNumber=e}}class Eo{constructor(e){this.persistence=e,this.Ri=new go,this.Vi=null}static mi(e){return new Eo(e)}get fi(){if(this.Vi)return this.Vi;throw P(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Te.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.fi,n=>{const r=ae.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,ve.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Te.or([()=>Te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class So{constructor(e,t){this.persistence=e,this.pi=new Jn(e=>je(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=lo(this,t)}static mi(e,t){return new So(e,t)}Ei(){}di(e){return Te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Te.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Te.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,ve.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Te.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Te.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Gt(e.data.value)),t}br(e,t,n){return Te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Te.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ao{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=cr(),r=cr();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Ao(e,t.fromCache,n,r)}}class Co{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class To{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(0,c.nr)()?8:Re((0,c.ZQ)())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Co;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(C()<=l.$b.DEBUG&&T("QueryEngine","SDK will not create cache indexes for query:",Yn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Te.resolve()):(C()<=l.$b.DEBUG&&T("QueryEngine","Query:",Yn(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(C()<=l.$b.DEBUG&&T("QueryEngine","The SDK decides to create cache indexes for query:",Yn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Un(t))):Te.resolve())}ys(e,t){if(Ln(t))return Te.resolve(null);let n=Un(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=zn(t,null,"F"),n=Un(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=cr(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const o=this.Ds(t,r);return this.Cs(t,o,i,n.readTime)?this.ys(e,zn(t,null,"F")):this.vs(e,o,t,n)}))})))}ws(e,t,n,r){return Ln(t)||r.isEqual(ve.min())?Te.resolve(null):this.ps.getDocuments(e,n).next(i=>{const o=this.Ds(t,i);return this.Cs(t,o,n,r)?Te.resolve(null):(C()<=l.$b.DEBUG&&T("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Yn(t)),this.vs(e,o,t,ke(r,we)).next(e=>e))})}Ds(e,t){let n=new ft(Xn(e));return t.forEach((t,r)=>{Gn(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return C()<=l.$b.DEBUG&&T("QueryEngine","Using full collection scan to execute query:",Yn(t)),this.ps.getDocumentsMatchingQuery(e,t,xe.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Ro="LocalStore",Fo=3e8;class Io{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new ht(Q),this.xs=new Jn(e=>Pn(e),Mn),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ho(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Po(e,t,n,r){return new Io(e,t,n,r)}async function Mo(e,t){const n=N(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],o=[];let a=cr();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:o}))})})}function _o(e){const t=N(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function No(e,t,n){let r=cr(),i=cr();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=er();return n.forEach((n,o)=>{const a=e.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(ve.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):T(Ro,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),{ks:r,qs:i}})}function Oo(e,t){const n=N(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Pe),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function jo(e,t){const n=N(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Te.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new Ki(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Lo(e,t,n){const r=N(e),i=r.Ms.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Fe(e))throw e;T(Ro,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Bo(e,t,n){const r=N(e);let i=ve.min(),o=cr();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=N(e),i=r.xs.get(n);return void 0!==i?Te.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,Un(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{o=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:ve.min(),n?o:cr())).next(e=>(Wo(r,Qn(t),e),{documents:e,Qs:o})))}function Wo(e,t,n){let r=e.Os.get(t)||ve.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Uo{constructor(){this.activeTargetIds=dr()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qo{constructor(){this.Mo=new Uo,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Uo,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ho{Oo(e){}shutdown(){}}const zo="ConnectivityMonitor";class Vo{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){T(zo,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){T(zo,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ko=null;function Yo(){return null===Ko?Ko=268435456+Math.round(2147483648*Math.random()):Ko++,"0x"+Ko.toString(16)}const Go="RestConnection",Qo={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Xo{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Pt?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const o=Yo(),a=this.zo(e,t.toUriEncodedString());T(Go,"Sending RPC '".concat(e,"' ").concat(o,":"),a,n);const s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,i);const{host:l}=new URL(a),u=(0,c.zJ)(l);return this.Jo(e,a,s,n,u).then(t=>(T(Go,"Received RPC '".concat(e,"' ").concat(o,": "),t),t),t=>{throw F(Go,"RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,i,o){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+S,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Qo[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Zo{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Jo="WebChannelConnection";class $o extends Xo{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const o=Yo();return new Promise((i,a)=>{const s=new h;s.setWithCredentials(!0),s.listenOnce(m.COMPLETE,()=>{try{switch(s.getLastErrorCode()){case f.NO_ERROR:const n=s.getResponseJson();T(Jo,"XHR for RPC '".concat(e,"' ").concat(o," received:"),JSON.stringify(n)),i(n);break;case f.TIMEOUT:T(Jo,"RPC '".concat(e,"' ").concat(o," timed out")),a(new j(O.DEADLINE_EXCEEDED,"Request time out"));break;case f.HTTP_ERROR:const r=s.getStatus();if(T(Jo,"RPC '".concat(e,"' ").concat(o," failed with status:"),r,"response text:",s.getResponseText()),r>0){var t;let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(t)>=0?t:O.UNKNOWN}(n.status);a(new j(e,n.message))}else a(new j(O.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new j(O.UNAVAILABLE,"Connection failed."));break;default:P(9055,{l_:e,streamId:o,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{T(Jo,"RPC '".concat(e,"' ").concat(o," completed."))}});const l=JSON.stringify(r);T(Jo,"RPC '".concat(e,"' ").concat(o," sending request:"),r),s.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Yo(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=w(),a=v(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const c=i.join("");T(Jo,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);const u=o.createWebChannel(c,s);this.I_(u);let d=!1,h=!1;const m=new Zo({Yo:t=>{h?T(Jo,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(T(Jo,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),T(Jo,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),f=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return f(u,p.EventType.OPEN,()=>{h||(T(Jo,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),m.o_())}),f(u,p.EventType.CLOSE,()=>{h||(h=!0,T(Jo,"RPC '".concat(e,"' stream ").concat(r," transport closed")),m.a_(),this.E_(u))}),f(u,p.EventType.ERROR,t=>{h||(h=!0,F(Jo,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),m.a_(new j(O.UNAVAILABLE,"The operation could not be completed")))}),f(u,p.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];_(!!i,16349);const o=i,a=(null===o||void 0===o?void 0:o.error)||(null===(n=o[0])||void 0===n?void 0:n.error);if(a){T(Jo,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Gr[e];if(void 0!==t)return Zr(t)}(t),i=a.message;void 0===n&&(n=O.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,m.a_(new j(n,i)),u.close()}else T(Jo,"RPC '".concat(e,"' stream ").concat(r," received:"),i),m.u_(i)}}),f(a,y.STAT_EVENT,t=>{t.stat===g.PROXY?T(Jo,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===g.NOPROXY&&T(Jo,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{m.__()},0),m}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function ea(){return"undefined"!=typeof document?document:null}function ta(e){return new yi(e,!0)}class na{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&T("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ra="PersistentStream";class ia{constructor(e,t,n,r,i,o,a,s){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new na(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(R(t.toString()),R("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===O.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new j(O.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return T(ra,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(T(ra,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oa extends ia{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:P(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(_(void 0===t||"string"==typeof t,58123),wt.fromBase64String(t||"")):(_(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),wt.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){const t=void 0===e.code?O.UNKNOWN:Zr(e.code);return new j(t,e.message||"")}(a);n=new ci(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ci(e,r.document.name),o=Di(r.document.updateTime),a=r.document.createTime?Di(r.document.createTime):ve.min(),s=new on({mapValue:{fields:r.document.fields}}),l=sn.newFoundDocument(i,o,a,s),c=r.targetIds||[],u=r.removedTargetIds||[];n=new si(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Ci(e,r.document),o=r.readTime?Di(r.readTime):ve.min(),a=sn.newNoDocument(i,o),s=r.removedTargetIds||[];n=new si([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Ci(e,r.document),o=r.removedTargetIds||[];n=new si([],o,i,null)}else{if(!("filter"in t))return P(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Yr(r,i),a=e.targetId;n=new li(a,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ve.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ve.min():t.readTime?Di(t.readTime):ve.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Fi(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=_n(r)?{documents:_i(e,r)}:{query:Ni(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=bi(e,t.resumeToken);const r=vi(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ve.min())>0){n.readTime=wi(e,t.snapshotVersion.toTimestamp());const r=vi(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return P(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Fi(this.serializer),t.removeTarget=e,this.q_(t)}}class aa extends ia{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return _(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){_(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(_(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Di(e.updateTime):Di(t);return n.isEqual(ve.min())&&(n=Di(t)),new Tr(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Di(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Fi(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Mi(this.serializer,e))};this.q_(t)}}class sa{}class la extends sa{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new j(O.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,a]=i;return this.connection.Go(e,Ei(t,n),r,o,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new j(O.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(o=>{let[a,s]=o;return this.connection.Ho(e,Ei(t,n),r,a,s,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new j(O.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ca{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(R(t),this.aa=!1):T("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const ua="RemoteStore";class da{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{ba(this)&&(T(ua,"Restarting streams for network reachability change."),await async function(e){const t=N(e);t.Ea.add(4),await pa(t),t.Ra.set("Unknown"),t.Ea.delete(4),await ha(t)}(this))})}),this.Ra=new ca(n,r)}}async function ha(e){if(ba(e))for(const t of e.da)await t(!0)}async function pa(e){for(const t of e.da)await t(!1)}function ma(e,t){const n=N(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),wa(n)?va(n):Ba(n).O_()&&ga(n,t))}function fa(e,t){const n=N(e),r=Ba(n);n.Ia.delete(t),r.O_()&&ya(n,t),0===n.Ia.size&&(r.O_()?r.L_():ba(n)&&n.Ra.set("Unknown"))}function ga(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ve.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ba(e).Y_(t)}function ya(e,t){e.Va.Ue(t),Ba(e).Z_(t)}function va(e){e.Va=new di({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Ba(e).start(),e.Ra.ua()}function wa(e){return ba(e)&&!Ba(e).x_()&&e.Ia.size>0}function ba(e){return 0===N(e).Ea.size}function ka(e){e.Va=void 0}async function Da(e){e.Ra.set("Online")}async function xa(e){e.Ia.forEach((t,n)=>{ga(e,t)})}async function Ea(e,t){ka(e),wa(e)?(e.Ra.ha(t),va(e)):e.Ra.set("Unknown")}async function Sa(e,t,n){if(e.Ra.set("Online"),t instanceof ci&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){T(ua,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Aa(e,n)}else if(t instanceof si?e.Va.Ze(t):t instanceof li?e.Va.st(t):e.Va.tt(t),!n.isEqual(ve.min()))try{const t=await _o(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(wt.EMPTY_BYTE_STRING,r.snapshotVersion)),ya(e,t);const i=new Ki(r.target,t,n,r.sequenceNumber);ga(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){T(ua,"Failed to raise snapshot:",t),await Aa(e,t)}}async function Aa(e,t,n){if(!Fe(t))throw t;e.Ea.add(1),await pa(e),e.Ra.set("Offline"),n||(n=()=>_o(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{T(ua,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await ha(e)})}function Ca(e,t){return t().catch(n=>Aa(e,n,t))}async function Ta(e){const t=N(e),n=Wa(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Pe;for(;Ra(t);)try{const e=await Oo(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Fa(t,e)}catch(e){await Aa(t,e)}Ia(t)&&Pa(t)}function Ra(e){return ba(e)&&e.Ta.length<10}function Fa(e,t){e.Ta.push(t);const n=Wa(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Ia(e){return ba(e)&&!Wa(e).x_()&&e.Ta.length>0}function Pa(e){Wa(e).start()}async function Ma(e){Wa(e).ra()}async function _a(e){const t=Wa(e);for(const n of e.Ta)t.ea(n.mutations)}async function Na(e,t,n){const r=e.Ta.shift(),i=Vr.from(r,t,n);await Ca(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Ta(e)}async function Oa(e,t){t&&Wa(e).X_&&await async function(e,t){if(function(e){return Xr(e)&&e!==O.ABORTED}(t.code)){const n=e.Ta.shift();Wa(e).B_(),await Ca(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Ta(e)}}(e,t),Ia(e)&&Pa(e)}async function ja(e,t){const n=N(e);n.asyncQueue.verifyOperationInProgress(),T(ua,"RemoteStore received new credentials");const r=ba(n);n.Ea.add(3),await pa(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await ha(n)}async function La(e,t){const n=N(e);t?(n.Ea.delete(2),await ha(n)):t||(n.Ea.add(2),await pa(n),n.Ra.set("Unknown"))}function Ba(e){return e.ma||(e.ma=function(e,t,n){const r=N(e);return r.sa(),new oa(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Da.bind(null,e),t_:xa.bind(null,e),r_:Ea.bind(null,e),H_:Sa.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),wa(e)?va(e):e.Ra.set("Unknown")):(await e.ma.stop(),ka(e))})),e.ma}function Wa(e){return e.fa||(e.fa=function(e,t,n){const r=N(e);return r.sa(),new aa(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Ma.bind(null,e),r_:Oa.bind(null,e),ta:_a.bind(null,e),na:Na.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Ta(e)):(await e.fa.stop(),e.Ta.length>0&&(T(ua,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Ua{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new L,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,a=new Ua(e,t,o,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new j(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qa(e,t){if(R("AsyncQueue","".concat(t,": ").concat(e)),Fe(e))return new j(O.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Ha{static emptySet(e){return new Ha(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ae.comparator(t.key,n.key):(e,t)=>ae.comparator(e.key,t.key),this.keyedMap=nr(),this.sortedSet=new ht(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ha))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ha;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class za{constructor(){this.ga=new ht(ae.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):P(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Va{constructor(e,t,n,r,i,o,a,s,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach(e=>{o.push({type:0,doc:e})}),new Va(e,t,Ha.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ka{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Ya{constructor(){this.queries=Ga(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=N(e),r=n.queries;n.queries=Ga(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new j(O.ABORTED,"Firestore shutting down"))}}function Ga(){return new Jn(e=>Kn(e),Vn)}async function Qa(e,t){const n=N(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.ba()&&t.Da()&&(r=2):(o=new Ka,r=t.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=qa(e,"Initialization of query '".concat(Yn(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,o),o.Sa.push(t),t.va(n.onlineState),o.wa&&t.Fa(o.wa)&&$a(n)}async function Xa(e,t){const n=N(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.Sa.indexOf(t);e>=0&&(o.Sa.splice(e,1),0===o.Sa.length?i=t.Da()?0:1:!o.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Za(e,t){const n=N(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&$a(n)}function Ja(e,t,n){const r=N(e),i=r.queries.get(t);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(t)}function $a(e){e.Ca.forEach(e=>{e.next()})}var es,ts;(ts=es||(es={})).Ma="default",ts.Cache="cache";class ns{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Va(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Va.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==es.Cache}}class rs{constructor(e){this.key=e}}class is{constructor(e){this.key=e}}class os{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=cr(),this.mutatedKeys=cr(),this.eu=Xn(e),this.tu=new Ha(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new za,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Gn(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),p=!0):this.su(c,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.eu(u,s)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(s||l)&&(a=!0)),p&&(u?(o=o.add(u),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:o,iu:n,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return P(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],s=0===this.Xa.size&&this.current&&!r?1:0,l=s!==this.Za;return this.Za=s,0!==o.length||l?{snapshot:new Va(this.query,e.tu,i,o,e.mutatedKeys,0===s,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new za,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=cr(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new is(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new rs(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=cr();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Va.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const as="SyncEngine";class ss{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ls{constructor(e){this.key=e,this.hu=!1}}class cs{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Jn(e=>Kn(e),Vn),this.Iu=new Map,this.Eu=new Set,this.du=new ht(ae.comparator),this.Au=new Map,this.Ru=new go,this.Vu={},this.mu=new Map,this.fu=to.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function us(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Is(e);let i;const o=r.Tu.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await hs(r,t,n,!0),i}async function ds(e,t){const n=Is(e);await hs(n,t,!0,!1)}async function hs(e,t,n,r){const i=await jo(e.localStore,Un(t)),o=i.targetId,a=e.sharedClientState.addLocalQueryTarget(o,n);let s;return r&&(s=await ps(e,t,o,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&ma(e.remoteStore,i),s}async function ps(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Bo(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const o=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o,a);return Ss(e,t.targetId,s.au),s.snapshot}(e,t,n,r);const o=await Bo(e.localStore,t,!0),a=new os(t,o.Qs),s=a.ru(o.documents),l=ai.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(s,e.isPrimaryClient,l);Ss(e,n,c.au);const u=new ss(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function ms(e,t,n){const r=N(e),i=r.Tu.get(t),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(e=>!Vn(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Lo(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&fa(r.remoteStore,i.targetId),xs(r,i.targetId)}).catch(Ce)):(xs(r,i.targetId),await Lo(r.localStore,i.targetId,!0))}async function fs(e,t){const n=N(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fa(n.remoteStore,r.targetId))}async function gs(e,t){const n=N(e);try{const e=await function(e,t){const n=N(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach((o,s)=>{const l=i.get(s);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,o.removedDocuments,s).next(()=>n.Pi.addMatchingKeys(e,o.addedDocuments,s)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(wt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Fo||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,o)&&a.push(n.Pi.updateTargetData(e,c))});let s=er(),l=cr();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(No(e,o,t.documentUpdates).next(e=>{s=e.ks,l=e.qs})),!r.isEqual(ve.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Te.waitFor(a).next(()=>o.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,s,l)).next(()=>s)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(_(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?_(r.hu,14607):e.removedDocuments.size>0&&(_(r.hu,42227),r.hu=!1))}),await Ts(n,e,t)}catch(e){await Ce(e)}}function ys(e,t,n){const r=N(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=N(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&$a(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function vs(e,t,n){const r=N(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),o=i&&i.key;if(o){let e=new ht(ae.comparator);e=e.insert(o,sn.newNoDocument(o,ve.min()));const n=cr().add(o),i=new oi(ve.min(),new Map,new ht(Q),e,n);await gs(r,i),r.du=r.du.remove(o),r.Au.delete(t),Cs(r)}else await Lo(r.localStore,t,!1).then(()=>xs(r,t,n)).catch(Ce)}async function ws(e,t){const n=N(e),r=t.batch.batchId;try{const e=await function(e,t){const n=N(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let a=Te.resolve();return o.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const o=n.docVersions.get(e);_(null!==o,48541),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=cr();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Ds(n,r,null),ks(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ts(n,e)}catch(e){await Ce(e)}}async function bs(e,t,n){const r=N(e);try{const e=await function(e,t){const n=N(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(_(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Ds(r,t,n),ks(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ts(r,e)}catch(n){await Ce(n)}}function ks(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Ds(e,t,n){const r=N(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function xs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Es(e,t)})}function Es(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(fa(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Cs(e))}function Ss(e,t,n){for(const r of n)r instanceof rs?(e.Ru.addReference(r.key,t),As(e,r)):r instanceof is?(T(as,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Es(e,r.key)):P(19791,{wu:r})}function As(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(T(as,"New document in limbo: "+n),e.Eu.add(r),Cs(e))}function Cs(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ae(re.fromString(t)),r=e.fu.next();e.Au.set(r,new ls(n)),e.du=e.du.insert(n,r),ma(e.remoteStore,new Ki(Un(jn(n.path)),r,"TargetPurposeLimboResolution",Ie.ce))}}async function Ts(e,t,n){const r=N(e),i=[],o=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,s)=>{a.push(r.pu(s,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(s.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(s.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Ao.As(s.targetId,e);o.push(t)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(e,t){const n=N(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Te.forEach(t,t=>Te.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Te.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Fe(e))throw e;T(Ro,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,o))}async function Rs(e,t){const n=N(e);if(!n.currentUser.isEqual(t)){T(as,"User change. New user:",t.toKey());const e=await Mo(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new j(O.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Ts(n,e.Ls)}}function Fs(e,t){const n=N(e),r=n.Au.get(t);if(r&&r.hu)return cr().add(r.key);{let e=cr();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Is(e){const t=N(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gs.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fs.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=vs.bind(null,t),t.Pu.H_=Za.bind(null,t.eventManager),t.Pu.yu=Ja.bind(null,t.eventManager),t}function Ps(e){const t=N(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ws.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bs.bind(null,t),t}class Ms{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ta(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Po(this.persistence,new To,e.initialUser,this.serializer)}Cu(e){return new Do(Eo.mi,this.serializer)}Du(e){return new qo}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ms.provider={build:()=>new Ms};class _s extends Ms{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){_(this.persistence.referenceDelegate instanceof So,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new ao(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?eo.withCacheSize(this.cacheSizeBytes):eo.DEFAULT;return new Do(e=>So.mi(e,t),this.serializer)}}class Ns{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ys(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Rs.bind(null,this.syncEngine),await La(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ya}createDatastore(e){const t=ta(e.databaseInfo.databaseId),n=function(e){return new $o(e)}(e.databaseInfo);return function(e,t,n,r){return new la(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new da(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>ys(this.syncEngine,e,0),Vo.v()?new Vo:new Ho)}createSyncEngine(e,t){return function(e,t,n,r,i,o,a){const s=new cs(e,t,n,r,i,o);return a&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=N(e);T(ua,"RemoteStore shutting down."),t.Ea.add(5),await pa(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Ns.provider={build:()=>new Ns};class Os{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):R("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const js="FirestoreClient";class Ls{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=E.UNAUTHENTICATED,this.clientId=G.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{T(js,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(T(js,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new L;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=qa(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Bs(e,t){e.asyncQueue.verifyOperationInProgress(),T(js,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Mo(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Ws(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Us(e);T(js,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>ja(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>ja(t.remoteStore,n)),e._onlineComponents=t}async function Us(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){T(js,"Using user provided OfflineComponentProvider");try{await Bs(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===O.FAILED_PRECONDITION||e.code===O.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;F("Error using user provided cache. Falling back to memory cache: "+n),await Bs(e,new Ms)}}else T(js,"Using default OfflineComponentProvider"),await Bs(e,new _s(void 0));return e._offlineComponents}async function qs(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(T(js,"Using user provided OnlineComponentProvider"),await Ws(e,e._uninitializedComponentsProvider._online)):(T(js,"Using default OnlineComponentProvider"),await Ws(e,new Ns))),e._onlineComponents}function Hs(e){return qs(e).then(e=>e.syncEngine)}async function zs(e){const t=await qs(e),n=t.eventManager;return n.onListen=us.bind(null,t.syncEngine),n.onUnlisten=ms.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ds.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=fs.bind(null,t.syncEngine),n}function Vs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new L;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new Os({next:s=>{o.Nu(),t.enqueueAndForget(()=>Xa(e,a));const l=s.docs.has(n);!l&&s.fromCache?i.reject(new j(O.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&s.fromCache&&r&&"server"===r.source?i.reject(new j(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),a=new ns(jn(n.path),o,{includeMetadataChanges:!0,qa:!0});return Qa(e,a)}(await zs(e),e.asyncQueue,t,n,r)),r.promise}function Ks(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new L;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new Os({next:n=>{o.Nu(),t.enqueueAndForget(()=>Xa(e,a)),n.fromCache&&"server"===r.source?i.reject(new j(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new ns(n,o,{includeMetadataChanges:!0,qa:!0});return Qa(e,a)}(await zs(e),e.asyncQueue,t,n,r)),r.promise}function Ys(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Gs=new Map,Qs="firestore.googleapis.com",Xs=!0;class Zs{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new j(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qs,this.ssl=Xs}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Xs;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=$i;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<ro)throw new j(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new j(O.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ys(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new j(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new j(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new j(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Js{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zs({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new j(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zs(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new W;switch(e.type){case"firstParty":return new z(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new j(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Gs.get(e);t&&(T("ComponentProvider","Removing Datastore"),Gs.delete(e),t.terminate())}(this),Promise.resolve()}}class $s{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new $s(this.firestore,e,this._query)}}class el{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new el(this.firestore,e,this._key)}toJSON(){return{type:el._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(me(t,el._jsonSchema))return new el(e,n||null,new ae(re.fromString(t.referencePath)))}}el._jsonSchemaVersion="firestore/documentReference/1.0",el._jsonSchema={type:pe("string",el._jsonSchemaVersion),referencePath:pe("string")};class tl extends $s{constructor(e,t,n){super(e,t,jn(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new el(this.firestore,null,new ae(e))}withConverter(e){return new tl(this.firestore,e,this._path)}}function nl(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,c.Ku)(e),se("collection","path",t),e instanceof Js){const n=re.fromString(t,...r);return ce(n),new tl(e,null,n)}{if(!(e instanceof el||e instanceof tl))throw new j(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(re.fromString(t,...r));return ce(n),new tl(e.firestore,null,n)}}function rl(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,c.Ku)(e),1===arguments.length&&(t=G.newId()),se("doc","path",t),e instanceof Js){const n=re.fromString(t,...r);return le(n),new el(e,null,new ae(n))}{if(!(e instanceof el||e instanceof tl))throw new j(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(re.fromString(t,...r));return le(n),new el(e.firestore,e instanceof tl?e.converter:null,new ae(n))}}const il="AsyncQueue";class ol{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new na(this,"async_queue_retry"),this._c=()=>{const e=ea();e&&T(il,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=ea();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ea();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new L;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fe(e))throw e;T(il,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,R("INTERNAL UNHANDLED ERROR: ",al(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Ua.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&P(47125,{Pc:al(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function al(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function sl(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class ll extends Js{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new ol,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ol(e),this._firestoreClient=void 0,await e}}}function cl(e,t){const n="object"==typeof e?e:(0,a.Sx)(),r="string"==typeof e?e:t||Pt,i=(0,a.j6)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(0,c.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=he(e,Js);const i=(0,c.zJ)(t),a=e._getSettings(),s=(0,o.A)((0,o.A)({},a),{},{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);i&&((0,c.gE)("https://".concat(l)),(0,c.P1)("Firestore",!0)),a.host!==Qs&&a.host!==l&&F("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=(0,o.A)((0,o.A)({},a),{},{host:l,ssl:i,emulatorOptions:r});if(!(0,c.bD)(u,s)&&(e._setSettings(u),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=E.MOCK_USER;else{var d;t=(0,c.Fy)(r.mockUserToken,null===(d=e._app)||void 0===d?void 0:d.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new j(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new E(i)}e._authCredentials=new U(new B(t,n))}}(i,...e)}return i}function ul(e){if(e._terminated)throw new j(O.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||dl(e),e._firestoreClient}function dl(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new It(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ys(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Ls(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class hl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hl(wt.fromBase64String(e))}catch(e){throw new j(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new hl(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:hl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(me(e,hl._jsonSchema))return hl.fromBase64String(e.bytes)}}hl._jsonSchemaVersion="firestore/bytes/1.0",hl._jsonSchema={type:pe("string",hl._jsonSchemaVersion),bytes:pe("string")};class pl{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new j(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oe(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ml{constructor(e){this._methodName=e}}class fl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new j(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new j(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Q(this._lat,e._lat)||Q(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fl._jsonSchemaVersion}}static fromJSON(e){if(me(e,fl._jsonSchema))return new fl(e.latitude,e.longitude)}}fl._jsonSchemaVersion="firestore/geoPoint/1.0",fl._jsonSchema={type:pe("string",fl._jsonSchemaVersion),latitude:pe("number"),longitude:pe("number")};class gl{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(me(e,gl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new gl(e.vectorValues);throw new j(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gl._jsonSchemaVersion="firestore/vectorValue/1.0",gl._jsonSchema={type:pe("string",gl._jsonSchemaVersion),vectorValues:pe("object")};const yl=/^__.*__$/;class vl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms):new jr(e,this.data,t,this.fieldTransforms)}}class wl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw P(40011,{Ac:e})}}class kl{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new kl((0,o.A)((0,o.A)({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(bl(this.Ac)&&yl.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Dl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ta(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new kl({Ac:e,methodName:t,Dc:n,path:oe.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xl(e){const t=e._freezeSettings(),n=ta(e._databaseId);return new Dl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function El(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(o.merge||o.mergeFields?2:0,t,n,i);Nl("Data must be an object, but it was:",a,r);const s=Ml(r,a);let l,c;if(o.merge)l=new yt(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Ol(t,r,n);if(!a.contains(i))throw new j(O.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Wl(e,i)||e.push(i)}l=new yt(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new vl(new on(s),l,c)}class Sl extends ml{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sl}}function Al(e,t,n){return new kl({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Cl extends ml{_toFieldTransform(e){return new Cr(e.path,new wr)}isEqual(e){return e instanceof Cl}}class Tl extends ml{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Al(this,e,!0),n=this.vc.map(e=>Pl(e,t)),r=new br(n);return new Cr(e.path,r)}isEqual(e){return e instanceof Tl&&(0,c.bD)(this.vc,e.vc)}}function Rl(e,t,n,r){const i=e.Cc(1,t,n);Nl("Data must be an object, but it was:",i,r);const o=[],a=on.empty();ut(r,(e,r)=>{const s=Ll(t,e,n);r=(0,c.Ku)(r);const l=i.yc(s);if(r instanceof Sl)o.push(s);else{const e=Pl(r,l);null!=e&&(o.push(s),a.set(s,e))}});const s=new yt(o);return new wl(a,s,i.fieldTransforms)}function Fl(e,t,n,r,i,o){const a=e.Cc(1,t,n),s=[Ol(t,r,n)],l=[i];if(o.length%2!=0)throw new j(O.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let c=0;c<o.length;c+=2)s.push(Ol(t,o[c])),l.push(o[c+1]);const u=[],d=on.empty();for(let p=s.length-1;p>=0;--p)if(!Wl(u,s[p])){const e=s[p];let t=l[p];t=(0,c.Ku)(t);const n=a.yc(e);if(t instanceof Sl)u.push(e);else{const r=Pl(t,n);null!=r&&(u.push(e),d.set(e,r))}}const h=new yt(u);return new wl(d,h,a.fieldTransforms)}function Il(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Pl(n,e.Cc(r?4:3,t))}function Pl(e,t){if(_l(e=(0,c.Ku)(e)))return Nl("Unsupported field value:",t,e),Ml(e,t);if(e instanceof ml)return function(e,t){if(!bl(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Pl(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,c.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return mr(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ye.fromDate(e);return{timestampValue:wi(t.serializer,n)}}if(e instanceof ye){const n=new ye(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:wi(t.serializer,n)}}if(e instanceof fl)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof hl)return{bytesValue:bi(t.serializer,e._byteString)};if(e instanceof el){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:xi(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof gl)return function(e,t){return{mapValue:{fields:{[_t]:{stringValue:Lt},[Bt]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return hr(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(de(e)))}(e,t)}function Ml(e,t){const n={};return dt(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ut(e,(e,r)=>{const i=Pl(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function _l(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ye||e instanceof fl||e instanceof hl||e instanceof el||e instanceof ml||e instanceof gl)}function Nl(e,t,n){if(!_l(n)||!ue(n)){const r=de(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Ol(e,t,n){if((t=(0,c.Ku)(t))instanceof pl)return t._internalPath;if("string"==typeof t)return Ll(e,t);throw Bl("Field path arguments must be of type string or ",e,!1,void 0,n)}const jl=new RegExp("[~\\*/\\[\\]]");function Ll(e,t,n){if(t.search(jl)>=0)throw Bl("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new pl(...t.split("."))._internalPath}catch(Nt){throw Bl("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Bl(e,t,n,r,i){const o=r&&!r.isEmpty(),a=void 0!==i;let s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new j(O.INVALID_ARGUMENT,s+e+l)}function Wl(e,t){return e.some(e=>e.isEqual(t))}class Ul{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new el(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ql(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hl("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ql extends Ul{data(){return super.data()}}function Hl(e,t){return"string"==typeof t?Ll(e,t):t instanceof pl?t._internalPath:t._delegate._internalPath}function zl(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new j(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vl{}class Kl extends Vl{}function Yl(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof Vl&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Xl).length,n=e.filter(e=>e instanceof Gl).length;if(t>1||t>0&&n>0)throw new j(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Gl extends Kl{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Gl(e,t,n)}_apply(e){const t=this._parse(e);return $l(e._query,t),new $s(e.firestore,e.converter,Hn(e._query,t))}_parse(e){const t=xl(e.firestore),n=function(e,t,n,r,i,o,a){let s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new j(O.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){Jl(a,o);const t=[];for(const n of a)t.push(Zl(r,e,n));s={arrayValue:{values:t}}}else s=Zl(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Jl(a,o),s=Il(n,t,a,"in"===o||"not-in"===o);return mn.create(i,o,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Ql(e,t,n){const r=t,i=Hl("where",e);return Gl._create(i,r,n)}class Xl extends Vl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Xl(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)$l(n,i),n=Hn(n,i)}(e._query,t),new $s(e.firestore,e.converter,Hn(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Zl(e,t,n){if("string"==typeof(n=(0,c.Ku)(n))){if(""===n)throw new j(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bn(t)&&-1!==n.indexOf("/"))throw new j(O.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(re.fromString(n));if(!ae.isDocumentKey(r))throw new j(O.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Qt(e,new ae(r))}if(n instanceof el)return Qt(e,n._key);throw new j(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(de(n),"."))}function Jl(e,t){if(!Array.isArray(e)||0===e.length)throw new j(O.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function $l(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new j(O.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new j(O.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class ec{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Wt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw P(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ut(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Bt].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>Dt(e.doubleValue));return new gl(n)}convertGeoPoint(e){return new fl(Dt(e.latitude),Dt(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Rt(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ft(e));default:return null}}convertTimestamp(e){const t=kt(e);return new ye(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=re.fromString(e);_(Vi(n),9688,{name:e});const r=new Mt(n.get(1),n.get(3)),i=new ae(n.popFirst(5));return r.isEqual(t)||R("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function tc(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class nc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rc extends Ul{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Hl("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new j(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=rc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}rc._jsonSchemaVersion="firestore/documentSnapshot/1.0",rc._jsonSchema={type:pe("string",rc._jsonSchemaVersion),bundleSource:pe("string","DocumentSnapshot"),bundleName:pe("string"),bundle:pe("string")};class ic extends rc{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class oc{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new nc(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new ic(this._firestore,this._userDataWriter,n.key,n,new nc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new j(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new ic(e._firestore,e._userDataWriter,n.doc.key,n.doc,new nc(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new ic(e._firestore,e._userDataWriter,t.doc.key,t.doc,new nc(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:ac(t.type),doc:r,oldIndex:i,newIndex:o}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new j(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=oc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=G.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ac(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return P(61501,{type:e})}}function sc(e){e=he(e,el);const t=he(e.firestore,ll);return Vs(ul(t),e._key).then(n=>fc(t,e,n))}oc._jsonSchemaVersion="firestore/querySnapshot/1.0",oc._jsonSchema={type:pe("string",oc._jsonSchemaVersion),bundleSource:pe("string","QuerySnapshot"),bundleName:pe("string"),bundle:pe("string")};class lc extends ec{constructor(e){super(),this.firestore=e}convertBytes(e){return new hl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new el(this.firestore,null,t)}}function cc(e){e=he(e,$s);const t=he(e.firestore,ll),n=ul(t),r=new lc(t);return zl(e._query),Ks(n,e._query).then(n=>new oc(t,r,e,n))}function uc(e,t,n){e=he(e,el);const r=he(e.firestore,ll),i=tc(e.converter,t,n);return mc(r,[El(xl(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Rr.none())])}function dc(e,t,n){e=he(e,el);const r=he(e.firestore,ll),i=xl(r);let o;for(var a=arguments.length,s=new Array(a>3?a-3:0),l=3;l<a;l++)s[l-3]=arguments[l];return o="string"==typeof(t=(0,c.Ku)(t))||t instanceof pl?Fl(i,"updateDoc",e._key,t,n,s):Rl(i,"updateDoc",e._key,t),mc(r,[o.toMutation(e._key,Rr.exists(!0))])}function hc(e){return mc(he(e.firestore,ll),[new qr(e._key,Rr.none())])}function pc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=(0,c.Ku)(e);let i={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof n[o]||sl(n[o])||(i=n[o++]);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(sl(n[o])){var s,l,u;const e=n[o];n[o]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[o+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[o+2]=null===(u=e.complete)||void 0===u?void 0:u.bind(e)}let d,h,p;if(e instanceof el)h=he(e.firestore,ll),p=jn(e._key.path),d={next:t=>{n[o]&&n[o](fc(h,e,t))},error:n[o+1],complete:n[o+2]};else{const t=he(e,$s);h=he(t.firestore,ll),p=t._query;const r=new lc(h);d={next:e=>{n[o]&&n[o](new oc(h,r,t,e))},error:n[o+1],complete:n[o+2]},zl(e._query)}return function(e,t,n,r){const i=new Os(r),o=new ns(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>Qa(await zs(e),o)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>Xa(await zs(e),o))}}(ul(h),p,a,d)}function mc(e,t){return function(e,t){const n=new L;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Ps(e);try{const e=await function(e,t){const n=N(e),r=ye.now(),i=t.reduce((e,t)=>e.add(t.key),cr());let o,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let s=er(),l=cr();return n.Ns.getEntries(e,i).next(e=>{s=e,s.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,s)).next(i=>{o=i;const a=[];for(const e of t){const t=Nr(e,o.get(e.key).overlayedDocument);null!=t&&a.push(new Lr(e.key,t,an(t.value.mapValue),Rr.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:rr(o)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new ht(Q)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Ts(r,e.changes),await Ta(r.remoteStore)}catch(e){const t=qa(e,"Failed to persist write");n.reject(t)}}(await Hs(e),t,n)),n.promise}(ul(e),t)}function fc(e,t,n){const r=n.docs.get(t._key),i=new lc(e);return new rc(e,i,t._key,r,new nc(n.hasPendingWrites,n.fromCache),t.converter)}function gc(){return new Sl("deleteField")}function yc(){return new Cl("serverTimestamp")}function vc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Tl("arrayUnion",t)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){S=e}(a.MF),(0,a.om)(new s.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const a=e.getProvider("app").getImmediate(),s=new ll(new q(e.getProvider("auth-internal")),new K(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new j(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mt(e.options.projectId,t)}(a,r),a);return i=(0,o.A)({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),(0,a.KO)(D,x,e),(0,a.KO)(D,x,"esm2020")}()},672:(e,t,n)=>{var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var a={d:{f:o,r:function(){throw Error(i(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},s=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,o="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:o}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:o,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},705:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function o(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{A:()=>o})},773:(e,t,n)=>{n.d(t,{I$:()=>c,TA:()=>s,Z0:()=>a,ly:()=>i,tS:()=>o});const r={TRAINING_SYSTEMS:{practical_periodization:"Practical Periodization",high_volume:"High Volume Training",polarized:"Polarized Training",base_building:"Base Building",competitive:"Competitive Training"},EQUIPMENT:{cyclete:"Cyclete",elliptigo:"ElliptiGO",runeq:"RunEQ",running:"Running",bike:"Bike",standup_bike:"Stand-up Bike"},PHASES:{base:"Base Phase",build:"Build Phase",peak:"Peak Phase",taper:"Taper Phase",recovery:"Recovery Phase"},WORKOUT_TYPES:{easy:"Easy Run",tempo:"Tempo Run",intervals:"Intervals",long_run:"Long Run",hills:"Hill Workout",recovery:"Recovery",brick:"Brick Workout",bike:"Bike Workout"},INTENSITY_LABELS:{easy:"Easy",moderate:"Moderate",comfortablyHard:"Comfortably Hard",comfortably_hard:"Comfortably Hard",thresholdPace:"Threshold Pace",threshold_pace:"Threshold Pace",tempoPlus:"Tempo Plus",tempo_plus:"Tempo Plus",hard:"Hard",very_hard:"Very Hard",veryHard:"Very Hard",max_effort:"Maximum Effort",maxEffort:"Maximum Effort"}};function i(e){return e?r.TRAINING_SYSTEMS[e]||l(e.replace(/_/g," ")):""}function o(e){if(!e)return"";const t=e.toLowerCase();return r.EQUIPMENT[t]||l(e)}function a(e){return e?r.PHASES[e.toLowerCase()]||l(e):""}function s(e){if(!e)return"";if(r.INTENSITY_LABELS[e])return r.INTENSITY_LABELS[e];let t=e.replace(/([a-z])([A-Z])/g,"$1 $2");return t=t.replace(/_/g," "),t===e&&e.includes(" ")&&e.charAt(0)===e.charAt(0).toUpperCase()?e:l(t)}function l(e){if(!e)return"";const t=["a","an","and","as","at","but","by","for","in","of","on","or","the","to","with"];return e.toLowerCase().split(" ").map((e,n)=>0===n?e.charAt(0).toUpperCase()+e.slice(1):t.includes(e)?e:e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function c(e){return e?e.replace(/max hr/gi,"Max HR").replace(/max heart rate/gi,"Max Heart Rate").replace(/hr/gi,"HR"):""}},776:(e,t,n)=>{n.d(t,{cY:()=>f,FA:()=>N,g:()=>_,dM:()=>M,u:()=>l,Uj:()=>s,p9:()=>X,Fy:()=>v,tD:()=>H,bD:()=>L,hp:()=>q,T9:()=>p,Tj:()=>d,yU:()=>h,XA:()=>m,mS:()=>c,Ku:()=>Z,ZQ:()=>D,sr:()=>A,zJ:()=>g,c1:()=>S,Im:()=>j,lT:()=>T,zW:()=>I,jZ:()=>x,lV:()=>C,nr:()=>R,Ov:()=>F,gE:()=>y,Am:()=>W,I9:()=>U,P1:()=>k,eX:()=>P});var r=n(379);const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,a=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;s||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==l)throw new a;const c=t<<2|o>>4;if(r.push(c),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==l){const e=s<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s=function(e){return function(e){const t=i(e);return o.encodeByteArray(t,!0)}(e).replace(/\./g,"")},l=function(e){try{return o.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const u=()=>{try{return c().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&l(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},d=e=>{var t;return null===(t=u())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},h=e=>{const t=d(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},p=()=>{var e;return null===(e=u())||void 0===e?void 0:e.config},m=e=>{var t;return null===(t=u())||void 0===t?void 0:t["_".concat(e)]};class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function g(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function y(e){return(await fetch(e,{credentials:"include"})).ok}function v(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=(0,r.A)({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[s(JSON.stringify({alg:"none",type:"JWT"})),s(JSON.stringify(a)),""].join(".")}const w={};let b=!1;function k(e,t){if("undefined"===typeof window||"undefined"===typeof document||!g(window.location.host)||w[e]===t||w[e]||b)return;function n(e){return"__firebase__banner__".concat(e)}w[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(w))w[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function o(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{b=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),s=n("learnmore"),l=document.getElementById(s)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,s);const n=o();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function D(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function x(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(D())}function E(){var e;const t=null===(e=u())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function S(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function A(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function C(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function T(){const e=D();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function R(){return!E()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function F(){return!E()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function I(){try{return"object"===typeof indexedDB}catch(e){return!1}}function P(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function M(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class _ extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,_.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,N.prototype.create)}}class N{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(O,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new _(n,o,t)}}const O=/\{\$([^}]+)}/g;function j(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function L(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(B(n)&&B(o)){if(!L(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function B(e){return null!==e&&"object"===typeof e}function W(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function U(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function q(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function H(e,t){const n=new z(e,t);return n.subscribe.bind(n)}class z{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V(){}const K=1e3,Y=2,G=144e5,Q=.5;function X(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:K)*Math.pow(t,e),r=Math.round(Q*n*(Math.random()-.5)*2);return Math.min(G,n+r)}function Z(e){return e&&e._delegate?e._delegate:e}},799:(e,t,n)=>{n.d(t,{P2:()=>y});var r=n(379);const i=(e,t)=>t.some(t=>e instanceof t);let o,a;const s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap;let h={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return l.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return f(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(g(this),n),f(s.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(e.apply(g(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(g(this),t,...r);return c.set(o,t.sort?t.sort():[t]),f(o)}}function m(e){return"function"===typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(l.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});l.set(e,t)}(e),i(e,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,h):e)}function f(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(f(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&s.set(t,e)}).catch(()=>{}),d.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=m(e);return t!==e&&(u.set(e,t),d.set(t,e)),t}const g=e=>d.get(e);function y(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=f(a);return r&&a.addEventListener("upgradeneeded",e=>{r(f(a.result),e.oldVersion,e.newVersion,f(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}const v=["get","getKey","getAll","getAllKeys","count"],w=["put","add","delete","clear"],b=new Map;function k(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(b.get(t))return b.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=w.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!v.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),i&&t.done]))[0]};return b.set(t,o),o}h=(e=>(0,r.A)((0,r.A)({},e),{},{get:(t,n,r)=>k(t,n)||e.get(t,n,r),has:(t,n)=>!!k(t,n)||e.has(t,n)}))(h)},853:(e,t,n)=>{e.exports=n(896)},887:(e,t,n)=>{n.d(t,{generateWeekWorkouts:()=>m});var r=n(187),i=n(483),o=n(44),a=n(169),s=n(773),l=n(452);const c=new r.s,u=new i.e,d=new o.g,h=new a.c,p=(e,t,n)=>{const r={Easy:3,Moderate:4,Hard:5,"Very Hard":5}[t]||4;return{name:"".concat(r," RunEQ Miles on ").concat((0,s.tS)(n)),description:"Ride ".concat(r," RunEQ miles on your ").concat((0,s.tS)(n)," @ steady aerobic effort")}},m=(e,t)=>{l.A.log("\ud83d\udd0d generateWeekWorkouts - profile:",t),l.A.log("\ud83d\udeb4 preferredBikeDays:",null===t||void 0===t?void 0:t.preferredBikeDays),l.A.log("\ud83d\udcc0 localStorage userProfile:",localStorage.getItem("runeq_userProfile")),l.A.log("\ud83d\udcc5 localStorage trainingPlan:",localStorage.getItem("runeq_trainingPlan"));const n={tempo:[c.getRandomWorkout("TRADITIONAL_TEMPO"),c.getRandomWorkout("ALTERNATING_TEMPO"),c.getRandomWorkout("PROGRESSIVE_TEMPO"),c.getRandomWorkout("TEMPO_INTERVALS")],intervals:[u.getRandomWorkout("SHORT_SPEED"),u.getRandomWorkout("VO2_MAX"),u.getRandomWorkout("LONG_INTERVALS")],hills:[h.getRandomWorkout("short_power"),h.getRandomWorkout("long_strength"),h.getRandomWorkout("hill_circuits")],longRuns:[d.getRandomWorkout("TRADITIONAL_EASY"),d.getRandomWorkout("PROGRESSIVE_RUNS"),d.getRandomWorkout("MIXED_PACE_LONG"),d.getRandomWorkout("RACE_SIMULATION")]},r=[{tuesday:"tempo",saturday:"intervals",sunday:"longRuns"},{tuesday:"hills",saturday:"tempo",sunday:"longRuns"},{tuesday:"intervals",saturday:"hills",sunday:"longRuns"},{tuesday:"tempo",saturday:"intervals",sunday:"longRuns"}],i=r[(e-1)%r.length],o=n[i.tuesday][(e-1)%n[i.tuesday].length],a=n[i.saturday][(e-1)%n[i.saturday].length],s=n[i.sunday][(e-1)%n[i.sunday].length],m=e=>({tempo:{type:"tempo",focus:"Lactate Threshold"},intervals:{type:"intervals",focus:"Speed & Power"},hills:{type:"hills",focus:"Strength & Power"},longRuns:{type:"longRun",focus:"Endurance"}}[e]||{type:"easy",focus:"Recovery"}),f=m(i.tuesday),g=m(i.saturday),y=m(i.sunday),v=e=>e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():"",w=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];let b=((null===t||void 0===t?void 0:t.restDays)||[]).map(v);const k=((null===t||void 0===t?void 0:t.hardSessionDays)||(null===t||void 0===t?void 0:t.qualityDays)||[]).map(v),D=v((null===t||void 0===t?void 0:t.longRunDay)||"Sunday"),x=((null===t||void 0===t?void 0:t.preferredBikeDays)||[]).map(v),E=((null===t||void 0===t?void 0:t.availableDays)||[]).map(v);0===b.length&&E.length>0&&(b=w.filter(e=>!E.includes(e)&&!x.includes(e)&&e!==D&&!k.includes(e)),l.A.log("\ud83d\udcc5 Calculated rest days from availableDays:",b)),l.A.log("\ud83d\udcc5 User schedule preferences:",{restDays:b,hardDays:k,longRunDay:D,bikeDays:x,availableDays:E,rawRestDays:null===t||void 0===t?void 0:t.restDays,rawHardDays:(null===t||void 0===t?void 0:t.hardSessionDays)||(null===t||void 0===t?void 0:t.qualityDays),rawAvailableDays:null===t||void 0===t?void 0:t.availableDays});const S=e=>{var t;if(null!==e&&void 0!==e&&e.distance)return e.distance;if(null!==e&&void 0!==e&&null!==(t=e.workoutDetails)&&void 0!==t&&t.distance)return e.workoutDetails.distance;const n=((null===e||void 0===e?void 0:e.description)||"").match(/(\d+(?:\.\d+)?)\s*(?:mile|miles|mi)/i);return n?parseFloat(n[1]):null},A=e=>{if(l.A.log("  Checking ".concat(e,": restDays=").concat(b.includes(e),", hardDays=").concat(k.includes(e),", bikeDays=").concat(x.includes(e),", longRunDay=").concat(e===D)),b.includes(e))return l.A.log("    \u2705 ".concat(e," is a REST DAY")),{day:e,type:"rest",workout:{name:"Rest Day",description:"Complete rest or light cross-training"},focus:"Recovery",completed:!1};if(x.includes(e)){const n=k.includes(e)?"Hard":"Moderate";return{day:e,type:"bike",workout:p(0,n,t.standUpBikeType),focus:k.includes(e)?"Aerobic Power":"Aerobic Base",completed:!1,equipmentSpecific:!0}}if(e===D){let n=S(s);if(!n&&s.description){const e=s.description.match(/(\d+(?:\.\d+)?)\s*(?:mile|miles|mi)/i);e&&(n=parseFloat(e[1]),l.A.log("  \ud83d\udccf Extracted long run distance from description: ".concat(n," miles")))}if(!n&&(null!==t&&void 0!==t&&t.currentLongRunDistance||null!==t&&void 0!==t&&t.currentLongRun)&&(n=parseFloat(t.currentLongRunDistance||t.currentLongRun),l.A.log("  \ud83d\udccf Using user's current long run distance from profile: ".concat(n," miles"))),!n){const e=(null===t||void 0===t?void 0:t.currentWeeklyMileage)||20;n=Math.round(.25*e),l.A.log("  \u26a0\ufe0f No distance found for long run, using default: ".concat(n," miles (25% of ").concat(e," weekly miles)"))}const r={name:s.name,description:s.description};return n&&(r.distance=n,s.description&&!s.description.match(/\d+\s*(?:mile|miles|mi)/i)&&(r.description="".concat(n," miles - ").concat(s.description))),{day:e,type:y.type,workout:r,focus:y.focus,completed:!1,workoutDetails:s,distance:n}}if(k.includes(e)){const t=0===k.indexOf(e)?o:a,n=0===k.indexOf(e)?f:g,r=S(t),i={name:t.name,description:t.description};return r&&(i.distance=r),{day:e,type:n.type,workout:i,focus:n.focus,completed:!1,workoutDetails:t,distance:r}}return{day:e,type:"easy",workout:{name:"Easy Run",description:"Conversational pace, aerobic base building",distance:4},focus:"Recovery",completed:!1,distance:4}};return[A("Monday"),A("Tuesday"),A("Wednesday"),A("Thursday"),A("Friday"),A("Saturday"),A("Sunday")]}},889:(e,t,n)=>{n.d(t,{Uz:()=>C,Qg:()=>T});var r=n(150),i=n(776),o=n(606);const a="type.googleapis.com/google.protobuf.Int64Value",s="type.googleapis.com/google.protobuf.UInt64Value";function l(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function c(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(e=>c(e));if("function"===typeof e||"object"===typeof e)return l(e,e=>c(e));throw new Error("Data cannot be encoded in JSON: "+e)}function u(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case a:case s:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(e=>u(e)):"function"===typeof e||"object"===typeof e?l(e,e=>u(e)):e}const d="functions",h={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class p extends i.g{constructor(e,t,n){super("".concat(d,"/").concat(e),t||""),this.details=n,Object.setPrototypeOf(this,p.prototype)}}function m(e,t){let n,r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r;try{const e=t&&t.error;if(e){const t=e.status;if("string"===typeof t){if(!h[t])return new p("internal","internal");r=h[t],i=t}const o=e.message;"string"===typeof o&&(i=o),n=e.details,void 0!==n&&(n=u(n))}}catch(o){}return"ok"===r?null:new p(r,i,n)}class f{constructor(e,t,n,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,(0,r.xZ)(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(e=>this.auth=e,()=>{}),this.messaging||n.get().then(e=>this.messaging=e,()=>{}),this.appCheck||null===i||void 0===i||i.get().then(e=>this.appCheck=e,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null===e||void 0===e?void 0:e.accessToken}catch(e){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(e){return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const g="us-central1",y=/^data: (.*?)(?:\n|$)/;class v{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return fetch(...arguments)};this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new f(e,t,n,r),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{const e=new URL(i);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=g}catch(a){this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){const n=this.emulatorOrigin;return"".concat(n,"/").concat(t,"/").concat(this.region,"/").concat(e)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}function w(e,t,n){const r=r=>function(e,t,n,r){const i=e._url(t);return x(e,i,n,r)}(e,t,r,n||{});return r.stream=(n,r)=>function(e,t,n,r){const i=e._url(t);return E(e,i,n,r||{})}(e,t,n,r),r}function b(e){return e.emulatorOrigin&&(0,i.zJ)(e.emulatorOrigin)?"include":void 0}async function k(e,t,n,r,i){let o;n["Content-Type"]="application/json";try{o=await r(e,{method:"POST",body:JSON.stringify(t),headers:n,credentials:b(i)})}catch(s){return{status:0,json:null}}let a=null;try{a=await o.json()}catch(s){}return{status:o.status,json:a}}async function D(e,t){const n={},r=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),null!==r.appCheckToken&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}async function x(e,t,n,r){const i={data:n=c(n)},o=await D(e,r),a=function(e){let t=null;return{promise:new Promise((n,r)=>{t=setTimeout(()=>{r(new p("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}(r.timeout||7e4),s=await Promise.race([k(t,i,o,e.fetchImpl,e),a.promise,e.cancelAllRequests]);if(a.cancel(),!s)throw new p("cancelled","Firebase Functions instance was deleted.");const l=m(s.status,s.json);if(l)throw l;if(!s.json)throw new p("internal","Response is not valid JSON object.");let d=s.json.data;if("undefined"===typeof d&&(d=s.json.result),"undefined"===typeof d)throw new p("internal","Response is missing data field.");return{data:u(d)}}async function E(e,t,n,r){var i;const o={data:n=c(n)},a=await D(e,r);let s,l,d;a["Content-Type"]="application/json",a.Accept="text/event-stream";try{s=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(o),headers:a,signal:null===r||void 0===r?void 0:r.signal,credentials:b(e)})}catch(g){if(g instanceof Error&&"AbortError"===g.name){const e=new p("cancelled","Request was cancelled.");return{data:Promise.reject(e),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(e)})}}}const e=m(0,null);return{data:Promise.reject(e),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(e)})}}}const h=new Promise((e,t)=>{l=e,d=t});null===r||void 0===r||null===(i=r.signal)||void 0===i||i.addEventListener("abort",()=>{const e=new p("cancelled","Request was cancelled.");d(e)});const f=function(e,t,n,r){const i=(e,r)=>{const i=e.match(y);if(!i)return;const o=i[1];try{const e=JSON.parse(o);if("result"in e)return void t(u(e.result));if("message"in e)return void r.enqueue(u(e.message));if("error"in e){const t=m(0,e);return r.error(t),void n(t)}}catch(a){if(a instanceof p)return r.error(a),void n(a)}},o=new TextDecoder;return new ReadableStream({start(t){let a="";return s();async function s(){if(null!==r&&void 0!==r&&r.aborted){const e=new p("cancelled","Request was cancelled");return t.error(e),n(e),Promise.resolve()}try{const{value:l,done:c}=await e.read();if(c)return a.trim()&&i(a.trim(),t),void t.close();if(null!==r&&void 0!==r&&r.aborted){const r=new p("cancelled","Request was cancelled");return t.error(r),n(r),void await e.cancel()}a+=o.decode(l,{stream:!0});const u=a.split("\n");a=u.pop()||"";for(const e of u)e.trim()&&i(e.trim(),t);return s()}catch(l){const e=l instanceof p?l:m(0,null);t.error(e),n(e)}}},cancel:()=>e.cancel()})}(s.body.getReader(),l,d,null===r||void 0===r?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const e=f.getReader();return{async next(){const{value:t,done:n}=await e.read();return{value:t,done:n}},return:async()=>(await e.cancel(),{done:!0,value:void 0})}}},data:h}}const S="@firebase/functions",A="0.13.1";function C(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;const n=(0,r.j6)((0,i.Ku)(e),d).getImmediate({identifier:t}),o=(0,i.yU)("functions");return o&&function(e,t,n){!function(e,t,n){const r=(0,i.zJ)(t);e.emulatorOrigin="http".concat(r?"s":"","://").concat(t,":").concat(n),r&&((0,i.gE)(e.emulatorOrigin+"/backends"),(0,i.P1)("Functions",!0))}((0,i.Ku)(e),t,n)}(n,...o),n}function T(e,t,n){return w((0,i.Ku)(e),t,n)}var R;(0,r.om)(new o.uA(d,(e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("messaging-internal"),a=e.getProvider("app-check-internal");return new v(r,i,o,a,n)},"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(S,A,R),(0,r.KO)(S,A,"esm2020")},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,p=3,m=!1,f=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,w="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function D(e){if(g=!1,k(e),!f)if(null!==r(c))f=!0,E||(E=!0,x());else{var t=r(u);null!==t&&P(D,t.startTime-e)}}var x,E=!1,S=-1,A=5,C=-1;function T(){return!!y||!(t.unstable_now()-C<A)}function R(){if(y=!1,E){var e=t.unstable_now();C=e;var n=!0;try{e:{f=!1,g&&(g=!1,w(S),S=-1),m=!0;var o=p;try{t:{for(k(e),h=r(c);null!==h&&!(h.expirationTime>e&&T());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var s=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){h.callback=s,k(e),n=!0;break t}h===r(c)&&i(c),k(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&P(D,l.startTime-e),n=!1}}break e}finally{h=null,p=o,m=!1}n=void 0}}finally{n?x():E=!1}}}if("function"===typeof b)x=function(){b(R)};else if("undefined"!==typeof MessageChannel){var F=new MessageChannel,I=F.port2;F.port1.onmessage=R,x=function(){I.postMessage(null)}}else x=function(){v(R,0)};function P(e,n){S=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(w(S),S=-1):g=!0,P(D,o-a))):(e.sortIndex=s,n(c,e),f||m||(f=!0,E||(E=!0,x()))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},965:(e,t,n)=>{n.d(t,{$b:()=>i,Vy:()=>c});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const o={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},a=i.INFO,s={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=s[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?o[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}},986:(e,t,n)=>{function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,{A:()=>r})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".6069e135.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="run-plus-plans:";n.l=(r,i,o,a)=>{if(e[r])e[r].push(i);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach(e=>e(n)),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,o,a=r[0],s=r[1],l=r[2],c=0;if(a.some(t=>0!==e[t])){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)o=a[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkrun_plus_plans=self.webpackChunkrun_plus_plans||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r={};n.r(r),n.d(r,{boolean:()=>ac,booleanish:()=>sc,commaOrSpaceSeparated:()=>hc,commaSeparated:()=>dc,number:()=>cc,overloadedBoolean:()=>lc,spaceSeparated:()=>uc});var i={};n.r(i),n.d(i,{attentionMarkers:()=>Wd,contentInitial:()=>_d,disable:()=>Ud,document:()=>Md,flow:()=>Od,flowInitial:()=>Nd,insideSpan:()=>Bd,string:()=>jd,text:()=>Ld});var o,a=n(43),s=n.t(a,2),l=n(391),c=n(379);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(o||(o={}));const d="popstate";function h(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function p(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function m(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?y(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function g(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function y(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function v(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,l=o.Pop,c=null,p=y();function y(){return(s.state||{idx:null}).idx}function v(){l=o.Pop;let e=y(),t=null==e?null:e-p;p=e,c&&c({action:l,location:b.location,delta:t})}function w(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:g(e);return n=n.replace(/ $/,"%20"),h(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==p&&(p=0,s.replaceState(u({},s.state,{idx:p}),""));let b={get action(){return l},get location(){return e(i,s)},listen(e){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(d,v),c=e,()=>{i.removeEventListener(d,v),c=null}},createHref:e=>t(i,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=o.Push;let r=f(b.location,e,t);n&&n(r,e),p=y()+1;let u=m(r,p),d=b.createHref(r);try{s.pushState(u,"",d)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;i.location.assign(d)}a&&c&&c({action:l,location:b.location,delta:1})},replace:function(e,t){l=o.Replace;let r=f(b.location,e,t);n&&n(r,e),p=y();let i=m(r,p),u=b.createHref(r);s.replaceState(i,"",u),a&&c&&c({action:l,location:b.location,delta:0})},go:e=>s.go(e)};return b}var w;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(w||(w={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){return void 0===n&&(n="/"),k(e,t,n,!1)}function k(e,t,n,r){let i=N(("string"===typeof t?y(t):t).pathname||"/",n);if(null==i)return null;let o=D(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let a=null;for(let s=0;null==a&&s<o.length;++s){let e=_(i);a=P(o[s],e,r)}return a}function D(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(h(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=W([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(h(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),D(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:I(s,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of x(e.path))i(e,t,r);else i(e,t)}),t}function x(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=x(r.join("/")),s=[];return s.push(...a.map(e=>""===e?o:[o,e].join("/"))),i&&s.push(...a),s.map(t=>e.startsWith("/")&&""===t?"/":t)}const E=/^:[\w-]+$/,S=3,A=2,C=1,T=10,R=-2,F=e=>"*"===e;function I(e,t){let n=e.split("/"),r=n.length;return n.some(F)&&(r+=R),t&&(r+=A),n.filter(e=>!F(e)).reduce((e,t)=>e+(E.test(t)?S:""===t?C:T),r)}function P(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:W([o,u.pathname]),pathnameBase:U(W([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=W([o,u.pathnameBase]))}return a}function M(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);p("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:o,pathnameBase:a,pattern:e}}function _(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return p(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function N(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function O(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function j(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function L(e,t){let n=j(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function B(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=y(e):(i=u({},e),h(!i.pathname||!i.pathname.includes("?"),O("?","pathname","search",i)),h(!i.pathname||!i.pathname.includes("#"),O("#","pathname","hash",i)),h(!i.search||!i.search.includes("#"),O("#","search","hash",i)));let o,a=""===e||""===i.pathname,s=a?"/":i.pathname;if(null==s)o=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?y(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:q(r),hash:H(i)}}(i,o),c=s&&"/"!==s&&s.endsWith("/"),d=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}const W=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),q=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",H=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const V=["post","put","patch","delete"],K=(new Set(V),["get",...V]);new Set(K),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y.apply(this,arguments)}const G=a.createContext(null);const Q=a.createContext(null);const X=a.createContext(null);const Z=a.createContext(null);const J=a.createContext({outlet:null,matches:[],isDataRoute:!1});const $=a.createContext(null);function ee(){return null!=a.useContext(Z)}function te(){return ee()||h(!1),a.useContext(Z).location}function ne(e){a.useContext(X).static||a.useLayoutEffect(e)}function re(){let{isDataRoute:e}=a.useContext(J);return e?function(){let{router:e}=he(ue.UseNavigateStable),t=me(de.UseNavigateStable),n=a.useRef(!1);return ne(()=>{n.current=!0}),a.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,Y({fromRouteId:t},i)))},[e,t])}():function(){ee()||h(!1);let e=a.useContext(G),{basename:t,future:n,navigator:r}=a.useContext(X),{matches:i}=a.useContext(J),{pathname:o}=te(),s=JSON.stringify(L(i,n.v7_relativeSplatPath)),l=a.useRef(!1);ne(()=>{l.current=!0});let c=a.useCallback(function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let a=B(n,JSON.parse(s),o,"path"===i.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:W([t,a.pathname])),(i.replace?r.replace:r.push)(a,i.state,i)},[t,r,s,o,e]);return c}()}function ie(e,t,n,r){ee()||h(!1);let{navigator:i}=a.useContext(X),{matches:s}=a.useContext(J),l=s[s.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,p=te();if(t){var m;let e="string"===typeof t?y(t):t;"/"===u||(null==(m=e.pathname)?void 0:m.startsWith(u))||h(!1),d=e}else d=p;let f=d.pathname||"/",g=f;if("/"!==u){let e=u.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=b(e,{pathname:g});let w=ce(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:W([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:W([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,n,r);return t&&w?a.createElement(Z.Provider,{value:{location:Y({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:o.Pop}},w):w}function oe(){let e=function(){var e;let t=a.useContext($),n=pe(de.UseRouteError),r=me(de.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),n?a.createElement("pre",{style:i},n):null,null)}const ae=a.createElement(oe,null);class se extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?a.createElement(J.Provider,{value:this.props.routeContext},a.createElement($.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:t,match:n,children:r}=e,i=a.useContext(G);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),a.createElement(J.Provider,{value:t},r)}function ce(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let s=e,l=null==(i=n)?void 0:i.errors;if(null!=l){let e=s.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||h(!1),s=s.slice(0,Math.min(s.length,e+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let a=0;a<s.length;a++){let e=s[a];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=a),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,s=u>=0?s.slice(0,u+1):[s[0]];break}}}return s.reduceRight((e,r,i)=>{let o,d=!1,h=null,p=null;var m;n&&(o=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||ae,c&&(u<0&&0===i?(m="route-fallback",!1||fe[m]||(fe[m]=!0),d=!0,p=null):u===i&&(d=!0,p=r.route.hydrateFallbackElement||null)));let f=t.concat(s.slice(0,i+1)),g=()=>{let t;return t=o?h:d?p:r.route.Component?a.createElement(r.route.Component,null):r.route.element?r.route.element:e,a.createElement(le,{match:r,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?a.createElement(se,{location:n.location,revalidation:n.revalidation,component:h,error:o,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var ue=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ue||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function he(e){let t=a.useContext(G);return t||h(!1),t}function pe(e){let t=a.useContext(Q);return t||h(!1),t}function me(e){let t=function(){let e=a.useContext(J);return e||h(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||h(!1),n.route.id}const fe={};function ge(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function ye(e){let{to:t,replace:n,state:r,relative:i}=e;ee()||h(!1);let{future:o,static:s}=a.useContext(X),{matches:l}=a.useContext(J),{pathname:c}=te(),u=re(),d=B(t,L(l,o.v7_relativeSplatPath),c,"path"===i),p=JSON.stringify(d);return a.useEffect(()=>u(JSON.parse(p),{replace:n,state:r,relative:i}),[u,p,i,n,r]),null}function ve(e){h(!1)}function we(e){let{basename:t="/",children:n=null,location:r,navigationType:i=o.Pop,navigator:s,static:l=!1,future:c}=e;ee()&&h(!1);let u=t.replace(/^\/*/,"/"),d=a.useMemo(()=>({basename:u,navigator:s,static:l,future:Y({v7_relativeSplatPath:!1},c)}),[u,c,s,l]);"string"===typeof r&&(r=y(r));let{pathname:p="/",search:m="",hash:f="",state:g=null,key:v="default"}=r,w=a.useMemo(()=>{let e=N(p,u);return null==e?null:{location:{pathname:e,search:m,hash:f,state:g,key:v},navigationType:i}},[u,p,m,f,g,v,i]);return null==w?null:a.createElement(X.Provider,{value:d},a.createElement(Z.Provider,{children:n,value:w}))}function be(e){let{children:t,location:n}=e;return ie(ke(t),n)}new Promise(()=>{});a.Component;function ke(e,t){void 0===t&&(t=[]);let n=[];return a.Children.forEach(e,(e,r)=>{if(!a.isValidElement(e))return;let i=[...t,r];if(e.type===a.Fragment)return void n.push.apply(n,ke(e.props.children,i));e.type!==ve&&h(!1),e.props.index&&e.props.children&&h(!1);let o={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ke(e.props.children,i)),n.push(o)}),n}var De=n(950),xe=n.t(De,2);function Ee(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(Av){}new Map;const Se=s.startTransition;xe.flushSync,s.useId;function Ae(e){let{basename:t,children:n,future:r,window:i}=e,o=a.useRef();var s;null==o.current&&(o.current=(void 0===(s={window:i,v5Compat:!0})&&(s={}),v(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:g(t)},null,s)));let l=o.current,[c,u]=a.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},h=a.useCallback(e=>{d&&Se?Se(()=>u(e)):u(e)},[u,d]);return a.useLayoutEffect(()=>l.listen(h),[l,h]),a.useEffect(()=>ge(r),[r]),a.createElement(we,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Ce,Te;function Re(e){let t=a.useRef(Ee(e)),n=a.useRef(!1),r=te(),i=a.useMemo(()=>function(e,t){let n=Ee(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(r.search,n.current?null:t.current),[r.search]),o=re(),s=a.useCallback((e,t)=>{const r=Ee("function"===typeof e?e(i):e);n.current=!0,o("?"+r,t)},[o,i]);return[i,s]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ce||(Ce={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Te||(Te={}));var Fe=n(144),Ie=n(667),Pe=n(121);function Me(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new WeakSet;if(null===e||void 0===e)return null;if("object"!==typeof e)return e;if(t.has(e))return null;if(t.add(e),Array.isArray(e))return e.map(e=>Me(e,t));if("object"===typeof e){const n={};for(const[r,i]of Object.entries(e))void 0!==i&&(n[r]=Me(i,t));return n}return e}function _e(e){if(null===e||void 0===e)return e;if("string"===typeof e)return(t=e)&&"string"===typeof t?t.replace(/miless/gi,"miles").replace(/milees/gi,"miles").replace(/milles/gi,"miles").replace(/milse/gi,"miles"):t;var t;if(Array.isArray(e))return e.map(_e);if("object"===typeof e){const t={};for(const[n,r]of Object.entries(e))t[n]=_e(r);return t}return e}const Ne=new class{async saveUserProfile(e,t){try{const n=(0,Ie.doc)(Pe.db,"users",e),r=Me(t);return await(0,Ie.setDoc)(n,{profile:(0,c.A)((0,c.A)({},r),{},{createdAt:(0,Ie.serverTimestamp)(),updatedAt:(0,Ie.serverTimestamp)()})},{merge:!0}),console.log("\u2705 User profile saved to Firestore"),{success:!0}}catch(n){return console.error("\u274c Error saving user profile:",n),{success:!1,error:n.message}}}async saveTrainingPlan(e,t){try{const n=(0,Ie.doc)(Pe.db,"users",e),r=Me(t);if(!r.weeks||!Array.isArray(r.weeks))return console.error("\u274c CRITICAL: Plan has no weeks array! Cannot save."),{success:!1,error:"Plan structure is invalid - missing weeks array"};const i=r.weeks.filter(e=>null===e||void 0===e||!e.workouts||0===e.workouts.length).length,o=r.weeks.length;if(i>0)return console.error("\u274c CRITICAL: Plan has ".concat(i," null/invalid weeks out of ").concat(o,"! Cannot save corrupted plan.")),console.error("   Null week indices:",r.weeks.map((e,t)=>null!==e&&void 0!==e&&e.workouts&&0!==e.workouts.length?null:t+1).filter(Boolean)),{success:!1,error:"Plan structure is corrupted: ".concat(i," weeks are null or have no workouts. Please regenerate your plan.")};const a=JSON.stringify(r).length;return a>9e5&&console.warn("\u26a0\ufe0f Plan size is ".concat((a/1024/1024).toFixed(2)," MB - approaching Firestore 1MB limit")),await(0,Ie.setDoc)(n,{trainingPlan:(0,c.A)((0,c.A)({},r),{},{savedAt:(0,Ie.serverTimestamp)()}),updatedAt:(0,Ie.serverTimestamp)()},{merge:!0}),console.log("\u2705 Training plan saved to Firestore (".concat(o," weeks, ").concat((a/1024).toFixed(1)," KB)")),{success:!0}}catch(n){return console.error("\u274c Error saving training plan:",n),{success:!1,error:n.message}}}async getUserData(e){try{const t=(0,Ie.doc)(Pe.db,"users",e),n=await(0,Ie.getDoc)(t);if(n.exists()){console.log("\u2705 User data loaded from Firestore");const t=n.data();if(t.profile&&(void 0!==t.profile.runsPerWeek&&void 0===t.profile.workoutsPerWeek&&(console.log("\ud83d\udd27 Migrating runsPerWeek \u2192 workoutsPerWeek"),t.profile.workoutsPerWeek=t.profile.runsPerWeek),void 0!==t.profile.workoutsPerWeek&&t.profile.runsPerWeek),t.trainingPlan){const n=JSON.stringify(t.trainingPlan);t.trainingPlan=_e(t.trainingPlan);n!==JSON.stringify(t.trainingPlan)&&(console.log("\ud83d\udd27 Fixed typos in training plan, saving corrected version..."),this.saveTrainingPlan(e,t.trainingPlan).catch(e=>{console.warn("\u26a0\ufe0f Could not save typo-fixed plan:",e.message)}))}return{success:!0,data:t}}return console.log("\u2139\ufe0f No user data found (new user)"),{success:!0,data:null}}catch(t){return console.error("\u274c Error loading user data:",t),{success:!1,error:t.message}}}async markWorkoutComplete(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{var a;const s=await this.getUserData(e);if(!s.success||null===(a=s.data)||void 0===a||!a.trainingPlan)throw new Error("No training plan found");const l=s.data.trainingPlan,c=l.weeks.find(e=>e.week===t);if(c){const e=c.workouts.find(e=>e.day===n);e&&(e.completed=r,e.completedAt=r?(new Date).toISOString():null,r?(null!==i&&(e.actualDistance=i),null!==o&&(e.notes=o)):(delete e.actualDistance,delete e.notes))}return await this.saveTrainingPlan(e,l),console.log("\u2705 Workout marked as ".concat(r?"complete":"incomplete").concat(i?" (".concat(i," miles)"):"")),{success:!0}}catch(s){return console.error("\u274c Error updating workout:",s),{success:!1,error:s.message}}}async saveModifiedWorkout(e,t,n,r){try{const i=(0,Ie.doc)(Pe.db,"users",e);return await(0,Ie.updateDoc)(i,{["modifiedWorkouts.".concat(t,"-").concat(n)]:(0,c.A)((0,c.A)({},r),{},{modifiedAt:(0,Ie.serverTimestamp)()}),updatedAt:(0,Ie.serverTimestamp)()}),console.log("\u2705 Modified workout saved"),{success:!0}}catch(i){return console.error("\u274c Error saving modified workout:",i),{success:!1,error:i.message}}}async getModifiedWorkouts(e){try{var t;const n=await this.getUserData(e);return n.success&&null!==(t=n.data)&&void 0!==t&&t.modifiedWorkouts?{success:!0,data:n.data.modifiedWorkouts}:{success:!0,data:{}}}catch(n){return console.error("\u274c Error loading modified workouts:",n),{success:!1,error:n.message}}}async removeModifiedWorkout(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;try{const o=(0,Ie.doc)(Pe.db,"users",e),a=0===i?"".concat(t,"-").concat(r):"".concat(t,"-").concat(r,"-").concat(i),{deleteField:s}=await Promise.resolve().then(n.bind(n,667));return await(0,Ie.updateDoc)(o,{["modifiedWorkouts.".concat(a)]:s(),updatedAt:(0,Ie.serverTimestamp)()}),console.log("\u2705 Modified workout removed"),{success:!0}}catch(o){return console.error("\u274c Error removing modified workout:",o),{success:!1,error:o.message}}}async clearUserData(e){try{const t=(0,Ie.doc)(Pe.db,"users",e);return await(0,Ie.kd)(t),console.log("\u2705 User data cleared (document deleted)"),{success:!0}}catch(t){return console.error("\u274c Error clearing user data:",t),{success:!1,error:t.message}}}};var Oe=n(452),je=n(579);const Le=function(){(0,a.useEffect)(()=>{"signup"===new URLSearchParams(window.location.search).get("mode")&&t(!1)},[]);const[e,t]=(0,a.useState)(!0),[n,r]=(0,a.useState)(""),[i,o]=(0,a.useState)(""),[s,l]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[d,h]=(0,a.useState)(!1),[p,m]=(0,a.useState)(!1);return(0,je.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"20px"},children:(0,je.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"40px",maxWidth:"400px",width:"100%",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,je.jsxs)("div",{style:{textAlign:"center",marginBottom:"32px"},children:[(0,je.jsx)("img",{src:"/logo.png",alt:"Run+ Plans",style:{maxWidth:"200px",height:"auto",marginBottom:"16px"}}),(0,je.jsx)("p",{style:{color:"#AAAAAA",fontSize:"0.95rem",lineHeight:"1.4"},children:"Smart training that adapts to injuries, equipment, and real life"})]}),p?(0,je.jsxs)("div",{style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:"8px",padding:"16px",color:"#00D4FF",textAlign:"center",marginBottom:"20px"},children:[(0,je.jsx)("p",{style:{margin:0},children:"\u2705 Password reset email sent! Check your inbox."}),(0,je.jsx)("button",{onClick:()=>m(!1),style:{background:"transparent",border:"none",color:"#00D4FF",textDecoration:"underline",cursor:"pointer",marginTop:"12px"},children:"Back to login"})]}):(0,je.jsxs)(je.Fragment,{children:[(0,je.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),u(""),h(!0);try{if(e)await(0,Fe.x9)(Pe.j2,n,i),console.log("\u2705 Logged in successfully");else{const e=await(0,Fe.eJ)(Pe.j2,n,i);s&&await(0,Fe.r7)(e.user,{displayName:s}),await(0,Ie.setDoc)((0,Ie.doc)(Pe.db,"users",e.user.uid),{email:n,displayName:s||"",approvalStatus:"pending",createdAt:(0,Ie.serverTimestamp)(),approvedAt:null,approvedBy:null}),console.log("\u2705 Account created successfully - pending approval")}}catch(r){switch(console.error("\u274c Auth error:",r),r.code){case"auth/email-already-in-use":u("This email is already registered. Please login instead.");break;case"auth/weak-password":u("Password must be at least 8 characters with 1 uppercase, 1 lowercase, and 1 special character.");break;case"auth/invalid-email":u("Please enter a valid email address.");break;case"auth/user-not-found":case"auth/wrong-password":u("Invalid email or password.");break;case"auth/too-many-requests":u("Too many failed attempts. Please try again later.");break;default:r.message?u(r.message):u("An error occurred. Please try again.")}}finally{h(!1)}},children:[!e&&(0,je.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#CCCCCC",marginBottom:"8px"},children:"Name"}),(0,je.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),autoComplete:"name",placeholder:"Your name",style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#FFFFFF",fontSize:"1rem"}})]}),(0,je.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#CCCCCC",marginBottom:"8px"},children:"Email"}),(0,je.jsx)("input",{type:"email",value:n,onChange:e=>r(e.target.value),required:!0,autoComplete:"email",placeholder:"you@example.com",style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#FFFFFF",fontSize:"1rem"}})]}),(0,je.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#CCCCCC",marginBottom:"8px"},children:"Password"}),(0,je.jsx)("input",{type:"password",value:i,onChange:e=>o(e.target.value),required:!0,autoComplete:e?"current-password":"new-password",placeholder:e?"Enter your password":"Create a strong password",style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#FFFFFF",fontSize:"1rem"}}),!e&&(0,je.jsxs)("div",{style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:"6px",padding:"12px",marginTop:"8px"},children:[(0,je.jsx)("p",{style:{fontSize:"0.875rem",color:"#00D4FF",fontWeight:"600",marginBottom:"6px"},children:"Password Requirements:"}),(0,je.jsxs)("ul",{style:{fontSize:"0.8rem",color:"#CCCCCC",margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[(0,je.jsx)("li",{children:"At least 8 characters"}),(0,je.jsx)("li",{children:"1 uppercase letter (A-Z)"}),(0,je.jsx)("li",{children:"1 lowercase letter (a-z)"}),(0,je.jsx)("li",{children:"1 special character (!@#$%^&*)"})]})]})]}),c&&(0,je.jsx)("div",{style:{background:"rgba(229, 62, 62, 0.1)",border:"1px solid rgba(229, 62, 62, 0.3)",borderRadius:"6px",padding:"12px",color:"#FC8181",marginBottom:"16px",fontSize:"0.9rem"},children:c}),(0,je.jsx)("button",{type:"submit",disabled:d,style:{width:"100%",padding:"14px",background:d?"#666666":"#00D4FF",border:"none",borderRadius:"6px",color:"#000000",fontSize:"1rem",fontWeight:"bold",cursor:d?"not-allowed":"pointer",marginBottom:"16px"},children:d?"Loading...":e?"Login":"Create Account"}),e&&(0,je.jsx)("button",{type:"button",onClick:async()=>{if(n){u(""),h(!0);try{await(0,Fe.J1)(Pe.j2,n),m(!0),console.log("\u2705 Password reset email sent")}catch(e){console.error("\u274c Password reset error:",e),u("Could not send reset email. Please check your email address.")}finally{h(!1)}}else u("Please enter your email address first.")},disabled:d,style:{background:"transparent",border:"none",color:"#00D4FF",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem",display:"block",margin:"0 auto 16px"},children:"Forgot password?"})]}),(0,je.jsx)("div",{style:{textAlign:"center",paddingTop:"16px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,je.jsx)("button",{onClick:()=>{t(!e),u("")},style:{background:"transparent",border:"none",color:"#AAAAAA",cursor:"pointer",fontSize:"0.9rem"},children:e?(0,je.jsxs)(je.Fragment,{children:["Don't have an account? ",(0,je.jsx)("span",{style:{color:"#00D4FF"},children:"Sign up"})]}):(0,je.jsxs)(je.Fragment,{children:["Already have an account? ",(0,je.jsx)("span",{style:{color:"#00D4FF"},children:"Login"})]})})})]})]})})};var Be=n(169),We=n(187),Ue=n(483),qe=n(44),He=n(334);class ze{constructor(){this.equipmentSpecs={cyclete:{name:"Cyclete",motion:"Teardrop with acceleration through back stroke (patent pending)",description:"Dual crank system - short crank front (low knee impact) + long crank back (kick/push-off)",muscleLoading:"Quad-dominant (mimics running push-off mechanics)",runningSpecificity:"HIGH - closest to actual running gait pattern",strengths:["Easy run replacement","Running simulation","Maintaining leg turnover","Endurance training"],optimalDurations:"Extended sessions (60+ minutes)",resistanceType:"Variable terrain simulation",bestFor:["Replacing easy runs","Running-specific fitness","Quad maintenance"],avoidAfter:["Hill repeats","Quad-heavy speed work","Heavy leg strength days"],pairsWellWith:["Glute-focused strength days","Upper body days","After tempo runs"]},elliptigo:{name:"ElliptiGO",motion:"Elliptical (smooth, constant speed throughout stroke)",description:"Outdoor elliptical with up to 11-speed gearing, adjustable stride up to 26 inches",muscleLoading:"Glute + full-body (hip extension emphasis, engages core and upper body)",runningSpecificity:"MODERATE - different muscle pattern than running",strengths:["Full body workout","Active recovery","Interval training","Calorie burn (+33% vs bike)"],optimalDurations:"Varied (20-120 minutes)",resistanceType:"Gear-based resistance (11 speeds)",bestFor:["Active recovery","Cross-training variety","After quad-heavy days","Full-body conditioning"],avoidAfter:["Glute-heavy strength days","Deadlift days"],pairsWellWith:["After hill repeats","After speed work","Quad-heavy running days"]}},this.workoutLibrary={TEMPO_BIKE:[{name:"Sustained Threshold Effort",duration:"50-70 minutes",equipment:"both",description:"Continuous steady hard effort at lactate threshold",structure:"10 min easy warmup + 20-40 min @ threshold effort + 10 min easy cooldown",intensity:"tempo",benefits:"Lactate threshold development, sustained power, mental toughness",cycleteNotes:"Excellent for building race-pace endurance on natural motion",elliptigoNotes:"Use moderate-long stride, maintain steady resistance throughout",effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard, can speak in short sentences"},roadConsiderations:"Find a flat, uninterrupted stretch of bike path or quiet road for sustained effort"},{name:"Tempo Intervals",duration:"60-75 minutes",equipment:"both",description:"Repeated threshold efforts with short recovery",structure:"10 min warmup + 3-4 x 8 min @ threshold with 3 min easy recovery + 10 min cooldown",intensity:"tempo",benefits:"Threshold power, recovery management, pacing practice",cycleteNotes:"Perfect for building powerful sustained efforts",elliptigoNotes:"Maintain consistent stride pattern across intervals",effort:{heartRate:"Zone 3-4 during intervals (80-90% max HR)",perceived:"Hard but sustainable, recovery is truly easy"},roadConsiderations:"Out-and-back route or loop works well, recovery is active (keep moving)"},{name:"Progressive Tempo Build",duration:"55-70 minutes",equipment:"both",description:"Gradually building effort to threshold and beyond",structure:"15 min easy + 10 min moderate + 10 min threshold + 5 min hard + 15 min easy cooldown",intensity:"tempo",benefits:"Graduated effort adaptation, race simulation, finishing strength",cycleteNotes:"Natural motion allows smooth power progression",elliptigoNotes:"Increase resistance and/or cadence to build effort",effort:{heartRate:"Building from Zone 2 \u2192 Zone 4 \u2192 Zone 5",perceived:"Starting comfortable, finishing hard"},roadConsiderations:"Slight uphill finish helps with progressive build"},{name:"Cruise Intervals",duration:"60-80 minutes",equipment:"both",description:"Classic lactate threshold intervals with short recovery",structure:"15 min warmup + 5-6 x 5 min @ threshold with 2 min easy + 10 min cooldown",intensity:"tempo",benefits:"Threshold efficiency, power sustainability, mental resilience",cycleteNotes:"Maintain smooth natural rhythm throughout efforts",elliptigoNotes:"Focus on consistent resistance and stride pattern",effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard, short recovery keeps you honest"},roadConsiderations:"Timer-based intervals work anywhere, don't need specific landmarks"},{name:"Tempo Sandwich",duration:"60-75 minutes",equipment:"both",description:"Two threshold blocks separated by easy riding",structure:"10 min warmup + 15 min @ threshold + 10 min easy + 15 min @ threshold + 10 min cooldown",intensity:"tempo",benefits:"Threshold endurance, mid-ride recovery practice, race pacing",cycleteNotes:"Second effort teaches pacing discipline",elliptigoNotes:"Maintain form quality into second block",effort:{heartRate:"Zone 3-4 during blocks",perceived:"First block strong, second block requires focus"},roadConsiderations:"Out-and-back route ideal (turnaround during easy section)"},{name:"Fast Finish Tempo",duration:"50-65 minutes",equipment:"both",description:"Steady effort with strong closing surge",structure:"10 min warmup + 25 min @ steady moderate + 10 min @ threshold + 5 min hard + 10 min cooldown",intensity:"tempo",benefits:"Finishing strength, race simulation, mental toughness",cycleteNotes:"Teaches finishing power when fatigued",elliptigoNotes:"Final surge requires full body engagement",effort:{heartRate:"Building to Zone 4-5 at finish",perceived:"Start controlled, finish strong"},roadConsiderations:"Plan route so final hard section is on good road surface"},{name:"Threshold Pyramid",duration:"70-85 minutes",equipment:"both",description:"Ascending and descending threshold intervals",structure:"15 min warmup + 5-7-10-7-5 min @ threshold with 3 min easy recovery + 10 min cooldown",intensity:"tempo",benefits:"Variable effort management, mental engagement, threshold development",cycleteNotes:"Varied interval lengths prevent mental monotony",elliptigoNotes:"Practice pacing across different interval durations",effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Maintain same effort despite changing durations"},roadConsiderations:"Timer-based, works on any reasonable road"},{name:"Cutdown Tempo",duration:"55-70 minutes",equipment:"both",description:"Progressively faster tempo intervals",structure:"10 min warmup + 10 min @ moderate + 8 min @ threshold + 6 min @ hard + 4 min @ very hard with 3 min recovery between + 10 min cooldown",intensity:"tempo",benefits:"Pace judgment, variable effort training, finishing power",cycleteNotes:"Progressive resistance or cadence increase",elliptigoNotes:"Combine resistance and stride adjustments",effort:{heartRate:"Building from Zone 3 \u2192 Zone 5",perceived:"Each interval harder than previous"},roadConsiderations:"Descending intervals keep mental engagement high"},{name:"Steady State Tempo",duration:"60-80 minutes",equipment:"both",description:"Extended time at threshold for endurance adaptation",structure:"15 min warmup + 30-40 min @ steady threshold + 15 min cooldown",intensity:"tempo",benefits:"Threshold endurance, mental training, race-specific work",cycleteNotes:"Long sustained natural motion builds race fitness",elliptigoNotes:"Maintain consistent form over extended effort",effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard for extended duration"},roadConsiderations:"Need long uninterrupted stretch, bike path or quiet country road ideal"},{name:"Tempo with Surges",duration:"55-70 minutes",equipment:"both",description:"Threshold effort with periodic hard surges",structure:"10 min warmup + 20 min @ threshold with 6 x 30 sec surges every 3 min + 10 min cooldown",intensity:"tempo",benefits:"Race simulation, surge recovery, variable pace training",cycleteNotes:"Surges mimic race attacks or traffic situations",elliptigoNotes:"Quick resistance/cadence changes develop responsiveness",effort:{heartRate:"Zone 3-4 baseline, Zone 5 during surges",perceived:"Hard base with brief very hard surges"},roadConsiderations:"Surges work well at intersections or road features"}],INTERVAL_BIKE:[{name:"Short Power Repeats",duration:"50-65 minutes",equipment:"both",description:"High-intensity short intervals for power development",structure:"15 min warmup + 10-12 x 2 min hard with 2 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"VO2max development, neuromuscular power, aerobic capacity",cycleteNotes:"Explosive power in natural motion pattern",elliptigoNotes:"Quick stride and resistance changes",effort:{heartRate:"Zone 4-5 during intervals (90-100% max HR)",perceived:"Hard effort, breathing heavy, full recovery needed"},roadConsiderations:"Timer-based, any safe road works, recovery is active (keep moving)"},{name:"Classic 5-Minute Repeats",duration:"65-80 minutes",equipment:"both",description:"VO2max intervals at hard sustainable effort",structure:"15 min warmup + 4-6 x 5 min @ VO2max with 3-4 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"Aerobic power, VO2max improvement, sustained speed work",cycleteNotes:"5 minutes allows rhythm development at high power",elliptigoNotes:"Find sustainable high resistance for full duration",effort:{heartRate:"Zone 5 (95-100% max HR)",perceived:"Very hard but sustainable for 5 minutes"},roadConsiderations:"Flat section preferred to maintain consistent power output"},{name:"Ladder Intervals",duration:"70-90 minutes",equipment:"both",description:"Variable duration intervals ascending and descending",structure:"15 min warmup + 2-3-4-5-4-3-2 min hard with equal recovery + 10 min cooldown",intensity:"intervals",benefits:"Variable effort training, mental engagement, comprehensive stimulus",cycleteNotes:"Varied durations prevent monotony",elliptigoNotes:"Adjust pacing for different interval lengths",effort:{heartRate:"Zone 4-5 during intervals",perceived:"Hard throughout, adjust effort for interval duration"},roadConsiderations:"Timer-based pyramid keeps mental focus high"},{name:"Tabata-Style Power Blasts",duration:"40-55 minutes",equipment:"both",description:"Ultra-short maximal efforts for neuromuscular power",structure:"15 min warmup + 2-3 sets of 8 x 20 sec maximal with 10 sec easy (4 min recovery between sets) + 10 min cooldown",intensity:"intervals",benefits:"Explosive power, anaerobic capacity, neuromuscular recruitment",cycleteNotes:"Explosive natural motion develops race finishing speed",elliptigoNotes:"Maximum resistance and cadence for 20 seconds",effort:{heartRate:"Zone 5+ (maximal)",perceived:"All-out effort, 10 seconds barely enough recovery"},roadConsiderations:"Need very safe road/path, minimal traffic, good surface"},{name:"Long Intervals",duration:"75-95 minutes",equipment:"both",description:"Extended hard efforts for sustained power",structure:"15 min warmup + 4-5 x 8 min hard with 4 min recovery + 15 min cooldown",intensity:"intervals",benefits:"Sustained VO2max work, mental toughness, race-specific power",cycleteNotes:"Long intervals build race-day sustained power",elliptigoNotes:"Form maintenance critical over 8-minute efforts",effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard, requires pacing discipline"},roadConsiderations:"8 minutes is long enough to use out-and-back landmarks"},{name:"Pyramid Power",duration:"60-75 minutes",equipment:"both",description:"Ascending and descending power intervals",structure:"15 min warmup + 1-2-3-4-3-2-1 min hard with 1 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"Variable power training, mental focus, comprehensive development",cycleteNotes:"Varied efforts keep engagement high",elliptigoNotes:"Manage effort across different durations",effort:{heartRate:"Zone 4-5",perceived:"Hard throughout, short recoveries"},roadConsiderations:"Timer-based, works anywhere safe"},{name:"Over-Under Intervals",duration:"60-75 minutes",equipment:"both",description:"Alternating just below and just above threshold",structure:"15 min warmup + 4 x 8 min (alternating 2 min @ threshold, 1 min @ VO2max) with 4 min recovery + 10 min cooldown",intensity:"intervals",benefits:"Lactate tolerance, recovery under duress, race simulation",cycleteNotes:"Teaches power management and recovery while working",elliptigoNotes:"Quick resistance changes between under/over efforts",effort:{heartRate:"Zone 3-4 during under, Zone 5 during over",perceived:"Alternating hard and very hard within same interval"},roadConsiderations:"No true recovery during 8-min blocks, need good road surface"},{name:"Fartlek Intervals",duration:"50-70 minutes",equipment:"both",description:"Unstructured speed play using landmarks and feel",structure:"15 min warmup + 20-30 min continuous riding with surges of varying duration (30 sec to 5 min) + 10 min cooldown",intensity:"intervals",benefits:"Variable pace training, mental freedom, responsive power",cycleteNotes:"Natural motion allows spontaneous surges",elliptigoNotes:"Use road features as surge cues",effort:{heartRate:"Variable Zone 2-5",perceived:"Playful hard efforts based on feel"},roadConsiderations:"Use mailboxes, signs, hills, etc. as surge markers"},{name:"30-30 Repeats",duration:"50-65 minutes",equipment:"both",description:"Equal hard and recovery for sustained intensity",structure:"15 min warmup + 3-4 sets of 10 x 30 sec hard / 30 sec easy (5 min recovery between sets) + 10 min cooldown",intensity:"intervals",benefits:"VO2max development, anaerobic capacity, efficient recovery",cycleteNotes:"Short recoveries develop resilience",elliptigoNotes:"Quick rhythm changes improve responsiveness",effort:{heartRate:"Zone 5 during hard sections",perceived:"Hard but repeatable, 30 sec recovery is enough"},roadConsiderations:"Timer-based, any safe stretch works"},{name:"Descending Intervals",duration:"65-80 minutes",equipment:"both",description:"Progressively shorter intervals at increasing intensity",structure:"15 min warmup + 5-4-3-2-1 min with effort increasing each interval (3 min recovery) x 2 sets + 10 min cooldown",intensity:"intervals",benefits:"Progressive intensity training, mental toughness, finishing power",cycleteNotes:"Teaches finishing speed when fatigued",elliptigoNotes:"Max power on final 1-minute effort",effort:{heartRate:"Building from Zone 4 \u2192 Zone 5+",perceived:"Each interval harder than previous"},roadConsiderations:"Final 1-minute effort is near-maximal"},{name:"400m Repeats",duration:"60-80 minutes",equipment:"both",description:"Short, fast intervals for speed and lactic tolerance",structure:"15 min warmup + 20 x 400m at target HR with 0:45-1:30 recovery + 10 min cooldown",intensity:"intervals",benefits:"Speed endurance, lactic tolerance, VO2max development",cycleteNotes:"Quick turnover mimics running stride frequency",elliptigoNotes:"Maintain high cadence and moderate resistance",effort:{heartRate:"Zone 4-5 (87-92% max HR)",perceived:"Hard but repeatable, recovery should feel brief"},roadConsiderations:"Can be done on track outer lanes or measured road segments"},{name:"800m Repeats",duration:"60-85 minutes",equipment:"both",description:"Classic VO2max intervals at sustained hard effort",structure:"15 min warmup + 10 x 800m at target HR with 1:00-2:00 recovery + 10 min cooldown",intensity:"intervals",benefits:"VO2max development, sustained speed, aerobic power",cycleteNotes:"Longer intervals allow rhythm and power development",elliptigoNotes:"Balance resistance and cadence for sustainable effort",effort:{heartRate:"Zone 4-5 (87-92% max HR)",perceived:"Hard sustainable effort, need full recovery between"},roadConsiderations:"Track outer lanes or 2-3 minute road segments work well"}],POWER_RESISTANCE:[{name:"Hill Power Repeats",duration:"55-70 minutes",equipment:"both",description:"Short explosive hill repeats for power development",structure:"15 min warmup + 8-10 x 2 min hard uphill with easy coast down + 10 min cooldown",intensity:"power",benefits:"Power development, muscular strength, explosive capacity",cycleteNotes:"Powerful natural motion up sustained grades",elliptigoNotes:"High resistance, explosive stride pattern",effort:{heartRate:"Zone 4-5 (90-100% max HR)",perceived:"Very hard uphill effort, easy coast down recovery"},roadConsiderations:"Need actual hill or sustained grade - 4-6% grade ideal, safe descent"},{name:"Resistance Strength Intervals",duration:"60-75 minutes",equipment:"both",description:"High resistance intervals on flat terrain",structure:"15 min warmup + 6-8 x 3 min @ high resistance with 3 min easy + 10 min cooldown",intensity:"power",benefits:"Muscular strength, grinding power, force production",cycleteNotes:"High resistance develops grinding strength",elliptigoNotes:"Maximum resistance, controlled cadence",effort:{heartRate:"Zone 4 (muscular not cardiovascular limiter)",perceived:"Legs burning, powerful effort"},roadConsiderations:"Works on flat roads - resistance creates difficulty"},{name:"Long Strength Climbs",duration:"70-90 minutes",equipment:"both",description:"Extended hill climbs for sustained power",structure:"15 min warmup + 4-6 x 5 min sustained climb with full recovery down + 10 min cooldown",intensity:"power",benefits:"Sustained climbing power, mental toughness, muscular endurance",cycleteNotes:"Extended natural motion on grades",elliptigoNotes:"Maintain form quality through long climbs",effort:{heartRate:"Zone 4 (80-90% max HR)",perceived:"Hard sustained uphill effort"},roadConsiderations:"Need sustained grade of 3-5%, safe descent for recovery"},{name:"Resistance Pyramid",duration:"65-80 minutes",equipment:"both",description:"Variable duration high-resistance intervals",structure:"15 min warmup + 2-3-4-5-4-3-2 min @ high resistance with 2 min easy + 10 min cooldown",intensity:"power",benefits:"Variable strength training, muscular endurance, mental engagement",cycleteNotes:"Varied durations with high resistance",elliptigoNotes:"Maximum resistance, controlled cadence throughout",effort:{heartRate:"Zone 3-4 (muscular effort)",perceived:"Powerful grinding effort"},roadConsiderations:"Resistance-based, works on any safe road"},{name:"Mixed Terrain Circuit",duration:"60-80 minutes",equipment:"both",description:"Repeated circuit with varied terrain challenges",structure:"15 min warmup + 4-5 laps of circuit with hills, flats, descents + 10 min cooldown",intensity:"power",benefits:"Variable terrain adaptation, comprehensive power development",cycleteNotes:"Natural motion adapts to terrain changes",elliptigoNotes:"Resistance and stride adjustments for terrain",effort:{heartRate:"Variable Zones 3-5",perceived:"Hard on climbs, recovery on descents"},roadConsiderations:"Find 2-3 mile circuit with varied terrain, good for repeats"},{name:"Hill Blasts",duration:"50-65 minutes",equipment:"both",description:"Short explosive hill repeats for power",structure:"15 min warmup + 12-15 x 1 min maximal uphill with easy recovery down + 10 min cooldown",intensity:"power",benefits:"Explosive power, anaerobic capacity, neuromuscular training",cycleteNotes:"Maximum power in natural motion",elliptigoNotes:"Explosive stride, maximum resistance",effort:{heartRate:"Zone 5 (95-100% max HR)",perceived:"Near-maximal effort, full recovery needed"},roadConsiderations:"Short steep hill ideal (6-8% grade), safe descent"},{name:"Tempo Climb",duration:"65-85 minutes",equipment:"both",description:"Sustained threshold effort on extended climb",structure:"15 min warmup + 2-3 x 15 min sustained climb @ threshold with recovery descent + 10 min cooldown",intensity:"power",benefits:"Climbing endurance, sustained power, race-specific strength",cycleteNotes:"Extended climbing in natural motion",elliptigoNotes:"Maintain consistent rhythm on long climbs",effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Hard sustained climbing effort"},roadConsiderations:"Need long gradual climb (3-5% grade for 15 minutes)"},{name:"Resistance Fartlek",duration:"55-70 minutes",equipment:"both",description:"Playful variable resistance efforts",structure:"15 min warmup + 25-35 min continuous with surges at varying resistance levels + 10 min cooldown",intensity:"power",benefits:"Variable power training, responsive strength, mental engagement",cycleteNotes:"Quick resistance changes develop versatility",elliptigoNotes:"Play with resistance and stride combinations",effort:{heartRate:"Variable Zones 2-5",perceived:"Playful hard efforts with varying resistance"},roadConsiderations:"Use terrain features to vary resistance naturally"},{name:"Hill Sprint Repeats",duration:"50-65 minutes",equipment:"both",description:"Short explosive sprints up moderate hill for power and lactic tolerance",structure:"15 min warmup + 8-12 x 0:30 sprint up 4-6% grade with 1:30 coast down recovery + 10 min cooldown",intensity:"power",benefits:"Explosive power, motor recruitment, lactic acid tolerance, posterior chain strength",cycleteNotes:"Maximum power output in natural running motion up hill",elliptigoNotes:"High resistance, explosive stride, full body engagement",effort:{heartRate:"Zone 5+ (100% max HR)",perceived:"Maximum effort, fighting lactic acid by end of session"},roadConsiderations:"Need consistent 4-6% grade hill with safe descent for recovery"},{name:"Power Sprint Buildups",duration:"55-70 minutes",equipment:"both",description:"High-end lactate workout with buildup into maximum sprint",structure:"15 min warmup + 3-5 x (200m buildup into 400m max sprint) with full recovery + 10 min cooldown",intensity:"power",benefits:"Maximum power development, lactic tolerance, sprint speed",cycleteNotes:"Progressive acceleration into all-out sprint effort",elliptigoNotes:"Build through gears, max resistance and cadence on sprint",effort:{heartRate:"Zone 5+ on sprint (100% max HR)",perceived:"Maximum sprint effort, stop when 400m time drops 3+ seconds"},roadConsiderations:"Need flat safe stretch, full recovery between efforts (3-5 min)"},{name:"Steady State Hill Climb",duration:"60-90 minutes",equipment:"both",description:"Continuous climb for sustained threshold and mental toughness",structure:"10 min easy warmup on flat + 60-90 min continuous climb @ steady effort (no coasting)",intensity:"power",benefits:"Aerobic threshold development, muscular endurance, mental toughness, climbing strength",cycleteNotes:"Extended natural motion climb builds race-specific fitness",elliptigoNotes:"Focus on high turnover in lower gears (3-5), maintain rhythm",effort:{heartRate:"Zone 3-4 (80-90% max HR sustained)",perceived:"Steady hard effort, forced to stay engaged throughout"},roadConsiderations:"Need long consistent 5-10% grade climb - canyon roads or mountain climbs ideal"}],LONG_ENDURANCE_RIDES:[{name:"Progressive Long Ride",duration:"90-180 minutes",equipment:"both",description:"Start easy, gradually build to moderate-hard finish",structure:"First 70% @ easy conversational pace, final 30% @ moderate-hard effort",intensity:"long",benefits:"Progressive endurance, finishing strength, aerobic development",cycleteNotes:"Natural motion allows smooth effort progression",elliptigoNotes:"Gradually increase resistance through ride",effort:{heartRate:"Starting Zone 2, finishing Zone 3-4",perceived:"Starting easy, finishing strong"},roadConsiderations:"Plan route with good roads for harder finish"},{name:"Steady State Long Ride",duration:"90-180 minutes",equipment:"both",description:"Maintain consistent aerobic pace throughout",structure:"After warmup, maintain steady moderate effort for full duration",intensity:"long",benefits:"Aerobic endurance, consistent pacing, mental discipline",cycleteNotes:"Excellent for building aerobic base",elliptigoNotes:"Find sustainable rhythm and maintain it",effort:{heartRate:"Zone 2-3 (70-80% max HR)",perceived:"Steady, sustainable, conversational"},roadConsiderations:"Longer rides need route planning, hydration, nutrition"},{name:"Fast Finish Long Ride",duration:"90-150 minutes",equipment:"both",description:"Easy-moderate ride with strong final portion",structure:"First 80% @ easy-moderate, final 20% @ threshold effort",intensity:"long",benefits:"Finishing strength when fatigued, race simulation, mental toughness",cycleteNotes:"Teaches racing speed when tired",elliptigoNotes:"Strong finish requires full body engagement",effort:{heartRate:"Zone 2-3, finishing Zone 4",perceived:"Comfortable becoming hard at finish"},roadConsiderations:"Plan route so final hard section is on good road"},{name:"Negative Split Long Ride",duration:"90-150 minutes",equipment:"both",description:"Second half faster than first half",structure:"Ride out easy-moderate, return moderate-hard (same route out/back)",intensity:"long",benefits:"Pacing discipline, progressive endurance, race strategy practice",cycleteNotes:"Natural motion allows controlled pace progression",elliptigoNotes:"Monitor effort - start conservative",effort:{heartRate:"Zone 2-3 out, Zone 3-4 back",perceived:"Starting controlled, finishing strong"},roadConsiderations:"Out-and-back route ideal for comparison"},{name:"Variable Terrain Long Ride",duration:"100-180 minutes",equipment:"both",description:"Extended ride over varied terrain",structure:"Mix of flats, rollers, climbs at moderate overall effort",intensity:"long",benefits:"Terrain adaptation, comprehensive fitness, real-world preparation",cycleteNotes:"Natural motion handles terrain changes well",elliptigoNotes:"Adjust resistance and stride for terrain",effort:{heartRate:"Variable Zone 2-4 depending on terrain",perceived:"Moderate overall with terrain-driven variations"},roadConsiderations:"Choose hilly or rolling route for natural variation"},{name:"Out-and-Back Endurance",duration:"90-180 minutes",equipment:"both",description:"Simple out-and-back at steady aerobic pace",structure:"Ride to turnaround point, return at same effort level",intensity:"long",benefits:"Aerobic base, simple execution, mental simplicity",cycleteNotes:"Straightforward endurance building",elliptigoNotes:"Maintain consistent effort regardless of wind",effort:{heartRate:"Zone 2-3 (70-80% max HR)",perceived:"Steady, sustainable throughout"},roadConsiderations:"Single good road with turnaround point, watch for wind direction"},{name:"Long Ride with Tempo Finish",duration:"100-180 minutes",equipment:"both",description:"Aerobic ride with sustained threshold finish",structure:"Long easy-moderate ride + final 20-30 min @ threshold effort",intensity:"long",benefits:"Race-specific endurance, finishing power, mental toughness",cycleteNotes:"Builds race-day finishing strength",elliptigoNotes:"Strong finish after long aerobic work",effort:{heartRate:"Zone 2-3, finishing Zone 4",perceived:"Comfortable becoming hard"},roadConsiderations:"Plan route for good finish roads"},{name:"Exploration Ride",duration:"90-180 minutes",equipment:"both",description:"Easy-moderate exploration of new routes",structure:"Relaxed pace, enjoy scenery, build time on equipment",intensity:"long",benefits:"Aerobic base, mental freshness, route discovery",cycleteNotes:"Great way to find new training routes",elliptigoNotes:"Enjoy the ride quality and scenery",effort:{heartRate:"Zone 1-2 (60-75% max HR)",perceived:"Easy, conversational, enjoyable"},roadConsiderations:"Explore new roads/paths, have phone/GPS for navigation"}],AEROBIC_BASE:[{name:"Conversational Pace Cruise",duration:"45-120 minutes",equipment:"both",description:"Long steady effort at conversational intensity",structure:"Maintain steady effort throughout, should be able to hold conversation",intensity:"easy",benefits:"Aerobic base building, fat adaptation, endurance",cycleteNotes:"Excellent for long distance preparation, very running-like feel",elliptigoNotes:"Use moderate stride length, focus on smooth rhythm",effort:{heartRate:"Zone 1-2 (65-75% max HR)",perceived:"Easy, conversational effort"}},{name:"Recovery Ride",duration:"30-60 minutes",equipment:"both",description:"Very easy effort for active recovery",structure:"Easy riding, minimal resistance, focus on movement quality",intensity:"recovery",benefits:"Active recovery, blood flow, movement practice",cycleteNotes:"Perfect for recovery days, gentle fluid motion",elliptigoNotes:"Ideal for joint mobility and muscle activation",effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Very easy, relaxed effort"}}],TECHNIQUE_SPECIFIC:[{name:"Movement Development",duration:"35-50 minutes",equipment:"both",description:"Focus on optimal movement pattern and efficiency",structure:"15 min warmup + 4-6 x 5 min varied effort focus + 10 min cooldown",intensity:"easy to moderate",benefits:"Movement efficiency, technique improvement, neuromuscular training",cycleteNotes:"Perfect natural motion at all efforts",elliptigoNotes:"Practice stride length adjustments with effort changes",effort:{heartRate:"Zone 1-3 varied (65-85% max HR)",perceived:"Easy to moderate varied efforts"}},{name:"Form Focus Session",duration:"40-60 minutes",equipment:"both",description:"Technical session emphasizing movement quality",structure:"Extended warmup + form drills + easy-moderate effort with technique focus",intensity:"easy to moderate",benefits:"Movement quality, efficiency, injury prevention",cycleteNotes:"Focus on smooth natural pattern, avoid bouncing",elliptigoNotes:"Emphasize full stride extension and smooth upper body motion",techniques:{cyclete:["Smooth natural motion","Avoid upper body tension","Focus on forward drive"],elliptigo:["Full stride extension","Coordinated arm swing","Stable core engagement"]}}],RECOVERY_SPECIFIC:[{name:"Active Recovery Flow",duration:"30-45 minutes",equipment:"both",description:"Gentle movement for recovery days",structure:"Very easy effort throughout, focus on movement quality",intensity:"recovery",benefits:"Blood flow, active recovery, movement maintenance",cycleteNotes:"Gentle natural motion perfect for recovery",elliptigoNotes:"Low-impact full body movement aids recovery",effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Very easy, relaxed recovery effort"}},{name:"Injury Prevention Session",duration:"25-40 minutes",equipment:"both",description:"Low-intensity session for injury-prone periods",structure:"Extended warmup + very easy effort + extended cooldown",intensity:"recovery",benefits:"Maintains fitness while allowing healing, joint mobility",cycleteNotes:"Zero-impact alternative when running not possible",elliptigoNotes:"Gentle full-body movement without ground impact"}]}}prescribeStandUpBikeWorkout(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{duration:r=null,experience:i="intermediate",targetDistance:o=null,hasGarmin:a=!0}=n;let s=null,l=null;for(const[c,f]of Object.entries(this.workoutLibrary)){const n=f.find(n=>(n.name.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(n.name.toLowerCase()))&&(n.equipment===t||"both"===n.equipment));if(n){s=n,l=c;break}}if(!s){const n=e.toLowerCase().split(/\s+/).filter(e=>e.length>3);for(const[e,r]of Object.entries(this.workoutLibrary)){const i=r.find(e=>{const r=e.name.toLowerCase();return n.some(e=>r.includes(e))&&(e.equipment===t||"both"===e.equipment)});if(i){s=i,l=e;break}}}if(!s)throw new Error('Workout "'.concat(e,'" not found for ').concat(t));const u=this.equipmentSpecs[t];let d=s.name,h=s.description,p=null;if(o)if(p=o,a)d="".concat(p," RunEQ Miles - ").concat(s.name),h="Ride until your Garmin shows ".concat(p," RunEQ miles - ").concat(s.description);else{const e=Math.round(3*p),t=Math.round(9*p);d="".concat(t," min / ~").concat(e," mi - ").concat(s.name),h="Ride for approximately ".concat(t," minutes or ").concat(e," miles - ").concat(s.description)}const m=s.structure?(0,He.Y)(s.structure,null,null):s.structure;return(0,c.A)((0,c.A)({},s),{},{name:d,description:h,structure:m,category:l,equipmentSpec:u,prescribedRunEqMiles:p,garminNote:"Ride until your Garmin RunEQ data field shows the prescribed RunEQ miles. Your actual bike distance will vary based on your riding intensity.",equipmentSpecificNotes:this.getEquipmentNotes(s,t),safetyGuidance:this.getSafetyGuidance(t,s),alternatives:this.getAlternatives(t,s),progressions:this.getProgressions(s,i)})}getGarminDataFieldNote(){return{title:"RunEQ Garmin Data Field",description:"Install the companion Garmin data field to see your RunEQ miles in real-time while riding",how_it_works:"The data field automatically converts your riding distance to running equivalency based on YOUR riding intensity",why_it_matters:"Everyone rides differently - prescribing actual bike miles would be inaccurate. RunEQ miles ensure equivalent training stimulus regardless of how hard you ride.",example:"If prescribed 5 RunEQ miles: A harder rider might complete it in 12 actual bike miles. An easier rider might need 14 actual bike miles. Both get the same training effect."}}getEquipmentNotes(e,t){var n,r;return"cyclete"===t?{motion:"Focus on smooth natural motion pattern",strengths:e.cycleteNotes||"Excellent running simulation",effort:(null===(n=e.effort)||void 0===n?void 0:n.heartRate)||"Monitor by heart rate or perceived effort"}:{motion:"Utilize full stride length and upper body engagement",strengths:e.elliptigoNotes||"Full-body workout with adjustable stride",effort:(null===(r=e.effort)||void 0===r?void 0:r.heartRate)||"Monitor by heart rate or perceived effort"}}getSafetyGuidance(e,t){const n=["Start with proper warmup to prepare for stand-up motion","Focus on smooth, controlled movement throughout","Stay hydrated, especially during longer sessions"];return"cyclete"===e?n.push("Maintain natural natural motion, avoid forcing the pattern","Keep upper body relaxed to allow efficient power transfer"):n.push("Adjust stride length appropriately for intensity level","Coordinate upper and lower body movement smoothly","Use handles for balance, not to pull yourself forward"),"interval"!==t.intensity&&"tempo"!==t.intensity||n.push("Monitor effort level - equipment amplifies intensity compared to running"),n}getAlternatives(e,t){return{weatherOptions:{indoor:"elliptigo"===e?"elliptiGO can be used on indoor trainer":"cyclete is outdoor-specific",outdoor:"Both excellent for outdoor training in various conditions"},intensityAdjustments:{tooHard:"Reduce resistance or effort level, maintain smooth motion",tooEasy:"Increase resistance or effort level, extend duration",injury:"Both are excellent low-impact alternatives to running"},durationMods:{timeConstraint:"Focus on quality intervals, maintain warmup/cooldown",extended:"Both platforms excel at longer endurance sessions"}}}getProgressions(e,t){const n={beginner:"Start conservative, focus on movement quality over intensity",intermediate:"Standard prescription as written",advanced:"Can extend duration or add complexity to intervals"};return"interval"===e.intensity&&(n.weeklyProgression="Week 1: Shorter intervals, Week 2-3: Build, Week 4: Recovery"),n[t]}getWorkoutsForEquipment(e){const t=[];for(const[n,r]of Object.entries(this.workoutLibrary))for(const i of r)i.equipment!==e&&"both"!==i.equipment||t.push((0,c.A)((0,c.A)({},i),{},{category:n}));return t}getCategories(){return Object.keys(this.workoutLibrary)}searchWorkouts(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[],r=e.toLowerCase();for(const[i,o]of Object.entries(this.workoutLibrary))for(const e of o)t&&e.equipment!==t&&"both"!==e.equipment||(e.name.toLowerCase().includes(r)||e.description.toLowerCase().includes(r)||e.benefits.toLowerCase().includes(r))&&n.push((0,c.A)((0,c.A)({},e),{},{category:i}));return n}getWorkoutByDuration(e,t){const n={EASY:"AEROBIC_BASE",TEMPO:"TEMPO_BIKE",INTERVALS:"INTERVAL_BIKE",LONG:"LONG_ENDURANCE_RIDES",HILLS:"POWER_RESISTANCE",RECOVERY:"RECOVERY_SPECIFIC"}[e]||"AEROBIC_BASE",r=this.workoutLibrary[n];if(!r||0===r.length)return null;const i=t/6;let o=r[0],a=Math.abs(this.parseDistance(r[0].distance)-i);for(const s of r){const e=this.parseDistance(s.distance),t=Math.abs(e-i);t<a&&(a=t,o=s)}return o}parseDistance(e){if(!e)return 5;const t=e.match(/(\d+)(?:-(\d+))?\s*miles?/i);if(t){const e=parseInt(t[1]);return(e+(t[2]?parseInt(t[2]):e))/2}return 5}}var Ve=n(166);class Ke{constructor(){this.hillLibrary=new Be.c,this.tempoLibrary=new We.s,this.intervalLibrary=new Ue.e,this.longRunLibrary=new qe.g,this.standUpBikeLibrary=new ze,this.paceCalculator=new Ve.O,this.planTemplates={"5K":{weeksRecommended:8,runsPerWeek:[3,4,5],focusAreas:["speed","vo2max","lactateThreshold"],workoutDistribution:{intervals:30,tempo:25,hills:20,longRuns:25},peakWeeklyMileage:[15,25,35],longRunMax:[8,10,12]},"10K":{weeksRecommended:10,runsPerWeek:[3,4,5,6],focusAreas:["vo2max","lactateThreshold","aerobicPower"],workoutDistribution:{intervals:25,tempo:30,hills:20,longRuns:25},peakWeeklyMileage:[20,30,40,50],longRunMax:[10,12,15,18]},Half:{weeksRecommended:12,runsPerWeek:[4,5,6,7],focusAreas:["lactateThreshold","aerobicPower","endurance"],workoutDistribution:{intervals:20,tempo:35,hills:20,longRuns:25},peakWeeklyMileage:[25,35,45,55],longRunMax:[13,15,18,20]},Marathon:{weeksRecommended:16,runsPerWeek:[4,5,6,7],focusAreas:["endurance","lactateThreshold","aerobicPower"],workoutDistribution:{intervals:15,tempo:30,hills:20,longRuns:35},peakWeeklyMileage:[35,45,60,70],longRunMax:[20,22,24,26]}},this.trainingPhases={base:{name:"Base Building",focus:"Aerobic development, easy miles",workoutIntensity:"low",longRunEmphasis:"easy",hillFocus:"long_strength"},build:{name:"Build Phase",focus:"Lactate threshold, tempo work",workoutIntensity:"moderate",longRunEmphasis:"progressive",hillFocus:"medium_vo2"},peak:{name:"Peak/Sharpening",focus:"Race-specific speed and power",workoutIntensity:"high",longRunEmphasis:"raceSimulation",hillFocus:"short_power"},taper:{name:"Taper",focus:"Maintain fitness, reduce volume",workoutIntensity:"moderate",longRunEmphasis:"traditional_easy",hillFocus:"short_power"}}}generateTrainingPlan(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{raceDistance:t="10K",raceTime:n=null,raceDate:r=null,currentPaces:i=null,workoutsPerWeek:o=null,runsPerWeek:a=null,runEqPreference:s=0,weeksAvailable:l=null,experienceLevel:u,standUpBikeType:d=null,runningStatus:h="active",currentWeeklyMileage:p=null,hasGarmin:m=!0,availableDays:f=null,hardSessionDays:g=null,longRunDay:y=null,preferredBikeDays:v=null,startDay:w=null}=e;Oe.A.log("\ud83c\udfc3 Training Plan Generator Options:"),Oe.A.log("  runningStatus:",h),Oe.A.log("  currentWeeklyMileage:",p),Oe.A.log("  availableDays:",f),Oe.A.log("  hardSessionDays:",g),Oe.A.log("  longRunDay:",y),Oe.A.log("  preferredBikeDays:",v);const b=this.planTemplates[t];if(!b)throw new Error("Race distance ".concat(t," not supported"));let k=null,D=null,x=null;if(i)x=i,Oe.A.log("\ud83d\udcca Using provided current paces");else{if(!n)throw new Error("Either currentPaces or raceTime must be provided");{const r=e.currentRaceDistance||t;if(Oe.A.log("\ud83c\udfaf Calculating GOAL paces: ".concat(r," in ").concat(n)),D=this.paceCalculator.calculateFromGoal(r,n),Oe.A.log("  Goal paces:",D.paces),p||e.currentLongRunDistance){const e=0,t=parseInt(p)||0;Oe.A.log("\ud83d\udcca Estimating CURRENT fitness from:"),Oe.A.log("   Long run: ".concat(e," miles")),Oe.A.log("   Weekly mileage: ".concat(t," miles")),k=this.paceCalculator.calculateFromCurrentFitness(e,t,r),Oe.A.log("  Current fitness paces:",k.paces),Oe.A.log("  \ud83d\udcc8 Progressive training: Week 1 at current fitness \u2192 Final week at goal pace"),x={current:k,goal:D,useProgression:!0}}else{console.warn("\u26a0\ufe0f No current fitness data provided - defaulting to Safe Start Paces (15% slower than goal)"),console.warn("   This prevents injury risk from starting at goal pace when current fitness is unknown");x=this.paceCalculator.adjustPaces(D,1.15)}}}const E=l||b.weeksRecommended,S=o||a;if(!S)throw new Error("workoutsPerWeek or runsPerWeek is required");const A=this.calculateWeeklyStructure(b,S,u,f,g,y,v,p,w),C=this.createPeriodization(E,t),T=[];for(let c=1;c<=E;c++){const e=this.generateWeekPlan(c,E,b,A,C,x,s,u,d,h,m);T.push(e)}if(r&&T.length>0){const e=T[T.length-1],n=A.longRunDay||"Saturday";Oe.A.log("\ud83c\udfc1 Race Day Feature:"),Oe.A.log("  Race Date:",r),Oe.A.log("  Long Run Day Name:",n),Oe.A.log("  Final Week Workouts:",e.workouts.map(e=>{var t;return{day:e.day,type:e.type,distance:e.distance,workoutName:null===(t=e.workout)||void 0===t?void 0:t.name}}));let i=e.workouts.findIndex(e=>"longRun"===e.type);if(Oe.A.log("  Strategy 1 (type=longRun): index =",i),-1===i&&(i=e.workouts.findIndex(e=>e.day===n),Oe.A.log("  Strategy 2 (day="+n+"): index =",i)),-1===i){let t=0;e.workouts.forEach((e,n)=>{"rest"!==e.type&&e.distance>t&&(t=e.distance,i=n)}),Oe.A.log("  Strategy 3 (longest distance): index =",i)}if(-1!==i){const n=this.generateRaceDayWorkout(t,r);Oe.A.log("  Replacing workout at index",i,"with Race Day"),Oe.A.log("  Old workout:",e.workouts[i]),e.workouts[i]={day:e.workouts[i].day,type:n.type,distance:n.distance,focus:n.focus,workout:{name:n.name,description:n.description,structure:n.structure,about:n.about,notes:n.notes,equipment:n.equipment}},Oe.A.log("  New workout:",e.workouts[i]),Oe.A.log("\u2705 Race Day workout added to final week on ".concat(e.workouts[i].day))}else console.error("\u274c Could not find suitable workout to replace with Race Day in final week!"),console.error("   This is a bug - please report this issue")}else r||Oe.A.log("\u2139\ufe0f No race date provided - skipping Race Day feature");return{planOverview:(0,c.A)({raceDistance:t,raceTime:n,workoutsPerWeek:S,runsPerWeek:S,totalWeeks:E,runEqPreference:s,experienceLevel:u,standUpBikeType:d},x.useProgression&&{paceProgression:{currentFitnessPaces:x.current.paces,goalPaces:x.goal.paces,strategy:"Progressive blending from current fitness to goal paces"}}),trainingPaces:x.useProgression?x.goal.paces:x.paces||x,currentFitnessPaces:x.useProgression?x.current.paces:null,trackIntervals:x.useProgression?x.goal.trackIntervals:x.trackIntervals||null,periodization:C,weeklyStructure:A,weeks:T,planSummary:this.generatePlanSummary(T,b)}}calculateWeeklyStructure(e,t,n,r,i,o,a,s,l){const c=(e.workoutsPerWeek||e.runsPerWeek).indexOf(t);if(-1===c)throw new Error("".concat(t," workouts per week not supported for this distance"));Oe.A.log("\ud83d\udcca calculateWeeklyStructure received:"),Oe.A.log("  hardSessionDays:",i),Oe.A.log("  availableDays:",r),Oe.A.log("  longRunDay:",o),Oe.A.log("  preferredBikeDays:",a),Oe.A.log("  currentWeeklyMileage:",s),Oe.A.log("\ud83d\udcca DIAGNOSTIC - Template values at structure creation:"),Oe.A.log("  template.peakWeeklyMileage array:",e.peakWeeklyMileage),Oe.A.log("  template.longRunMax array:",e.longRunMax),Oe.A.log("  runIndex:",c,"(for",t,"workouts/week)"),Oe.A.log("  Selected peakMileage:",e.peakWeeklyMileage[c]),Oe.A.log("  Selected longRunMax:",e.longRunMax[c]);const u={workoutsPerWeek:t,runsPerWeek:t,peakMileage:e.peakWeeklyMileage[c],longRunMax:e.longRunMax[c],currentWeeklyMileage:s,currentLongRunDistance:0,availableDays:r||this.getDefaultAvailableDays(t),hardSessionDays:i||[],longRunDay:o||"Saturday",preferredBikeDays:a||[],restDays:7-t,startDay:l};return u.easyDays=u.availableDays.filter(e=>!u.hardSessionDays.includes(e)&&!u.preferredBikeDays.includes(e)&&e!==u.longRunDay),"beginner"===n?(u.peakMileage*=.8,u.longRunMax*=.9):"advanced"===n&&(u.peakMileage*=1.15,u.longRunMax*=1.1),u}getDefaultAvailableDays(e){const t={3:["Monday","Wednesday","Saturday"],4:["Monday","Wednesday","Friday","Saturday"],5:["Monday","Wednesday","Thursday","Friday","Saturday"],6:["Monday","Tuesday","Wednesday","Friday","Saturday","Sunday"],7:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]};return t[e]||t[4]}createPeriodization(e,t){const n=[],r=Math.max(2,Math.ceil(.1*e));if(e<=8){const t=e-r;n.push({phase:"base",weeks:Math.ceil(.5*t)}),n.push({phase:"build",weeks:Math.floor(.35*t)}),n.push({phase:"peak",weeks:Math.floor(.15*t)}),n.push({phase:"taper",weeks:r})}else if(e<=12){const t=e-r;n.push({phase:"base",weeks:Math.ceil(.45*t)}),n.push({phase:"build",weeks:Math.ceil(.35*t)}),n.push({phase:"peak",weeks:Math.floor(.2*t)}),n.push({phase:"taper",weeks:r})}else{const t=e-r;n.push({phase:"base",weeks:Math.ceil(.4*t)}),n.push({phase:"build",weeks:Math.ceil(.35*t)}),n.push({phase:"peak",weeks:Math.floor(.25*t)}),n.push({phase:"taper",weeks:r})}let i=0;return n.forEach(e=>{e.startWeek=i+1,e.endWeek=i+e.weeks,i+=e.weeks}),n}generateWeekPlan(e,t,n,r,i,o,a,s,l){let c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"active",u=!(arguments.length>10&&void 0!==arguments[10])||arguments[10];this.workoutHistory||(this.workoutHistory={intervals:[],tempo:[],hills:[]});const d=i.find(t=>e>=t.startWeek&&e<=t.endWeek);let h;d&&(d.weekInPhase=e-d.startWeek+1),o.useProgression?(h=this.paceCalculator.blendPaces(o.current,o.goal,e,t),Oe.A.log("\ud83c\udfaf Week ".concat(e," pace blend: ").concat(Math.round(100*h.progressionRatio),"% toward goal"))):h=o;const p=e%4===0&&e<t-2,m=r.currentWeeklyMileage||Math.round(.5*r.peakMileage),f=t-2;let g;if(Oe.A.log("\ud83d\udcd0 Week ".concat(e," mileage calculation:"),{weekNumber:e,weekNumberType:typeof e,startingMileage:m,peakMileage:r.peakMileage,buildWeeks:f,checkWeek1:1===e,currentWeeklyMileage:r.currentWeeklyMileage}),1===e)g=m,Oe.A.log("   \u2705 Week 1 detected - using startingMileage: ".concat(g));else if(e>=t-1)g=Math.round(r.peakMileage*(e===t?.6:.7));else if(p){const t=m+(r.peakMileage-m)*(e/f);g=Math.round(.75*t)}else g=Math.round(m+(r.peakMileage-m)*(e/f));Oe.A.log("\ud83d\udcc5 Week ".concat(e,": ").concat(g," miles (start: ").concat(m,", peak: ").concat(r.peakMileage,", isRest: ").concat(p,", phase: ").concat(d.phase,")"));const y=this.generateWeekWorkouts(r.workoutsPerWeek||r.runsPerWeek,g,d,n,h,a,s,e,t,l,r,c,u,p);return{week:e,phase:d.phase,isRestWeek:p,totalMileage:g,workouts:y,weekFocus:this.getWeekFocus(d.phase,n.focusAreas),notes:this.generateWeekNotes(d.phase,p,e,t)}}generateWeekWorkouts(e,t,n,r,i,o,a,s,l,c,u){let d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"active",h=!(arguments.length>12&&void 0!==arguments[12])||arguments[12],p=arguments.length>13&&void 0!==arguments[13]&&arguments[13];const m=[],f=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],{availableDays:g,hardSessionDays:y,longRunDay:v,preferredBikeDays:w,easyDays:b}=u;Oe.A.log("\n\ud83d\uddd3\ufe0f Week ".concat(s," Workout Generation:")),Oe.A.log("  runningStatus:",d),Oe.A.log("  availableDays:",g),Oe.A.log("  hardSessionDays:",y),Oe.A.log("  longRunDay:",v),Oe.A.log("  preferredBikeDays:",w),Oe.A.log("  easyDays:",b);const k=this.calculateLongRunDistance(t,e,s,l,u.currentLongRunDistance,u.longRunMax),D=t-k,x=Math.round(D/(e-1)),E=p?.8:1,S=e=>{let t;switch(e){case"tempo":t=Math.round(1.4*x);break;case"intervals":t=Math.round(1.25*x);break;case"hills":t=Math.round(1.2*x);break;case"bike":case"recovery":t=Math.round(.8*x);break;default:t=x}return Math.round(t*E)};let A=0;if(s===l){Oe.A.log("\ud83c\udfc1 RACE WEEK DETECTED - Enforcing taper schedule");const e=Math.round(.35*t),r=2;return f.forEach(t=>{if("Monday"===t||"Tuesday"===t)if(g.includes(t)){const n=Math.round(.4*e),r=i.paces||i;m.push({day:t,type:"easy",workout:this.generateEasyRun(n,o,r),distance:n,focus:"Recovery"})}else m.push({day:t,type:"rest",workout:{name:"Rest Day",description:"Complete rest"},distance:0,focus:"Recovery"});else if("Wednesday"===t)if(g.includes(t)){const e=i.paces||i;m.push({day:t,type:"easy",workout:this.generateEasyRun(r,o,e),distance:r,focus:"Shakeout"})}else m.push({day:t,type:"rest",workout:{name:"Rest Day",description:"Complete rest"},distance:0,focus:"Recovery"});else if("Thursday"===t||"Friday"===t)m.push({day:t,type:"rest",workout:{name:"Rest Day",description:"Complete rest before race"},distance:0,focus:"Recovery"});else if("Saturday"===t)if(g.includes(t)){const e=i.paces||i;m.push({day:t,type:"easy",workout:this.generateEasyRun(r,o,e),distance:r,focus:"Shakeout"})}else m.push({day:t,type:"rest",workout:{name:"Rest Day",description:"Complete rest before race"},distance:0,focus:"Recovery"});else"Sunday"===t&&m.push({day:t,type:"longRun",workout:this.selectLongRunWorkout(n,k,o,i.paces||i),distance:k,focus:"Race Day"})}),Oe.A.log("\u2705 Race week taper schedule generated (".concat(e," miles total)")),m}const C=u.startDay,T=1===s&&C?f.slice(f.indexOf(C)):f;return Oe.A.log("\ud83d\udcc5 Week ".concat(s," - Generating workouts for:"),T.join(", ")),T.forEach(e=>{if(Oe.A.log("\n  \ud83d\udccd Processing ".concat(e,":")),Oe.A.log("     availableDays.includes('".concat(e,"'):"),g.includes(e)),Oe.A.log("     hardSessionDays.includes('".concat(e,"'):"),y.includes(e)),Oe.A.log("     preferredBikeDays.includes('".concat(e,"'):"),w.includes(e)),Oe.A.log("     day === longRunDay ('".concat(v,"'):"),e===v),!g.includes(e))return Oe.A.log("     \u26d4 Result: REST DAY (not in availableDays)"),void m.push({day:e,type:"rest",workout:{name:"Rest Day",description:"Complete rest or light cross-training"},distance:0,focus:"Recovery"});if(e===v)if("bikeOnly"===d||"crossTrainingOnly"===d)Oe.A.log("     \u2705 Result: LONG BIKE RIDE (bike-only mode)"),m.push({day:e,type:"bike",workout:this.selectStandUpBikeWorkout("long_endurance",n,c,k,h),distance:k,focus:"Endurance",equipmentSpecific:!0});else{Oe.A.log("     \u2705 Result: LONG RUN");const t=i.paces||i;m.push({day:e,type:"longRun",workout:this.selectLongRunWorkout(n,k,o,t),distance:k,focus:"Endurance"})}else if(y.includes(e)&&w.includes(e)&&c&&(s!==l-1||"taper"!==n.phase)){Oe.A.log("     \u2705 Result: HARD BIKE SESSION (hard day + bike day, hardSessionIndex: ".concat(A,")"));const t=["tempo","intervals","aerobic_power"],r=t[A%t.length],i=S(r);m.push({day:e,type:"bike",workout:this.selectStandUpBikeWorkout(r,n,c,i,h),distance:i,focus:"tempo"===r?"Lactate Threshold":"Speed & Power",equipmentSpecific:!0}),A++}else if(!y.includes(e)||s===l-1&&"taper"===n.phase)if(w.includes(e)&&c){Oe.A.log("     \u2705 Result: BIKE DAY");const t="aerobic_base",r=S("bike");m.push({day:e,type:"bike",workout:this.selectStandUpBikeWorkout(t,n,c,r),distance:r,focus:"Aerobic Base",equipmentSpecific:!0})}else if("bikeOnly"===d||"crossTrainingOnly"===d){Oe.A.log("     \u2705 Result: EASY BIKE RIDE (bike-only mode)");const t=S("recovery");m.push({day:e,type:"bike",workout:this.selectStandUpBikeWorkout("recovery",n,c,t),distance:t,focus:"Recovery",equipmentSpecific:!0})}else{Oe.A.log("     \u2705 Result: EASY RUN");const t=i.paces||i,n=S("easy");m.push({day:e,type:"easy",workout:this.generateEasyRun(n,o,t),distance:n,focus:"Recovery"})}else if("bikeOnly"===d||"crossTrainingOnly"===d){Oe.A.log("     \u2705 Result: HARD BIKE SESSION (bike-only mode, hardSessionIndex: ".concat(A,")"));const t=["tempo","intervals","aerobic_power"],r=t[A%t.length],i=S(r);m.push({day:e,type:"bike",workout:this.selectStandUpBikeWorkout(r,n,c,i,h),distance:i,focus:"tempo"===r?"Lactate Threshold":"Speed & Power",equipmentSpecific:!0}),A++}else{Oe.A.log("     \u2705 Result: HARD RUN SESSION (hardSessionIndex: ".concat(A,")"));let t=this.selectWorkoutType(A,n,r);p&&(Oe.A.log("     \ud83d\udd04 Recovery Week: Downgrading ".concat(t," intensity")),"intervals"===t?t="intervals_recovery":"tempo"===t?t="tempo_recovery":"hills"===t&&(t="hills_recovery"));const a=S(t);m.push({day:e,type:t,workout:this.selectQualityWorkout(t,n,a,o,i,s,l,p),distance:a,focus:this.getWorkoutFocus(t)}),A++}}),m}selectWorkoutType(e,t,n){this.trainingPhases[t.phase];const r=t.weekInPhase||1,i=r/(t.endWeek-t.startWeek+1);let o;switch(t.phase){case"base":o=r<=3?["tempo","hills","tempo"]:r<=5?["tempo","hills","intervals"]:["tempo","intervals","hills"];break;case"build":o=i<.5?["tempo","intervals","hills"]:["intervals","tempo","hills"];break;case"peak":o=["intervals","tempo","intervals"];break;case"taper":o=["tempo","intervals"];break;default:o=["tempo","intervals","hills"]}return o[e%o.length]}selectQualityWorkout(e,t,n,r,i,o,a){this.trainingPhases[t.phase];const s=i.paces||i,l=i.trackIntervals||null;if("intervals_recovery"===e)return this.selectIntervalWorkout(t,r,s,l,o,a,"MIXED_INTERVALS");if("tempo_recovery"===e)return this.selectTempoWorkout(t,r,s,o,a,"TRADITIONAL_TEMPO");if("hills_recovery"===e)return this.selectHillWorkout(t,r,s,o,a,"short_power");switch(e){case"hills":return this.selectHillWorkout(t,r,s,o,a);case"tempo":return this.selectTempoWorkout(t,r,s,o,a);case"intervals":return this.selectIntervalWorkout(t,r,s,l,o,a);default:return this.generateEasyRun(n,r,s)}}selectHillWorkout(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const a=this.trainingPhases[e.phase],s=o||a.hillFocus,l=this.hillLibrary.getWorkoutsByCategory(s);if(0===l.length){const e=Object.values(this.hillLibrary.workoutLibrary).flat(),r=this.selectWorkoutAvoidingRepetition(e,"hills");return this.hillLibrary.prescribeHillWorkout(r.name,{runEqPreference:t,paces:n})}const c=this.selectWorkoutAvoidingRepetition(l,"hills");return this.hillLibrary.prescribeHillWorkout(c.name,{runEqPreference:t,paces:n})}selectTempoWorkout(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this.trainingPhases[e.phase];let a;if(o)a=o;else{a={base:"TRADITIONAL_TEMPO",build:"TEMPO_INTERVALS",peak:"RACE_SPECIFIC",taper:"ALTERNATING_TEMPO"}[e.phase]}const s=this.tempoLibrary.getWorkoutsByCategory(a),l=this.selectWorkoutAvoidingRepetition(s,"tempo");return this.tempoLibrary.prescribeTempoWorkout(l.name,{runEqPreference:t,paces:n,weekNumber:r,totalWeeks:i})}selectIntervalWorkout(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.trainingPhases[e.phase];let s;if(a)s=a;else{s={base:"LONG_INTERVALS",build:"VO2_MAX",peak:"SHORT_SPEED",taper:"MIXED_INTERVALS"}[e.phase]}const l=this.intervalLibrary.getWorkoutsByCategory(s),c=this.selectWorkoutAvoidingRepetition(l,"intervals"),u=this.calculateSpecificReps(c.repetitions,i,o);return this.intervalLibrary.prescribeIntervalWorkout(c.name,{runEqPreference:t,paces:n,trackIntervals:r,specificReps:u,weekNumber:i,totalWeeks:o})}selectLongRunWorkout(e,t,n,r){const i={easy:"TRADITIONAL_EASY",progressive:"PROGRESSIVE_RUNS",raceSimulation:"RACE_SIMULATION",traditional_easy:"TRADITIONAL_EASY"}[this.trainingPhases[e.phase].longRunEmphasis]||"TRADITIONAL_EASY",o=this.longRunLibrary.getWorkoutsByCategory(i),a=o[Math.floor(Math.random()*o.length)];return this.longRunLibrary.prescribeLongRunWorkout(a.name,{runEqPreference:n,distance:t,paces:r})}generateEasyRun(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r={optionA:"Full easy running",optionB:"First half running, second half stand-up bike",optionC:"Full stand-up bike (2x time conversion)",recommendation:t>=50?"Split or full bike workout":"Full running"};let i="".concat(e," miles at easy pace"),o="Conversational pace, aerobic base building";return n&&n.easy&&(i="".concat(e," miles at easy pace (").concat(n.easy.min,"-").concat(n.easy.max,"/mile)"),o="Conversational pace (".concat(n.easy.min,"-").concat(n.easy.max,"/mile), aerobic base building")),{name:"Easy Run",description:o,structure:i,intensity:"easy",benefits:"Aerobic development, recovery, base building",runEqOptions:r,paces:n,notes:"Should feel refreshed after this run, not fatigued"}}calculateLongRunDistance(e,t,n,r,i,o){if(!i||!o||!n||!r){Oe.A.warn("\u26a0\ufe0f Missing long run parameters, using percentage fallback");const n=t<=4?.35:.3;return Math.round(e*n)}const a=Math.floor(.8*r);if(n<=a){const e=(n-1)/(a-1),t=i+e*(o-i),r=Math.round(t);return Oe.A.log("  \ud83d\udccf Week ".concat(n," Long Run: ").concat(r," miles (").concat(Math.round(100*e),"% build: ").concat(i,"\u2192").concat(o,")")),r}{const e=Math.round(.75*o);return Oe.A.log("  \ud83d\udccf Week ".concat(n," Long Run: ").concat(e," miles (taper: 75% of ").concat(o,")")),e}}getWorkoutFocus(e){return{hills:"Power & Strength",tempo:"Lactate Threshold",intervals:"VO2 Max & Speed",easy:"Aerobic Base",longRun:"Endurance"}[e]||"General Fitness"}getWeekFocus(e,t){const n=this.trainingPhases[e];return"".concat(n.name,": ").concat(n.focus)}generateWeekNotes(e,t,n,r){const i=[];t&&i.push("RECOVERY WEEK: Reduced volume to allow adaptation and recovery");const o=this.trainingPhases[e];return i.push("Focus: ".concat(o.focus)),"peak"===e&&n>r-4&&i.push("Peak phase: Focus on race-specific workouts and maintaining sharpness"),"taper"===e&&i.push("Taper phase: Maintain intensity but reduce volume for race readiness"),i}generatePlanSummary(e,t){const n=e.reduce((e,t)=>e+t.workouts.filter(e=>"rest"!==e.type).length,0),r=e.reduce((e,t)=>(t.workouts.forEach(t=>{e[t.type]=(e[t.type]||0)+1}),e),{}),i=e.reduce((e,t)=>e+t.totalMileage,0);return{totalWorkouts:n,totalMiles:i,workoutBreakdown:r,averageWeeklyMiles:Math.round(i/e.length),peakWeekMiles:Math.max(...e.map(e=>e.totalMileage)),varietyScore:Object.keys(r).length}}selectWorkoutAvoidingRepetition(e,t){if(!e||0===e.length)throw new Error("No workouts available for type: ".concat(t));if(this.workoutHistory||(this.workoutHistory={intervals:[],tempo:[],hills:[]}),this.workoutHistory[t]||(this.workoutHistory[t]=[]),e.length<=2){const n=this.workoutHistory[t][this.workoutHistory[t].length-1],r=e.filter(e=>e.name!==n);if(r.length>0){const e=r[Math.floor(Math.random()*r.length)];return this.workoutHistory[t].push(e.name),Oe.A.log("  \ud83c\udfb2 Selected ".concat(t,': "').concat(e.name,'" (avoided: ').concat(n||"none",")")),e}const i=e[Math.floor(Math.random()*e.length)];return this.workoutHistory[t].push(i.name),Oe.A.log("  \ud83c\udfb2 Selected ".concat(t,': "').concat(i.name,'" (only option available)')),i}const n=this.workoutHistory[t].slice(-2),r=e.filter(e=>!n.includes(e.name));if(0===r.length){Oe.A.log("  \u26a0\ufe0f All ".concat(t," workouts recently used, resetting history")),this.workoutHistory[t]=[];const n=e[Math.floor(Math.random()*e.length)];return this.workoutHistory[t].push(n.name),Oe.A.log("  \ud83c\udfb2 Selected ".concat(t,': "').concat(n.name,'" (after reset)')),n}const i=r[Math.floor(Math.random()*r.length)];return this.workoutHistory[t].push(i.name),Oe.A.log("  \ud83c\udfb2 Selected ".concat(t,': "').concat(i.name,'" (avoided: ').concat(n.join(", ")||"none",")")),this.workoutHistory[t].length>5&&this.workoutHistory[t].shift(),i}calculateSpecificReps(e,t,n){const r=e.match(/(\d+)-(\d+)/);if(!r)return e;const i=parseInt(r[1],10),o=parseInt(r[2],10),a=Math.min(1,t/(.75*n)),s=Math.round(i+a*(o-i));return e.replace(/(\d+)-(\d+)/,s.toString())}selectStandUpBikeWorkoutType(e,t,n){this.trainingPhases[t.phase];const r={base:["aerobic_base","tempo_efforts","recovery_specific"],build:["tempo_efforts","high_intensity","technique_specific"],peak:["high_intensity","race_specific","tempo_efforts"],taper:["technique_specific","recovery_specific","race_specific"]}[t.phase];return r[e%r.length]}selectStandUpBikeWorkout(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const o={tempo:"TEMPO_BIKE",intervals:"INTERVAL_BIKE",aerobic_power:"POWER_RESISTANCE",long_endurance:"LONG_ENDURANCE_RIDES",recovery:"RECOVERY_SPECIFIC",aerobic_base:"AEROBIC_BASE",technique_specific:"TECHNIQUE_SPECIFIC"}[e]||"AEROBIC_BASE",a=this.standUpBikeLibrary.workoutLibrary[o];if(!a||0===a.length){const e=Object.values(this.standUpBikeLibrary.workoutLibrary).flat().filter(e=>e.equipment===n||"both"===e.equipment);if(e.length>0){const t=e[Math.floor(Math.random()*e.length)];return this.standUpBikeLibrary.prescribeStandUpBikeWorkout(t.name,n,{targetDistance:r,hasGarmin:i})}}const s=a.filter(e=>e.equipment===n||"both"===e.equipment);if(0===s.length){const e=a.filter(e=>"both"===e.equipment);if(e.length>0){const t=e[Math.floor(Math.random()*e.length)];return this.standUpBikeLibrary.prescribeStandUpBikeWorkout(t.name,n,{targetDistance:r,hasGarmin:i})}}const l=s[Math.floor(Math.random()*s.length)];return this.standUpBikeLibrary.prescribeStandUpBikeWorkout(l.name,n,{targetDistance:r,hasGarmin:i})}generateRaceDayWorkout(e,t){const n={"5K":{miles:3.1,name:"5K"},"10K":{miles:6.2,name:"10K"},Half:{miles:13.1,name:"Half Marathon"},Marathon:{miles:26.2,name:"Marathon"}}[e]||{miles:parseFloat(e)||13.1,name:e},r={"5K":["\ud83c\udfaf Race Strategy: Start controlled, hit race pace by mile 1, build through mile 2, empty the tank in the final 800m","\u23f1\ufe0f Pacing: This is a fast race - don't go out too hard, but don't be afraid to hurt","\ud83d\udcaa Mental Game: Pain is temporary, your PR time is forever","\ud83d\udd25 The last mile is where races are won - stay strong and finish fast!"],"10K":["\ud83c\udfaf Race Strategy: First 5K controlled at goal pace, second 5K at effort (pace will feel harder but stay consistent)","\u23f1\ufe0f Pacing: Even splits are your friend - negative splits are magic","\ud83d\udcaa Mental Game: The middle miles (2-4) are where mental toughness counts","\ud83c\udfc1 Final kilometer: Give everything you've got left!"],Half:["\ud83c\udfaf Race Strategy: Miles 1-6 feel easy, 7-10 at goal pace, 11-13 dig deep","\u23f1\ufe0f Pacing: First half should feel controlled - if you're working hard before mile 8, you went too fast","\ud83d\udcaa Mental Game: Mile 10 is the real start of the race - this is where your training pays off","\ud83d\udd25 The final 5K is all guts - trust your training and push through","\ud83d\udca7 Hydration: Take water at every aid station, even if just a sip"],Marathon:["\ud83c\udfaf Race Strategy: Miles 1-16 should feel easy and controlled, 17-20 maintain focus, 21-26 is the real race","\u23f1\ufe0f Pacing: The first 20 miles are the warmup for the last 6 miles",'\ud83d\udcaa Mental Game: "The wall" at mile 20 is real - but your training prepared you for this',"\ud83d\udd25 When it gets hard around mile 20, remember: this is why you trained","\ud83d\udca7 Hydration & Fuel: Take water/electrolytes at every station, fuel every 45min starting at mile 6","\ud83e\udde0 Break it down: Focus on one mile at a time, not the distance remaining","\u2728 You've got this - you've already done the hard work in training!"]}[e]||["\ud83c\udfaf Race Strategy: Start controlled, settle into your pace, finish strong","\u23f1\ufe0f Pacing: Even effort throughout, trust your training","\ud83d\udcaa Mental Game: Stay present, stay strong, stay focused","\ud83d\udd25 This is your day - go get it!"],i=t?new Date(t+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Race Day";return{name:"\ud83c\udfc1 RACE DAY - ".concat(n.name),type:"race",distance:n.miles,structure:"Your ".concat(n.name," race - ").concat(n.miles," miles"),description:r.join("\n\n"),about:"Today is what you've been training for! Trust your preparation, execute your race plan, and leave it all out there. You're ready for this.",focus:"Race Performance",notes:"Race Date: ".concat(i),equipment:"running"}}}const Ye={beginner:{peakMileage:.8,longRunMax:.95,description:"Conservative approach - prioritizes consistency over volume"},intermediate:{peakMileage:1,longRunMax:1,description:"Balanced approach - standard progression"},advanced:{peakMileage:1.15,longRunMax:1.1,description:"Aggressive approach - maximizes training stimulus"}};function Ge(e){const t=e>=20?3:2,n=e-t;let r,i,o;e<=14?(r=.25,i=.55,o=.2):e>=24?(r=.35,i=.45,o=.2):(r=.3,i=.5,o=.2);const a=Math.round(n*r),s=Math.round(n*o),l=n-a-s;return{base:{weeks:a,startWeek:1,endWeek:a},build:{weeks:l,startWeek:a+1,endWeek:a+l},peak:{weeks:s,startWeek:a+l+1,endWeek:a+l+s},taper:{weeks:t,startWeek:e-t+1,endWeek:e},totalBuildWeeks:n}}function Qe(e){if(e<=12)return.1;if(e>=28)return.04;return.1-(e-12)/16*(.1-.04)}function Xe(e,t,n,r){const i=Ge(r);if(e>=i.taper.startWeek){const t=1-.2*(e-i.taper.startWeek+1);return Math.round(n*Math.max(t,.4))}const o=e,a=t+(n-t)*(o/i.totalBuildWeeks);return 2===(o-1)%3?Math.round(.9*a):Math.round(a)}function Ze(e,t,n,r){const i=Ge(r);if(e>=i.taper.startWeek){const t=e-i.taper.startWeek+1;return 1===t?Math.round(.65*n):2===t?Math.round(.5*n):Math.round(.35*n)}const o=e,a=t+(n-t)*(o/i.totalBuildWeeks),s=(o-1)%3;return 0===s?Math.round(a):1===s?Math.min(Math.round(1.08*a),n):Math.round(Math.max(a-2,.85*a))}function Je(e,t,n,r){const i=n||"intermediate",o=Ye[i]||Ye.intermediate,a=Math.round(e*o.peakMileage),s=Math.round(t*o.longRunMax),l=Math.max(s,r);return s<r&&Oe.A.info("Long run floor applied: ".concat(s," raised to ").concat(r," (race minimum)")),{peakMileage:a,longRunMax:l,experienceLevel:i,multipliers:o,basePeakMileage:e,baseLongRunMax:t}}function $e(e,t){return e<=t.base.endWeek?"base":e<=t.build.endWeek?"build":e<=t.peak.endWeek?"peak":"taper"}const et={EXPERIENCE_MULTIPLIERS:Ye,calculatePhaseDistribution:Ge,calculateWeeklyGrowthRate:Qe,calculateWeeklyMileage:Xe,calculateWeeklyLongRun:Ze,applyExperienceAdjustments:Je,getPhaseForWeek:$e},tt={distance:"5K",distanceMiles:3.1,peakWeeklyMileageCap:45,longRunMax:12,longRunFloor:5,longRunPercentage:.3,minimumLongRunTarget:6,workoutPercentages:{tempo:.18,interval:.12,hill:.12},workoutBounds:{tempo:{min:3,max:6},interval:{min:3,max:5},hill:{min:3,max:5}}};function nt(e,t){const n=Ge(t),r=Qe(t),i=Math.floor(n.totalBuildWeeks/3),o=2*i,a=e*Math.pow(1+r,o),s=Math.min(Math.round(a),tt.peakWeeklyMileageCap);return Oe.A.info("5K Peak mileage: ".concat(e," \u2192 ").concat(s," mpw (").concat(i," cycles, ").concat((100*r).toFixed(1),"% rate)")),s}function rt(e,t,n){const r=e+.5*Ge(t).totalBuildWeeks,i=n*tt.longRunPercentage,o=Math.min(Math.round(r),tt.longRunMax,Math.round(i));return o<tt.minimumLongRunTarget&&Oe.A.warn("\u26a0\ufe0f 5K Plan: Can only reach ".concat(o," mile long run, typically needs ").concat(tt.minimumLongRunTarget,"+ miles")),Oe.A.info("5K Long run: ".concat(e," \u2192 ").concat(o," miles")),o}function it(e,t){const n=tt.workoutPercentages[t]||.15,r=tt.workoutBounds[t]||{min:3,max:5},i=e*n;return Math.round(Math.min(Math.max(i,r.min),r.max))}const ot={RACE_PARAMS:tt,calculatePeakMileage:nt,calculateLongRunMax:rt,calculateWorkoutDistance:it,generatePlan:function(e){const{currentWeeklyMileage:t,currentLongRun:n,totalWeeks:r,experienceLevel:i}=e;Oe.A.info("\n\ud83d\udcca 5K PLAN CALCULATOR"),Oe.A.info("Input: ".concat(t," mpw, ").concat(n," mi long run, ").concat(r," weeks"));const o=nt(t,r),a=Je(o,rt(n,r,o),i,tt.longRunFloor),s=Ge(r),l=[];for(let c=1;c<=r;c++){const e=Xe(c,t,a.peakMileage,r),i=Ze(c,n,a.longRunMax,r),o=$e(c,s);l.push({weekNumber:c,phase:o,weeklyMileage:e,longRun:i,tempoDistance:it(e,"tempo"),intervalDistance:it(e,"interval"),hillDistance:it(e,"hill")})}return{raceDistance:"5K",inputs:e,experienceLevel:a,targets:{peakWeeklyMileage:a.peakMileage,longRunMax:a.longRunMax,growthRate:Qe(r)},phases:s,weeks:l,raceParams:tt}}},at={distance:"10K",distanceMiles:6.2,peakWeeklyMileageCap:55,longRunMax:15,longRunFloor:7,longRunPercentage:.3,minimumLongRunTarget:8,workoutPercentages:{tempo:.18,interval:.14,hill:.12},workoutBounds:{tempo:{min:4,max:7},interval:{min:4,max:6},hill:{min:3,max:5}}};function st(e,t){const n=Ge(t),r=Qe(t),i=Math.floor(n.totalBuildWeeks/3),o=2*i,a=e*Math.pow(1+r,o),s=Math.min(Math.round(a),at.peakWeeklyMileageCap);return Oe.A.info("10K Peak mileage: ".concat(e," \u2192 ").concat(s," mpw (").concat(i," cycles, ").concat((100*r).toFixed(1),"% rate)")),s}function lt(e,t,n){const r=e+.5*Ge(t).totalBuildWeeks,i=n*at.longRunPercentage,o=Math.min(Math.round(r),at.longRunMax,Math.round(i));return o<at.minimumLongRunTarget&&Oe.A.warn("\u26a0\ufe0f 10K Plan: Can only reach ".concat(o," mile long run, typically needs ").concat(at.minimumLongRunTarget,"+ miles")),Oe.A.info("10K Long run: ".concat(e," \u2192 ").concat(o," miles")),o}function ct(e,t){const n=at.workoutPercentages[t]||.15,r=at.workoutBounds[t]||{min:4,max:6},i=e*n;return Math.round(Math.min(Math.max(i,r.min),r.max))}const ut={RACE_PARAMS:at,calculatePeakMileage:st,calculateLongRunMax:lt,calculateWorkoutDistance:ct,generatePlan:function(e){const{currentWeeklyMileage:t,currentLongRun:n,totalWeeks:r,experienceLevel:i}=e;Oe.A.info("\n\ud83d\udcca 10K PLAN CALCULATOR"),Oe.A.info("Input: ".concat(t," mpw, ").concat(n," mi long run, ").concat(r," weeks"));const o=st(t,r),a=Je(o,lt(n,r,o),i,at.longRunFloor),s=Ge(r),l=[];for(let c=1;c<=r;c++){const e=Xe(c,t,a.peakMileage,r),i=Ze(c,n,a.longRunMax,r),o=$e(c,s);l.push({weekNumber:c,phase:o,weeklyMileage:e,longRun:i,tempoDistance:ct(e,"tempo"),intervalDistance:ct(e,"interval"),hillDistance:ct(e,"hill")})}return{raceDistance:"10K",inputs:e,experienceLevel:a,targets:{peakWeeklyMileage:a.peakMileage,longRunMax:a.longRunMax,growthRate:Qe(r)},phases:s,weeks:l,raceParams:at}}},dt={distance:"Half Marathon",distanceMiles:13.1,peakWeeklyMileageCap:60,longRunMax:15,longRunFloor:12,longRunPercentage:.35,minimumLongRunTarget:12,workoutPercentages:{tempo:.18,interval:.14,hill:.12},workoutBounds:{tempo:{min:4,max:8},interval:{min:4,max:7},hill:{min:4,max:6}}};function ht(e,t){const n=Ge(t),r=Qe(t),i=Math.floor(n.totalBuildWeeks/3),o=2*i,a=e*Math.pow(1+r,o),s=Math.min(Math.round(a),dt.peakWeeklyMileageCap);return Oe.A.info("Half Marathon Peak mileage: ".concat(e," \u2192 ").concat(s," mpw (").concat(i," cycles, ").concat((100*r).toFixed(1),"% rate)")),s}function pt(e,t,n){const r=Ge(t),i=Math.max(0,dt.minimumLongRunTarget-e)/r.totalBuildWeeks,o=Math.min(Math.max(.5,i),.75),a=e+r.totalBuildWeeks*o,s=n*dt.longRunPercentage,l=Math.min(Math.round(a),dt.longRunMax,Math.round(s));return l<dt.minimumLongRunTarget&&Oe.A.warn("\u26a0\ufe0f Half Marathon Plan: Can only reach ".concat(l," mile long run, typically needs ").concat(dt.minimumLongRunTarget,"+ miles. User may need higher base mileage or longer plan.")),Oe.A.info("Half Marathon Long run: ".concat(e," \u2192 ").concat(l," miles (growth rate: ").concat(o.toFixed(2)," mi/wk)")),l}function mt(e,t){const n=dt.workoutPercentages[t]||.15,r=dt.workoutBounds[t]||{min:4,max:7},i=e*n;return Math.round(Math.min(Math.max(i,r.min),r.max))}const ft={RACE_PARAMS:dt,calculatePeakMileage:ht,calculateLongRunMax:pt,calculateWorkoutDistance:mt,generatePlan:function(e){const{currentWeeklyMileage:t,currentLongRun:n,totalWeeks:r,experienceLevel:i}=e;Oe.A.info("\n\ud83d\udcca HALF MARATHON PLAN CALCULATOR"),Oe.A.info("Input: ".concat(t," mpw, ").concat(n," mi long run, ").concat(r," weeks"));const o=ht(t,r),a=Je(o,pt(n,r,o),i,dt.longRunFloor),s=Ge(r),l=[];for(let c=1;c<=r;c++){const e=Xe(c,t,a.peakMileage,r),i=Ze(c,n,a.longRunMax,r),o=$e(c,s);l.push({weekNumber:c,phase:o,weeklyMileage:e,longRun:i,tempoDistance:mt(e,"tempo"),intervalDistance:mt(e,"interval"),hillDistance:mt(e,"hill")})}return{raceDistance:"Half Marathon",inputs:e,experienceLevel:a,targets:{peakWeeklyMileage:a.peakMileage,longRunMax:a.longRunMax,growthRate:Qe(r)},phases:s,weeks:l,raceParams:dt}}},gt={distance:"Marathon",distanceMiles:26.2,peakWeeklyMileageCap:75,longRunMax:23,longRunFloor:20,longRunPercentage:.35,minimumLongRunTarget:18,workoutPercentages:{tempo:.16,interval:.12,hill:.1},workoutBounds:{tempo:{min:4,max:10},interval:{min:4,max:8},hill:{min:4,max:7}}};function yt(e,t){const n=Ge(t),r=Qe(t),i=Math.floor(n.totalBuildWeeks/3),o=2*i,a=e*Math.pow(1+r,o),s=Math.min(Math.round(a),gt.peakWeeklyMileageCap);return Oe.A.info("Marathon Peak mileage: ".concat(e," \u2192 ").concat(s," mpw (").concat(i," cycles, ").concat((100*r).toFixed(1),"% rate)")),s}function vt(e,t,n){const r=Ge(t),i=Math.max(0,20-e)/r.totalBuildWeeks,o=Math.min(Math.max(.5,i),.75),a=e+r.totalBuildWeeks*o,s=n*gt.longRunPercentage,l=Math.min(Math.round(a),gt.longRunMax,Math.round(s));return l<gt.minimumLongRunTarget&&Oe.A.warn("\u26a0\ufe0f Marathon Plan: Can only reach ".concat(l," mile long run, typically needs ").concat(gt.minimumLongRunTarget,"+ miles. User may need higher base mileage or longer plan.")),i>.75&&Oe.A.warn("\u26a0\ufe0f Marathon Plan: Required growth rate (".concat(i.toFixed(2)," mi/wk) exceeds safe maximum. Plan may be too short for current fitness.")),Oe.A.info("Marathon Long run: ".concat(e," \u2192 ").concat(l," miles (growth rate: ").concat(o.toFixed(2)," mi/wk)")),l}function wt(e,t){const n=gt.workoutPercentages[t]||.15,r=gt.workoutBounds[t]||{min:4,max:8},i=e*n;return Math.round(Math.min(Math.max(i,r.min),r.max))}const bt={RACE_PARAMS:gt,calculatePeakMileage:yt,calculateLongRunMax:vt,calculateWorkoutDistance:wt,generatePlan:function(e){const{currentWeeklyMileage:t,currentLongRun:n,totalWeeks:r,experienceLevel:i}=e;Oe.A.info("\n\ud83d\udcca MARATHON PLAN CALCULATOR"),Oe.A.info("Input: ".concat(t," mpw, ").concat(n," mi long run, ").concat(r," weeks"));const o=yt(t,r),a=Je(o,vt(n,r,o),i,gt.longRunFloor),s=Ge(r),l=[];for(let u=1;u<=r;u++){const e=Xe(u,t,a.peakMileage,r),i=Ze(u,n,a.longRunMax,r),o=$e(u,s);l.push({weekNumber:u,phase:o,weeklyMileage:e,longRun:i,tempoDistance:wt(e,"tempo"),intervalDistance:wt(e,"interval"),hillDistance:wt(e,"hill")})}const c=Math.max(...l.map(e=>e.longRun));return c<20?Oe.A.error("\u274c CRITICAL: Marathon plan does not include 20-miler! Max long run is only ".concat(c," miles.")):Oe.A.info("\u2705 Marathon plan includes ".concat(c,"-mile long run")),{raceDistance:"Marathon",inputs:e,experienceLevel:a,targets:{peakWeeklyMileage:a.peakMileage,longRunMax:a.longRunMax,growthRate:Qe(r)},phases:s,weeks:l,raceParams:gt}}},kt={"5K":ot,"10K":ut,"Half Marathon":ft,Half:ft,Marathon:bt};function Dt(e){const{currentWeeklyMileage:t,currentLongRun:n,totalWeeks:r,raceDistance:i,experienceLevel:o}=e;if(!t||!n||!r||!i)throw new Error("MISSING REQUIRED INPUTS - No defaults allowed! Received: ".concat(JSON.stringify(e)));const a="Half"===i?"Half Marathon":i,s=kt[a];if(!s)throw new Error("Unknown race distance: ".concat(i,". Supported: 5K, 10K, Half Marathon, Marathon"));Oe.A.info("\n".concat("=".repeat(60))),Oe.A.info("PLAN MATH: ".concat(a," | ").concat(r," weeks | ").concat(o||"intermediate")),Oe.A.info("".concat("=".repeat(60)));const l=s.generatePlan({currentWeeklyMileage:parseInt(t),currentLongRun:parseInt(n),totalWeeks:parseInt(r),experienceLevel:o||"intermediate"});return Oe.A.info("\n\ud83d\udcca PLAN SUMMARY:"),Oe.A.info("   Race: ".concat(l.raceDistance)),Oe.A.info("   Peak Mileage: ".concat(l.targets.peakWeeklyMileage," mpw")),Oe.A.info("   Long Run Max: ".concat(l.targets.longRunMax," miles")),Oe.A.info("   Phases: Base=".concat(l.phases.base.weeks,"wks, Build=").concat(l.phases.build.weeks,"wks, Peak=").concat(l.phases.peak.weeks,"wks, Taper=").concat(l.phases.taper.weeks,"wks")),Oe.A.info("   Long runs: ".concat(l.weeks.map(e=>e.longRun).join(", "))),Oe.A.info("".concat("=".repeat(60),"\n")),l}const xt=(0,c.A)((0,c.A)({generatePlanMath:Dt,getRaceParams:function(e){const t=kt["Half"===e?"Half Marathon":e];if(!t)throw new Error("Unknown race distance: ".concat(e));return t.RACE_PARAMS},getAvailableRaces:function(){return["5K","10K","Half Marathon","Marathon"]}},et),{},{calculators:{"5K":ot,"10K":ut,"Half Marathon":ft,Marathon:bt}});const Et=new class{getPhasePlan(e){if(!e||e<=0)return[{phase:"Base",startWeek:1,endWeek:e||1}];const t=e-Math.max(2,Math.ceil(.1*e)),n=Math.max(1,Math.round(.4*t)),r=Math.max(1,Math.round(.35*t)),i=n+r,o=i+Math.max(1,t-n-r),a=[{phase:"Base",startWeek:1,endWeek:n},{phase:"Build",startWeek:n+1,endWeek:i},{phase:"Peak",startWeek:i+1,endWeek:o},{phase:"Taper",startWeek:o+1,endWeek:e}].filter(e=>e.startWeek<=e.endWeek);return console.log("\ud83d\udcca Phase Plan for ".concat(e," weeks:"),a.map(e=>"".concat(e.phase,": weeks ").concat(e.startWeek,"-").concat(e.endWeek)).join(", ")),a}getPhaseForWeek(e,t){const n=this.getPhasePlan(t),r=n.find(t=>e>=t.startWeek&&e<=t.endWeek),i=r?r.phase:"Base";return r||(console.warn("\u26a0\ufe0f No phase found for week ".concat(e," of ").concat(t," weeks. Defaulting to Base.")),console.log("Available phases:",n)),i}};const St=new class{constructor(){this.planGenerator=new Ke,this.paceCalculator=new Ve.O,this.currentProfile=null,this.planGenerator.workoutHistory||(this.planGenerator.workoutHistory={intervals:[],tempo:[],hills:[]})}generatePlanStructure(e){Oe.A.log("\ud83c\udfd7\ufe0f Generating deterministic plan structure..."),this.validateProfile(e),this.planGenerator.workoutHistory={intervals:[],tempo:[],hills:[],longRuns:[],easyRuns:[],bikeWorkouts:[]},Oe.A.log("  \u2705 Workout history reset for variety tracking");const t=this.calculateTotalWeeks(e.startDate,e.raceDate);Oe.A.log("  Total weeks: ".concat(t));const n=Dt({currentWeeklyMileage:e.currentWeeklyMileage,currentLongRun:e.currentLongRun,totalWeeks:t,raceDistance:e.raceDistance,experienceLevel:e.experienceLevel||"intermediate"});Oe.A.log("  Peak mileage: ".concat(n.targets.peakWeeklyMileage," mpw")),Oe.A.log("  Long run max: ".concat(n.targets.longRunMax," miles"));const r=Et.getPhasePlan(t),i=this.calculatePaces(e),o=[];for(let s=1;s<=t;s++){const a=n.weeks.find(e=>e.weekNumber===s),l=this.generateWeek(s,e,n,a,r,i,t);o.push(l)}const a={startDate:e.startDate,raceDate:e.raceDate,totalWeeks:t,raceDistance:e.raceDistance,goalTime:e.raceTime,trainingPhilosophy:e.trainingPhilosophy||"practical_periodization",phasePlan:r};return Oe.A.log("\u2705 Plan structure generated deterministically"),{planOverview:a,weeks:o,_planMathTargets:n.targets,_planMath:n}}generateWeek(e,t,n,r,i,o,a){const s=i.find(t=>e>=t.startWeek&&e<=t.endWeek),l=s?s.phase.toLowerCase():"base",c=this.generateWeekWorkouts(e,t,r,i,a),u=this.calculateWeekDates(e,t.startDate);return{weekNumber:e,totalMileage:r.weeklyMileage,workouts:c,phase:l,weeklyFocus:this.getWeeklyFocus(l),motivation:this.getMotivation(l,e,a),weekDates:u}}generateWeekWorkouts(e,t,n,r,i){const o=[],a=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];this.currentProfile=t;const s=r.find(t=>e>=t.startWeek&&e<=t.endWeek),l=s?{phase:s.phase.toLowerCase()}:{phase:"base"},c=t.restDays||[],u=t.availableDays||[],d=t.qualityDays||t.hardSessionDays||[],h=t.longRunDay||"Sunday",p=t.preferredBikeDays||[],m=t.standUpBikeType,f=this.calculateWeekDates(e,t.startDate),g=new Date(f.start),y=(new Date(f.end),g.getDay(),{Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6}),v=1===e?a.filter(e=>{const t=y[e],n=g.getDay();return 0===n?0===t:t>=n||0===t}):a,w=n.longRun,b=n.weeklyMileage-w,k=v.filter(e=>u.includes(e)&&!c.includes(e)&&!p.includes(e)&&e!==h&&d.includes(e)),D=v.filter(e=>u.includes(e)&&!c.includes(e)&&!p.includes(e)&&e!==h&&!d.includes(e)),x=v.filter(e=>u.includes(e)&&!c.includes(e)&&p.includes(e)&&e!==h),E=k.length+D.length+x.length,S=E>0?b/E:0;let A=0;return a.forEach(r=>{if(1===e){const e=y[r],t=g.getDay();if(0===t){if(0!==e)return}else if(e<t&&0!==e)return}if(c.includes(r))o.push(this.createRestWorkout(r));else if(r===h)o.push(this.createLongRunWorkout(r,w,e===i,t,l,e,i));else if(p.includes(r)&&m){d.includes(r)?(o.push(this.createBikeWorkout(r,m,!0,n,l,e,i,A,S)),A++):o.push(this.createBikeWorkout(r,m,!1,n,l,e,i,0,S))}else d.includes(r)?(o.push(this.createHardRunWorkout(r,S,l,e,i,t,A)),A++):u.includes(r)?o.push(this.createEasyRunWorkout(r,S)):o.push(this.createRestWorkout(r))}),o}createRestWorkout(e){return{day:e,type:"rest",name:"Rest",description:"Rest",distance:0,focus:"Recovery",workout:{name:"Rest",description:"Rest"},metadata:{aiGenerated:!1,deterministic:!0}}}createLongRunWorkout(e,t,n,r,i,o,a){if(n){const t=this.getRaceDistance(r.raceDistance);return{day:e,type:"race",name:"\ud83c\udfc1 Race Day: ".concat(r.raceDistance),description:"Race Day - ".concat(r.raceDistance),distance:t,focus:"Race Day",workout:{name:"\ud83c\udfc1 Race Day: ".concat(r.raceDistance),description:"Your ".concat(r.raceDistance," race! Execute your race plan and trust your training.")},metadata:{isRaceDay:!0,raceDistance:r.raceDistance,goalTime:r.raceTime,aiGenerated:!1,deterministic:!0}}}const s=this.calculatePaces(r),l=s.paces||s,c="string"===typeof i?{phase:i}:i,u=this.planGenerator.selectLongRunWorkout(c,t,0,l);return{day:e,type:"longRun",name:u.name||"Long Run ".concat(t," miles"),description:u.description||"Long Run ".concat(t," miles"),distance:t,focus:"Endurance",workout:u,metadata:{workoutId:u.workoutId,aiGenerated:!1,deterministic:!0}}}createBikeWorkout(e,t,n,r,i,o,a){let s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:4;const c=this.planGenerator.standUpBikeLibrary,u=Math.round(l);let d,h;if(n){const e=["TEMPO_BIKE","INTERVAL_BIKE","POWER_RESISTANCE"];d=e[s%e.length],h="TEMPO_BIKE"===d?"Lactate Threshold":"Speed & Power"}else{const e=["AEROBIC_BASE","RECOVERY_SPECIFIC"];d=e[o%e.length],h="Cross-Training"}const p=(c.workoutLibrary[d]||[]).filter(e=>e.equipment===t||"both"===e.equipment);if(0===p.length){const r=n?["TEMPO_BIKE","INTERVAL_BIKE","POWER_RESISTANCE"]:["AEROBIC_BASE","RECOVERY_SPECIFIC"];for(const i of r){if(i===d)continue;const r=(c.workoutLibrary[i]||[]).filter(e=>e.equipment===t||"both"===e.equipment);if(r.length>0){const o=this.planGenerator.selectWorkoutAvoidingRepetition(r,"bikeWorkouts"),a=c.prescribeStandUpBikeWorkout(o.name,t,{targetDistance:u,hasGarmin:!0});return{day:e,type:"bike",name:a.name,description:a.description,distance:u,focus:h,workout:a,metadata:{aiGenerated:!1,deterministic:!0,equipmentSpecific:!0,bikeWorkoutType:n?"hard":"easy",category:i}}}}return Oe.A.warn("No ".concat(d," workouts available for ").concat(t,", using generic fallback")),{day:e,type:"bike",name:"Ride ".concat(u," RunEQ miles"),description:"Ride ".concat(u," RunEQ miles on your ").concat("cyclete"===t?"Cyclete":"ElliptiGO"," (").concat(n?"hard":"easy"," effort)"),distance:u,focus:h,workout:{name:"Ride ".concat(u," RunEQ miles"),description:"Ride ".concat(u," RunEQ miles on your ").concat("cyclete"===t?"Cyclete":"ElliptiGO")},metadata:{aiGenerated:!1,deterministic:!0,equipmentSpecific:!0,bikeWorkoutType:n?"hard":"easy",fallback:!0}}}const m=this.planGenerator.selectWorkoutAvoidingRepetition(p,"bikeWorkouts"),f=c.prescribeStandUpBikeWorkout(m.name,t,{targetDistance:u,hasGarmin:!0});return{day:e,type:"bike",name:f.name,description:f.description,distance:u,focus:h,workout:f,metadata:{aiGenerated:!1,deterministic:!0,equipmentSpecific:!0,bikeWorkoutType:n?"hard":"easy",category:d}}}createHardRunWorkout(e,t,n,r,i,o,a){const s=this.selectHardWorkoutType(n,r,a),l=this.calculatePaces(o),c=l.paces||l,u="string"===typeof n?{phase:n}:n,d=this.planGenerator.selectQualityWorkout(s,u,t,0,c,r,i);return{day:e,type:s,name:d.name||"".concat(this.getWorkoutTypeName(s)," ").concat(t," miles"),description:d.description||"".concat(this.getWorkoutTypeName(s)," ").concat(t," miles"),distance:t,focus:this.getWorkoutFocus(s),workout:d,metadata:{workoutId:d.workoutId,aiGenerated:!1,deterministic:!0}}}createEasyRunWorkout(e,t){return{day:e,type:"easy",name:"Easy Run ".concat(t," miles"),description:"Easy Run ".concat(t," miles"),distance:t,focus:"Aerobic Base",workout:{name:"Easy Run ".concat(t," miles"),description:"Easy Run ".concat(t," miles")},metadata:{aiGenerated:!1,deterministic:!0}}}selectHardWorkoutType(e,t){const n=(t%3+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)%3)%3;if("base"===e){return["tempo","hills","intervals"][n]}if("build"===e||"peak"===e){return["intervals","tempo","hills"][n]}return 0===n?"tempo":"intervals"}getWorkoutTypeName(e){return{tempo:"Tempo Run",intervals:"Interval Run",hills:"Hill Repeats",easy:"Easy Run"}[e]||"Run"}getWorkoutFocus(e){return{tempo:"Lactate Threshold",intervals:"Speed & VO2 Max",hills:"Strength & Power",easy:"Aerobic Base"}[e]||"Aerobic Base"}getWeeklyFocus(e){return{base:"Aerobic foundation & durability",build:"Strength & speed development",peak:"Race-specific sharpening",taper:"Freshen up & execute"}[e]||"Training"}getMotivation(e,t,n){if(t===n)return"Visualize success - you've earned this \ud83d\udcab";return{base:"Consistency right now builds race-day confidence \ud83d\udcaa",build:"This phase teaches you to love the grind \ud83d\udd01",peak:"Trust your legs - they know what to do \ud83d\udc63",taper:"Nothing new. Stay sharp, stay calm \ud83c\udfaf"}[e]||"Keep showing up \ud83c\udfc3"}calculateTotalWeeks(e,t){const n=new Date(e),r=new Date(t)-n,i=Math.ceil(r/6048e5);return Math.max(8,i)}calculateWeekDates(e,t){const n=new Date(t),r=new Date(n);r.setDate(n.getDate()+7*(e-1));const i=new Date(r);i.setDate(r.getDate()+6);const o=e=>"".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]," ").concat(e.getDate());return{start:r.toISOString().split("T")[0],end:i.toISOString().split("T")[0],displayText:"".concat(o(r)," - ").concat(o(i))}}calculatePaces(e){if(e.recentRaceTime&&e.recentRaceDistance)try{const t=this.paceCalculator.getPaceData(e.recentRaceDistance,e.recentRaceTime);return{paces:t.paces,trackIntervals:t.trackIntervals,easy:"".concat(t.paces.easy.min,"-").concat(t.paces.easy.max,"/mile"),tempo:"".concat(t.paces.threshold.pace,"/mile"),interval:"".concat(t.paces.interval.pace,"/mile")}}catch(t){Oe.A.warn("Could not calculate paces from race time:",t.message)}if(e.currentWeeklyMileage&&e.currentLongRun)try{this.paceCalculator.estimateCurrentVDOT(e.currentLongRun,e.currentWeeklyMileage);const t=this.paceCalculator.getPaceData(e.raceDistance,e.raceTime||"2:00:00");return{paces:t.paces,trackIntervals:t.trackIntervals,easy:"".concat(t.paces.easy.min,"-").concat(t.paces.easy.max,"/mile"),tempo:"".concat(t.paces.threshold.pace,"/mile"),interval:"".concat(t.paces.interval.pace,"/mile")}}catch(t){Oe.A.warn("Could not estimate paces:",t.message)}return{easy:"11:30-12:30/mile",tempo:"9:50-10:10/mile",interval:"9:00-9:20/mile",paces:{easy:{min:"11:30",max:"12:30"},threshold:{pace:"9:50"},interval:{pace:"9:00"}},trackIntervals:{threshold:{},interval:{}}}}getRaceDistance(e){return{"5K":3.1,"10K":6.2,"Half Marathon":13.1,Half:13.1,Marathon:26.2}[e]||13.1}validateProfile(e){const t=["raceDistance","raceTime","raceDate","startDate","currentWeeklyMileage","currentLongRun","availableDays","longRunDay"].filter(t=>!e[t]);if(t.length>0)throw new Error("Missing required fields: ".concat(t.join(", ")))}};var At=n(889),Ct=n(224);const Tt=new class{fixHardDaysViolations(e,t){const n=t.qualityDays||t.hardSessionDays||[];if(0===n.length)return;const r=["tempo","intervals","hills"];e.weeks.forEach(e=>{e.workouts.forEach(t=>{const i=t.day;if(n.includes(i)){const o=(t.description||"").toLowerCase(),a=(t.name||"").toLowerCase(),s=(o.includes("easy")||a.includes("easy"))&&!o.includes("tempo")&&!o.includes("interval")&&!o.includes("hill"),l="rest"===t.type||o.includes("rest"),u=r.includes(t.type)||o.includes("tempo")||o.includes("interval")||o.includes("hill");if((s||l)&&!u){const o=e.workouts.find(e=>e.day!==i&&r.includes(e.type)&&!n.includes(e.day));if(o){const e=(0,c.A)({},t);t.type=o.type,t.name=o.name,t.description=o.description,t.workout=o.workout,t.focus=o.focus,t.distance=o.distance,o.type=e.type,o.name=e.name,o.description=e.description,o.workout=e.workout,o.focus=e.focus,o.distance=e.distance,console.log("\u2705 Auto-fixed: Swapped ".concat(i," workout (was: ").concat(e.name,") with ").concat(o.day," (now: ").concat(t.name,")"))}else{const e=this.generateDefaultHardWorkout(i,t.distance||5);t.type=e.type,t.name=e.name,t.description=e.description,t.workout=e.workout,t.focus=e.focus,console.log("\u2705 Auto-fixed: Replaced ".concat(i," easy run with default ").concat(e.type," workout"))}}}})})}fixMileageMismatches(e,t){if(!e.weeks||0===e.weeks.length)return;const n=parseInt(t.currentWeeklyMileage)||16;e.weeks.forEach((r,i)=>{let o;if(r._planMathTargets&&r._planMathTargets.weeklyMileage)o=r._planMathTargets.weeklyMileage,console.log("  \ud83d\udcca Week ".concat(r.weekNumber,": Using planMath target ").concat(o,"mi"));else if(0===i){const e=r.workouts||[],i=e.filter(e=>{const t=(e.description||"").toLowerCase(),n=e.type||e.workoutType||"";return!t.includes("rest")&&"rest"!==n});if(i.length<5){const r=new Set(e.map(e=>e.day)).size||i.length+1,a=Math.round(r/7*n),s=Math.min(parseInt(t.currentLongRun)||6,n);o=Math.max(a,s)}else o=n}else if(1===i){var a;o=((null===(a=e.weeks[0])||void 0===a?void 0:a.workouts)||[]).filter(e=>{const t=(e.description||"").toLowerCase(),n=e.type||e.workoutType||"";return!t.includes("rest")&&"rest"!==n}).length<5?n:n+1}else{var s,l;null===(s=e.weeks[0])||void 0===s||s.totalMileage;o=((null===(l=e.weeks[1])||void 0===l?void 0:l.totalMileage)||n+1)+Math.min(2*(i-1),12)}let c=0;const u=[];r.workouts.forEach(e=>{var t;if("rest"===(e.type||e.workoutType)||(e.description||"").toLowerCase().includes("rest"))return;let n=0;if(e.distance)n=parseFloat(e.distance);else if(e.extractedDistance)n=parseFloat(e.extractedDistance);else if(null!==(t=e.fullWorkoutDetails)&&void 0!==t&&t.distance)n=parseFloat(e.fullWorkoutDetails.distance);else{const t=e.description||e.name||"",r=t.match(/(\d+(?:\.\d+)?)\s*RunEQ/i);if(r)n=parseFloat(r[1]);else{const e=t.match(/(\d+(?:\.\d+)?)\s*(?:mile|miles|mi)\b/i);e&&(n=parseFloat(e[1]))}}n>0&&(c+=n,u.push({workout:e,distance:n}))});if(Math.abs(c-o)>2&&c>0&&u.length>0){const e=o/c;e>=.7&&e<=1.3?(console.log("  \ud83d\udd27 Week ".concat(r.weekNumber,": Adjusting from ").concat(c.toFixed(1),"mi to ").concat(o,"mi (ratio: ").concat(e.toFixed(2),")")),u.forEach(t=>{var n;let{workout:r,distance:i}=t;const o=Math.max(2,Math.round(i*e));r.distance=o,r.extractedDistance=o,r.description&&(r.description=r.description.replace(/(\d+(?:\.\d+)?)\s*(?:RunEQ\s*)?(?:mile|miles|mi)/i,"".concat(o," ").concat(r.description.match(/RunEQ/i)?"RunEQ ":"","mile").concat(1!==o?"s":""))),r.name&&(r.name=r.name.replace(/(\d+(?:\.\d+)?)\s*(?:RunEQ\s*)?(?:mile|miles|mi)/i,"".concat(o," ").concat(r.name.match(/RunEQ/i)?"RunEQ ":"","mile").concat(1!==o?"s":""))),null!==(n=r.workout)&&void 0!==n&&n.name&&(r.workout.name=r.workout.name.replace(/(\d+(?:\.\d+)?)\s*(?:RunEQ\s*)?(?:mile|miles|mi)/i,"".concat(o," ").concat(r.workout.name.match(/RunEQ/i)?"RunEQ ":"","mile").concat(1!==o?"s":""))),r.fullWorkoutDetails&&(r.fullWorkoutDetails.distance&&(r.fullWorkoutDetails.distance=o),r.fullWorkoutDetails.name&&(r.fullWorkoutDetails.name=r.fullWorkoutDetails.name.replace(/(\d+(?:\.\d+)?)\s*(?:RunEQ\s*)?(?:mile|miles|mi)/i,"".concat(o," ").concat(r.fullWorkoutDetails.name.match(/RunEQ/i)?"RunEQ ":"","mile").concat(1!==o?"s":""))))}),r.totalMileage=o,console.log("  \u2705 Week ".concat(r.weekNumber,": Adjusted to ").concat(o,"mi total"))):console.log("  \u26a0\ufe0f Week ".concat(r.weekNumber,": Adjustment ratio ").concat(e.toFixed(2)," too extreme, skipping (target: ").concat(o,"mi, actual: ").concat(c.toFixed(1),"mi)"))}})}fixMissingLongRuns(e,t){if(!e.weeks||0===e.weeks.length)return;const n=t.longRunDay||"Sunday";e.weeks.forEach((t,r)=>{if((t=>t===e.weeks.length-1)(r))return;if(!t.workouts.some(e=>"longRun"===e.type||e.day===n&&((e.description||"").toLowerCase().includes("long run")||(e.name||"").toLowerCase().includes("long run")))){let i=6;if(r>0){const t=e.weeks[r-1].workouts.find(e=>"longRun"===e.type||(e.description||"").toLowerCase().includes("long run"));t&&t.distance&&(i=Math.min(t.distance+1,20))}const o=t.workouts.findIndex(e=>e.day===n&&"rest"!==e.type);o>=0&&t.workouts.splice(o,1);const a={day:n,type:"longRun",name:"Long Run ".concat(i," miles"),description:"Long Run ".concat(i," miles"),distance:i,focus:"Endurance",workout:{name:"Long Run ".concat(i," miles"),description:"Long Run ".concat(i," miles")},metadata:{aiGenerated:!0,fallback:!0,autoAdded:!0}};t.workouts.push(a),console.log("\u2705 Auto-fixed: Added missing long run (".concat(i," miles) to Week ").concat(t.weekNumber," on ").concat(n))}})}generateDefaultHardWorkout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return Math.floor(2*Math.random())%2===0?{type:"tempo",name:"Tempo Run ".concat(t," miles"),description:"Tempo Run ".concat(t," miles (2 mi warmup, ").concat(Math.max(2,Math.floor(.4*t))," mi @ tempo pace, 1 mi cooldown)"),workout:{name:"Tempo Run ".concat(t," miles"),description:"Tempo Run ".concat(t," miles (2 mi warmup, ").concat(Math.max(2,Math.floor(.4*t))," mi @ tempo pace, 1 mi cooldown)")},focus:"Lactate Threshold",distance:t}:{type:"intervals",name:"Interval Run ".concat(t," miles"),description:"Interval Run ".concat(t," miles (2 mi warmup, 4x800m @ VO2 pace, 2 mi cooldown)"),workout:{name:"Interval Run ".concat(t," miles"),description:"Interval Run ".concat(t," miles (2 mi warmup, 4x800m @ VO2 pace, 2 mi cooldown)")},focus:"Speed & VO2 Max",distance:t}}};const Rt=new class{constructor(){this.hillLibrary=new Be.c,this.intervalLibrary=new Ue.e,this.tempoLibrary=new We.s,this.longRunLibrary=new qe.g}buildWorkoutLibraryContext(){let e="**WORKOUT LIBRARY - Use [WORKOUT_ID: ...] format**\n\n";e+="**HILL:** ";const t=this.hillLibrary.getCategories(),n=[];t.forEach(e=>{this.hillLibrary.getWorkoutsByCategory(e).forEach((t,r)=>{n.push("[hill_".concat(e,"_").concat(r,"] ").concat(t.name))})}),e+=n.join(", ")+"\n",e+="**INTERVALS:** ";const r=this.intervalLibrary.getCategories(),i=[];r.forEach(e=>{this.intervalLibrary.getWorkoutsByCategory(e).forEach((t,n)=>{i.push("[interval_".concat(e,"_").concat(n,"] ").concat(t.name))})}),e+=i.join(", ")+"\n",e+="**TEMPO:** ";const o=this.tempoLibrary.getCategories(),a=[];o.forEach(e=>{this.tempoLibrary.getWorkoutsByCategory(e).forEach((t,n)=>{a.push("[tempo_".concat(e,"_").concat(n,"] ").concat(t.name))})}),e+=a.join(", ")+"\n",e+="**LONG RUNS:** ";const s=this.longRunLibrary.getCategories(),l=[];return s.forEach(e=>{this.longRunLibrary.getWorkoutsByCategory(e).forEach((t,n)=>{l.push("[longrun_".concat(e,"_").concat(n,"] ").concat(t.name))})}),e+=l.join(", ")+"\n",e}};const Ft=new class{constructor(){this.paceCalculator=new Ve.O}fixCommonTypos(e){if(!e)return e;return e.replace(/miless/gi,"miles").replace(/milees/gi,"miles").replace(/milles/gi,"miles").replace(/milse/gi,"miles").replace(/mies/gi,"miles").replace(/mile\s+s/gi,"miles").replace(/minuites/gi,"minutes").replace(/minuetes/gi,"minutes").replace(/minuts/gi,"minutes").replace(/minute\s+s/gi,"minutes")}parseAIPlanToStructure(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=this.fixCommonTypos(e).split("\n"),i=[];let o=null,a={};const s=new Set;let l=!1;console.log("\n=== PARSING AI PLAN (".concat(r.length," lines) ===")),r.forEach((e,t)=>{if(!l){(e.match(/week-by-week|training schedule|weekly schedule|week.*schedule/i)||e.match(/^###\s+Week\s+\d+/i)&&e.match(/\d+\s*(miles|kilometers|km|mi)/i))&&(l=!0,console.log("\ud83d\udccd Entered detailed section at line ".concat(t,': "').concat(e.substring(0,80),'"'))),!l&&e.match(/Week\s+\d+\s*\([^)]+\s*[-\u2013\u2014]\s*[^)]+\)/i)&&(l=!0,console.log("\ud83d\udccd Entered detailed section at line ".concat(t,' (detected week with date range): "').concat(e.substring(0,80),'"')))}e.toLowerCase().includes("week")&&console.log("Line ".concat(t,' contains "week": "').concat(e,'"'));/\b(Mon|Tue|Wed|Thu|Fri|Sat|Sun|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday)\b/i.test(e)&&o&&e.trim().length>0&&!e.match(/^[\s#*]*Week/i)&&console.log("  \ud83d\udd0d Line ".concat(t,' might be a workout: "').concat(e.substring(0,100),'"'));let r=null;if(e.match(/^[\s#*]*Week\s+\d+/i)){const n=e.match(/^[\s#*]*Week\s+(\d+)/i);if(n){const i=parseInt(n[1]),o=e.match(/^###\s+Week\s+\d+/i),a=e.match(/^\*\*Week\s+\d+:/i);if(!l&&o&&(l=!0,console.log("\ud83d\udccd Entered detailed section at line ".concat(t," (detected markdown header week format)"))),a)return void console.log("\u23ed\ufe0f Skipping Week ".concat(i," from summary section (bold format, no workouts) - line ").concat(t));if(!l&&!o)return void console.log("\u23ed\ufe0f Skipping Week ".concat(i," from summary section (line ").concat(t,")"));const s=[...e.matchAll(/(\d+)\s*(miles|kilometers|km|mi)\b/gi)],c=s[s.length-1];if(c){r={1:i,2:parseInt(c[1]),3:c[2]}}else r={1:i}}}if(!r){const t=e.match(/^[\s#*]*Week\s+(\d+)(?:\s*\([^)]+\))?\s*[-\u2013\u2014]\s*(\d+)\s*(miles|kilometers|km|mi)/i),n=e.match(/^[\s#*]*Week\s+(\d+)(?:\s*\([^)]+\))?\s*[-\u2013\u2014\u2022]/i);r=t||n}if(r){const a=parseInt(r[1]);if(console.log("\u2705 REGEX MATCHED Week ".concat(a,"!")),null!==n&&a<n)return void console.log("Skipping Week ".concat(a," (before starting week ").concat(n,")"));if(s.has(a))return console.log("Skipping duplicate Week ".concat(a," at line ").concat(t)),void(o&&o.workouts.length>0&&(i.push(o),o=null));o&&(o.workouts.length>0?i.push(o):console.log("\u26a0\ufe0f Skipping Week ".concat(o.weekNumber," - no workouts found"))),s.add(a);const l=r[2]?parseInt(r[2]):0;o={weekNumber:a,totalMileage:l,workouts:[]},console.log("Found Week ".concat(a," at line ").concat(t,": ").concat(e.substring(0,80)))}const c=e.match(/^\s*[-*\s]*\**\s*(Mon|Tue|Wed|Thu|Fri|Sat|Sun|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday)\**\s*[:\-]\s*(.+)/i);if(c&&o){console.log("  \u2705 MATCHED workout line ".concat(t,': "').concat(e.substring(0,80),'"'));const n=c[1],r={Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri",Saturday:"Sat",Sunday:"Sun",Mon:"Mon",Tue:"Tue",Wed:"Wed",Thu:"Thu",Fri:"Fri",Sat:"Sat",Sun:"Sun"}[n]||n,i={Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday",Sun:"Sunday"}[r]||r;let a=c[2].trim();a=this.fixCommonTypos(a);const s=a.match(/\[WORKOUT_ID:\s*(tempo|interval|longrun|hill|fartlek)_(.+?)_(\d+)\]/),l=a.match(/\[WORKOUT:\s*([A-Z_]+)\s*-\s*(.+?)\]/);let u=a;s?u=a.replace(/\[WORKOUT_ID:\s*(?:tempo|interval|longrun|hill|fartlek)_.+?_\d+\]\s*/,"").trim():l&&(u=a.replace(/\[WORKOUT:\s*[A-Z_]+\s*-\s*.+?\]\s*/,"").trim());const d=a;let h=null;const p=u.toLowerCase();"rest"===p||p.match(/^rest\s*$/)?h="rest":p.match(/rest\s*\/\s*xt|rest\/xt|rest or xt|rest or cross/i)?h="rest_or_xt":(p.includes("ride")||p.includes("runeq"))&&(h="bike"),o.workouts.push({day:i,description:u,originalDescription:d,workoutId:s?s[0]:l?l[0]:null,workoutType:s?s[1]:l?"bike":h,workoutCategory:s?s[2]:l?l[1]:null,workoutIndex:s?parseInt(s[3]):l?l[2]:null,bikeWorkoutName:l?l[2].trim():null}),console.log("  \u2705 Added workout: ".concat(i," - ").concat(u.substring(0,50))),console.log("     Day abbreviation: ".concat(c[1],", Full name: ").concat(i))}if(e.match(/Easy.*?:/i)){const t=e.match(/(\d+:\d+(?:-\d+:\d+)?)/);t&&(a.easy=t[0],console.log("Found Easy pace: ".concat(t[0])))}if(e.match(/Tempo|Threshold/i)&&e.includes(":")){const t=e.match(/(\d+:\d+(?:-\d+:\d+)?)/);t&&(a.tempo=t[0],console.log("Found Tempo pace: ".concat(t[0])))}if(e.match(/Marathon Pace|MP:/i)){const t=e.match(/(\d+:\d+(?:-\d+:\d+)?)/);t&&(a.marathonPace=t[0],console.log("Found Marathon pace: ".concat(t[0])))}if(e.match(/Half.*?Marathon.*?Pace|HMP|Goal Pace/i)&&e.includes(":")){const t=e.match(/(\d+:\d+(?:-\d+:\d+)?)/);t&&(a.halfMarathonPace=t[0],console.log("Found Half Marathon pace: ".concat(t[0])))}if(e.match(/10K Pace|10-K/i)&&e.includes(":")){const t=e.match(/(\d+:\d+(?:-\d+:\d+)?)/);t&&(a.tenKPace=t[0],console.log("Found 10K pace: ".concat(t[0])))}if(e.match(/5K Pace|5-K/i)&&e.includes(":")){const t=e.match(/(\d+:\d+(?:-\d+:\d+)?)/);t&&(a.fiveKPace=t[0],console.log("Found 5K pace: ".concat(t[0])))}if(e.match(/VO2|Interval/i)&&e.includes(":")&&!e.match(/Cruise|Tempo/i)){const t=e.match(/(\d+:\d+(?:-\d+:\d+)?)/);t&&(a.interval=t[0],console.log("Found Interval pace: ".concat(t[0])))}}),o&&(o.workouts.length>0?i.push(o):console.log("\u26a0\ufe0f Skipping final Week ".concat(o.weekNumber," - no workouts found"))),i.forEach(e=>{let t=0;e.workouts.forEach(e=>{const n=e.description||"",r=e.originalDescription||"",i=n.match(/(\d+(?:\.\d+)?)\s*RunEQ/i)||r.match(/(\d+(?:\.\d+)?)\s*RunEQ/i);if(i){const e=parseFloat(i[1]);t+=e,console.log("    \ud83d\udccf RunEQ: ".concat(e,' miles from "').concat(n.substring(0,40),'"'))}else if(n.toLowerCase().includes("rest"));else{const e=n.match(/(\d+(?:\.\d+)?)\s*(?:mile|miles|mi)\b/i)||r.match(/(\d+(?:\.\d+)?)\s*(?:mile|miles|mi)\b/i);if(e){const r=parseFloat(e[1]);t+=r,console.log("    \ud83d\udccf Run: ".concat(r,' miles from "').concat(n.substring(0,40),'"'))}}});const n=e.totalMileage;e.totalMileage=t>0?Math.round(t):n,t>0&&Math.abs(n-e.totalMileage)>1?console.log("  \ud83d\udcca Week ".concat(e.weekNumber,": AI said ").concat(n,"mi, calculated ").concat(e.totalMileage,"mi (includes RunEQ)")):t>0&&console.log("  \u2705 Week ".concat(e.weekNumber,": ").concat(e.totalMileage,"mi (matches AI or calculated correctly)"))}),console.log("\n=== PARSING COMPLETE ==="),console.log("Parsed ".concat(i.length," weeks:"),i.map(e=>"Week ".concat(e.weekNumber," (").concat(e.totalMileage,"mi, ").concat(e.workouts.length," workouts)"))),console.log("Paces from AI text:",a);let c=null,u=null,d=null,h=null;const p=i.length;if(t.recentRaceTime&&t.recentRaceDistance)try{let e=t.recentRaceTime;e.includes("-")&&(e=e.split("-").pop()),console.log("\ud83d\udcca Calculating CURRENT FITNESS paces from ".concat(t.recentRaceDistance," @ ").concat(e));const n=this.paceCalculator.calculateFromGoal(t.recentRaceDistance,e);n&&n.paces&&(d=n,console.log("\u2705 Current Fitness Paces:",{easy:"".concat(n.paces.easy.min,"-").concat(n.paces.easy.max,"/mi"),threshold:"".concat(n.paces.threshold.pace,"/mi"),interval:"".concat(n.paces.interval.pace,"/mi")}))}catch(m){console.warn("\u26a0\ufe0f Could not calculate current fitness paces:",m.message)}if(t.raceTime&&t.raceDistance)try{let e=t.raceTime;e.includes("-")&&(e=e.split("-")[1]),console.log("\ud83c\udfaf Calculating GOAL paces for ".concat(t.raceDistance," @ ").concat(e));const n=this.paceCalculator.calculateFromGoal(t.raceDistance,e);n&&n.paces&&(h=n,u=n.trackIntervals,console.log("\u2705 Goal Paces:",{easy:"".concat(n.paces.easy.min,"-").concat(n.paces.easy.max,"/mi"),threshold:"".concat(n.paces.threshold.pace,"/mi"),interval:"".concat(n.paces.interval.pace,"/mi")}))}catch(m){console.warn("\u26a0\ufe0f Could not calculate goal paces:",m.message)}return d&&h&&p>1?(console.log("\ud83d\udcc8 Using PROGRESSIVE PACING: Week 1 = current fitness, Week ".concat(p," = near goal")),c=d.paces,c._progressive={current:d,goal:h,totalWeeks:p}):d?(console.log("\ud83d\udcca Using CURRENT FITNESS paces only (no goal paces available)"),c=d.paces):h&&(console.warn("\u26a0\ufe0f Using GOAL paces only (no recent race time provided) - this may be too aggressive"),c=h.paces),console.log("===================\n"),{userProfile:t,paces:c||a,trackIntervals:u,weeks:i,fullPlanText:e}}};const It=new class{constructor(){this.hillLibrary=new Be.c,this.intervalLibrary=new Ue.e,this.tempoLibrary=new We.s,this.longRunLibrary=new qe.g,this.bikeLibrary=new ze,this.paceCalculator=new Ve.O}fixCommonTypos(e){return e&&"string"===typeof e?e.replace(/miless/gi,"miles").replace(/milees/gi,"miles").replace(/milles/gi,"miles").replace(/milse/gi,"miles").replace(/mile\s+s/gi,"miles").replace(/minuites/gi,"minutes").replace(/minuetes/gi,"minutes").replace(/minuts/gi,"minutes").replace(/minute\s+s/gi,"minutes").replace(/recovry/gi,"recovery").replace(/warmup/gi,"warmup").replace(/cooldown/gi,"cooldown"):e}enrichPlanWithWorkouts(e){var t;console.log("\n\ud83d\udd0d ENRICHING WORKOUTS WITH LIBRARY DETAILS");const n=e.weeks.length,r=null===(t=e.paces)||void 0===t?void 0:t._progressive,i=r&&r.current&&r.goal,o=e.weeks.map(t=>{const o=t.weekNumber||1;let a=e.paces;if(i){const e=this.paceCalculator.blendPaces(r.current,r.goal,o,n);a=e.paces,console.log("\n\ud83d\udcca Week ".concat(o," Progressive Paces:"),{easy:"".concat(a.easy.min,"-").concat(a.easy.max,"/mi"),threshold:"".concat(a.threshold.pace,"/mi"),interval:"".concat(a.interval.pace,"/mi")})}const s=t.workouts.map(t=>{if(t.description&&(t.description=this.fixCommonTypos(t.description)),t.originalDescription&&(t.originalDescription=this.fixCommonTypos(t.originalDescription)),!t.workoutId)return(0,c.A)((0,c.A)({},t),{},{hasStructuredWorkout:!1});console.log("\n  Enriching: ".concat(t.workoutId),{type:t.workoutType,category:t.workoutCategory,index:t.workoutIndex});let r=null,i=null,s=null;if("bike"===t.workoutType){var l;const e=null===(l=t.originalDescription)||void 0===l?void 0:l.match(/(\d+(?:\.\d+)?)\s*RunEQ/i);s=e?parseFloat(e[1]):null,i=s,s&&console.log("    \ud83d\udccf Extracted RunEQ distance: ".concat(s,' miles from "').concat(t.originalDescription,'"'))}else{var u;const e=null===(u=t.description)||void 0===u?void 0:u.match(/(\d+(?:\.\d+)?)\s*(?:miles?|mi)\b/i);i=e?parseFloat(e[1]):null,i&&console.log("    \ud83d\udccf Extracted distance: ".concat(i,' miles from "').concat(t.description,'"'))}try{if("hill"===t.workoutType){const e=this.hillLibrary.getWorkoutsByCategory(t.workoutCategory);console.log("    Hill library returned ".concat((null===e||void 0===e?void 0:e.length)||0,' workouts for category "').concat(t.workoutCategory,'"'));const n=e[t.workoutIndex];n&&(r=this.hillLibrary.prescribeHillWorkout(n.name,{paces:a}))}else if("interval"===t.workoutType){const s=this.intervalLibrary.getWorkoutsByCategory(t.workoutCategory);console.log("    Interval library returned ".concat((null===s||void 0===s?void 0:s.length)||0,' workouts for category "').concat(t.workoutCategory,'"'));const l=s[t.workoutIndex];l&&(r=this.intervalLibrary.prescribeIntervalWorkout(l.name,{paces:a,trackIntervals:e.trackIntervals,totalDistance:i,weekNumber:o,totalWeeks:n}))}else if("tempo"===t.workoutType){const e=this.tempoLibrary.getWorkoutsByCategory(t.workoutCategory);console.log("    Tempo library returned ".concat((null===e||void 0===e?void 0:e.length)||0,' workouts for category "').concat(t.workoutCategory,'"'));const s=e[t.workoutIndex];s&&(r=this.tempoLibrary.prescribeTempoWorkout(s.name,{paces:a,totalDistance:i,weekNumber:o,totalWeeks:n}))}else if("longrun"===t.workoutType){const e=this.longRunLibrary.getWorkoutsByCategory(t.workoutCategory);console.log("    LongRun library returned ".concat((null===e||void 0===e?void 0:e.length)||0,' workouts for category "').concat(t.workoutCategory,'"'));const n=e[t.workoutIndex];n&&(r=this.longRunLibrary.prescribeLongRunWorkout(n.name,{paces:a,distance:i}))}else if("bike"===t.workoutType&&t.workoutCategory&&t.bikeWorkoutName){var d,h;const e=null===(d=t.originalDescription)||void 0===d?void 0:d.match(/on your (Cyclete|ElliptiGO)/i),n=e?e[1].toLowerCase():"cyclete",o=null===(h=t.originalDescription)||void 0===h?void 0:h.match(/(\d+(?:\.\d+)?)\s*RunEQ/i),a=o?parseFloat(o[1]):i||3;console.log('    Bike workout: category="'.concat(t.workoutCategory,'", name="').concat(t.bikeWorkoutName,'", bikeType="').concat(n,'", distance=').concat(a));try{let e=null;try{e=this.bikeLibrary.prescribeStandUpBikeWorkout(t.bikeWorkoutName,n,{targetDistance:a,hasGarmin:!0}),console.log('    \u2705 Bike library found exact match: "'.concat(e.name,'"'))}catch(m){console.log("    \u26a0\ufe0f Exact match failed: ".concat(m.message,", trying category fallback..."));const r=this.bikeLibrary.workoutLibrary[t.workoutCategory];if(!(r&&r.length>0))throw new Error("No workouts found in category ".concat(t.workoutCategory));{const t=r[0];console.log('    \ud83d\udd04 Using fallback workout from category: "'.concat(t.name,'"')),e=this.bikeLibrary.prescribeStandUpBikeWorkout(t.name,n,{targetDistance:a,hasGarmin:!0}),console.log('    \u2705 Bike library returned fallback: "'.concat(e.name,'"'))}}e&&(r=e,a&&!r.distance&&(r.distance=a))}catch(f){console.warn("    \u26a0\ufe0f Error prescribing bike workout: ".concat(f.message))}}if(r){console.log("    \u2705 Found workout: ".concat(r.name)),r.structure&&(r.structure=this.fixCommonTypos(r.structure)),r.description&&(r.description=this.fixCommonTypos(r.description)),r.name&&(r.name=this.fixCommonTypos(r.name));const e=this.injectUserPaces(r,a);i&&!e.distance&&(e.distance=i,console.log("    \ud83d\udccf Added distance ".concat(i," miles to enriched workout")));let n=e.distance||t.distance||0;if((!n||0===n)&&"rest"!==t.type){const r=(e.structure||t.structure||t.description||"").match(/(\d+(?:\.\d+)?)\s*(?:miles?|mi|kilometers?|km)\b/i);r?(n=parseFloat(r[1]),console.log("    \ud83d\udccf Parsed distance ".concat(n," miles from structure text"))):(n="tempo"===t.type||"interval"===t.type||"hills"===t.type?4:("easy"===t.type||t.type,3),console.log("    \ud83d\udccf Defaulted distance to ".concat(n," miles for ").concat(t.type," workout"))),e.distance=n}return(0,c.A)((0,c.A)({},t),{},{fullWorkoutDetails:e,hasStructuredWorkout:!0,extractedDistance:i||n})}console.log("    \u274c No workout found at index ".concat(t.workoutIndex))}catch(f){console.warn("    \u26a0\ufe0f Error enriching workout: ".concat(t.workoutId),f)}let p=t.distance||0;if((!p||0===p)&&"rest"!==t.type){const e=(t.structure||t.description||"").match(/(\d+(?:\.\d+)?)\s*(?:miles?|mi|kilometers?|km)\b/i);e?(p=parseFloat(e[1]),console.log("    \ud83d\udccf Parsed distance ".concat(p," miles from fallback workout text"))):p="tempo"===t.type||"interval"===t.type||"hills"===t.type?4:("easy"===t.type||t.type,3)}return(0,c.A)((0,c.A)({},t),{},{hasStructuredWorkout:!1,distance:p||t.distance||0})});return(0,c.A)((0,c.A)({},t),{},{workouts:s})});return(0,c.A)((0,c.A)({},e),{},{weeks:o})}injectUserPaces(e,t){if(!t)return e;const n=JSON.parse(JSON.stringify(e));n.name&&"string"===typeof n.name&&(n.name=this.fixCommonTypos(n.name)),n.description&&"string"===typeof n.description&&(n.description=this.fixCommonTypos(n.description)),n.structure&&"string"===typeof n.structure&&(n.structure=this.fixCommonTypos(n.structure)),n.workout&&["warmup","main","recovery","cooldown","repeat"].forEach(e=>{n.workout[e]&&"string"===typeof n.workout[e]&&(n.workout[e]=this.fixCommonTypos(n.workout[e]))}),n.structure&&"string"===typeof n.structure&&(n.structure=this.replaceGenericPaces(n.structure,t)),n.description&&"string"===typeof n.description&&(n.description=this.replaceGenericPaces(n.description,t)),n.name&&"string"===typeof n.name&&(n.name=this.replaceGenericPaces(n.name,t)),n.workout&&["warmup","main","recovery","cooldown","repeat"].forEach(e=>{n.workout[e]&&"string"===typeof n.workout[e]&&(n.workout[e]=this.replaceGenericPaces(n.workout[e],t))}),n.repetitions&&Array.isArray(n.repetitions)&&(n.repetitions=n.repetitions.map(e=>"string"===typeof e?this.replaceGenericPaces(e,t):e));const r=n.type||n.workoutType||"",i=(n.name||"").toLowerCase(),o=(n.structure||"").toLowerCase();var a;if("tempo"===r||i.includes("tempo")||i.includes("threshold")||o.includes("tempo")||o.includes("threshold")||o.includes("10k pace"))null!==(a=t.threshold)&&void 0!==a&&a.pace&&(n.targetPace=t.threshold.pace);else if("interval"===r||"intervals"===r||i.includes("interval")||i.includes("vo2")||i.includes("speed")||o.includes("interval")||o.includes("5k pace")){var s;null!==(s=t.interval)&&void 0!==s&&s.pace&&(n.targetPace=t.interval.pace)}else if(i.includes("marathon")||o.includes("marathon pace")||o.includes("mp")){var l;null!==(l=t.marathon)&&void 0!==l&&l.pace&&(n.targetPace=t.marathon.pace)}else if("easy"===r||"recovery"===r||i.includes("easy")||i.includes("recovery")){var c,u;null!==(c=t.easy)&&void 0!==c&&c.min&&null!==(u=t.easy)&&void 0!==u&&u.max&&(n.targetPace="".concat(t.easy.min,"-").concat(t.easy.max))}return n}replaceGenericPaces(e,t){var n,r,i,o,a;if(!e||"string"!==typeof e)return e;let s=e;const l=null===(n=t.threshold)||void 0===n?void 0:n.pace,c=null===(r=t.interval)||void 0===r?void 0:r.pace,u=null===(i=t.marathon)||void 0===i?void 0:i.pace,d=null!==(o=t.easy)&&void 0!==o&&o.min&&null!==(a=t.easy)&&void 0!==a&&a.max?"".concat(t.easy.min,"-").concat(t.easy.max):t.easy;return l&&(s=s.replace(/@\s*tempo\b/gi,"@ ".concat(l,"/mi")),s=s.replace(/\btempo\s+pace\b/gi,"".concat(l,"/mi")),s=s.replace(/\bthreshold\s+pace\b/gi,"".concat(l,"/mi")),s=s.replace(/\btempo\s+effort\b/gi,"@ ".concat(l,"/mi")),s=s.replace(/\bthreshold\s+effort\b/gi,"@ ".concat(l,"/mi")),s=s.replace(/\bmin\s+tempo\b/gi,"min @ ".concat(l,"/mi"))),u&&(s=s.replace(/@\s*marathon\s+pace\b/gi,"@ ".concat(u,"/mi")),s=s.replace(/\bmarathon\s+pace\b/gi,"".concat(u,"/mi")),s=s.replace(/@\s*MP\b/gi,"@ ".concat(u,"/mi")),s=s.replace(/\bMP\b/g,"".concat(u,"/mi"))),c&&"string"===typeof c&&(s=s.replace(/VO2\s+max\s+effort\b/gi,"@ ".concat(c,"/mi")),s=s.replace(/\binterval\s+pace\b/gi,"".concat(c,"/mi"))),d&&"string"===typeof d&&(s=s.replace(/\beasy\s+pace\b/gi,"".concat(d,"/mi")),s=s.replace(/\beasy\s+effort\b/gi,"@ ".concat(d,"/mi"))),l&&(s=s.replace(/@\s*10K\s+pace\b/gi,"@ ".concat(l,"/mi")),s=s.replace(/\b10K\s+pace\b/gi,"".concat(l,"/mi")),s=s.replace(/\b10-K\s+pace\b/gi,"".concat(l,"/mi")),s=s.replace(/10K\s+race\s+pace\b/gi,"".concat(l,"/mi (10K/threshold pace)")),s=s.replace(/@\s*half\s+marathon\s+pace\b/gi,"@ ".concat(l,"/mi")),s=s.replace(/\bhalf\s+marathon\s+pace\b/gi,"".concat(l,"/mi")),s=s.replace(/@\s*half\s+pace\b/gi,"@ ".concat(l,"/mi"))),c&&"string"===typeof c&&(s=s.replace(/@\s*5K\s+pace\b/gi,"@ ".concat(c,"/mi")),s=s.replace(/\b5K\s+pace\b/gi,"".concat(c,"/mi")),s=s.replace(/\b5-K\s+pace\b/gi,"".concat(c,"/mi")),s=s.replace(/5K\s+race\s+pace\b/gi,"".concat(c,"/mi (5K/interval pace)"))),s}};const Pt=new class{parseDate(e){return e?e.includes("T")?new Date(e):new Date("".concat(e,"T00:00:00")):null}transformToDashboardFormat(e,t){var n;console.log("\n\ud83d\udd27 TRANSFORMING TO DASHBOARD FORMAT");let r=(null===(n=e.weeks)||void 0===n?void 0:n.length)||0;if(0===r){const e=this.parseDate(t.startDate),n=this.parseDate(t.raceDate);if(!e||!n||isNaN(e.getTime())||isNaN(n.getTime()))throw console.error("\u274c Cannot calculate totalWeeks - missing or invalid dates"),new Error("Cannot create plan: weeks array is empty and dates are invalid");{const t=6048e5;r=Math.max(1,Math.ceil((n.getTime()-e.getTime())/t)),console.warn("\u26a0\ufe0f Weeks array is empty - calculated totalWeeks from dates: ".concat(r))}}const i=Et.getPhasePlan(r),o={Base:"Aerobic foundation & durability",Build:"Strength & speed development",Peak:"Race-specific sharpening",Taper:"Freshen up & execute"},a={Base:["Consistency right now builds race-day confidence \ud83d\udcaa","Aerobic base today = faster workouts later \u2699\ufe0f","Keep stacking easy miles - durability wins \ud83e\uddf1","Recovery matters as much as the miles \ud83d\ude34"],Build:["Dial in effort - smooth, fast, controlled \ud83d\ude80","This phase teaches you to love the grind \ud83d\udd01","Every quality day is sharpening your edge \u2702\ufe0f","Fuel, sleep, repeat - you're in the work zone \ud83e\uddea"],Peak:["Race-specific work now = calm on race day \ud83c\udfc1","Trust your legs - they know what to do \ud83d\udc63","Two words: race rehearsals \ud83e\udde0","Your engine is built. Now we fine tune \ud83d\udd27"],Taper:["Less work, more readiness - let freshness build \ud83c\udf31","Nothing new. Stay sharp, stay calm \ud83c\udfaf","Visualize success - you've earned this \ud83d\udcab","Rest is training. Really. \ud83d\ude34"]};let s,l;if(s=t.startDate?t.startDate.includes("T")?new Date(t.startDate):new Date("".concat(t.startDate,"T00:00:00")):new Date,l=t.raceDate?t.raceDate.includes("T")?new Date(t.raceDate):new Date("".concat(t.raceDate,"T00:00:00")):new Date(s),isNaN(s.getTime()))throw new Error("Invalid start date: ".concat(t.startDate));if(isNaN(l.getTime()))throw new Error("Invalid race date: ".concat(t.raceDate));const u=e=>{const t=new Date(s);t.setDate(s.getDate()+7*(e-1));const n=new Date(t);return n.setDate(t.getDate()+6),{start:t.toISOString().split("T")[0],end:n.toISOString().split("T")[0],displayText:"".concat(t.toLocaleDateString(void 0,{month:"short",day:"numeric"})," - ").concat(n.toLocaleDateString(void 0,{month:"short",day:"numeric"}))}},d=(e,t)=>{const n=a[e]||a.Base;return n[(t-1)%n.length]},h=e.weeks.map(e=>{console.log("\n\ud83d\udcc5 Week ".concat(e.weekNumber," - ").concat(e.workouts.length," workouts"));const t=e.workouts.map(e=>{if(console.log("\n  Processing workout:",{day:e.day,description:e.description,hasWorkoutId:!!e.workoutId,hasFullDetails:!!e.fullWorkoutDetails,workoutType:e.workoutType}),e.fullWorkoutDetails){const t=e.fullWorkoutDetails;console.log("  \u2705 Using fullWorkoutDetails:",{name:t.name,category:t.category,hasNestedWorkout:!!t.workout});let n=e.distance||e.extractedDistance||t.distance||0;if(!n){const t=e.description.match(/(\d+(?:\.\d+)?)\s*(mile|miles|mi|km)/i);t&&(n=parseFloat(t[1]),console.log("  \ud83d\udccf Extracted distance from description: ".concat(n," ").concat(t[2])))}if(!n&&e.originalDescription){const t=e.originalDescription.match(/(\d+(?:\.\d+)?)\s*(mile|miles|mi|km)/i);t&&(n=parseFloat(t[1]),console.log("  \ud83d\udccf Extracted distance from original description: ".concat(n)))}const r=t.workout?(0,c.A)((0,c.A)({},t.workout),{},{name:t.name,description:t.description}):{name:t.name,description:t.description,warmup:t.warmup,main:t.main,cooldown:t.cooldown,repetitions:t.repetitions,structure:t.structure,duration:t.duration,pace:t.pace,intensity:t.intensity},i=((e,t)=>{const n=(e||"").toLowerCase(),r=(t||"").toLowerCase();return"interval"===n||r.includes("vo2")||r.includes("speed")||r.includes("interval")||r.includes("short_speed")||r.includes("long_interval")?"intervals":"hill"===n||r.includes("hill")||r.includes("power")||r.includes("strength")?"hills":"tempo"===n||r.includes("tempo")||r.includes("threshold")?"tempo":"longrun"===n||r.includes("long")||r.includes("progressive")||r.includes("mixed_pace")?"longRun":n||"easy"})(e.workoutType,t.category),o={tempo:"Lactate Threshold",intervals:"Speed & VO2 Max",hills:"Strength & Power",longRun:"Endurance",easy:"Aerobic Base",bike:"Cross-Training",rest:"Recovery",rest_or_xt:"Recovery / XT"};let a=t.name||e.description;a=a.replace(/\[WORKOUT_ID:\s*(?:tempo|interval|longrun|hill|fartlek)_.+?_\d+\]\s*/g,"").replace(/\[WORKOUT_ID[^\]]*\]?\s*/gi,"").trim(),a&&!a.startsWith("[")||(a=o[i]||"Workout");let s=t.description||e.description;return s=s.replace(/\[WORKOUT_ID:\s*(?:tempo|interval|longrun|hill|fartlek)_.+?_\d+\]\s*/g,"").replace(/\[WORKOUT_ID[^\]]*\]?\s*/gi,"").trim(),{day:e.day,type:i,name:a,description:s,distance:n||e.extractedDistance||0,focus:o[i]||t.focus||"Training",workout:r,terrain:t.terrain,safety:t.safety,runeq_options:t.runeq_options||t.runEqOptions,warmup:r.warmup,cooldown:r.cooldown,repetitions:r.repetitions||t.repetitions,hillRequirement:t.hillRequirement,intensity:t.intensity,progression:t.progression,safetyNotes:t.safetyNotes,duration:t.duration,specificFocus:t.focus,metadata:{workoutId:e.workoutId,aiGenerated:!0,libraryCategory:t.category}}}let t=e.description||"";t&&(t=t.replace(/miless/gi,"miles").replace(/milees/gi,"miles").replace(/milles/gi,"miles").replace(/milse/gi,"miles").replace(/mile\s+s/gi,"miles"),e.description=t),console.log('  \u26a0\ufe0f Using FALLBACK - description: "'.concat(t,'"'));let n=e.distance||0;if(!n){const e=t.match(/(\d+(?:\.\d+)?)\s*(mile|miles|mi|km|RunEQ)/i);e&&(n=parseFloat(e[1]),console.log("  \ud83d\udccf Extracted distance: ".concat(n," ").concat(e[2])))}let r="easy";const i=t.toLowerCase();if(i.includes("rest")||"rest"===i)r="rest";else if(i.includes("ride")||i.includes("runeq")||i.includes("bike")){r="bike";const e=t.match(/(\d+(?:\.\d+)?)\s*RunEQ/i);e&&(n=parseFloat(e[1]),console.log("  \ud83d\udccf Extracted RunEQ distance: ".concat(n," RunEQ miles")))}else i.includes("easy")?r="easy":i.includes("tempo")?r="tempo":i.includes("interval")?r="intervals":i.includes("hill")?r="hills":i.includes("long")&&(r="longRun");const o={tempo:"Lactate Threshold",intervals:"Speed & VO2 Max",hills:"Strength & Power",longRun:"Endurance",easy:"Aerobic Base",bike:"Cross-Training",rest:"Recovery",rest_or_xt:"Recovery / XT"},a=e=>e?e.replace(/miless/gi,"miles").replace(/milees/gi,"miles").replace(/milles/gi,"miles").replace(/milse/gi,"miles").replace(/mies/gi,"miles"):e;let s=a(e.description);s=s.replace(/\[WORKOUT_ID:\s*(?:tempo|interval|longrun|hill|fartlek)_.+?_\d+\]\s*/g,"").replace(/\[WORKOUT_ID[^\]]*\]?\s*/gi,"").trim(),s&&!s.startsWith("[")||(s=o[r]||"Workout");let l=s,u=s;if("bike"===r&&e.description.match(/RunEQ/i)){const t=a(e.description).match(/(\d+(?:\.\d+)?)\s*RunEQ\s*miles?/i);t&&(l="Ride ".concat(t[1]," RunEQ miles"),u=a(e.description))}else l=s,u=a(e.description);const d={day:e.day,type:r,name:l,description:u,distance:n,focus:o[r]||"Training",workout:{name:l,description:u},metadata:{aiGenerated:!0,fallback:!0}};return console.log("  Created fallback workout:",d),d}),n=Et.getPhaseForWeek(e.weekNumber,r),i=n.toLowerCase();1!==e.weekNumber&&e.weekNumber!==Math.ceil(.5*r)&&e.weekNumber!==r||console.log("\ud83d\udcc5 Week ".concat(e.weekNumber,"/").concat(r,": Phase = ").concat(n," (").concat(i,")"));let a,s=0;return t.forEach(e=>{"bike"===e.type&&e.distance?s+=parseFloat(e.distance):e.distance&&"rest"!==e.type&&"rest_or_xt"!==e.type&&"bike"!==e.type&&(s+=e.distance)}),s>0?(a=Math.round(s),Math.abs(a-(e.totalMileage||0))>1&&console.log("  \ud83d\udcca Week ".concat(e.weekNumber,": Using calculated ").concat(a,"mi (week.totalMileage was ").concat(e.totalMileage,"mi)"))):(a=e.totalMileage||0,0===a&&console.warn("  \u26a0\ufe0f Week ".concat(e.weekNumber,": Could not calculate mileage from workouts, using 0"))),{weekNumber:e.weekNumber,totalMileage:a,workouts:t,phase:i,weeklyFocus:o[n]||"Periodized training",motivation:d(n,e.weekNumber),weekDates:u(e.weekNumber)}});if(h.length>0&&t.raceDate){const e=h[h.length-1],n=e.workouts.some(e=>"Sunday"===e.day),r=t.raceDistance||"",i="Marathon"===r||r.includes("Marathon")?26.2:"Half"===r||r.includes("Half")?13.1:"10K"===r||r.includes("10K")?6.2:"5K"===r||r.includes("5K")?3.1:0,o=e.workouts.findIndex(e=>"race"===e.type||e.name&&e.name.toLowerCase().includes("race")||e.description&&e.description.toLowerCase().includes("race day")),a=o>=0?e.workouts[o]:null,s=a&&"race"===a.type&&Math.abs(a.distance-i)<.5&&"Race Day"===a.focus,l="Half"===t.raceDistance?"Half Marathon":t.raceDistance,c=t.raceTime||"";if(!n||!a||!s){const r={day:"Sunday",type:"race",name:"\ud83c\udfc1 Race Day: ".concat(l),description:c?"".concat(l," - Goal: ").concat(c):"".concat(l," Race"),distance:i,focus:"Race Day",workout:{name:"\ud83c\udfc1 Race Day: ".concat(l),description:"Your ".concat(l," race! Execute your race plan and trust your training.")},metadata:{isRaceDay:!0,raceDistance:t.raceDistance,goalTime:c}};n&&(e.workouts=e.workouts.filter(e=>"Sunday"!==e.day)),e.workouts.push(r),a&&!s?console.log("\ud83c\udfc1 Fixed Race Day in final week (Week ".concat(e.weekNumber,"): Was distance=").concat(a.distance,", type=").concat(a.type,", focus=").concat(a.focus," \u2192 Now distance=").concat(i,", type=race, focus=Race Day")):console.log("\ud83c\udfc1 Injected Race Day into final week (Week ".concat(e.weekNumber,")"))}}let p=e.fullPlanText?e.fullPlanText.replace(/\[WORKOUT_ID:\s*(?:tempo|interval|longrun|hill|fartlek)_[^\]]+\]\s*/gi,"").trim():e.fullPlanText;if(p){const e=[/#+\s*Week-by-Week Training Schedule[\s\S]*/i,/#+\s*DETAILED\s+\d+-WEEK\s+TRAINING\s+PLAN[\s\S]*/i,/#+\s*\d+-WEEK\s+TRAINING\s+PLAN[\s\S]*/i];for(const t of e)p=p.replace(t,"").trim();p=p.replace(/miless/gi,"miles").replace(/milees/gi,"miles").replace(/milles/gi,"miles").replace(/milse/gi,"miles")}const m=s.toISOString().split("T")[0],f=l.toISOString().split("T")[0];return{userProfile:e.userProfile,paces:e.paces,trackIntervals:e.trackIntervals,weeks:h,fullPlanText:e.fullPlanText,aiCoachingAnalysis:p,planOverview:{startDate:m,raceDate:f,totalWeeks:r,raceDistance:t.raceDistance,goalTime:t.raceTime,trainingPhilosophy:t.trainingPhilosophy||t.trainingStyle||"practical_periodization",phasePlan:i}}}};function Mt(e){return void 0!==e.workoutsPerWeek&&null!==e.workoutsPerWeek?e.workoutsPerWeek:void 0!==e.runsPerWeek&&null!==e.runsPerWeek?e.runsPerWeek:4}const _t=new class{constructor(){this.parseDate=e=>e?e.includes("T")?new Date(e):new Date("".concat(e,"T00:00:00")):null,this.callAnthropicAPI=(0,At.Qg)(Pe.Cn,"callAnthropicAPI"),this.hillLibrary=new Be.c,this.intervalLibrary=new Ue.e,this.tempoLibrary=new We.s,this.longRunLibrary=new qe.g,this.paceCalculator=new Ve.O,this.raceDistanceMiles={"5K":3.1,"10K":6.2,Half:13.1,"Half Marathon":13.1,Marathon:26.2},this.distanceToVdotKey={"5K":"10K","10K":"10K",Half:"halfMarathon","Half Marathon":"halfMarathon",Marathon:"marathon"},this.buildVdotEquivalencyTable(),this.coachingSystemPrompt='You are a USATF-certified running coach who practices practical periodization. Your coaching style is conversational, data-driven, and actionable - like you\'re coaching someone you know personally.\n\nCRITICAL: You have access to a curated workout library. SELECT workouts from the library - DO NOT invent new ones.\n\nJASON FITZGERALD COACHING VOICE - KEY CHARACTERISTICS:\n- **Direct and honest**: "Let\'s be real" - no sugarcoating, but ALWAYS encouraging and confident\n- **Data-driven**: Use specific paces, times, and metrics - show the math\n- **Practical periodization**: "Run less, run faster" philosophy - quality over quantity\n- **Injury prevention focus**: Emphasize recovery, rest days, and smart progression\n- **Mental toughness**: Acknowledge the challenge, build confidence through checkpoints\n- **Conversational but professional**: Like talking to a friend who happens to be an expert\n- **Actionable specifics**: Not just "run tempo" but "run tempo at 9:35-9:50/mile for 20 minutes"\n- **Reality checks**: Set clear checkpoints with specific metrics (e.g., "10K under 65:00 by Week 8") - checkpoints must be within the plan duration (Week 1 to Week [totalWeeks])\n- **Explain the "why"**: Don\'t just say what to do - explain why it matters\n- **Encouraging and confident**: "This is challenging, but you\'ve got this" or "This is ambitious and achievable with consistent training" - focus on what\'s POSSIBLE, not limitations\n- **Personal connection**: Use the runner\'s name naturally, reference their specific situation\n\nCOACHING VOICE GUIDELINES:\n- Start with honest but encouraging assessment: "Let\'s be real about this goal - it\'s challenging, but here\'s why it\'s achievable..."\n- Use specific data: paces, times, distances, checkpoints with clear metrics\n- Frame challenges positively: "This is ambitious and here\'s the path to get there" NOT "This is aggressive, be ready to adjust"\n- Emphasize what\'s POSSIBLE: Focus on the runner\'s strengths, time available, and progressive build-up\n- Emphasize injury prevention: "Rest days are non-negotiable" or "Cyclete keeps you fresh"\n- Include mental coaching: "Trust the process" or "You\'ve put in the work" or "You have what it takes"\n- Provide race strategy: Specific pacing plans, fueling, terrain tactics\n- Set clear checkpoints: "Week 8 tune-up: 10K under 65:00 to validate we\'re on track" (NOT "or we adjust goal")\n- Explain workout purpose: "Hill repeats build strength without track pounding"\n- Be conversational: Use contractions, natural phrasing, "you" not "the runner"\n- End with strong encouragement: "Let\'s do this" or "You\'ve got this" or "I believe in this plan"\n- DO NOT use phrases like "be ready to adjust" or "recalibrate to a more realistic goal" - instead say "we\'ll track progress and fine-tune as needed"\n- DO NOT use any real coach names in your response\n- Be concise and insightful, not flowery or generic\n\nCRITICAL: For COACHING ANALYSIS requests, you are providing NARRATIVE COACHING ONLY.\n- DO NOT include workout IDs like [WORKOUT_ID: ...] in your coaching analysis\n- DO NOT include week-by-week plan structure in your coaching analysis\n- DO NOT list specific workouts or create a training schedule\n- The plan structure is generated separately by code - your role is to provide coaching insight, motivation, and strategy\n- Focus on: goal assessment, periodization explanation, pacing strategy, mental preparation, injury prevention, race tactics\n- Use conversational coaching language - explain the "why" behind the training approach\n- Reference general workout types (e.g., "tempo runs", "interval work", "long runs") but do NOT use workout IDs or create detailed schedules\n\nYour role: COACHING (periodization, goal assessment, progression, recovery guidance) NOT workout design or plan structure generation.\n\nAssessment & Periodization:\n- Assess fitness realistically based on current performance data\n- Apply 4-phase periodization (base \u2192 build \u2192 peak \u2192 taper)\n- Create progressive training that builds from current fitness level\n- Include strategic recovery weeks every 4th week\n- Recommend assessment checkpoints to validate goal feasibility\n- Be conversational and encouraging while being honest about realistic expectations\n\nSTAND-UP BIKE INTELLIGENCE (if user has Cyclete or ElliptiGO):\n\nCYCLETE (if available):\n- Motion: Patented teardrop with acceleration through back stroke (mimics running push-off)\n- Muscle Loading: QUAD-DOMINANT - same muscles as running\n- Running Specificity: HIGH - closest cross-training to actual running\n- Best For: Replacing easy runs, maintaining running fitness, leg turnover\n- AVOID scheduling after: Hill repeats, speed work, quad-heavy days (compounds fatigue)\n- Schedule after: Tempo runs, glute-focused strength, upper body days\n\nELLIPTIGO (if available):\n- Motion: Elliptical (smooth, constant speed)\n- Muscle Loading: GLUTE + FULL-BODY (hip extension emphasis)\n- Running Specificity: MODERATE - different muscle pattern than running\n- Best For: Active recovery, cross-training variety, full-body conditioning\n- EXCELLENT after: Hill repeats, speed work (works different muscles = recovery)\n- Burns 33% more calories than cycling\n\nSEQUENCING RULES:\n- After quad-heavy running (hills, speed) \u2192 prefer ElliptiGO (glutes, recovery)\n- To replace an easy run \u2192 prefer Cyclete (running-specific)\n- User has both? Alternate based on previous day\'s muscle loading\n- Never schedule Cyclete day after hill repeats (quad overload)'}getPhasePlan(e){return Et.getPhasePlan(e)}getPhaseForWeek(e,t){return Et.getPhaseForWeek(e,t)}buildVdotEquivalencyTable(){this.vdotTable=[];const e=Ct.i0["10K"]||[],t=Ct.i0.halfMarathon||[],n=Ct.i0.marathon||[];e.forEach(e=>{const r=e.paces.threshold.pace,i=t.find(e=>Math.abs(this.timeToSeconds(e.paces.threshold.pace)-this.timeToSeconds(r))<10),o=n.find(e=>Math.abs(this.timeToSeconds(e.paces.threshold.pace)-this.timeToSeconds(r))<10);(i||o)&&this.vdotTable.push({tenK:e.goalTime,tenKSeconds:this.timeToSeconds(e.goalTime),half:(null===i||void 0===i?void 0:i.goalTime)||null,halfSeconds:i?this.timeToSeconds(i.goalTime):null,marathon:(null===o||void 0===o?void 0:o.goalTime)||null,marathonSeconds:o?this.timeToSeconds(o.goalTime):null,thresholdPace:r})}),console.log("Built VDOT equivalency table with",this.vdotTable.length,"entries")}timeToSeconds(e){if(!e)return 0;const t=e.split(":").map(Number);return 2===t.length?60*t[0]+t[1]:3===t.length?3600*t[0]+60*t[1]+t[2]:0}secondsToPace(e){const t=Math.floor(e/60),n=Math.round(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))}secondsToTime(e){const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.round(e%60);return t>0?"".concat(t,":").concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0")):"".concat(n,":").concat(r.toString().padStart(2,"0"))}calculatePacePerMile(e,t){const n=this.raceDistanceMiles[t];if(!n)return null;const r=this.timeToSeconds(e);if(0===r)return null;const i=r/n;return this.secondsToPace(i)}predictRaceTimes(e,t){const n=this.timeToSeconds(e);if(!n)return null;const r="Half Marathon"===t?"Half":t;let i;if("10K"===r)i=n;else if("Half"===r)i=this.interpolateFrom10K(n,"halfSeconds","tenKSeconds");else if("Marathon"===r)i=this.interpolateFrom10K(n,"marathonSeconds","tenKSeconds");else{if("5K"!==r)return null;i=n/.47}if(!i)return null;const o={"5K":this.secondsToTime(.47*i),"10K":this.secondsToTime(i)},a=this.interpolateFrom10K(i,"tenKSeconds","halfSeconds"),s=this.interpolateFrom10K(i,"tenKSeconds","marathonSeconds");return o.Half=a?this.secondsToTime(a):this.secondsToTime(2.1*i),o["Half Marathon"]=o.Half,o.Marathon=s?this.secondsToTime(s):this.secondsToTime(4.6*i),o}interpolateFrom10K(e,t,n){if(!this.vdotTable||0===this.vdotTable.length)return null;const r=this.vdotTable.filter(e=>e[t]&&e[n]);if(0===r.length)return null;r.sort((e,n)=>e[t]-n[t]);let i=null,o=null;for(let s=0;s<r.length;s++)if(r[s][t]<=e&&(i=r[s]),r[s][t]>=e&&!o){o=r[s];break}if(!i&&!o)return null;if(!i)return o[n];if(!o)return i[n];if(i===o)return i[n];const a=(e-i[t])/(o[t]-i[t]);return i[n]+a*(o[n]-i[n])}buildFitnessAssessmentContext(e){if(!e.recentRaceTime||!e.recentRaceDistance)return null;const t=this.calculatePacePerMile(e.recentRaceTime,e.recentRaceDistance),n=this.predictRaceTimes(e.recentRaceTime,e.recentRaceDistance);if(!t||!n)return null;let r="\n**CALCULATED FITNESS DATA (from recent ".concat(e.recentRaceDistance,"):**\n");r+="- Recent ".concat(e.recentRaceDistance," Pace: ").concat(t,"/mile\n"),r+="- **PROJECTED Race Times (if they ran these distances TODAY based on their ".concat(e.recentRaceDistance," performance):**\n"),r+="  - 5K: ".concat(n["5K"]," (projected from ").concat(e.recentRaceDistance," time)\n"),r+="  - 10K: ".concat(n["10K"]," (projected from ").concat(e.recentRaceDistance," time)\n"),r+="  - Half Marathon: ".concat(n.Half," (projected from ").concat(e.recentRaceDistance," time - this is what they'd run if they did a half marathon TODAY)\n"),r+="  - Marathon: ".concat(n.Marathon," (projected from ").concat(e.recentRaceDistance," time)\n");const i=e.raceDistance,o=e.raceTime;if(o&&i){const t=o.includes("-")?o.split("-")[1]:o,a=this.timeToSeconds(t),s=n[i]||n.Half,l=this.timeToSeconds(s);if(a&&l){const n=a-l,o=Math.abs(Math.round(n/60));r+="\n**CURRENT vs GOAL ANALYSIS:**\n",r+="- **Current fitness projection:** If they ran a ".concat(i," TODAY (based on their ").concat(e.recentRaceDistance," time), they would run approximately ").concat(s,"\n"),r+="- **Goal ".concat(i,":** ").concat(t,"\n"),r+="- **Gap to close:** ".concat(o," minutes ").concat(n<0?"faster":"slower","\n"),r+="\n**IMPORTANT:** When describing current fitness, make it clear this is a PROJECTION from their ".concat(e.recentRaceDistance," time, not a past ").concat(i,' result. Say something like "If you ran a ').concat(i," today based on your ").concat(e.recentRaceDistance," performance, you'd likely run around ").concat(s,'" or "Your current fitness (based on your ').concat(e.recentRaceDistance," time) projects to a ").concat(s," ").concat(i,' if you ran it today."\n'),n>300?(r+="\nThis runner is ALREADY faster than their goal. They could target a more ambitious time, ",r+="or use this as a comfortable training cycle. Consider suggesting they reassess after a tune-up race.\n"):n<-1800?(r+="\nThis is a VERY aggressive goal (".concat(o," min improvement needed). "),r+="With dedicated training this improvement IS possible over a full training cycle, but be realistic: ",r+="typical improvement is 1-3 minutes per month of focused training. ",r+="Build the plan progressively and use checkpoints to assess if the goal needs adjustment.\n"):n<-300?(r+="\nThis is an ambitious but potentially achievable goal with focused training. ",r+="The runner needs to improve by ~".concat(o," minutes from current fitness. "),r+="Build progressive training and include checkpoint assessments to track improvement.\n"):r+="\nThis goal aligns well with current fitness - very achievable with consistent training.\n"}}return r}buildWorkoutLibraryContext(){return Rt.buildWorkoutLibraryContext()}async generateTrainingPlan(e){try{let r=(0,c.A)((0,c.A)({},e),{},{qualityDays:e.qualityDays||e.hardSessionDays||[]});if(!r.recentRaceTime&&r.raceTime&&r.raceDistance){Oe.A.log("\u26a0\ufe0f No recent race time provided - calculating safe baseline (15% slower than goal)");const e=r.raceTime.includes("-")?r.raceTime.split("-")[1]:r.raceTime,t=this.paceCalculator.addBufferToTime(e,1.15);r.recentRaceTime=t,r.recentRaceDistance=r.raceDistance,r.isEstimatedFitness=!0,Oe.A.log("  \u2705 Safe baseline calculated: ".concat(e," \u2192 ").concat(t," (15% slower)")),Oe.A.log("  \u2705 Using ".concat(r.raceDistance," as baseline distance"))}const i=this.buildCoachingAnalysisPrompt(r),o=await this.callWithTimeout(this.callAnthropicAPI({model:"claude-sonnet-4-5-20250929",max_tokens:2e3,system:this.coachingSystemPrompt,messages:[{role:"user",content:i}]}),18e4);if(!o.data.success)throw new Error(o.data.error||"Failed to generate coaching analysis");const a=o.data.content[0].text;Oe.A.log("\u2705 Step 1 complete: Coaching analysis generated");const s=Rt.buildWorkoutLibraryContext(),{prompt:l,planMath:u}=this.buildPlanStructurePrompt(r,a),d="".concat(s,"\n\n---\n\n**COACHING ANALYSIS FROM STEP 1 (for reference):**\n").concat(a,"\n\n---\n\n").concat(l),h=await this.callWithTimeout(this.callAnthropicAPI({model:"claude-sonnet-4-5-20250929",max_tokens:1e4,system:this.coachingSystemPrompt,messages:[{role:"user",content:d}]}),18e4);if(!h.data.success)throw new Error(h.data.error||"Failed to generate plan structure");const p=h.data.content[0].text;Oe.A.log("\u2705 Step 2 complete: Plan structure generated");const m="".concat(a,"\n\n---\n\n").concat(p),f=Ft.parseAIPlanToStructure(m,r);if(f.weeks&&Array.isArray(f.weeks)){const e=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];f.weeks.forEach(t=>{t.workouts&&Array.isArray(t.workouts)||(t.workouts=[]);const n=t.workouts.map(e=>e.day);e.forEach(e=>{n.includes(e)||(Oe.A.warn("\u26a0\ufe0f Week ".concat(t.weekNumber||t.week,": Missing ").concat(e," - auto-filling as Rest day")),t.workouts.push({day:e,type:"rest",name:"Rest Day",description:"Rest day (Auto-generated - AI truncated week)",workout:{name:"Rest",description:"Rest day (Auto-generated)"},distance:0}))}),t.workouts.sort((t,n)=>{const r=t=>e.indexOf(t);return r(t.day)-r(n.day)})})}u&&u.weeks&&f.weeks&&(Oe.A.log("\ud83d\udd27 ENFORCING DETERMINISTIC MILEAGES (overriding AI output)"),f.weeks.forEach((e,t)=>{const n=u.weeks.find(t=>t.weekNumber===e.weekNumber);if(n){const t=e.totalMileage;e.totalMileage=n.weeklyMileage,e.longRunTarget=n.longRun,e.phase=n.phase,e._planMathTargets={weeklyMileage:n.weeklyMileage,longRun:n.longRun,tempoDistance:n.tempoDistance,intervalDistance:n.intervalDistance,hillDistance:n.hillDistance},t!==e.totalMileage&&Oe.A.log("  Week ".concat(e.weekNumber,": AI said ").concat(t,"mi \u2192 CORRECTED to ").concat(e.totalMileage,"mi (long run: ").concat(n.longRun,"mi)"))}}),f._planMathTargets=u.targets);const g=It.enrichPlanWithWorkouts(f);Tt.fixMileageMismatches(g,r),Tt.fixMissingLongRuns(g,r);const y=Pt.transformToDashboardFormat(g,r);Tt.fixHardDaysViolations(y,r);try{const{validateTrainingPlan:e}=await Promise.resolve().then(n.bind(n,462)),t=e(y,r);t.valid||console.error("\u26a0\ufe0f Training plan validation failed - but continuing anyway:",t.errors)}catch(t){console.warn("\u26a0\ufe0f Could not run validations:",t.message)}return{success:!0,plan:y,rawResponse:m,metadata:{generatedAt:(new Date).toISOString(),model:"claude-sonnet-4-5",userProfile:e}}}catch(t){return console.error("AI Coach Error:",t),{success:!1,error:t.message}}}async generateCoachingAnalysis(e){try{const t=(0,c.A)((0,c.A)({},e),{},{qualityDays:e.qualityDays||e.hardSessionDays||[]}),n=this.buildCoachingAnalysisPrompt(t),r=await this.callWithTimeout(this.callAnthropicAPI({model:"claude-sonnet-4-5-20250929",max_tokens:2e3,system:this.coachingSystemPrompt,messages:[{role:"user",content:n}]}),18e4);if(!r.data.success)throw new Error(r.data.error||"Failed to generate coaching analysis");const i=r.data.content[0].text;return Oe.A.log("\u2705 Coaching analysis generated"),{success:!0,analysis:i}}catch(t){return console.error("AI Coach Error (Coaching Analysis):",t),{success:!1,error:t.message}}}async callWithTimeout(e,t){const n=new Promise((e,n)=>{setTimeout(()=>n(new Error("Request timeout: Function call exceeded 180 seconds")),t)});return Promise.race([e,n])}isInjuredRunner(e){return"crossTrainingOnly"===e.runningStatus||e.injuries&&Object.values(e.injuries).some(e=>!0===e)||e.injuryDescription}buildCoachingAnalysisPrompt(e){e.units;const t=e.name||e.displayName,n=t?t.split(" ")[0]:null;let r="**COACHING ANALYSIS REQUEST**\n\n";return n&&(r+="Runner: ".concat(n,"\n\n"),r+="**CRITICAL: Use the runner's actual name \"".concat(n,'" throughout your response. DO NOT use example names like "Sarah" or any other placeholder names. The runner\'s name is ').concat(n,".**\n\n")),e.isEstimatedFitness&&(r+="**\ud83d\udea8 CRITICAL INSTRUCTION - MISSING DATA DISCLAIMER \ud83d\udea8**\n",r+="**YOU MUST START YOUR RESPONSE WITH THIS EXACT DISCLAIMER:**\n\n",r+='"\u26a0\ufe0f **NOTE:** You didn\'t enter a recent race time, so I\'ve estimated your current fitness to be safe (approx 15% slower than your goal). **If this feels too easy or too hard:** Click the **"Enter Recent Race Time"** button above to update your Current Fitness, and I\'ll instantly regenerate your plan."\n\n',r+="**IMPORTANT:** Include this disclaimer at the VERY START of your coaching analysis, before any other content. Use the exact wording provided above.\n\n"),this.isInjuredRunner(e)?r+=this.buildInjuredRunnerCoachingPrompt(e):r+=this.buildRegularRunnerCoachingPrompt(e),r}buildInjuredRunnerCoachingPrompt(e){if(!e.raceDistance||!e.raceTime||!e.raceDate)throw new Error("Missing required fields for injured runner coaching prompt");const t=e.units||"imperial",n="metric"===t?"kilometers":"miles",r=e.name||e.displayName,i=r?r.split(" ")[0]:null,o=new Date,a=e.startDate?this.parseDate(e.startDate):o,s=a.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a.getDay()],c=this.parseDate(e.raceDate),u=Math.ceil((c.getTime()-a.getTime())/6048e5),d=c.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),h=Math.ceil((c.getTime()-a.getTime())/864e5),p=Math.round(h/30.44),m=[];if(e.injuries){const t={itBand:"IT Band Syndrome",plantarFasciitis:"Plantar Fasciitis",shinSplints:"Shin Splints",kneeIssues:"Knee Issues",lowerBackPain:"Lower Back Pain",achillesTendonitis:"Achilles Tendonitis",stressFracture:"Stress Fracture",hipIssues:"Hip Issues",ankleIssues:"Ankle Issues"};Object.entries(e.injuries).forEach(e=>{let[n,r]=e;r&&"other"!==n&&t[n]&&m.push(t[n])}),e.injuries.other&&e.injuryDescription&&m.push("Other: ".concat(e.injuryDescription))}const f=[];if(e.standUpBikeType){const t="cyclete"===e.standUpBikeType?"Cyclete":"ElliptiGO";f.push(t)}e.crossTrainingEquipment&&(e.crossTrainingEquipment.pool&&f.push("pool/aqua running"),e.crossTrainingEquipment.rowing&&f.push("rowing machine"),e.crossTrainingEquipment.elliptical&&f.push("elliptical"),e.crossTrainingEquipment.stationaryBike&&f.push("stationary bike"),e.crossTrainingEquipment.swimming&&f.push("swimming"),e.crossTrainingEquipment.walking&&f.push("walking")),console.log("\ud83d\udea8 BUILDING INJURED RUNNER PROMPT - Injuries:",m,"Equipment:",f);let g="The training plan starts on ".concat(s," (").concat(l,"). Please create a training plan for me:\n\n");if(g+="**IMPORTANT: All distances should be in ".concat(n,". The user is using ").concat(t," units.**\n\n"),g+="**\ud83d\udea8\ud83d\udea8\ud83d\udea8 CRITICAL - PLAN DURATION AND RACE DATE \ud83d\udea8\ud83d\udea8\ud83d\udea8**\n",g+="**CALCULATION:** From ".concat(s," to ").concat(d," = ").concat(h," days = EXACTLY ").concat(u," weeks (").concat(p," months)\n"),g+="- **START DATE:** ".concat(s," (").concat(e.startDate,")\n"),g+="- **RACE DATE:** ".concat(d," (").concat(e.raceDate,")\n"),g+="- **EXACT DURATION:** ".concat(h," days = EXACTLY ").concat(u," weeks\n"),g+='- **\ud83d\udea8\ud83d\udea8\ud83d\udea8 YOU MUST SAY:** "'.concat(u,' weeks" when describing the plan duration. DO NOT say "a year", "10 months", "30 weeks", or any other duration.\n'),g+="- **\ud83d\udea8\ud83d\udea8\ud83d\udea8 CHECKPOINTS:** All checkpoints MUST be between Week 1 and Week ".concat(u," ONLY.\n"),g+="  * For a ".concat(u,"-week plan, example checkpoints: Week ").concat(Math.max(4,Math.floor(.3*u)),", Week ").concat(Math.floor(.6*u),", Week ").concat(Math.floor(.85*u),"\n"),g+="  * DO NOT create checkpoints at Week 8, 16, 24, 30, etc. if the plan is only ".concat(u," weeks long.\n"),g+="  * The plan ends at Week ".concat(u,", so ALL checkpoints must be BEFORE Week ").concat(u,".\n\n"),i&&(g+="**PERSONALIZATION: The runner's name is ".concat(i,'. Use their ACTUAL name "').concat(i,'" naturally 2-3 times throughout your coaching analysis. DO NOT use example names like "Sarah" or any placeholder names.**\n\n')),g+="**Goal Race:**\n",g+="- Distance: ".concat(e.raceDistance,"\n"),g+="- Goal Time: ".concat(e.raceTime,"\n"),g+="- Race Date: ".concat(e.raceDate,"\n"),e.raceElevationProfile){g+="- Course Terrain: ".concat({flat:"Flat course (minimal elevation change)",rolling:"Rolling hills (moderate elevation changes)",hilly:"Hilly course (significant elevation gain)"}[e.raceElevationProfile]||e.raceElevationProfile,"\n")}if(g+="\n",m.length>0?(g+="**\ud83d\udea8\ud83d\udea8\ud83d\udea8 CRITICAL - INJURY RECOVERY SITUATION \ud83d\udea8\ud83d\udea8\ud83d\udea8**\n",g+="**THE RUNNER IS CURRENTLY INJURED AND CANNOT RUN. THIS IS AN INJURY RECOVERY PLAN.**\n\n",g+="**INJURIES:** ".concat(m.join(", "),"\n\n"),g+="**AVAILABLE CROSS-TRAINING EQUIPMENT:** ".concat(f.length>0?f.join(", "):"None specified - use walking only","\n\n"),g+="**\ud83d\udea8\ud83d\udea8\ud83d\udea8 ABSOLUTE REQUIREMENT - YOU MUST ADDRESS THESE INJURIES IN YOUR COACHING ANALYSIS \ud83d\udea8\ud83d\udea8\ud83d\udea8**\n",g+="**YOUR FIRST SENTENCE MUST ACKNOWLEDGE THE INJURIES. FOR EXAMPLE:**\n",g+='"'.concat(i||"Runner",", I see you're recovering from ").concat(m.join(" and "),". As a sports physiologist, let me explain how we'll handle this injury recovery plan...\"\n\n"),g+="**THEN YOU MUST (as a sports physiologist):**\n",g+="1. **EXPLAIN BIOMECHANICAL REASONING:** For ".concat(m.join(" and "),", explain:\n"),g+="   - Which cross-training equipment is SAFEST for this injury and WHY (movement patterns, joint loading, muscle engagement)\n",g+="   - Which equipment could AGGRAVATE this injury and WHY (biomechanical contraindications)\n",g+='   - Reference sports medicine principles (e.g., "Shin splints benefit from zero-impact activities like pool running because it eliminates ground reaction forces that stress the tibia...")\n',g+="2. **EQUIPMENT RECOMMENDATIONS:** Explicitly state which of the available equipment (".concat(f.join(", "),") is best for ").concat(m.join(" and ")," and why\n"),g+="3. **EQUIPMENT ROTATION:** You MUST rotate through ALL available equipment types throughout the plan. Do NOT only use one type. Variety prevents overuse and provides comprehensive fitness.\n",g+="4. **RETURN-TO-RUNNING PROTOCOL:** Provide evidence-based guidance on when and how to safely return to running after ".concat(m.join(" and "),"\n"),g+='5. **MEDICAL DISCLAIMER:** Include: "\u26a0\ufe0f This is not medical advice. Consult your healthcare provider for injury diagnosis and treatment."\n',g+="\n",g+="**DO NOT SKIP THIS. The injuries (".concat(m.join(", "),") MUST be mentioned in the FIRST PARAGRAPH of your coaching analysis.**\n\n")):(g+="**\ud83d\udea8 INJURY RECOVERY STATUS:** Runner cannot run right now (cross-training only)\n",g+="**AVAILABLE EQUIPMENT:** ".concat(f.length>0?f.join(", "):"None specified - use walking only","\n\n")),g+="**Current Fitness:**\n",e.recentRaceTime&&e.recentRaceDistance){e.isEstimatedFitness?(g+="- **Estimated Current Fitness:** ".concat(e.recentRaceTime," for ").concat(e.recentRaceDistance," (calculated as 15% slower than goal - user did not provide recent race data)\n"),g+="  **IMPORTANT:** This is a CONSERVATIVE ESTIMATE to ensure safe training. The user's actual current fitness may be better or worse.\n"):g+="- Recent Race: ".concat(e.recentRaceTime," for ").concat(e.recentRaceDistance,"\n");const t=this.buildFitnessAssessmentContext(e);t&&(g+=t)}return g+="- Cross-Training Status: Cannot run - using cross-training equipment only\n",g+="\n",g+="**Training Preferences:**\n",g+="- Available Training Days: ".concat((e.availableDays||[]).join(", "),"\n"),e.restDays&&e.restDays.length>0&&(g+="- Rest Days: ".concat(e.restDays.join(", "),"\n")),g+="- Experience Level: ".concat(e.experienceLevel,"\n\n"),g+="**OUTPUT REQUIREMENTS (Sports Physiologist / Injury Recovery Coach voice):**\n",g+="1. **OPEN WITH INJURY ACKNOWLEDGMENT:** First sentence must acknowledge the injuries and recovery situation\n",g+="2. **BIOMECHANICAL EXPLANATION:** Explain why specific equipment is safe/unsafe for the injuries\n",g+="3. **EQUIPMENT ROTATION STRATEGY:** Explain how you'll rotate through all available equipment\n",g+="4. **CROSS-TRAINING PACES/EFFORTS:** Provide effort-based guidance (since we're not running, focus on perceived effort, heart rate zones, or time-based progression)\n",g+="5. **RETURN-TO-RUNNING PROTOCOL:** Evidence-based guidance on when/how to return to running\n",g+='6. **CHECKPOINTS:** Reality checks for cross-training fitness (e.g., "Week 8: Can you hold moderate effort for 60 minutes?")\n',g+="7. **MEDICAL DISCLAIMER:** Include medical disclaimer\n",g+="**DO NOT include week-by-week plan yet - that comes in a separate request.**\n",g+="Keep response focused on injury recovery, biomechanics, and cross-training strategy.\n",g}buildPlanStructurePrompt(e,t){return this.isInjuredRunner(e)?this.buildInjuredRunnerPlanStructurePrompt(e,t):this.buildRegularRunnerPlanStructurePrompt(e,t)}buildInjuredRunnerPlanStructurePrompt(e,t){var n,r,i,o,a;const s=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)||e.expertAnalysis||t&&"object"===typeof t&&t.expertAnalysis||null,l=[];if(null!==(n=e.crossTrainingEquipment)&&void 0!==n&&n.pool&&l.push("Pool/Aqua Running"),null!==(r=e.crossTrainingEquipment)&&void 0!==r&&r.elliptical&&l.push("Elliptical"),null!==(i=e.crossTrainingEquipment)&&void 0!==i&&i.stationaryBike&&l.push("Stationary Bike"),null!==(o=e.crossTrainingEquipment)&&void 0!==o&&o.swimming&&l.push("Swimming"),null!==(a=e.crossTrainingEquipment)&&void 0!==a&&a.rowing&&l.push("Rowing Machine"),e.standUpBikeType&&"none"!==e.standUpBikeType){const t="cyclete"===e.standUpBikeType?"Cyclete":"ElliptiGO";l.push(t)}let c=l,u=[];s&&s.equipmentToAvoid&&Array.isArray(s.equipmentToAvoid)&&s.equipmentToAvoid.length>0&&(u=s.equipmentToAvoid,c=l.filter(e=>{const t=e.toLowerCase().trim();return!u.some(e=>{const n=e.toLowerCase().trim();return t===n||!(!t.includes(n)&&!n.includes(t))})}),Oe.A.log("\ud83c\udfe5 Injury Recovery Equipment Filter:",{available:l,toAvoid:u,safe:c})),0===c.length&&l.length>0&&(Oe.A.warn("\u26a0\ufe0f All available equipment is marked to avoid - using all equipment as fallback"),c=l);const{prompt:d,planMath:h}=this.buildRegularRunnerPlanStructurePrompt(e,t);let p="";c.length>0&&(p+="\n**\ud83d\udea8\ud83d\udea8\ud83d\udea8 INJURY RECOVERY EQUIPMENT RESTRICTIONS (CRITICAL - READ THIS):**\n",p+="- **APPROVED EQUIPMENT (USE ONLY THESE):** ".concat(c.join(", "),"\n"),u.length>0&&(p+="- **EQUIPMENT TO AVOID (DO NOT SCHEDULE):** ".concat(u.join(", "),"\n"),p+="- **CRITICAL:** Do NOT schedule any workouts using ".concat(u.join(" or "),". These could aggravate the injury.\n"),s&&s.avoidanceReasoning&&(p+="- **Reason:** ".concat(s.avoidanceReasoning,"\n"))),p+="- **ROTATION:** Rotate through the approved equipment list (".concat(c.join(", "),") for variety.\n"),p+="- **DO NOT** schedule workouts on equipment that is NOT in the approved list.\n\n");const m=d.indexOf("**PHASE PLAN");if(m>0&&p){return{prompt:d.slice(0,m)+p+d.slice(m),planMath:h}}return{prompt:d+p,planMath:h}}buildRegularRunnerPlanStructurePrompt(e,t){var n,r;const i=e.startDate?this.parseDate(e.startDate):new Date,o=(new Date,["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]),a=i.getDay(),s=o[a],l=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][a],c=0===a?1:7-a+1,u="metric"===(e.units||"imperial")?"kilometers":"miles",d=e.restDays||[],h=this.parseDate(e.raceDate),p=Math.ceil((h.getTime()-i.getTime())/6048e5),m=this.getPhasePlan(p),f="Half"===e.raceDistance?"Half Marathon":e.raceDistance;let g=null;try{g=xt.generatePlanMath({currentWeeklyMileage:parseInt(e.currentWeeklyMileage),currentLongRun:parseInt(e.currentLongRun),totalWeeks:p,raceDistance:f,experienceLevel:e.experienceLevel}),Oe.A.log("\u2705 Plan math calculated:",{peakMileage:g.targets.peakWeeklyMileage,longRunMax:g.targets.longRunMax,phases:g.phases})}catch(J){Oe.A.warn("\u26a0\ufe0f Plan math calculation failed, AI will calculate mileages:",J.message)}const y=i.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),v=new Date(i);0===a||v.setDate(i.getDate()+(7-a));const w=v.toLocaleDateString("en-US",{month:"short",day:"numeric"});let b=[],k=null;e.standUpBikeType&&"none"!==e.standUpBikeType&&e.preferredBikeDays&&e.preferredBikeDays.length>0&&(k="cyclete"===e.standUpBikeType?"Cyclete":"ElliptiGO",b=e.preferredBikeDays);let D="**WEEK-BY-WEEK PLAN STRUCTURE REQUEST**\n\n";D+="Based on the coaching analysis above, generate ONLY the week-by-week training schedule.\n",D+="**CRITICAL: Use the race strategy and pacing plan from the coaching analysis above. The race strategy in Week ".concat(p," must match the strategy outlined in the coaching analysis.**\n\n");const x="Half"===e.raceDistance?"Half Marathon (13.1 miles)":"Marathon"===e.raceDistance?"Marathon (26.2 miles)":"5K"===e.raceDistance?"5K (3.1 miles)":"10K"===e.raceDistance?"10K (6.2 miles)":e.raceDistance;D+="**CRITICAL RACE CONTEXT:**\n",D+="- Race Distance: ".concat(x,"\n"),D+="- Goal Time: ".concat(e.raceTime,"\n"),D+="- Race Date: ".concat(e.raceDate,"\n");const E=i.toLocaleDateString("en-US",{month:"short",day:"numeric"});D+="- **\ud83d\udea8 CRITICAL - START DATE: ".concat(y," (").concat(s,")**\n"),D+="- **\ud83d\udea8 CRITICAL - WEEK 1 STARTS: ".concat(y," (").concat(s,"), NOT today, NOT any other date**\n"),D+="- **Week 1 date range: ".concat(y," through ").concat(w," (").concat(c," days)**\n"),D+=0===a?"- **WEEK 1 DATE RANGE: ".concat(E," only (1 day)**\n"):"- **WEEK 1 DATE RANGE: ".concat(E," - ").concat(w,"**\n"),D+="- **TOTAL WEEKS: Generate EXACTLY ".concat(p," weeks (Week 1 through Week ").concat(p,")**\n"),D+="**DO NOT confuse this with a different race distance. The race is ".concat(x,", NOT a marathon unless explicitly stated above.**\n"),D+="**DO NOT generate more than ".concat(p," weeks. The plan must be exactly ").concat(p," weeks long, ending on the race date.**\n"),D+="**CRITICAL: Week 1 starts on ".concat(y," (").concat(s,"), NOT today or any other date. Use the actual date range shown above.**\n\n"),D+="**\ud83d\udea8\ud83d\udea8\ud83d\udea8 USER SCHEDULE REQUIREMENTS (MANDATORY - DO NOT VIOLATE - READ THIS FIRST):**\n";const S=(null===(n=e.qualityDays)||void 0===n?void 0:n.filter(e=>b.includes(e)))||[],A=(null===(r=e.qualityDays)||void 0===r?void 0:r.filter(e=>!b.includes(e)))||[];if(console.log("\ud83d\udea8 HARD/BIKE DAY DEBUG:",{"profile.qualityDays":e.qualityDays,"profile.preferredBikeDays":e.preferredBikeDays,"bikeDays (calculated)":b,bikeType:k,hardDaysThatAreBikeDays:S,hardDaysThatAreNotBikeDays:A}),e.qualityDays&&e.qualityDays.length>0&&(S.length>0&&(D+="**\ud83d\udea8\ud83d\udea8\ud83d\udea8 CRITICAL - HARD BIKE DAYS (READ THIS - IT'S BEING IGNORED):**\n",D+="- **".concat(S.join(" and ")," are BOTH hard days AND ").concat(k," days**\n"),D+="- **THIS MEANS: ".concat(S.join(" and ")," MUST ALWAYS have HARD ").concat(k," workouts in EVERY SINGLE WEEK (Weeks 1-").concat(p,")**\n"),D+="- **DO NOT put running workouts (tempo, intervals, hills) on ".concat(S.join(" or ")," - these are ").concat(k," days**\n"),D+="- **DO NOT put easy bike rides on ".concat(S.join(" or ")," - these are HARD workout days**\n"),S.forEach(e=>{D+="\n**FOR ".concat(e.toUpperCase()," IN EVERY WEEK:**\n"),D+="  - ".concat(e,' MUST be: "Ride X RunEQ miles - [WORKOUT: TEMPO_BIKE|INTERVAL_BIKE|POWER_RESISTANCE - Workout Name] on your ').concat(k,'"\n'),D+="  - SELECT from these HARD bike workout categories:\n",D+='    * TEMPO_BIKE: "Sustained Threshold Effort", "Tempo Intervals", "Progressive Tempo Build", "Cruise Intervals", "Tempo Sandwich", "Fast Finish Tempo", "Threshold Pyramid"\n',D+='    * INTERVAL_BIKE: "Classic 5-Minute Repeats", "Short Power Repeats", "VO2 Max Intervals", "Aerobic Power Intervals", "Hill Power Repeats"\n',D+='    * POWER_RESISTANCE: "Short Power Repeats", "Hill Power Repeats", "Resistance Intervals", "Power Surges"\n',D+='  - Format: "Ride 5 RunEQ miles - [WORKOUT: TEMPO_BIKE - Sustained Threshold Effort] on your '.concat(k,'"\n'),D+='  - Examples: "Ride 5 RunEQ miles - [WORKOUT: TEMPO_BIKE - Tempo Sandwich] on your '.concat(k,'"\n'),D+='  - Examples: "Ride 6 RunEQ miles - [WORKOUT: INTERVAL_BIKE - Classic 5-Minute Repeats] on your '.concat(k,'"\n'),D+="  - Rotate through categories to ensure variety (don't use the same category every week)\n",D+="  - ".concat(e," MUST NEVER be: running workout, easy bike ride, rest day\n")}),D+="\n**REPEAT: ".concat(S.join(" and ")," = HARD ").concat(k," workouts in EVERY week, starting from Week 1, not Week 11.**\n\n")),A.length>0&&(D+="- **HARD RUNNING DAYS: ".concat(A.join(" and ")," MUST ALWAYS have hard RUNNING workouts (tempo, intervals, or hills) in EVERY week**\n"),A.forEach(e=>{D+="  - ".concat(e," MUST be a hard RUNNING workout (tempo, intervals, or hills) - NEVER easy run, NEVER rest, NEVER bike\n")})),D+="  - DO NOT schedule hard workouts on other days\n",D+="  - DO NOT make these days easy runs, easy bike rides, or rest days - they MUST be quality sessions\n",D+='  - If you see "Easy" on '.concat(e.qualityDays.join(" or "),", you have made an error - fix it immediately\n")),d.length>0&&(D+="- **REST DAYS: ".concat(d.join(", "),' = "Rest" ONLY (no workouts, no cross-training) in EVERY week**\n'),D+="  - DO NOT schedule any workouts on ".concat(d.join(" or "),"\n")),b.length>0&&k){const t=b.filter(t=>{var n;return!(null!==(n=e.qualityDays)&&void 0!==n&&n.includes(t))});t.length>0&&(D+="- **EASY CROSS-TRAINING DAYS: ".concat(t.join(" and ")," should be EASY ").concat(k," rides (aerobic, recovery) - NOT runs, NOT hard workouts**\n"))}if(D+="\n",D+="**PHASE PLAN (use these exact labels in every week header):**\n",m.forEach(e=>{const t=e.startWeek===e.endWeek?"Week ".concat(e.startWeek):"Weeks ".concat(e.startWeek,"-").concat(e.endWeek);D+="- ".concat(t,": ").concat(e.phase," Phase\n")}),D+='Always reference the correct phase for each week. Example: "### Week 8 (Jan 12 - Jan 18) \u2022 Build Phase \u2022 32 miles".\n\n',g&&g.weeks){D+="**\ud83d\udea8\ud83d\udea8\ud83d\udea8 EXACT WEEKLY TARGETS (USE THESE NUMBERS - DO NOT CALCULATE YOUR OWN):**\n",D+="The following mileages have been calculated using physiologically-sound formulas. USE THESE EXACT NUMBERS:\n\n";const e=c<7;g.weeks.forEach((t,n)=>{const r=t.weekNumber;let i=t.weeklyMileage,o=t.longRun;if(1===r&&e){const e=c/7;i=Math.round(i*e)}D+="- **Week ".concat(r,"** (").concat(t.phase,"): ").concat(i," miles total, Long Run: ").concat(o," miles\n")}),D+="\n**CRITICAL:** These are the EXACT mileages to use. Do NOT deviate. The workouts you assign must add up to these weekly totals.\n",D+="**Long run is the LONGEST workout of each week - tempo/intervals must be SHORTER than the long run.**\n\n"}if(b.length>0&&k){D+="**\ud83d\udea8\ud83d\udea8\ud83d\udea8 CRITICAL - WEEKLY MILEAGE CALCULATION (MANDATORY - READ THIS FIRST):**\n",D+="**THE SMOKING GUN PROBLEM:**\n";const t=parseInt(e.currentWeeklyMileage)+1;D+='- You are writing headers like "Week 2: '.concat(t,' miles" but then generating workouts that add up to ').concat(t+7," miles.\n"),D+="- This is WRONG. The header total MUST match the sum of all workouts.\n",D+='- If you write "'.concat(t,' miles" in the header, the workouts MUST add up to exactly ').concat(t," miles (or very close).\n"),D+="\n**STEP-BY-STEP PROCESS YOU MUST FOLLOW FOR EVERY WEEK (NO EXCEPTIONS):**\n",D+="1. FIRST: Plan all workouts for the week (running + RunEQ) with specific distances\n",D+="2. SECOND: Add up ALL distances: running miles + RunEQ miles = ACTUAL TOTAL\n",D+="3. THIRD: Check if ACTUAL TOTAL matches the target for that week\n",D+="4. FOURTH: If ACTUAL TOTAL is too high, REDUCE workout distances until ACTUAL TOTAL = target\n",D+="5. FIFTH: ONLY AFTER adjusting workouts, write the week header with the FINAL TOTAL\n",D+="6. SIXTH: VERIFY: Header total = Sum of all workout distances (within 1 mile)\n",D+="\n**CRITICAL RULES:**\n",D+='- The mileage number in each week header (e.g., "\u2022 '.concat(t,' miles") is the TOTAL weekly mileage.\n'),D+="- This TOTAL includes BOTH running miles AND RunEQ miles combined.\n",D+="- RunEQ miles REPLACE runs - they ARE part of the weekly total, NOT additional.\n";const n=c<7,r=Math.round(c/7*parseInt(e.currentWeeklyMileage)),i=Math.min(parseInt(e.currentLongRun)||6,parseInt(e.currentWeeklyMileage)||16),o=n?Math.max(r,i):parseInt(e.currentWeeklyMileage);n?(D+="- Week 1 target: EXACTLY ".concat(o," miles TOTAL (Week 1 is PARTIAL - only ").concat(c," days from ").concat(s," through Sunday)\n"),D+="- Week 2 target: EXACTLY ".concat(parseInt(e.currentWeeklyMileage)+1,"-").concat(parseInt(e.currentWeeklyMileage)+2," miles TOTAL (Week 2 is the FIRST FULL WEEK - 7 days)\n")):D+="- Week 1 target: EXACTLY ".concat(e.currentWeeklyMileage," miles TOTAL\n"),D+="- Week 2 target: EXACTLY ".concat(t,"-").concat(parseInt(e.currentWeeklyMileage)+2," miles TOTAL (only +1-2 from Week 1)\n"),D+="\n**TEMPO RUN DISTANCE RULES (CRITICAL):**\n",D+="- Weeks 1-4: Tempo runs MUST be 4-5 miles MAXIMUM\n",D+="- Tempo runs MUST ALWAYS be SHORTER than the long run for that week\n";const a=parseInt(e.currentLongRun)+1,l=Math.min(4,a-1);D+="- Example: If long run is ".concat(a," miles, tempo must be ").concat(l,"-").concat(Math.min(5,a-1)," miles (NOT ").concat(a-1," or ").concat(a,")\n");const u=Math.min(4,parseInt(e.currentLongRun)-1);D+="- Example: If long run is ".concat(e.currentLongRun," miles, tempo must be ").concat(u," miles (NOT ").concat(parseInt(e.currentLongRun)-1," or ").concat(e.currentLongRun,")\n");const d=parseInt(e.currentWeeklyMileage)+2,h=parseInt(e.currentLongRun)+1,p=Math.min(4,h-1),m=d+7,f=d+4,g=d,y=t;D+="\n**EXAMPLE FOR WEEK 2 (target: ".concat(t,"-").concat(d," miles TOTAL):**\n"),D+='  * WRONG APPROACH: Write "Week 2: '.concat(d,' miles" then generate: 4 RunEQ + 6 tempo + 4 RunEQ + 5 hills + ').concat(h," long = ").concat(m," miles\n"),D+="    This is INCONSISTENT - header says ".concat(d," but workouts = ").concat(m,". DO NOT DO THIS.\n"),D+="  * CORRECT APPROACH:\n",D+="    Step 1: Plan workouts: 4 RunEQ + ".concat(p," tempo + 4 RunEQ + 3 hills + ").concat(h," long = ").concat(f," miles\n"),D+="    Step 2: Target is ".concat(t,"-").concat(d,", so ").concat(f," is too high\n"),D+="    Step 3: Reduce workouts: 4 RunEQ + ".concat(p," tempo + 3 RunEQ + 3 hills + ").concat(Math.max(3,h-3)," long = ").concat(g," miles\n"),D+='    Step 4: NOW write header: "Week 2: '.concat(g,' miles"\n'),D+="    Step 5: Verify: 4 + ".concat(p," + 3 + 3 + ").concat(Math.max(3,h-3)," = ").concat(g," \u2713\n"),D+="  * ALTERNATIVE CORRECT: 4 RunEQ + ".concat(p," tempo + 3 RunEQ + 3 hills + ").concat(Math.max(3,h-4)," long = ").concat(y,' miles \u2192 "Week 2: ').concat(y,' miles"\n'),D+="\n**MANDATORY CHECKLIST FOR EVERY WEEK:**\n",D+="- [ ] I planned all workouts with specific distances\n",D+="- [ ] I added up all distances (running + RunEQ)\n",D+="- [ ] I adjusted distances until sum matches target\n",D+="- [ ] I wrote the header with the FINAL total (after adjustments)\n",D+="- [ ] I verified: header total = sum of workouts (within 1 mile)\n";const v=(e.availableDays||[]).length,w=Math.round(parseInt(e.currentWeeklyMileage)/v*10)/10;D+="\n**CRITICAL - WORKOUT DAY COUNT AFFECTS INDIVIDUAL WORKOUT DISTANCES:**\n",D+="- This runner has ".concat(v," workout days per week\n"),D+="- With ".concat(e.currentWeeklyMileage," weekly miles / ").concat(v," days = ~").concat(w," miles average per workout\n"),D+="- MORE workout days = SHORTER individual workouts to stay within weekly target\n",D+="- Example: 16 miles/week with 4 days = 4mi avg. 16 miles/week with 6 days = 2.7mi avg.\n",D+="- DO NOT give everyone 4-6 mile workouts regardless of their workout day count!\n",D+=n?"\n**MANDATORY:** Week 1 = ~".concat(o," miles TOTAL (partial week), Week 2 = ").concat(t,"-").concat(parseInt(e.currentWeeklyMileage)+2," miles TOTAL (first full week)\n\n"):"\n**MANDATORY:** Week 1 = ".concat(e.currentWeeklyMileage," miles TOTAL, Week 2 = ").concat(t,"-").concat(parseInt(e.currentWeeklyMileage)+2," miles TOTAL\n\n")}if(D+="**CRITICAL FORMAT:**\n",D+=0===a?"- Week 1: ONLY ".concat(l," (1 day - starts ").concat(E,", ").concat(s,")\n"):"- Week 1: Only ".concat(l,"-Sun (").concat(c," days, starts ").concat(E,", ").concat(s,")\n"),D+="- Week 2+: Full Mon-Sun (7 days)\n",D+="- Use [WORKOUT_ID: type_category_index] for quality workouts (tempo, interval, hill, longrun)\n",D+="- Include distance in ".concat(u," for EVERY workout\n"),D+='- Format for quality workouts: "- Day: [WORKOUT_ID: type_category_index] Workout Name X miles"\n',D+='- Example: "- Wed: [WORKOUT_ID: tempo_THRESHOLD_0] Tempo Run 5 miles"\n',D+='- Example: "- Sun: [WORKOUT_ID: longrun_CONVERSATIONAL_0] Long Run 8 miles"\n\n',D+="**RESPONSE RULES (follow 100%):**\n",D+='1. Begin with "# Week-by-Week Training Schedule" \u2013 absolutely no introduction or recap before this header.\n',D+="2. Write the schedule ONCE. Do not repeat weeks, do not restate the plan after the schedule, and do not add narrative sections besides the final Notes block.\n",D+='3. Each week header MUST be "### Week {number} (MMM DD - MMM DD) \u2022 {Phase} Phase \u2022 XX miles". Use the phase plan above for the {Phase} label.\n',D+="4. **CRITICAL: For full weeks (Week 2+), you MUST list ALL 7 days: Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday.**\n",D+="   - Do NOT skip Saturday or Sunday - every full week has 7 days\n",D+="   - Do NOT stop at Friday - always continue through Sunday\n",D+="   - List days Monday \u2192 Sunday with one bullet per day. No paragraphs, no combined days.\n",D+="   - Week 1 may be partial (only days from start date through Sunday), but Week 2+ are ALWAYS full weeks with all 7 days\n",D+="5. After Week ".concat(p,', add "## Notes" with 2-3 concise bullets (checkpoint reminders, fueling, etc.). Do NOT introduce new workouts there.\n'),D+='6. Never say "see above", and never paste the plan twice.\n',D+='7. **DO NOT add checkpoints, notes, or other sections between weeks - only add "## Notes" after Week '.concat(p,"**\n\n"),b.length>0&&k){D+="**CROSS-TRAINING FORMAT:**\n",S.length>0&&(D+="- **HARD BIKE DAYS (".concat(S.join(", "),"):**\n"),D+='  - Format: "Tue: Ride X RunEQ miles - [WORKOUT: CATEGORY - Workout Name] on your '.concat(k,'"\n'),D+="  - SELECT from these HARD bike workout categories:\n",D+='    * TEMPO_BIKE: "Sustained Threshold Effort", "Tempo Intervals", "Progressive Tempo Build", "Cruise Intervals", "Tempo Sandwich", "Fast Finish Tempo", "Threshold Pyramid"\n',D+='    * INTERVAL_BIKE: "Classic 5-Minute Repeats", "Short Power Repeats", "VO2 Max Intervals", "Aerobic Power Intervals", "Hill Power Repeats"\n',D+='    * POWER_RESISTANCE: "Short Power Repeats", "Hill Power Repeats", "Resistance Intervals", "Power Surges"\n',D+='  - Examples: "Ride 5 RunEQ miles - [WORKOUT: TEMPO_BIKE - Tempo Sandwich] on your '.concat(k,'"\n'),D+='  - Examples: "Ride 6 RunEQ miles - [WORKOUT: INTERVAL_BIKE - Classic 5-Minute Repeats] on your '.concat(k,'"\n'),D+="  - Rotate through categories to ensure variety\n",D+="  - These are HARD workouts - NOT easy aerobic rides\n");const t=b.filter(t=>{var n;return!(null!==(n=e.qualityDays)&&void 0!==n&&n.includes(t))});t.length>0&&(D+="- **EASY BIKE DAYS (".concat(t.join(", "),"):**\n"),D+='  - Format: "Thu: Ride X RunEQ miles - [WORKOUT: AEROBIC_BASE|RECOVERY_SPECIFIC - Workout Name] on your '.concat(k,'"\n'),D+="  - SELECT from these EASY bike workout categories:\n",D+='    * AEROBIC_BASE: "Conversational Pace Cruise", "Steady State Ride", "Aerobic Endurance Ride", "Zone 2 Base Building"\n',D+='    * RECOVERY_SPECIFIC: "Recovery Spin", "Active Recovery Ride", "Easy Flush Ride", "Recovery Pace Cruise"\n',D+='  - Examples: "Ride 4 RunEQ miles - [WORKOUT: AEROBIC_BASE - Conversational Pace Cruise] on your '.concat(k,'"\n'),D+='  - Examples: "Ride 3 RunEQ miles - [WORKOUT: RECOVERY_SPECIFIC - Recovery Spin] on your '.concat(k,'"\n'),D+="  - Rotate between AEROBIC_BASE and RECOVERY_SPECIFIC for variety\n"),D+='- **CRITICAL: Keep as "RunEQ miles" - do NOT convert to actual bike miles. The system handles conversion.**\n',D+="- **CRITICAL: Hard bike days get HARD bike workouts (tempo/interval intensity), easy bike days get EASY bike rides (aerobic/recovery intensity)**\n\n"}if("crossTrainingOnly"===e.runningStatus){var C,T,R,F,I,P;const t=[];if(e.standUpBikeType){const n="cyclete"===e.standUpBikeType?"Cyclete":"ElliptiGO";t.push(n)}e.crossTrainingEquipment&&(e.crossTrainingEquipment.pool&&t.push("pool/aqua running"),e.crossTrainingEquipment.rowing&&t.push("rowing machine"),e.crossTrainingEquipment.elliptical&&t.push("elliptical"),e.crossTrainingEquipment.stationaryBike&&t.push("stationary bike"),e.crossTrainingEquipment.swimming&&t.push("swimming"),e.crossTrainingEquipment.walking&&t.push("walking"));const n=e.primaryCrossTrainingEquipment?"cyclete"===e.primaryCrossTrainingEquipment?"Cyclete":"elliptigo"===e.primaryCrossTrainingEquipment?"ElliptiGO":"pool"===e.primaryCrossTrainingEquipment?"pool/aqua running":"rowing"===e.primaryCrossTrainingEquipment?"rowing machine":"elliptical"===e.primaryCrossTrainingEquipment?"elliptical":"stationaryBike"===e.primaryCrossTrainingEquipment?"stationary bike":"swimming"===e.primaryCrossTrainingEquipment?"swimming":"walking"===e.primaryCrossTrainingEquipment?"walking":e.primaryCrossTrainingEquipment:t.length>0?t[0]:"cross-training";if(D+="\n**\ud83d\udea8 CRITICAL - INJURY RECOVERY / CROSS-TRAINING ONLY PLAN:**\n",D+="- **RUNNING STATUS: Cannot run right now - cross-training only**\n",D+="- **AVAILABLE EQUIPMENT: ".concat(t.length>0?t.join(", "):"None specified","\n"),D+="- **PRIMARY EQUIPMENT: ".concat(n,"**\n"),D+='- **\ud83d\udea8 ABSOLUTE REQUIREMENT: DO NOT assign ANY running workouts. ZERO running. NO "Easy run", NO "Tempo run", NO "Long run", NO running of any kind.**\n',D+="- **\ud83d\udea8 CRITICAL - USE ALL SELECTED EQUIPMENT:** You MUST rotate through ALL available equipment types throughout the plan. Do NOT only use ".concat(n,". Distribute workouts across:\n"),t.length>0&&t.forEach((e,t)=>{D+="  ".concat(t+1,". ").concat(e,"\n")}),D+="  **Example distribution:** If user has 4 equipment types, use each one 1-2 times per week. Vary the equipment to prevent overuse and provide variety.\n",D+="  **Injury consideration:** If injury information was provided in the coaching analysis, prioritize equipment that is safest for those specific injuries.\n",D+="- **ONLY assign workouts using the selected equipment (use ALL of them):**\n",e.standUpBikeType){const t="cyclete"===e.standUpBikeType?"Cyclete":"ElliptiGO";D+="  * ".concat(t,': "Ride X RunEQ miles on your ').concat(t,'" (tempo rides, interval rides, long rides)\n')}null!==(C=e.crossTrainingEquipment)&&void 0!==C&&C.pool&&(D+='  * Pool/Aqua Running: "Aqua run X minutes" or "Pool running X minutes" (tempo, intervals, long sessions)\n'),null!==(T=e.crossTrainingEquipment)&&void 0!==T&&T.rowing&&(D+='  * Rowing: "Row X minutes" or "Rowing machine X minutes" (tempo, intervals, long sessions)\n'),null!==(R=e.crossTrainingEquipment)&&void 0!==R&&R.elliptical&&(D+='  * Elliptical: "Elliptical X minutes" (tempo, intervals, long sessions)\n'),null!==(F=e.crossTrainingEquipment)&&void 0!==F&&F.stationaryBike&&(D+='  * Stationary Bike: "Bike X minutes" (tempo, intervals, long sessions)\n'),null!==(I=e.crossTrainingEquipment)&&void 0!==I&&I.swimming&&(D+='  * Swimming: "Swim X minutes" or "Lap swimming X minutes" (tempo, intervals, long sessions)\n'),null!==(P=e.crossTrainingEquipment)&&void 0!==P&&P.walking&&(D+='  * Walking: "Walk X minutes" or "Walking workout X minutes" (easy, tempo, long walks)\n'),D+="- **Workout structure:** Match training phases (base \u2192 build \u2192 peak \u2192 taper) but use cross-training equipment\n",D+='- **Long sessions:** Use "long [equipment] session" instead of "long run" (e.g., "Long Cyclete ride 60 minutes")\n',D+='- **Quality workouts:** Use tempo/intervals on selected equipment (e.g., "Tempo ride on Cyclete 30 minutes")\n',D+="- **Rest days:** Still respect rest days (".concat(d.length>0?d.join(", "):"as specified",")\n"),D+="- **If no equipment selected:** Use walking workouts only (low-impact, no equipment needed)\n"}else"transitioning"===e.runningStatus&&(D+="\n**\ud83d\udd04 TRANSITIONING BACK TO RUNNING:**\n",D+="- Weeks 1-2: 100% cross-training (no running)\n",D+="- Weeks 3-4: Gradually introduce easy runs (25% running, 75% cross-training)\n",D+="- Week 5+: Normal mix of running and cross-training\n");D+="\n",D+="**EXAMPLE FORMAT (structure only \u2013 replace with real data):**\n";const M=i.toLocaleDateString("en-US",{month:"short",day:"numeric"}),_=new Date(i),N=0===a?1:7-a+1;_.setDate(i.getDate()+N);const O=new Date(_);O.setDate(_.getDate()+6);const j=_.toLocaleDateString("en-US",{month:"short",day:"numeric"}),L=O.toLocaleDateString("en-US",{month:"short",day:"numeric"}),B=k||("elliptigo"===e.standUpBikeType?"ElliptiGO":"stand-up bike");let W,U,q;D+="# Week-by-Week Training Schedule\n";const H=c<7;if(H){const t=Math.round(c/7*parseInt(e.currentWeeklyMileage)),n=Math.min(parseInt(e.currentLongRun)||6,parseInt(e.currentWeeklyMileage)||16);if(W=Math.max(t,n),1===c)U=W,q=U,D+="### Week 1 (".concat(M,") \u2022 Base Phase \u2022 ").concat(W," miles\n"),D+="- Sun: Classic Easy Long Run ".concat(U," miles (conversational, match current long run)\n"),D+="**CALCULATION: Week 1 = ".concat(U," long run = ").concat(q," miles TOTAL (Week 1 is only Sunday when starting on Sunday)**\n");else{const t=Math.max(2,Math.floor(.2*W)),n=Math.max(3,Math.floor(.25*W)),r=Math.max(2,Math.floor(.15*W));if(U=W-t-n-r,U=Math.max(4,Math.min(parseInt(e.currentLongRun)||6,U)),q=t+n+r+U,D+="### Week 1 (".concat(M," - ").concat(w,") \u2022 Base Phase \u2022 ").concat(W," miles\n"),a<=2){const e=o[a];S.includes(e)?D+="- ".concat(l,": Ride ").concat(t," RunEQ miles - [WORKOUT: TEMPO_BIKE - Tempo Sandwich] on your ").concat(B," (HARD workout - threshold effort)\n"):b.includes(e)?D+="- ".concat(l,": Ride ").concat(t," RunEQ miles - [WORKOUT: AEROBIC_BASE - Conversational Pace Cruise] on your ").concat(B," (easy aerobic)\n"):D+="- ".concat(l,": Easy Run ").concat(t," miles (aerobic base)\n"),a<=1&&(D+="- Wed: Classic Tempo Run ".concat(n," miles (tempo effort, controlled pace) - NOTE: ").concat(n," miles is SHORTER than long run (").concat(U," miles)\n"))}a<=4&&(S.includes("Thursday")?D+="- Thu: Ride ".concat(r," RunEQ miles - [WORKOUT: INTERVAL_BIKE - Classic 5-Minute Repeats] on your ").concat(B," (HARD workout - threshold effort)\n"):b.includes("Thursday")?D+="- Thu: Ride ".concat(r," RunEQ miles - [WORKOUT: RECOVERY_SPECIFIC - Recovery Spin] on your ").concat(B," (recovery spin)\n"):D+="- Thu: Easy Run ".concat(r," miles (recovery)\n")),D+="- Sun: Classic Easy Long Run ".concat(U," miles (conversational, match current long run)\n"),D+="**CALCULATION: Week 1 = ".concat(t," RunEQ + ").concat(n," tempo + ").concat(r," RunEQ + ").concat(U," long = ").concat(q," miles TOTAL (Week 1 is PARTIAL - only ").concat(c," days from ").concat(s," through Sunday)**\n")}D+="**CRITICAL: Week 1 is PARTIAL (".concat(c," days). Include ALL days from ").concat(s," through Sunday, including rest days. Week 2 will be the first full week (7 days).**\n")}else{W=parseInt(e.currentWeeklyMileage);const t=3,n=3,r=4,i=3,o=W-t-r-n-i;U=Math.max(4,Math.min(parseInt(e.currentLongRun)||6,o)),q=t+r+n+i+U,D+="### Week 1 (".concat(M," - ").concat(w,") \u2022 Base Phase \u2022 ").concat(W," miles\n"),D+="- ".concat(l,": Ride ").concat(t," RunEQ miles - [WORKOUT: AEROBIC_BASE - Conversational Pace Cruise] on your ").concat(B," (easy aerobic)\n"),D+="- Wed: Classic Tempo Run ".concat(r," miles (tempo effort, controlled pace) - NOTE: ").concat(r," miles is SHORTER than long run (").concat(U," miles)\n"),D+="- Thu: Ride ".concat(n," RunEQ miles - [WORKOUT: RECOVERY_SPECIFIC - Recovery Spin] on your ").concat(B," (recovery spin)\n"),D+="- Fri: Hill Strides ".concat(i," miles (building strength)\n"),D+="- Sun: Classic Easy Long Run ".concat(U," miles (conversational, match current long run)\n"),D+="**CALCULATION: Week 1 = ".concat(t," RunEQ + ").concat(r," tempo + ").concat(n," RunEQ + ").concat(i," hills + ").concat(U," long = ").concat(q," miles TOTAL (matches target ").concat(W,")**\n")}let z,V,K,Y,G,Q,X;H?(z=parseInt(e.currentWeeklyMileage),V=parseInt(e.currentLongRun)||6):(z=parseInt(e.currentWeeklyMileage)+1,V=parseInt(e.currentLongRun)+1),K=Math.min(4,V-1),Y=4,G=3,Q=z-4-K-3-V,X=4+K+3+Q+V,D+="### Week 2 (".concat(j," - ").concat(L,") \u2022 Base Phase \u2022 ").concat(z," miles\n"),D+="- Mon: Rest\n",S.includes("Tuesday")?D+="- Tue: Ride ".concat(4," RunEQ miles - [WORKOUT: TEMPO_BIKE - Tempo Intervals] on your ").concat(B," (HARD workout - threshold effort)\n"):b.includes("Tuesday")?D+="- Tue: Ride ".concat(4," RunEQ miles - [WORKOUT: AEROBIC_BASE - Steady State Ride] on your ").concat(B," (easy flush)\n"):D+="- Tue: Easy Run ".concat(4," miles (aerobic base)\n"),A.includes("Wednesday"),D+="- Wed: Classic Tempo Run ".concat(K," miles (tempo effort) - NOTE: ").concat(K," miles is SHORTER than long run (").concat(V," miles)\n"),S.includes("Thursday")?D+="- Thu: Ride ".concat(3," RunEQ miles - [WORKOUT: INTERVAL_BIKE - Classic 5-Minute Repeats] on your ").concat(B," (HARD workout - threshold effort)\n"):b.includes("Thursday")?D+="- Thu: Ride ".concat(3," RunEQ miles - [WORKOUT: AEROBIC_BASE - Steady State Ride] on your ").concat(B," (steady aerobic)\n"):D+="- Thu: Easy Run ".concat(3," miles (recovery)\n"),D+="- Fri: Hill Strides ".concat(Q," miles (building strength)\n"),D+="- Sun: Classic Easy Long Run ".concat(V," miles (gradual progression from Week 1)\n"),D+=H?"**CALCULATION: Week 2 = ".concat(4," RunEQ + ").concat(K," tempo + ").concat(3," RunEQ + ").concat(Q," hills + ").concat(V," long = ").concat(X," miles TOTAL (matches target ").concat(z," - Week 2 is the FIRST FULL WEEK since Week 1 was partial)**\n"):"**CALCULATION: Week 2 = ".concat(4," RunEQ + ").concat(K," tempo + ").concat(3," RunEQ + ").concat(Q," hills + ").concat(V," long = ").concat(X," miles TOTAL (matches target ").concat(z,", only +1 from Week 1)**\n"),D+="**CRITICAL: Follow this calculation process for EVERY week - add up all workouts, then write the header with the total.**\n",D+="## Notes\n",D+="- Follow this structure exactly, swap in real dates/mileage/phases, and only write ONE complete schedule followed by concise notes.\n\n";const Z=[];for(let $=Math.max(p-2,1);$<=p;$++)Z.push($);return D+="**REQUIREMENTS:**\n",D+="- **CRITICAL: Generate EXACTLY ".concat(p," weeks (Week 1 through Week ").concat(p,")**\n"),S.length>0&&(D+="\n**\ud83d\udea8\ud83d\udea8\ud83d\udea8 FINAL REMINDER - HARD BIKE DAYS (DO NOT IGNORE THIS):**\n",D+="- **".concat(S.join(" and ")," are HARD ").concat(k," days in EVERY WEEK (1-").concat(p,")**\n"),D+="- **".concat(S.join(" and ")," = HARD ").concat(k," workouts, NOT running workouts**\n"),D+="- **If you put a running workout (tempo, intervals, hills) on ".concat(S.join(" or "),", you have made an error**\n"),D+="- **Examples for ".concat(S.join(" and "),': "Ride X RunEQ miles - Tempo Bike Intervals", "Ride X RunEQ miles - Sustained Threshold Effort", etc.**\n'),D+="- **This applies to Week 1, Week 2, Week 3, and EVERY week through Week ".concat(p,"**\n\n")),"crossTrainingOnly"===e.runningStatus?(D+="- **LONG SESSION PROGRESSION (STRICT - using selected equipment):**\n",D+="  * Week 1: Start with 30-45 minutes (easy effort)\n",D+="  * Week 2+: Increase by 5-10 minutes per week MAXIMUM (no jumps of 15+ minutes)\n",D+="  * Example: Week 1 = 30-45 min, Week 2 = 40-55 min, Week 3 = 50-65 min\n",D+="  * Recovery weeks: Reduce by 10-15 minutes (not more than 20 minutes)\n",D+="  * Peak long sessions: 60-90 minutes (depending on equipment and fitness)\n",D+="- **WEEKLY TIME PROGRESSION (STRICT):**\n",D+="  * Week 1: Start with 2-3 hours total per week\n",D+="  * Week 2+: Increase by 10-15% OR 15-30 minutes per week MAXIMUM\n",D+="  * Example: Week 1 = 2-3 hours, Week 2 = 2.5-3.5 hours, Week 3 = 3-4 hours\n",D+="  * Recovery weeks: Reduce by 20-30% (not more than 50%)\n",D+="- Recovery weeks every 3-4 weeks\n",D+="- **TAPER WEEKS (Weeks ".concat(Z.join(", "),"):**\n"),D+="  * Reduce volume by 30-50% compared to peak weeks\n",D+="  * Maintain intensity but reduce frequency (1 quality workout per week max)\n",D+="  * Long sessions should be 50-60% of peak long session duration\n",D+="  * Week ".concat(p," (race week): Minimal volume, easy cross-training only, no hard workouts\n")):(D+="- **LONG RUN PROGRESSION (STRICT):**\n",D+="  * Week 1: AT OR BELOW current long run (".concat(e.currentLongRun," ").concat(u,") - do NOT exceed\n"),D+="  * Week 2+: Increase by 1-2 ".concat(u," per week MAXIMUM (no jumps of 3+ ").concat(u,")\n"),D+="  * Example: Week 1 = ".concat(e.currentLongRun," ").concat(u,", Week 2 = ").concat(parseInt(e.currentLongRun)+1,"-").concat(parseInt(e.currentLongRun)+2," ").concat(u,", Week 3 = ").concat(parseInt(e.currentLongRun)+2,"-").concat(parseInt(e.currentLongRun)+4," ").concat(u,"\n"),D+="  * Recovery weeks: Reduce long run by 1-2 ".concat(u," (not more than 3 ").concat(u,")\n"),D+="- **WEEKLY MILEAGE PROGRESSION (STRICT - TOTAL INCLUDES RunEQ):**\n",D+="  * Week 1: MUST BE EXACTLY ".concat(e.currentWeeklyMileage," ").concat(u," TOTAL (running + RunEQ combined - user's current weekly mileage)\n"),D+="  * Week 2: MUST BE ".concat(parseInt(e.currentWeeklyMileage)+1,"-").concat(parseInt(e.currentWeeklyMileage)+2," ").concat(u," TOTAL (only +1-2 from Week 1, including RunEQ)\n"),D+="  * Week 3+: Increase by 10% OR 2-3 ".concat(u," per week MAXIMUM (no jumps of 5+ ").concat(u,")\n"),D+="  * **CRITICAL:** These totals include RunEQ miles. If Week 2 target is 17-18 miles, ALL workouts (running + RunEQ) must add up to 17-18, NOT 17-18 running + RunEQ on top.\n",D+="  * Example: Week 1 = ".concat(e.currentWeeklyMileage," ").concat(u," TOTAL, Week 2 = ").concat(parseInt(e.currentWeeklyMileage)+1,"-").concat(parseInt(e.currentWeeklyMileage)+2," ").concat(u," TOTAL, Week 3 = ").concat(parseInt(e.currentWeeklyMileage)+2,"-").concat(parseInt(e.currentWeeklyMileage)+4," ").concat(u," TOTAL\n"),D+="  * Recovery weeks: Reduce by 20-30% (not more than 50%)\n",D+="- **TEMPO RUN DISTANCE RULES (MANDATORY):**\n",D+="  * Weeks 1-4: Tempo runs MUST be 4-5 ".concat(u," MAXIMUM\n"),D+="  * Tempo runs MUST ALWAYS be SHORTER than the long run for that week\n",D+="  * Example: Week 2 with 7-mile long run \u2192 tempo must be 4-5 ".concat(u," (NOT 6 or 7)\n"),D+="  * Example: Week 1 with 6-mile long run \u2192 tempo must be 4 ".concat(u," (NOT 5 or 6)\n"),D+="  * Later weeks (5+): Tempo can be 5-7 ".concat(u,", but still shorter than long run\n"),D+="- Recovery weeks every 3-4 weeks\n",D+="- **TAPER WEEKS (Weeks ".concat(Z.join(", "),"):**\n"),D+="  * Reduce volume by 30-50% compared to peak weeks\n",D+="  * Maintain intensity but reduce frequency (1 quality workout per week max)\n",D+="  * Long runs should be 50-60% of peak long run distance\n",D+="  * Week ".concat(p," (race week): Minimal volume, easy runs only, no hard workouts\n")),D+="- Include week header with mileage for each week\n",D+='- Brief "Notes" for each week explaining focus\n',D+="- Week ".concat(p," should end on or just before the race date (").concat(e.raceDate,")\n"),D+="- **CRITICAL: Week ".concat(p," race strategy must match the pacing plan from coaching analysis above**\n\n"),D+="**OUTPUT:** Week-by-week schedule ONLY. No coaching analysis (already provided above).\n",D+="**REMINDER: You must generate exactly ".concat(p," weeks, no more, no less.**\n"),{prompt:D,planMath:g}}async regeneratePlanStructureFromCurrentWeek(e,t,n){var r,i,o,a,s;Oe.A.log("\ud83e\udd16 AI Regenerating plan structure from week",n),Oe.A.log("  New settings:",{workoutsPerWeek:Mt(t),availableDays:t.availableDays,hardSessionDays:t.hardSessionDays,longRunDay:t.longRunDay,preferredBikeDays:t.preferredBikeDays});const l=(null===e||void 0===e?void 0:e.weeks)||(null===e||void 0===e?void 0:e.weeklyPlans);if(!l)throw new Error("Training plan structure is invalid - missing weeks array");const c=l.slice(0,n-1);Oe.A.log("  Preserved",c.length,"completed weeks");const u=l.length,d=u-n+1,h=(null===(r=e.planOverview)||void 0===r?void 0:r.raceDate)||t.raceDate,p="Half"===((null===(i=e.planOverview)||void 0===i?void 0:i.raceDistance)||t.raceDistance)?"Half Marathon":(null===(o=e.planOverview)||void 0===o?void 0:o.raceDistance)||t.raceDistance;let m=null;try{m=xt.generatePlanMath({currentWeeklyMileage:parseInt(t.currentWeeklyMileage),currentLongRun:parseInt(t.currentLongRun),totalWeeks:u,raceDistance:p,experienceLevel:t.experienceLevel}),Oe.A.log("  \u2705 Plan math calculated for regeneration:",{peakMileage:m.targets.peakWeeklyMileage,longRunMax:m.targets.longRunMax})}catch(T){Oe.A.warn("  \u26a0\ufe0f Plan math calculation failed for regeneration:",T.message)}let f="";if(c.length>0){const e=c.slice(-3);f="\n**COMPLETED WEEKS CONTEXT (for reference only - do not regenerate these):**\n",e.forEach(e=>{const t=e.weekNumber||e.week,n=e.totalMileage||0;f+="- Week ".concat(t,": ").concat(n," miles\n")}),f+="\n**IMPORTANT:** You are regenerating weeks ".concat(n,"-").concat(u," only. Weeks 1-").concat(n-1," are already completed and will be preserved.\n\n")}(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});const g=this.parseDate(h),y=6048e5,v=new Date(g.getTime()-u*y),w=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(v.getTime()+(n-1)*y).getDay()],b=t.units;if(!b)throw new Error("Missing required field: units");const k="metric"===b?"kilometers":"miles",D=t.name||t.displayName,x=D?D.split(" ")[0]:null,E=Rt.buildWorkoutLibraryContext();let S="**PLAN REGENERATION REQUEST**\n\n";S+="You are regenerating a training plan starting from Week ".concat(n," of ").concat(u," weeks.\n\n"),S+=f,S+="**UPDATED SETTINGS (use these, not the original settings):**\n";const A=Mt(t);if(S+="- Training Days Per Week: ".concat(A," (total workouts including cross-training)\n"),S+="- Available Training Days: ".concat((t.availableDays||[]).join(", "),"\n"),S+="- Hard Workout Days: ".concat((t.hardSessionDays||[]).join(", "),"\n"),S+="- Long Run Day: ".concat(t.longRunDay,"\n"),t.preferredBikeDays&&t.preferredBikeDays.length>0){const e="cyclete"===t.standUpBikeType?"Cyclete":"ElliptiGO";S+="- ".concat(e," Days: ").concat(t.preferredBikeDays.join(", "),"\n")}if(S+="\n",S+="**ORIGINAL PLAN CONTEXT:**\n",S+="- Race Goal: ".concat((null===(a=e.planOverview)||void 0===a?void 0:a.raceDistance)||t.raceDistance," in ").concat((null===(s=e.planOverview)||void 0===s?void 0:s.goalTime)||t.raceTime,"\n"),S+="- Race Date: ".concat(h,"\n"),S+="- Current Weekly Mileage: ".concat(t.currentWeeklyMileage," ").concat(k,"\n"),S+="- Current Long Run: ".concat(t.currentLongRun," ").concat(k,"\n"),S+="- Experience Level: ".concat(t.experienceLevel,"\n"),S+="\n",e.aiCoachingAnalysis||e.fullPlanText){const t=e.aiCoachingAnalysis||e.fullPlanText;if("string"===typeof t&&t.length>0){let e=t;const n=t.match(/WEEK.*?PLAN[\s\S]*?(?=PHASE|$)/i)||t.match(/Week \d+[^]*?Week \d+/);n&&"string"===typeof n[0]&&(e=n[0]);const r=e.length>2e3?e.substring(0,2e3)+"...":e;S+="**ORIGINAL COACHING ANALYSIS (for reference - match these workout types/distances):**\n",S+="".concat(r,"\n"),S+="\n**IMPORTANT:** The workouts you generate should match the style, distances, and progression shown in the original coaching analysis above. Only adjust for the new schedule settings.\n\n"}}S+="**CRITICAL REQUIREMENTS:**\n",S+="1. Generate ONLY weeks ".concat(n,"-").concat(u," (").concat(d," weeks)\n"),S+="2. Use the UPDATED SETTINGS above (not original settings)\n",S+="3. Maintain progressive periodization from where the plan left off\n",S+="4. Week ".concat(n," starts on ").concat(w,"\n"),S+="5. All distances in ".concat(k,"\n"),S+="6. Use [WORKOUT_ID: ...] format for quality workouts\n",S+="7. Include distance for EVERY workout\n",S+="\n",x&&(S+="**PERSONALIZATION: The runner's name is ".concat(x,".**\n\n")),S+="**OUTPUT FORMAT (MANDATORY):**\n",S+="For each week from ".concat(n," to ").concat(u,", you MUST list ALL 7 DAYS (Monday through Sunday).\n"),S+="DO NOT stop at Friday. You must explicitly write out Saturday and Sunday, even if they are Rest days.\n",S+="For each week, output:\n",S+="### Week ".concat(n," - [mileage] ").concat(k,"\n"),S+="- Mon: [workout]\n",S+="- Tue: [workout]\n",S+="- Wed: [workout]\n",S+="- Thu: [workout]\n",S+="- Fri: [workout]\n",S+="- Sat: [workout] (DO NOT SKIP - even if Rest day)\n",S+="- Sun: [workout] (DO NOT SKIP - even if Rest day)\n",S+="\n",S+="**CRITICAL:** Every week MUST have exactly 7 days listed. Missing Saturday or Sunday is an error.\n",S+="\n";const C="".concat(E,"\n\n---\n\n").concat(S);try{const e=await this.callWithTimeout(this.callAnthropicAPI({model:"claude-sonnet-4-5-20250929",max_tokens:6e3,system:this.coachingSystemPrompt,messages:[{role:"user",content:C}]}),3e5);if(!e.data.success)throw new Error(e.data.error||"Failed to regenerate plan");const r=e.data.content[0].text;Oe.A.log("  \u2705 AI generated plan structure");const i=Ft.parseAIPlanToStructure(r,t,n);if(i.weeks&&Array.isArray(i.weeks)){const e=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];i.weeks.forEach(t=>{t.workouts&&Array.isArray(t.workouts)||(t.workouts=[]);const n=t.workouts.map(e=>e.day);e.forEach(e=>{n.includes(e)||(Oe.A.warn("  \u26a0\ufe0f Week ".concat(t.weekNumber||t.week,": Missing ").concat(e," - auto-filling as Rest day")),t.workouts.push({day:e,type:"rest",name:"Rest Day",description:"Rest day (Auto-generated - AI truncated week)",workout:{name:"Rest",description:"Rest day (Auto-generated)"},distance:0}))}),t.workouts.sort((t,n)=>{const r=e.indexOf(t.day),i=e.indexOf(n.day);return-1===r?1:-1===i?-1:r-i}),t.workouts.length>n.length&&Oe.A.log("  \u2705 Week ".concat(t.weekNumber||t.week,": Auto-filled ").concat(t.workouts.length-n.length," missing day(s)"))})}m&&m.weeks&&i.weeks&&(Oe.A.log("  \ud83d\udd27 ENFORCING DETERMINISTIC MILEAGES for regenerated weeks"),i.weeks.forEach(e=>{const t=m.weeks.find(t=>t.weekNumber===e.weekNumber);if(t){const n=e.totalMileage;e.totalMileage=t.weeklyMileage,e.longRunTarget=t.longRun,e.phase=t.phase,e._planMathTargets={weeklyMileage:t.weeklyMileage,longRun:t.longRun,tempoDistance:t.tempoDistance,intervalDistance:t.intervalDistance,hillDistance:t.hillDistance},n!==e.totalMileage&&Oe.A.log("    Week ".concat(e.weekNumber,": AI said ").concat(n,"mi \u2192 CORRECTED to ").concat(e.totalMileage,"mi"))}}));const o=It.enrichPlanWithWorkouts(i),a=Pt.transformToDashboardFormat(o,t),s=(a.weeks||[]).filter(e=>(e.weekNumber||e.week)>=n);return Oe.A.log("  Generated",s.length,"new weeks (from week",n,"forward)"),{success:!0,newWeeks:s,rawResponse:r,metadata:{regeneratedAt:(new Date).toISOString(),fromWeek:n,model:"claude-sonnet-4-5"}}}catch(R){console.error("AI Coach Error (Plan Regeneration):",R);let e=R.message;return R.message.includes("deadline-exceeded")||R.message.includes("timeout")?e="Plan generation is taking longer than expected. This can happen with large plans. Please try again - the AI coach is working on your plan.":R.message.includes("Request timeout")&&(e="The request timed out. Please try again - plan generation can take a few minutes for full plans."),{success:!1,error:e}}}buildRegularRunnerCoachingPrompt(e){if(!e.raceDistance)throw new Error("Missing required field: raceDistance");if(!e.raceTime&&!e.isEstimatedFitness)throw new Error("Missing required field: raceTime");if(!e.raceTime&&e.isEstimatedFitness&&(Oe.A.warn("\u26a0\ufe0f Missing raceTime in prompt builder, but isEstimatedFitness is true. Using goal time as fallback."),e.raceTime=e.recentRaceTime||"estimated"),!e.raceDate)throw new Error("Missing required field: raceDate");if(!e.currentWeeklyMileage)throw new Error("Missing required field: currentWeeklyMileage");if(!e.currentLongRun)throw new Error("Missing required field: currentLongRun");const t=Mt(e);if(!t||t<3)throw new Error("Missing required field: workoutsPerWeek (or runsPerWeek for backward compatibility)");if(!e.longRunDay)throw new Error("Missing required field: longRunDay");if(!e.experienceLevel)throw new Error("Missing required field: experienceLevel");const n=new Date,r=(n.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),e.startDate?new Date(e.startDate+"T00:00:00"):n),i=r.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=n.getDay(),l=o[s],c=a[s],u=r.getDay(),d=o[u],h=0===u?1:7-u+1,p=[];for(let W=s;W<=6;W++)p.push(a[W]);p.push("Sun");new Set(p);if(!e.units)throw console.error("\u274c Missing units in user profile - cannot generate plan"),new Error("User profile missing required field: units");const m=e.units,f="metric"===m?"kilometers":"miles",g=e.name||e.displayName,y=g?g.split(" ")[0]:null,v=this.parseDate(e.raceDate),w=Math.ceil((v.getTime()-r.getTime())/6048e5),b=v.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});Math.round((v.getTime()-r.getTime())/2630016000.0000005);let k="The training plan starts on ".concat(i," (").concat(d,"). Please create a training plan for me:\n\n");k+="**IMPORTANT: All distances should be in ".concat(f,". The user is using ").concat(m," units.**\n\n");const D=Math.ceil((v.getTime()-r.getTime())/864e5),x=Math.round(D/30.44);if(console.log("\ud83d\udcc5 DATE CALCULATION: Start=".concat(i,", Race=").concat(b,", Days=").concat(D,", Weeks=").concat(w,", Months=").concat(x)),k+="**\ud83d\udea8\ud83d\udea8\ud83d\udea8 CRITICAL - PLAN DURATION AND RACE DATE \ud83d\udea8\ud83d\udea8\ud83d\udea8**\n",k+="**CALCULATION:** From ".concat(i," to ").concat(b," = ").concat(D," days = EXACTLY ").concat(w," weeks (").concat(x," months)\n"),k+="- **START DATE:** ".concat(i," (").concat(e.startDate,")\n"),k+="- **RACE DATE:** ".concat(b," (").concat(e.raceDate,")\n"),k+="- **EXACT DURATION:** ".concat(D," days = EXACTLY ").concat(w," weeks\n"),k+='- **\ud83d\udea8\ud83d\udea8\ud83d\udea8 YOU MUST SAY:** "'.concat(w,' weeks" when describing the plan duration. DO NOT say "a year", "10 months", "30 weeks", or any other duration.\n'),k+="- **\ud83d\udea8\ud83d\udea8\ud83d\udea8 CHECKPOINTS:** All checkpoints MUST be between Week 1 and Week ".concat(w," ONLY.\n"),k+="  * For a ".concat(w,"-week plan, example checkpoints: Week ").concat(Math.max(4,Math.floor(.3*w)),", Week ").concat(Math.floor(.6*w),", Week ").concat(Math.floor(.85*w),"\n"),k+="  * DO NOT create checkpoints at Week 8, 16, 24, 30, etc. if the plan is only ".concat(w," weeks long.\n"),k+="  * The plan ends at Week ".concat(w,", so ALL checkpoints must be BEFORE Week ").concat(w,".\n\n"),y&&(k+="**PERSONALIZATION: The runner's name is ".concat(y,'. Use their ACTUAL name "').concat(y,'" naturally 2-3 times throughout your coaching analysis. DO NOT use example names like "Sarah" or any placeholder names. For example: "Hey, ').concat(y,'!" at the start, and "Here\'s the thing, ').concat(y,'..." when being honest about challenges.**\n\n')),k+="**Goal Race:**\n",k+="- Distance: ".concat(e.raceDistance,"\n"),e.raceTime&&"estimated"!==e.raceTime)k+="- Goal Time: ".concat(e.raceTime,"\n");else{const t=e.recentRaceTime||"estimated based on current fitness";k+="- Goal Time: ".concat(t," (estimated)\n")}if(k+="- Race Date: ".concat(e.raceDate,"\n"),e.raceElevationProfile){k+="- Course Terrain: ".concat({flat:"Flat course (minimal elevation change)",rolling:"Rolling hills (moderate elevation changes)",hilly:"Hilly course (significant elevation gain)"}[e.raceElevationProfile]||e.raceElevationProfile,"\n")}if(k+="\n",k+="**Current Fitness:**\n",k+="- Weekly Mileage: ".concat(e.currentWeeklyMileage," ").concat(f,"\n"),k+="- Current Long Run: ".concat(e.currentLongRun," ").concat(f,"\n"),e.recentRaceTime&&e.recentRaceDistance){let t=e.recentRaceDistance;"5K"===e.recentRaceDistance?t="metric"===m?"5K (5 kilometers)":"5K (5 kilometers = 3.1 miles)":"10K"===e.recentRaceDistance?t="metric"===m?"10K (10 kilometers)":"10K (10 kilometers = 6.2 miles)":"Half Marathon"===e.recentRaceDistance?t="metric"===m?"Half Marathon (21.1 kilometers)":"Half Marathon (13.1 miles)":"Marathon"===e.recentRaceDistance&&(t="metric"===m?"Marathon (42.2 kilometers)":"Marathon (26.2 miles)"),e.isEstimatedFitness?(k+="- **Estimated Current Fitness:** ".concat(e.recentRaceTime," for ").concat(t," (calculated as 15% slower than goal - user did not provide recent race data)\n"),k+="  **IMPORTANT:** This is a CONSERVATIVE ESTIMATE to ensure safe training. The user's actual current fitness may be better or worse.\n"):k+="- Recent Race: ".concat(e.recentRaceTime," for ").concat(t,"\n");const n=this.buildFitnessAssessmentContext(e);n&&(k+=n);const r=this.predictRaceTimes(e.recentRaceTime,e.recentRaceDistance),i=e.raceDistance,o=e.raceTime||e.recentRaceTime;let a=null,s=null;if(r&&o&&"estimated"!==o&&i){const e=o.includes("-")?o.split("-")[1]:o;a=r[i]||r.Half;const t=this.timeToSeconds(e),n=this.timeToSeconds(a);if(t&&n){const e=t-n;s=Math.abs(Math.round(e/60))}}e._projectedTime=a,e._gapMinutes=s}k+="\n**Training Preferences:**\n";let E=[];if(e.standUpBikeType&&"none"!==e.standUpBikeType&&e.preferredBikeDays&&e.preferredBikeDays.length>0){const t="cyclete"===e.standUpBikeType?"Cyclete":"ElliptiGO";E=e.preferredBikeDays,k+="- Cross-Training Equipment: ".concat(t,"\n"),k+="- **IMPORTANT: ".concat(E.join(" and ")," should be ").concat(t," rides, NOT runs**\n"),k+='  Format: "Tue: Ride X RunEQ miles - [WORKOUT: AEROBIC_BASE|RECOVERY_SPECIFIC - Workout Name] on your '.concat(t,'" (NOT "Easy 4 mile run")\n'),k+='  Select from library workouts: AEROBIC_BASE (e.g., "Conversational Pace Cruise", "Steady State Ride") or RECOVERY_SPECIFIC (e.g., "Recovery Spin", "Active Recovery Ride")\n',k+="  These replace what would normally be easy run days with cross-training\n"}const S=Mt(e);if(E.length>0){const t=S-E.length;k+="- Training Days Per Week: ".concat(S," total (").concat(t," running workouts + ").concat(E.length," ").concat("cyclete"===e.standUpBikeType?"Cyclete":"ElliptiGO"," rides)\n"),k+='  \u26a0\ufe0f CRITICAL: "Training Days Per Week: '.concat(S,'" means ').concat(S," TOTAL training sessions (running + cross-training), NOT ").concat(S," running workouts.\n"),k+="  - ".concat(E.join(" and ")," are ").concat("cyclete"===e.standUpBikeType?"Cyclete":"ElliptiGO"," rides (count toward the ").concat(S," total)\n"),k+="  - The remaining ".concat(t," days are RUNNING workouts (not bike)\n")}else k+="- Training Days Per Week: ".concat(S," (all running workouts)\n");k+="- Long Run Day: ".concat(e.longRunDay,"\n"),console.log("\ud83d\uded1 REST DAYS from profile:",e.restDays),e.restDays&&e.restDays.length>0&&(k+="- **REST DAYS: ".concat(e.restDays.join(", "),"** - These days MUST be complete rest (no running, no cross-training)\n")),e.qualityDays&&e.qualityDays.length>0&&(k+="- **QUALITY/HARD WORKOUT DAYS: ".concat(e.qualityDays.join(" and "),"**\n"),k+="  \u26a0\ufe0f CRITICAL: The user specifically requested hard workouts on ".concat(e.qualityDays.join(" AND "),".\n"),k+="  - ".concat(e.qualityDays[0]," MUST have a hard workout (tempo, intervals, or hills)\n"),e.qualityDays[1]&&(k+="  - ".concat(e.qualityDays[1]," MUST have a hard workout (tempo, intervals, or hills)\n")),k+="  - DO NOT schedule hard workouts on other days\n",k+="  - DO NOT make these days easy runs - they MUST be quality sessions\n");const A=e.crossTrainingEquipment,C=[];if(A&&(A.pool&&C.push("pool running"),A.elliptical&&C.push("elliptical"),A.stationaryBike&&C.push("stationary bike"),A.swimming&&C.push("swimming"),A.rowing&&C.push("rowing machine")),C.length>0){k+="- Cross-Training Options: ".concat(C.join(", "),"\n");const t=e.restDays?e.restDays.length:0;t>=2?(k+="  **IMPORTANT: Since the user has ".concat(t," rest days and cross-training equipment:**\n"),k+='  - Keep ONE day as complete "Rest" (for true recovery)\n',k+='  - Make the OTHER rest day(s) "Rest / XT" - this gives flexibility to cross-train or rest\n',k+='  - Format: "Wed: Rest / XT" (user chooses between rest or cross-training that day)\n'):1===t&&(k+='  With only 1 rest day, keep it as complete "Rest" for recovery.\n')}k+="- Experience Level: ".concat(e.experienceLevel,"\n\n"),k+="**CRITICAL OUTPUT FORMAT REQUIREMENTS:**\n\n",k+="For EVERY week, you MUST output the daily schedule using this EXACT format:\n\n";const T=e.qualityDays||[],R="cyclete"===e.standUpBikeType?"Cyclete":"ElliptiGO",F=["[WORKOUT_ID: tempo_THRESHOLD_0] Tempo Run 6 miles","[WORKOUT_ID: interval_VO2_MAX_2] 800m Track Intervals"],I=e.restDays||[];let P=0;const M=C.length>0,_=(t,n,r)=>I.includes(n)?(P++,M&&I.length>=2&&P>1?"- ".concat(t,": Rest / XT\n"):"- ".concat(t,": Rest\n")):e.longRunDay===n?"- ".concat(t,": [WORKOUT_ID: longrun_CONVERSATIONAL_0] Long Run 5 miles\n"):E.includes(n)?"- ".concat(t,": Ride 3 RunEQ miles - [WORKOUT: AEROBIC_BASE - Conversational Pace Cruise] on your ").concat(R,"\n"):T.includes(n)?"- ".concat(t,": ").concat(F[r%F.length],"\n"):"- ".concat(t,": Easy 3 miles\n");let N="### Week 1 (".concat(i.split(",")[0],") - ").concat(3*h," miles (PARTIAL WEEK - starts ").concat(d,")\n"),O=0;for(let W=u;W<=6;W++)N+=_(a[W],o[W],O),T.includes(o[W])&&O++;N+=_("Sun","Sunday",O),N+="\n";let j="### Week 2 - 20 miles (FULL WEEK Mon-Sun)\n";O=0;[["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"],["Sun","Sunday"]].forEach(e=>{let[t,n]=e;j+=_(t,n,O),T.includes(n)&&O++}),j+="\n",k+="**EXAMPLE FORMAT:**\n",k+="Week 1 (".concat(c,"-Sun) - **CRITICAL: You MUST include ALL days from ").concat(l," through Sunday, including rest days:**\n");const L=[];for(let W=u;W<=6;W++){const t=a[W],n=o[W];I.includes(n)?L.push("- ".concat(t,": Rest")):n===e.longRunDay?L.push("- ".concat(t,": [WORKOUT_ID: longrun_CONVERSATIONAL_0] Long Run 5 ").concat(f)):W===u?L.push("- ".concat(t,": [WORKOUT_ID: tempo_THRESHOLD_0] Tempo Run 6 ").concat(f)):L.push("- ".concat(t,": Easy 3 ").concat(f))}if(k+=L.join("\n")+"\n\n",k+="Week 2 (Mon-Sun):\n",k+="- Mon: Rest\n",k+="- Wed: [WORKOUT_ID: interval_VO2_MAX_2] 800m Intervals 6 ".concat(f,"\n"),k+="- Sun: [WORKOUT_ID: longrun_CONVERSATIONAL_0] Long Run 7 ".concat(f,"\n\n"),k+="**CRITICAL:** Week 1 starts ".concat(l," (partial). You MUST list ALL days from ").concat(l," through Sunday, including rest days. Do NOT skip any days in between.\n\n"),I.length>0&&(k+="**\ud83d\udea8 MANDATORY REST DAYS - DO NOT IGNORE:**\n",k+="The following days are COMPLETE REST DAYS. The user has ".concat(7-I.length," training days per week.\n"),k+="**REST DAYS: ".concat(I.join(", "),"**\n"),k+='For each rest day, output EXACTLY: "'.concat(I[0].substring(0,3),': Rest"\n'),k+="DO NOT assign ANY workout (no running, no cross-training, no easy runs) on: ".concat(I.join(", "),"\n\n")),k+="EVERY week MUST include:\n",k+="1. Week header with week number, date range, and total mileage\n",k+="2. **Week 1: ALL days from ".concat(a[u]," through Sunday (").concat(h," days total) - DO NOT SKIP ANY DAYS, including rest days.** Week 2+: Full Mon-Sun (7 days)\n"),k+="3. [WORKOUT_ID: ...] format for quality workouts from the library\n",k+="4. **CRITICAL: Include distance in ".concat(f,' for EVERY workout** (e.g., "Long Run 10 miles", "Tempo Run 6 miles")\n'),k+="5. Simple descriptions for easy runs and rest days (must include distance)\n",I.length>0&&(k+="6. **".concat(I.join(", "),' = "Rest" ONLY** (the user picked ').concat(7-I.length," training days, not 7). **CRITICAL: If any of these rest days fall in Week 1 (").concat(a[u],"-Sun), you MUST include them in Week 1's schedule.**\n")),k+="\n",k+="**PROGRESSIVE TRAINING PRINCIPLES (STRICT):**\n",k+="1. **Week 1 MUST start conservatively:** First long run should be AT OR BELOW current long run distance (".concat(e.currentLongRun," ").concat(f,") - DO NOT EXCEED\n"),k+="2. **LONG RUN PROGRESSION (STRICT):** Increase by 1-2 ".concat(f," per week MAXIMUM - NO JUMPS OF 3+ ").concat(f,"\n"),k+="   Example: Week 1 = ".concat(e.currentLongRun," ").concat(f,", Week 2 = ").concat(parseInt(e.currentLongRun)+1,"-").concat(parseInt(e.currentLongRun)+2," ").concat(f,", Week 3 = ").concat(parseInt(e.currentLongRun)+2,"-").concat(parseInt(e.currentLongRun)+4," ").concat(f,"\n"),k+="3. **WORKOUT DISTANCE RULES (CRITICAL):**\n",k+="   - Long run is ALWAYS the longest workout of the week\n",k+="   - Tempo runs in Weeks 1-4: 4-5 ".concat(f," MAXIMUM (NOT 6+ ").concat(f,")\n"),k+="   - Tempo runs should be 2-3 ".concat(f," SHORTER than the long run (e.g., if long run is 7 ").concat(f,", tempo should be 4-5 ").concat(f,", NOT 6 ").concat(f,")\n"),k+="   - Intervals in Weeks 1-4: 5-6 ".concat(f," MAXIMUM (including warmup/cooldown)\n"),k+="   - Hill workouts in Weeks 1-4: 4-5 ".concat(f," MAXIMUM\n"),k+="   - Easy runs: 3-4 ".concat(f," in base phase\n"),k+="4. **WEEKLY MILEAGE PROGRESSION (STRICT):**\n",k+="   - Week 1: MUST BE EXACTLY ".concat(e.currentWeeklyMileage," ").concat(f," TOTAL (user's current weekly mileage - DO NOT exceed, DO NOT start higher)\n"),k+="   - Week 2: MUST BE ".concat(parseInt(e.currentWeeklyMileage)+1,"-").concat(parseInt(e.currentWeeklyMileage)+2," ").concat(f," TOTAL (only +1-2 from Week 1, NOT +3)\n"),k+="   - Week 3: MUST BE ".concat(parseInt(e.currentWeeklyMileage)+2,"-").concat(parseInt(e.currentWeeklyMileage)+4," ").concat(f," TOTAL (gradual build, NOT +5+)\n"),k+="   - Week 4+: Increase by 10% OR 2-3 ".concat(f," per week MAXIMUM - NO JUMPS OF 5+ ").concat(f,"\n"),k+="   - Example: Week 1 = ".concat(e.currentWeeklyMileage," ").concat(f,", Week 2 = ").concat(parseInt(e.currentWeeklyMileage)+1,"-").concat(parseInt(e.currentWeeklyMileage)+2," ").concat(f,", Week 3 = ").concat(parseInt(e.currentWeeklyMileage)+2,"-").concat(parseInt(e.currentWeeklyMileage)+4," ").concat(f,"\n"),e.standUpBikeType&&"none"!==e.standUpBikeType){const t="cyclete"===e.standUpBikeType?"Cyclete":"ElliptiGO";k+="   **CRITICAL - READ CAREFULLY:**\n",k+="   - RunEQ miles from ".concat(t," REPLACE runs (both easy AND hard) - they ARE running miles, not additional miles.\n"),k+="   - The weekly mileage total you specify in the week header MUST INCLUDE RunEQ miles.\n",k+='   - Example: If Week 2 header says "18 miles", then ALL workouts (running + RunEQ) must add up to 18 total.\n',k+='   - WRONG: "18 miles" with 17 running + 8 RunEQ = 25 total (this is incorrect!)\n',k+='   - CORRECT: "18 miles" with 10 running + 8 RunEQ = 18 total, OR "25 miles" with 17 running + 8 RunEQ = 25 total.\n',k+="   - When calculating the weekly total, ADD: running miles + RunEQ miles = total weekly miles.\n"}k+="4. Recovery weeks every 3-4 weeks (reduce long run by 1-2 ".concat(f,", reduce weekly mileage by 20-30%)\n\n");const B=v.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});if(k+="**OUTPUT REQUIREMENTS (Jason Fitzgerald voice):**\n",k+="1. **OPENING PARAGRAPH - CRITICAL:** Start with a clear, explicit statement that includes:\n",k+="   - The user's CURRENT PROJECTED race time (calculated from their recent ".concat(e.recentRaceDistance||"race"," via VDOT equivalency)\n"),k+="   - Their GOAL race time\n",k+="   - The GAP between them\n",e._projectedTime&&null!==e._gapMinutes){const t=e.raceTime.includes("-")?e.raceTime.split("-")[1]:e.raceTime;k+='   **YOU MUST SAY:** "Based on your '.concat(e.recentRaceTime," ").concat(e.recentRaceDistance,", if you raced a ").concat(e.raceDistance," tomorrow, you'd probably run around ").concat(e._projectedTime,". Your goal is ").concat(t," - that's a ").concat(e._gapMinutes,"-minute gap to close in ").concat(w,' weeks."\n')}else k+='   Example format: "Based on your '.concat(e.recentRaceTime||"recent race",", if you raced a ").concat(e.raceDistance," tomorrow, you'd probably run around [PROJECTED_TIME]. Your goal is ").concat(e.raceTime.includes("-")?e.raceTime.split("-")[1]:e.raceTime," - that's a [GAP]-minute gap to close in ").concat(w,' weeks."\n');return k+='   **DO NOT** just say "you\'re looking to drop X minutes off your projected time" without stating what the projected time actually IS.\n',k+="2. Key training paces with ranges\n",k+="3. Training phase overview: Describe the 4 phases (Base, Build, Peak, Taper) with general focus for each - DO NOT output a week-by-week schedule here (that comes in Step 2)\n",k+="4. Race day strategy: pacing, fueling, terrain (race date is ".concat(B,")\n"),k+='5. Checkpoints with metrics (e.g., "Week 8: 10K under 65:00") - ALL checkpoints must be Week 1 through Week '.concat(w,", NO checkpoints beyond Week ").concat(w,"\n"),k+="6. Final notes: why plan works, what to watch, encouragement\n",k+="**CRITICAL:**\n",k+="- DO NOT output a week-by-week schedule in this section - only provide the coaching overview\n",k+="- DO NOT use workout IDs like [WORKOUT_ID: ...] in your response\n",k+="- DO NOT list specific workouts or create a training schedule\n",k+="- DO NOT include day-by-day or week-by-week plan structure\n",k+="- The plan structure is generated separately by code - your role is narrative coaching only\n",k+="- The race date is ".concat(B," (").concat(e.raceDate,') - DO NOT mention a different date like "Feb 15"\n'),k+="- All checkpoints must be between Week 1 and Week ".concat(w," (no Week 16, Week 20, etc. if plan is only ").concat(w," weeks)\n\n"),k}async generateInjuryExpertAnalysis(e,t,n){var r,i,o,a;const{weeksOffRunning:s,selectedEquipment:l,reduceTrainingDays:c,currentWeek:u,returnToRunningWeek:d}=e,h=[];if(l.pool&&h.push({name:"Pool/Aqua Running",type:"pool",safetyLevel:"very_safe"}),l.elliptical&&h.push({name:"Elliptical",type:"elliptical",safetyLevel:"safe"}),l.stationaryBike&&h.push({name:"Stationary Bike",type:"stationaryBike",safetyLevel:"safe"}),l.swimming&&h.push({name:"Swimming",type:"swimming",safetyLevel:"very_safe"}),l.rowing&&h.push({name:"Rowing Machine",type:"rowing",safetyLevel:"moderate"}),l.standUpBike){const e="cyclete"===t.standUpBikeType?"Cyclete":"elliptigo"===t.standUpBikeType?"ElliptiGO":"Stand-Up Bike";h.push({name:e,type:"standUpBike",safetyLevel:"safe"})}const p=(null===n||void 0===n||null===(r=n.planOverview)||void 0===r?void 0:r.raceDistance)||t.raceDistance,m=(null===n||void 0===n||null===(i=n.planOverview)||void 0===i?void 0:i.goalTime)||t.raceTime,f=(null===n||void 0===n||null===(o=n.planOverview)||void 0===o?void 0:o.raceDate)||t.raceDate,g=(null===n||void 0===n||null===(a=n.weeks)||void 0===a?void 0:a.length)||0,y=g-u+1,v=t.name||t.displayName,w=v?v.split(" ")[0]:null,b="You are a sports physiologist analyzing an injury recovery situation.\nOutput ONLY valid JSON - no markdown, no code blocks, no prose.\n\nINJURY RECOVERY FACTS:\n- Runner Name: ".concat(w||"Runner","\n- Current Week: Week ").concat(u," of ").concat(g,"-week plan\n- Weeks Off Running: ").concat(s," weeks\n- Return to Running Week: ").concat(d,"\n- Race Goal: ").concat(p," in ").concat(m,"\n- Race Date: ").concat(f,"\n- Weeks Remaining After Recovery: ").concat(y-s," weeks\n- Training Days Reduced By: ").concat(c," day(s)\n").concat(e.injuries&&e.injuries.length>0?"- Injuries: ".concat(e.injuries.join(", ")):"- Injuries: General/unspecified","\n").concat(e.injuryDescription?"- Additional Details: ".concat(e.injuryDescription):"","\n\nAVAILABLE EQUIPMENT (USE THESE EXACT NAMES):\n").concat(h.map(e=>"- ".concat(e.name," (type: ").concat(e.type,")")).join("\n"),'\n\nAnalyze this situation and return structured JSON:\n\n{\n  "runnerName": "string - first name only",\n  "injuries": ["array of injury names"],\n  "injurySummary": "1-2 sentence summary of the injury situation",\n  "availableEquipment": ["array of EXACT equipment names from the list above - DO NOT invent equipment"],\n  "recommendedEquipment": ["array of 1-3 BEST equipment options for this injury - USE EXACT NAMES"],\n  "equipmentToAvoid": ["array of equipment that could aggravate this injury - USE EXACT NAMES or empty if none"],\n  "biomechanicalReasoning": "2-3 sentences explaining WHY recommended equipment is safe for this injury",\n  "avoidanceReasoning": "1-2 sentences explaining why certain equipment should be avoided, or null if none",\n  "fitnessRetention": "percentage estimate of running fitness retained through cross-training (e.g., \'85-90%\')",\n  "returnToRunningGuidance": "2-3 sentences on what to expect when returning to running",\n  "raceGoalImpact": "honest assessment: \'on track\', \'minor adjustment needed\', or \'significant adjustment needed\'",\n  "raceGoalExplanation": "1-2 sentences explaining race goal impact",\n  "mentalCoachingPoint": "1 key mental/motivational insight for the runner",\n  "weeksSummary": {\n    "crossTrainingWeeks": "Week X - Week Y",\n    "returnWeek": "Week Z"\n  }\n}\n\nCRITICAL: Only reference equipment from the AVAILABLE EQUIPMENT list above. Do not invent or assume equipment.');try{const e=await this.callWithTimeout(this.callAnthropicAPI({model:"claude-sonnet-4-5-20250929",max_tokens:800,messages:[{role:"user",content:b}]}),6e4);if(!e.data.success)throw new Error(e.data.error||"Layer 1 analysis failed");const t=e.data.content[0].text.trim().replace(/```json\n?/g,"").replace(/```\n?/g,"").trim(),n=JSON.parse(t),r=h.map(e=>e.name);return n.availableEquipment=n.availableEquipment.filter(e=>r.some(t=>t.toLowerCase()===e.toLowerCase())),n.recommendedEquipment=n.recommendedEquipment.filter(e=>r.some(t=>t.toLowerCase()===e.toLowerCase())),console.log("\u2705 Layer 1 Expert Analysis:",n),n}catch(k){return console.error("Layer 1 Error:",k),{runnerName:w||"Runner",injuries:e.injuries||["General injury"],injurySummary:"Recovering from injury, focusing on cross-training.",availableEquipment:h.map(e=>e.name),recommendedEquipment:h.slice(0,2).map(e=>e.name),equipmentToAvoid:[],biomechanicalReasoning:"Cross-training maintains cardiovascular fitness while reducing impact stress.",avoidanceReasoning:null,fitnessRetention:"80-85%",returnToRunningGuidance:"Start with easy runs at reduced volume. Listen to your body.",raceGoalImpact:"minor adjustment needed",raceGoalExplanation:"With ".concat(s," weeks of cross-training, expect a gradual return to full fitness."),mentalCoachingPoint:"Trust the process - cross-training keeps you fit while you heal.",weeksSummary:{crossTrainingWeeks:"Week ".concat(u," - Week ").concat(d-1),returnWeek:"Week ".concat(d)}}}}async deliverInjuryCoachingInVoice(e){const t='You are Jason Fitzgerald, USATF-certified running coach and founder of Strength Running.\n\n**YOUR COACHING STYLE:**\n- Direct, honest, and encouraging\n- Evidence-based but conversational\n- Use the runner\'s name naturally\n- Empathetic but not soft\n\n**CRITICAL CONSTRAINT - ANTI-HALLUCINATION PROTOCOL:**\nYou can ONLY reference the facts provided in the EXPERT ANALYSIS below.\nDO NOT invent equipment, injuries, or recommendations not in the analysis.\nIf the analysis says "Cyclete", say "Cyclete" - not "ElliptiGO" or "stand-up bike".\nIf the analysis says "Pool/Aqua Running", say that - not something else.\n\n**EXPERT ANALYSIS (YOUR ONLY SOURCE OF FACTS):**\n'.concat(JSON.stringify(e,null,2),'\n\n**COACHING RESPONSE REQUIREMENTS:**\nUsing ONLY the facts above, write a coaching message that:\n\n1. Opens with honest acknowledgment: "Let\'s be real - injuries happen..."\n2. References the EXACT equipment names from recommendedEquipment (not paraphrased)\n3. Explains WHY using the biomechanicalReasoning provided\n4. If equipmentToAvoid is not empty, mention what to avoid and why\n5. Addresses the mental aspect using mentalCoachingPoint\n6. Sets expectations for return to running using returnToRunningGuidance\n7. Addresses race goal using raceGoalImpact and raceGoalExplanation\n8. Includes safety reminder: "If any activity causes pain, stop immediately"\n9. Includes medical disclaimer: "This is not medical advice. Consult your healthcare provider."\n10. Ends with encouragement\n\n**FORMATTING:**\n- DO NOT use markdown formatting (no **, no ##, no bullet points with *)\n- Write in plain text paragraphs\n- Use line breaks between sections for readability\n- Keep response to 200-250 words\n\nAddress ').concat(e.runnerName," by name.\n\nREMEMBER: Only reference equipment and facts from the EXPERT ANALYSIS. No improvisation. Plain text only.");try{const e=await this.callWithTimeout(this.callAnthropicAPI({model:"claude-sonnet-4-5-20250929",max_tokens:600,system:this.coachingSystemPrompt,messages:[{role:"user",content:t}]}),6e4);if(!e.data.success)throw new Error(e.data.error||"Layer 2 delivery failed");return e.data.content[0].text}catch(n){return console.error("Layer 2 Error:",n),"".concat(e.runnerName,", let's be real - injuries happen, but here's how we'll handle this.\n\nFor the next ").concat(e.weeksSummary.crossTrainingWeeks,", you'll focus on cross-training with ").concat(e.recommendedEquipment.join(" and "),". ").concat(e.biomechanicalReasoning,"\n\n").concat(e.mentalCoachingPoint,"\n\nIn ").concat(e.weeksSummary.returnWeek,", we'll begin your return to running. ").concat(e.returnToRunningGuidance,"\n\nRegarding your race goal: ").concat(e.raceGoalExplanation,"\n\nIf any activity causes pain, stop immediately and reassess. This is not medical advice - consult your healthcare provider for injury diagnosis and treatment.\n\nTrust the process. You've got this.")}}async generateInjuryRecoveryCoaching(e,t,n){console.log("\ud83c\udfe5 Generating injury recovery coaching (Two-Layer Architecture)...");try{console.log("  \ud83d\udcca Layer 1: Generating expert analysis...");const r=await this.generateInjuryExpertAnalysis(e,t,n);console.log("  \ud83c\udfa4 Layer 2: Delivering in coach voice...");const i=await this.deliverInjuryCoachingInVoice(r);return console.log("  \u2705 Two-Layer coaching generated successfully"),i}catch(r){console.error("AI Coach Error (Injury Recovery):",r);const t=e.currentWeek+e.weeksOffRunning;return"Injury recovery plan created. Focus on healing and maintaining fitness through cross-training. We'll gradually return to running in Week ".concat(t,".")}}async generatePlanAdjustmentCoaching(e,t,n){var r,i,o,a,s,l,c,u,d,h,p;const{oldSettings:m,newSettings:f,currentWeek:g,reason:y}=e,v=t.name||t.displayName,w=v?v.split(" ")[0]:null,b=Mt(m),k=Mt(f),D=k-b,x=f.hardSessionDays.length-m.hardSessionDays.length,E=((null===(r=f.preferredBikeDays)||void 0===r?void 0:r.length)||0)-((null===(i=m.preferredBikeDays)||void 0===i?void 0:i.length)||0),S=f.longRunDay!==m.longRunDay,A=(null===n||void 0===n||null===(o=n.planOverview)||void 0===o?void 0:o.raceDistance)||t.raceDistance,C=(null===n||void 0===n||null===(a=n.planOverview)||void 0===a?void 0:a.goalTime)||t.raceTime,T=(null===n||void 0===n||null===(s=n.weeks)||void 0===s?void 0:s.length)||0,R=T-g+1,F=[];if(0!==D&&F.push("".concat(D>0?"Increased":"Reduced"," from ").concat(b," to ").concat(k," workouts per week")),0!==x&&F.push("".concat(x>0?"Added":"Reduced"," ").concat(Math.abs(x)," hard workout day").concat(1!==Math.abs(x)?"s":"")),0!==E&&t.standUpBikeType){const e="cyclete"===t.standUpBikeType?"Cyclete":"ElliptiGO";F.push("".concat(E>0?"Added":"Reduced"," ").concat(Math.abs(E)," ").concat(e," day").concat(1!==Math.abs(E)?"s":""))}S&&F.push("Moved long run from ".concat(m.longRunDay," to ").concat(f.longRunDay));const I="You are a USATF-certified running coach providing guidance on training plan adjustments. Your coaching style is direct, honest, and encouraging - like Jason Fitzgerald.\n\nPLAN ADJUSTMENT SITUATION:\n- Runner: ".concat(w||"The runner","\n- Current Week: Week ").concat(g," of ").concat(T,"-week training plan\n- Weeks Remaining: ").concat(R," weeks until race\n- Race Goal: ").concat(A," in ").concat(C,"\n").concat(y?"- Reason for adjustment: ".concat(y):"","\n\nCHANGES MADE:\n").concat(F.length>0?F.map(e=>"- ".concat(e)).join("\n"):"- No significant changes","\n\nOLD SETTINGS:\n- Workouts per week: ").concat(b,"\n- Training days: ").concat((null===(l=m.availableDays)||void 0===l?void 0:l.join(", "))||"N/A","\n- Hard workout days: ").concat((null===(c=m.hardSessionDays)||void 0===c?void 0:c.join(", "))||"None","\n- Long run day: ").concat(m.longRunDay,"\n").concat(null!==(u=m.preferredBikeDays)&&void 0!==u&&u.length?"- Bike days: ".concat(m.preferredBikeDays.join(", ")):"","\n\nNEW SETTINGS:\n- Workouts per week: ").concat(k,"\n- Training days: ").concat((null===(d=f.availableDays)||void 0===d?void 0:d.join(", "))||"N/A","\n- Hard workout days: ").concat((null===(h=f.hardSessionDays)||void 0===h?void 0:h.join(", "))||"None","\n- Long run day: ").concat(f.longRunDay,"\n").concat(null!==(p=f.preferredBikeDays)&&void 0!==p&&p.length?"- Bike days: ".concat(f.preferredBikeDays.join(", ")):"",'\n\nCOACHING REQUIREMENTS (Jason Fitzgerald voice):\n1. **Assess the changes**: Are these adjustments smart? Do they make sense for the race goal?\n2. **Address the reason**: If reason provided (too hard/easy/few bike days), explain if the adjustment addresses it correctly\n3. **Training load impact**: How does this affect weekly volume and intensity?\n4. **Recovery implications**: Are there enough rest days? Too many?\n5. **Race goal impact**: How do these changes affect the race goal? Positive or negative?\n6. **Specific guidance**: \n   - If reducing runs: "This gives you more recovery, which is smart if you were feeling beat up..."\n   - If increasing runs: "Adding a day increases volume - make sure you\'re ready for this..."\n   - If changing hard days: "Moving hard workouts affects recovery patterns..."\n   - If changing bike days: "More/fewer Cyclete days means more/less running-specific training..."\n7. **Encouragement**: End with confidence-building message\n\nKeep response to 200-250 words. Be conversational, direct, and actionable. Use the runner\'s name naturally if provided.');try{const e=await this.callWithTimeout(this.callAnthropicAPI({model:"claude-sonnet-4-5-20250929",max_tokens:600,system:this.coachingSystemPrompt,messages:[{role:"user",content:I}]}),18e4);if(!e.data.success)throw new Error(e.data.error||"Failed to generate plan adjustment coaching");return e.data.content[0].text}catch(P){return console.error("AI Coach Error (Plan Adjustment):",P),"Plan adjustments saved. The changes will help you stay on track toward your ".concat(A," goal. Listen to your body and adjust as needed.")}}parseAIPlanToStructure(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Ft.parseAIPlanToStructure(e,t,n)}enrichPlanWithWorkouts(e){return It.enrichPlanWithWorkouts(e)}injectUserPaces(e,t){return It.injectUserPaces(e,t)}replaceGenericPaces(e,t){return It.replaceGenericPaces(e,t)}transformToDashboardFormat(e,t){return Pt.transformToDashboardFormat(e,t)}fixHardDaysViolations(e,t){return Tt.fixHardDaysViolations(e,t)}generateDefaultHardWorkout(e,t){return Tt.generateDefaultHardWorkout(e,t)}};function Nt(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Nt(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ot(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Nt(e))&&(r&&(r+=" "),r+=t);return r}Math.pow(10,8);const jt=6048e5,Lt=6e4,Bt=36e5,Wt=Symbol.for("constructDateFrom");function Ut(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&Wt in e?e[Wt](t):e instanceof Date?new e.constructor(t):new Date(t)}function qt(e,t){return Ut(t||e,e)}function Ht(e,t){var n;const r=()=>Ut(null===t||void 0===t?void 0:t.in,NaN),i=null!==(n=null===t||void 0===t?void 0:t.additionalDigits)&&void 0!==n?n:2,o=function(e){const t={},n=e.split(zt.dateTimeDelimiter);let r;if(n.length>2)return t;/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],zt.timeZoneDelimiter.test(t.date)&&(t.date=e.split(zt.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length)));if(r){const e=zt.timezone.exec(r);e?(t.time=r.replace(e[1],""),t.timezone=e[1]):t.time=r}return t}(e);let a;if(o.date){const e=function(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:null===o?i:100*o,restDateString:e.slice((r[1]||r[2]).length)}}(o.date,i);a=function(e,t){if(null===t)return new Date(NaN);const n=e.match(Vt);if(!n)return new Date(NaN);const r=!!n[4],i=Gt(n[1]),o=Gt(n[2])-1,a=Gt(n[3]),s=Gt(n[4]),l=Gt(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,s,l)?function(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,o=7*(t-1)+n+1-i;return r.setUTCDate(r.getUTCDate()+o),r}(t,s,l):new Date(NaN);{const e=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(Xt[t]||(Zt(e)?29:28))}(t,o,a)&&function(e,t){return t>=1&&t<=(Zt(e)?366:365)}(t,i)?(e.setUTCFullYear(t,o,Math.max(i,a)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!a||isNaN(+a))return r();const s=+a;let l,c=0;if(o.time&&(c=function(e){const t=e.match(Kt);if(!t)return NaN;const n=Qt(t[1]),r=Qt(t[2]),i=Qt(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,i))return NaN;return n*Bt+r*Lt+1e3*i}(o.time),isNaN(c)))return r();if(!o.timezone){const e=new Date(s+c),n=qt(0,null===t||void 0===t?void 0:t.in);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}return l=function(e){if("Z"===e)return 0;const t=e.match(Yt);if(!t)return 0;const n="+"===t[1]?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,i))return NaN;return n*(r*Bt+i*Lt)}(o.timezone),isNaN(l)?r():qt(s+c+l,null===t||void 0===t?void 0:t.in)}const zt={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Vt=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Kt=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Yt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Gt(e){return e?parseInt(e):1}function Qt(e){return e&&parseFloat(e.replace(",","."))||0}const Xt=[31,null,31,30,31,30,31,31,30,31,30,31];function Zt(e){return e%400===0||e%4===0&&e%100!==0}const Jt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function $t(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const en={date:$t({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:$t({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:$t({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},tn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function nn(e){return(t,n)=>{let r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=null!==n&&void 0!==n&&n.width?String(n.width):t;r=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[i]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const rn={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:nn({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:nn({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:nn({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:nn({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:nn({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function on(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;const a=o[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(s)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(s,e=>e.test(a)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(s,e=>e.test(a));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(a.length)}}}const an={ordinalNumber:(sn={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(sn.matchPattern);if(!n)return null;const r=n[0],i=e.match(sn.parsePattern);if(!i)return null;let o=sn.valueCallback?sn.valueCallback(i[0]):i[0];return o=t.valueCallback?t.valueCallback(o):o,{value:o,rest:e.slice(r.length)}}),era:on({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:on({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:on({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:on({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:on({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var sn;const ln={code:"en-US",formatDistance:(e,t,n)=>{let r;const i=Jt[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:en,formatRelative:(e,t,n,r)=>tn[e],localize:rn,match:an,options:{weekStartsOn:0,firstWeekContainsDate:1}},cn=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},un=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},dn={p:un,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return cn(e,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;default:o=t.dateTime({width:"full"})}return o.replace("{{date}}",cn(r,t)).replace("{{time}}",un(i,t))}},hn=/^D+$/,pn=/^Y+$/,mn=["D","DD","YY","YYYY"];function fn(e){return hn.test(e)}function gn(e){return pn.test(e)}function yn(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(r),mn.includes(e))throw new RangeError(r)}let vn={};function wn(){return vn}function bn(){return Object.assign({},wn())}var kn=n(705);function Dn(e,t){const n=function(e){var t;return"function"===typeof e&&(null===(t=e.prototype)||void 0===t?void 0:t.constructor)===e}(t)?new t(0):Ut(t,0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}class xn{constructor(){(0,kn.A)(this,"subPriority",0)}validate(e,t){return!0}}class En extends xn{constructor(e,t,n,r,i){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=r,i&&(this.subPriority=i)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class Sn extends xn{constructor(e,t){super(),(0,kn.A)(this,"priority",10),(0,kn.A)(this,"subPriority",-1),this.context=e||(e=>Ut(t,e))}set(e,t){return t.timestampIsSet?e:Ut(e,Dn(e,this.context))}}class An{run(e,t,n,r){const i=this.parse(e,t,n,r);return i?{setter:new En(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,t,n){return!0}}const Cn=/^(1[0-2]|0?\d)/,Tn=/^(3[0-1]|[0-2]?\d)/,Rn=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Fn=/^(5[0-3]|[0-4]?\d)/,In=/^(2[0-3]|[0-1]?\d)/,Pn=/^(2[0-4]|[0-1]?\d)/,Mn=/^(1[0-1]|0?\d)/,_n=/^(1[0-2]|0?\d)/,Nn=/^[0-5]?\d/,On=/^[0-5]?\d/,jn=/^\d/,Ln=/^\d{1,2}/,Bn=/^\d{1,3}/,Wn=/^\d{1,4}/,Un=/^-?\d+/,qn=/^-?\d/,Hn=/^-?\d{1,2}/,zn=/^-?\d{1,3}/,Vn=/^-?\d{1,4}/,Kn=/^([+-])(\d{2})(\d{2})?|Z/,Yn=/^([+-])(\d{2})(\d{2})|Z/,Gn=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,Qn=/^([+-])(\d{2}):(\d{2})|Z/,Xn=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function Zn(e,t){return e?{value:t(e.value),rest:e.rest}:e}function Jn(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function $n(e,t){const n=t.match(e);if(!n)return null;if("Z"===n[0])return{value:0,rest:t.slice(1)};const r="+"===n[1]?1:-1,i=n[2]?parseInt(n[2],10):0,o=n[3]?parseInt(n[3],10):0,a=n[5]?parseInt(n[5],10):0;return{value:r*(i*Bt+o*Lt+1e3*a),rest:t.slice(n[0].length)}}function er(e){return Jn(Un,e)}function tr(e,t){switch(e){case 1:return Jn(jn,t);case 2:return Jn(Ln,t);case 3:return Jn(Bn,t);case 4:return Jn(Wn,t);default:return Jn(new RegExp("^\\d{1,"+e+"}"),t)}}function nr(e,t){switch(e){case 1:return Jn(qn,t);case 2:return Jn(Hn,t);case 3:return Jn(zn,t);case 4:return Jn(Vn,t);default:return Jn(new RegExp("^-?\\d{1,"+e+"}"),t)}}function rr(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function ir(e,t){const n=t>0,r=n?t:1-t;let i;if(r<=50)i=e||100;else{const t=r+50;i=e+100*Math.trunc(t/100)-(e>=t%100?100:0)}return n?i:1-i}function or(e){return e%400===0||e%4===0&&e%100!==0}function ar(e,t){var n,r,i,o,a,s;const l=wn(),c=null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:l.weekStartsOn)&&void 0!==r?r:null===(s=l.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==n?n:0,u=qt(e,null===t||void 0===t?void 0:t.in),d=u.getDay(),h=(d<c?7:0)+d-c;return u.setDate(u.getDate()-h),u.setHours(0,0,0,0),u}function sr(e,t){var n,r,i,o,a,s;const l=qt(e,null===t||void 0===t?void 0:t.in),c=l.getFullYear(),u=wn(),d=null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:u.firstWeekContainsDate)&&void 0!==r?r:null===(s=u.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==n?n:1,h=Ut((null===t||void 0===t?void 0:t.in)||e,0);h.setFullYear(c+1,0,d),h.setHours(0,0,0,0);const p=ar(h,t),m=Ut((null===t||void 0===t?void 0:t.in)||e,0);m.setFullYear(c,0,d),m.setHours(0,0,0,0);const f=ar(m,t);return+l>=+p?c+1:+l>=+f?c:c-1}function lr(e,t){return ar(e,(0,c.A)((0,c.A)({},t),{},{weekStartsOn:1}))}function cr(e,t){var n,r,i,o,a,s;const l=wn(),c=null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:l.firstWeekContainsDate)&&void 0!==r?r:null===(s=l.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==n?n:1,u=sr(e,t),d=Ut((null===t||void 0===t?void 0:t.in)||e,0);d.setFullYear(u,0,c),d.setHours(0,0,0,0);return ar(d,t)}function ur(e,t){const n=qt(e,null===t||void 0===t?void 0:t.in),r=+ar(n,t)-+cr(n,t);return Math.round(r/jt)+1}function dr(e,t,n){const r=qt(e,null===n||void 0===n?void 0:n.in),i=ur(r,n)-t;return r.setDate(r.getDate()-7*i),qt(r,null===n||void 0===n?void 0:n.in)}function hr(e,t){const n=qt(e,null===t||void 0===t?void 0:t.in),r=n.getFullYear(),i=Ut(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const o=lr(i),a=Ut(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const s=lr(a);return n.getTime()>=o.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function pr(e,t){const n=hr(e,t),r=Ut((null===t||void 0===t?void 0:t.in)||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),lr(r)}function mr(e,t){const n=qt(e,null===t||void 0===t?void 0:t.in),r=+lr(n)-+pr(n);return Math.round(r/jt)+1}function fr(e,t,n){const r=qt(e,null===n||void 0===n?void 0:n.in),i=mr(r,n)-t;return r.setDate(r.getDate()-7*i),r}const gr=[31,28,31,30,31,30,31,31,30,31,30,31],yr=[31,29,31,30,31,30,31,31,30,31,30,31];function vr(e,t,n){const r=qt(e,null===n||void 0===n?void 0:n.in);return isNaN(t)?Ut((null===n||void 0===n?void 0:n.in)||e,NaN):t?(r.setDate(r.getDate()+t),r):r}function wr(e,t,n){var r,i,o,a,s,l;const c=wn(),u=null!==(r=null!==(i=null!==(o=null!==(a=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==a?a:null===n||void 0===n||null===(s=n.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==o?o:c.weekStartsOn)&&void 0!==i?i:null===(l=c.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==r?r:0,d=qt(e,null===n||void 0===n?void 0:n.in),h=d.getDay(),p=7-u;return vr(d,t<0||t>6?t-(h+p)%7:((t%7+7)%7+p)%7-(h+p)%7,n)}function br(e,t){const n=qt(e,null===t||void 0===t?void 0:t.in).getDay();return 0===n?7:n}function kr(e,t,n){const r=qt(e,null===n||void 0===n?void 0:n.in);return vr(r,t-br(r,n),n)}function Dr(e){const t=qt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}const xr={G:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",140),(0,kn.A)(this,"incompatibleTokens",["R","u","t","T"])}parse(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,t,n){return t.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}},y:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",130),(0,kn.A)(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,t,n){const r=e=>({year:e,isTwoDigitYear:"yy"===t});switch(t){case"y":return Zn(tr(4,e),r);case"yo":return Zn(n.ordinalNumber(e,{unit:"year"}),r);default:return Zn(tr(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n){const r=e.getFullYear();if(n.isTwoDigitYear){const t=ir(n.year,r);return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}const i="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}},Y:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",130),(0,kn.A)(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,t,n){const r=e=>({year:e,isTwoDigitYear:"YY"===t});switch(t){case"Y":return Zn(tr(4,e),r);case"Yo":return Zn(n.ordinalNumber(e,{unit:"year"}),r);default:return Zn(tr(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n,r){const i=sr(e,r);if(n.isTwoDigitYear){const t=ir(n.year,i);return e.setFullYear(t,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),ar(e,r)}const o="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(o,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),ar(e,r)}},R:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",130),(0,kn.A)(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,t){return nr("R"===t?4:t.length,e)}set(e,t,n){const r=Ut(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),lr(r)}},u:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",130),(0,kn.A)(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,t){return nr("u"===t?4:t.length,e)}set(e,t,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}},Q:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",120),(0,kn.A)(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"Q":case"QQ":return tr(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}},q:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",120),(0,kn.A)(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"q":case"qq":return tr(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}},M:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),(0,kn.A)(this,"priority",110)}parse(e,t,n){const r=e=>e-1;switch(t){case"M":return Zn(Jn(Cn,e),r);case"MM":return Zn(tr(2,e),r);case"Mo":return Zn(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}},L:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",110),(0,kn.A)(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,t,n){const r=e=>e-1;switch(t){case"L":return Zn(Jn(Cn,e),r);case"LL":return Zn(tr(2,e),r);case"Lo":return Zn(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}},w:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",100),(0,kn.A)(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,t,n){switch(t){case"w":return Jn(Fn,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return tr(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n,r){return ar(dr(e,n,r),r)}},I:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",100),(0,kn.A)(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,t,n){switch(t){case"I":return Jn(Fn,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return tr(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n){return lr(fr(e,n))}},d:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",90),(0,kn.A)(this,"subPriority",1),(0,kn.A)(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"d":return Jn(Tn,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return tr(t.length,e)}}validate(e,t){const n=or(e.getFullYear()),r=e.getMonth();return n?t>=1&&t<=yr[r]:t>=1&&t<=gr[r]}set(e,t,n){return e.setDate(n),e.setHours(0,0,0,0),e}},D:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",90),(0,kn.A)(this,"subpriority",1),(0,kn.A)(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,t,n){switch(t){case"D":case"DD":return Jn(Rn,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return tr(t.length,e)}}validate(e,t){return or(e.getFullYear())?t>=1&&t<=366:t>=1&&t<=365}set(e,t,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}},E:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",90),(0,kn.A)(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=wr(e,n,r)).setHours(0,0,0,0),e}},e:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",90),(0,kn.A)(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,t,n,r){const i=e=>{const t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return Zn(tr(t.length,e),i);case"eo":return Zn(n.ordinalNumber(e,{unit:"day"}),i);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=wr(e,n,r)).setHours(0,0,0,0),e}},c:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",90),(0,kn.A)(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,t,n,r){const i=e=>{const t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return Zn(tr(t.length,e),i);case"co":return Zn(n.ordinalNumber(e,{unit:"day"}),i);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=wr(e,n,r)).setHours(0,0,0,0),e}},i:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",90),(0,kn.A)(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,t,n){const r=e=>0===e?7:e;switch(t){case"i":case"ii":return tr(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return Zn(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return Zn(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return Zn(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return Zn(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,t){return t>=1&&t<=7}set(e,t,n){return(e=kr(e,n)).setHours(0,0,0,0),e}},a:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",80),(0,kn.A)(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(rr(n),0,0,0),e}},b:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",80),(0,kn.A)(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(rr(n),0,0,0),e}},B:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",80),(0,kn.A)(this,"incompatibleTokens",["a","b","t","T"])}parse(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(rr(n),0,0,0),e}},h:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",70),(0,kn.A)(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,t,n){switch(t){case"h":return Jn(_n,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return tr(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,n){const r=e.getHours()>=12;return r&&n<12?e.setHours(n+12,0,0,0):r||12!==n?e.setHours(n,0,0,0):e.setHours(0,0,0,0),e}},H:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",70),(0,kn.A)(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,t,n){switch(t){case"H":return Jn(In,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return tr(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,n){return e.setHours(n,0,0,0),e}},K:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",70),(0,kn.A)(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,t,n){switch(t){case"K":return Jn(Mn,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return tr(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}},k:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",70),(0,kn.A)(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,t,n){switch(t){case"k":return Jn(Pn,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return tr(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,n){const r=n<=24?n%24:n;return e.setHours(r,0,0,0),e}},m:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",60),(0,kn.A)(this,"incompatibleTokens",["t","T"])}parse(e,t,n){switch(t){case"m":return Jn(Nn,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return tr(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setMinutes(n,0,0),e}},s:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",50),(0,kn.A)(this,"incompatibleTokens",["t","T"])}parse(e,t,n){switch(t){case"s":return Jn(On,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return tr(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setSeconds(n,0),e}},S:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",30),(0,kn.A)(this,"incompatibleTokens",["t","T"])}parse(e,t){return Zn(tr(t.length,e),e=>Math.trunc(e*Math.pow(10,3-t.length)))}set(e,t,n){return e.setMilliseconds(n),e}},X:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",10),(0,kn.A)(this,"incompatibleTokens",["t","T","x"])}parse(e,t){switch(t){case"X":return $n(Kn,e);case"XX":return $n(Yn,e);case"XXXX":return $n(Gn,e);case"XXXXX":return $n(Xn,e);default:return $n(Qn,e)}}set(e,t,n){return t.timestampIsSet?e:Ut(e,e.getTime()-Dr(e)-n)}},x:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",10),(0,kn.A)(this,"incompatibleTokens",["t","T","X"])}parse(e,t){switch(t){case"x":return $n(Kn,e);case"xx":return $n(Yn,e);case"xxxx":return $n(Gn,e);case"xxxxx":return $n(Xn,e);default:return $n(Qn,e)}}set(e,t,n){return t.timestampIsSet?e:Ut(e,e.getTime()-Dr(e)-n)}},t:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",40),(0,kn.A)(this,"incompatibleTokens","*")}parse(e){return er(e)}set(e,t,n){return[Ut(e,1e3*n),{timestampIsSet:!0}]}},T:new class extends An{constructor(){super(...arguments),(0,kn.A)(this,"priority",20),(0,kn.A)(this,"incompatibleTokens","*")}parse(e){return er(e)}set(e,t,n){return[Ut(e,n),{timestampIsSet:!0}]}}},Er=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Sr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ar=/^'([^]*?)'?$/,Cr=/''/g,Tr=/\S/,Rr=/[a-zA-Z]/;function Fr(e,t,n,r){var i,o,a,s,l,c,u,d,h,p,m,f,g,y;const v=()=>Ut((null===r||void 0===r?void 0:r.in)||n,NaN),w=bn(),b=null!==(i=null!==(o=null===r||void 0===r?void 0:r.locale)&&void 0!==o?o:w.locale)&&void 0!==i?i:ln,k=null!==(a=null!==(s=null!==(l=null!==(c=null===r||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==c?c:null===r||void 0===r||null===(u=r.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==l?l:w.firstWeekContainsDate)&&void 0!==s?s:null===(d=w.locale)||void 0===d||null===(d=d.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==a?a:1,D=null!==(h=null!==(p=null!==(m=null!==(f=null===r||void 0===r?void 0:r.weekStartsOn)&&void 0!==f?f:null===r||void 0===r||null===(g=r.locale)||void 0===g||null===(g=g.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==m?m:w.weekStartsOn)&&void 0!==p?p:null===(y=w.locale)||void 0===y||null===(y=y.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==h?h:0;if(!t)return e?v():qt(n,null===r||void 0===r?void 0:r.in);const x={firstWeekContainsDate:k,weekStartsOn:D,locale:b},E=[new Sn(null===r||void 0===r?void 0:r.in,n)],S=t.match(Sr).map(e=>{const t=e[0];if(t in dn){return(0,dn[t])(e,b.formatLong)}return e}).join("").match(Er),A=[];for(let F of S){null!==r&&void 0!==r&&r.useAdditionalWeekYearTokens||!gn(F)||yn(F,t,e),null!==r&&void 0!==r&&r.useAdditionalDayOfYearTokens||!fn(F)||yn(F,t,e);const n=F[0],i=xr[n];if(i){const{incompatibleTokens:t}=i;if(Array.isArray(t)){const e=A.find(e=>t.includes(e.token)||e.token===n);if(e)throw new RangeError("The format string mustn't contain `".concat(e.fullToken,"` and `").concat(F,"` at the same time"))}else if("*"===i.incompatibleTokens&&A.length>0)throw new RangeError("The format string mustn't contain `".concat(F,"` and any other token at the same time"));A.push({token:n,fullToken:F});const r=i.run(e,F,b.match,x);if(!r)return v();E.push(r.setter),e=r.rest}else{if(n.match(Rr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===F?F="'":"'"===n&&(F=Ir(F)),0!==e.indexOf(F))return v();e=e.slice(F.length)}}if(e.length>0&&Tr.test(e))return v();const C=E.map(e=>e.priority).sort((e,t)=>t-e).filter((e,t,n)=>n.indexOf(e)===t).map(e=>E.filter(t=>t.priority===e).sort((e,t)=>t.subPriority-e.subPriority)).map(e=>e[0]);let T=qt(n,null===r||void 0===r?void 0:r.in);if(isNaN(+T))return v();const R={};for(const F of C){if(!F.validate(T,x))return v();const e=F.set(T,R,x);Array.isArray(e)?(T=e[0],Object.assign(R,e[1])):T=e}return T}function Ir(e){return e.match(Ar)[1].replace(Cr,"'")}function Pr(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function Mr(e){return!(!Pr(e)&&"number"!==typeof e||isNaN(+qt(e)))}function _r(e,t){return+qt(e)<+qt(t)}function Nr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=Ut.bind(null,e||n.find(e=>"object"===typeof e));return n.map(i)}function Or(e,t){const n=qt(e,null===t||void 0===t?void 0:t.in);return n.setHours(0,0,0,0),n}function jr(e,t,n){const[r,i]=Nr(null===n||void 0===n?void 0:n.in,e,t),o=Or(r),a=Or(i),s=+o-Dr(o),l=+a-Dr(a);return Math.round((s-l)/864e5)}function Lr(e,t){const n=qt(e,null===t||void 0===t?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Br(e,t){const n=qt(e,null===t||void 0===t?void 0:t.in);return jr(n,Lr(n))+1}function Wr(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const Ur={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Wr("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):Wr(n+1,2)},d:(e,t)=>Wr(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>Wr(e.getHours()%12||12,t.length),H:(e,t)=>Wr(e.getHours(),t.length),m:(e,t)=>Wr(e.getMinutes(),t.length),s:(e,t)=>Wr(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return Wr(Math.trunc(r*Math.pow(10,n-3)),t.length)}},qr="midnight",Hr="noon",zr="morning",Vr="afternoon",Kr="evening",Yr="night",Gr={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return Ur.y(e,t)},Y:function(e,t,n,r){const i=sr(e,r),o=i>0?i:1-i;if("YY"===t){return Wr(o%100,2)}return"Yo"===t?n.ordinalNumber(o,{unit:"year"}):Wr(o,t.length)},R:function(e,t){return Wr(hr(e),t.length)},u:function(e,t){return Wr(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Wr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Wr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Ur.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Wr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=ur(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):Wr(i,t.length)},I:function(e,t,n){const r=mr(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Wr(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):Ur.d(e,t)},D:function(e,t,n){const r=Br(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Wr(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Wr(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Wr(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return Wr(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(i=12===r?Hr:0===r?qr:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(i=r>=17?Kr:r>=12?Vr:r>=4?zr:Yr,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return Ur.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):Ur.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Wr(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Wr(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ur.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Ur.s(e,t)},S:function(e,t){return Ur.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return Xr(r);case"XXXX":case"XX":return Zr(r);default:return Zr(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return Xr(r);case"xxxx":case"xx":return Zr(r);default:return Zr(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Qr(r,":");default:return"GMT"+Zr(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Qr(r,":");default:return"GMT"+Zr(r,":")}},t:function(e,t,n){return Wr(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return Wr(+e,t.length)}};function Qr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),o=r%60;return 0===o?n+String(i):n+String(i)+t+Wr(o,2)}function Xr(e,t){if(e%60===0){return(e>0?"-":"+")+Wr(Math.abs(e)/60,2)}return Zr(e,t)}function Zr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e);return n+Wr(Math.trunc(r/60),2)+t+Wr(r%60,2)}const Jr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$r=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ei=/^'([^]*?)'?$/,ti=/''/g,ni=/[a-zA-Z]/;function ri(e,t,n){var r,i,o,a,s,l,c,u,d,h,p,m,f,g;const y=wn(),v=null!==(r=null!==(i=null===n||void 0===n?void 0:n.locale)&&void 0!==i?i:y.locale)&&void 0!==r?r:ln,w=null!==(o=null!==(a=null!==(s=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==s?s:y.firstWeekContainsDate)&&void 0!==a?a:null===(u=y.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==o?o:1,b=null!==(d=null!==(h=null!==(p=null!==(m=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==m?m:null===n||void 0===n||null===(f=n.locale)||void 0===f||null===(f=f.options)||void 0===f?void 0:f.weekStartsOn)&&void 0!==p?p:y.weekStartsOn)&&void 0!==h?h:null===(g=y.locale)||void 0===g||null===(g=g.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==d?d:0,k=qt(e,null===n||void 0===n?void 0:n.in);if(!Mr(k))throw new RangeError("Invalid time value");let D=t.match($r).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,dn[t])(e,v.formatLong)}return e}).join("").match(Jr).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:ii(e)};if(Gr[t])return{isToken:!0,value:e};if(t.match(ni))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});v.localize.preprocessor&&(D=v.localize.preprocessor(k,D));const x={firstWeekContainsDate:w,weekStartsOn:b,locale:v};return D.map(r=>{if(!r.isToken)return r.value;const i=r.value;(null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!gn(i))&&(null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!fn(i))||yn(i,t,String(e));return(0,Gr[i[0]])(k,i,v.localize,x)}).join("")}function ii(e){const t=e.match(ei);return t?t[1].replace(ti,"'"):e}function oi(e,t,n){const r=qt(e,null===n||void 0===n?void 0:n.in);return r.setHours(t),r}function ai(e,t,n){const r=qt(e,null===n||void 0===n?void 0:n.in);return r.setMinutes(t),r}function si(e,t,n){const r=qt(e,null===n||void 0===n?void 0:n.in);return r.setSeconds(t),r}function li(e,t){const n=qt(e,null===t||void 0===t?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function ci(e,t){const n=qt(e,null===t||void 0===t?void 0:t.in),r=n.getMonth(),i=r-r%3;return n.setMonth(i,1),n.setHours(0,0,0,0),n}function ui(e,t){const n=qt(e,null===t||void 0===t?void 0:t.in);return n.setHours(23,59,59,999),n}function di(e,t){var n,r,i,o,a,s;const l=wn(),c=null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:l.weekStartsOn)&&void 0!==r?r:null===(s=l.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==n?n:0,u=qt(e,null===t||void 0===t?void 0:t.in),d=u.getDay(),h=6+(d<c?-7:0)-(d-c);return u.setDate(u.getDate()+h),u.setHours(23,59,59,999),u}function hi(e,t){const n=qt(e,null===t||void 0===t?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function pi(e,t,n){const[r,i]=Nr(null===n||void 0===n?void 0:n.in,e,t);return r.getFullYear()===i.getFullYear()}function mi(e,t,n){const[r,i]=Nr(null===n||void 0===n?void 0:n.in,e,t);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function fi(e,t,n){const[r,i]=Nr(null===n||void 0===n?void 0:n.in,e,t);return+ci(r)===+ci(i)}function gi(e,t,n){const[r,i]=Nr(null===n||void 0===n?void 0:n.in,e,t);return+Or(r)===+Or(i)}function yi(e,t){return+qt(e)===+qt(t)}function vi(e,t,n){const r=+qt(e,null===n||void 0===n?void 0:n.in),[i,o]=[+qt(t.start,null===n||void 0===n?void 0:n.in),+qt(t.end,null===n||void 0===n?void 0:n.in)].sort((e,t)=>e-t);return r>=i&&r<=o}function wi(e,t){const n=qt(e,null===t||void 0===t?void 0:t.in),r=n.getFullYear(),i=n.getMonth(),o=Ut(n,0);return o.setFullYear(r,i+1,0),o.setHours(0,0,0,0),o.getDate()}function bi(e,t,n){const r=qt(e,null===n||void 0===n?void 0:n.in),i=r.getFullYear(),o=r.getDate(),a=Ut((null===n||void 0===n?void 0:n.in)||e,0);a.setFullYear(i,t,15),a.setHours(0,0,0,0);const s=wi(a);return r.setMonth(t,Math.min(o,s)),r}function ki(e,t,n){const r=qt(e,null===n||void 0===n?void 0:n.in),i=t-(Math.trunc(r.getMonth()/3)+1);return bi(r,r.getMonth()+3*i)}function Di(e,t){return qt(e,null===t||void 0===t?void 0:t.in).getFullYear()}function xi(e,t){return qt(e,null===t||void 0===t?void 0:t.in).getMonth()}function Ei(e,t){const n=qt(e,null===t||void 0===t?void 0:t.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function Si(e,t){const n=qt(e,null===t||void 0===t?void 0:t.in);return Math.trunc(n.getMonth()/3)+1}function Ai(e,t){return qt(e,null===t||void 0===t?void 0:t.in).getHours()}function Ci(e,t){return qt(e,null===t||void 0===t?void 0:t.in).getMinutes()}function Ti(e){return qt(e).getSeconds()}function Ri(e,t,n){const r=qt(e,null===n||void 0===n?void 0:n.in);if(isNaN(t))return Ut((null===n||void 0===n?void 0:n.in)||e,NaN);if(!t)return r;const i=r.getDate(),o=Ut((null===n||void 0===n?void 0:n.in)||e,r.getTime());o.setMonth(r.getMonth()+t+1,0);return i>=o.getDate()?o:(r.setFullYear(o.getFullYear(),o.getMonth(),i),r)}function Fi(e,t,n){return Ri(e,-t,n)}function Ii(e,t,n){const[r,i]=Nr(null===n||void 0===n?void 0:n.in,e,t);return 12*(r.getFullYear()-i.getFullYear())+(r.getMonth()-i.getMonth())}function Pi(e,t,n){return Ri(e,3*t,n)}function Mi(e,t,n){return Pi(e,-t,n)}function _i(e,t,n){const[r,i]=Nr(null===n||void 0===n?void 0:n.in,e,t);return 4*(r.getFullYear()-i.getFullYear())+(Si(r)-Si(i))}function Ni(e,t,n){return Ri(e,12*t,n)}function Oi(e,t,n){return Ni(e,-t,n)}function ji(e,t,n){const[r,i]=Nr(null===n||void 0===n?void 0:n.in,e,t);return r.getFullYear()-i.getFullYear()}function Li(e,t){let n,r=null===t||void 0===t?void 0:t.in;return e.forEach(e=>{r||"object"!==typeof e||(r=Ut.bind(null,e));const t=qt(e,r);(!n||n>t||isNaN(+t))&&(n=t)}),Ut(r,n||NaN)}function Bi(e,t){let n,r=null===t||void 0===t?void 0:t.in;return e.forEach(e=>{r||"object"!==typeof e||(r=Ut.bind(null,e));const t=qt(e,r);(!n||n<t||isNaN(+t))&&(n=t)}),Ut(r,n||NaN)}function Wi(e,t,n){return Ut((null===n||void 0===n?void 0:n.in)||e,+qt(e)+t)}function Ui(e,t,n){return Wi(e,t*Bt,n)}function qi(e,t,n){const r=qt(e,null===n||void 0===n?void 0:n.in);return r.setTime(r.getTime()+t*Lt),r}function Hi(e,t,n){return Wi(e,1e3*t,n)}function zi(e,t){return+qt(e)>+qt(t)}function Vi(e,t){return qt(e,null===t||void 0===t?void 0:t.in).getDay()}function Ki(e,t){return qt(e,null===t||void 0===t?void 0:t.in).getDate()}function Yi(e,t,n){return vr(e,7*t,n)}function Gi(e){return+qt(e)}function Qi(e,t,n){const r=qt(e,null===n||void 0===n?void 0:n.in);return isNaN(+r)?Ut((null===n||void 0===n?void 0:n.in)||e,NaN):(r.setFullYear(t),r)}function Xi(e,t,n){const[r,i]=Nr(null===n||void 0===n?void 0:n.in,e,t),o=Zi(r,i),a=Math.abs(jr(r,i));r.setDate(r.getDate()-o*a);const s=o*(a-Number(Zi(r,i)===-o));return 0===s?0:s}function Zi(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function Ji(e,t,n){return Yi(e,-t,n)}function $i(e,t,n){return vr(e,-t,n)}var eo=n(986);var to="undefined"!==typeof document?a.useLayoutEffect:function(){};const no=(0,c.A)({},s).useInsertionEffect||(e=>e());function ro(){return"undefined"!==typeof window}function io(e){return so(e)?(e.nodeName||"").toLowerCase():"#document"}function oo(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function ao(e){var t;return null==(t=(so(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function so(e){return!!ro()&&(e instanceof Node||e instanceof oo(e).Node)}function lo(e){return!!ro()&&(e instanceof Element||e instanceof oo(e).Element)}function co(e){return!!ro()&&(e instanceof HTMLElement||e instanceof oo(e).HTMLElement)}function uo(e){return!(!ro()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof oo(e).ShadowRoot)}const ho=new Set(["inline","contents"]);function po(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=So(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!ho.has(i)}const mo=new Set(["table","td","th"]);function fo(e){return mo.has(io(e))}const go=[":popover-open",":modal"];function yo(e){return go.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const vo=["transform","translate","scale","rotate","perspective"],wo=["transform","translate","scale","rotate","perspective","filter"],bo=["paint","layout","strict","content"];function ko(e){const t=Do(),n=lo(e)?So(e):e;return vo.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||wo.some(e=>(n.willChange||"").includes(e))||bo.some(e=>(n.contain||"").includes(e))}function Do(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const xo=new Set(["html","body","#document"]);function Eo(e){return xo.has(io(e))}function So(e){return oo(e).getComputedStyle(e)}function Ao(e){return lo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Co(e){if("html"===io(e))return e;const t=e.assignedSlot||e.parentNode||uo(e)&&e.host||ao(e);return uo(t)?t.host:t}function To(e){const t=Co(e);return Eo(t)?e.ownerDocument?e.ownerDocument.body:e.body:co(t)&&po(t)?t:To(t)}function Ro(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=To(e),o=i===(null==(r=e.ownerDocument)?void 0:r.body),a=oo(i);if(o){const e=Fo(a);return t.concat(a,a.visualViewport||[],po(i)?i:[],e&&n?Ro(e):[])}return t.concat(i,Ro(i,[],n))}function Fo(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Io=Math.min,Po=Math.max,Mo=Math.round,_o=Math.floor,No=e=>({x:e,y:e}),Oo={left:"right",right:"left",bottom:"top",top:"bottom"},jo={start:"end",end:"start"};function Lo(e,t){return"function"===typeof e?e(t):e}function Bo(e){return e.split("-")[0]}function Wo(e){return e.split("-")[1]}function Uo(e){return"y"===e?"height":"width"}const qo=new Set(["top","bottom"]);function Ho(e){return qo.has(Bo(e))?"y":"x"}function zo(e){return"x"===Ho(e)?"y":"x"}function Vo(e){return e.replace(/start|end/g,e=>jo[e])}const Ko=["left","right"],Yo=["right","left"],Go=["top","bottom"],Qo=["bottom","top"];function Xo(e,t,n,r){const i=Wo(e);let o=function(e,t,n){switch(e){case"top":case"bottom":return n?t?Yo:Ko:t?Ko:Yo;case"left":case"right":return t?Go:Qo;default:return[]}}(Bo(e),"start"===n,r);return i&&(o=o.map(e=>e+"-"+i),t&&(o=o.concat(o.map(Vo)))),o}function Zo(e){return e.replace(/left|right|bottom|top/g,e=>Oo[e])}function Jo(e){return"number"!==typeof e?function(e){return(0,c.A)({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function $o(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}const ea=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"];function ta(e,t,n){let{reference:r,floating:i}=e;const o=Ho(t),a=zo(t),s=Uo(a),l=Bo(t),c="y"===o,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[s]/2-i[s]/2;let p;switch(l){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(Wo(t)){case"start":p[a]-=h*(n&&c?-1:1);break;case"end":p[a]+=h*(n&&c?-1:1)}return p}async function na(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:o,rects:a,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=Lo(t,e),m=Jo(p),f=s[h?"floating"===d?"reference":"floating":d],g=$o(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(f)))||n?f:f.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(s.floating)),boundary:c,rootBoundary:u,strategy:l})),y="floating"===d?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,v=await(null==o.getOffsetParent?void 0:o.getOffsetParent(s.floating)),w=await(null==o.isElement?void 0:o.isElement(v))&&await(null==o.getScale?void 0:o.getScale(v))||{x:1,y:1},b=$o(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:y,offsetParent:v,strategy:l}):y);return{top:(g.top-b.top+m.top)/w.y,bottom:(b.bottom-g.bottom+m.bottom)/w.y,left:(g.left-b.left+m.left)/w.x,right:(b.right-g.right+m.right)/w.x}}const ra=new Set(["left","top"]);function ia(e){const t=So(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=co(e),o=i?e.offsetWidth:n,a=i?e.offsetHeight:r,s=Mo(n)!==o||Mo(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}function oa(e){return lo(e)?e:e.contextElement}function aa(e){const t=oa(e);if(!co(t))return No(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=ia(t);let a=(o?Mo(n.width):n.width)/r,s=(o?Mo(n.height):n.height)/i;return a&&Number.isFinite(a)||(a=1),s&&Number.isFinite(s)||(s=1),{x:a,y:s}}const sa=No(0);function la(e){const t=oo(e);return Do()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:sa}function ca(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),o=oa(e);let a=No(1);t&&(r?lo(r)&&(a=aa(r)):a=aa(e));const s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==oo(e))&&t}(o,n,r)?la(o):No(0);let l=(i.left+s.x)/a.x,c=(i.top+s.y)/a.y,u=i.width/a.x,d=i.height/a.y;if(o){const e=oo(o),t=r&&lo(r)?oo(r):r;let n=e,i=Fo(n);for(;i&&r&&t!==n;){const e=aa(i),t=i.getBoundingClientRect(),r=So(i),o=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,a=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=o,c+=a,n=oo(i),i=Fo(n)}}return $o({width:u,height:d,x:l,y:c})}function ua(e,t){const n=Ao(e).scrollLeft;return t?t.left+n:ca(ao(e)).left+n}function da(e,t){const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-ua(e,n),y:n.top+t.scrollTop}}const ha=new Set(["absolute","fixed"]);function pa(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=oo(e),r=ao(e),i=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;const e=Do();(!e||e&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}const c=ua(r);if(c<=0){const e=r.ownerDocument,t=e.body,n=getComputedStyle(t),i="CSS1Compat"===e.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,a=Math.abs(r.clientWidth-t.clientWidth-i);a<=25&&(o-=a)}else c<=25&&(o+=c);return{width:o,height:a,x:s,y:l}}(e,n);else if("document"===t)r=function(e){const t=ao(e),n=Ao(e),r=e.ownerDocument.body,i=Po(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Po(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+ua(e);const s=-n.scrollTop;return"rtl"===So(r).direction&&(a+=Po(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:s}}(ao(e));else if(lo(t))r=function(e,t){const n=ca(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=co(e)?aa(e):No(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:i*o.x,y:r*o.y}}(t,n);else{const n=la(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return $o(r)}function ma(e,t){const n=Co(e);return!(n===t||!lo(n)||Eo(n))&&("fixed"===So(n).position||ma(n,t))}function fa(e,t,n){const r=co(t),i=ao(t),o="fixed"===n,a=ca(e,!0,o,t);let s={scrollLeft:0,scrollTop:0};const l=No(0);function c(){l.x=ua(i)}if(r||!r&&!o)if(("body"!==io(t)||po(i))&&(s=Ao(t)),r){const e=ca(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&c();o&&!r&&i&&c();const u=!i||r||o?No(0):da(i,s);return{x:a.left+s.scrollLeft-l.x-u.x,y:a.top+s.scrollTop-l.y-u.y,width:a.width,height:a.height}}function ga(e){return"static"===So(e).position}function ya(e,t){if(!co(e)||"fixed"===So(e).position)return null;if(t)return t(e);let n=e.offsetParent;return ao(e)===n&&(n=n.ownerDocument.body),n}function va(e,t){const n=oo(e);if(yo(e))return n;if(!co(e)){let t=Co(e);for(;t&&!Eo(t);){if(lo(t)&&!ga(t))return t;t=Co(t)}return n}let r=ya(e,t);for(;r&&fo(r)&&ga(r);)r=ya(r,t);return r&&Eo(r)&&ga(r)&&!ko(r)?n:r||function(e){let t=Co(e);for(;co(t)&&!Eo(t);){if(ko(t))return t;if(yo(t))return null;t=Co(t)}return null}(e)||n}const wa={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o="fixed"===i,a=ao(r),s=!!t&&yo(t.floating);if(r===a||s&&o)return n;let l={scrollLeft:0,scrollTop:0},c=No(1);const u=No(0),d=co(r);if((d||!d&&!o)&&(("body"!==io(r)||po(a))&&(l=Ao(r)),co(r))){const e=ca(r);c=aa(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!a||d||o?No(0):da(a,l);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:ao,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[..."clippingAncestors"===n?yo(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=Ro(e,[],!1).filter(e=>lo(e)&&"body"!==io(e)),i=null;const o="fixed"===So(e).position;let a=o?Co(e):e;for(;lo(a)&&!Eo(a);){const t=So(a),n=ko(a);n||"fixed"!==t.position||(i=null),(o?!n&&!i:!n&&"static"===t.position&&i&&ha.has(i.position)||po(a)&&!n&&ma(e,a))?r=r.filter(e=>e!==a):i=t,a=Co(a)}return t.set(e,r),r}(t,this._c):[].concat(n),r],a=o[0],s=o.reduce((e,n)=>{const r=pa(t,n,i);return e.top=Po(r.top,e.top),e.right=Io(r.right,e.right),e.bottom=Io(r.bottom,e.bottom),e.left=Po(r.left,e.left),e},pa(t,a,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:va,getElementRects:async function(e){const t=this.getOffsetParent||va,n=this.getDimensions,r=await n(e.floating);return{reference:fa(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=ia(e);return{width:t,height:n}},getScale:aa,isElement:lo,isRTL:function(e){return"rtl"===So(e).direction}};function ba(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ka(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a="function"===typeof ResizeObserver,layoutShift:s="function"===typeof IntersectionObserver,animationFrame:l=!1}=r,u=oa(e),d=i||o?[...u?Ro(u):[],...Ro(t)]:[];d.forEach(e=>{i&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)});const h=u&&s?function(e,t){let n,r=null;const i=ao(e);function o(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function a(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),o();const u=e.getBoundingClientRect(),{left:d,top:h,width:p,height:m}=u;if(s||t(),!p||!m)return;const f={rootMargin:-_o(h)+"px "+-_o(i.clientWidth-(d+p))+"px "+-_o(i.clientHeight-(h+m))+"px "+-_o(d)+"px",threshold:Po(0,Io(1,l))||1};let g=!0;function y(t){const r=t[0].intersectionRatio;if(r!==l){if(!g)return a();r?a(!1,r):n=setTimeout(()=>{a(!1,1e-7)},1e3)}1!==r||ba(u,e.getBoundingClientRect())||a(),g=!1}try{r=new IntersectionObserver(y,(0,c.A)((0,c.A)({},f),{},{root:i.ownerDocument}))}catch(v){r=new IntersectionObserver(y,f)}r.observe(e)}(!0),o}(u,n):null;let p,m=-1,f=null;a&&(f=new ResizeObserver(e=>{let[r]=e;r&&r.target===u&&f&&(f.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var e;null==(e=f)||e.observe(t)})),n()}),u&&!l&&f.observe(u),f.observe(t));let g=l?ca(e):null;return l&&function t(){const r=ca(e);g&&!ba(g,r)&&n();g=r,p=requestAnimationFrame(t)}(),n(),()=>{var e;d.forEach(e=>{i&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)}),null==h||h(),null==(e=f)||e.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const Da=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:a,middlewareData:s}=t,l=await async function(e,t){const{placement:n,platform:r,elements:i}=e,o=await(null==r.isRTL?void 0:r.isRTL(i.floating)),a=Bo(n),s=Wo(n),l="y"===Ho(n),c=ra.has(a)?-1:1,u=o&&l?-1:1,d=Lo(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:m}="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&"number"===typeof m&&(p="end"===s?-1*m:m),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}(t,e);return a===(null==(n=s.offset)?void 0:n.placement)&&null!=(r=s.arrow)&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:(0,c.A)((0,c.A)({},l),{},{placement:a})}}}},xa=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:l,elements:c}=t,u=Lo(e,t),{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:g=!0}=u,y=(0,eo.A)(u,ea);if(null!=(n=o.arrow)&&n.alignmentOffset)return{};const v=Bo(i),w=Ho(s),b=Bo(s)===s,k=await(null==l.isRTL?void 0:l.isRTL(c.floating)),D=p||(b||!g?[Zo(s)]:function(e){const t=Zo(e);return[Vo(e),t,Vo(t)]}(s)),x="none"!==f;!p&&x&&D.push(...Xo(s,g,f,k));const E=[s,...D],S=await na(t,y),A=[];let C=(null==(r=o.flip)?void 0:r.overflows)||[];if(d&&A.push(S[v]),h){const e=function(e,t,n){void 0===n&&(n=!1);const r=Wo(e),i=zo(e),o=Uo(i);let a="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=Zo(a)),[a,Zo(a)]}(i,a,k);A.push(S[e[0]],S[e[1]])}if(C=[...C,{placement:i,overflows:A}],!A.every(e=>e<=0)){var T,R;const e=((null==(T=o.flip)?void 0:T.index)||0)+1,t=E[e];if(t){if(!("alignment"===h&&w!==Ho(t))||C.every(e=>Ho(e.placement)!==w||e.overflows[0]>0))return{data:{index:e,overflows:C},reset:{placement:t}}}let n=null==(R=C.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:R.placement;if(!n)switch(m){case"bestFit":{var F;const e=null==(F=C.filter(e=>{if(x){const t=Ho(e.placement);return t===w||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:F[0];e&&(n=e);break}case"initialPlacement":n=s}if(i!==n)return{reset:{placement:n}}}return{}}}},Ea=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:a,elements:s,middlewareData:l}=t,{element:u,padding:d=0}=Lo(e,t)||{};if(null==u)return{};const h=Jo(d),p={x:n,y:r},m=zo(i),f=Uo(m),g=await a.getDimensions(u),y="y"===m,v=y?"top":"left",w=y?"bottom":"right",b=y?"clientHeight":"clientWidth",k=o.reference[f]+o.reference[m]-p[m]-o.floating[f],D=p[m]-o.reference[m],x=await(null==a.getOffsetParent?void 0:a.getOffsetParent(u));let E=x?x[b]:0;E&&await(null==a.isElement?void 0:a.isElement(x))||(E=s.floating[b]||o.floating[f]);const S=k/2-D/2,A=E/2-g[f]/2-1,C=Io(h[v],A),T=Io(h[w],A),R=C,F=E-g[f]-T,I=E/2-g[f]/2+S,P=function(e,t,n){return Po(e,Io(t,n))}(R,I,F),M=!l.arrow&&null!=Wo(i)&&I!==P&&o.reference[f]/2-(I<R?C:T)-g[f]/2<0,_=M?I<R?I-R:I-F:0;return{[m]:p[m]+_,data:(0,c.A)({[m]:P,centerOffset:I-P-_},M&&{alignmentOffset:_}),reset:M}}}),Sa=(e,t,n)=>{const r=new Map,i=(0,c.A)({platform:wa},n),o=(0,c.A)((0,c.A)({},i.platform),{},{_c:r});return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,s=o.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:h}=ta(u,r,l),p=r,m={},f=0;for(let g=0;g<s.length;g++){const{name:n,fn:o}=s[g],{x:y,y:v,data:w,reset:b}=await o({x:d,y:h,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:u,platform:a,elements:{reference:e,floating:t}});d=null!=y?y:d,h=null!=v?v:h,m=(0,c.A)((0,c.A)({},m),{},{[n]:(0,c.A)((0,c.A)({},m[n]),w)}),b&&f<=50&&(f++,"object"===typeof b&&(b.placement&&(p=b.placement),b.rects&&(u=!0===b.rects?await a.getElementRects({reference:e,floating:t,strategy:i}):b.rects),({x:d,y:h}=ta(u,p,l))),g=-1)}return{x:d,y:h,placement:p,strategy:i,middlewareData:m}})(e,t,(0,c.A)((0,c.A)({},i),{},{platform:o}))};var Aa="undefined"!==typeof document?a.useLayoutEffect:function(){};function Ca(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!Ca(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){const n=i[r];if(("_owner"!==n||!e.$$typeof)&&!Ca(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function Ta(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ra(e,t){const n=Ta(e);return Math.round(t*n)/n}function Fa(e){const t=a.useRef(e);return Aa(()=>{t.current=e}),t}const Ia=(e,t)=>(0,c.A)((0,c.A)({},Da(e)),{},{options:[e,t]}),Pa=(e,t)=>(0,c.A)((0,c.A)({},(e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"===typeof e?e(t):e;return n&&(i=n,{}.hasOwnProperty.call(i,"current"))?null!=n.current?Ea({element:n.current,padding:r}).fn(t):{}:n?Ea({element:n,padding:r}).fn(t):{};var i}}))(e)),{},{options:[e,t]}),Ma=["transform"],_a=["context","width","height","tipRadius","strokeWidth","staticOffset","stroke","d","style"];const Na="ArrowLeft",Oa="ArrowRight",ja="ArrowUp",La="ArrowDown";const Ba=[Na,Oa],Wa=[ja,La],Ua=(0,c.A)({},s);let qa=!1,Ha=0;const za=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Ha++;const Va=Ua.useId||function(){const[e,t]=a.useState(()=>qa?za():void 0);return to(()=>{null==e&&t(za())},[]),a.useEffect(()=>{qa=!0},[]),e};const Ka=a.forwardRef(function(e,t){const{context:{placement:n,elements:{floating:r},middlewareData:{arrow:i,shift:o}},width:s=14,height:l=7,tipRadius:u=0,strokeWidth:d=0,staticOffset:h,stroke:p,d:m,style:{transform:f}={}}=e,g=(0,eo.A)(e.style,Ma),y=(0,eo.A)(e,_a);const v=Va(),[w,b]=a.useState(!1);if(to(()=>{if(!r)return;"rtl"===So(r).direction&&b(!0)},[r]),!r)return null;const[k,D]=n.split("-"),x="top"===k||"bottom"===k;let E=h;(x&&null!=o&&o.x||!x&&null!=o&&o.y)&&(E=null);const S=2*d,A=S/2,C=s/2*(u/-8+1),T=l/2*u/4,R=!!m,F=E&&"end"===D?"bottom":"top";let I=E&&"end"===D?"right":"left";E&&w&&(I="end"===D?"left":"right");const P=null!=(null==i?void 0:i.x)?E||i.x:"",M=null!=(null==i?void 0:i.y)?E||i.y:"",_=m||"M0,0 H"+s+" L"+(s-C)+","+(l-T)+" Q"+s/2+","+l+" "+C+","+(l-T)+" Z",N={top:R?"rotate(180deg)":"",left:R?"rotate(90deg)":"rotate(-90deg)",bottom:R?"":"rotate(180deg)",right:R?"rotate(-90deg)":"rotate(90deg)"}[k];return(0,je.jsxs)("svg",(0,c.A)((0,c.A)({},y),{},{"aria-hidden":!0,ref:t,width:R?s:s+S,height:s,viewBox:"0 0 "+s+" "+(l>s?l:s),style:(0,c.A)({position:"absolute",pointerEvents:"none",[I]:P,[F]:M,[k]:x||R?"100%":"calc(100% - "+S/2+"px)",transform:[N,f].filter(e=>!!e).join(" ")},g),children:[S>0&&(0,je.jsx)("path",{clipPath:"url(#"+v+")",fill:"none",stroke:p,strokeWidth:S+(m?0:1),d:_}),(0,je.jsx)("path",{stroke:S&&!m?y.fill:"none",d:_}),(0,je.jsx)("clipPath",{id:v,children:(0,je.jsx)("rect",{x:-A,y:A*(R?-1:1),width:s+S,height:s})})]}))});function Ya(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach(e=>e(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;null==(r=e.get(t))||r.delete(n)}}}const Ga=a.createContext(null),Qa=a.createContext(null),Xa=()=>{var e;return(null==(e=a.useContext(Ga))?void 0:e.id)||null},Za=()=>a.useContext(Qa);function Ja(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Va(),o=a.useRef({}),[s]=a.useState(()=>Ya()),l=null!=Xa();const[c,u]=a.useState(r.reference),d=function(e){const t=a.useRef(()=>{});return no(()=>{t.current=e}),a.useCallback(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}((e,t,r)=>{o.current.openEvent=e?t:void 0,s.emit("openchange",{open:e,event:t,reason:r,nested:l}),null==n||n(e,t,r)}),h=a.useMemo(()=>({setPositionReference:u}),[]),p=a.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return a.useMemo(()=>({dataRef:o,open:t,onOpenChange:d,elements:p,events:s,floatingId:i,refs:h}),[t,d,p,s,i,h])}function $a(e){void 0===e&&(e={});const{nodeId:t}=e,n=Ja((0,c.A)((0,c.A)({},e),{},{elements:(0,c.A)({reference:null,floating:null},e.elements)})),r=e.rootContext||n,i=r.elements,[o,s]=a.useState(null),[l,u]=a.useState(null),d=(null==i?void 0:i.domReference)||o,h=a.useRef(null),p=Za();to(()=>{d&&(h.current=d)},[d]);const m=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:l=!0,whileElementsMounted:u,open:d}=e,[h,p]=a.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,f]=a.useState(r);Ca(m,r)||f(r);const[g,y]=a.useState(null),[v,w]=a.useState(null),b=a.useCallback(e=>{e!==E.current&&(E.current=e,y(e))},[]),k=a.useCallback(e=>{e!==S.current&&(S.current=e,w(e))},[]),D=o||g,x=s||v,E=a.useRef(null),S=a.useRef(null),A=a.useRef(h),C=null!=u,T=Fa(u),R=Fa(i),F=Fa(d),I=a.useCallback(()=>{if(!E.current||!S.current)return;const e={placement:t,strategy:n,middleware:m};R.current&&(e.platform=R.current),Sa(E.current,S.current,e).then(e=>{const t=(0,c.A)((0,c.A)({},e),{},{isPositioned:!1!==F.current});P.current&&!Ca(A.current,t)&&(A.current=t,De.flushSync(()=>{p(t)}))})},[m,t,n,R,F]);Aa(()=>{!1===d&&A.current.isPositioned&&(A.current.isPositioned=!1,p(e=>(0,c.A)((0,c.A)({},e),{},{isPositioned:!1})))},[d]);const P=a.useRef(!1);Aa(()=>(P.current=!0,()=>{P.current=!1}),[]),Aa(()=>{if(D&&(E.current=D),x&&(S.current=x),D&&x){if(T.current)return T.current(D,x,I);I()}},[D,x,I,T,C]);const M=a.useMemo(()=>({reference:E,floating:S,setReference:b,setFloating:k}),[b,k]),_=a.useMemo(()=>({reference:D,floating:x}),[D,x]),N=a.useMemo(()=>{const e={position:n,left:0,top:0};if(!_.floating)return e;const t=Ra(_.floating,h.x),r=Ra(_.floating,h.y);return l?(0,c.A)((0,c.A)({},e),{},{transform:"translate("+t+"px, "+r+"px)"},Ta(_.floating)>=1.5&&{willChange:"transform"}):{position:n,left:t,top:r}},[n,l,_.floating,h.x,h.y]);return a.useMemo(()=>(0,c.A)((0,c.A)({},h),{},{update:I,refs:M,elements:_,floatingStyles:N}),[h,I,M,_,N])}((0,c.A)((0,c.A)({},e),{},{elements:(0,c.A)((0,c.A)({},i),l&&{reference:l})})),f=a.useCallback(e=>{const t=lo(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),getClientRects:()=>e.getClientRects(),contextElement:e}:e;u(t),m.refs.setReference(t)},[m.refs]),g=a.useCallback(e=>{(lo(e)||null===e)&&(h.current=e,s(e)),(lo(m.refs.reference.current)||null===m.refs.reference.current||null!==e&&!lo(e))&&m.refs.setReference(e)},[m.refs]),y=a.useMemo(()=>(0,c.A)((0,c.A)({},m.refs),{},{setReference:g,setPositionReference:f,domReference:h}),[m.refs,g,f]),v=a.useMemo(()=>(0,c.A)((0,c.A)({},m.elements),{},{domReference:d}),[m.elements,d]),w=a.useMemo(()=>(0,c.A)((0,c.A)((0,c.A)({},m),r),{},{refs:y,elements:v,nodeId:t}),[m,y,v,t,r]);return to(()=>{r.dataRef.current.floatingContext=w;const e=null==p?void 0:p.nodesRef.current.find(e=>e.id===t);e&&(e.context=w)}),a.useMemo(()=>(0,c.A)((0,c.A)({},m),{},{context:w,refs:y,elements:v}),[m,y,v,w])}var es=function(e,t){return es=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},es(e,t)};function ts(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}es(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ns=function(){return ns=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ns.apply(this,arguments)};function rs(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}"function"===typeof SuppressedError&&SuppressedError;var is,os=function(e){var t=e.showTimeSelectOnly,n=void 0!==t&&t,r=e.showTime,i=void 0!==r&&r,o=e.className,s=e.children,l=n?"Choose Time":"Choose Date".concat(i?" and Time":"");return a.createElement("div",{className:o,role:"dialog","aria-label":l,"aria-modal":"true"},s)},as=function(e){var t=e.children,n=e.onClickOutside,r=e.className,i=e.containerRef,o=e.style,s=function(e,t){var n=(0,a.useRef)(null),r=(0,a.useRef)(e);r.current=e;var i=(0,a.useCallback)(function(e){var i,o=e.composed&&e.composedPath&&e.composedPath().find(function(e){return e instanceof Node})||e.target;n.current&&!n.current.contains(o)&&(t&&o instanceof HTMLElement&&o.classList.contains(t)||null===(i=r.current)||void 0===i||i.call(r,e))},[t]);return(0,a.useEffect)(function(){return document.addEventListener("mousedown",i),function(){document.removeEventListener("mousedown",i)}},[i]),n}(n,e.ignoreClass);return a.createElement("div",{className:r,style:o,ref:function(e){s.current=e,i&&(i.current=e)}},t)};function ss(){return"undefined"!==typeof window?window:globalThis}!function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"}(is||(is={}));function ls(e){if(null==e)return new Date;var t="string"===typeof e?Ht(e):qt(e);return us(t)?t:new Date}function cs(e,t,n,r,i){void 0===i&&(i=ls());for(var o=Rs(n)||Rs(Ts()),a=0,s=Array.isArray(t)?t:[t];a<s.length;a++){var l=s[a],c=Fr(e,l,i,{locale:o,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});if(us(c)&&(!r||e===ds(c,l,n)))return c}return null}function us(e,t){return Mr(e)&&!_r(e,new Date("1/1/1800"))}function ds(e,t,n){if("en"===n)return ri(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=n?Rs(n):void 0;return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),ri(e,t,{locale:r=r||Rs(Ts()),useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function hs(e,t){var n=t.dateFormat,r=t.locale,i=Array.isArray(n)&&n.length>0?n[0]:n;return e&&ds(e,i,r)||""}function ps(e,t){var n=t.hour,r=void 0===n?0:n,i=t.minute,o=void 0===i?0:i,a=t.second;return oi(ai(si(e,void 0===a?0:a),o),r)}function ms(e){return Or(e)}function fs(e,t,n){return ar(e,{locale:Rs(t||Ts()),weekStartsOn:n})}function gs(e){return li(e)}function ys(e){return Lr(e)}function vs(e){return ci(e)}function ws(){return Or(ls())}function bs(e){return ui(e)}function ks(e){return hi(e)}function Ds(e,t){return e&&t?pi(e,t):!e&&!t}function xs(e,t){return e&&t?mi(e,t):!e&&!t}function Es(e,t){return e&&t?fi(e,t):!e&&!t}function Ss(e,t){return e&&t?gi(e,t):!e&&!t}function As(e,t){return e&&t?yi(e,t):!e&&!t}function Cs(e,t,n){var r,i=Or(t),o=ui(n);try{r=vi(e,{start:i,end:o})}catch(a){r=!1}return r}function Ts(){return ss().__localeId__}function Rs(e){if("string"===typeof e){var t=ss();return t.__localeData__?t.__localeData__[e]:void 0}return e}function Fs(e,t){return ds(bi(ls(),e),"LLLL",t)}function Is(e,t){return ds(bi(ls(),e),"LLL",t)}function Ps(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.maxDate,o=n.excludeDates,a=n.excludeDateIntervals,s=n.includeDates,l=n.includeDateIntervals,c=n.filterDate;return Us(e,{minDate:r,maxDate:i})||o&&o.some(function(t){return t instanceof Date?Ss(e,t):Ss(e,t.date)})||a&&a.some(function(t){var n=t.start,r=t.end;return vi(e,{start:n,end:r})})||s&&!s.some(function(t){return Ss(e,t)})||l&&!l.some(function(t){var n=t.start,r=t.end;return vi(e,{start:n,end:r})})||c&&!c(ls(e))||!1}function Ms(e,t){var n=void 0===t?{}:t,r=n.excludeDates,i=n.excludeDateIntervals;return i&&i.length>0?i.some(function(t){var n=t.start,r=t.end;return vi(e,{start:n,end:r})}):r&&r.some(function(t){var n;return t instanceof Date?Ss(e,t):Ss(e,null!==(n=t.date)&&void 0!==n?n:new Date)})||!1}function _s(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.maxDate,o=n.excludeDates,a=n.includeDates,s=n.filterDate;return Us(e,{minDate:r?li(r):void 0,maxDate:i?hi(i):void 0})||(null===o||void 0===o?void 0:o.some(function(t){return xs(e,t instanceof Date?t:t.date)}))||a&&!a.some(function(t){return xs(e,t)})||s&&!s(ls(e))||!1}function Ns(e,t,n,r){var i=Di(e),o=xi(e),a=Di(t),s=xi(t),l=Di(r);return i===a&&i===l?o<=n&&n<=s:i<a&&(l===i&&o<=n||l===a&&s>=n||l<a&&l>i)}function Os(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.maxDate,o=n.excludeDates,a=n.includeDates;return Us(e,{minDate:r,maxDate:i})||o&&o.some(function(t){return xs(t instanceof Date?t:t.date,e)})||a&&!a.some(function(t){return xs(t,e)})||!1}function js(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.maxDate,o=n.excludeDates,a=n.includeDates,s=n.filterDate;return Us(e,{minDate:r,maxDate:i})||(null===o||void 0===o?void 0:o.some(function(t){return Es(e,t instanceof Date?t:t.date)}))||a&&!a.some(function(t){return Es(e,t)})||s&&!s(ls(e))||!1}function Ls(e,t,n){if(!t||!n)return!1;if(!Mr(t)||!Mr(n))return!1;var r=Di(t),i=Di(n);return r<=e&&i>=e}function Bs(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.maxDate,o=n.excludeDates,a=n.includeDates,s=n.filterDate,l=new Date(e,0,1);return Us(l,{minDate:r?Lr(r):void 0,maxDate:i?Ei(i):void 0})||(null===o||void 0===o?void 0:o.some(function(e){return Ds(l,e instanceof Date?e:e.date)}))||a&&!a.some(function(e){return Ds(l,e)})||s&&!s(ls(l))||!1}function Ws(e,t,n,r){var i=Di(e),o=Si(e),a=Di(t),s=Si(t),l=Di(r);return i===a&&i===l?o<=n&&n<=s:i<a&&(l===i&&o<=n||l===a&&s>=n||l<a&&l>i)}function Us(e,t){var n,r=void 0===t?{}:t,i=r.minDate,o=r.maxDate;return null!==(n=i&&jr(e,i)<0||o&&jr(e,o)>0)&&void 0!==n&&n}function qs(e,t){return t.some(function(t){return Ai(t)===Ai(e)&&Ci(t)===Ci(e)&&Ti(t)===Ti(e)})}function Hs(e,t){var n=void 0===t?{}:t,r=n.excludeTimes,i=n.includeTimes,o=n.filterTime;return r&&qs(e,r)||i&&!qs(e,i)||o&&!o(e)||!1}function zs(e,t){var n=t.minTime,r=t.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var i=ls();i=si(i=ai(i=oi(i,Ai(e)),Ci(e)),Ti(e));var o=ls();o=si(o=ai(o=oi(o,Ai(n)),Ci(n)),Ti(n));var a,s=ls();s=si(s=ai(s=oi(s,Ai(r)),Ci(r)),Ti(r));try{a=!vi(i,{start:o,end:s})}catch(l){a=!1}return a}function Vs(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.includeDates,o=Fi(e,1);return r&&Ii(r,o)>0||i&&i.every(function(e){return Ii(e,o)>0})||!1}function Ks(e,t){var n=void 0===t?{}:t,r=n.maxDate,i=n.includeDates,o=Ri(e,1);return r&&Ii(o,r)>0||i&&i.every(function(e){return Ii(o,e)>0})||!1}function Ys(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.includeDates,o=Oi(e,1);return r&&ji(r,o)>0||i&&i.every(function(e){return ji(e,o)>0})||!1}function Gs(e,t){var n=void 0===t?{}:t,r=n.maxDate,i=n.includeDates,o=Ni(e,1);return r&&ji(o,r)>0||i&&i.every(function(e){return ji(o,e)>0})||!1}function Qs(e){var t=e.minDate,n=e.includeDates;return n&&t?Li(n.filter(function(e){return jr(e,t)>=0})):n?Li(n):t}function Xs(e){var t=e.maxDate,n=e.includeDates;return n&&t?Bi(n.filter(function(e){return jr(e,t)<=0})):n?Bi(n):t}function Zs(e,t){var n;void 0===e&&(e=[]),void 0===t&&(t="react-datepicker__day--highlighted");for(var r=new Map,i=0,o=e.length;i<o;i++){var a=e[i];if(Pr(a)){var s=ds(a,"MM.dd.yyyy");(p=r.get(s)||[]).includes(t)||(p.push(t),r.set(s,p))}else if("object"===typeof a){var l=null!==(n=Object.keys(a)[0])&&void 0!==n?n:"",c=a[l];if("string"===typeof l&&Array.isArray(c))for(var u=0,d=c.length;u<d;u++){var h=c[u];if(h){var p;s=ds(h,"MM.dd.yyyy");(p=r.get(s)||[]).includes(l)||(p.push(l),r.set(s,p))}}}}return r}function Js(e,t){void 0===e&&(e=[]),void 0===t&&(t="react-datepicker__day--holidays");var n=new Map;return e.forEach(function(e){var r=e.date,i=e.holidayName;if(Pr(r)){var o=ds(r,"MM.dd.yyyy"),a=n.get(o)||{className:"",holidayNames:[]};if(!("className"in a)||a.className!==t||(s=a.holidayNames,l=[i],s.length!==l.length||!s.every(function(e,t){return e===l[t]}))){var s,l;a.className=t;var c=a.holidayNames;a.holidayNames=c?rs(rs([],c,!0),[i],!1):[i],n.set(o,a)}}}),n}function $s(e,t,n,r,i){for(var o=i.length,a=[],s=0;s<o;s++){var l=e,c=i[s];c&&(l=Hi(l=qi(l=Ui(l,Ai(c)),Ci(c)),Ti(c)));var u=qi(e,(n+1)*r);zi(l,t)&&_r(l,u)&&void 0!=c&&a.push(c)}return a}function el(e){return e<10?"0".concat(e):"".concat(e)}function tl(e,t){void 0===t&&(t=12);var n=Math.ceil(Di(e)/t)*t;return{startPeriod:n-(t-1),endPeriod:n}}function nl(e){var t=e.getSeconds(),n=e.getMilliseconds();return qt(e.getTime()-1e3*t-n)}function rl(e){if(!Pr(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function il(e,t){if(!Pr(e)||!Pr(t))throw new Error("Invalid date received");return _r(rl(e),rl(t))}function ol(e){return e.key===is.Space}var al,sl=function(e){function t(t){var n=e.call(this,t)||this;return n.inputRef=a.createRef(),n.onTimeChange=function(e){var t,r;n.setState({time:e});var i=n.props.date,o=i instanceof Date&&!isNaN(+i)?i:new Date;if(null===e||void 0===e?void 0:e.includes(":")){var a=e.split(":"),s=a[0],l=a[1];o.setHours(Number(s)),o.setMinutes(Number(l))}null===(r=(t=n.props).onChange)||void 0===r||r.call(t,o)},n.renderTimeInput=function(){var e=n.state.time,t=n.props,r=t.date,i=t.timeString,o=t.customTimeInput;return o?(0,a.cloneElement)(o,{date:r,value:e,onChange:n.onTimeChange}):a.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var e;null===(e=n.inputRef.current)||void 0===e||e.focus()},required:!0,value:e,onChange:function(e){n.onTimeChange(e.target.value||i)}})},n.state={time:n.props.timeString},n}return ts(t,e),t.getDerivedStateFromProps=function(e,t){return e.timeString!==t.time?{time:e.timeString}:null},t.prototype.render=function(){return a.createElement("div",{className:"react-datepicker__input-time-container"},a.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),a.createElement("div",{className:"react-datepicker-time__input-container"},a.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(a.Component),ll=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dayEl=(0,a.createRef)(),t.handleClick=function(e){!t.isDisabled()&&t.props.onClick&&t.props.onClick(e)},t.handleMouseEnter=function(e){!t.isDisabled()&&t.props.onMouseEnter&&t.props.onMouseEnter(e)},t.handleOnKeyDown=function(e){var n,r;e.key===is.Space&&(e.preventDefault(),e.key=is.Enter),null===(r=(n=t.props).handleOnKeyDown)||void 0===r||r.call(n,e)},t.isSameDay=function(e){return Ss(t.props.day,e)},t.isKeyboardSelected=function(){var e;if(t.props.disabledKeyboardNavigation)return!1;var n=t.props.selectsMultiple?null===(e=t.props.selectedDates)||void 0===e?void 0:e.some(function(e){return t.isSameDayOrWeek(e)}):t.isSameDayOrWeek(t.props.selected),r=t.props.preSelection&&t.isDisabled(t.props.preSelection);return!n&&t.isSameDayOrWeek(t.props.preSelection)&&!r},t.isDisabled=function(e){return void 0===e&&(e=t.props.day),Ps(e,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.isExcluded=function(){return Ms(t.props.day,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.isStartOfWeek=function(){return Ss(t.props.day,fs(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameWeek=function(e){return t.props.showWeekPicker&&Ss(e,fs(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameDayOrWeek=function(e){return t.isSameDay(e)||t.isSameWeek(e)},t.getHighLightedClass=function(){var e=t.props,n=e.day,r=e.highlightDates;if(!r)return!1;var i=ds(n,"MM.dd.yyyy");return r.get(i)},t.getHolidaysClass=function(){var e,n=t.props,r=n.day,i=n.holidays;if(!i)return[void 0];var o=ds(r,"MM.dd.yyyy");return i.has(o)?[null===(e=i.get(o))||void 0===e?void 0:e.className]:[void 0]},t.isInRange=function(){var e=t.props,n=e.day,r=e.startDate,i=e.endDate;return!(!r||!i)&&Cs(n,r,i)},t.isInSelectingRange=function(){var e,n=t.props,r=n.day,i=n.selectsStart,o=n.selectsEnd,a=n.selectsRange,s=n.selectsDisabledDaysInRange,l=n.startDate,c=n.swapRange,u=n.endDate,d=null!==(e=t.props.selectingDate)&&void 0!==e?e:t.props.preSelection;if(!(i||o||a)||!d||!s&&t.isDisabled())return!1;if(i&&u&&(_r(d,u)||As(d,u)))return Cs(r,d,u);if(o&&l&&(zi(d,l)||As(d,l)))return Cs(r,l,d);if(a&&l&&!u){if(As(d,l))return Cs(r,l,d);if(zi(d,l))return Cs(r,l,d);if(c&&_r(d,l))return Cs(r,d,l)}return!1},t.isSelectingRangeStart=function(){var e;if(!t.isInSelectingRange())return!1;var n=t.props,r=n.day,i=n.startDate,o=n.selectsStart,a=n.swapRange,s=n.selectsRange,l=null!==(e=t.props.selectingDate)&&void 0!==e?e:t.props.preSelection;return Ss(r,o||s&&a&&i&&l&&_r(l,i)?l:i)},t.isSelectingRangeEnd=function(){var e;if(!t.isInSelectingRange())return!1;var n=t.props,r=n.day,i=n.endDate,o=n.selectsEnd,a=n.selectsRange,s=n.swapRange,l=n.startDate,c=null!==(e=t.props.selectingDate)&&void 0!==e?e:t.props.preSelection;return Ss(r,o?c:a&&s&&l&&c?_r(c,l)?l:c:a?c:i)},t.isRangeStart=function(){var e=t.props,n=e.day,r=e.startDate,i=e.endDate;return!(!r||!i)&&Ss(r,n)},t.isRangeEnd=function(){var e=t.props,n=e.day,r=e.startDate,i=e.endDate;return!(!r||!i)&&Ss(i,n)},t.isWeekend=function(){var e=Vi(t.props.day);return 0===e||6===e},t.isAfterMonth=function(){return void 0!==t.props.month&&(t.props.month+1)%12===xi(t.props.day)},t.isBeforeMonth=function(){return void 0!==t.props.month&&(xi(t.props.day)+1)%12===t.props.month},t.isCurrentDay=function(){return t.isSameDay(ls())},t.isSelected=function(){var e;return t.props.selectsMultiple?null===(e=t.props.selectedDates)||void 0===e?void 0:e.some(function(e){return t.isSameDayOrWeek(e)}):t.isSameDayOrWeek(t.props.selected)},t.getClassNames=function(e){var n;return Ot("react-datepicker__day",t.props.dayClassName?t.props.dayClassName(e):void 0,"react-datepicker__day--"+ds(t.props.day,"ddd",n),{"react-datepicker__day--disabled":t.isDisabled(),"react-datepicker__day--excluded":t.isExcluded(),"react-datepicker__day--selected":t.isSelected(),"react-datepicker__day--keyboard-selected":t.isKeyboardSelected(),"react-datepicker__day--range-start":t.isRangeStart(),"react-datepicker__day--range-end":t.isRangeEnd(),"react-datepicker__day--in-range":t.isInRange(),"react-datepicker__day--in-selecting-range":t.isInSelectingRange(),"react-datepicker__day--selecting-range-start":t.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":t.isSelectingRangeEnd(),"react-datepicker__day--today":t.isCurrentDay(),"react-datepicker__day--weekend":t.isWeekend(),"react-datepicker__day--outside-month":t.isAfterMonth()||t.isBeforeMonth()},t.getHighLightedClass(),t.getHolidaysClass())},t.getAriaLabel=function(){var e=t.props,n=e.day,r=e.ariaLabelPrefixWhenEnabled,i=void 0===r?"Choose":r,o=e.ariaLabelPrefixWhenDisabled,a=void 0===o?"Not available":o,s=t.isDisabled()||t.isExcluded()?a:i;return"".concat(s," ").concat(ds(n,"PPPP",t.props.locale))},t.getTitle=function(){var e=t.props,n=e.day,r=e.holidays,i=void 0===r?new Map:r,o=e.excludeDates,a=ds(n,"MM.dd.yyyy"),s=[];return i.has(a)&&s.push.apply(s,i.get(a).holidayNames),t.isExcluded()&&s.push(null===o||void 0===o?void 0:o.filter(function(e){return e instanceof Date?Ss(e,n):Ss(null===e||void 0===e?void 0:e.date,n)}).map(function(e){if(!(e instanceof Date))return null===e||void 0===e?void 0:e.message})),s.join(", ")},t.getTabIndex=function(){var e=t.props.selected,n=t.props.preSelection;return(!t.props.showWeekPicker||!t.props.showWeekNumber&&t.isStartOfWeek())&&(t.isKeyboardSelected()||t.isSameDay(e)&&Ss(n,e))?0:-1},t.handleFocusDay=function(){var e;t.shouldFocusDay()&&(null===(e=t.dayEl.current)||void 0===e||e.focus({preventScroll:!0}))},t.renderDayContents=function(){return t.props.monthShowsDuplicateDaysEnd&&t.isAfterMonth()||t.props.monthShowsDuplicateDaysStart&&t.isBeforeMonth()?null:t.props.renderDayContents?t.props.renderDayContents(Ki(t.props.day),t.props.day):Ki(t.props.day)},t.render=function(){return a.createElement("div",{ref:t.dayEl,className:t.getClassNames(t.props.day),onKeyDown:t.handleOnKeyDown,onClick:t.handleClick,onMouseEnter:t.props.usePointerEvent?void 0:t.handleMouseEnter,onPointerEnter:t.props.usePointerEvent?t.handleMouseEnter:void 0,tabIndex:t.getTabIndex(),"aria-label":t.getAriaLabel(),role:"gridcell",title:t.getTitle(),"aria-disabled":t.isDisabled(),"aria-current":t.isCurrentDay()?"date":void 0,"aria-selected":t.isSelected()||t.isInRange()},t.renderDayContents(),""!==t.getTitle()&&a.createElement("span",{className:"overlay"},t.getTitle()))},t}return ts(t,e),t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var e=!1;return 0===this.getTabIndex()&&this.isSameDay(this.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(e=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(e=!1),this.isDayActiveElement()&&(e=!0),this.isDuplicateDay()&&(e=!1)),e},t.prototype.isDayActiveElement=function(){var e,t,n;return(null===(t=null===(e=this.props.containerRef)||void 0===e?void 0:e.current)||void 0===t?void 0:t.contains(document.activeElement))&&(null===(n=document.activeElement)||void 0===n?void 0:n.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(a.Component),cl=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.weekNumberEl=(0,a.createRef)(),t.handleClick=function(e){t.props.onClick&&t.props.onClick(e)},t.handleOnKeyDown=function(e){var n,r;e.key===is.Space&&(e.preventDefault(),e.key=is.Enter),null===(r=(n=t.props).handleOnKeyDown)||void 0===r||r.call(n,e)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!Ss(t.props.date,t.props.selected)&&Ss(t.props.date,t.props.preSelection)},t.getTabIndex=function(){return t.props.showWeekPicker&&t.props.showWeekNumber&&(t.isKeyboardSelected()||Ss(t.props.date,t.props.selected)&&Ss(t.props.preSelection,t.props.selected))?0:-1},t.handleFocusWeekNumber=function(e){var n=!1;0===t.getTabIndex()&&!(null===e||void 0===e?void 0:e.isInputFocused)&&Ss(t.props.date,t.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(n=!0),t.props.inline&&!t.props.shouldFocusDayInline&&(n=!1),t.props.containerRef&&t.props.containerRef.current&&t.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(n=!0)),n&&t.weekNumberEl.current&&t.weekNumberEl.current.focus({preventScroll:!0})},t}return ts(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(e){this.handleFocusWeekNumber(e)},t.prototype.render=function(){var e=this.props,n=e.weekNumber,r=e.isWeekDisabled,i=e.ariaLabelPrefix,o=void 0===i?t.defaultProps.ariaLabelPrefix:i,s=e.onClick,l={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!s&&!r,"react-datepicker__week-number--selected":!!s&&Ss(this.props.date,this.props.selected)};return a.createElement("div",{ref:this.weekNumberEl,className:Ot(l),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex(),role:"gridcell"},n)},t}(a.Component),ul=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.isDisabled=function(e){return Ps(e,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.handleDayClick=function(e,t){n.props.onDayClick&&n.props.onDayClick(e,t)},n.handleDayMouseEnter=function(e){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(e)},n.handleWeekClick=function(e,r,i){for(var o,a,s,l=new Date(e),c=0;c<7;c++){var u=new Date(e);if(u.setDate(u.getDate()+c),!n.isDisabled(u)){l=u;break}}"function"===typeof n.props.onWeekSelect&&n.props.onWeekSelect(l,r,i),n.props.showWeekPicker&&n.handleDayClick(l,i),(null!==(o=n.props.shouldCloseOnSelect)&&void 0!==o?o:t.defaultProps.shouldCloseOnSelect)&&(null===(s=(a=n.props).setOpen)||void 0===s||s.call(a,!1))},n.formatWeekNumber=function(e){return n.props.formatWeekNumber?n.props.formatWeekNumber(e):function(e){return mr(e)}(e)},n.isWeekDisabled=function(){for(var e=n.startOfWeek(),t=vr(e,6),r=new Date(e);r<=t;){if(!n.isDisabled(r))return!1;r=vr(r,1)}return!0},n.renderDays=function(){var e=n.startOfWeek(),r=[],i=n.formatWeekNumber(e);if(n.props.showWeekNumber){var o=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,e,i):void 0;r.push(a.createElement(cl,ns({key:"W"},t.defaultProps,n.props,{weekNumber:i,isWeekDisabled:n.isWeekDisabled(),date:e,onClick:o})))}return r.concat([0,1,2,3,4,5,6].map(function(r){var i=vr(e,r);return a.createElement(ll,ns({},t.defaultProps,n.props,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:i.valueOf(),day:i,onClick:n.handleDayClick.bind(n,i),onMouseEnter:n.handleDayMouseEnter.bind(n,i)}))}))},n.startOfWeek=function(){return fs(n.props.day,n.props.locale,n.props.calendarStartDay)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!Ss(n.startOfWeek(),n.props.selected)&&Ss(n.startOfWeek(),n.props.preSelection)},n}return ts(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e={"react-datepicker__week":!0,"react-datepicker__week--selected":Ss(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()},t=this.props.weekClassName?this.props.weekClassName(this.startOfWeek()):void 0;return a.createElement("div",{className:Ot(e,t),role:"row"},this.renderDays())},t}(a.Component),dl="two_columns",hl="three_columns",pl="four_columns",ml=((al={})[dl]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},al[hl]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},al[pl]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},al);function fl(e,t){return e?pl:t?dl:hl}var gl=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MONTH_REFS=rs([],Array(12),!0).map(function(){return(0,a.createRef)()}),t.QUARTER_REFS=rs([],Array(4),!0).map(function(){return(0,a.createRef)()}),t.isDisabled=function(e){return Ps(e,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.isExcluded=function(e){return Ms(e,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.handleDayClick=function(e,n){var r,i;null===(i=(r=t.props).onDayClick)||void 0===i||i.call(r,e,n,t.props.orderInDisplay)},t.handleDayMouseEnter=function(e){var n,r;null===(r=(n=t.props).onDayMouseEnter)||void 0===r||r.call(n,e)},t.handleMouseLeave=function(){var e,n;null===(n=(e=t.props).onMouseLeave)||void 0===n||n.call(e)},t.isRangeStartMonth=function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&xs(bi(r,e),i)},t.isRangeStartQuarter=function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&Es(ki(r,e),i)},t.isRangeEndMonth=function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&xs(bi(r,e),o)},t.isRangeEndQuarter=function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&Es(ki(r,e),o)},t.isInSelectingRangeMonth=function(e){var n,r=t.props,i=r.day,o=r.selectsStart,a=r.selectsEnd,s=r.selectsRange,l=r.startDate,c=r.endDate,u=null!==(n=t.props.selectingDate)&&void 0!==n?n:t.props.preSelection;return!(!(o||a||s)||!u)&&(o&&c?Ns(u,c,e,i):(a&&l||!(!s||!l||c))&&Ns(l,u,e,i))},t.isSelectingMonthRangeStart=function(e){var n;if(!t.isInSelectingRangeMonth(e))return!1;var r=t.props,i=r.day,o=r.startDate,a=r.selectsStart,s=bi(i,e),l=null!==(n=t.props.selectingDate)&&void 0!==n?n:t.props.preSelection;return xs(s,a?l:o)},t.isSelectingMonthRangeEnd=function(e){var n;if(!t.isInSelectingRangeMonth(e))return!1;var r=t.props,i=r.day,o=r.endDate,a=r.selectsEnd,s=r.selectsRange,l=bi(i,e),c=null!==(n=t.props.selectingDate)&&void 0!==n?n:t.props.preSelection;return xs(l,a||s?c:o)},t.isInSelectingRangeQuarter=function(e){var n,r=t.props,i=r.day,o=r.selectsStart,a=r.selectsEnd,s=r.selectsRange,l=r.startDate,c=r.endDate,u=null!==(n=t.props.selectingDate)&&void 0!==n?n:t.props.preSelection;return!(!(o||a||s)||!u)&&(o&&c?Ws(u,c,e,i):(a&&l||!(!s||!l||c))&&Ws(l,u,e,i))},t.isWeekInMonth=function(e){var n=t.props.day,r=vr(e,6);return xs(e,n)||xs(r,n)},t.isCurrentMonth=function(e,t){return Di(e)===Di(ls())&&t===xi(ls())},t.isCurrentQuarter=function(e,t){return Di(e)===Di(ls())&&t===Si(ls())},t.isSelectedMonth=function(e,t,n){return xi(n)===t&&Di(e)===Di(n)},t.isSelectMonthInList=function(e,n,r){return r.some(function(r){return t.isSelectedMonth(e,n,r)})},t.isSelectedQuarter=function(e,t,n){return Si(e)===t&&Di(e)===Di(n)},t.isMonthSelected=function(){var e=t.props,n=e.day,r=e.selected,i=e.selectedDates,o=e.selectsMultiple,a=xi(n);return o?null===i||void 0===i?void 0:i.some(function(e){return t.isSelectedMonth(n,a,e)}):!!r&&t.isSelectedMonth(n,a,r)},t.renderWeeks=function(){for(var e=[],n=t.props.fixedHeight,r=0,i=!1,o=fs(gs(t.props.day),t.props.locale,t.props.calendarStartDay),s=t.props.selected?function(e){return t.props.showWeekPicker?fs(e,t.props.locale,t.props.calendarStartDay):t.props.selected}(t.props.selected):void 0,l=t.props.preSelection?function(e){return t.props.showWeekPicker?fs(e,t.props.locale,t.props.calendarStartDay):t.props.preSelection}(t.props.preSelection):void 0;e.push(a.createElement(ul,ns({},t.props,{ariaLabelPrefix:t.props.weekAriaLabelPrefix,key:r,day:o,month:xi(t.props.day),onDayClick:t.handleDayClick,onDayMouseEnter:t.handleDayMouseEnter,selected:s,preSelection:l,showWeekNumber:t.props.showWeekNumbers}))),!i;){r++,o=Yi(o,1);var c=n&&r>=6,u=!n&&!t.isWeekInMonth(o);if(c||u){if(!t.props.peekNextMonth)break;i=!0}}return e},t.onMonthClick=function(e,n){var r=t.isMonthDisabledForLabelDate(n),i=r.isDisabled,o=r.labelDate;i||t.handleDayClick(gs(o),e)},t.onMonthMouseEnter=function(e){var n=t.isMonthDisabledForLabelDate(e),r=n.isDisabled,i=n.labelDate;r||t.handleDayMouseEnter(gs(i))},t.handleMonthNavigation=function(e,n){var r,i,o,a;null===(i=(r=t.props).setPreSelection)||void 0===i||i.call(r,n),null===(a=null===(o=t.MONTH_REFS[e])||void 0===o?void 0:o.current)||void 0===a||a.focus()},t.handleKeyboardNavigation=function(e,n,r){var i,o=t.props,a=o.selected,s=o.preSelection,l=o.setPreSelection,c=o.minDate,u=o.maxDate,d=o.showFourColumnMonthYearPicker,h=o.showTwoColumnMonthYearPicker;if(s){var p=fl(d,h),m=t.getVerticalOffset(p),f=null===(i=ml[p])||void 0===i?void 0:i.grid,g=function(e,t,n){var r,i,o=t,a=n;switch(e){case is.ArrowRight:o=Ri(t,1),a=11===n?0:n+1;break;case is.ArrowLeft:o=Fi(t,1),a=0===n?11:n-1;break;case is.ArrowUp:o=Fi(t,m),a=(null===(r=null===f||void 0===f?void 0:f[0])||void 0===r?void 0:r.includes(n))?n+12-m:n-m;break;case is.ArrowDown:o=Ri(t,m),a=(null===(i=null===f||void 0===f?void 0:f[f.length-1])||void 0===i?void 0:i.includes(n))?n-12+m:n+m}return{newCalculatedDate:o,newCalculatedMonth:a}};if(n!==is.Enter){var y=function(e,n,r){for(var i=e,o=!1,a=0,s=g(i,n,r),l=s.newCalculatedDate,d=s.newCalculatedMonth;!o;){if(a>=40){l=n,d=r;break}var h;if(c&&l<c)i=is.ArrowRight,l=(h=g(i,l,d)).newCalculatedDate,d=h.newCalculatedMonth;if(u&&l>u)i=is.ArrowLeft,l=(h=g(i,l,d)).newCalculatedDate,d=h.newCalculatedMonth;if(Os(l,t.props))l=(h=g(i,l,d)).newCalculatedDate,d=h.newCalculatedMonth;else o=!0;a++}return{newCalculatedDate:l,newCalculatedMonth:d}}(n,s,r),v=y.newCalculatedDate,w=y.newCalculatedMonth;switch(n){case is.ArrowRight:case is.ArrowLeft:case is.ArrowUp:case is.ArrowDown:t.handleMonthNavigation(w,v)}}else t.isMonthDisabled(r)||(t.onMonthClick(e,r),null===l||void 0===l||l(a))}},t.getVerticalOffset=function(e){var t,n;return null!==(n=null===(t=ml[e])||void 0===t?void 0:t.verticalNavigationOffset)&&void 0!==n?n:0},t.onMonthKeyDown=function(e,n){var r=t.props,i=r.disabledKeyboardNavigation,o=r.handleOnMonthKeyDown,a=e.key;a!==is.Tab&&e.preventDefault(),i||t.handleKeyboardNavigation(e,a,n),o&&o(e)},t.onQuarterClick=function(e,n){var r=ki(t.props.day,n);js(r,t.props)||t.handleDayClick(vs(r),e)},t.onQuarterMouseEnter=function(e){var n=ki(t.props.day,e);js(n,t.props)||t.handleDayMouseEnter(vs(n))},t.handleQuarterNavigation=function(e,n){var r,i,o,a;t.isDisabled(n)||t.isExcluded(n)||(null===(i=(r=t.props).setPreSelection)||void 0===i||i.call(r,n),null===(a=null===(o=t.QUARTER_REFS[e-1])||void 0===o?void 0:o.current)||void 0===a||a.focus())},t.onQuarterKeyDown=function(e,n){var r,i,o=e.key;if(!t.props.disabledKeyboardNavigation)switch(o){case is.Enter:t.onQuarterClick(e,n),null===(i=(r=t.props).setPreSelection)||void 0===i||i.call(r,t.props.selected);break;case is.ArrowRight:if(!t.props.preSelection)break;t.handleQuarterNavigation(4===n?1:n+1,Pi(t.props.preSelection,1));break;case is.ArrowLeft:if(!t.props.preSelection)break;t.handleQuarterNavigation(1===n?4:n-1,Mi(t.props.preSelection,1))}},t.isMonthDisabledForLabelDate=function(e){var n,r=t.props,i=r.day,o=r.minDate,a=r.maxDate,s=r.excludeDates,l=r.includeDates,c=bi(i,e);return{isDisabled:null!==(n=(o||a||s||l)&&_s(c,t.props))&&void 0!==n&&n,labelDate:c}},t.isMonthDisabled=function(e){return t.isMonthDisabledForLabelDate(e).isDisabled},t.getMonthClassNames=function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate,a=n.preSelection,s=n.monthClassName,l=s?s(bi(r,e)):void 0,c=t.getSelection();return Ot("react-datepicker__month-text","react-datepicker__month-".concat(e),l,{"react-datepicker__month-text--disabled":t.isMonthDisabled(e),"react-datepicker__month-text--selected":c?t.isSelectMonthInList(r,e,c):void 0,"react-datepicker__month-text--keyboard-selected":!t.props.disabledKeyboardNavigation&&a&&t.isSelectedMonth(r,e,a)&&!t.isMonthSelected()&&!t.isMonthDisabled(e),"react-datepicker__month-text--in-selecting-range":t.isInSelectingRangeMonth(e),"react-datepicker__month-text--in-range":i&&o?Ns(i,o,e,r):void 0,"react-datepicker__month-text--range-start":t.isRangeStartMonth(e),"react-datepicker__month-text--range-end":t.isRangeEndMonth(e),"react-datepicker__month-text--selecting-range-start":t.isSelectingMonthRangeStart(e),"react-datepicker__month-text--selecting-range-end":t.isSelectingMonthRangeEnd(e),"react-datepicker__month-text--today":t.isCurrentMonth(r,e)})},t.getTabIndex=function(e){if(null==t.props.preSelection)return"-1";var n=xi(t.props.preSelection),r=t.isMonthDisabledForLabelDate(n).isDisabled;return e!==n||r||t.props.disabledKeyboardNavigation?"-1":"0"},t.getQuarterTabIndex=function(e){if(null==t.props.preSelection)return"-1";var n=Si(t.props.preSelection),r=js(t.props.day,t.props);return e!==n||r||t.props.disabledKeyboardNavigation?"-1":"0"},t.getAriaLabel=function(e){var n=t.props,r=n.chooseDayAriaLabelPrefix,i=void 0===r?"Choose":r,o=n.disabledDayAriaLabelPrefix,a=void 0===o?"Not available":o,s=n.day,l=n.locale,c=bi(s,e),u=t.isDisabled(c)||t.isExcluded(c)?a:i;return"".concat(u," ").concat(ds(c,"MMMM yyyy",l))},t.getQuarterClassNames=function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate,a=n.selected,s=n.minDate,l=n.maxDate,c=n.excludeDates,u=n.includeDates,d=n.filterDate,h=n.preSelection,p=n.disabledKeyboardNavigation,m=(s||l||c||u||d)&&js(ki(r,e),t.props);return Ot("react-datepicker__quarter-text","react-datepicker__quarter-".concat(e),{"react-datepicker__quarter-text--disabled":m,"react-datepicker__quarter-text--selected":a?t.isSelectedQuarter(r,e,a):void 0,"react-datepicker__quarter-text--keyboard-selected":!p&&h&&t.isSelectedQuarter(r,e,h)&&!m,"react-datepicker__quarter-text--in-selecting-range":t.isInSelectingRangeQuarter(e),"react-datepicker__quarter-text--in-range":i&&o?Ws(i,o,e,r):void 0,"react-datepicker__quarter-text--range-start":t.isRangeStartQuarter(e),"react-datepicker__quarter-text--range-end":t.isRangeEndQuarter(e),"react-datepicker__quarter-text--today":t.isCurrentQuarter(r,e)})},t.getMonthContent=function(e){var n=t.props,r=n.showFullMonthYearPicker,i=n.renderMonthContent,o=n.locale,a=n.day,s=Is(e,o),l=Fs(e,o);return i?i(e,s,l,a):r?l:s},t.getQuarterContent=function(e){var n,r=t.props,i=r.renderQuarterContent,o=function(e,t){return ds(ki(ls(),e),"QQQ",t)}(e,r.locale);return null!==(n=null===i||void 0===i?void 0:i(e,o))&&void 0!==n?n:o},t.renderMonths=function(){var e,n=t.props,r=n.showTwoColumnMonthYearPicker,i=n.showFourColumnMonthYearPicker,o=n.day,s=n.selected,l=null===(e=ml[fl(i,r)])||void 0===e?void 0:e.grid;return null===l||void 0===l?void 0:l.map(function(e,n){return a.createElement("div",{className:"react-datepicker__month-wrapper",key:n},e.map(function(e,n){return a.createElement("div",{ref:t.MONTH_REFS[e],key:n,onClick:function(n){t.onMonthClick(n,e)},onKeyDown:function(n){ol(n)&&(n.preventDefault(),n.key=is.Enter),t.onMonthKeyDown(n,e)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onMonthMouseEnter(e)},onPointerEnter:t.props.usePointerEvent?function(){return t.onMonthMouseEnter(e)}:void 0,tabIndex:Number(t.getTabIndex(e)),className:t.getMonthClassNames(e),"aria-disabled":t.isMonthDisabled(e),role:"option","aria-label":t.getAriaLabel(e),"aria-current":t.isCurrentMonth(o,e)?"date":void 0,"aria-selected":s?t.isSelectedMonth(o,e,s):void 0},t.getMonthContent(e))}))})},t.renderQuarters=function(){var e=t.props,n=e.day,r=e.selected;return a.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map(function(e,i){return a.createElement("div",{key:i,ref:t.QUARTER_REFS[i],role:"option",onClick:function(n){t.onQuarterClick(n,e)},onKeyDown:function(n){t.onQuarterKeyDown(n,e)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onQuarterMouseEnter(e)},onPointerEnter:t.props.usePointerEvent?function(){return t.onQuarterMouseEnter(e)}:void 0,className:t.getQuarterClassNames(e),"aria-selected":r?t.isSelectedQuarter(n,e,r):void 0,tabIndex:Number(t.getQuarterTabIndex(e)),"aria-current":t.isCurrentQuarter(n,e)?"date":void 0},t.getQuarterContent(e))}))},t.getClassNames=function(){var e=t.props,n=e.selectingDate,r=e.selectsStart,i=e.selectsEnd;return Ot("react-datepicker__month",{"react-datepicker__month--selecting-range":n&&(r||i)},{"react-datepicker__monthPicker":e.showMonthYearPicker},{"react-datepicker__quarterPicker":e.showQuarterYearPicker},{"react-datepicker__weekPicker":e.showWeekPicker})},t}return ts(t,e),t.prototype.getSelection=function(){var e=this.props,t=e.selected,n=e.selectedDates;return e.selectsMultiple?n:t?[t]:void 0},t.prototype.render=function(){var e=this.props,t=e.showMonthYearPicker,n=e.showQuarterYearPicker,r=e.day,i=e.ariaLabelPrefix,o=void 0===i?"Month ":i,s=o?o.trim()+" ":"";return t||n?a.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(s).concat(ds(r,"MMMM, yyyy",this.props.locale)),role:"listbox"},t?this.renderMonths():this.renderQuarters()):a.createElement("div",{role:"table"},this.props.dayNamesHeader&&a.createElement("div",{role:"rowgroup"},this.props.dayNamesHeader),a.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(s).concat(ds(r,"MMMM, yyyy",this.props.locale)),role:"rowgroup"},this.renderWeeks()))},t}(a.Component),yl=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.monthOptionButtonsRef={},t.isSelectedMonth=function(e){return t.props.month===e},t.handleOptionKeyDown=function(e,n){var r;switch(n.key){case"Enter":n.preventDefault(),t.onChange(e);break;case"Escape":n.preventDefault(),t.props.onCancel();break;case"ArrowUp":case"ArrowDown":n.preventDefault();var i=(e+("ArrowUp"===n.key?-1:1)+t.props.monthNames.length)%t.props.monthNames.length;null===(r=t.monthOptionButtonsRef[i])||void 0===r||r.focus()}},t.renderOptions=function(){return t.monthOptionButtonsRef={},t.props.monthNames.map(function(e,n){return a.createElement("div",{ref:function(e){t.monthOptionButtonsRef[n]=e,t.isSelectedMonth(n)&&(null===e||void 0===e||e.focus())},role:"button",tabIndex:0,className:t.isSelectedMonth(n)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:e,onClick:t.onChange.bind(t,n),onKeyDown:t.handleOptionKeyDown.bind(t,n),"aria-selected":t.isSelectedMonth(n)?"true":void 0},t.isSelectedMonth(n)?a.createElement("span",{className:"react-datepicker__month-option--selected"},"\u2713"):"",e)})},t.onChange=function(e){return t.props.onChange(e)},t.handleClickOutside=function(){return t.props.onCancel()},t}return ts(t,e),t.prototype.render=function(){return a.createElement(as,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(a.Component),vl=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(e){return e.map(function(e,t){return a.createElement("option",{key:e,value:t},e)})},t.renderSelectMode=function(e){return a.createElement("select",{value:t.props.month,className:"react-datepicker__month-select",onChange:function(e){return t.onChange(parseInt(e.target.value))}},t.renderSelectOptions(e))},t.renderReadView=function(e,n){return a.createElement("button",{key:"read",type:"button",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:t.toggleDropdown},a.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),a.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},n[t.props.month]))},t.renderDropdown=function(e){return a.createElement(yl,ns({key:"dropdown"},t.props,{monthNames:e,onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(e){var n=t.state.dropdownVisible,r=[t.renderReadView(!n,e)];return n&&r.unshift(t.renderDropdown(e)),r},t.onChange=function(e){t.toggleDropdown(),e!==t.props.month&&t.props.onChange(e)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return ts(t,e),t.prototype.render=function(){var e,t=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(e){return Is(e,t.props.locale)}:function(e){return Fs(e,t.props.locale)});switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode(n);break;case"select":e=this.renderSelectMode(n)}return a.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},e)},t}(a.Component);function wl(e,t){for(var n=[],r=gs(e),i=gs(t);!zi(r,i);)n.push(ls(r)),r=Ri(r,1);return n}var bl=function(e){function t(t){var n=e.call(this,t)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(e){var t=Gi(e),r=Ds(n.props.date,e)&&xs(n.props.date,e);return a.createElement("div",{className:r?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:t,onClick:n.onChange.bind(n,t),"aria-selected":r?"true":void 0},r?a.createElement("span",{className:"react-datepicker__month-year-option--selected"},"\u2713"):"",ds(e,n.props.dateFormat,n.props.locale))})},n.onChange=function(e){return n.props.onChange(e)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:wl(n.props.minDate,n.props.maxDate)},n}return ts(t,e),t.prototype.render=function(){var e=Ot({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return a.createElement(as,{className:e,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(a.Component),kl=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var e=gs(t.props.minDate),n=gs(t.props.maxDate),r=[];!zi(e,n);){var i=Gi(e);r.push(a.createElement("option",{key:i,value:i},ds(e,t.props.dateFormat,t.props.locale))),e=Ri(e,1)}return r},t.onSelectChange=function(e){t.onChange(parseInt(e.target.value))},t.renderSelectMode=function(){return a.createElement("select",{value:Gi(gs(t.props.date)),className:"react-datepicker__month-year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(e){var n=ds(t.props.date,t.props.dateFormat,t.props.locale);return a.createElement("div",{key:"read",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:t.toggleDropdown},a.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),a.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},n))},t.renderDropdown=function(){return a.createElement(bl,ns({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var e=t.state.dropdownVisible,n=[t.renderReadView(!e)];return e&&n.unshift(t.renderDropdown()),n},t.onChange=function(e){t.toggleDropdown();var n=ls(e);Ds(t.props.date,n)&&xs(t.props.date,n)||t.props.onChange(n)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return ts(t,e),t.prototype.render=function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return a.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},e)},t}(a.Component),Dl=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var e,r,i;n.list&&(n.list.scrollTop=null!==(i=n.centerLi&&t.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-(null!==(r=null===(e=n.header)||void 0===e?void 0:e.clientHeight)&&void 0!==r?r:0):n.list.clientHeight,n.centerLi))&&void 0!==i?i:0)})},n.handleClick=function(e){var t,r;(n.props.minTime||n.props.maxTime)&&zs(e,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&Hs(e,n.props)||null===(r=(t=n.props).onChange)||void 0===r||r.call(t,e)},n.isSelectedTime=function(e){return n.props.selected&&(t=n.props.selected,r=e,nl(t).getTime()===nl(r).getTime());var t,r},n.isDisabledTime=function(e){return(n.props.minTime||n.props.maxTime)&&zs(e,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&Hs(e,n.props)},n.liClasses=function(e){var r,i=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(e):void 0];return n.isSelectedTime(e)&&i.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(e)&&i.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(3600*Ai(e)+60*Ci(e)+Ti(e))%(60*(null!==(r=n.props.intervals)&&void 0!==r?r:t.defaultProps.intervals))!==0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")},n.handleOnKeyDown=function(e,t){var r,i;e.key===is.Space&&(e.preventDefault(),e.key=is.Enter),(e.key===is.ArrowUp||e.key===is.ArrowLeft)&&e.target instanceof HTMLElement&&e.target.previousSibling&&(e.preventDefault(),e.target.previousSibling instanceof HTMLElement&&e.target.previousSibling.focus()),(e.key===is.ArrowDown||e.key===is.ArrowRight)&&e.target instanceof HTMLElement&&e.target.nextSibling&&(e.preventDefault(),e.target.nextSibling instanceof HTMLElement&&e.target.nextSibling.focus()),e.key===is.Enter&&n.handleClick(t),null===(i=(r=n.props).handleOnKeyDown)||void 0===i||i.call(r,e)},n.renderTimes=function(){for(var e,r=[],i="string"===typeof n.props.format?n.props.format:"p",o=null!==(e=n.props.intervals)&&void 0!==e?e:t.defaultProps.intervals,s=n.props.selected||n.props.openToDate||ls(),l=ms(s),c=n.props.injectTimes&&n.props.injectTimes.sort(function(e,t){return e.getTime()-t.getTime()}),u=60*function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+n-+t)/36e5)}(s),d=u/o,h=0;h<d;h++){var p=qi(l,h*o);if(r.push(p),c){var m=$s(l,p,h,o,c);r=r.concat(m)}}var f=r.reduce(function(e,t){return t.getTime()<=s.getTime()?t:e},r[0]);return r.map(function(e){return a.createElement("li",{key:e.valueOf(),onClick:n.handleClick.bind(n,e),className:n.liClasses(e),ref:function(t){e===f&&(n.centerLi=t)},onKeyDown:function(t){n.handleOnKeyDown(t,e)},tabIndex:e===f?0:-1,role:"option","aria-selected":n.isSelectedTime(e)?"true":void 0,"aria-disabled":n.isDisabledTime(e)?"true":void 0},ds(e,i,n.props.locale))})},n.renderTimeCaption=function(){return!1===n.props.showTimeCaption?a.createElement(a.Fragment,null):a.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(n.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(e){n.header=e}},a.createElement("div",{className:"react-datepicker-time__header"},n.props.timeCaption))},n}return ts(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var e;null===(e=this.resizeObserver)||void 0===e||e.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var e=this,t=this.props.monthRef;this.updateContainerHeight(),t&&(this.resizeObserver=new ResizeObserver(function(){e.updateContainerHeight()}),this.resizeObserver.observe(t))},t.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var e,n=this,r=this.state.height;return a.createElement("div",{className:"react-datepicker__time-container ".concat((null!==(e=this.props.todayButton)&&void 0!==e?e:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),a.createElement("div",{className:"react-datepicker__time"},a.createElement("div",{className:"react-datepicker__time-box"},a.createElement("ul",{className:"react-datepicker__time-list",ref:function(e){n.list=e},style:r?{height:r}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(e,t){return t.offsetTop-(e/2-t.clientHeight/2)},t}(a.Component),xl=function(e){function t(t){var n=e.call(this,t)||this;return n.YEAR_REFS=rs([],Array(n.props.yearItemNumber),!0).map(function(){return(0,a.createRef)()}),n.isDisabled=function(e){return Ps(e,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(e){return Ms(e,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var e;return null!==(e=n.props.selectingDate)&&void 0!==e?e:n.props.preSelection},n.updateFocusOnPaginate=function(e){window.requestAnimationFrame(function(){var t,r;null===(r=null===(t=n.YEAR_REFS[e])||void 0===t?void 0:t.current)||void 0===r||r.focus()})},n.handleYearClick=function(e,t){n.props.onDayClick&&n.props.onDayClick(e,t)},n.handleYearNavigation=function(e,t){var r,i,o,a,s=n.props,l=s.date,c=s.yearItemNumber;if(void 0!==l&&void 0!==c){var u=tl(l,c).startPeriod;n.isDisabled(t)||n.isExcluded(t)||(null===(i=(r=n.props).setPreSelection)||void 0===i||i.call(r,t),e-u<0?n.updateFocusOnPaginate(c-(u-e)):e-u>=c?n.updateFocusOnPaginate(Math.abs(c-(e-u))):null===(a=null===(o=n.YEAR_REFS[e-u])||void 0===o?void 0:o.current)||void 0===a||a.focus())}},n.isSameDay=function(e,t){return Ss(e,t)},n.isCurrentYear=function(e){return e===Di(ls())},n.isRangeStart=function(e){return n.props.startDate&&n.props.endDate&&Ds(Qi(ls(),e),n.props.startDate)},n.isRangeEnd=function(e){return n.props.startDate&&n.props.endDate&&Ds(Qi(ls(),e),n.props.endDate)},n.isInRange=function(e){return Ls(e,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(e){var t=n.props,r=t.selectsStart,i=t.selectsEnd,o=t.selectsRange,a=t.startDate,s=t.endDate;return!(!(r||i||o)||!n.selectingDate())&&(r&&s?Ls(e,n.selectingDate(),s):(i&&a||!(!o||!a||s))&&Ls(e,a,n.selectingDate()))},n.isSelectingRangeStart=function(e){var t;if(!n.isInSelectingRange(e))return!1;var r=n.props,i=r.startDate,o=r.selectsStart,a=Qi(ls(),e);return Ds(a,o?null!==(t=n.selectingDate())&&void 0!==t?t:null:null!==i&&void 0!==i?i:null)},n.isSelectingRangeEnd=function(e){var t;if(!n.isInSelectingRange(e))return!1;var r=n.props,i=r.endDate,o=r.selectsEnd,a=r.selectsRange,s=Qi(ls(),e);return Ds(s,o||a?null!==(t=n.selectingDate())&&void 0!==t?t:null:null!==i&&void 0!==i?i:null)},n.isKeyboardSelected=function(e){if(!n.props.disabledKeyboardNavigation&&void 0!==n.props.date&&null!=n.props.preSelection){var t=n.props,r=t.minDate,i=t.maxDate,o=t.excludeDates,a=t.includeDates,s=t.filterDate,l=t.selected,c=ys(Qi(n.props.date,e)),u=(r||i||o||a||s)&&Bs(e,n.props),d=!!l&&Ss(c,ys(l)),h=Ss(c,ys(n.props.preSelection));return!n.props.inline&&!d&&h&&!u}},n.isSelectedYear=function(e){var t=n.props,r=t.selectsMultiple,i=t.selected,o=t.selectedDates;return r?null===o||void 0===o?void 0:o.some(function(t){return e===Di(t)}):!!i&&e===Di(i)},n.onYearClick=function(e,t){var r=n.props.date;void 0!==r&&n.handleYearClick(ys(Qi(r,t)),e)},n.onYearKeyDown=function(e,t){var r,i,o=e.key,a=n.props,s=a.date,l=a.yearItemNumber,c=a.handleOnKeyDown;if(o!==is.Tab&&e.preventDefault(),!n.props.disabledKeyboardNavigation)switch(o){case is.Enter:if(null==n.props.selected)break;n.onYearClick(e,t),null===(i=(r=n.props).setPreSelection)||void 0===i||i.call(r,n.props.selected);break;case is.ArrowRight:if(null==n.props.preSelection)break;n.handleYearNavigation(t+1,Ni(n.props.preSelection,1));break;case is.ArrowLeft:if(null==n.props.preSelection)break;n.handleYearNavigation(t-1,Oi(n.props.preSelection,1));break;case is.ArrowUp:if(void 0===s||void 0===l||null==n.props.preSelection)break;var u=tl(s,l).startPeriod;if((p=t-(h=3))<u){var d=l%h;t>=u&&t<u+d?h=d:h+=d,p=t-h}n.handleYearNavigation(p,Oi(n.props.preSelection,h));break;case is.ArrowDown:if(void 0===s||void 0===l||null==n.props.preSelection)break;var h,p,m=tl(s,l).endPeriod;if((p=t+(h=3))>m){d=l%h;t<=m&&t>m-d?h=d:h+=d,p=t+h}n.handleYearNavigation(p,Ni(n.props.preSelection,h))}c&&c(e)},n.getYearClassNames=function(e){var t=n.props,r=t.date,i=t.minDate,o=t.maxDate,a=t.excludeDates,s=t.includeDates,l=t.filterDate,c=t.yearClassName;return Ot("react-datepicker__year-text","react-datepicker__year-".concat(e),r?null===c||void 0===c?void 0:c(Qi(r,e)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(e),"react-datepicker__year-text--disabled":(i||o||a||s||l)&&Bs(e,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(e),"react-datepicker__year-text--range-start":n.isRangeStart(e),"react-datepicker__year-text--range-end":n.isRangeEnd(e),"react-datepicker__year-text--in-range":n.isInRange(e),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(e),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(e),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(e),"react-datepicker__year-text--today":n.isCurrentYear(e)})},n.getYearTabIndex=function(e){if(n.props.disabledKeyboardNavigation||null==n.props.preSelection)return"-1";var t=Di(n.props.preSelection),r=Bs(e,n.props);return e!==t||r?"-1":"0"},n.getYearContent=function(e){return n.props.renderYearContent?n.props.renderYearContent(e):e},n}return ts(t,e),t.prototype.render=function(){var e=this,t=[],n=this.props,r=n.date,i=n.yearItemNumber,o=n.onYearMouseEnter,s=n.onYearMouseLeave;if(void 0===r)return null;for(var l=tl(r,i),c=l.startPeriod,u=l.endPeriod,d=function(n){t.push(a.createElement("div",{ref:h.YEAR_REFS[n-c],onClick:function(t){e.onYearClick(t,n)},onKeyDown:function(t){ol(t)&&(t.preventDefault(),t.key=is.Enter),e.onYearKeyDown(t,n)},tabIndex:Number(h.getYearTabIndex(n)),className:h.getYearClassNames(n),onMouseEnter:h.props.usePointerEvent?void 0:function(e){return o(e,n)},onPointerEnter:h.props.usePointerEvent?function(e){return o(e,n)}:void 0,onMouseLeave:h.props.usePointerEvent?void 0:function(e){return s(e,n)},onPointerLeave:h.props.usePointerEvent?function(e){return s(e,n)}:void 0,key:n,"aria-current":h.isCurrentYear(n)?"date":void 0},h.getYearContent(n)))},h=this,p=c;p<=u;p++)d(p);return a.createElement("div",{className:"react-datepicker__year"},a.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},t))},t}(a.Component);function El(e,t,n,r){for(var i=[],o=0;o<2*t+1;o++){var a=e+t-o,s=!0;n&&(s=Di(n)<=a),r&&s&&(s=Di(r)>=a),s&&i.push(a)}return i}var Sl=function(e){function t(t){var n=e.call(this,t)||this;n.yearOptionButtonsRef={},n.handleOptionKeyDown=function(e,t){var r;switch(t.key){case"Enter":t.preventDefault(),n.onChange(e);break;case"Escape":t.preventDefault(),n.props.onCancel();break;case"ArrowUp":case"ArrowDown":t.preventDefault();var i=e+("ArrowUp"===t.key?1:-1);n.yearOptionButtonsRef[i]&&(null===(r=n.yearOptionButtonsRef[i])||void 0===r||r.focus())}},n.renderOptions=function(){n.yearOptionButtonsRef={};var e=n.props.year,t=n.state.yearsList.map(function(t){return a.createElement("div",{ref:function(r){n.yearOptionButtonsRef[t]=r,t===e&&(null===r||void 0===r||r.focus())},role:"button",tabIndex:0,className:e===t?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:t,onClick:n.onChange.bind(n,t),onKeyDown:n.handleOptionKeyDown.bind(n,t),"aria-selected":e===t?"true":void 0},e===t?a.createElement("span",{className:"react-datepicker__year-option--selected"},"\u2713"):"",t)}),r=n.props.minDate?Di(n.props.minDate):null,i=n.props.maxDate?Di(n.props.maxDate):null;return i&&n.state.yearsList.find(function(e){return e===i})||t.unshift(a.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},a.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),r&&n.state.yearsList.find(function(e){return e===r})||t.push(a.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},a.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),t},n.onChange=function(e){n.props.onChange(e)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(e){var t=n.state.yearsList.map(function(t){return t+e});n.setState({yearsList:t})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var r=t.yearDropdownItemNumber,i=t.scrollableYearDropdown,o=r||(i?10:5);return n.state={yearsList:El(n.props.year,o,n.props.minDate,n.props.maxDate)},n.dropdownRef=(0,a.createRef)(),n}return ts(t,e),t.prototype.componentDidMount=function(){var e=this.dropdownRef.current;if(e){var t=e.children?Array.from(e.children):null,n=t?t.find(function(e){return e.ariaSelected}):null;e.scrollTop=n&&n instanceof HTMLElement?n.offsetTop+(n.clientHeight-e.clientHeight)/2:(e.scrollHeight-e.clientHeight)/2}},t.prototype.render=function(){var e=Ot({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return a.createElement(as,{className:e,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(a.Component),Al=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var e=t.props.minDate?Di(t.props.minDate):1900,n=t.props.maxDate?Di(t.props.maxDate):2100,r=[],i=e;i<=n;i++)r.push(a.createElement("option",{key:i,value:i},i));return r},t.onSelectChange=function(e){t.onChange(parseInt(e.target.value))},t.renderSelectMode=function(){return a.createElement("select",{value:t.props.year,className:"react-datepicker__year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(e){return a.createElement("button",{key:"read",type:"button",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:t.toggleDropdown},a.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),a.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},t.props.year))},t.renderDropdown=function(){return a.createElement(Sl,ns({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var e=t.state.dropdownVisible,n=[t.renderReadView(!e)];return e&&n.unshift(t.renderDropdown()),n},t.onChange=function(e){t.toggleDropdown(),e!==t.props.year&&t.props.onChange(e)},t.toggleDropdown=function(e){t.setState({dropdownVisible:!t.state.dropdownVisible},function(){t.props.adjustDateOnChange&&t.handleYearChange(t.props.date,e)})},t.handleYearChange=function(e,n){var r;null===(r=t.onSelect)||void 0===r||r.call(t,e,n),t.setOpen()},t.onSelect=function(e,n){var r,i;null===(i=(r=t.props).onSelect)||void 0===i||i.call(r,e,n)},t.setOpen=function(){var e,n;null===(n=(e=t.props).setOpen)||void 0===n||n.call(e,!0)},t}return ts(t,e),t.prototype.render=function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return a.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},e)},t}(a.Component),Cl=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],Tl="react-datepicker-ignore-onclickoutside",Rl=function(e){function t(n){var r=e.call(this,n)||this;return r.monthContainer=void 0,r.handleClickOutside=function(e){r.props.onClickOutside(e)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(e){var t,n;(function(e){var t=(e.className||"").split(/\s+/);return Cl.some(function(e){return t.indexOf(e)>=0})})(e.target)&&(null===(n=(t=r.props).onDropdownFocus)||void 0===n||n.call(t,e))},r.getDateInView=function(){var e=r.props,t=e.preSelection,n=e.selected,i=e.openToDate,o=Qs(r.props),a=Xs(r.props),s=ls(),l=i||n||t;return l||(o&&_r(s,o)?o:a&&zi(s,a)?a:s)},r.increaseMonth=function(){r.setState(function(e){return{date:Ri(e.date,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(e){return{date:Fi(e.date,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(e,t,n){r.props.onSelect(e,t,n),r.props.setPreSelection&&r.props.setPreSelection(e)},r.handleDayMouseEnter=function(e){r.setState({selectingDate:e}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(e)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(e,t){r.setState({selectingDate:Qi(ls(),t)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(e,t)},r.handleYearMouseLeave=function(e,t){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(e,t)},r.handleYearChange=function(e){var t,n,i,o;null===(n=(t=r.props).onYearChange)||void 0===n||n.call(t,e),r.setState({isRenderAriaLiveMessage:!0}),r.props.adjustDateOnChange&&(r.props.onSelect(e),null===(o=(i=r.props).setOpen)||void 0===o||o.call(i,!0)),r.props.setPreSelection&&r.props.setPreSelection(e)},r.getEnabledPreSelectionDateForMonth=function(e){if(!Ps(e,r.props))return e;for(var t=gs(e),n=Xi(ks(e),t),i=null,o=0;o<=n;o++){var a=vr(t,o);if(!Ps(a,r.props)){i=a;break}}return i},r.handleMonthChange=function(e){var t,n,i,o=null!==(t=r.getEnabledPreSelectionDateForMonth(e))&&void 0!==t?t:e;r.handleCustomMonthChange(o),r.props.adjustDateOnChange&&(r.props.onSelect(o),null===(i=(n=r.props).setOpen)||void 0===i||i.call(n,!0)),r.props.setPreSelection&&r.props.setPreSelection(o)},r.handleCustomMonthChange=function(e){var t,n;null===(n=(t=r.props).onMonthChange)||void 0===n||n.call(t,e),r.setState({isRenderAriaLiveMessage:!0})},r.handleMonthYearChange=function(e){r.handleYearChange(e),r.handleMonthChange(e)},r.changeYear=function(e){r.setState(function(t){return{date:Qi(t.date,Number(e))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(e){r.setState(function(t){return{date:bi(t.date,Number(e))}},function(){return r.handleMonthChange(r.state.date)})},r.changeMonthYear=function(e){r.setState(function(t){return{date:Qi(bi(t.date,xi(e)),Di(e))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(e){void 0===e&&(e=r.state.date);var t=fs(e,r.props.locale,r.props.calendarStartDay),n=[];return r.props.showWeekNumbers&&n.push(a.createElement("div",{key:"W",className:"react-datepicker__day-name",role:"columnheader"},a.createElement("span",{className:"react-datepicker__sr-only"},"Week number"),a.createElement("span",{"aria-hidden":"true"},r.props.weekLabel||"#"))),n.concat([0,1,2,3,4,5,6].map(function(e){var n=vr(t,e),i=r.formatWeekday(n,r.props.locale),o=r.props.weekDayClassName?r.props.weekDayClassName(n):void 0;return a.createElement("div",{key:e,role:"columnheader",className:Ot("react-datepicker__day-name",o)},a.createElement("span",{className:"react-datepicker__sr-only"},ds(n,"EEEE",r.props.locale)),a.createElement("span",{"aria-hidden":"true"},i))}))},r.formatWeekday=function(e,t){return r.props.formatWeekDay?function(e,t,n){return t(ds(e,"EEEE",n))}(e,r.props.formatWeekDay,t):r.props.useWeekdaysShort?function(e,t){return ds(e,"EEE",t)}(e,t):function(e,t){return ds(e,"EEEEEE",t)}(e,t)},r.decreaseYear=function(){r.setState(function(e){var n;return{date:Oi(e.date,r.props.showYearPicker?null!==(n=r.props.yearItemNumber)&&void 0!==n?n:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var e,n,i;if(!r.props.renderCustomHeader){var o,s=null!==(e=r.props.monthsShown)&&void 0!==e?e:t.defaultProps.monthsShown,l=r.props.showPreviousMonths?s-1:0,c=null!==(n=r.props.monthSelectedIn)&&void 0!==n?n:l,u=Fi(r.state.date,c);switch(!0){case r.props.showMonthYearPicker:o=Ys(r.state.date,r.props);break;case r.props.showYearPicker:o=function(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.yearItemNumber,o=void 0===i?12:i,a=tl(ys(Oi(e,o)),o).endPeriod,s=r&&Di(r);return s&&s>a||!1}(r.state.date,r.props);break;case r.props.showQuarterYearPicker:o=function(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.includeDates,o=Mi(Lr(e),1);return r&&_i(r,o)>0||i&&i.every(function(e){return _i(e,o)>0})||!1}(r.state.date,r.props);break;default:o=Vs(u,r.props)}if(((null!==(i=r.props.forceShowMonthNavigation)&&void 0!==i?i:t.defaultProps.forceShowMonthNavigation)||r.props.showDisabledMonthNavigation||!o)&&!r.props.showTimeSelectOnly){var d=["react-datepicker__navigation","react-datepicker__navigation--previous"],h=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(h=r.decreaseYear),o&&r.props.showDisabledMonthNavigation&&(d.push("react-datepicker__navigation--previous--disabled"),h=void 0);var p=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,m=r.props,f=m.previousMonthButtonLabel,g=void 0===f?t.defaultProps.previousMonthButtonLabel:f,y=m.previousYearButtonLabel,v=void 0===y?t.defaultProps.previousYearButtonLabel:y,w=r.props,b=w.previousMonthAriaLabel,k=void 0===b?"string"===typeof g?g:"Previous Month":b,D=w.previousYearAriaLabel,x=void 0===D?"string"===typeof v?v:"Previous Year":D;return a.createElement("button",{type:"button",className:d.join(" "),onClick:h,onKeyDown:r.props.handleOnKeyDown,"aria-label":p?x:k},a.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},p?v:g))}}},r.increaseYear=function(){r.setState(function(e){var n;return{date:Ni(e.date,r.props.showYearPicker?null!==(n=r.props.yearItemNumber)&&void 0!==n?n:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var e;if(!r.props.renderCustomHeader){var n;switch(!0){case r.props.showMonthYearPicker:n=Gs(r.state.date,r.props);break;case r.props.showYearPicker:n=function(e,t){var n=void 0===t?{}:t,r=n.maxDate,i=n.yearItemNumber,o=void 0===i?12:i,a=tl(Ni(e,o),o).startPeriod,s=r&&Di(r);return s&&s<a||!1}(r.state.date,r.props);break;case r.props.showQuarterYearPicker:n=function(e,t){var n=void 0===t?{}:t,r=n.maxDate,i=n.includeDates,o=Pi(Ei(e),1);return r&&_i(o,r)>0||i&&i.every(function(e){return _i(o,e)>0})||!1}(r.state.date,r.props);break;default:n=Ks(r.state.date,r.props)}if(((null!==(e=r.props.forceShowMonthNavigation)&&void 0!==e?e:t.defaultProps.forceShowMonthNavigation)||r.props.showDisabledMonthNavigation||!n)&&!r.props.showTimeSelectOnly){var i=["react-datepicker__navigation","react-datepicker__navigation--next"];r.props.showTimeSelect&&i.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&i.push("react-datepicker__navigation--next--with-today-button");var o=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(o=r.increaseYear),n&&r.props.showDisabledMonthNavigation&&(i.push("react-datepicker__navigation--next--disabled"),o=void 0);var s=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,l=r.props,c=l.nextMonthButtonLabel,u=void 0===c?t.defaultProps.nextMonthButtonLabel:c,d=l.nextYearButtonLabel,h=void 0===d?t.defaultProps.nextYearButtonLabel:d,p=r.props,m=p.nextMonthAriaLabel,f=void 0===m?"string"===typeof u?u:"Next Month":m,g=p.nextYearAriaLabel,y=void 0===g?"string"===typeof h?h:"Next Year":g;return a.createElement("button",{type:"button",className:i.join(" "),onClick:o,onKeyDown:r.props.handleOnKeyDown,"aria-label":s?y:f},a.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},s?h:u))}}},r.renderCurrentMonth=function(e){void 0===e&&(e=r.state.date);var t=["react-datepicker__current-month"];return r.props.showYearDropdown&&t.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&t.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&t.push("react-datepicker__current-month--hasMonthYearDropdown"),a.createElement("h2",{className:t.join(" ")},ds(e,r.props.dateFormat,r.props.locale))},r.renderYearDropdown=function(e){if(void 0===e&&(e=!1),r.props.showYearDropdown&&!e)return a.createElement(Al,ns({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:Di(r.state.date)}))},r.renderMonthDropdown=function(e){if(void 0===e&&(e=!1),r.props.showMonthDropdown&&!e)return a.createElement(vl,ns({},t.defaultProps,r.props,{month:xi(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(e){if(void 0===e&&(e=!1),r.props.showMonthYearDropdown&&!e)return a.createElement(kl,ns({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(e){r.props.onSelect(ws(),e),r.props.setPreSelection&&r.props.setPreSelection(ws())},r.renderTodayButton=function(){if(r.props.todayButton&&!r.props.showTimeSelectOnly)return a.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDayNamesHeader=function(e){return a.createElement("div",{className:"react-datepicker__day-names",role:"row"},r.header(e))},r.renderDefaultHeader=function(e){var t=e.monthDate,n=e.i;return a.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(t),a.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(0!==n),r.renderMonthYearDropdown(0!==n),r.renderYearDropdown(0!==n)))},r.renderCustomHeader=function(e){var t,n,i=e.monthDate,o=e.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var s,l=r.props,c=l.showYearPicker,u=l.yearItemNumber;if(c){var d=tl(i,u);s={startYear:d.startPeriod,endYear:d.endPeriod}}var h=Vs(r.state.date,r.props),p=Ks(r.state.date,r.props),m=Ys(r.state.date,r.props),f=Gs(r.state.date,r.props);return a.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},null===(n=(t=r.props).renderCustomHeader)||void 0===n?void 0:n.call(t,ns(ns(ns({},r.state),c&&{visibleYearsRange:s}),{customHeaderCount:o,monthDate:i,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:h,nextMonthButtonDisabled:p,prevYearButtonDisabled:m,nextYearButtonDisabled:f})))},r.renderYearHeader=function(e){var n=e.monthDate,i=r.props,o=i.showYearPicker,s=i.yearItemNumber,l=tl(n,void 0===s?t.defaultProps.yearItemNumber:s),c=l.startPeriod,u=l.endPeriod;return a.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},o?"".concat(c," - ").concat(u):Di(n))},r.renderHeader=function(e){var t=e.monthDate,n=e.i,i={monthDate:t,i:void 0===n?0:n};switch(!0){case void 0!==r.props.renderCustomHeader:return r.renderCustomHeader(i);case r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker:return r.renderYearHeader(i);default:return r.renderDefaultHeader(i)}},r.renderMonths=function(){var e,n;if(!r.props.showTimeSelectOnly&&!r.props.showYearPicker){for(var i=[],o=null!==(e=r.props.monthsShown)&&void 0!==e?e:t.defaultProps.monthsShown,s=r.props.showPreviousMonths?o-1:0,l=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Ni(r.state.date,s):Fi(r.state.date,s),c=null!==(n=r.props.monthSelectedIn)&&void 0!==n?n:s,u=0;u<o;++u){var d=u-c+s,h=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Ni(l,d):Ri(l,d),p="month-".concat(u),m=u<o-1,f=u>0;i.push(a.createElement("div",{key:p,ref:function(e){r.monthContainer=null!==e&&void 0!==e?e:void 0},className:"react-datepicker__month-container"},r.renderHeader({monthDate:h,i:u}),a.createElement(gl,ns({},t.defaultProps,r.props,{containerRef:r.containerRef,ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:h,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:u,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:m,monthShowsDuplicateDaysStart:f,dayNamesHeader:r.renderDayNamesHeader(h)}))))}return i}},r.renderYears=function(){if(!r.props.showTimeSelectOnly)return r.props.showYearPicker?a.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),a.createElement(xl,ns({},t.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave}))):void 0},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return a.createElement(Dl,ns({},t.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var e=r.props.selected?new Date(r.props.selected):void 0,n=e&&us(e)&&Boolean(r.props.selected)?"".concat(el(e.getHours()),":").concat(el(e.getMinutes())):"";if(r.props.showTimeInput)return a.createElement(sl,ns({},t.defaultProps,r.props,{date:e,timeString:n,onChange:r.props.onTimeChange}))},r.renderAriaLiveRegion=function(){var e,n,i=tl(r.state.date,null!==(e=r.props.yearItemNumber)&&void 0!==e?e:t.defaultProps.yearItemNumber),o=i.startPeriod,s=i.endPeriod;return n=r.props.showYearPicker?"".concat(o," - ").concat(s):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Di(r.state.date):"".concat(Fs(xi(r.state.date),r.props.locale)," ").concat(Di(r.state.date)),a.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&n)},r.renderChildren=function(){if(r.props.children)return a.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=(0,a.createRef)(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return ts(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,outsideClickIgnoreClass:Tl,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:12}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var e=this;this.props.showTimeSelect&&(this.assignMonthContainer=void e.setState({monthContainer:e.monthContainer}))},t.prototype.componentDidUpdate=function(e){var t=this;if(!this.props.preSelection||Ss(this.props.preSelection,e.preSelection)&&this.props.monthSelectedIn===e.monthSelectedIn)this.props.openToDate&&!Ss(this.props.openToDate,e.openToDate)&&this.setState({date:this.props.openToDate});else{var n=!xs(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return n&&t.handleCustomMonthChange(t.state.date)})}},t.prototype.render=function(){var e=this.props.container||os;return a.createElement(as,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},a.createElement("div",{style:{display:"contents"},ref:this.containerRef},a.createElement(e,{className:Ot("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t}(a.Component),Fl=function(e){var t=e.icon,n=e.className,r=void 0===n?"":n,i=e.onClick,o="react-datepicker__calendar-icon";if("string"===typeof t)return a.createElement("i",{className:"".concat(o," ").concat(t," ").concat(r),"aria-hidden":"true",onClick:i});if(a.isValidElement(t)){var s=t;return a.cloneElement(s,{className:"".concat(s.props.className||""," ").concat(o," ").concat(r),onClick:function(e){"function"===typeof s.props.onClick&&s.props.onClick(e),"function"===typeof i&&i(e)}})}return a.createElement("svg",{className:"".concat(o," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:i},a.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},Il=function(e){function t(t){var n=e.call(this,t)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return ts(t,e),t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return De.createPortal(this.props.children,this.el)},t}(a.Component),Pl=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&-1!==e.tabIndex},Ml=function(e){function t(t){var n=e.call(this,t)||this;return n.getTabChildren=function(){var e;return Array.prototype.slice.call(null===(e=n.tabLoopRef.current)||void 0===e?void 0:e.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(Pl)},n.handleFocusStart=function(){var e=n.getTabChildren();e&&e.length>1&&e[e.length-1].focus()},n.handleFocusEnd=function(){var e=n.getTabChildren();e&&e.length>1&&e[0].focus()},n.tabLoopRef=(0,a.createRef)(),n}return ts(t,e),t.prototype.render=function(){var e;return(null!==(e=this.props.enableTabLoop)&&void 0!==e?e:t.defaultProps.enableTabLoop)?a.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},a.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,a.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(a.Component);var _l=function(e){function t(t){var n,r,i,o="boolean"!==typeof t.hidePopper||t.hidePopper,s=(0,a.useRef)(null),l=$a(ns({open:!o,whileElementsMounted:ka,placement:t.popperPlacement,middleware:rs([(r={padding:15},(0,c.A)((0,c.A)({},xa(r)),{},{options:[r,i]})),Ia(10),Pa({element:s})],null!==(n=t.popperModifiers)&&void 0!==n?n:[],!0)},t.popperProps)),u=ns(ns({},t),{hidePopper:o,popperProps:ns(ns({},l),{arrowRef:s})});return a.createElement(e,ns({},u))}return t.displayName="withFloating(".concat(e.displayName||e.name||"Component",")"),t}(function(e){var t=e.className,n=e.wrapperClassName,r=e.hidePopper,i=void 0===r||r,o=e.popperComponent,s=e.targetComponent,l=e.enableTabLoop,c=e.popperOnKeyDown,u=e.portalId,d=e.portalHost,h=e.popperProps,p=e.showArrow,m=void 0;if(!i){var f=Ot("react-datepicker-popper",t);m=a.createElement(Ml,{enableTabLoop:l},a.createElement("div",{ref:h.refs.setFloating,style:h.floatingStyles,className:f,"data-placement":h.placement,onKeyDown:c},o,p&&a.createElement(Ka,{ref:h.arrowRef,context:h.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}e.popperContainer&&(m=(0,a.createElement)(e.popperContainer,{},m)),u&&!i&&(m=a.createElement(Il,{portalId:u,portalHost:d},m));var g=Ot("react-datepicker-wrapper",n);return a.createElement(a.Fragment,null,a.createElement("div",{ref:h.refs.setReference,className:g},s),m)});var Nl="Date input not valid.",Ol=function(e){function t(n){var r=e.call(this,n)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:ls()},r.modifyHolidays=function(){var e;return null===(e=r.props.holidays)||void 0===e?void 0:e.reduce(function(e,t){var n=new Date(t.date);return us(n)?rs(rs([],e,!0),[ns(ns({},t),{date:n})],!1):e},[])},r.calcInitialState=function(){var e,t=r.getPreSelection(),n=Qs(r.props),i=Xs(r.props),o=n&&_r(t,ms(n))?n:i&&zi(t,bs(i))?i:t;return{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:null!==(e=r.props.selectsRange?r.props.startDate:r.props.selected)&&void 0!==e?e:o,highlightDates:Zs(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.getInputValue=function(){var e,n=r.props,i=n.locale,o=n.startDate,a=n.endDate,s=n.rangeSeparator,l=n.selected,c=n.selectedDates,u=n.selectsMultiple,d=n.selectsRange,h=n.value,p=null!==(e=r.props.dateFormat)&&void 0!==e?e:t.defaultProps.dateFormat,m=r.state.inputValue;return"string"===typeof h?h:"string"===typeof m?m:d?function(e,t,n){if(!e&&!t)return"";var r=e?hs(e,n):"",i=t?hs(t,n):"",o=n.rangeSeparator||" - ";return"".concat(r).concat(o).concat(i)}(o,a,{dateFormat:p,locale:i,rangeSeparator:s}):u?function(e,t){if(!(null===e||void 0===e?void 0:e.length))return"";var n=e[0]?hs(e[0],t):"";if(1===e.length)return n;if(2===e.length&&e[1]){var r=hs(e[1],t);return"".concat(n,", ").concat(r)}var i=e.length-1;return"".concat(n," (+").concat(i,")")}(null!==c&&void 0!==c?c:[],{dateFormat:p,locale:i}):hs(l,{dateFormat:p,locale:i})},r.resetHiddenStatus=function(){r.setState(ns(ns({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(ns(ns({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){"hidden"===document.visibilityState&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.setFocus=function(){var e,t;null===(t=null===(e=r.input)||void 0===e?void 0:e.focus)||void 0===t||t.call(e,{preventScroll:!0})},r.setBlur=function(){var e,t;null===(t=null===(e=r.input)||void 0===e?void 0:e.blur)||void 0===t||t.call(e),r.cancelFocusInput()},r.deferBlur=function(){requestAnimationFrame(function(){r.setBlur()})},r.setOpen=function(e,t){void 0===t&&(t=!1),r.setState({open:e,preSelection:e&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:Ll},function(){e||r.setState(function(e){return{focused:!!t&&e.focused}},function(){!t&&r.deferBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return Pr(r.state.preSelection)},r.isCalendarOpen=function(){return void 0===r.props.open?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(e){var t,n,i=r.state.wasHidden,o=!i||r.state.open;i&&r.resetHiddenStatus(),r.state.preventFocus||(null===(n=(t=r.props).onFocus)||void 0===n||n.call(t,e),!o||r.props.preventOpenOnFocus||r.props.readOnly||r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.resetInputValue=function(){r.setState(ns(ns({},r.state),{inputValue:null}))},r.handleBlur=function(e){var t,n;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&(null===(n=(t=r.props).onBlur)||void 0===n||n.call(t,e)),r.resetInputValue(),r.state.open&&!1===r.props.open&&r.setOpen(!1),r.setState({focused:!1})},r.handleCalendarClickOutside=function(e){var t,n;r.props.inline||r.setOpen(!1),null===(n=(t=r.props).onClickOutside)||void 0===n||n.call(t,e),r.props.withPortal&&e.preventDefault()},r.handleChange=function(){for(var e,n,i,o,a,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var c=s[0];if(!r.props.onChangeRaw||(r.props.onChangeRaw.apply(r,s),c&&"function"===typeof c.isDefaultPrevented&&!c.isDefaultPrevented())){r.setState({inputValue:(null===c||void 0===c?void 0:c.target)instanceof HTMLInputElement?c.target.value:null,lastPreSelectChange:jl});var u=r.props,d=u.selectsRange,h=u.startDate,p=u.endDate,m=null!==(e=r.props.dateFormat)&&void 0!==e?e:t.defaultProps.dateFormat,f=null!==(n=r.props.strictParsing)&&void 0!==n?n:t.defaultProps.strictParsing,g=(null===c||void 0===c?void 0:c.target)instanceof HTMLInputElement?c.target.value:"";if(d){var y=r.props.rangeSeparator,v=y.trim(),w=g.split(m.includes(v)?y:v,2).map(function(e){return e.trim()}),b=w[0],k=w[1],D=cs(null!==b&&void 0!==b?b:"",m,r.props.locale,f),x=D?cs(null!==k&&void 0!==k?k:"",m,r.props.locale,f):null,E=(null===h||void 0===h?void 0:h.getTime())!==(null===D||void 0===D?void 0:D.getTime()),S=(null===p||void 0===p?void 0:p.getTime())!==(null===x||void 0===x?void 0:x.getTime());if(!E&&!S)return;if(D&&Ps(D,r.props))return;if(x&&Ps(x,r.props))return;null===(o=(i=r.props).onChange)||void 0===o||o.call(i,[D,x],c)}else{var A=cs(g,m,r.props.locale,f,null!==(a=r.props.selected)&&void 0!==a?a:void 0);!A&&g||r.setSelected(A,c,!0)}}},r.handleSelect=function(e,t,n){if(!r.props.readOnly){var i=r.props,o=i.selectsRange,a=i.startDate,s=i.endDate,l=i.swapRange,c=!o||a&&!s&&(l||!il(e,a));r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&c&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(t),r.setSelected(e,t,!1,n),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect?r.setPreSelection(e):c&&r.setOpen(!1)}},r.setSelected=function(e,t,n,i){var o,a,s=e;if(r.props.showYearPicker){if(null!==s&&Bs(Di(s),r.props))return}else if(r.props.showMonthYearPicker){if(null!==s&&_s(s,r.props))return}else if(null!==s&&Ps(s,r.props))return;var l=r.props,c=l.onChange,u=l.selectsRange,d=l.startDate,h=l.endDate,p=l.selectsMultiple,m=l.selectedDates,f=l.minTime,g=l.swapRange;if(!As(r.props.selected,s)||r.props.allowSameDay||u||p)if(null!==s&&(!r.props.selected||n&&(r.props.showTimeSelect||r.props.showTimeSelectOnly||r.props.showTimeInput)||(s=ps(s,{hour:Ai(r.props.selected),minute:Ci(r.props.selected),second:Ti(r.props.selected)})),n||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly||f&&(s=ps(s,{hour:f.getHours(),minute:f.getMinutes(),second:f.getSeconds()})),r.props.inline||r.setState({preSelection:s}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:i})),u){var y=d&&!h,v=!d&&!!h,w=d&&h;!d&&!h?null===c||void 0===c||c([s,null],t):y?null===s?null===c||void 0===c||c([null,null],t):il(s,d)?g?null===c||void 0===c||c([s,d],t):null===c||void 0===c||c([s,null],t):null===c||void 0===c||c([d,s],t):v&&(s&&il(s,h)?null===c||void 0===c||c([s,h],t):null===c||void 0===c||c([s,null],t)),w&&(null===c||void 0===c||c([s,null],t))}else if(p){if(null!==s)if(null===m||void 0===m?void 0:m.length)if(m.some(function(e){return Ss(e,s)})){var b=m.filter(function(e){return!Ss(e,s)});null===c||void 0===c||c(b,t)}else null===c||void 0===c||c(rs(rs([],m,!0),[s],!1),t);else null===c||void 0===c||c([s],t)}else null===c||void 0===c||c(s,t);n||(null===(a=(o=r.props).onSelect)||void 0===a||a.call(o,s,t),r.setState({inputValue:null}))},r.setPreSelection=function(e){if(!r.props.readOnly){var t=Pr(r.props.minDate),n=Pr(r.props.maxDate),i=!0;if(e){var o=ms(e);if(t&&n)i=Cs(e,r.props.minDate,r.props.maxDate);else if(t){var a=ms(r.props.minDate);i=zi(e,a)||As(o,a)}else if(n){var s=bs(r.props.maxDate);i=_r(e,s)||As(o,s)}}i&&r.setState({preSelection:e})}},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(e){var t,n;if(!r.props.selectsRange&&!r.props.selectsMultiple){var i=r.props.selected?r.props.selected:r.getPreSelection(),o=r.props.selected?e:ps(i,{hour:Ai(e),minute:Ci(e)});r.setState({preSelection:o}),null===(n=(t=r.props).onChange)||void 0===n||n.call(t,o),r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var e,t;r.props.disabled||r.props.readOnly||r.setOpen(!0),null===(t=(e=r.props).onInputClick)||void 0===t||t.call(e)},r.onInputKeyDown=function(e){var t,n,i,o,a,s;null===(n=(t=r.props).onKeyDown)||void 0===n||n.call(t,e);var l=e.key;if(r.state.open||r.props.inline||r.props.preventOpenOnFocus){if(r.state.open){if(l===is.ArrowDown||l===is.ArrowUp){e.preventDefault();var c=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',u=(null===(o=r.calendar)||void 0===o?void 0:o.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(c);return void(u instanceof HTMLElement&&u.focus({preventScroll:!0}))}var d=ls(r.state.preSelection);l===is.Enter?(e.preventDefault(),e.target.blur(),r.inputOk()&&r.state.lastPreSelectChange===Ll?(r.handleSelect(d,e),!r.props.shouldCloseOnSelect&&r.setPreSelection(d)):r.setOpen(!1)):l===is.Escape?(e.preventDefault(),e.target.blur(),r.sendFocusBackToInput(),r.setOpen(!1)):l===is.Tab&&r.setOpen(!1),r.inputOk()||null===(s=(a=r.props).onInputError)||void 0===s||s.call(a,{code:1,msg:Nl})}}else l!==is.ArrowDown&&l!==is.ArrowUp&&l!==is.Enter||null===(i=r.onInputClick)||void 0===i||i.call(r)},r.onPortalKeyDown=function(e){e.key===is.Escape&&(e.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(e){var t,n,i,o,a,s,l=r.props,c=l.minDate,u=l.maxDate,d=l.disabledKeyboardNavigation,h=l.showWeekPicker,p=l.shouldCloseOnSelect,m=l.locale,f=l.calendarStartDay,g=l.adjustDateOnChange,y=l.inline;if(null===(n=(t=r.props).onKeyDown)||void 0===n||n.call(t,e),!d){var v=e.key,w=e.shiftKey,b=ls(r.state.preSelection),k=function(e,t){var n=t;switch(e){case is.ArrowRight:n=h?Yi(t,1):vr(t,1);break;case is.ArrowLeft:n=h?Ji(t,1):$i(t,1);break;case is.ArrowUp:n=Ji(t,1);break;case is.ArrowDown:n=Yi(t,1);break;case is.PageUp:n=w?Oi(t,1):Fi(t,1);break;case is.PageDown:n=w?Ni(t,1):Ri(t,1);break;case is.Home:n=fs(t,m,f);break;case is.End:n=function(e){return di(e)}(t)}return n};if(v===is.Enter)return e.preventDefault(),r.handleSelect(b,e),void(!p&&r.setPreSelection(b));if(v===is.Escape)return e.preventDefault(),r.setOpen(!1),void(r.inputOk()||null===(o=(i=r.props).onInputError)||void 0===o||o.call(i,{code:1,msg:Nl}));var D=null;switch(v){case is.ArrowLeft:case is.ArrowRight:case is.ArrowUp:case is.ArrowDown:case is.PageUp:case is.PageDown:case is.Home:case is.End:D=function(e,t){for(var n=e,i=!1,o=0,a=k(e,t);!i;){if(o>=40){a=t;break}c&&a<c&&(n=is.ArrowRight,a=Ps(c,r.props)?k(n,a):c),u&&a>u&&(n=is.ArrowLeft,a=Ps(u,r.props)?k(n,a):u),Ps(a,r.props)?(n!==is.PageUp&&n!==is.Home||(n=is.ArrowRight),n!==is.PageDown&&n!==is.End||(n=is.ArrowLeft),a=k(n,a)):i=!0,o++}return a}(v,b)}if(D){if(e.preventDefault(),r.setState({lastPreSelectChange:Ll}),g&&r.setSelected(D),r.setPreSelection(D),y){var x=xi(b),E=xi(D),S=Di(b),A=Di(D);x!==E||S!==A?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}else null===(s=(a=r.props).onInputError)||void 0===s||s.call(a,{code:1,msg:Nl})}},r.onPopperKeyDown=function(e){e.key===is.Escape&&(e.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1))},r.onClearClick=function(e){e&&e.preventDefault&&e.preventDefault(),r.sendFocusBackToInput();var t=r.props,n=t.selectsRange,i=t.onChange;n?null===i||void 0===i||i([null,null],e):null===i||void 0===i||i(null,e),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(e){"boolean"===typeof r.props.closeOnScroll&&r.props.closeOnScroll?e.target!==document&&e.target!==document.documentElement&&e.target!==document.body||r.setOpen(!1):"function"===typeof r.props.closeOnScroll&&r.props.closeOnScroll(e)&&r.setOpen(!1)},r.renderCalendar=function(){var e,n;return r.props.inline||r.isCalendarOpen()?a.createElement(Rl,ns({showMonthYearDropdown:void 0,ref:function(e){r.calendar=e}},r.props,r.state,{setOpen:r.setOpen,dateFormat:null!==(e=r.props.dateFormatCalendar)&&void 0!==e?e:t.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:Js(r.modifyHolidays()),outsideClickIgnoreClass:r.props.outsideClickIgnoreClass,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:null!==(n=r.props.dropdownMode)&&void 0!==n?n:t.defaultProps.dropdownMode}),r.props.children):null},r.renderAriaLiveRegion=function(){var e,n,i=r.props.locale,o=null!==(e=r.props.dateFormat)&&void 0!==e?e:t.defaultProps.dateFormat,s=r.props.showTimeInput||r.props.showTimeSelect?"PPPPp":"PPPP";return n=r.props.selectsRange?"Selected start date: ".concat(hs(r.props.startDate,{dateFormat:s,locale:i}),". ").concat(r.props.endDate?"End date: "+hs(r.props.endDate,{dateFormat:s,locale:i}):""):r.props.showTimeSelectOnly?"Selected time: ".concat(hs(r.props.selected,{dateFormat:o,locale:i})):r.props.showYearPicker?"Selected year: ".concat(hs(r.props.selected,{dateFormat:"yyyy",locale:i})):r.props.showMonthYearPicker?"Selected month: ".concat(hs(r.props.selected,{dateFormat:"MMMM yyyy",locale:i})):r.props.showQuarterYearPicker?"Selected quarter: ".concat(hs(r.props.selected,{dateFormat:"yyyy, QQQ",locale:i})):"Selected date: ".concat(hs(r.props.selected,{dateFormat:s,locale:i})),a.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n)},r.renderDateInput=function(){var e,n,i=Ot(r.props.className,((e={})[r.props.outsideClickIgnoreClass||t.defaultProps.outsideClickIgnoreClass]=r.state.open,e)),o=r.props.customInput||a.createElement("input",{type:"text"}),s=r.props.customInputRef||"ref";return(0,a.cloneElement)(o,((n={})[s]=function(e){r.input=e},n.value=r.getInputValue(),n.onBlur=r.handleBlur,n.onChange=r.handleChange,n.onClick=r.onInputClick,n.onFocus=r.handleFocus,n.onKeyDown=r.onInputKeyDown,n.id=r.props.id,n.name=r.props.name,n.form=r.props.form,n.autoFocus=r.props.autoFocus,n.placeholder=r.props.placeholderText,n.disabled=r.props.disabled,n.autoComplete=r.props.autoComplete,n.className=Ot(o.props.className,i),n.title=r.props.title,n.readOnly=r.props.readOnly,n.required=r.props.required,n.tabIndex=r.props.tabIndex,n["aria-describedby"]=r.props.ariaDescribedBy,n["aria-invalid"]=r.props.ariaInvalid,n["aria-labelledby"]=r.props.ariaLabelledBy,n["aria-required"]=r.props.ariaRequired,n))},r.renderClearButton=function(){var e=r.props,t=e.isClearable,n=e.disabled,i=e.selected,o=e.startDate,s=e.endDate,l=e.clearButtonTitle,c=e.clearButtonClassName,u=void 0===c?"":c,d=e.ariaLabelClose,h=void 0===d?"Close":d,p=e.selectedDates,m=e.readOnly;return!t||m||null==i&&null==o&&null==s&&!(null===p||void 0===p?void 0:p.length)?null:a.createElement("button",{type:"button",className:Ot("react-datepicker__close-icon",u,{"react-datepicker__close-icon--disabled":n}),disabled:n,"aria-label":h,onClick:r.onClearClick,title:l,tabIndex:-1})},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return ts(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,outsideClickIgnoreClass:Tl,readOnly:!1,rangeSeparator:" - ",withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:12,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(e,t){var n,r,i,o,a,s;e.inline&&(a=e.selected,s=this.props.selected,a&&s?xi(a)!==xi(s)||Di(a)!==Di(s):a!==s)&&this.setPreSelection(this.props.selected),void 0!==this.state.monthSelectedIn&&e.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),e.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:Zs(this.props.highlightDates)}),t.focused||As(e.selected,this.props.selected)||this.setState({inputValue:null}),t.open!==this.state.open&&(!1===t.open&&!0===this.state.open&&(null===(r=(n=this.props).onCalendarOpen)||void 0===r||r.call(n)),!0===t.open&&!1===this.state.open&&(null===(o=(i=this.props).onCalendarClose)||void 0===o||o.call(i)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var e=this.props,t=e.showIcon,n=e.icon,r=e.calendarIconClassname,i=e.calendarIconClassName,o=e.toggleCalendarOnIconClick,s=this.state.open;return r&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),a.createElement("div",{className:"react-datepicker__input-container".concat(t?" react-datepicker__view-calendar-icon":"")},t&&a.createElement(Fl,ns({icon:n,className:Ot(i,!i&&r,s&&"react-datepicker-ignore-onclickoutside")},o?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var e=this.renderCalendar();if(this.props.inline)return e;if(this.props.withPortal){var t=this.state.open?a.createElement(Ml,{enableTabLoop:this.props.enableTabLoop},a.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},e)):null;return this.state.open&&this.props.portalId&&(t=a.createElement(Il,ns({portalId:this.props.portalId},this.props),t)),a.createElement("div",null,this.renderInputContainer(),t)}return a.createElement(_l,ns({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:e,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t}(a.Component),jl="input",Ll="navigate",Bl=n(773);const Wl=a.createContext();function Ul(e){let{children:t}=e;const[n,r]=(0,a.useState)([]),i=a.useCallback(e=>{r(t=>t.filter(t=>t.id!==e))},[]),o=a.useCallback(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;const o=Date.now()+Math.random(),a={id:o,message:e,type:t,duration:n};return r(n=>n.some(n=>n.message===e&&n.type===t)?n:[...n,a]),n>0&&setTimeout(()=>{i(o)},n),o},[i]),s=a.useCallback((e,t)=>o(e,"success",t),[o]),l=a.useCallback((e,t)=>o(e,"error",t),[o]),c=a.useCallback((e,t)=>o(e,"warning",t),[o]),u=a.useCallback((e,t)=>o(e,"info",t),[o]),d=a.useMemo(()=>({showToast:o,success:s,error:l,warning:c,info:u}),[o,s,l,c,u]);return(0,je.jsxs)(Wl.Provider,{value:d,children:[t,(0,je.jsx)("div",{className:"toast-container",children:n.map(e=>(0,je.jsx)(ql,{message:e.message,type:e.type,onClose:()=>i(e.id)},e.id))})]})}function ql(e){let{message:t,type:n,onClose:r}=e;const[i,o]=(0,a.useState)(!1);(0,a.useEffect)(()=>{setTimeout(()=>o(!0),10)},[]);const s=()=>{o(!1),setTimeout(r,300)};return(0,je.jsx)("div",{className:"toast toast-".concat(n," ").concat(i?"toast-visible":""),onClick:s,children:(0,je.jsxs)("div",{className:"toast-content",children:[(0,je.jsxs)("span",{className:"toast-icon",children:["success"===n&&"\u2713","error"===n&&"\u2715","warning"===n&&"\u26a0","info"===n&&"\u2139"]}),(0,je.jsx)("span",{className:"toast-message",children:t}),(0,je.jsx)("button",{className:"toast-close",onClick:s,"aria-label":"Close",children:"\xd7"})]})})}function Hl(){const e=a.useContext(Wl);if(!e)throw new Error("useToast must be used within ToastProvider");return e}function zl(e){let{selected:t,onChange:n,minDate:r,maxDate:i,placeholder:o}=e;return(0,je.jsx)(Ol,{selected:t,onChange:n,minDate:r,maxDate:i,placeholderText:o,className:"modern-date-input",wrapperClassName:"modern-date-wrapper",calendarClassName:"modern-calendar",popperClassName:"modern-popper",showPopperArrow:!1,dateFormat:"MMMM d, yyyy",popperPlacement:"bottom-start",style:{fontSize:"1.1rem",padding:"14px 16px",minWidth:"220px",border:"2px solid rgba(0, 212, 255, 0.3)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.05)",color:"#fff",cursor:"pointer"}})}function Vl(e){let{value:t,onChange:n,maxValue:r,unit:i,zones:o}=e;const[s,l]=(0,a.useState)(!1),c=a.useRef(null),u=225,d=(u+t/r*270)*Math.PI/180,h=150,p=150,m=120,f=h+m*Math.cos(d),g=p+m*Math.sin(d),y=o.find(e=>t>=e.min&&t<=e.max)||o[0],v=e=>{l(!0),e.preventDefault()},w=a.useCallback(e=>{if(!s||!c.current)return;e.preventDefault();const t=c.current.getBoundingClientRect(),i=e.clientX||e.touches&&e.touches[0].clientX,o=e.clientY||e.touches&&e.touches[0].clientY,a=i-t.left-h,l=o-t.top-p;let u,d=180*Math.atan2(l,a)/Math.PI;if(d<0&&(d+=360),d>=225||d<=135){u=d>=225?d-225:d+135;const e=Math.round(u/270*r);n(Math.max(0,Math.min(r,e)))}},[s,h,p,r,n]),b=a.useCallback(()=>{l(!1)},[]);return a.useEffect(()=>{if(s)return document.addEventListener("mousemove",w),document.addEventListener("mouseup",b),document.addEventListener("touchmove",w,{passive:!1}),document.addEventListener("touchend",b),()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",b),document.removeEventListener("touchmove",w),document.removeEventListener("touchend",b)}},[s,w,b]),(0,je.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"20px 0",userSelect:"none"},children:[(0,je.jsxs)("div",{ref:c,style:{position:"relative",width:"300px",height:"300px",cursor:s?"grabbing":"grab",touchAction:"none"},onMouseDown:v,onTouchStart:v,children:[(0,je.jsxs)("svg",{width:"300",height:"300",style:{position:"absolute"},children:[o.map((e,t)=>{const n=u+e.min/r*270,i=u+e.max/r*270,o=n*Math.PI/180,a=i*Math.PI/180,s=h+m*Math.cos(o),l=p+m*Math.sin(o),c=h+m*Math.cos(a),d=p+m*Math.sin(a),f=i-n>180?1:0;return(0,je.jsx)("path",{d:"M ".concat(s," ").concat(l," A ").concat(m," ").concat(m," 0 ").concat(f," 1 ").concat(c," ").concat(d),stroke:e.color,strokeWidth:"20",fill:"none",opacity:.3},t)}),t>0&&(0,je.jsx)("path",{d:"M ".concat(h+m*Math.cos(u*Math.PI/180)," ").concat(p+m*Math.sin(u*Math.PI/180)," A ").concat(m," ").concat(m," 0 ").concat(t/r*270>180?1:0," 1 ").concat(f," ").concat(g),stroke:y.color,strokeWidth:"8",fill:"none"})]}),(0,je.jsx)("div",{style:{position:"absolute",left:f-15,top:g-15,width:"30px",height:"30px",borderRadius:"50%",backgroundColor:y.color,border:"3px solid white",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",cursor:"grab",zIndex:10}}),(0,je.jsxs)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",textAlign:"center",pointerEvents:"none"},children:[(0,je.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:y.color},children:t}),(0,je.jsx)("div",{style:{fontSize:"0.9rem",color:"#D1D5DB",marginTop:"4px"},children:i}),(0,je.jsx)("div",{style:{fontSize:"0.8rem",color:y.color,marginTop:"8px",fontWeight:"500"},children:y.label})]})]}),(0,je.jsx)("div",{style:{display:"flex",gap:"8px",marginTop:"16px",flexWrap:"wrap",justifyContent:"center"},children:o.map((e,r)=>(0,je.jsx)("button",{onClick:()=>n(Math.floor((e.min+e.max)/2)),style:{padding:"6px 12px",borderRadius:"20px",border:"2px solid ".concat(e.color),backgroundColor:t>=e.min&&t<=e.max?e.color:"transparent",color:t>=e.min&&t<=e.max?"white":e.color,fontSize:"0.8rem",cursor:"pointer",transition:"all 0.2s ease"},children:e.label},r))})]})}const Kl=function(e){let{onComplete:t}=e;const n=re(),r=Hl(),[i,o]=(0,a.useState)(1),[s,l]=(0,a.useState)(!1),[u,d]=(0,a.useState)(!1),[h,p]=(0,a.useState)({goal:"",raceDistance:"",raceElevationProfile:"",experienceLevel:"",currentRaceTime:"",currentWeeklyMileage:"",currentLongRunDistance:"",recentRaceDistance:"",recentRaceTime:"",confirmedNoRaceTime:!1,workoutsPerWeek:"",runsPerWeek:"",availableDays:[],preferredBikeDays:[],longRunDay:"",hardSessionsPerWeek:"",hardSessionDays:[],startDate:"",raceDate:"",missedWorkoutPreference:"modify",standUpBikeType:null,runningStatus:"active",crossTrainingEquipment:{pool:!1,elliptical:!1,stationaryBike:!1,swimming:!1,rowing:!1,walking:!1},primaryCrossTrainingEquipment:null,injuries:{itBand:!1,plantarFasciitis:!1,shinSplints:!1,kneeIssues:!1,lowerBackPain:!1,achillesTendonitis:!1,stressFracture:!1,hipIssues:!1,ankleIssues:!1,other:!1},injuryDescription:null,location:"",climate:"",trainingStyle:"adventure",trainingPhilosophy:"practical_periodization"}),m=(e,t)=>{p(n=>(0,c.A)((0,c.A)({},n),{},{[e]:t}))},f=e=>5!==e,g=e=>{let t=e+1;for(;t<=7&&!f(t);)t++;return t},y=async()=>{try{var e,i;if(!h.currentRaceTime)return void r.warning("Goal race time is required to calculate your training paces. Please select your target race time.");const a=((e,t)=>{if(!e||!t||0===t.length)return{adjustedDate:e,wasAdjusted:!1};const n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r=new Date(e+"T00:00:00"),i=new Date(r);let o=0;for(;o<7;){const a=n[r.getDay()];if(t.includes(a)){const t=r.getFullYear(),o=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0"),l="".concat(t,"-").concat(o,"-").concat(s),c=r.getTime()!==i.getTime();return c&&Oe.A.log("\ud83d\udcc5 Start date adjusted from ".concat(e," (").concat(n[i.getDay()],") to ").concat(l," (").concat(a,") - original date was a rest day")),{adjustedDate:l,wasAdjusted:c,originalDayName:n[i.getDay()],newDayName:a}}r.setDate(r.getDate()+1),o++}return{adjustedDate:e,wasAdjusted:!1}})(h.startDate,h.availableDays);if(a.wasAdjusted){h.startDate=a.adjustedDate;const e="Your start date has been automatically adjusted from ".concat(a.originalDayName," to ").concat(a.newDayName," because ").concat(a.originalDayName," is marked as a rest day in your schedule.");Oe.A.log("\u26a0\ufe0f ".concat(e)),r.info(e,8e3)}l(!0),Oe.A.log("\ud83e\udd16 Generating AI training plan...");const s=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].filter(e=>!h.availableDays.includes(e)),u=Pe.j2.currentUser,d=(null===u||void 0===u?void 0:u.displayName)||(null===u||void 0===u||null===(e=u.email)||void 0===e?void 0:e.split("@")[0])||null;Oe.A.log("\ud83d\udc64 User name from Firebase Auth:",{displayName:null===u||void 0===u?void 0:u.displayName,email:null===u||void 0===u?void 0:u.email,extractedName:d});const p=new Ve.O;let m=h.recentRaceTime,f=!1;if(!m&&h.currentRaceTime&&h.raceDistance){const e=h.currentRaceTime.includes("-")?h.currentRaceTime.split("-")[1]:h.currentRaceTime;m=p.addBufferToTime(e,1.15),f=!0,Oe.A.log("\u26a0\ufe0f No recent race time provided. Defaulting to Safe Baseline:",m)}const g={raceDistance:h.raceDistance,raceTime:h.currentRaceTime,raceDate:h.raceDate||(new Date).toISOString().split("T")[0],startDate:a.adjustedDate,raceElevationProfile:h.raceElevationProfile||"",currentWeeklyMileage:h.currentWeeklyMileage,currentLongRun:h.currentLongRunDistance,recentRaceTime:m||h.currentRaceTime,recentRaceDistance:h.recentRaceDistance||h.raceDistance,isEstimatedFitness:f,workoutsPerWeek:h.availableDays.length,runsPerWeek:h.availableDays.length,availableDays:h.availableDays,restDays:s,longRunDay:h.longRunDay,qualityDays:h.hardSessionDays,standUpBikeType:h.standUpBikeType,preferredBikeDays:h.preferredBikeDays,crossTrainingEquipment:h.crossTrainingEquipment,primaryCrossTrainingEquipment:h.primaryCrossTrainingEquipment,injuries:h.injuries,injuryDescription:h.injuryDescription,experienceLevel:h.experienceLevel,climate:h.climate,location:h.location,runningStatus:h.runningStatus,trainingStyle:h.trainingStyle||"adventure",trainingPhilosophy:h.trainingPhilosophy||"practical_periodization",units:"imperial",name:d,displayName:d};Oe.A.log("\ud83d\udc64 User profile:",g),Oe.A.log("\ud83c\udfd7\ufe0f Step 1: Generating deterministic plan structure...");const y=St.generatePlanStructure(g);if(!y||!y.weeks||0===y.weeks.length)throw new Error("Failed to generate plan structure - weeks array is missing");Oe.A.log("\u2705 Plan structure generated: ".concat(y.weeks.length," weeks")),Oe.A.log("\ud83e\udd16 Step 2: Adding AI coaching analysis...");let v=null;try{const e=await _t.generateCoachingAnalysis(g);if(!e.success)throw new Error(e.error||"Failed to generate coaching");v=e.analysis,Oe.A.log("\u2705 AI coaching analysis generated")}catch(o){Oe.A.warn("\u26a0\ufe0f AI coaching failed, continuing without it:",o),v="Welcome to your training plan! This plan is designed specifically for your goals and schedule."}const w=(0,c.A)((0,c.A)({},y),{},{aiCoachingAnalysis:v,fullPlanText:v||"Your personalized training plan"});if(Oe.A.log("\ud83d\udcca Final plan check:",{hasPlan:!!w,hasWeeks:!(null===w||void 0===w||!w.weeks),weeksLength:null===w||void 0===w||null===(i=w.weeks)||void 0===i?void 0:i.length,hasCoaching:!(null===w||void 0===w||!w.aiCoachingAnalysis)}),!w.weeks||0===w.weeks.length)throw Oe.A.error("\u274c CRITICAL: Plan generated but weeks array is empty!"),Oe.A.error("   Plan keys:",Object.keys(w)),new Error("Plan structure is invalid - weeks array is missing. Please try again or contact support.");Oe.A.log("\u2705 Plan validated: ".concat(w.weeks.length," weeks with workouts")),await t(h,w),n("/welcome")}catch(a){console.error("Error in plan generation or saving:",a),r.error("There was a problem creating or saving your plan. Please try again. Error: "+a.message,1e4)}finally{l(!1)}};return s?(0,je.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 20px",textAlign:"center"},children:[(0,je.jsx)("div",{style:{width:"60px",height:"60px",border:"4px solid rgba(0, 212, 255, 0.2)",borderTop:"4px solid #00d4ff",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"24px"}}),(0,je.jsx)("h2",{style:{color:"#fff",marginBottom:"12px"},children:"Generating Your Personalized Training Plan..."}),(0,je.jsx)("p",{style:{color:"#9CA3AF",maxWidth:"400px"},children:"Our AI coach is analyzing your goals, fitness level, and schedule to create a custom plan just for you."}),(0,je.jsx)("style",{children:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        "})]}):(0,je.jsxs)(je.Fragment,{children:[u&&(0,je.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4,padding:"20px"},onClick:e=>{e.target===e.currentTarget&&d(!1)},children:(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%)",border:"1px solid #333",borderRadius:"12px",width:"100%",maxWidth:"500px",padding:"32px",position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,je.jsx)("h2",{style:{margin:"0 0 16px 0",fontSize:"1.5rem",color:"#fff",display:"flex",alignItems:"center",gap:"8px"},children:"\u26a0\ufe0f Missing Recent Race Time?"}),(0,je.jsx)("p",{style:{margin:"0 0 24px 0",fontSize:"1rem",color:"#E5E7EB",lineHeight:"1.6"},children:"We recommend entering a recent race result for the most accurate training paces. If you don't have one, we will build a plan based on a safe estimate."}),(0,je.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[(0,je.jsx)("button",{onClick:()=>{d(!1)},className:"btn btn-secondary",style:{minWidth:"120px"},children:"Add Time"}),(0,je.jsx)("button",{onClick:()=>{p(e=>(0,c.A)((0,c.A)({},e),{},{confirmedNoRaceTime:!0,isEstimatedFitness:!0})),d(!1);const e=g(i);e<=7?(o(e),window.scrollTo({top:0,behavior:"smooth"})):y()},className:"btn btn-primary",style:{minWidth:"160px"},children:"Continue Without"})]})]})}),(0,je.jsx)("div",{style:{minHeight:"100vh",padding:"20px 0"},children:(0,je.jsxs)("div",{className:"container",children:[(0,je.jsx)("div",{className:"progress-bar",style:{marginBottom:"20px"},children:(0,je.jsx)("div",{className:"progress-fill",style:{width:"".concat(i/7*100,"%")}})}),(0,je.jsx)("div",{style:{textAlign:"center",marginBottom:"20px"},children:(0,je.jsxs)("p",{style:{color:"#E5E7EB",margin:0},children:["Step ",i," of ",7]})}),(0,je.jsxs)("div",{className:"card fade-in",children:[function(){switch(i){case 1:return(0,je.jsxs)("div",{children:[(0,je.jsx)("h2",{style:{color:"#FFFFFF",fontWeight:"700",fontSize:"1.75rem",marginBottom:"16px"},children:"Training Goals & Background"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Let's understand your running journey!"})," We'll collect your basic info to create the perfect plan."]}),(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"What's your main training goal?"}),(0,je.jsx)("div",{className:"card-grid",children:[{id:"race",name:"Train for a race",icon:"\ud83c\udfc6"},{id:"distance",name:"Run a specific distance",icon:"\ud83d\udccf"}].map(e=>(0,je.jsxs)("div",{className:"equipment-card ".concat(h.goal===e.id?"selected":""),onClick:()=>m("goal",e.id),children:[(0,je.jsx)("div",{className:"equipment-icon",children:e.icon}),(0,je.jsx)("p",{className:"equipment-name",children:e.name})]},e.id))})]}),(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"What distance are you training for?"}),(0,je.jsx)("div",{className:"card-grid",children:[{id:"5K",name:"5K",popular:!0},{id:"10K",name:"10K",popular:!0},{id:"Half",name:"Half Marathon",popular:!0},{id:"Marathon",name:"Marathon",popular:!0}].map(e=>(0,je.jsxs)("div",{className:"equipment-card ".concat(h.raceDistance===e.id?"selected":""),onClick:()=>m("raceDistance",e.id),children:[(0,je.jsx)("p",{className:"equipment-name",children:e.name}),e.popular&&(0,je.jsx)("div",{className:"badge badge-success",children:"Popular"}),e.badge&&(0,je.jsx)("div",{className:"badge badge-info",children:e.badge})]},e.id))})]}),(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"What's the elevation profile of your race?"}),(0,je.jsx)("p",{children:"This helps us customize your hill training for your specific race demands!"}),(0,je.jsx)("div",{className:"card-grid",children:[{id:"flat",name:"\ud83c\udfd9\ufe0f Flat",desc:"Minimal elevation change",badge:"Speed Focus"},{id:"rolling",name:"\ud83c\udf0a Rolling",desc:"Gentle hills throughout",badge:"Balanced"},{id:"moderate",name:"\u26f0\ufe0f Moderate",desc:"Some significant hills",badge:"Hill Training"},{id:"hilly",name:"\ud83c\udfd4\ufe0f Hilly",desc:"Major elevation challenges",badge:"Power Focus"}].map(e=>(0,je.jsxs)("div",{className:"card ".concat(h.raceElevationProfile===e.id?"selected":""),onClick:()=>m("raceElevationProfile",e.id),style:{cursor:"pointer",padding:"16px",textAlign:"center"},children:[(0,je.jsx)("h4",{style:{margin:"0 0 8px 0",fontSize:"1.1rem"},children:e.name}),(0,je.jsx)("p",{style:{margin:"0 0 8px 0",fontSize:"0.85rem",color:"#ccc"},children:e.desc}),(0,je.jsx)("div",{className:"badge badge-info",style:{fontSize:"0.75rem"},children:e.badge})]},e.id))}),(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Smart Training:"})," We'll adjust your hill workout frequency based on your race profile. Flat races get speed focus, hilly races get power development!"]})})]}),(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"How would you rate your running ability?"}),(0,je.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"16px"},children:[{id:"beginner",name:"Beginner",desc:"New to running or returning after a break"},{id:"intermediate",name:"Intermediate",desc:"Running regularly, some race experience"},{id:"advanced",name:"Advanced",desc:"Experienced with structured training"},{id:"elite",name:"Elite",desc:"Competitive athlete with advanced training needs"}].map(e=>(0,je.jsxs)("div",{className:"card ".concat(h.experienceLevel===e.id?"selected":""),onClick:()=>m("experienceLevel",e.id),style:{cursor:"pointer",padding:"20px"},children:[(0,je.jsx)("h4",{style:{margin:"0 0 8px 0"},children:e.name}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem"},children:e.desc})]},e.id))})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"What's your GOAL race time?"}),(0,je.jsx)("p",{style:{fontSize:"0.95rem",color:"#D1D5DB",marginBottom:"16px"},children:"\ud83d\udcaa Be ambitious! We'll build your training paces around your target finish time."}),(0,je.jsx)("div",{style:{marginBottom:"20px"},children:(0,je.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[(0,je.jsx)("button",{className:"btn ".concat(h.customTimeEntry?"btn-secondary":"btn-primary"),onClick:()=>{m("customTimeEntry",!1),m("currentRaceTime","")},type:"button",children:"\ud83d\udccb Quick Pick"}),(0,je.jsx)("button",{className:"btn ".concat(h.customTimeEntry?"btn-primary":"btn-secondary"),onClick:()=>{m("customTimeEntry",!0),m("currentRaceTime",""),m("customRaceDistance",h.raceDistance)},type:"button",children:"\u2328\ufe0f Enter My Goal"})]})}),h.customTimeEntry?(0,je.jsxs)("div",{children:[(0,je.jsxs)("div",{className:"form-group",children:[(0,je.jsx)("label",{className:"form-label",children:"Race Distance"}),(0,je.jsx)("div",{className:"form-input",style:{background:"rgba(99, 102, 241, 0.1)",border:"1px solid rgba(99, 102, 241, 0.3)",padding:"12px",cursor:"not-allowed"},children:h.raceDistance||"Not selected"}),(0,je.jsx)("p",{style:{fontSize:"0.85rem",color:"#D1D5DB",marginTop:"4px"},children:"Distance selected in Step 2"})]}),(0,je.jsxs)("div",{className:"form-group",children:[(0,je.jsx)("label",{className:"form-label",children:"Your Goal Time (HH:MM:SS or MM:SS)"}),(0,je.jsx)("input",{type:"text",className:"form-input",placeholder:"e.g., 1:45:30 or 25:45",value:h.customRaceTime||"",onChange:e=>{m("customRaceTime",e.target.value),h.raceDistance&&e.target.value&&m("currentRaceTime","".concat(h.raceDistance,"-").concat(e.target.value))}})]})]}):(0,je.jsxs)("div",{className:"form-group",children:[(0,je.jsxs)("label",{className:"form-label",children:["Select Your Goal ",h.raceDistance||"Race"," Time"]}),(0,je.jsxs)("select",{className:"form-input form-select",value:h.currentRaceTime,onChange:e=>m("currentRaceTime",e.target.value),required:!0,disabled:!h.raceDistance,children:[(0,je.jsx)("option",{value:"",children:h.raceDistance?"Select your ".concat(h.raceDistance," goal time"):"Select race distance first"}),"5K"===h.raceDistance&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("option",{value:"5K-15:00",children:"15:00 (Elite)"}),(0,je.jsx)("option",{value:"5K-18:00",children:"18:00 (Fast)"}),(0,je.jsx)("option",{value:"5K-20:00",children:"20:00 (Strong)"}),(0,je.jsx)("option",{value:"5K-22:00",children:"22:00 (Solid)"}),(0,je.jsx)("option",{value:"5K-25:00",children:"25:00 (Good)"}),(0,je.jsx)("option",{value:"5K-28:00",children:"28:00 (Steady)"}),(0,je.jsx)("option",{value:"5K-30:00",children:"30:00 (Building)"}),(0,je.jsx)("option",{value:"5K-35:00",children:"35:00 (Developing)"}),(0,je.jsx)("option",{value:"5K-40:00",children:"40:00 (Starting)"})]}),"10K"===h.raceDistance&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("option",{value:"10K-32:00",children:"32:00 (Elite)"}),(0,je.jsx)("option",{value:"10K-38:00",children:"38:00 (Fast)"}),(0,je.jsx)("option",{value:"10K-42:00",children:"42:00 (Strong)"}),(0,je.jsx)("option",{value:"10K-45:00",children:"45:00 (Solid)"}),(0,je.jsx)("option",{value:"10K-50:00",children:"50:00 (Good)"}),(0,je.jsx)("option",{value:"10K-55:00",children:"55:00 (Steady)"}),(0,je.jsx)("option",{value:"10K-60:00",children:"60:00 (Building)"}),(0,je.jsx)("option",{value:"10K-70:00",children:"70:00 (Developing)"}),(0,je.jsx)("option",{value:"10K-80:00",children:"80:00 (Starting)"})]}),"Half"===h.raceDistance&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("option",{value:"Half-1:10:00",children:"1:10:00 (Elite)"}),(0,je.jsx)("option",{value:"Half-1:25:00",children:"1:25:00 (Fast)"}),(0,je.jsx)("option",{value:"Half-1:35:00",children:"1:35:00 (Strong)"}),(0,je.jsx)("option",{value:"Half-1:45:00",children:"1:45:00 (Solid)"}),(0,je.jsx)("option",{value:"Half-2:00:00",children:"2:00:00 (Good)"}),(0,je.jsx)("option",{value:"Half-2:15:00",children:"2:15:00 (Steady)"}),(0,je.jsx)("option",{value:"Half-2:30:00",children:"2:30:00 (Building)"}),(0,je.jsx)("option",{value:"Half-2:45:00",children:"2:45:00 (Developing)"}),(0,je.jsx)("option",{value:"Half-3:00:00",children:"3:00:00 (Starting)"})]}),"Marathon"===h.raceDistance&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("option",{value:"Marathon-2:30:00",children:"2:30:00 (Elite)"}),(0,je.jsx)("option",{value:"Marathon-3:00:00",children:"3:00:00 (Very Fast)"}),(0,je.jsx)("option",{value:"Marathon-3:20:00",children:"3:20:00 (Fast)"}),(0,je.jsx)("option",{value:"Marathon-3:30:00",children:"3:30:00 (Strong)"}),(0,je.jsx)("option",{value:"Marathon-4:00:00",children:"4:00:00 (Solid)"}),(0,je.jsx)("option",{value:"Marathon-4:30:00",children:"4:30:00 (Good)"}),(0,je.jsx)("option",{value:"Marathon-5:00:00",children:"5:00:00 (Steady)"}),(0,je.jsx)("option",{value:"Marathon-5:30:00",children:"5:30:00 (Building)"}),(0,je.jsx)("option",{value:"Marathon-6:00:00",children:"6:00:00 (Developing)"}),(0,je.jsx)("option",{value:"Marathon-6:30:00",children:"6:30:00 (Starting)"})]})]}),!h.raceDistance&&(0,je.jsx)("p",{style:{fontSize:"0.85rem",color:"#FFB366",marginTop:"8px"},children:"\u2b06\ufe0f Please select your race distance first"})]}),h.currentRaceTime&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Goal set!"})," All your training paces will be calculated to help you achieve this time.",(0,je.jsx)("br",{}),(0,je.jsx)("span",{style:{fontSize:"0.85rem",color:"#D1D5DB"},children:"\ud83d\udca1 Workouts feeling too hard? You can always adjust your goal later!"})]})})]}),(0,je.jsxs)("div",{style:{marginBottom:"32px",marginTop:"40px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Recent Race Result (Recommended)"}),(0,je.jsxs)("p",{style:{marginBottom:"16px"},children:[(0,je.jsx)("strong",{children:"\ud83d\udcca Help us assess your current fitness!"})," A recent race time helps us set realistic training paces."]}),(0,je.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[(0,je.jsxs)("div",{children:[(0,je.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"#E5E7EB"},children:"Race Distance"}),(0,je.jsxs)("select",{className:"form-input form-select",value:h.recentRaceDistance,onChange:e=>m("recentRaceDistance",e.target.value),style:{width:"100%"},children:[(0,je.jsx)("option",{value:"",children:"Select distance"}),(0,je.jsx)("option",{value:"5K",children:"5K"}),(0,je.jsx)("option",{value:"10K",children:"10K"}),(0,je.jsx)("option",{value:"Half",children:"Half Marathon"}),(0,je.jsx)("option",{value:"Marathon",children:"Marathon"})]})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"#E5E7EB"},children:"Finish Time"}),(0,je.jsx)("input",{type:"text",className:"form-input",placeholder:"e.g., 1:07:35 or 25:30",value:h.recentRaceTime,onChange:e=>m("recentRaceTime",e.target.value),style:{width:"100%"}})]})]}),h.recentRaceDistance&&h.recentRaceTime&&(0,je.jsx)("div",{style:{marginTop:"16px",padding:"12px 16px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(5, 150, 105, 0.1) 100%)",borderRadius:"8px",border:"1px solid rgba(16, 185, 129, 0.3)"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\u2705 Got it!"})," Your ",h.recentRaceDistance," time of ",h.recentRaceTime," will help us calculate your VDOT and set appropriate training paces."]})}),!h.recentRaceDistance&&!h.recentRaceTime&&(0,je.jsx)("p",{style:{marginTop:"12px",fontSize:"0.85rem",color:"#9CA3AF",fontStyle:"italic"},children:"\ud83d\udca1 No recent race? No problem! We'll use your goal time to estimate training paces."})]}),(0,je.jsxs)("div",{style:{marginBottom:"32px",marginTop:"40px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Current Training Assessment"}),(0,je.jsx)("p",{children:"Tell us about your current training so we can create a safe, progressive plan."}),(0,je.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,je.jsx)("h4",{style:{color:"#F8F9FA",fontWeight:"600",fontSize:"1.1rem",marginBottom:"10px"},children:"What's your current weekly mileage?"}),(0,je.jsx)("p",{style:{fontSize:"0.9rem",margin:"0 0 24px 0",color:"#ccc"},children:"Include all running and running-equivalent activities (cycling at 3:1 ratio, elliptical at 2:1)"}),(0,je.jsx)(Vl,{value:parseInt(h.currentWeeklyMileage)||0,onChange:e=>m("currentWeeklyMileage",e.toString()),maxValue:80,unit:"miles/week",zones:[{min:0,max:10,label:"Building Base",color:"#4CAF50"},{min:11,max:25,label:"Light Base",color:"#2196F3"},{min:26,max:40,label:"Solid Base",color:"#FF9800"},{min:41,max:60,label:"High Volume",color:"#F44336"},{min:61,max:80,label:"Elite Volume",color:"#9C27B0"}]})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("h4",{style:{color:"#F8F9FA",fontWeight:"600",fontSize:"1.1rem",marginBottom:"10px"},children:"What's your current long run distance?"}),(0,je.jsx)("p",{style:{fontSize:"0.9rem",margin:"0 0 24px 0",color:"#ccc"},children:"Your longest single run in the past 4 weeks"}),(0,je.jsx)(Vl,{value:parseInt(h.currentLongRunDistance)||0,onChange:e=>m("currentLongRunDistance",e.toString()),maxValue:26,unit:"miles",zones:[{min:0,max:3,label:"Building Base",color:"#4CAF50"},{min:4,max:8,label:"5K-10K Ready",color:"#2196F3"},{min:9,max:13,label:"Half Base",color:"#FF9800"},{min:14,max:18,label:"Strong Endurance",color:"#F44336"},{min:19,max:26,label:"Marathon Ready",color:"#9C27B0"}]})]})]})]});case 2:return(0,je.jsxs)("div",{children:[(0,je.jsx)("h2",{style:{color:"#FFFFFF",fontWeight:"700",fontSize:"1.75rem",marginBottom:"16px"},children:"Training Schedule & Frequency"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83d\uddd3\ufe0f Let's plan your training week!"})," Tell us about your schedule and preferences."]}),(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"How many days per week would you like to train?"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83d\ude80 Unlike other apps, we don't restrict your choices!"})," Pick what works for your schedule."]}),(0,je.jsx)("div",{className:"card-grid",children:[{days:3,desc:"Minimal time commitment",good:"Busy schedules, recovery focus",recommended:"beginner"===h.experienceLevel},{days:4,desc:"Balanced approach",good:"Most popular, sustainable",recommended:"intermediate"===h.experienceLevel},{days:5,desc:"Serious training",good:"Race goals, fitness gains",recommended:"advanced"===h.experienceLevel},{days:6,desc:"High volume",good:"Perfect for stand-up bike integration",recommended:!1},{days:7,desc:"Maximum frequency",good:"Elite athletes, varied intensities",recommended:"elite"===h.experienceLevel}].map(e=>(0,je.jsxs)("div",{className:"card ".concat(h.workoutsPerWeek===e.days?"selected":""),onClick:()=>m("workoutsPerWeek",e.days),style:{cursor:"pointer",textAlign:"center"},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",marginBottom:"6px"},children:[(0,je.jsx)("h4",{style:{fontSize:"1.4rem",margin:0,color:"#00D4FF"},children:e.days}),e.recommended&&(0,je.jsx)("span",{style:{fontSize:"0.8rem"},children:"\u2b50"})]}),(0,je.jsx)("p",{style:{margin:"0 0 8px 0",fontWeight:"600"},children:e.desc}),(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.8rem",color:"#D1D5DB"},children:["Good for: ",e.good]}),e.recommended&&(0,je.jsxs)("div",{className:"badge badge-success",style:{marginTop:"8px"},children:["Recommended for ","advanced"===h.experienceLevel?"advanced runners":"".concat(h.experienceLevel," runners")]})]},e.days))})]}),h.workoutsPerWeek&&(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Which days are you available to train?"}),(0,je.jsxs)("p",{children:["Select ",h.workoutsPerWeek," days that work best for your schedule."]}),(0,je.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"10px",maxWidth:"500px",margin:"0 auto"},children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(e=>{const t=h.availableDays.includes(e),n=h.availableDays.length>=h.workoutsPerWeek,r=!t&&n;return(0,je.jsxs)("div",{className:"equipment-card ".concat(t?"selected":""," ").concat(r?"disabled":""),onClick:()=>{if(h.availableDays.includes(e)){const t=h.availableDays.filter(t=>t!==e);m("availableDays",t)}else if(h.availableDays.length<h.workoutsPerWeek){const t=[...h.availableDays,e];m("availableDays",t)}},style:{opacity:r?.4:1,cursor:r?"not-allowed":"pointer"},children:[(0,je.jsx)("p",{className:"equipment-name",children:e}),r&&(0,je.jsx)("span",{style:{fontSize:"0.7rem",color:"#D1D5DB"},children:"Limit reached"})]},e)})}),(0,je.jsx)("div",{className:"card",style:{background:h.availableDays.length===h.workoutsPerWeek?"rgba(0, 255, 136, 0.1)":"rgba(255, 184, 0, 0.1)",border:h.availableDays.length===h.workoutsPerWeek?"1px solid rgba(0, 255, 136, 0.3)":"1px solid rgba(255, 184, 0, 0.3)",marginTop:"16px"},children:(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem"},children:h.availableDays.length===h.workoutsPerWeek?"\u2705 Perfect! Selected all ".concat(h.workoutsPerWeek," training days."):"Selected: ".concat(h.availableDays.length,"/").concat(h.workoutsPerWeek," days ").concat(h.availableDays.length<h.workoutsPerWeek?"(select more)":"")})})]}),h.availableDays.length===h.workoutsPerWeek&&(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Which day do you prefer for your long run?"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83c\udfc3\u200d\u2642\ufe0f Personal preference matters!"})," Pick the day that works best for your schedule."]}),(0,je.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"10px",maxWidth:"500px",margin:"0 auto"},children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].filter(e=>h.availableDays.includes(e)).map(e=>(0,je.jsxs)("div",{className:"equipment-card ".concat(h.longRunDay===e?"selected":""),onClick:()=>m("longRunDay",e),children:[(0,je.jsx)("p",{className:"equipment-name",children:e}),("Saturday"===e||"Sunday"===e)&&(0,je.jsx)("div",{className:"badge badge-success",style:{marginTop:"4px",fontSize:"0.7rem"},children:"Popular choice"})]},e))}),h.longRunDay&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Great choice!"})," Your long runs will be scheduled on ",h.longRunDay,"s."]})})]}),h.longRunDay&&(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Let's talk about your hard sessions!"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83c\udfc3\u200d\u2642\ufe0f Coach's question:"})," In addition to your long run, how many hard sessions (speed, tempo, hills) would you like per week?"]}),(0,je.jsx)("div",{style:{display:"flex",gap:"16px",justifyContent:"center"},children:[1,2].map(e=>(0,je.jsxs)("div",{className:"card ".concat(h.hardSessionsPerWeek===e?"selected":""),onClick:()=>m("hardSessionsPerWeek",e),style:{cursor:"pointer",textAlign:"center",minWidth:"120px"},children:[(0,je.jsx)("h4",{style:{fontSize:"2rem",margin:"0 0 8px 0",color:"#00D4FF"},children:e}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem"},children:1===e?"One hard session":"Two hard sessions"}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#D1D5DB"},children:1===e?"Focus & recovery":"Balanced training"})]},e))}),h.hardSessionsPerWeek&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Perfect!"})," You'll get ",h.hardSessionsPerWeek," quality ",1===h.hardSessionsPerWeek?"session":"sessions"," per week, plus your long run for a total of ",h.hardSessionsPerWeek+1," focused training days."]})})]}),h.hardSessionsPerWeek&&(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"What days do you want your hard sessions?"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83d\udcaa Your preference matters!"})," Pick the days that work best for your energy and schedule."]}),(0,je.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"10px",maxWidth:"500px",margin:"0 auto"},children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].filter(e=>h.availableDays.includes(e)&&e!==h.longRunDay).map(e=>{const t=h.hardSessionDays.includes(e),n=h.hardSessionDays.length>=h.hardSessionsPerWeek,r=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].indexOf(e),i=h.hardSessionDays.some(e=>{const t=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].indexOf(e);return 1===Math.abs(r-t)}),o=!t&&n||!t&&i,a=!t&&i?"Hard sessions need recovery days between them":null;return(0,je.jsxs)("div",{className:"equipment-card ".concat(t?"selected":""," ").concat(o?"disabled":""),onClick:()=>{if(h.hardSessionDays.includes(e)){const t=h.hardSessionDays.filter(t=>t!==e);m("hardSessionDays",t)}else if(h.hardSessionDays.length<h.hardSessionsPerWeek&&!i){const t=[...h.hardSessionDays,e];m("hardSessionDays",t)}},style:{opacity:o?.4:1,cursor:o?"not-allowed":"pointer",position:"relative"},title:a||"",children:[(0,je.jsx)("p",{className:"equipment-name",children:e}),a&&(0,je.jsx)("div",{style:{position:"absolute",bottom:"2px",left:"50%",transform:"translateX(-50%)",fontSize:"0.65rem",color:"#FF6B6B",textAlign:"center",lineHeight:"1.1",whiteSpace:"nowrap"},children:"\u26a0\ufe0f Need recovery"}),o&&!a&&(0,je.jsx)("span",{style:{fontSize:"0.7rem",color:"#D1D5DB"},children:"Limit reached"})]},e)})}),(0,je.jsx)("div",{className:"card",style:{background:h.hardSessionDays.length===h.hardSessionsPerWeek?"rgba(0, 255, 136, 0.1)":"rgba(255, 184, 0, 0.1)",border:h.hardSessionDays.length===h.hardSessionsPerWeek?"1px solid rgba(0, 255, 136, 0.3)":"1px solid rgba(255, 184, 0, 0.3)",marginTop:"16px"},children:(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem"},children:h.hardSessionDays.length===h.hardSessionsPerWeek?"\u2705 Excellent! Your hard sessions will be on ".concat(h.hardSessionDays.join(" and "),", with your long run on ").concat(h.longRunDay,"."):"Selected: ".concat(h.hardSessionDays.length,"/").concat(h.hardSessionsPerWeek," hard session days ").concat(h.hardSessionDays.length<h.hardSessionsPerWeek?"(select more)":"")})}),h.hardSessionDays.length===h.hardSessionsPerWeek&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)",marginTop:"8px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Smart scheduling!"})," This gives you proper recovery between hard efforts and sets you up for training success."]})})]})]});case 3:return(0,je.jsxs)("div",{children:[(0,je.jsx)("h2",{style:{color:"#FFFFFF",fontWeight:"700",fontSize:"1.75rem",marginBottom:"16px"},children:"Training Dates"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83d\udcc5 Real dates, real planning!"})," Unlike other apps, we give you actual calendar dates."]}),(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"When would you like to start training?"}),(0,je.jsxs)("div",{className:"form-group",children:[(0,je.jsx)("label",{className:"form-label",children:"Start Date"}),(0,je.jsx)(zl,{selected:h.startDate?new Date(h.startDate+"T00:00:00"):null,onChange:e=>{if(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");m("startDate","".concat(t,"-").concat(n,"-").concat(r))}else m("startDate","")},minDate:new Date,placeholder:"Select your training start date"})]}),h.startDate&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Perfect!"})," Your training will begin on ",new Date(h.startDate+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),".",(0,je.jsx)("br",{}),"We'll schedule workouts on your selected days starting from this date."]})})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"When is your race?"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83c\udfc1 Goal-oriented training!"})," We'll work backwards from your race date to optimize your preparation."]}),(0,je.jsxs)("div",{className:"form-group",style:{marginBottom:"24px"},children:[(0,je.jsx)("label",{className:"form-label",children:"Race Date"}),(0,je.jsx)(zl,{selected:h.raceDate?new Date(h.raceDate+"T00:00:00"):null,onChange:e=>{if(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");m("raceDate","".concat(t,"-").concat(n,"-").concat(r))}else m("raceDate","")},minDate:h.startDate?new Date(h.startDate+"T00:00:00"):new Date,placeholder:"Select your race date"})]}),(0,je.jsx)("div",{style:{minHeight:"120px",marginTop:"16px"},children:h.raceDate&&h.startDate&&(()=>{const e=Math.ceil((new Date(h.raceDate)-new Date(h.startDate))/6048e5),t=h.raceDistance,n={"5K":6,"10K":8,Half:10,Marathon:12}[t]||12,r={"5K":8,"10K":10,Half:12,Marathon:16}[t]||16;let i,o;return e<n?(i={background:"rgba(255, 107, 107, 0.1)",border:"1px solid rgba(255, 107, 107, 0.5)"},o=(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("strong",{children:"\u26a0\ufe0f That's quite ambitious!"})," Your race is on ",new Date(h.raceDate+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),".",(0,je.jsx)("br",{}),"With only ",e," weeks, you'll need an aggressive plan. Most coaches recommend at least ",n," weeks for a ",t,".",(0,je.jsx)("br",{}),(0,je.jsx)("em",{style:{color:"#FFB366"},children:"\ud83d\udca1 Consider moving your start date earlier or choosing a later race for safer preparation."})]})):e<r?(i={background:"rgba(255, 179, 102, 0.1)",border:"1px solid rgba(255, 179, 102, 0.5)"},o=(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("strong",{children:"\ud83d\udcaa Challenging timeline!"})," Your race is on ",new Date(h.raceDate+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),".",(0,je.jsx)("br",{}),"With ",e," weeks, it's doable but you'll need to stay consistent. Most coaches prefer ",r," weeks for optimal ",t," preparation."]})):(i={background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)"},o=(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Perfect timeline!"})," Your race is on ",new Date(h.raceDate+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),".",(0,je.jsx)("br",{}),"With ",e," weeks to prepare, you'll have time for proper base building and peak training!"]})),(0,je.jsx)("div",{className:"card",style:i,children:(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem"},children:o})})})()}),(0,je.jsx)("div",{className:"card",style:{background:"rgba(255, 165, 0, 0.1)",border:"1px solid rgba(255, 165, 0, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83d\udca1 Pro tip:"})," Don't have a specific race yet? Pick a target date 12-16 weeks out - you can always adjust later!"]})})]})]});case 4:return(0,je.jsxs)("div",{children:[(0,je.jsx)("h2",{style:{color:"#FFFFFF",fontWeight:"700",fontSize:"1.75rem",marginBottom:"16px"},children:"Equipment & Training Preferences"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83d\ude80 Unique to Run+ Plans!"})," We're the only app with equipment-specific training."]}),(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"What cross-training equipment do you have access to?"}),(0,je.jsxs)("p",{style:{marginBottom:"16px",fontSize:"0.95rem",color:"#D1D5DB"},children:["Select all equipment you can use. ",(0,je.jsx)("strong",{children:"\ud83c\udfe5 We support injured runners too!"})," You can create full cross-training plans if needed."]}),(0,je.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[[{id:"cyclete",name:"Cyclete",description:"Teardrop motion, excellent for distance training",badge:"Stand-Up Bike",emoji:"\ud83d\udeb4",type:"standUpBike"},{id:"elliptigo",name:"ElliptiGO",description:"Elliptical motion, great for full-body workouts",badge:"Stand-Up Bike",emoji:"\ud83d\udeb4",type:"standUpBike"}].map(e=>(0,je.jsxs)("button",{type:"button",onClick:()=>{const t=h.standUpBikeType===e.id?null:e.id;m("standUpBikeType",t),t&&!h.primaryCrossTrainingEquipment?m("primaryCrossTrainingEquipment",e.id):t||h.primaryCrossTrainingEquipment!==e.id||m("primaryCrossTrainingEquipment",null)},style:{padding:"14px 16px",fontSize:"0.9rem",border:h.standUpBikeType===e.id?"2px solid var(--runeq-primary)":"1px solid #333",background:h.standUpBikeType===e.id?"rgba(0, 212, 255, 0.1)":"#1a1a1a",color:h.standUpBikeType===e.id?"var(--runeq-primary)":"#999",borderRadius:"6px",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",gap:"12px",position:"relative"},children:[(0,je.jsx)("span",{style:{fontSize:"1.5rem"},children:e.emoji}),(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsxs)("div",{style:{fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:[h.standUpBikeType===e.id?"\u2713 ":"",e.name,(0,je.jsx)("span",{className:"badge badge-info",style:{fontSize:"0.7rem",padding:"2px 6px",marginLeft:"4px"},children:e.badge})]}),(0,je.jsx)("div",{style:{fontSize:"0.8rem",color:h.standUpBikeType===e.id?"#86efac":"#666",marginTop:"2px"},children:e.description})]})]},e.id)),h.standUpBikeType&&(0,je.jsxs)("a",{href:"https://apps.garmin.com/apps/2327f1b2-a481-4c9e-b529-852e9989cf55",target:"_blank",rel:"noopener noreferrer",style:{padding:"14px 16px",fontSize:"0.9rem",border:"2px solid #00D4FF",background:"rgba(0, 212, 255, 0.1)",color:"#00D4FF",borderRadius:"6px",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",gap:"12px",textDecoration:"none",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(0, 212, 255, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(0, 212, 255, 0.1)"},children:[(0,je.jsx)("span",{style:{fontSize:"1.5rem"},children:"\u231a"}),(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsxs)("div",{style:{fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:["Get RunEQ Data Field (Free)",(0,je.jsx)("span",{className:"badge badge-info",style:{fontSize:"0.7rem",padding:"2px 6px",marginLeft:"4px"},children:"Garmin"})]}),(0,je.jsxs)("div",{style:{fontSize:"0.8rem",color:"#86efac",marginTop:"2px"},children:["Track RunEQ miles on your watch during ","cyclete"===h.standUpBikeType?"Cyclete":"ElliptiGO"," rides"]})]})]}),[{id:"pool",name:"Pool / Aqua Running",emoji:"\ud83c\udfca",description:"Deep water running with flotation belt"},{id:"rowing",name:"Rowing Machine",emoji:"\ud83d\udea3",description:"Concept2 or similar rowing erg"},{id:"elliptical",name:"Elliptical Machine",emoji:"\ud83c\udfc3",description:"Low-impact cardio machine"},{id:"stationaryBike",name:"Stationary Bike",emoji:"\ud83d\udeb4",description:"Spin bike, Peloton, or indoor trainer"},{id:"swimming",name:"Swimming",emoji:"\ud83c\udfca",description:"Lap swimming (technique required)"}].map(e=>(0,je.jsxs)("button",{type:"button",onClick:()=>{const t=(0,c.A)((0,c.A)({},h.crossTrainingEquipment),{},{[e.id]:!h.crossTrainingEquipment[e.id]});m("crossTrainingEquipment",t),!t[e.id]||h.primaryCrossTrainingEquipment||h.standUpBikeType?t[e.id]||h.primaryCrossTrainingEquipment!==e.id||m("primaryCrossTrainingEquipment",null):m("primaryCrossTrainingEquipment",e.id)},style:{padding:"12px 16px",fontSize:"0.9rem",border:h.crossTrainingEquipment[e.id]?"2px solid #22c55e":"1px solid #333",background:h.crossTrainingEquipment[e.id]?"rgba(34, 197, 94, 0.1)":"#1a1a1a",color:h.crossTrainingEquipment[e.id]?"#22c55e":"#999",borderRadius:"6px",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.5rem"},children:e.emoji}),(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsxs)("div",{style:{fontWeight:"500"},children:[h.crossTrainingEquipment[e.id]?"\u2713 ":"",e.name]}),(0,je.jsx)("div",{style:{fontSize:"0.8rem",color:h.crossTrainingEquipment[e.id]?"#86efac":"#666",marginTop:"2px"},children:e.description})]})]},e.id))]}),[{id:"walking",name:"Walking",emoji:"\ud83d\udeb6",description:"Low-impact walking workouts (no equipment needed)"}].map(e=>(0,je.jsxs)("button",{type:"button",onClick:()=>{const t=(0,c.A)((0,c.A)({},h.crossTrainingEquipment),{},{[e.id]:!h.crossTrainingEquipment[e.id]});m("crossTrainingEquipment",t),!t[e.id]||h.primaryCrossTrainingEquipment||h.standUpBikeType?t[e.id]||h.primaryCrossTrainingEquipment!==e.id||m("primaryCrossTrainingEquipment",null):m("primaryCrossTrainingEquipment",e.id)},style:{padding:"12px 16px",fontSize:"0.9rem",border:h.crossTrainingEquipment[e.id]?"2px solid #22c55e":"1px solid #333",background:h.crossTrainingEquipment[e.id]?"rgba(34, 197, 94, 0.1)":"#1a1a1a",color:h.crossTrainingEquipment[e.id]?"#22c55e":"#999",borderRadius:"6px",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.5rem"},children:e.emoji}),(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsxs)("div",{style:{fontWeight:"500"},children:[h.crossTrainingEquipment[e.id]?"\u2713 ":"",e.name]}),(0,je.jsx)("div",{style:{fontSize:"0.8rem",color:h.crossTrainingEquipment[e.id]?"#86efac":"#666",marginTop:"2px"},children:e.description})]})]},e.id)),(0,je.jsx)("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #333"},children:(0,je.jsxs)("button",{type:"button",onClick:()=>{m("standUpBikeType",null),m("crossTrainingEquipment",{pool:!1,elliptical:!1,stationaryBike:!1,swimming:!1,rowing:!1,walking:!1}),m("primaryCrossTrainingEquipment",null)},style:{padding:"12px 16px",fontSize:"0.9rem",border:h.standUpBikeType||Object.values(h.crossTrainingEquipment||{}).some(Boolean)?"1px solid #333":"2px solid #666",background:h.standUpBikeType||Object.values(h.crossTrainingEquipment||{}).some(Boolean)?"#1a1a1a":"rgba(102, 102, 102, 0.1)",color:h.standUpBikeType||Object.values(h.crossTrainingEquipment||{}).some(Boolean)?"#666":"#999",borderRadius:"6px",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",gap:"12px",width:"100%"},children:[(0,je.jsx)("span",{style:{fontSize:"1.5rem"},children:"\ud83c\udfc3"}),(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsxs)("div",{style:{fontWeight:"500"},children:[h.standUpBikeType||Object.values(h.crossTrainingEquipment||{}).some(Boolean)?"":"\u2713 ","None - Running only"]}),(0,je.jsx)("div",{style:{fontSize:"0.8rem",color:h.standUpBikeType||Object.values(h.crossTrainingEquipment||{}).some(Boolean)?"#666":"#999",marginTop:"2px"},children:"Pure running training with basic cross-training options"})]})]})}),(()=>{const e=null!==h.standUpBikeType,t=Object.values(h.crossTrainingEquipment||{}).some(Boolean),n=e||t,r=(e?1:0)+Object.values(h.crossTrainingEquipment||{}).filter(Boolean).length;return(0,je.jsx)(je.Fragment,{children:n&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Great!"})," You've selected ",r," option",1!==r?"s":"",".",e&&" You'll get ".concat((0,Bl.tS)(h.standUpBikeType),"-specific workouts with motion-optimized training."),!e&&h.crossTrainingEquipment&&h.crossTrainingEquipment.walking&&" Walking workouts are perfect for injury recovery - no equipment needed!"]})})})})()]}),(()=>{const e=null!==h.standUpBikeType,t=Object.values(h.crossTrainingEquipment||{}).some(Boolean),n=e||t,r=(()=>{if(h.standUpBikeType)return(0,Bl.tS)(h.standUpBikeType);const e=Object.entries(h.crossTrainingEquipment||{}).filter(e=>{let[t,n]=e;return n}).map(e=>{let[t,n]=e;return{pool:"Pool Running",rowing:"Rowing",elliptical:"Elliptical",stationaryBike:"Stationary Bike",swimming:"Swimming",walking:"Walking"}[t]||t});return 0===e.length?"Low-Impact Activities":1===e.length?e[0]:"Cross-Training"})();return(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Can you run right now?"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83c\udfe5 We support injured runners too!"})," Tell us about your current running status."]}),(0,je.jsx)("div",{style:{display:"grid",gap:"16px"},children:[{id:"active",name:"Yes - I can run",icon:"\ud83c\udfc3",desc:"Mix running with ".concat(r.toLowerCase()," cross-training")},{id:"crossTrainingOnly",name:"No - Cross-training only for now",icon:"\ud83d\udeb4",desc:"Injured or transitioning - cross-training workouts only until ready to run"},{id:"transitioning",name:"Transitioning back",icon:"\ud83d\udd04",desc:"Returning from injury - gradually add running to cross-training base"}].map(e=>(0,je.jsxs)("div",{className:"card ".concat(h.runningStatus===e.id?"selected":""),onClick:()=>m("runningStatus",e.id),style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"16px",padding:"16px"},children:[(0,je.jsx)("div",{style:{fontSize:"1.5rem"},children:e.icon}),(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsx)("h4",{style:{margin:"0 0 4px 0"},children:e.name}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#D1D5DB"},children:e.desc})]})]},e.id))}),"crossTrainingOnly"===h.runningStatus&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83d\udcaa Perfect for injury recovery!"}),n?(0,je.jsxs)(je.Fragment,{children:["You'll get a complete ",r," training plan with tempo workouts, intervals, long sessions, and recovery days - all the training stimulus without the impact stress."]}):(0,je.jsx)(je.Fragment,{children:"You'll get a plan with walking and low-impact activities to help you recover and gradually return to running."})," ","When you're ready to run again, just update your profile!"]})}),"transitioning"===h.runningStatus&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(255, 179, 102, 0.1)",border:"1px solid rgba(255, 179, 102, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83d\udd04 Smart transition approach!"})," We'll start with mostly ",r.toLowerCase()," training and gradually reintroduce running over the first 4 weeks. This gives your body time to adapt safely."]})}),"active"===h.runningStatus&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Best of both worlds!"})," You'll get a mix of running and ",r.toLowerCase()," training for maximum aerobic development with reduced impact stress."]})})]})})(),("crossTrainingOnly"===h.runningStatus||"transitioning"===h.runningStatus)&&(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"What injury are you recovering from?"}),(0,je.jsxs)("p",{style:{marginBottom:"16px",fontSize:"0.95rem",color:"#D1D5DB"},children:[(0,je.jsx)("strong",{children:"\ud83c\udfe5 This helps us recommend the safest cross-training equipment"})," and avoid activities that could aggravate your injury."]}),(0,je.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px"},children:[{id:"itBand",name:"IT Band Syndrome",description:"Hip/knee pain on outside of leg"},{id:"plantarFasciitis",name:"Plantar Fasciitis",description:"Bottom of foot pain"},{id:"shinSplints",name:"Shin Splints",description:"Pain along shin bone"},{id:"kneeIssues",name:"Knee Issues",description:"Patellofemoral, meniscus, etc."},{id:"lowerBackPain",name:"Lower Back Pain",description:"Lower back discomfort"},{id:"achillesTendonitis",name:"Achilles Tendonitis",description:"Back of heel/ankle pain"},{id:"stressFracture",name:"Stress Fracture",description:"Bone stress injury"},{id:"hipIssues",name:"Hip Issues",description:"Hip pain or impingement"},{id:"ankleIssues",name:"Ankle Issues",description:"Ankle pain or instability"},{id:"other",name:"Other",description:"Please specify below"}].map(e=>(0,je.jsxs)("button",{type:"button",onClick:()=>{const t=(0,c.A)((0,c.A)({},h.injuries),{},{[e.id]:!h.injuries[e.id]});m("injuries",t),"other"!==e.id||t.other||m("injuryDescription",null)},style:{padding:"12px 16px",fontSize:"0.9rem",border:h.injuries[e.id]?"2px solid #ef4444":"1px solid #333",background:h.injuries[e.id]?"rgba(239, 68, 68, 0.1)":"#1a1a1a",color:h.injuries[e.id]?"#ef4444":"#999",borderRadius:"6px",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.2rem"},children:h.injuries[e.id]?"\u2713":"\u25cb"}),(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsx)("div",{style:{fontWeight:"500"},children:e.name}),(0,je.jsx)("div",{style:{fontSize:"0.8rem",color:h.injuries[e.id]?"#fca5a5":"#666",marginTop:"2px"},children:e.description})]})]},e.id))}),h.injuries.other&&(0,je.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"8px"},children:"Please describe your injury:"}),(0,je.jsx)("input",{type:"text",value:h.injuryDescription||"",onChange:e=>m("injuryDescription",e.target.value),placeholder:"e.g., Runner's knee, patellar tendinitis, etc.",maxLength:100,style:{width:"100%",padding:"12px 16px",fontSize:"0.9rem",background:"#1a1a1a",border:"1px solid #333",borderRadius:"6px",color:"#fff",outline:"none"}}),(0,je.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"0.75rem",color:"#666"},children:"Optional but recommended for better recommendations"})]}),(0,je.jsx)("div",{className:"card",style:{background:"rgba(239, 68, 68, 0.05)",border:"1px solid rgba(239, 68, 68, 0.2)",marginTop:"16px",padding:"12px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.8rem",color:"#fca5a5",lineHeight:"1.5"},children:[(0,je.jsx)("strong",{children:"\u26a0\ufe0f Important:"})," This is not medical advice. Always consult with a healthcare provider for injury diagnosis and treatment. We use this information to recommend appropriate cross-training equipment only."]})}),(()=>{const e=Object.entries(h.injuries||{}).filter(e=>{let[t,n]=e;return n&&"other"!==t}).map(e=>{let[t,n]=e;return{itBand:"IT Band Syndrome",plantarFasciitis:"Plantar Fasciitis",shinSplints:"Shin Splints",kneeIssues:"Knee Issues",lowerBackPain:"Lower Back Pain",achillesTendonitis:"Achilles Tendonitis",stressFracture:"Stress Fracture",hipIssues:"Hip Issues",ankleIssues:"Ankle Issues"}[t]||t});return h.injuries.other&&h.injuryDescription&&e.push("Other: ".concat(h.injuryDescription)),e.length>0?(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\u2713 Selected:"})," ",e.join(", ")]})}):null})()]}),(()=>{const e=null!==h.standUpBikeType,t=Object.entries(h.crossTrainingEquipment||{}).filter(e=>{let[t,n]=e;return n}).map(e=>{let[t,n]=e;return t});if((e?1:0)+t.length<=1)return null;const n=[];return e&&n.push({id:h.standUpBikeType,name:(0,Bl.tS)(h.standUpBikeType),emoji:"\ud83d\udeb4"}),t.forEach(e=>{const t={pool:{name:"Pool / Aqua Running",emoji:"\ud83c\udfca"},rowing:{name:"Rowing Machine",emoji:"\ud83d\udea3"},elliptical:{name:"Elliptical Machine",emoji:"\ud83c\udfc3"},stationaryBike:{name:"Stationary Bike",emoji:"\ud83d\udeb4"},swimming:{name:"Swimming",emoji:"\ud83c\udfca"},walking:{name:"Walking",emoji:"\ud83d\udeb6"}};t[e]&&n.push((0,c.A)({id:e},t[e]))}),(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Which is your primary cross-training equipment?"}),(0,je.jsx)("p",{style:{marginBottom:"16px",fontSize:"0.95rem",color:"#D1D5DB"},children:"You've selected multiple equipment types. Which one should we prioritize in your plan?"}),(0,je.jsx)("div",{style:{display:"grid",gap:"12px"},children:n.map(e=>(0,je.jsxs)("button",{type:"button",onClick:()=>m("primaryCrossTrainingEquipment",e.id),style:{padding:"14px 16px",fontSize:"0.95rem",border:h.primaryCrossTrainingEquipment===e.id?"2px solid var(--runeq-primary)":"1px solid #333",background:h.primaryCrossTrainingEquipment===e.id?"rgba(0, 212, 255, 0.1)":"#1a1a1a",color:h.primaryCrossTrainingEquipment===e.id?"var(--runeq-primary)":"#999",borderRadius:"8px",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.5rem"},children:e.emoji}),(0,je.jsxs)("div",{style:{flex:1,fontWeight:"500"},children:[h.primaryCrossTrainingEquipment===e.id?"\u2713 ":"",e.name]})]},e.id))})]})})(),(()=>{const e=null!==h.standUpBikeType,t=Object.values(h.crossTrainingEquipment||{}).some(Boolean),n=e||t,r="active"===h.runningStatus||"transitioning"===h.runningStatus;if(!n||!r||0===h.availableDays.length)return null;const i=h.standUpBikeType?(0,Bl.tS)(h.standUpBikeType):h.crossTrainingEquipment.walking&&1===Object.values(h.crossTrainingEquipment).filter(Boolean).length?"Walking":"Cross-Training";return(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsxs)("h3",{children:["Which days do you prefer for ",i.toLowerCase(),"?"]}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83d\udeb4\u200d\u2642\ufe0f Smart scheduling!"})," Perfect for road closures, traffic patterns, or personal preference."]}),(0,je.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"10px",maxWidth:"500px",margin:"0 auto"},children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(e=>(0,je.jsx)("div",{className:"equipment-card ".concat(h.preferredBikeDays.includes(e)?"selected":""," ").concat(h.availableDays.includes(e)?"":"disabled"),onClick:()=>{if(!h.availableDays.includes(e))return;const t=h.preferredBikeDays.includes(e)?h.preferredBikeDays.filter(t=>t!==e):[...h.preferredBikeDays,e];m("preferredBikeDays",t)},style:{opacity:h.availableDays.includes(e)?1:.3,cursor:h.availableDays.includes(e)?"pointer":"not-allowed"},children:(0,je.jsxs)("p",{className:"equipment-name",children:[e,!h.availableDays.includes(e)&&(0,je.jsx)("span",{style:{fontSize:"0.7rem",display:"block"},children:"(Not available)"})]})},e))}),h.preferredBikeDays.length>0&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Perfect!"})," Selected ",h.preferredBikeDays.length," ",i.toLowerCase()," day",1!==h.preferredBikeDays.length?"s":"",": ",h.preferredBikeDays.join(", ")]})})]})})()]});case 5:return(0,je.jsxs)("div",{children:[(0,je.jsx)("h2",{children:"Training Philosophy & Missed Workout Handling"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Let's customize your training approach!"})," We'll adapt to your philosophy and real life."]}),(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{children:"What happens when you miss a workout?"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83d\udd25 This is where other apps fail!"})," We adapt to your real life."]}),(0,je.jsx)("div",{style:{display:"grid",gap:"16px"},children:[{id:"reschedule",name:"Reschedule it",desc:"Move the workout to another day this week",icon:"\ud83d\udd04"},{id:"modify",name:"Modify the plan",desc:"Adjust upcoming workouts to keep me on track",icon:"\u26a1"},{id:"skip",name:"Skip and continue",desc:"Move on with the original schedule",icon:"\u23ed\ufe0f"}].map(e=>(0,je.jsxs)("div",{className:"card ".concat(h.missedWorkoutPreference===e.id?"selected":""),onClick:()=>m("missedWorkoutPreference",e.id),style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"16px"},children:[(0,je.jsx)("div",{style:{fontSize:"1.5rem"},children:e.icon}),(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsx)("h4",{style:{margin:"0 0 4px 0"},children:e.name}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem"},children:e.desc})]})]},e.id))})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.5rem",marginBottom:"12px"},children:"Choose Your Training System"}),(0,je.jsxs)("p",{style:{color:"#E5E7EB",fontSize:"1rem"},children:[(0,je.jsx)("strong",{style:{color:"#F8F9FA"},children:"\ud83c\udfaf Run+ Plans Advantage:"})," Multiple proven methodologies coming soon!"]}),(0,je.jsx)("div",{style:{display:"grid",gap:"16px"},children:[{id:"practical_periodization",name:"Real World Training",desc:"Life-first approach with clear phases and injury prevention focus",good:"Perfect for busy runners, proven results, real-world flexibility",icon:"\ud83c\udfe0",available:!0},{id:"80_20",name:"80/20 Training",desc:"80% easy running, 20% hard - sustainable approach",good:"Injury prevention, long-term development, elite-proven",icon:"\ud83d\udee1\ufe0f",available:!1},{id:"zone_based",name:"Zone-Based Training",desc:"Scientific approach using 5 intensity zones and pace targets",good:"Precise, data-driven, works for all distances",icon:"\ud83d\udd2c",available:!1},{id:"high_mileage",name:"High Mileage System",desc:"Build endurance through volume and strength runs",good:"Marathon-focused, builds durability and speed",icon:"\ud83d\udcaa",available:!1},{id:"time_trial",name:"Fitness Test Driven",desc:"Monthly time trials guide all your training paces",good:"Real-time fitness tracking, highly responsive",icon:"\ud83c\udfaf",available:!1}].map(e=>(0,je.jsxs)("div",{className:"card ".concat(h.trainingPhilosophy===e.id?"selected":""),onClick:()=>e.available&&m("trainingPhilosophy",e.id),style:{cursor:e.available?"pointer":"not-allowed",padding:"20px",opacity:e.available?1:.6,position:"relative"},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.5rem"},children:e.icon}),(0,je.jsx)("h4",{style:{margin:0,color:"#FFFFFF",fontWeight:"600"},children:e.name}),!e.available&&(0,je.jsx)("div",{style:{marginLeft:"auto",padding:"4px 8px",background:"rgba(255, 179, 102, 0.2)",border:"1px solid rgba(255, 179, 102, 0.4)",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"600",color:"#FFB366"},children:"\ud83d\ude80 Coming Soon"})]}),(0,je.jsx)("p",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"#E5E7EB"},children:e.desc}),(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.8rem",color:"#D1D5DB"},children:[(0,je.jsx)("strong",{style:{color:"#F8F9FA"},children:"Good for:"})," ",e.good]})]},e.id))})]})]});case 6:return(0,je.jsxs)("div",{children:[(0,je.jsx)("h2",{children:"Location & Climate"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83c\udf21\ufe0f Climate-smart training!"})," We adjust paces for your local conditions."]}),(0,je.jsxs)("div",{className:"form-group",children:[(0,je.jsxs)("label",{className:"form-label",children:["City, State/Country ",(0,je.jsx)("span",{style:{color:"#D1D5DB",fontWeight:"400"},children:"(optional)"})]}),(0,je.jsx)("input",{type:"text",className:"form-input",placeholder:"e.g., Darwin, Australia or Phoenix, Arizona",value:h.location,onChange:e=>m("location",e.target.value)})]}),(0,je.jsxs)("div",{className:"form-group",children:[(0,je.jsx)("label",{className:"form-label",children:"Climate Type"}),(0,je.jsxs)("select",{className:"form-input form-select",value:h.climate,onChange:e=>m("climate",e.target.value),children:[(0,je.jsx)("option",{value:"",children:"Select your climate"}),(0,je.jsx)("option",{value:"temperate",children:"Temperate (mild seasons)"}),(0,je.jsx)("option",{value:"hot_dry",children:"Hot & Dry (desert-like)"}),(0,je.jsx)("option",{value:"hot_humid",children:"Hot & Humid (tropical/subtropical)"}),(0,je.jsx)("option",{value:"cold",children:"Cold (long winters)"}),(0,je.jsx)("option",{value:"variable",children:"Variable (extreme seasons)"})]})]}),h.climate&&(0,je.jsxs)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:[(0,je.jsxs)("h4",{style:{margin:"0 0 8px 0",color:"#FFFFFF",fontWeight:"600"},children:["temperate"===h.climate&&"\ud83c\udf24\ufe0f Temperate Climate Adjustments","hot_dry"===h.climate&&"\ud83c\udfdc\ufe0f Hot & Dry Climate Adjustments","hot_humid"===h.climate&&"\ud83c\udf34 Hot & Humid Climate Adjustments","cold"===h.climate&&"\u2744\ufe0f Cold Climate Adjustments","variable"===h.climate&&"\ud83c\udf26\ufe0f Variable Climate Adjustments"]}),(0,je.jsxs)("div",{style:{fontSize:"0.9rem",color:"#E5E7EB"},children:["temperate"===h.climate&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,je.jsx)("strong",{children:"Seasonal pace adjustments"})," for spring/summer heat and winter cold"]}),(0,je.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,je.jsx)("strong",{children:"Moderate hydration guidance"})," during warmer months"]}),(0,je.jsxs)("p",{style:{margin:0},children:["\u2713 ",(0,je.jsx)("strong",{children:"Gear recommendations"})," for changing conditions"]})]}),"hot_dry"===h.climate&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,je.jsx)("strong",{children:"Aggressive pace reductions"})," during peak heat hours (10am-4pm)"]}),(0,je.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,je.jsx)("strong",{children:"Enhanced hydration protocols"})," with electrolyte guidance"]}),(0,je.jsxs)("p",{style:{margin:0},children:["\u2713 ",(0,je.jsx)("strong",{children:"Early morning scheduling"})," to avoid dangerous temperatures"]})]}),"hot_humid"===h.climate&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,je.jsx)("strong",{children:"Heat index calculations"})," - humidity makes 80\xb0F feel like 95\xb0F"]}),(0,je.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,je.jsx)("strong",{children:"Sweat rate adjustments"})," for reduced cooling efficiency"]}),(0,je.jsxs)("p",{style:{margin:0},children:["\u2713 ",(0,je.jsx)("strong",{children:"Recovery-focused pacing"})," to prevent heat exhaustion"]})]}),"cold"===h.climate&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,je.jsx)("strong",{children:"Extended warm-up protocols"})," for muscle activation"]}),(0,je.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,je.jsx)("strong",{children:"Layering strategies"})," for temperature regulation"]}),(0,je.jsxs)("p",{style:{margin:0},children:["\u2713 ",(0,je.jsx)("strong",{children:"Ice/snow safety"})," adjustments for footing and pace"]})]}),"variable"===h.climate&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,je.jsx)("strong",{children:"Adaptive training plans"})," that flex with seasonal extremes"]}),(0,je.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,je.jsx)("strong",{children:"Multi-season gear guidance"})," for year-round training"]}),(0,je.jsxs)("p",{style:{margin:0},children:["\u2713 ",(0,je.jsx)("strong",{children:"Weather-based workout swaps"})," when conditions are unsafe"]})]})]})]}),!h.climate&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(255, 184, 0, 0.1)",border:"1px solid rgba(255, 184, 0, 0.3)"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem",color:"#E5E7EB"},children:[(0,je.jsx)("strong",{children:"\ud83d\udca1 Why this matters:"}),' A runner in Darwin, Australia complained that other apps gave "ridiculous paces" for tropical heat. We automatically adjust for your climate!']})})]});case 7:return(0,je.jsxs)("div",{children:[(0,je.jsx)("h2",{children:"\ud83c\udf89 Your Personalized Plan is Ready!"}),(0,je.jsx)("p",{children:"Based on your preferences, here's what makes your plan unique:"}),(0,je.jsxs)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)"},children:[(0,je.jsx)("h3",{children:"Your Run+ Plans Profile"}),(0,je.jsxs)("div",{style:{display:"grid",gap:"12px",textAlign:"left"},children:[(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Goal:"})," ",h.raceDistance," race training"]}),h.raceElevationProfile&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Race Profile:"})," ",h.raceElevationProfile.charAt(0).toUpperCase()+h.raceElevationProfile.slice(1)," course"]}),h.raceDate&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Race Date:"})," ",new Date(h.raceDate+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),h.startDate&&h.raceDate&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Training Duration:"})," ",Math.ceil((new Date(h.raceDate)-new Date(h.startDate))/6048e5)," weeks"]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Experience:"})," ",h.experienceLevel]}),h.currentWeeklyMileage&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Current weekly mileage:"})," ",h.currentWeeklyMileage," miles"]}),h.currentLongRunDistance&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Current long run:"})," ",h.currentLongRunDistance," miles"]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Schedule:"})," ",h.runsPerWeek," days/week"]}),h.hardSessionsPerWeek&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Hard Sessions:"})," ",h.hardSessionsPerWeek," per week",h.hardSessionDays.length>0?" (".concat(h.hardSessionDays.join(", "),")"):""]}),h.standUpBikeType&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Equipment:"})," ",(0,Bl.tS)(h.standUpBikeType)," specific workouts"]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Climate:"})," ",h.climate," adapted paces"]})]})]}),(0,je.jsxs)("div",{className:"card",style:{background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)"},children:[(0,je.jsx)("h3",{children:"\ud83d\ude80 What You Get"}),(0,je.jsxs)("div",{style:{display:"grid",gap:"8px",textAlign:"left"},children:[(0,je.jsxs)("div",{children:["\u2713 ",(0,je.jsx)("strong",{children:"80+ workout varieties"})," vs repetitive formats"]}),(0,je.jsxs)("div",{children:["\u2713 ",(0,je.jsx)("strong",{children:"Climate-adjusted paces"})," for your location"]}),(0,je.jsxs)("div",{children:["\u2713 ",(0,je.jsx)("strong",{children:"Equipment-specific training"})," for your gear"]}),(0,je.jsxs)("div",{children:["\u2713 ",(0,je.jsx)("strong",{children:"Flexible schedule"})," that adapts to missed workouts"]}),(0,je.jsxs)("div",{children:["\u2713 ",(0,je.jsx)("strong",{children:"Cross-platform access"})," - phone, tablet, web"]}),(0,je.jsxs)("div",{children:["\u2713 ",(0,je.jsx)("strong",{children:"Smart workout substitution"})," that counts properly"]})]})]}),(0,je.jsx)("p",{style:{fontSize:"0.9rem",color:"#E5E7EB"},children:'Click "Create My Plan" to see your complete training plan preview.'})]});default:return(0,je.jsx)("div",{children:"Step not found"})}}(),(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"32px",gap:"16px"},children:[i>1&&(0,je.jsx)("button",{className:"btn btn-secondary",onClick:()=>{const e=(e=>{let t=e-1;for(;t>=1&&!f(t);)t--;return t})(i);e>=1&&(o(e),window.scrollTo({top:0,behavior:"smooth"}))},children:"\u2190 Back"}),(0,je.jsx)("button",{className:"btn btn-primary",onClick:()=>{if(1===i&&!h.recentRaceTime&&!h.recentRaceDistance&&!h.confirmedNoRaceTime)return void d(!0);const e=g(i);e<=7?(o(e),window.scrollTo({top:0,behavior:"smooth"})):y()},style:{marginLeft:"auto"},children:7===i?"\ud83c\udf89 Create My Plan":"Continue \u2192"})]})]})]})})]})};function Yl(){}function Gl(){}const Ql=/^(?:[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088F\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5C\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDC-\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7DC\uA7F1-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD40-\uDD59\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC7\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDB0-\uDDDB\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDEA0-\uDEB8\uDEBB-\uDED3\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3\uDFF2-\uDFF6]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDEC0-\uDEDE\uDEE0-\uDEE2\uDEE4\uDEE5\uDEE7-\uDEED\uDEF0-\uDEF4\uDEFE\uDEFF\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79])(?:[\$0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088F\u0897-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5C\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDC-\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1ABF-\u1ADD\u1AE0-\u1AEB\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7DC\uA7F1-\uA827\uA82C\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF65-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD40-\uDD59\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDD40-\uDD65\uDD69-\uDD6D\uDD6F-\uDD85\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEC2-\uDEC7\uDEFA-\uDF1C\uDF27\uDF30-\uDF50\uDF70-\uDF85\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC-\uDFD3\uDFE1\uDFE2]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDED0-\uDEE3\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8\uDF60-\uDF67\uDFC0-\uDFE0\uDFF0-\uDFF9]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDDB0-\uDDDB\uDDE0-\uDDE9\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF42\uDF50-\uDF5A\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC40-\uDC55\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD39]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDD70-\uDD79\uDE40-\uDE7F\uDEA0-\uDEB8\uDEBB-\uDED3\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0-\uDFF6]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDCF0-\uDCF9\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDCD0-\uDCF9\uDDD0-\uDDFA\uDEC0-\uDEDE\uDEE0-\uDEF5\uDEFE\uDEFF\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]|\uDB40[\uDD00-\uDDEF])*$/,Xl=/^(?:[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088F\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5C\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDC-\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7DC\uA7F1-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD40-\uDD59\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC7\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDB0-\uDDDB\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDEA0-\uDEB8\uDEBB-\uDED3\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3\uDFF2-\uDFF6]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDEC0-\uDEDE\uDEE0-\uDEE2\uDEE4\uDEE5\uDEE7-\uDEED\uDEF0-\uDEF4\uDEFE\uDEFF\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79])(?:[\$\x2D0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088F\u0897-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5C\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDC-\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1ABF-\u1ADD\u1AE0-\u1AEB\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7DC\uA7F1-\uA827\uA82C\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF65-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD40-\uDD59\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDD40-\uDD65\uDD69-\uDD6D\uDD6F-\uDD85\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEC2-\uDEC7\uDEFA-\uDF1C\uDF27\uDF30-\uDF50\uDF70-\uDF85\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC-\uDFD3\uDFE1\uDFE2]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDED0-\uDEE3\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8\uDF60-\uDF67\uDFC0-\uDFE0\uDFF0-\uDFF9]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDDB0-\uDDDB\uDDE0-\uDDE9\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF42\uDF50-\uDF5A\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC40-\uDC55\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD39]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDD70-\uDD79\uDE40-\uDE7F\uDEA0-\uDEB8\uDEBB-\uDED3\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0-\uDFF6]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDCF0-\uDCF9\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDCD0-\uDCF9\uDDD0-\uDDFA\uDEC0-\uDEDE\uDEE0-\uDEF5\uDEFE\uDEFF\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]|\uDB40[\uDD00-\uDDEF])*$/,Zl={};function Jl(e,t){return((t||Zl).jsx?Xl:Ql).test(e)}const $l=/[ \t\n\f\r]/g;function ec(e){return""===e.replace($l,"")}class tc{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}}function nc(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new tc(n,r,t)}function rc(e){return e.toLowerCase()}tc.prototype.normal={},tc.prototype.property={},tc.prototype.space=void 0;class ic{constructor(e,t){this.attribute=t,this.property=e}}ic.prototype.attribute="",ic.prototype.booleanish=!1,ic.prototype.boolean=!1,ic.prototype.commaOrSpaceSeparated=!1,ic.prototype.commaSeparated=!1,ic.prototype.defined=!1,ic.prototype.mustUseProperty=!1,ic.prototype.number=!1,ic.prototype.overloadedBoolean=!1,ic.prototype.property="",ic.prototype.spaceSeparated=!1,ic.prototype.space=void 0;let oc=0;const ac=pc(),sc=pc(),lc=pc(),cc=pc(),uc=pc(),dc=pc(),hc=pc();function pc(){return 2**++oc}const mc=Object.keys(r);class fc extends ic{constructor(e,t,n,i){let o=-1;if(super(e,t),gc(this,"space",i),"number"===typeof n)for(;++o<mc.length;){const e=mc[o];gc(this,mc[o],(n&r[e])===r[e])}}}function gc(e,t,n){n&&(e[t]=n)}function yc(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const o=new fc(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[rc(r)]=r,n[rc(o.attribute)]=r}return new tc(t,n,e.space)}fc.prototype.defined=!0;const vc=yc({properties:{ariaActiveDescendant:null,ariaAtomic:sc,ariaAutoComplete:null,ariaBusy:sc,ariaChecked:sc,ariaColCount:cc,ariaColIndex:cc,ariaColSpan:cc,ariaControls:uc,ariaCurrent:null,ariaDescribedBy:uc,ariaDetails:null,ariaDisabled:sc,ariaDropEffect:uc,ariaErrorMessage:null,ariaExpanded:sc,ariaFlowTo:uc,ariaGrabbed:sc,ariaHasPopup:null,ariaHidden:sc,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:uc,ariaLevel:cc,ariaLive:null,ariaModal:sc,ariaMultiLine:sc,ariaMultiSelectable:sc,ariaOrientation:null,ariaOwns:uc,ariaPlaceholder:null,ariaPosInSet:cc,ariaPressed:sc,ariaReadOnly:sc,ariaRelevant:null,ariaRequired:sc,ariaRoleDescription:uc,ariaRowCount:cc,ariaRowIndex:cc,ariaRowSpan:cc,ariaSelected:sc,ariaSetSize:cc,ariaSort:null,ariaValueMax:cc,ariaValueMin:cc,ariaValueNow:cc,ariaValueText:null,role:null},transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase()});function wc(e,t){return t in e?e[t]:t}function bc(e,t){return wc(e,t.toLowerCase())}const kc=yc({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:dc,acceptCharset:uc,accessKey:uc,action:null,allow:null,allowFullScreen:ac,allowPaymentRequest:ac,allowUserMedia:ac,alt:null,as:null,async:ac,autoCapitalize:null,autoComplete:uc,autoFocus:ac,autoPlay:ac,blocking:uc,capture:null,charSet:null,checked:ac,cite:null,className:uc,cols:cc,colSpan:null,content:null,contentEditable:sc,controls:ac,controlsList:uc,coords:cc|dc,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ac,defer:ac,dir:null,dirName:null,disabled:ac,download:lc,draggable:sc,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ac,formTarget:null,headers:uc,height:cc,hidden:lc,high:cc,href:null,hrefLang:null,htmlFor:uc,httpEquiv:uc,id:null,imageSizes:null,imageSrcSet:null,inert:ac,inputMode:null,integrity:null,is:null,isMap:ac,itemId:null,itemProp:uc,itemRef:uc,itemScope:ac,itemType:uc,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ac,low:cc,manifest:null,max:null,maxLength:cc,media:null,method:null,min:null,minLength:cc,multiple:ac,muted:ac,name:null,nonce:null,noModule:ac,noValidate:ac,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ac,optimum:cc,pattern:null,ping:uc,placeholder:null,playsInline:ac,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ac,referrerPolicy:null,rel:uc,required:ac,reversed:ac,rows:cc,rowSpan:cc,sandbox:uc,scope:null,scoped:ac,seamless:ac,selected:ac,shadowRootClonable:ac,shadowRootDelegatesFocus:ac,shadowRootMode:null,shape:null,size:cc,sizes:null,slot:null,span:cc,spellCheck:sc,src:null,srcDoc:null,srcLang:null,srcSet:null,start:cc,step:null,style:null,tabIndex:cc,target:null,title:null,translate:null,type:null,typeMustMatch:ac,useMap:null,value:sc,width:cc,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:uc,axis:null,background:null,bgColor:null,border:cc,borderColor:null,bottomMargin:cc,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ac,declare:ac,event:null,face:null,frame:null,frameBorder:null,hSpace:cc,leftMargin:cc,link:null,longDesc:null,lowSrc:null,marginHeight:cc,marginWidth:cc,noResize:ac,noHref:ac,noShade:ac,noWrap:ac,object:null,profile:null,prompt:null,rev:null,rightMargin:cc,rules:null,scheme:null,scrolling:sc,standby:null,summary:null,text:null,topMargin:cc,valueType:null,version:null,vAlign:null,vLink:null,vSpace:cc,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ac,disableRemotePlayback:ac,prefix:null,property:null,results:cc,security:null,unselectable:null},space:"html",transform:bc}),Dc=yc({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:hc,accentHeight:cc,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:cc,amplitude:cc,arabicForm:null,ascent:cc,attributeName:null,attributeType:null,azimuth:cc,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:cc,by:null,calcMode:null,capHeight:cc,className:uc,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:cc,diffuseConstant:cc,direction:null,display:null,dur:null,divisor:cc,dominantBaseline:null,download:ac,dx:null,dy:null,edgeMode:null,editable:null,elevation:cc,enableBackground:null,end:null,event:null,exponent:cc,externalResourcesRequired:null,fill:null,fillOpacity:cc,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:dc,g2:dc,glyphName:dc,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:cc,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:cc,horizOriginX:cc,horizOriginY:cc,id:null,ideographic:cc,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:cc,k:cc,k1:cc,k2:cc,k3:cc,k4:cc,kernelMatrix:hc,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:cc,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:cc,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:cc,overlineThickness:cc,paintOrder:null,panose1:null,path:null,pathLength:cc,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:uc,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:cc,pointsAtY:cc,pointsAtZ:cc,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:hc,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:hc,rev:hc,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:hc,requiredFeatures:hc,requiredFonts:hc,requiredFormats:hc,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:cc,specularExponent:cc,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:cc,strikethroughThickness:cc,string:null,stroke:null,strokeDashArray:hc,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:cc,strokeOpacity:cc,strokeWidth:null,style:null,surfaceScale:cc,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:hc,tabIndex:cc,tableValues:null,target:null,targetX:cc,targetY:cc,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:hc,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:cc,underlineThickness:cc,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:cc,values:null,vAlphabetic:cc,vMathematical:cc,vectorEffect:null,vHanging:cc,vIdeographic:cc,version:null,vertAdvY:cc,vertOriginX:cc,vertOriginY:cc,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:cc,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:wc}),xc=yc({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase()}),Ec=yc({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:bc}),Sc=yc({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase()}),Ac=nc([vc,kc,xc,Ec,Sc],"html"),Cc=nc([vc,Dc,xc,Ec,Sc],"svg"),Tc=/[A-Z]/g,Rc=/-[a-z]/g,Fc=/^data[-\w.:]+$/i;function Ic(e){return"-"+e.toLowerCase()}function Pc(e){return e.charAt(1).toUpperCase()}const Mc={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};var _c=n(294);const Nc=jc("end"),Oc=jc("start");function jc(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"===typeof n.line&&n.line>0&&"number"===typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"===typeof n.offset&&n.offset>-1?n.offset:void 0}}}function Lc(e){return e&&"object"===typeof e?"position"in e||"type"in e?Wc(e.position):"start"in e||"end"in e?Wc(e):"line"in e||"column"in e?Bc(e):"":""}function Bc(e){return Uc(e&&e.line)+":"+Uc(e&&e.column)}function Wc(e){return Bc(e&&e.start)+"-"+Bc(e&&e.end)}function Uc(e){return e&&"number"===typeof e?e:1}class qc extends Error{constructor(e,t,n){super(),"string"===typeof t&&(n=t,t=void 0);let r="",i={},o=!1;if(t&&(i="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:(0,c.A)({},t)),"string"===typeof e?r=e:!i.cause&&e&&(o=!0,r=e.message,i.cause=e),!i.ruleId&&!i.source&&"string"===typeof n){const e=n.indexOf(":");-1===e?i.ruleId=n:(i.source=n.slice(0,e),i.ruleId=n.slice(e+1))}if(!i.place&&i.ancestors&&i.ancestors){const e=i.ancestors[i.ancestors.length-1];e&&(i.place=e.position)}const a=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=a?a.line:void 0,this.name=Lc(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&"string"===typeof i.cause.stack?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}qc.prototype.file="",qc.prototype.name="",qc.prototype.reason="",qc.prototype.message="",qc.prototype.stack="",qc.prototype.column=void 0,qc.prototype.line=void 0,qc.prototype.ancestors=void 0,qc.prototype.cause=void 0,qc.prototype.fatal=void 0,qc.prototype.place=void 0,qc.prototype.ruleId=void 0,qc.prototype.source=void 0;const Hc={}.hasOwnProperty,zc=new Map,Vc=/[A-Z]/g,Kc=new Set(["table","tbody","thead","tfoot","tr"]),Yc=new Set(["td","th"]),Gc="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Qc(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if("function"!==typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=function(e,t){return n;function n(n,r,i,o){const a=Array.isArray(i.children),s=Oc(n);return t(r,i,o,a,{columnNumber:s?s.column-1:void 0,fileName:e,lineNumber:s?s.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!==typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!==typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");r=function(e,t,n){return r;function r(e,r,i,o){const a=Array.isArray(i.children)?n:t;return o?a(r,i,o):a(r,i)}}(0,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?Cc:Ac,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},o=Xc(i,e,void 0);return o&&"string"!==typeof o?o:i.create(e,i.Fragment,{children:o||void 0},void 0)}function Xc(e,t,n){return"element"===t.type?function(e,t,n){const r=e.schema;let i=r;"svg"===t.tagName.toLowerCase()&&"html"===r.space&&(i=Cc,e.schema=i);e.ancestors.push(t);const o=tu(e,t.tagName,!1),a=function(e,t){const n={};let r,i;for(i in t.properties)if("children"!==i&&Hc.call(t.properties,i)){const o=eu(e,i,t.properties[i]);if(o){const[i,a]=o;e.tableCellAlignToStyle&&"align"===i&&"string"===typeof a&&Yc.has(t.tagName)?r=a:n[i]=a}}if(r){(n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=r}return n}(e,t);let s=$c(e,t);Kc.has(t.tagName)&&(s=s.filter(function(e){return"string"!==typeof e||!("object"===typeof(t=e)?"text"===t.type&&ec(t.value):ec(t));var t}));return Zc(e,a,o,t),Jc(a,s),e.ancestors.pop(),e.schema=r,e.create(t,o,a,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}nu(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const r=e.schema;let i=r;"svg"===t.name&&"html"===r.space&&(i=Cc,e.schema=i);e.ancestors.push(t);const o=null===t.name?e.Fragment:tu(e,t.name,!0),a=function(e,t){const n={};for(const r of t.attributes)if("mdxJsxExpressionAttribute"===r.type)if(r.data&&r.data.estree&&e.evaluater){const t=r.data.estree.body[0];Yl(t.type);const i=t.expression;Yl(i.type);const o=i.properties[0];Yl(o.type),Object.assign(n,e.evaluater.evaluateExpression(o.argument))}else nu(e,t.position);else{const i=r.name;let o;if(r.value&&"object"===typeof r.value)if(r.value.data&&r.value.data.estree&&e.evaluater){const t=r.value.data.estree.body[0];Yl(t.type),o=e.evaluater.evaluateExpression(t.expression)}else nu(e,t.position);else o=null===r.value||r.value;n[i]=o}return n}(e,t),s=$c(e,t);return Zc(e,a,o,t),Jc(a,s),e.ancestors.pop(),e.schema=r,e.create(t,o,a,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);nu(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const r={};return Jc(r,$c(e,t)),e.create(t,e.Fragment,r,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function Zc(e,t,n,r){"string"!==typeof n&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Jc(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function $c(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:zc;for(;++r<t.children.length;){const o=t.children[r];let a;if(e.passKeys){const e="element"===o.type?o.tagName:"mdxJsxFlowElement"===o.type||"mdxJsxTextElement"===o.type?o.name:void 0;if(e){const t=i.get(e)||0;a=e+"-"+t,i.set(e,t+1)}}const s=Xc(e,o,a);void 0!==s&&n.push(s)}return n}function eu(e,t,n){const r=function(e,t){const n=rc(t);let r=t,i=ic;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&Fc.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(Rc,Pc);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!Rc.test(e)){let n=e.replace(Tc,Ic);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}i=fc}return new i(r,t)}(e.schema,t);if(!(null===n||void 0===n||"number"===typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?function(e,t){const n=t||{};return(""===e[e.length-1]?[...e,""]:e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===r.property){let t="object"===typeof n?n:function(e,t){try{return _c(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const t=n,r=new qc("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=Gc+"#cannot-parse-style-attribute",r}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)Hc.call(e,n)&&(t[ru(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&r.space?Mc[r.property]||r.property:r.attribute,n]}}function tu(e,t,n){let r;if(n)if(t.includes(".")){const e=t.split(".");let n,i=-1;for(;++i<e.length;){const t=Jl(e[i])?{type:"Identifier",name:e[i]}:{type:"Literal",value:e[i]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(i&&"Literal"===t.type),optional:!1}:t}r=n}else r=Jl(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else r={type:"Literal",value:t};if("Literal"===r.type){const t=r.value;return Hc.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(r);nu(e)}function nu(e,t){const n=new qc("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Gc+"#cannot-handle-mdx-estrees-without-createevaluater",n}function ru(e){let t=e.replace(Vc,iu);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function iu(e){return"-"+e.toLowerCase()}const ou={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},au={};function su(e,t,n){if(function(e){return Boolean(e&&"object"===typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return lu(e.children,t,n)}return Array.isArray(e)?lu(e,t,n):""}function lu(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=su(e[i],t,n);return r.join("")}function cu(e,t,n,r){const i=e.length;let o,a=0;if(t=t<0?-t>i?0:i+t:t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);a<r.length;)o=r.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function uu(e,t){return e.length>0?(cu(e,e.length,0,t),e):t}class du{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null===t||void 0===t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const r=t||0;this.setCursor(Math.trunc(e));const i=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return n&&hu(this.left,n),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),hu(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),hu(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);hu(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);hu(this.left,t.reverse())}}}function hu(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function pu(e){const t={};let n,r,i,o,a,s,l,u=-1;const d=new du(e);for(;++u<d.length;){for(;u in t;)u=t[u];if(n=d.get(u),u&&"chunkFlow"===n[1].type&&"listItemPrefix"===d.get(u-1)[1].type&&(s=n[1]._tokenizer.events,i=0,i<s.length&&"lineEndingBlank"===s[i][1].type&&(i+=2),i<s.length&&"content"===s[i][1].type))for(;++i<s.length&&"content"!==s[i][1].type;)"chunkText"===s[i][1].type&&(s[i][1]._isInFirstContentOfListItem=!0,i++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,mu(d,u)),u=t[u],l=!0);else if(n[1]._container){for(i=u,r=void 0;i--;)if(o=d.get(i),"lineEnding"===o[1].type||"lineEndingBlank"===o[1].type)"enter"===o[0]&&(r&&(d.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=i);else if("linePrefix"!==o[1].type&&"listItemIndent"!==o[1].type)break;r&&(n[1].end=(0,c.A)({},d.get(r)[1].start),a=d.slice(r,u),a.unshift(n),d.splice(r,u-r+1,a))}}return cu(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!l}function mu(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const o=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const s=a.events,l=[],c={};let u,d,h=-1,p=n,m=0,f=0;const g=[f];for(;p;){for(;e.get(++i)[1]!==p;);o.push(i),p._tokenizer||(u=r.sliceStream(p),p.next||u.push(null),d&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(u),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),d=p,p=p.next}for(p=n;++h<s.length;)"exit"===s[h][0]&&"enter"===s[h-1][0]&&s[h][1].type===s[h-1][1].type&&s[h][1].start.line!==s[h][1].end.line&&(f=h+1,g.push(f),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):g.pop(),h=g.length;h--;){const t=s.slice(g[h],g[h+1]),n=o.pop();l.push([n,n+t.length-1]),e.splice(n,2,t)}for(l.reverse(),h=-1;++h<l.length;)c[m+l[h][0]]=m+l[h][1],m+=l[h][1]-l[h][0]-1;return c}const fu={}.hasOwnProperty;function gu(e,t){let n;for(n in t){const r=(fu.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let o;if(i)for(o in i){fu.call(r,o)||(r[o]=[]);const e=i[o];yu(r[o],Array.isArray(e)?e:e?[e]:[])}}}function yu(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);cu(e,0,0,r)}const vu=Fu(/[A-Za-z]/),wu=Fu(/[\dA-Za-z]/),bu=Fu(/[#-'*+\--9=?A-Z^-~]/);function ku(e){return null!==e&&(e<32||127===e)}const Du=Fu(/\d/),xu=Fu(/[\dA-Fa-f]/),Eu=Fu(/[!-/:-@[-`{-~]/);function Su(e){return null!==e&&e<-2}function Au(e){return null!==e&&(e<0||32===e)}function Cu(e){return-2===e||-1===e||32===e}const Tu=Fu(/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDED0\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C1\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F\uDED1-\uDED8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDCFA-\uDCFC\uDD00-\uDEB3\uDEBA-\uDED0\uDEE0-\uDEF0\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED8\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDCD0-\uDCD8\uDD00-\uDE57\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE8A\uDE8E-\uDEC6\uDEC8\uDECD-\uDEDC\uDEDF-\uDEEA\uDEEF-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF\uDFFA])/),Ru=Fu(/\s/);function Fu(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function Iu(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return function(r){if(Cu(r))return e.enter(n),a(r);return t(r)};function a(r){return Cu(r)&&o++<i?(e.consume(r),a):(e.exit(n),t(r))}}const Pu={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Iu(e,t,"linePrefix")},function(t){return e.enter("paragraph"),r(t)});let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,i(t)}function i(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):Su(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),i)}}};const Mu={tokenize:function(e){const t=this,n=[];let r,i,o,a=0;return s;function s(r){if(a<n.length){const i=n[a];return t.containerState=i[1],e.attempt(i[0].continuation,l,u)(r)}return u(r)}function l(e){if(a++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&w();const n=t.events.length;let i,o=n;for(;o--;)if("exit"===t.events[o][0]&&"chunkFlow"===t.events[o][1].type){i=t.events[o][1].end;break}v(a);let s=n;for(;s<t.events.length;)t.events[s][1].end=(0,c.A)({},i),s++;return cu(t.events,o+1,0,t.events.slice(n)),t.events.length=s,u(e)}return s(e)}function u(i){if(a===n.length){if(!r)return p(i);if(r.currentConstruct&&r.currentConstruct.concrete)return f(i);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(_u,d,h)(i)}function d(e){return r&&w(),v(a),p(e)}function h(e){return t.parser.lazy[t.now().line]=a!==n.length,o=t.now().offset,f(e)}function p(n){return t.containerState={},e.attempt(_u,m,f)(n)}function m(e){return a++,n.push([t.currentConstruct,t.containerState]),p(e)}function f(n){return null===n?(r&&w(),v(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:i}),g(n))}function g(n){return null===n?(y(e.exit("chunkFlow"),!0),v(0),void e.consume(n)):Su(n)?(e.consume(n),y(e.exit("chunkFlow")),a=0,t.interrupt=void 0,s):(e.consume(n),g)}function y(e,n){const s=t.sliceStream(e);if(n&&s.push(null),e.previous=i,i&&(i.next=e),i=e,r.defineSkip(e.start),r.write(s),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<o&&(!r.events[e][1].end||r.events[e][1].end.offset>o))return;const n=t.events.length;let i,s,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(i){s=t.events[l][1].end;break}i=!0}for(v(a),e=n;e<t.events.length;)t.events[e][1].end=(0,c.A)({},s),e++;cu(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function v(r){let i=n.length;for(;i-- >r;){const r=n[i];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function w(){r.write([null]),i=void 0,r=void 0,t.containerState._closeFlow=void 0}}},_u={tokenize:function(e,t,n){return Iu(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};const Nu={partial:!0,tokenize:function(e,t,n){return function(t){return Cu(t)?Iu(e,r,"linePrefix")(t):r(t)};function r(e){return null===e||Su(e)?t(e):n(e)}}};const Ou={resolve:function(e){return pu(e),e},tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?i(t):Su(t)?e.check(ju,o,i)(t):(e.consume(t),r)}function i(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function o(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}},ju={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Iu(e,i,"linePrefix")};function i(i){if(null===i||Su(i))return n(i);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}}};const Lu={tokenize:function(e){const t=this,n=e.attempt(Nu,function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n},e.attempt(this.parser.constructs.flowInitial,r,Iu(e,e.attempt(this.parser.constructs.flow,r,e.attempt(Ou,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const Bu={resolveAll:Hu()},Wu=qu("string"),Uu=qu("text");function qu(e){return{resolveAll:Hu("text"===e?zu:void 0),tokenize:function(t){const n=this,r=this.parser.constructs[e],i=t.attempt(r,o,a);return o;function o(e){return l(e)?i(e):a(e)}function a(e){if(null!==e)return t.enter("data"),t.consume(e),s;t.consume(e)}function s(e){return l(e)?(t.exit("data"),i(e)):(t.consume(e),s)}function l(e){if(null===e)return!0;const t=r[e];let i=-1;if(t)for(;++i<t.length;){const e=t[i];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}}function Hu(e){return function(t,n){let r,i=-1;for(;++i<=t.length;)void 0===r?t[i]&&"data"===t[i][1].type&&(r=i,i++):t[i]&&"data"===t[i][1].type||(i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),i=r+2),r=void 0);return e?e(t,n):t}}function zu(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],i=t.sliceStream(r);let o,a=i.length,s=-1,l=0;for(;a--;){const e=i[a];if("string"===typeof e){for(s=e.length;32===e.charCodeAt(s-1);)l++,s--;if(s)break;s=-1}else if(-2===e)o=!0,l++;else if(-1!==e){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const i={type:n===e.length||o||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?s:r.start._bufferIndex+s,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:(0,c.A)({},r.end)};r.end=(0,c.A)({},i.start),r.start.offset===r.end.offset?Object.assign(r,i):(e.splice(n,0,["enter",i,t],["exit",i,t]),n+=2)}n++}return e}const Vu={name:"thematicBreak",tokenize:function(e,t,n){let r,i=0;return function(t){return e.enter("thematicBreak"),function(e){return r=e,o(e)}(t)};function o(o){return o===r?(e.enter("thematicBreakSequence"),a(o)):i>=3&&(null===o||Su(o))?(e.exit("thematicBreak"),t(o)):n(o)}function a(t){return t===r?(e.consume(t),i++,a):(e.exit("thematicBreakSequence"),Cu(t)?Iu(e,o,"whitespace")(t):o(t))}}};const Ku={continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Nu,i,o);function i(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Iu(e,t,"listItemIndent",r.containerState.size+1)(n)}function o(n){return r.containerState.furtherBlankLines||!Cu(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Gu,t,a)(n))}function a(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,Iu(e,e.attempt(Ku,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,a=0;return function(t){const i=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!r.containerState.marker||t===r.containerState.marker:Du(t)){if(r.containerState.type||(r.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(Vu,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(t)}return n(t)};function s(t){return Du(t)&&++a<10?(e.consume(t),s):(!r.interrupt||a<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(Nu,r.interrupt?n:c,e.attempt(Yu,d,u))}function c(e){return r.containerState.initialBlankLine=!0,o++,d(e)}function u(t){return Cu(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),d):n(t)}function d(n){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}},Yu={partial:!0,tokenize:function(e,t,n){const r=this;return Iu(e,function(e){const i=r.events[r.events.length-1];return!Cu(e)&&i&&"listItemPrefixWhitespace"===i[1].type?t(e):n(e)},"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},Gu={partial:!0,tokenize:function(e,t,n){const r=this;return Iu(e,function(e){const i=r.events[r.events.length-1];return i&&"listItemIndent"===i[1].type&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(e):n(e)},"listItemIndent",r.containerState.size+1)}};const Qu={continuation:{tokenize:function(e,t,n){const r=this;return function(t){if(Cu(t))return Iu(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return i(t)};function i(r){return e.attempt(Qu,t,n)(r)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),i}return n(t)};function i(n){return Cu(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}};function Xu(e,t,n,r,i,o,a,s,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(t){if(60===t)return e.enter(r),e.enter(i),e.enter(o),e.consume(t),e.exit(o),d;if(null===t||32===t||41===t||ku(t))return n(t);return e.enter(r),e.enter(a),e.enter(s),e.enter("chunkString",{contentType:"string"}),m(t)};function d(n){return 62===n?(e.enter(o),e.consume(n),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(s),d(t)):null===t||60===t||Su(t)?n(t):(e.consume(t),92===t?p:h)}function p(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function m(i){return u||null!==i&&41!==i&&!Au(i)?u<c&&40===i?(e.consume(i),u++,m):41===i?(e.consume(i),u--,m):null===i||32===i||40===i||ku(i)?n(i):(e.consume(i),92===i?f:m):(e.exit("chunkString"),e.exit(s),e.exit(a),e.exit(r),t(i))}function f(t){return 40===t||41===t||92===t?(e.consume(t),m):m(t)}}function Zu(e,t,n,r,i,o){const a=this;let s,l=0;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),e.enter(o),c};function c(d){return l>999||null===d||91===d||93===d&&!s||94===d&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(d):93===d?(e.exit(o),e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):Su(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(d))}function u(t){return null===t||91===t||93===t||Su(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),s||(s=!Cu(t)),92===t?d:u)}function d(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}}function Ju(e,t,n,r,i,o){let a;return function(t){if(34===t||39===t||40===t)return e.enter(r),e.enter(i),e.consume(t),e.exit(i),a=40===t?41:t,s;return n(t)};function s(n){return n===a?(e.enter(i),e.consume(n),e.exit(i),e.exit(r),t):(e.enter(o),l(n))}function l(t){return t===a?(e.exit(o),s(a)):null===t?n(t):Su(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Iu(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===a||null===t||Su(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return t===a||92===t?(e.consume(t),c):c(t)}}function $u(e,t){let n;return function r(i){if(Su(i))return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r;if(Cu(i))return Iu(e,r,n?"linePrefix":"lineSuffix")(i);return t(i)}}function ed(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const td={name:"definition",tokenize:function(e,t,n){const r=this;let i;return function(t){return e.enter("definition"),function(t){return Zu.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function o(t){return i=ed(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),a):n(t)}function a(t){return Au(t)?$u(e,s)(t):s(t)}function s(t){return Xu(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(nd,c,c)(t)}function c(t){return Cu(t)?Iu(e,u,"whitespace")(t):u(t)}function u(o){return null===o||Su(o)?(e.exit("definition"),r.parser.defined.push(i),t(o)):n(o)}}},nd={partial:!0,tokenize:function(e,t,n){return function(t){return Au(t)?$u(e,r)(t):n(t)};function r(t){return Ju(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function i(t){return Cu(t)?Iu(e,o,"whitespace")(t):o(t)}function o(e){return null===e||Su(e)?t(e):n(e)}}};const rd={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),Iu(e,i,"linePrefix",5)(t)};function i(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?o(e):n(e)}function o(t){return null===t?s(t):Su(t)?e.attempt(id,o,s)(t):(e.enter("codeFlowValue"),a(t))}function a(t){return null===t||Su(t)?(e.exit("codeFlowValue"),o(t)):(e.consume(t),a)}function s(n){return e.exit("codeIndented"),t(n)}}},id={partial:!0,tokenize:function(e,t,n){const r=this;return i;function i(t){return r.parser.lazy[r.now().line]?n(t):Su(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):Iu(e,o,"linePrefix",5)(t)}function o(e){const o=r.events[r.events.length-1];return o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?t(e):Su(e)?i(e):n(e)}}};const od={name:"headingAtx",resolve:function(e,t){let n,r,i=e.length-2,o=3;"whitespace"===e[o][1].type&&(o+=2);i-2>o&&"whitespace"===e[i][1].type&&(i-=2);"atxHeadingSequence"===e[i][1].type&&(o===i-1||i-4>o&&"whitespace"===e[i-2][1].type)&&(i-=o+1===i?2:4);i>o&&(n={type:"atxHeadingText",start:e[o][1].start,end:e[i][1].end},r={type:"chunkText",start:e[o][1].start,end:e[i][1].end,contentType:"text"},cu(e,o,i-o+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e},tokenize:function(e,t,n){let r=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),i(t)}(t)};function i(t){return 35===t&&r++<6?(e.consume(t),i):null===t||Au(t)?(e.exit("atxHeadingSequence"),o(t)):n(t)}function o(n){return 35===n?(e.enter("atxHeadingSequence"),a(n)):null===n||Su(n)?(e.exit("atxHeading"),t(n)):Cu(n)?Iu(e,o,"whitespace")(n):(e.enter("atxHeadingText"),s(n))}function a(t){return 35===t?(e.consume(t),a):(e.exit("atxHeadingSequence"),o(t))}function s(t){return null===t||35===t||Au(t)?(e.exit("atxHeadingText"),o(t)):(e.consume(t),s)}}};const ad={name:"setextUnderline",resolveTo:function(e,t){let n,r,i,o=e.length;for(;o--;)if("enter"===e[o][0]){if("content"===e[o][1].type){n=o;break}"paragraph"===e[o][1].type&&(r=o)}else"content"===e[o][1].type&&e.splice(o,1),i||"definition"!==e[o][1].type||(i=o);const a={type:"setextHeading",start:(0,c.A)({},e[n][1].start),end:(0,c.A)({},e[e.length-1][1].end)};e[r][1].type="setextHeadingText",i?(e.splice(r,0,["enter",a,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end=(0,c.A)({},e[i][1].end)):e[n][1]=a;return e.push(["exit",a,t]),e},tokenize:function(e,t,n){const r=this;let i;return function(t){let a,s=r.events.length;for(;s--;)if("lineEnding"!==r.events[s][1].type&&"linePrefix"!==r.events[s][1].type&&"content"!==r.events[s][1].type){a="paragraph"===r.events[s][1].type;break}if(!r.parser.lazy[r.now().line]&&(r.interrupt||a))return e.enter("setextHeadingLine"),i=t,function(t){return e.enter("setextHeadingLineSequence"),o(t)}(t);return n(t)};function o(t){return t===i?(e.consume(t),o):(e.exit("setextHeadingLineSequence"),Cu(t)?Iu(e,a,"lineSuffix")(t):a(t))}function a(r){return null===r||Su(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}}};const sd=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ld=["pre","script","style","textarea"],cd={concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},tokenize:function(e,t,n){const r=this;let i,o,a,s,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c}(t)};function c(s){return 33===s?(e.consume(s),u):47===s?(e.consume(s),o=!0,p):63===s?(e.consume(s),i=3,r.interrupt?t:_):vu(s)?(e.consume(s),a=String.fromCharCode(s),m):n(s)}function u(o){return 45===o?(e.consume(o),i=2,d):91===o?(e.consume(o),i=5,s=0,h):vu(o)?(e.consume(o),i=4,r.interrupt?t:_):n(o)}function d(i){return 45===i?(e.consume(i),r.interrupt?t:_):n(i)}function h(i){const o="CDATA[";return i===o.charCodeAt(s++)?(e.consume(i),6===s?r.interrupt?t:A:h):n(i)}function p(t){return vu(t)?(e.consume(t),a=String.fromCharCode(t),m):n(t)}function m(s){if(null===s||47===s||62===s||Au(s)){const l=47===s,c=a.toLowerCase();return l||o||!ld.includes(c)?sd.includes(a.toLowerCase())?(i=6,l?(e.consume(s),f):r.interrupt?t(s):A(s)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(s):o?g(s):y(s)):(i=1,r.interrupt?t(s):A(s))}return 45===s||wu(s)?(e.consume(s),a+=String.fromCharCode(s),m):n(s)}function f(i){return 62===i?(e.consume(i),r.interrupt?t:A):n(i)}function g(t){return Cu(t)?(e.consume(t),g):E(t)}function y(t){return 47===t?(e.consume(t),E):58===t||95===t||vu(t)?(e.consume(t),v):Cu(t)?(e.consume(t),y):E(t)}function v(t){return 45===t||46===t||58===t||95===t||wu(t)?(e.consume(t),v):w(t)}function w(t){return 61===t?(e.consume(t),b):Cu(t)?(e.consume(t),w):y(t)}function b(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,k):Cu(t)?(e.consume(t),b):D(t)}function k(t){return t===l?(e.consume(t),l=null,x):null===t||Su(t)?n(t):(e.consume(t),k)}function D(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||Au(t)?w(t):(e.consume(t),D)}function x(e){return 47===e||62===e||Cu(e)?y(e):n(e)}function E(t){return 62===t?(e.consume(t),S):n(t)}function S(t){return null===t||Su(t)?A(t):Cu(t)?(e.consume(t),S):n(t)}function A(t){return 45===t&&2===i?(e.consume(t),F):60===t&&1===i?(e.consume(t),I):62===t&&4===i?(e.consume(t),N):63===t&&3===i?(e.consume(t),_):93===t&&5===i?(e.consume(t),M):!Su(t)||6!==i&&7!==i?null===t||Su(t)?(e.exit("htmlFlowData"),C(t)):(e.consume(t),A):(e.exit("htmlFlowData"),e.check(ud,O,C)(t))}function C(t){return e.check(dd,T,O)(t)}function T(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),R}function R(t){return null===t||Su(t)?C(t):(e.enter("htmlFlowData"),A(t))}function F(t){return 45===t?(e.consume(t),_):A(t)}function I(t){return 47===t?(e.consume(t),a="",P):A(t)}function P(t){if(62===t){const n=a.toLowerCase();return ld.includes(n)?(e.consume(t),N):A(t)}return vu(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),P):A(t)}function M(t){return 93===t?(e.consume(t),_):A(t)}function _(t){return 62===t?(e.consume(t),N):45===t&&2===i?(e.consume(t),_):A(t)}function N(t){return null===t||Su(t)?(e.exit("htmlFlowData"),O(t)):(e.consume(t),N)}function O(n){return e.exit("htmlFlow"),t(n)}}},ud={partial:!0,tokenize:function(e,t,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(Nu,t,n)}}},dd={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(Su(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i;return n(t)};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}};const hd={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}},pd={concrete:!0,name:"codeFenced",tokenize:function(e,t,n){const r=this,i={partial:!0,tokenize:function(e,t,n){let i=0;return a;function a(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),Cu(t)?Iu(e,c,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===o?(e.enter("codeFencedFenceSequence"),u(t)):n(t)}function u(t){return t===o?(i++,e.consume(t),u):i>=s?(e.exit("codeFencedFenceSequence"),Cu(t)?Iu(e,d,"whitespace")(t):d(t)):n(t)}function d(r){return null===r||Su(r)?(e.exit("codeFencedFence"),t(r)):n(r)}}};let o,a=0,s=0;return function(t){return function(t){const n=r.events[r.events.length-1];return a=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,o=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===o?(s++,e.consume(t),l):s<3?n(t):(e.exit("codeFencedFenceSequence"),Cu(t)?Iu(e,c,"whitespace")(t):c(t))}function c(n){return null===n||Su(n)?(e.exit("codeFencedFence"),r.interrupt?t(n):e.check(hd,p,v)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(n))}function u(t){return null===t||Su(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(t)):Cu(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Iu(e,d,"whitespace")(t)):96===t&&t===o?n(t):(e.consume(t),u)}function d(t){return null===t||Su(t)?c(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||Su(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(t)):96===t&&t===o?n(t):(e.consume(t),h)}function p(t){return e.attempt(i,v,m)(t)}function m(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),f}function f(t){return a>0&&Cu(t)?Iu(e,g,"linePrefix",a+1)(t):g(t)}function g(t){return null===t||Su(t)?e.check(hd,p,v)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||Su(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),y)}function v(n){return e.exit("codeFenced"),t(n)}}};const md=document.createElement("i");function fd(e){const t="&"+e+";";md.innerHTML=t;const n=md.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}const gd={name:"characterReference",tokenize:function(e,t,n){const r=this;let i,o,a=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),s};function s(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),i=31,o=wu,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,o=xu,c):(e.enter("characterReferenceValue"),i=7,o=Du,c(t))}function c(s){if(59===s&&a){const i=e.exit("characterReferenceValue");return o!==wu||fd(r.sliceSerialize(i))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)}return o(s)&&a++<i?(e.consume(s),c):n(s)}}};const yd={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return Eu(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const vd={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Iu(e,t,"linePrefix")}}};function wd(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const bd={name:"labelEnd",resolveAll:function(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),"labelImage"===r.type||"labelLink"===r.type||"labelEnd"===r.type){const e="labelImage"===r.type?4:2;r.type="data",t+=e}}e.length!==n.length&&cu(e,0,e.length,n);return e},resolveTo:function(e,t){let n,r,i,o,a=e.length,s=0;for(;a--;)if(n=e[a][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[a][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(i){if("enter"===e[a][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=a,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(i=a);const l={type:"labelLink"===e[r][1].type?"link":"image",start:(0,c.A)({},e[r][1].start),end:(0,c.A)({},e[e.length-1][1].end)},u={type:"label",start:(0,c.A)({},e[r][1].start),end:(0,c.A)({},e[i][1].end)},d={type:"labelText",start:(0,c.A)({},e[r+s+2][1].end),end:(0,c.A)({},e[i-2][1].start)};return o=[["enter",l,t],["enter",u,t]],o=uu(o,e.slice(r+1,r+s+3)),o=uu(o,[["enter",d,t]]),o=uu(o,wd(t.parser.constructs.insideSpan.null,e.slice(r+s+4,i-3),t)),o=uu(o,[["exit",d,t],e[i-2],e[i-1],["exit",u,t]]),o=uu(o,e.slice(i+1)),o=uu(o,[["exit",l,t]]),cu(e,r,e.length,o),e},tokenize:function(e,t,n){const r=this;let i,o,a=r.events.length;for(;a--;)if(("labelImage"===r.events[a][1].type||"labelLink"===r.events[a][1].type)&&!r.events[a][1]._balanced){i=r.events[a][1];break}return function(t){if(!i)return n(t);if(i._inactive)return u(t);return o=r.parser.defined.includes(ed(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),s};function s(t){return 40===t?e.attempt(kd,c,o?c:u)(t):91===t?e.attempt(Dd,c,o?l:u)(t):o?c(t):u(t)}function l(t){return e.attempt(xd,c,u)(t)}function c(e){return t(e)}function u(e){return i._balanced=!0,n(e)}}},kd={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),r};function r(t){return Au(t)?$u(e,i)(t):i(t)}function i(t){return 41===t?c(t):Xu(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function o(t){return Au(t)?$u(e,s)(t):c(t)}function a(e){return n(e)}function s(t){return 34===t||39===t||40===t?Ju(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return Au(t)?$u(e,c)(t):c(t)}function c(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},Dd={tokenize:function(e,t,n){const r=this;return function(t){return Zu.call(r,e,i,o,"reference","referenceMarker","referenceString")(t)};function i(e){return r.parser.defined.includes(ed(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function o(e){return n(e)}}},xd={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const Ed={name:"labelStartImage",resolveAll:bd.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),o):n(t)}function o(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};function Sd(e){return null===e||Au(e)||Ru(e)?1:Tu(e)?2:void 0}const Ad={name:"attention",resolveAll:function(e,t){let n,r,i,o,a,s,l,u,d=-1;for(;++d<e.length;)if("enter"===e[d][0]&&"attentionSequence"===e[d][1].type&&e[d][1]._close)for(n=d;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[d][1]).charCodeAt(0)){if((e[n][1]._close||e[d][1]._open)&&(e[d][1].end.offset-e[d][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[d][1].end.offset-e[d][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[d][1].end.offset-e[d][1].start.offset>1?2:1;const h=(0,c.A)({},e[n][1].end),p=(0,c.A)({},e[d][1].start);Cd(h,-s),Cd(p,s),o={type:s>1?"strongSequence":"emphasisSequence",start:h,end:(0,c.A)({},e[n][1].end)},a={type:s>1?"strongSequence":"emphasisSequence",start:(0,c.A)({},e[d][1].start),end:p},i={type:s>1?"strongText":"emphasisText",start:(0,c.A)({},e[n][1].end),end:(0,c.A)({},e[d][1].start)},r={type:s>1?"strong":"emphasis",start:(0,c.A)({},o.start),end:(0,c.A)({},a.end)},e[n][1].end=(0,c.A)({},o.start),e[d][1].start=(0,c.A)({},a.end),l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=uu(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=uu(l,[["enter",r,t],["enter",o,t],["exit",o,t],["enter",i,t]]),l=uu(l,wd(t.parser.constructs.insideSpan.null,e.slice(n+1,d),t)),l=uu(l,[["exit",i,t],["enter",a,t],["exit",a,t],["exit",r,t]]),e[d][1].end.offset-e[d][1].start.offset?(u=2,l=uu(l,[["enter",e[d][1],t],["exit",e[d][1],t]])):u=0,cu(e,n-1,d-n+3,l),d=n+l.length-u-2;break}d=-1;for(;++d<e.length;)"attentionSequence"===e[d][1].type&&(e[d][1].type="data");return e},tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Sd(r);let o;return function(t){return o=t,e.enter("attentionSequence"),a(t)};function a(s){if(s===o)return e.consume(s),a;const l=e.exit("attentionSequence"),c=Sd(s),u=!c||2===c&&i||n.includes(s),d=!i||2===i&&c||n.includes(r);return l._open=Boolean(42===o?u:u&&(i||!d)),l._close=Boolean(42===o?d:d&&(c||!u)),t(s)}}};function Cd(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Td={name:"autolink",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i};function i(t){return vu(t)?(e.consume(t),o):64===t?n(t):l(t)}function o(e){return 43===e||45===e||46===e||wu(e)?(r=1,a(e)):l(e)}function a(t){return 58===t?(e.consume(t),r=0,s):(43===t||45===t||46===t||wu(t))&&r++<32?(e.consume(t),a):(r=0,l(t))}function s(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||ku(r)?n(r):(e.consume(r),s)}function l(t){return 64===t?(e.consume(t),c):bu(t)?(e.consume(t),l):n(t)}function c(e){return wu(e)?u(e):n(e)}function u(n){return 46===n?(e.consume(n),r=0,c):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):d(n)}function d(t){if((45===t||wu(t))&&r++<63){const n=45===t?d:u;return e.consume(t),n}return n(t)}}};const Rd={name:"htmlText",tokenize:function(e,t,n){const r=this;let i,o,a;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),s};function s(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),b):63===t?(e.consume(t),v):vu(t)?(e.consume(t),x):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),o=0,p):vu(t)?(e.consume(t),y):n(t)}function c(t){return 45===t?(e.consume(t),h):n(t)}function u(t){return null===t?n(t):45===t?(e.consume(t),d):Su(t)?(a=u,P(t)):(e.consume(t),u)}function d(t){return 45===t?(e.consume(t),h):u(t)}function h(e){return 62===e?I(e):45===e?d(e):u(e)}function p(t){const r="CDATA[";return t===r.charCodeAt(o++)?(e.consume(t),6===o?m:p):n(t)}function m(t){return null===t?n(t):93===t?(e.consume(t),f):Su(t)?(a=m,P(t)):(e.consume(t),m)}function f(t){return 93===t?(e.consume(t),g):m(t)}function g(t){return 62===t?I(t):93===t?(e.consume(t),g):m(t)}function y(t){return null===t||62===t?I(t):Su(t)?(a=y,P(t)):(e.consume(t),y)}function v(t){return null===t?n(t):63===t?(e.consume(t),w):Su(t)?(a=v,P(t)):(e.consume(t),v)}function w(e){return 62===e?I(e):v(e)}function b(t){return vu(t)?(e.consume(t),k):n(t)}function k(t){return 45===t||wu(t)?(e.consume(t),k):D(t)}function D(t){return Su(t)?(a=D,P(t)):Cu(t)?(e.consume(t),D):I(t)}function x(t){return 45===t||wu(t)?(e.consume(t),x):47===t||62===t||Au(t)?E(t):n(t)}function E(t){return 47===t?(e.consume(t),I):58===t||95===t||vu(t)?(e.consume(t),S):Su(t)?(a=E,P(t)):Cu(t)?(e.consume(t),E):I(t)}function S(t){return 45===t||46===t||58===t||95===t||wu(t)?(e.consume(t),S):A(t)}function A(t){return 61===t?(e.consume(t),C):Su(t)?(a=A,P(t)):Cu(t)?(e.consume(t),A):E(t)}function C(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),i=t,T):Su(t)?(a=C,P(t)):Cu(t)?(e.consume(t),C):(e.consume(t),R)}function T(t){return t===i?(e.consume(t),i=void 0,F):null===t?n(t):Su(t)?(a=T,P(t)):(e.consume(t),T)}function R(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||Au(t)?E(t):(e.consume(t),R)}function F(e){return 47===e||62===e||Au(e)?E(e):n(e)}function I(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function P(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),M}function M(t){return Cu(t)?Iu(e,_,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):_(t)}function _(t){return e.enter("htmlTextData"),a(t)}}};const Fd={name:"labelStartLink",resolveAll:bd.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};const Id={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),r};function r(r){return Su(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}};const Pd={name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,n,r=e.length-4,i=3;if(("lineEnding"===e[i][1].type||"space"===e[i][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type))for(t=i;++t<r;)if("codeTextData"===e[t][1].type){e[i][1].type="codeTextPadding",e[r][1].type="codeTextPadding",i+=2,r-=2;break}t=i-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},tokenize:function(e,t,n){let r,i,o=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)};function a(t){return 96===t?(e.consume(t),o++,a):(e.exit("codeTextSequence"),s(t))}function s(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),s):96===t?(i=e.enter("codeTextSequence"),r=0,c(t)):Su(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||Su(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),r++,c):r===o?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(i.type="codeTextData",l(n))}}};const Md={42:Ku,43:Ku,45:Ku,48:Ku,49:Ku,50:Ku,51:Ku,52:Ku,53:Ku,54:Ku,55:Ku,56:Ku,57:Ku,62:Qu},_d={91:td},Nd={[-2]:rd,[-1]:rd,32:rd},Od={35:od,42:Vu,45:[ad,Vu],60:cd,61:ad,95:Vu,96:pd,126:pd},jd={38:gd,92:yd},Ld={[-5]:vd,[-4]:vd,[-3]:vd,33:Ed,38:gd,42:Ad,60:[Td,Rd],91:Fd,92:[Id,yd],93:bd,95:Ad,96:Pd},Bd={null:[Ad,Bu]},Wd={null:[42,95]},Ud={null:[]};function qd(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let a=[],s=[],l=!0;const c={attempt:v(function(e,t){w(e,t.from)}),check:v(y),consume:function(e){Su(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,b()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++));u.previous=e,l=!0},enter:function(e,t){const n=t||{};return n.type=e,n.start=m(),u.events.push(["enter",n,u]),s.push(n),n},exit:function(e){const t=s.pop();return t.end=m(),u.events.push(["exit",t,u]),t},interrupt:v(y,{interrupt:!0})},u={code:null,containerState:{},defineSkip:function(e){i[e.line]=e.column,b()},events:[],now:m,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let a;if("string"===typeof o)a=o;else switch(o){case-5:a="\r";break;case-4:a="\n";break;case-3:a="\r\n";break;case-2:a=t?" ":"\t";break;case-1:if(!t&&i)continue;a=" ";break;default:a=String.fromCharCode(o)}i=-2===o,r.push(a)}return r.join("")}(p(e),t)},sliceStream:p,write:function(e){if(a=uu(a,e),f(),null!==a[a.length-1])return[];return w(t,0),u.events=wd(o,u.events,u),u.events}};let d,h=t.tokenize.call(u,c);return t.resolveAll&&o.push(t),u;function p(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let a;if(n===i)a=[e[n].slice(r,o)];else{if(a=e.slice(n,i),r>-1){const e=a[0];"string"===typeof e?a[0]=e.slice(r):a.shift()}o>0&&a.push(e[i].slice(0,o))}return a}(a,e)}function m(){const{_bufferIndex:e,_index:t,line:n,column:i,offset:o}=r;return{_bufferIndex:e,_index:t,line:n,column:i,offset:o}}function f(){let e;for(;r._index<a.length;){const t=a[r._index];if("string"===typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)g(t.charCodeAt(r._bufferIndex));else g(t)}}function g(e){l=void 0,d=e,h=h(e)}function y(e,t){t.restore()}function v(e,t){return function(n,i,o){let a,d,h,p;return Array.isArray(n)?f(n):"tokenize"in n?f([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return f([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function f(e){return a=e,d=0,0===e.length?o:g(e[d])}function g(e){return function(n){p=function(){const e=m(),t=u.previous,n=u.currentConstruct,i=u.events.length,o=Array.from(s);return{from:i,restore:a};function a(){r=e,u.previous=t,u.currentConstruct=n,u.events.length=i,s=o,b()}}(),h=e,e.partial||(u.currentConstruct=e);if(e.name&&u.parser.constructs.disable.null.includes(e.name))return v(n);return e.tokenize.call(t?Object.assign(Object.create(u),t):u,c,y,v)(n)}}function y(t){return l=!0,e(h,p),i}function v(e){return l=!0,p.restore(),++d<a.length?g(a[d]):o}}}function w(e,t){e.resolveAll&&!o.includes(e)&&o.push(e),e.resolve&&cu(u.events,t,u.events.length-t,e.resolve(u.events.slice(t),u)),e.resolveTo&&(u.events=e.resolveTo(u.events,u))}function b(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Hd(e){const t=function(e){const t={};let n=-1;for(;++n<e.length;)gu(t,e[n]);return t}([i,...(e||{}).extensions||[]]),n={constructs:t,content:r(Pu),defined:[],document:r(Mu),flow:r(Lu),lazy:{},string:r(Wu),text:r(Uu)};return n;function r(e){return function(t){return qd(n,e,t)}}}const zd=/[\0\t\n\r]/g;function Vd(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535===(65535&n)||65534===(65535&n)||n>1114111?"\ufffd":String.fromCodePoint(n)}const Kd=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Yd(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return Vd(n.slice(t?2:1),t?16:10)}return fd(n)||e}const Gd={}.hasOwnProperty;function Qd(e,t,n){return"string"!==typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(te),autolinkProtocol:S,autolinkEmail:S,atxHeading:o(Z),blockQuote:o(K),characterEscape:S,characterReference:S,codeFenced:o(Y),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:o(Y,a),codeText:o(G,a),codeTextData:S,data:S,codeFlowValue:S,definition:o(Q),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:o(X),hardBreakEscape:o(J),hardBreakTrailing:o(J),htmlFlow:o($,a),htmlFlowData:S,htmlText:o($,a),htmlTextData:S,image:o(ee),label:a,link:o(te),listItem:o(re),listItemValue:h,listOrdered:o(ne,d),listUnordered:o(ne),paragraph:o(ie),reference:B,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:o(Z),strong:o(oe),thematicBreak:o(se)},exit:{atxHeading:l(),atxHeadingSequence:k,autolink:l(),autolinkEmail:V,autolinkProtocol:z,blockQuote:l(),characterEscapeValue:A,characterReferenceMarkerHexadecimal:U,characterReferenceMarkerNumeric:U,characterReferenceValue:q,characterReference:H,codeFenced:l(g),codeFencedFence:f,codeFencedFenceInfo:p,codeFencedFenceMeta:m,codeFlowValue:A,codeIndented:l(y),codeText:l(I),codeTextData:A,data:A,definition:l(),definitionDestinationString:b,definitionLabelString:v,definitionTitleString:w,emphasis:l(),hardBreakEscape:l(T),hardBreakTrailing:l(T),htmlFlow:l(R),htmlFlowData:A,htmlText:l(F),htmlTextData:A,image:l(M),label:N,labelText:_,lineEnding:C,link:l(P),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:W,resourceDestinationString:O,resourceTitleString:j,resource:L,setextHeading:l(E),setextHeadingLineSequence:x,setextHeadingText:D,strong:l(),thematicBreak:l()}};Zd(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(e){let r={type:"root",children:[]};const o={stack:[r],tokenStack:[],config:t,enter:s,exit:c,buffer:a,resume:u,data:n},l=[];let d=-1;for(;++d<e.length;)if("listOrdered"===e[d][1].type||"listUnordered"===e[d][1].type)if("enter"===e[d][0])l.push(d);else{d=i(e,l.pop(),d)}for(d=-1;++d<e.length;){const n=t[e[d][0]];Gd.call(n,e[d][1].type)&&n[e[d][1].type].call(Object.assign({sliceSerialize:e[d][2].sliceSerialize},o),e[d][1])}if(o.tokenStack.length>0){const e=o.tokenStack[o.tokenStack.length-1];(e[1]||$d).call(o,void 0,e[0])}for(r.position={start:Xd(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:Xd(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},d=-1;++d<t.transforms.length;)r=t.transforms[d](r)||r;return r}function i(e,t,n){let r,i,o,a,s=t-1,l=-1,c=!1;for(;++s<=n;){const t=e[s];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,a=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!r||a||l||o||(o=s),a=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:a=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let a=s;for(i=void 0;a--;){const t=e[a];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;i&&(e[i][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",i=a}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}o&&(!i||o<i)&&(r._spread=!0),r.end=Object.assign({},i?e[i][1].start:t[1].end),e.splice(i||s,0,["exit",r,t[2]]),s++,n++}if("listItemPrefix"===t[1].type){const i={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};r=i,e.splice(s,0,["enter",i,t[2]]),s++,n++,o=void 0,a=!0}}}return e[t][1]._spread=c,n}function o(e,t){return n;function n(n){s.call(this,e(n),n),t&&t.call(this,n)}}function a(){this.stack.push({type:"fragment",children:[]})}function s(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:Xd(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+Lc({start:e.start,end:e.end})+"): it\u2019s not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{(r[1]||$d).call(this,e,r[0])}n.position.end=Xd(e.end)}function u(){return function(e,t){const n=t||au;return su(e,"boolean"!==typeof n.includeImageAlt||n.includeImageAlt,"boolean"!==typeof n.includeHtml||n.includeHtml)}(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function p(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function m(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function f(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function v(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=ed(this.sliceSerialize(e)).toLowerCase()}function w(){const e=this.resume();this.stack[this.stack.length-1].title=e}function b(){const e=this.resume();this.stack[this.stack.length-1].url=e}function k(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function D(){this.data.setextHeadingSlurpLineEnding=!0}function x(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function E(){this.data.setextHeadingSlurpLineEnding=void 0}function S(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=ae(),n.position={start:Xd(e.start),end:void 0},t.push(n)),this.stack.push(n)}function A(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=Xd(e.end)}function C(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=Xd(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(S.call(this,e),A.call(this,e))}function T(){this.data.atHardBreak=!0}function R(){const e=this.resume();this.stack[this.stack.length-1].value=e}function F(){const e=this.resume();this.stack[this.stack.length-1].value=e}function I(){const e=this.resume();this.stack[this.stack.length-1].value=e}function P(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function M(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function _(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(Kd,Yd)}(t),n.identifier=ed(t).toLowerCase()}function N(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function O(){const e=this.resume();this.stack[this.stack.length-1].url=e}function j(){const e=this.resume();this.stack[this.stack.length-1].title=e}function L(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function W(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=ed(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function U(e){this.data.characterReferenceType=e.type}function q(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let r;if(n)r=Vd(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{r=fd(t)}this.stack[this.stack.length-1].value+=r}function H(e){this.stack.pop().position.end=Xd(e.end)}function z(e){A.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function V(e){A.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function K(){return{type:"blockquote",children:[]}}function Y(){return{type:"code",lang:null,meta:null,value:""}}function G(){return{type:"inlineCode",value:""}}function Q(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function X(){return{type:"emphasis",children:[]}}function Z(){return{type:"heading",depth:0,children:[]}}function J(){return{type:"break"}}function $(){return{type:"html",value:""}}function ee(){return{type:"image",title:null,url:"",alt:null}}function te(){return{type:"link",title:null,url:"",children:[]}}function ne(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function re(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function ie(){return{type:"paragraph",children:[]}}function oe(){return{type:"strong",children:[]}}function ae(){return{type:"text",value:""}}function se(){return{type:"thematicBreak"}}}(n)(function(e){for(;!pu(e););return e}(Hd(n).document().write(function(){let e,t=1,n="",r=!0;return function(i,o,a){const s=[];let l,c,u,d,h;for(i=n+("string"===typeof i?i.toString():new TextDecoder(o||void 0).decode(i)),u=0,n="",r&&(65279===i.charCodeAt(0)&&u++,r=void 0);u<i.length;){if(zd.lastIndex=u,l=zd.exec(i),d=l&&void 0!==l.index?l.index:i.length,h=i.charCodeAt(d),!l){n=i.slice(u);break}if(10===h&&u===d&&e)s.push(-3),e=void 0;else switch(e&&(s.push(-5),e=void 0),u<d&&(s.push(i.slice(u,d)),t+=d-u),h){case 0:s.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),s.push(-2);t++<c;)s.push(-1);break;case 10:s.push(-4),t=1;break;default:e=!0,t=1}u=d+1}return a&&(e&&s.push(-5),n&&s.push(n),s.push(null)),s}}()(e,t,!0))))}function Xd(e){return{line:e.line,column:e.column,offset:e.offset}}function Zd(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Zd(e,r):Jd(e,r)}}function Jd(e,t){let n;for(n in t)if(Gd.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function $d(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Lc({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Lc({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Lc({start:t.start,end:t.end})+") is still open")}function eh(e){const t=this;t.parser=function(n){return Qd(n,(0,c.A)((0,c.A)((0,c.A)({},t.data("settings")),e),{},{extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]}))}}const th="object"===typeof self?self:globalThis,nh=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),r=i=>{if(e.has(i))return e.get(i);const[o,a]=t[i];switch(o){case 0:case-1:return n(a,i);case 1:{const e=n([],i);for(const t of a)e.push(r(t));return e}case 2:{const e=n({},i);for(const[t,n]of a)e[r(t)]=r(n);return e}case 3:return n(new Date(a),i);case 4:{const{source:e,flags:t}=a;return n(new RegExp(e,t),i)}case 5:{const e=n(new Map,i);for(const[t,n]of a)e.set(r(t),r(n));return e}case 6:{const e=n(new Set,i);for(const t of a)e.add(r(t));return e}case 7:{const{name:e,message:t}=a;return n(new th[e](t),i)}case 8:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:e}=new Uint8Array(a);return n(new DataView(e),a)}}return n(new th[o](a),i)};return r})(new Map,e)(0),rh="",{toString:ih}={},{keys:oh}=Object,ah=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=ih.call(e).slice(8,-1);switch(n){case"Array":return[1,rh];case"Object":return[2,rh];case"Date":return[3,rh];case"RegExp":return[4,rh];case"Map":return[5,rh];case"Set":return[6,rh];case"DataView":return[1,n]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},sh=e=>{let[t,n]=e;return 0===t&&("function"===n||"symbol"===n)},lh=function(e){let{json:t,lossy:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];return((e,t,n,r)=>{const i=(e,t)=>{const i=r.push(e)-1;return n.set(t,i),i},o=r=>{if(n.has(r))return n.get(r);let[a,s]=ah(r);switch(a){case 0:{let t=r;switch(s){case"bigint":a=8,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+s);t=null;break;case"undefined":return i([-1],r)}return i([a,t],r)}case 1:{if(s){let e=r;return"DataView"===s?e=new Uint8Array(r.buffer):"ArrayBuffer"===s&&(e=new Uint8Array(r)),i([s,[...e]],r)}const e=[],t=i([a,e],r);for(const n of r)e.push(o(n));return t}case 2:{if(s)switch(s){case"BigInt":return i([s,r.toString()],r);case"Boolean":case"Number":case"String":return i([s,r.valueOf()],r)}if(t&&"toJSON"in r)return o(r.toJSON());const n=[],l=i([a,n],r);for(const t of oh(r))!e&&sh(ah(r[t]))||n.push([o(t),o(r[t])]);return l}case 3:return i([a,r.toISOString()],r);case 4:{const{source:e,flags:t}=r;return i([a,{source:e,flags:t}],r)}case 5:{const t=[],n=i([a,t],r);for(const[i,a]of r)(e||!sh(ah(i))&&!sh(ah(a)))&&t.push([o(i),o(a)]);return n}case 6:{const t=[],n=i([a,t],r);for(const i of r)!e&&sh(ah(i))||t.push(o(i));return n}}const{message:l}=r;return i([a,{name:s,message:l}],r)};return o})(!(t||n),!!t,new Map,r)(e),r},ch="function"===typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?nh(lh(e,t)):structuredClone(e):(e,t)=>nh(lh(e,t));function uh(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let a="";if(37===o&&wu(e.charCodeAt(n+1))&&wu(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(a=String.fromCharCode(o));else if(o>55295&&o<57344){const t=e.charCodeAt(n+1);o<56320&&t>56319&&t<57344?(a=String.fromCharCode(o,t),i=1):a="\ufffd"}else a=String.fromCharCode(o);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function dh(e,t){const n=[{type:"text",value:"\u21a9"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function hh(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const ph=function(e){if(null===e||void 0===e)return fh;if("function"===typeof e)return mh(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=ph(e[n]);return mh(r);function r(){let e=-1;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(;++e<t.length;)if(t[e].apply(this,r))return!0;return!1}}(e):function(e){const t=e;return mh(n);function n(n){const r=n;let i;for(i in e)if(r[i]!==t[i])return!1;return!0}}(e);if("string"===typeof e)return function(e){return mh(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function mh(e){return function(t,n,r){return Boolean(gh(t)&&e.call(this,t,"number"===typeof n?n:void 0,r||void 0))}}function fh(){return!0}function gh(e){return null!==e&&"object"===typeof e&&"type"in e}const yh=[],vh=!0,wh=!1;function bh(e,t,n,r){let i;"function"===typeof t&&"function"!==typeof n?(r=n,n=t):i=t;const o=ph(i),a=r?-1:1;!function e(i,s,l){const c=i&&"object"===typeof i?i:{};if("string"===typeof c.type){const e="string"===typeof c.tagName?c.tagName:"string"===typeof c.name?c.name:void 0;Object.defineProperty(u,"name",{value:"node ("+i.type+(e?"<"+e+">":"")+")"})}return u;function u(){let c,u,d,h=yh;if((!t||o(i,s,l[l.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[vh,e];return null===e||void 0===e?yh:[e]}(n(i,l)),h[0]===wh))return h;if("children"in i&&i.children){const t=i;if(t.children&&"skip"!==h[0])for(u=(r?t.children.length:-1)+a,d=l.concat(t);u>-1&&u<t.children.length;){const n=t.children[u];if(c=e(n,u,d)(),c[0]===wh)return c;u="number"===typeof c[1]?c[1]:u+a}}return h}}(e,void 0,[])()}function kh(e,t,n,r){let i,o,a;"function"===typeof t&&"function"!==typeof n?(o=void 0,a=t,i=n):(o=t,a=n,i=r),bh(e,o,function(e,t){const n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return a(e,r,n)},i)}function Dh(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),o=i[0];o&&"text"===o.type?o.value="["+o.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&"text"===a.type?a.value+=r:i.push({type:"text",value:r}),i}function xh(e){const t=e.spread;return null===t||void 0===t?e.children.length>1:t}function Eh(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const o=[];for(;r;)o.push(Sh(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(Sh(t.slice(i),i>0,!1)),o.join("")}function Sh(e,t,n){let r=0,i=e.length;if(t){let t=e.codePointAt(r);for(;9===t||32===t;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(i-1);for(;9===t||32===t;)i--,t=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}const Ah={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=uh(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let a,s=e.footnoteCounts.get(r);void 0===s?(s=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=o+1,s+=1,e.footnoteCounts.set(r,s);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Dh(e,t);const i={src:uh(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)},image:function(e,t){const n={src:uh(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Dh(e,t);const i={href:uh(r.url||"")};null!==r.title&&void 0!==r.title&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)},link:function(e,t){const n={href:uh(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){const r=e.all(t),i=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=xh(n[r])}return t}(n):xh(t),o={},a=[];if("boolean"===typeof t.checked){const e=r[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},r.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let s=-1;for(;++s<r.length;){const e=r[s];(i||0!==s||"element"!==e.type||"p"!==e.tagName)&&a.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||i?a.push(e):a.push(...e.children)}const l=r[r.length-1];l&&(i||"element"!==l.type||"p"!==l.tagName)&&a.push({type:"text",value:"\n"});const c={type:"element",tagName:"li",properties:o,children:a};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){const n={},r=e.all(t);let i=-1;for("number"===typeof t.start&&1!==t.start&&(n.start=t.start);++i<r.length;){const e=r[i];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),i.push(n)}if(n.length>0){const r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},o=Oc(t.children[1]),a=Nc(t.children[t.children.length-1]);o&&a&&(r.position={start:o,end:a}),i.push(r)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const r=n?n.children:void 0,i=0===(r?r.indexOf(t):1)?"th":"td",o=n&&"table"===n.type?n.align:void 0,a=o?o.length:t.children.length;let s=-1;const l=[];for(;++s<a;){const n=t.children[s],r={},a=o?o[s]:void 0;a&&(r.align=a);let c={type:"element",tagName:i,properties:r,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),l.push(c)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){const n={type:"text",value:Eh(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:Ch,yaml:Ch,definition:Ch,footnoteDefinition:Ch};function Ch(){}const Th=["children"],Rh={}.hasOwnProperty,Fh={};function Ih(e,t){e.position&&(t.position=function(e){const t=Oc(e),n=Nc(e);if(t&&n)return{start:t,end:n}}(e))}function Ph(e,t){let n=t;if(e&&e.data){const t=e.data.hName,r=e.data.hChildren,i=e.data.hProperties;if("string"===typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&i&&Object.assign(n.properties,ch(i)),"children"in n&&n.children&&null!==r&&void 0!==r&&(n.children=r)}return n}function Mh(e,t){const n=t.data||{},r=!("value"in t)||Rh.call(n,"hProperties")||Rh.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,r),e.applyData(t,r)}function _h(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function Nh(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function Oh(e,t){const n=function(e,t){const n=t||Fh,r=new Map,i=new Map,o=new Map,a=(0,c.A)((0,c.A)({},Ah),n.handlers),s={all:function(e){const t=[];if("children"in e){const n=e.children;let r=-1;for(;++r<n.length;){const i=s.one(n[r],e);if(i){if(r&&"break"===n[r-1].type&&(Array.isArray(i)||"text"!==i.type||(i.value=Nh(i.value)),!Array.isArray(i)&&"element"===i.type)){const e=i.children[0];e&&"text"===e.type&&(e.value=Nh(e.value))}Array.isArray(i)?t.push(...i):t.push(i)}}}return t},applyData:Ph,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:a,one:function(e,t){const n=e.type,r=s.handlers[n];if(Rh.call(s.handlers,n)&&r)return r(s,e,t);if(s.options.passThrough&&s.options.passThrough.includes(n)){if("children"in e){const{children:t}=e,n=(0,eo.A)(e,Th),r=ch(n);return r.children=s.all(e),r}return ch(e)}return(s.options.unknownHandler||Mh)(s,e,t)},options:n,patch:Ih,wrap:_h};return kh(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?r:i,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}}),s}(e,t),r=n.one(e,void 0),i=function(e){const t="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||dh,r=e.options.footnoteBackLabel||hh,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let l=-1;for(;++l<e.footnoteOrder.length;){const i=e.footnoteById.get(e.footnoteOrder[l]);if(!i)continue;const o=e.all(i),a=String(i.identifier).toUpperCase(),c=uh(a.toLowerCase());let u=0;const d=[],h=e.footnoteCounts.get(a);for(;void 0!==h&&++u<=h;){d.length>0&&d.push({type:"text",value:" "});let e="string"===typeof n?n:n(l,u);"string"===typeof e&&(e={type:"text",value:e}),d.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+c+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"===typeof r?r:r(l,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const p=o[o.length-1];if(p&&"element"===p.type&&"p"===p.tagName){const e=p.children[p.children.length-1];e&&"text"===e.type?e.value+=" ":p.children.push({type:"text",value:" "}),p.children.push(...d)}else o.push(...d);const m={type:"element",tagName:"li",properties:{id:t+"fn-"+c},children:e.wrap(o,!0)};e.patch(i,m),s.push(m)}if(0!==s.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:(0,c.A)((0,c.A)({},ch(a)),{},{id:"footnote-label"}),children:[{type:"text",value:i}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(s,!0)},{type:"text",value:"\n"}]}}(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:"\n"},i),o}function jh(e,t){return e&&"run"in e?async function(n,r){const i=Oh(n,(0,c.A)({file:r},t));await e.run(i,r)}:function(n,r){return Oh(n,(0,c.A)({file:r},e||t))}}function Lh(e){if(e)throw e}var Bh=n(240);function Wh(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Uh(){const e=[],t={run:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let i=-1;const o=n.pop();if("function"!==typeof o)throw new TypeError("Expected function as last argument, not "+o);!function t(r){const a=e[++i];let s=-1;if(r)o(r);else{for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];for(;++s<n.length;)null!==c[s]&&void 0!==c[s]||(c[s]=n[s]);n=c,a?function(e,t){let n;return i;function i(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];const l=e.length>i.length;let c;l&&i.push(o);try{c=e.apply(this,i)}catch(r){if(l&&n)throw r;return o(r)}l||(c&&c.then&&"function"===typeof c.then?c.then(a,o):c instanceof Error?o(c):a(c))}function o(e){if(!n){n=!0;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t(e,...i)}}function a(e){o(null,e)}}(a,t)(...c):o(null,...c)}}(null,...n)},use:function(n){if("function"!==typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const qh={basename:function(e,t){if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');Hh(e);let n,r=0,i=-1,o=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;o--;)if(47===e.codePointAt(o)){if(n){r=o+1;break}}else i<0&&(n=!0,i=o+1);return i<0?"":e.slice(r,i)}if(t===e)return"";let a=-1,s=t.length-1;for(;o--;)if(47===e.codePointAt(o)){if(n){r=o+1;break}}else a<0&&(n=!0,a=o+1),s>-1&&(e.codePointAt(o)===t.codePointAt(s--)?s<0&&(i=o):(s=-1,i=a));r===i?i=a:i<0&&(i=e.length);return e.slice(r,i)},dirname:function(e){if(Hh(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.codePointAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){Hh(e);let t,n=e.length,r=-1,i=0,o=-1,a=0;for(;n--;){const s=e.codePointAt(n);if(47!==s)r<0&&(t=!0,r=n+1),46===s?o<0?o=n:1!==a&&(a=1):o>-1&&(a=-1);else if(t){i=n+1;break}}if(o<0||r<0||0===a||1===a&&o===r-1&&o===i+1)return"";return e.slice(o,r)},join:function(){let e,t=-1;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(;++t<r.length;)Hh(r[t]),r[t]&&(e=void 0===e?r[t]:e+"/"+r[t]);return void 0===e?".":function(e){Hh(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,r,i="",o=0,a=-1,s=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(a===l-1||1===s);else if(a!==l-1&&2===s){if(i.length<2||2!==o||46!==i.codePointAt(i.length-1)||46!==i.codePointAt(i.length-2))if(i.length>2){if(r=i.lastIndexOf("/"),r!==i.length-1){r<0?(i="",o=0):(i=i.slice(0,r),o=i.length-1-i.lastIndexOf("/")),a=l,s=0;continue}}else if(i.length>0){i="",o=0,a=l,s=0;continue}t&&(i=i.length>0?i+"/..":"..",o=2)}else i.length>0?i+="/"+e.slice(a+1,l):i=e.slice(a+1,l),o=l-a-1;a=l,s=0}else 46===n&&s>-1?s++:s=-1}return i}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(e)},sep:"/"};function Hh(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const zh={cwd:function(){return"/"}};function Vh(e){return Boolean(null!==e&&"object"===typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function Kh(e){if("string"===typeof e)e=new URL(e);else if(!Vh(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const Yh=["history","path","basename","stem","extname","dirname"];class Gh{constructor(e){let t;t=e?Vh(e)?{path:e}:"string"===typeof e||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":zh.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,r=-1;for(;++r<Yh.length;){const e=Yh[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)Yh.includes(n)||(this[n]=t[n])}get basename(){return"string"===typeof this.path?qh.basename(this.path):void 0}set basename(e){Xh(e,"basename"),Qh(e,"basename"),this.path=qh.join(this.dirname||"",e)}get dirname(){return"string"===typeof this.path?qh.dirname(this.path):void 0}set dirname(e){Zh(this.basename,"dirname"),this.path=qh.join(e||"",this.basename)}get extname(){return"string"===typeof this.path?qh.extname(this.path):void 0}set extname(e){if(Qh(e,"extname"),Zh(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=qh.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Vh(e)&&(e=Kh(e)),Xh(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"===typeof this.path?qh.basename(this.path,this.extname):void 0}set stem(e){Xh(e,"stem"),Qh(e,"stem"),this.path=qh.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){const r=new qc(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){if(void 0===this.value)return"";if("string"===typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function Qh(e,t){if(e&&e.includes(qh.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+qh.sep+"`")}function Xh(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Zh(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const Jh=function(e){const t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};return Object.setPrototypeOf(r,t),r},$h={}.hasOwnProperty;class ep extends Jh{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Uh()}copy(){const e=new ep;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(Bh(!0,{},this.namespace)),e}data(e,t){return"string"===typeof e?2===arguments.length?(ip("data",this.frozen),this.namespace[e]=t,this):$h.call(this.namespace,e)&&this.namespace[e]||void 0:e?(ip("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const r=t.call(e,...n);"function"===typeof r&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=sp(e),n=this.parser||this.Parser;return np("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),np("process",this.parser||this.Parser),rp("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,i){const o=sp(e),a=n.parse(o);function s(e,n){e||!n?i(e):r?r(n):t(void 0,n)}n.run(a,o,function(e,t,r){if(e||!t||!r)return s(e);const i=t,o=n.stringify(i,r);var a;"string"===typeof(a=o)||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(a)?r.value=o:r.result=o,s(e,r)})}}processSync(e){let t,n=!1;return this.freeze(),np("processSync",this.parser||this.Parser),rp("processSync",this.compiler||this.Compiler),this.process(e,function(e,r){n=!0,Lh(e),t=r}),ap("processSync","process",n),t}run(e,t,n){op(e),this.freeze();const r=this.transformers;return n||"function"!==typeof t||(n=t,t=void 0),n?i(void 0,n):new Promise(i);function i(i,o){const a=sp(t);r.run(e,a,function(t,r,a){const s=r||e;t?o(t):i?i(s):n(void 0,s,a)})}}runSync(e,t){let n,r=!1;return this.run(e,t,function(e,t){Lh(e),n=t,r=!0}),ap("runSync","run",r),n}stringify(e,t){this.freeze();const n=sp(t),r=this.compiler||this.Compiler;return rp("stringify",r),op(e),r(e,n)}use(e){const t=this.attachers,n=this.namespace;if(ip("use",this.frozen),null===e||void 0===e);else if("function"===typeof e){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];c(e,i)}else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?l(e):s(e)}return this;function a(e){if("function"===typeof e)c(e,[]);else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;c(t,n)}else s(e)}}function s(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(e.plugins),e.settings&&(n.settings=Bh(!0,n.settings,e.settings))}function l(e){let t=-1;if(null===e||void 0===e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){a(e[t])}}}function c(e,n){let r=-1,i=-1;for(;++r<t.length;)if(t[r][0]===e){i=r;break}if(-1===i)t.push([e,...n]);else if(n.length>0){let[r,...o]=n;const a=t[i][1];Wh(a)&&Wh(r)&&(r=Bh(!0,a,r)),t[i]=[e,r,...o]}}}}const tp=(new ep).freeze();function np(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function rp(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function ip(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function op(e){if(!Wh(e)||"string"!==typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function ap(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function sp(e){return function(e){return Boolean(e&&"object"===typeof e&&"message"in e&&"messages"in e)}(e)?e:new Gh(e)}const lp=[],cp={allowDangerousHtml:!0},up=/^(https?|ircs?|mailto|xmpp)$/i,dp=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function hp(e){const t=pp(e),n=mp(e);return fp(t.runSync(t.parse(n),n),e)}function pp(e){const t=e.rehypePlugins||lp,n=e.remarkPlugins||lp,r=e.remarkRehypeOptions?(0,c.A)((0,c.A)({},e.remarkRehypeOptions),cp):cp;return tp().use(eh).use(n).use(jh,r).use(t)}function mp(e){const t=e.children||"",n=new Gh;return"string"===typeof t&&(n.value=t),n}function fp(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,o=t.disallowedElements,a=t.skipHtml,s=t.unwrapDisallowed,l=t.urlTransform||gp;for(const c of dp)Object.hasOwn(t,c.from)&&Gl((c.from,c.to&&c.to,c.id));return kh(e,function(e,t,i){if("raw"===e.type&&i&&"number"===typeof t)return a?i.children.splice(t,1):i.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in ou)if(Object.hasOwn(ou,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],r=ou[t];(null===r||r.includes(e.tagName))&&(e.properties[t]=l(String(n||""),t,e))}}if("element"===e.type){let a=n?!n.includes(e.tagName):!!o&&o.includes(e.tagName);if(!a&&r&&"number"===typeof t&&(a=!r(e,t,i)),a&&i&&"number"===typeof t)return s&&e.children?i.children.splice(t,1,...e.children):i.children.splice(t,1),t}}),Qc(e,{Fragment:je.Fragment,components:i,ignoreInvalidStyle:!0,jsx:je.jsx,jsxs:je.jsxs,passKeys:!0,passNode:!0})}function gp(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return-1===t||-1!==i&&t>i||-1!==n&&t>n||-1!==r&&t>r||up.test(e.slice(0,t))?e:""}const yp=function(e){let{rawResponse:t}=e;return t?(0,je.jsxs)("div",{className:"coaching-analysis-wrapper",children:[(0,je.jsx)("div",{className:"coaching-header",children:(0,je.jsx)("h2",{children:"Coach's Analysis"})}),(0,je.jsx)("div",{className:"coaching-content",children:(0,je.jsx)(hp,{components:{blockquote:e=>{let{children:t}=e;return(0,je.jsx)("div",{className:"info-box",children:t})},p:e=>{let{children:t}=e;return(0,je.jsx)("p",{className:"coaching-p",children:t})},h1:e=>{let{children:t}=e;return(0,je.jsx)("h1",{className:"coaching-h1",children:t})},h2:e=>{let{children:t}=e;return(0,je.jsx)("h2",{className:"coaching-h2",children:t})},h3:e=>{let{children:t}=e;return(0,je.jsx)("h3",{className:"coaching-h3",children:t})},ul:e=>{let{children:t}=e;return(0,je.jsx)("ul",{className:"coaching-ul",children:t})},ol:e=>{let{children:t}=e;return(0,je.jsx)("ol",{className:"coaching-ol",children:t})},strong:e=>{let{children:t}=e;return(0,je.jsx)("strong",{className:"coaching-strong",children:t})}},children:t})})]}):null};const vp=function(e){let{isOpen:t,onClose:n,userProfile:r,trainingPlan:i,onPlanUpdated:o}=e;const s=Hl(),[l,u]=(0,a.useState)((null===r||void 0===r?void 0:r.recentRaceDistance)||""),[d,h]=(0,a.useState)((null===r||void 0===r?void 0:r.recentRaceTime)||""),[p,m]=(0,a.useState)(!1);return t?(0,je.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4,padding:"20px"},onClick:e=>{e.target===e.currentTarget&&n()},children:(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%)",border:"1px solid #333",borderRadius:"12px",width:"100%",maxWidth:"500px",padding:"32px",position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,je.jsx)("h2",{style:{margin:"0 0 16px 0",fontSize:"1.5rem",color:"#fff",display:"flex",alignItems:"center",gap:"8px"},children:"\ud83d\udcca Enter Recent Race Time"}),(0,je.jsx)("p",{style:{margin:"0 0 24px 0",fontSize:"1rem",color:"#E5E7EB",lineHeight:"1.6"},children:"Adding a recent race result helps us calculate your exact training paces. We'll instantly regenerate your plan with updated paces."}),(0,je.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"8px"},children:"Race Distance"}),(0,je.jsxs)("select",{value:l,onChange:e=>u(e.target.value),style:{width:"100%",padding:"12px",fontSize:"1rem",background:"#1a1a1a",border:"1px solid #333",borderRadius:"6px",color:"#fff"},children:[(0,je.jsx)("option",{value:"",children:"Select distance"}),(0,je.jsx)("option",{value:"5K",children:"5K"}),(0,je.jsx)("option",{value:"10K",children:"10K"}),(0,je.jsx)("option",{value:"Half",children:"Half Marathon"}),(0,je.jsx)("option",{value:"Marathon",children:"Marathon"})]})]}),(0,je.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"8px"},children:"Finish Time"}),(0,je.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),placeholder:"e.g., 1:07:35 or 25:30",style:{width:"100%",padding:"12px",fontSize:"1rem",background:"#1a1a1a",border:"1px solid #333",borderRadius:"6px",color:"#fff"}}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.85rem",color:"#999"},children:'Enter your finish time in any format (e.g., "1:07:35" or "25:30")'})]}),(0,je.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[(0,je.jsx)("button",{onClick:n,disabled:p,className:"btn btn-secondary",style:{minWidth:"100px"},children:"Cancel"}),(0,je.jsx)("button",{onClick:async()=>{if(l&&d){m(!0);try{Oe.A.log("\ud83d\udd04 Updating profile with recent race time and regenerating plan..."),Oe.A.log("\ud83d\udccb Original userProfile keys:",r?Object.keys(r):"null");const e=(0,c.A)((0,c.A)({},r),{},{recentRaceDistance:l,recentRaceTime:d,isEstimatedFitness:!1,raceTime:r.raceTime||r.currentRaceTime||r.goalTime,raceDistance:r.raceDistance||r.raceDistance,raceDate:r.raceDate||r.raceDate,currentWeeklyMileage:r.currentWeeklyMileage||r.currentWeeklyMileage,currentLongRun:r.currentLongRun||r.currentLongRunDistance,workoutsPerWeek:r.workoutsPerWeek||r.runsPerWeek||r.workoutsPerWeek,longRunDay:r.longRunDay||r.longRunDay,experienceLevel:r.experienceLevel||r.experienceLevel,availableDays:r.availableDays||r.availableDays||[],hardSessionDays:r.hardSessionDays||r.qualityDays||r.hardSessionDays||[],units:r.units||"imperial"});Oe.A.log("\ud83d\udccb Updated profile keys:",Object.keys(e)),Oe.A.log("\ud83d\udd0d Required fields check:",{hasRaceTime:!!e.raceTime,hasRaceDistance:!!e.raceDistance,hasRaceDate:!!e.raceDate,hasCurrentWeeklyMileage:!!e.currentWeeklyMileage,hasCurrentLongRun:!!e.currentLongRun,hasWorkoutsPerWeek:!!e.workoutsPerWeek,hasLongRunDay:!!e.longRunDay,hasExperienceLevel:!!e.experienceLevel});const t=[];if(e.raceTime||t.push("raceTime"),e.raceDistance||t.push("raceDistance"),e.raceDate||t.push("raceDate"),e.currentWeeklyMileage||t.push("currentWeeklyMileage"),e.currentLongRun||t.push("currentLongRun"),e.workoutsPerWeek||e.runsPerWeek||t.push("workoutsPerWeek"),e.longRunDay||t.push("longRunDay"),e.experienceLevel||t.push("experienceLevel"),t.length>0)throw Oe.A.error("\u274c Missing required profile fields:",t),Oe.A.error("\ud83d\udccb Available profile fields:",Object.keys(e)),Oe.A.error("\ud83d\udccb Original userProfile:",r),new Error("Missing required profile fields: ".concat(t.join(", "),". Please complete onboarding first."));await Ne.saveUserProfile(Pe.j2.currentUser.uid,e),Oe.A.log("\u2705 Profile updated with recent race time"),s.info("Regenerating your plan with updated fitness data...",5e3);const i=await _t.generateTrainingPlan(e);if(!i.success||!i.plan)throw new Error(i.error||"Failed to regenerate plan");if(!i.plan.weeks||!Array.isArray(i.plan.weeks)||0===i.plan.weeks.length)throw Oe.A.error("\u274c Regenerated plan has no weeks array!",{planKeys:Object.keys(i.plan),hasWeeks:!!i.plan.weeks,weeksType:typeof i.plan.weeks}),new Error("Plan regeneration failed - weeks array is missing");await Ne.saveTrainingPlan(Pe.j2.currentUser.uid,i.plan),Oe.A.log("\u2705 Plan regenerated with updated fitness data",{weeksCount:i.plan.weeks.length,hasCoaching:!(!i.plan.aiCoachingAnalysis&&!i.plan.fullPlanText)}),s.success("Plan updated! Your training paces have been recalibrated.",5e3),o&&await o(i.plan,e),n()}catch(e){Oe.A.error("\u274c Error updating plan:",e),s.error("Failed to update plan. Please try again. "+e.message,8e3)}finally{m(!1)}}else s.error("Please enter both race distance and time")},disabled:p||!l||!d,className:"btn btn-primary",style:{minWidth:"160px"},children:p?"Updating...":"Update Plan"})]})]})}):null};function wp(e){let{trainingPlan:t,userProfile:n,onPlanUpdated:r}=e;const i=re(),o=Hl(),[s,l]=(0,a.useState)(!1),[c,u]=(0,a.useState)(n),[d,h]=(0,a.useState)(t);if((0,a.useEffect)(()=>{n&&u(n),t&&h(t)},[n,t]),null===d||void 0===d||!d.aiCoachingAnalysis)return i("/dashboard"),null;const p=(null===c||void 0===c?void 0:c.isEstimatedFitness)||!1;return(0,je.jsxs)("div",{className:"plan-welcome-screen",children:[(0,je.jsxs)("div",{className:"welcome-container",children:[(0,je.jsxs)("div",{className:"welcome-header",children:[(0,je.jsx)("img",{src:"/logo.png",alt:"Run+ Plans",className:"welcome-logo"}),(0,je.jsx)("h1",{children:"Your Training Plan is Ready"}),(0,je.jsx)("p",{children:"Here's what your AI coach has to say about your journey ahead"})]}),p&&(0,je.jsxs)("div",{style:{marginBottom:"24px",padding:"16px",background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"8px",textAlign:"center"},children:[(0,je.jsx)("p",{style:{margin:"0 0 12px 0",fontSize:"0.95rem",color:"#FFC107"},children:"\u26a0\ufe0f Your current fitness was estimated. For more accurate training paces, enter a recent race time."}),(0,je.jsx)("button",{onClick:()=>l(!0),style:{padding:"10px 20px",fontSize:"0.95rem",background:"rgba(255, 193, 7, 0.2)",border:"1px solid rgba(255, 193, 7, 0.5)",borderRadius:"6px",color:"#FFC107",cursor:"pointer",fontWeight:"500"},children:"Enter Recent Race Time"})]}),(0,je.jsx)(yp,{rawResponse:d.aiCoachingAnalysis}),(0,je.jsx)("div",{className:"welcome-actions",children:(0,je.jsx)("button",{className:"btn-continue",onClick:()=>i("/dashboard"),children:"Continue to My Training Plan \u2192"})})]}),s&&(0,je.jsx)(vp,{isOpen:s,onClose:()=>l(!1),userProfile:c,trainingPlan:d,onPlanUpdated:async(e,t)=>{var n;if(!e||!e.weeks||!Array.isArray(e.weeks)||0===e.weeks.length)return Oe.A.error("\u274c Invalid plan structure in handlePlanUpdated",{hasPlan:!!e,hasWeeks:!(null===e||void 0===e||!e.weeks),weeksType:typeof(null===e||void 0===e?void 0:e.weeks),weeksLength:null===e||void 0===e||null===(n=e.weeks)||void 0===n?void 0:n.length,planKeys:e?Object.keys(e):"no plan"}),void o.error("Plan update failed - invalid plan structure. Please try again.",8e3);h(e),u(t),r&&await r(t,e),l(!1)}})]})}const bp=function(e){let{userProfile:t,trainingPlan:n}=e;const r=re(),i=(0,c.A)((0,c.A)({},n),{},{weeks:[{week:1,phase:"base",totalMileage:15,isRestWeek:!1,workouts:[{day:"Monday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Tuesday",type:"tempo",workout:{name:"Sandwich Tempo",description:"Tempo effort sandwiched between easy running"},focus:"Lactate Threshold",equipmentSpecific:!1},{day:"Wednesday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Thursday",type:"easy",workout:{name:"Easy Run",description:"Conversational pace, aerobic base building"},focus:"Recovery"},{day:"Friday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Saturday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Sunday",type:"longRun",workout:{name:"Conversational Long Run",description:"Easy long run emphasizing conversational pace"},focus:"Endurance"}]},{week:2,phase:"base",totalMileage:18,isRestWeek:!1,workouts:[{day:"Monday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Tuesday",type:"hills",workout:{name:"Long Hill Progression",description:"Build power on sustained grades"},focus:"Power & Strength"},{day:"Wednesday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Thursday",type:"tempo",workout:{name:"Classic Tempo Run",description:"Continuous run at lactate threshold pace"},focus:"Lactate Threshold"},{day:"Friday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Saturday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Sunday",type:"longRun",workout:{name:"Thirds Progression",description:"Equal time segments with increasing intensity"},focus:"Endurance"}]},{week:5,phase:"build",totalMileage:25,isRestWeek:!1,workouts:[{day:"Monday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Tuesday",type:"intervals",workout:{name:"1000m VO2 Max Intervals",description:"Classic VO2 max development intervals"},focus:"VO2 Max & Speed"},{day:"Wednesday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Thursday",type:"tempo",workout:{name:"McMillan 2x2 Miles",description:"Two 2-mile repeats at threshold pace"},focus:"Lactate Threshold"},{day:"Friday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Saturday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Sunday",type:"longRun",workout:{name:"Marathon Pace Long Run",description:"Extended time at goal marathon pace"},focus:"Endurance"}]}],varietyShowcase:["Sandwich Tempo","Long Hill Progression","Classic Tempo Run","Conversational Long Run","Thirds Progression","1000m VO2 Max Intervals","McMillan 2x2 Miles","Marathon Pace Long Run","Hill Strides","Cruise Intervals","Super Fast Finish","Tempo Hills","Ladder Intervals","DUSA Progression","Cut-Down Intervals","Progressive Build Session"]});t.standUpBikeType&&(i.weeks[0].workouts[1]=(0,c.A)((0,c.A)({},i.weeks[0].workouts[1]),{},{type:"bike",workout:{name:"Progressive Build Session",description:"".concat(t.standUpBikeType,"-specific teardrop/elliptical motion workout")},equipmentSpecific:!0,distance:4}),i.weeks[1].workouts[1]=(0,c.A)((0,c.A)({},i.weeks[1].workouts[1]),{},{type:"bike",equipmentSpecific:!0,distance:5}),i.weeks[2].workouts[1]=(0,c.A)((0,c.A)({},i.weeks[2].workouts[1]),{},{type:"bike",equipmentSpecific:!0,distance:6}));const o=e=>({tempo:"#4299e1",intervals:"#e53e3e",hills:"#38a169",longRun:"#805ad5",easy:"#718096",rest:"#a0aec0",bike:"#FF9500"}[e]||"#718096");return(0,je.jsxs)("div",{style:{minHeight:"100vh",paddingBottom:"40px"},children:[(0,je.jsx)("div",{style:{color:"#AAAAAA",padding:"30px 0"},children:(0,je.jsxs)("div",{className:"container",children:[(0,je.jsx)("h1",{style:{margin:"0 0 16px 0"},children:"\ud83c\udf89 Your RunEQ Plan Preview"}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1.1rem",opacity:.9},children:"See how we've personalized training for your goals and equipment"})]})}),(0,je.jsxs)("div",{className:"container",style:{padding:"20px 16px"},children:[(0,je.jsxs)("div",{className:"card",style:{marginBottom:"20px"},children:[(0,je.jsx)("div",{className:"card-header",children:(0,je.jsx)("h2",{style:{margin:0},children:"Your Personalized Plan"})}),(0,je.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{color:"#AAAAAA",margin:"0 0 8px 0"},children:"Goal"}),(0,je.jsxs)("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600"},children:[n.planOverview.raceDistance," Training"]})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{color:"#AAAAAA",margin:"0 0 8px 0"},children:"Duration"}),(0,je.jsxs)("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600"},children:[n.planOverview.totalWeeks," weeks"]})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{color:"#AAAAAA",margin:"0 0 8px 0"},children:"Training Days"}),(0,je.jsxs)("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600"},children:[n.planOverview.workoutsPerWeek||n.planOverview.runsPerWeek," days/week"]})]}),t.standUpBikeType&&(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{color:"#AAAAAA",margin:"0 0 8px 0"},children:"Equipment"}),(0,je.jsxs)("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600"},children:[t.standUpBikeType," optimized",(0,je.jsx)("span",{className:"badge badge-success",style:{marginLeft:"8px"},children:"Unique!"})]})]})]})]}),(0,je.jsxs)("div",{className:"card",style:{marginBottom:"20px",background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"#00FF88"},children:"\ud83d\ude80 Why Your Plan is Superior"}),(0,je.jsxs)("div",{style:{display:"grid",gap:"12px"},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,je.jsxs)("span",{children:[(0,je.jsx)("strong",{children:"Climate adapted:"})," Paces adjusted for ",t.climate," conditions"]})]}),(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,je.jsxs)("span",{children:[(0,je.jsx)("strong",{children:"Workout variety:"})," ",i.varietyShowcase.length,"+ different workouts vs repetitive formats"]})]}),(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,je.jsxs)("span",{children:[(0,je.jsx)("strong",{children:"Life flexible:"})," ",t.missedWorkoutPreference," approach to missed workouts"]})]}),t.standUpBikeType&&(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,je.jsxs)("span",{children:[(0,je.jsx)("strong",{children:"Equipment specific:"})," ",t.standUpBikeType," motion-optimized workouts"]})]}),(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,je.jsxs)("span",{children:[(0,je.jsx)("strong",{children:"Philosophy aligned:"})," ",t.trainingPhilosophy.replace("_","/")," training approach"]})]})]})]}),(0,je.jsxs)("div",{className:"card",style:{marginBottom:"20px"},children:[(0,je.jsxs)("div",{className:"card-header",children:[(0,je.jsx)("h2",{style:{margin:0},children:"Sample Training Weeks"}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",color:"#666"},children:"See how varied and intelligent your workouts are"})]}),i.weeks.map((e,n)=>{const{totalCalories:r,bikeWorkoutCount:a}={totalCalories:{min:0,max:0},bikeWorkoutCount:0};return(0,je.jsxs)("div",{style:{marginBottom:n<i.weeks.length-1?"32px":0},children:[(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",flexWrap:"wrap",gap:"12px"},children:[(0,je.jsxs)("h3",{style:{margin:0,color:"#AAAAAA"},children:["Week ",e.week," - ",e.phase.toUpperCase()," Phase"]}),(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[(0,je.jsxs)("span",{className:"badge badge-info",children:[e.totalMileage," miles"]}),e.isRestWeek&&(0,je.jsx)("span",{className:"badge badge-warning",children:"Recovery Week"})]})]}),(0,je.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"12px"},children:e.workouts.filter(e=>"rest"!==e.type).map(e=>(0,je.jsxs)("div",{className:"card",style:{background:e.equipmentSpecific?"rgba(0, 212, 255, 0.1)":"rgba(255, 255, 255, 0.05)",border:"2px solid ".concat(o(e.type),"20"),borderLeft:"4px solid ".concat(o(e.type)),padding:"16px"},children:[(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[(0,je.jsx)("h4",{style:{margin:0,color:"#AAAAAA"},children:e.day}),(0,je.jsxs)("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:[(0,je.jsx)("span",{className:"badge",style:{background:"".concat(o(e.type),"20"),color:o(e.type),fontSize:"0.7rem"},children:e.focus}),e.equipmentSpecific&&(0,je.jsx)("span",{className:"badge badge-warning",style:{fontSize:"0.7rem"},children:t.standUpBikeType})]})]}),(0,je.jsx)("h4",{style:{margin:"0 0 4px 0",fontSize:"1rem"},children:e.workout.name}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.85rem",color:"#666",lineHeight:1.4},children:e.workout.description})]},e.day))})]},e.week)})]}),(0,je.jsxs)("div",{className:"card",style:{marginBottom:"20px"},children:[(0,je.jsxs)("div",{className:"card-header",children:[(0,je.jsx)("h2",{style:{margin:0},children:"\ud83c\udfa8 Workout Variety Showcase"}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",color:"#666"},children:"No more boring, repetitive training!"})]}),(0,je.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,je.jsx)("h3",{style:{color:"#AAAAAA",marginBottom:"12px"},children:"Your Plan Includes:"}),(0,je.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:i.varietyShowcase.map((e,t)=>(0,je.jsx)("span",{className:"badge",style:{background:"#ebf8ff",color:"#00D4FF",padding:"6px 12px",fontSize:"0.8rem"},children:e},t))})]}),(0,je.jsx)("div",{className:"card",style:{background:"rgba(255, 184, 0, 0.1)",border:"1px solid rgba(255, 184, 0, 0.3)"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83d\udd25 Compare to Other Apps:"})," Most training apps repeat the same 5-10 workouts endlessly. Your RunEQ plan includes research-based workouts from McMillan Running, Hal Higdon, Ben Parkes, and Runner's World."]})})]}),(0,je.jsxs)("div",{className:"card",style:{marginBottom:"20px",background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"#c05621"},children:'\ud83d\udd04 "Something Else" Button'}),(0,je.jsxs)("p",{style:{marginBottom:"16px",color:"#744210"},children:[(0,je.jsx)("strong",{children:"Tired of rigid apps?"}),' Every workout has our signature "Something Else" button:']}),(0,je.jsxs)("div",{className:"card",style:{background:"rgba(255, 255, 255, 0.05)",padding:"16px",margin:"0 0 16px 0"},children:[(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[(0,je.jsx)("span",{style:{fontWeight:"600"},children:"Today: Tempo Run - 6 miles"}),(0,je.jsx)("button",{className:"btn btn-secondary",style:{fontSize:"0.8rem",padding:"8px 16px"},children:"Something Else"})]}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.8rem",color:"#666"},children:"Click to see alternatives based on weather, energy level, time, or just wanting variety!"})]}),(0,je.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#744210"},children:"Feeling Tired:"}),(0,je.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"0.8rem"},children:"Easy recovery options"})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#744210"},children:"Too Hot:"}),(0,je.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"0.8rem"},children:"Indoor or easier alternatives"})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#744210"},children:"Want Variety:"}),(0,je.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"0.8rem"},children:"Different workout types"})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#744210"},children:"Time Crunch:"}),(0,je.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"0.8rem"},children:"Shorter, efficient options"})]})]}),(0,je.jsx)("p",{style:{margin:"12px 0 0 0",fontSize:"0.8rem",fontStyle:"italic",color:"#744210"},children:"And unlike other apps, we COUNT IT PROPERLY in your weekly training load!"})]}),(0,je.jsxs)("div",{className:"card",style:{textAlign:"center",background:"rgba(0, 212, 255, 0.1)",color:"#AAAAAA",border:"1px solid rgba(0, 212, 255, 0.3)"},children:[(0,je.jsx)("h2",{style:{margin:"0 0 16px 0"},children:"Ready to Start Training Smarter?"}),(0,je.jsx)("p",{style:{margin:"0 0 24px 0",opacity:.9},children:"You've seen how RunEQ adapts to YOUR equipment, climate, and lifestyle. No more rigid, one-size-fits-all training!"}),(0,je.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px",maxWidth:"400px",margin:"0 auto"},children:(0,je.jsx)("button",{className:"btn btn-success btn-full-width",onClick:()=>r("/dashboard"),style:{background:"rgba(255, 255, 255, 0.05)",color:"#AAAAAA",fontSize:"1.1rem"},children:"\ud83c\udfaf Start My Training Plan"})})]})]})]})};var kp=n(887);class Dp{constructor(){this.equipmentSpecs={required:["Deep water pool","Flotation belt"],optional:["Waterproof timer/watch","Visor (outdoor pools)"],description:"Deep end pool running with flotation belt - zero impact, running-specific motion",benefits:["Maintains cardiovascular fitness during injury","Strengthens backup muscles","Smooths running gait through resistance","Zero impact on joints","Can replicate any running workout"]},this.beginnerProgression={session1:{name:"Introduction to Aqua Running",description:"First aqua running session - learn technique and build adaptation",structure:"2 sets x (3-5 min easy aqua running + 10 min rest/practice technique)",totalTime:"20-25 minutes",notes:"Focus on upright posture, smooth leg motion identical to land running. Take breaks as needed."},session2:{name:"Building Duration",description:"Second session (3-4 days after first)",structure:"2 sets x (7-9 min easy aqua running + 5 min rest)",totalTime:"25-30 minutes",notes:"Increase continuous time, maintain good form throughout"},session3:{name:"Extended Efforts",description:"Third session - approaching normal workout duration",structure:"2 sets x (12-15 min easy aqua running + 3 min rest)",totalTime:"30-35 minutes",notes:"Nearly ready for full continuous sessions"},session4:{name:"Full Duration",description:"Ready for continuous sessions matching land running time",structure:"Single continuous session matching prescribed workout duration",notes:"You're now adapted! Can match any land running workout duration in the pool"}},this.workoutLibrary={EASY:[{name:"Easy Recovery Run",duration:"30-45 minutes",description:"Gentle aerobic effort for recovery and base building",structure:"30-45 min continuous easy aqua running",intensity:"easy",benefits:"Active recovery, maintains aerobic base, zero impact healing",technique:"Smooth, relaxed leg motion. Upright posture. Arms move naturally like land running.",effort:{heartRate:"Zone 1-2 (60-75% max HR)",perceived:"Conversational pace, could maintain for hours",legTurnover:"Moderate, natural rhythm"},coachingTips:"Focus on smooth, efficient motion. The water resistance will automatically improve your running form."},{name:"Moderate Easy Run",duration:"45-60 minutes",description:"Sustained easy aerobic work",structure:"45-60 min continuous easy aqua running",intensity:"easy",benefits:"Aerobic development, endurance maintenance, mental refreshment",technique:"Maintain upright position, feet directly underneath hips. Consistent smooth rhythm.",effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Comfortable, steady effort",legTurnover:"Natural running cadence in water"},coachingTips:"Time passes quickly in the pool. Focus on maintaining good form rather than pushing effort."},{name:"Extended Easy Run",duration:"60-75 minutes",description:"Long easy aerobic session",structure:"60-75 min continuous easy aqua running",intensity:"easy",benefits:"Extended aerobic stimulus, mental toughness, significant calorie burn",technique:"Stay relaxed. Break into mental chunks (15min segments) if needed.",effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Steady, sustainable effort",legTurnover:"Consistent throughout"},coachingTips:"Longer than an hour in the pool builds serious mental fortitude. Stay patient and focused."}],TEMPO:[{name:"Sustained Tempo Effort",duration:"50-65 minutes",description:"Continuous tempo effort at lactate threshold",structure:"10 min easy warmup + 30-40 min @ tempo effort + 10 min easy cooldown",intensity:"tempo",benefits:"Lactate threshold development, sustained effort tolerance, race-specific fitness",technique:"Increase leg turnover noticeably. You should feel your heart rate climb. Maintain smooth form even when breathing harder.",effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard - you'll 'huff and puff' but can speak short sentences",legTurnover:"Noticeably faster than easy pace, crisp leg motion"},coachingTips:"The tempo portion should feel challenging but sustainable. If you can't maintain effort, you started too hard."},{name:"Tempo Intervals",duration:"55-70 minutes",description:"Repeated tempo efforts with active recovery",structure:"10 min easy warmup + 3-4 x 8 min @ tempo with 3 min easy recovery + 10 min cooldown",intensity:"tempo",benefits:"Threshold power development, recovery management, pacing practice",technique:"During intervals: crisp leg turnover, strong core engagement. During recovery: truly easy, let HR drop.",effort:{heartRate:"Zone 3-4 during efforts (80-90% max HR), Zone 1-2 during recovery",perceived:"Hard but repeatable, recovery feels genuinely easy",legTurnover:"Fast during efforts, relaxed during recovery"},coachingTips:"The recovery jogs are crucial. Don't skip them - they teach your body to process lactate."},{name:"Progressive Tempo Build",duration:"50-65 minutes",description:"Gradually increasing effort to simulate race finish",structure:"10 min easy + 10 min moderate + 15 min tempo + 5 min hard + 10 min easy cooldown",intensity:"tempo",benefits:"Graduated effort adaptation, race simulation, finishing strength",technique:"Smoothly increase leg speed and core tension. Final 5min should feel legitimately hard.",effort:{heartRate:"Building from Zone 2 \u2192 Zone 3 \u2192 Zone 4 \u2192 Zone 5",perceived:"Starting comfortable, finishing hard like final mile of race",legTurnover:"Progressive increase in cadence"},coachingTips:"This simulates racing when fatigued. The mental toughness gained here transfers directly to race day."},{name:"Cruise Intervals",duration:"55-70 minutes",description:"Classic lactate threshold intervals",structure:"10 min warmup + 5-6 x 5 min @ tempo with 2 min easy recovery + 10 min cooldown",intensity:"tempo",benefits:"Threshold efficiency, mental resilience, pacing consistency",technique:"Each interval should feel identical in effort. Monitor turnover consistency.",effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard, short recovery keeps you honest",legTurnover:"Fast, controlled, repeatable"},coachingTips:"Short recovery means you never fully recover. This is threshold work at its finest."}],INTERVALS:[{name:"Classic 400m Repeats",duration:"50-65 minutes",description:"Short, fast intervals simulating track 400m repeats",structure:"15 min easy warmup + 8-12 x 90 sec hard with 90 sec easy recovery + 10 min cooldown",intensity:"intervals",benefits:"VO2max development, speed endurance, running economy",technique:"Maximum leg turnover while maintaining control. Arms pump hard. You'll be breathing very hard.",effort:{heartRate:"Zone 4-5 (90-95%+ max HR)",perceived:"Hard - can't speak during efforts, breathing heavily",legTurnover:"Very fast, approaching maximum controlled speed"},coachingTips:"These are hard! The 90sec recovery is short by design - teaches recovery under duress. Equal work:rest ratio.",landEquivalent:"Simulates 8-12 x 400m on track"},{name:"800m Repeats",duration:"55-70 minutes",description:"Medium intervals simulating track 800m repeats",structure:"15 min easy warmup + 6-8 x 3 min hard with 2 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"VO2max, lactate tolerance, mental toughness",technique:"Fast sustained leg speed. Control your breathing rhythm. Stay upright even when fatigued.",effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard, last 30 seconds of each interval hurts",legTurnover:"Fast and sustained throughout 3 minutes"},coachingTips:"The 3min duration is long enough to really build lactate. Fight through the discomfort.",landEquivalent:"Simulates 6-8 x 800m on track"},{name:"Pyramid Intervals",duration:"60-75 minutes",description:"Varied interval lengths building mental adaptability",structure:"15 min warmup + [1min, 2min, 3min, 4min, 3min, 2min, 1min] hard with equal recovery + 10 min cooldown",intensity:"intervals",benefits:"Mental engagement, varied pace practice, comprehensive speed work",technique:"Adjust effort slightly for each interval length. Shorter = faster turnover, longer = controlled hard effort.",effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Hard throughout, but manageable with varying durations",legTurnover:"Varies with interval length"},coachingTips:"The pyramid keeps your mind engaged. Equal recovery keeps it challenging.",landEquivalent:"Simulates track pyramid workout (200m-400m-600m-800m-600m-400m-200m)"},{name:"Short Speed Bursts",duration:"45-60 minutes",description:"Very short, very fast intervals for speed development",structure:"15 min easy warmup + 12-16 x 45 sec @ max effort with 90 sec easy recovery + 10 min cooldown",intensity:"intervals",benefits:"Top-end speed, neuromuscular power, running economy",technique:"Explosive leg turnover. Maximum controllable speed. Form breaks down = stop interval.",effort:{heartRate:"Zone 5 (95%+ max HR)",perceived:"Very hard, nearly all-out, can't maintain conversation",legTurnover:"Maximum controlled turnover"},coachingTips:"These are about leg speed and power, not endurance. Quality over quantity - stop if form deteriorates.",landEquivalent:"Simulates 12-16 x 200m on track"},{name:"1000m Repeats",duration:"60-75 minutes",description:"Longer intervals building VO2max endurance",structure:"15 min warmup + 5-6 x 4 min hard with 3 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"VO2max endurance, mental toughness, race-pace specificity",technique:"Controlled hard effort. The 4min duration requires pacing discipline - don't go out too fast.",effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Hard and sustained, requires mental focus",legTurnover:"Fast but controlled, sustainable for 4 minutes"},coachingTips:"Longer intervals teach you to manage discomfort. The final minute of each is pure mental training.",landEquivalent:"Simulates 5-6 x 1000m on track"}],LONG:[{name:"Steady Long Run",duration:"75-90 minutes",description:"Extended aerobic endurance session",structure:"75-90 min continuous easy-moderate effort",intensity:"long",benefits:"Aerobic capacity, mental endurance, fat burning adaptation",technique:"Stay relaxed. Break into mental segments (every 15-20 minutes). Focus on smooth, efficient form.",effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Conversational but sustained, should feel moderately challenging by the end",legTurnover:"Steady, natural rhythm throughout"},coachingTips:"Long runs in the pool build incredible mental toughness. The monotony is part of the training.",landEquivalent:"Simulates 10-12 mile long run"},{name:"Extended Long Run",duration:"90-120 minutes",description:"Marathon-specific endurance work",structure:"90-120 min continuous easy-moderate effort",intensity:"long",benefits:"Maximum aerobic development, glycogen depletion training, mental fortitude",technique:"Mental breaks every 20 minutes. Stay patient. Maintain form even when fatigued.",effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Comfortable early, becomes work in final 30 minutes",legTurnover:"Consistent, don't slow down when tired"},coachingTips:"Two hours in the pool is serious training. Bring water. Mental game is everything here.",landEquivalent:"Simulates 13-16 mile long run"},{name:"Progressive Long Run",duration:"75-105 minutes",description:"Long run with building effort in final portion",structure:"60 min easy + 15-30 min @ moderate-tempo effort + 10 min easy cooldown",intensity:"long",benefits:"Endurance + race-specific fatigue resistance, teaches finishing strong",technique:"Start relaxed. Gradually increase leg speed in final portion. Simulate racing tired.",effort:{heartRate:"Zone 2 early, building to Zone 3-4 in final portion",perceived:"Easy early, hard finish simulates race fatigue",legTurnover:"Natural early, picking up noticeably in final portion"},coachingTips:"This teaches you to run hard when tired - critical for race day. The mental aspect is huge.",landEquivalent:"Simulates long run with marathon pace finish"},{name:"Long Run with Surges",duration:"75-90 minutes",description:"Long run with periodic hard efforts",structure:"75-90 min with 6-8 x 2 min @ tempo effort scattered throughout (every 10-12 min), remainder easy",intensity:"long",benefits:"Endurance + speed endurance, race simulation, mental engagement",technique:"Easy running between surges. Surges are controlled hard - not all-out sprints.",effort:{heartRate:"Zone 2 baseline, Zone 3-4 during surges",perceived:"Mostly comfortable with periodic challenging efforts",legTurnover:"Natural rhythm, faster during surges"},coachingTips:"Surges break up the monotony and teach you to change pace mid-workout. Very race-specific.",landEquivalent:"Simulates long run with fartlek surges"}],HILLS:[{name:"Pool Hill Repeats",duration:"50-65 minutes",description:"Simulated hill running using increased resistance and exaggerated leg drive",structure:"15 min easy warmup + 8-10 x 90 sec @ hill effort (high knee drive, powerful push) with 2 min easy recovery + 10 min cooldown",intensity:"hills",benefits:"Leg strength, power development, running economy, glute/hamstring activation",technique:"Exaggerate knee lift. Drive feet down powerfully. Engage glutes strongly. Lean slightly forward from ankles.",effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Hard, muscular effort with elevated breathing",legTurnover:"Powerful, deliberate, high knee drive"},coachingTips:"Focus on power and strength. The water resistance simulates uphill running perfectly. Feel the glutes working.",landEquivalent:"Simulates 8-10 x 90-second hill repeats"},{name:"Long Hill Intervals",duration:"55-70 minutes",description:"Extended hill efforts building strength endurance",structure:"15 min warmup + 5-6 x 3 min @ hill effort with 3 min easy recovery + 10 min cooldown",intensity:"hills",benefits:"Sustained power, muscular endurance, mental toughness",technique:"Maintain powerful knee drive for full 3 minutes. Don't let form deteriorate.",effort:{heartRate:"Zone 4 (85-90% max HR)",perceived:"Hard and sustained, muscular fatigue is primary limiter",legTurnover:"Controlled powerful motion, resist urge to speed up"},coachingTips:"These are long enough to build serious strength endurance. Last minute of each is pure grit.",landEquivalent:"Simulates 5-6 x 3-minute hill repeats"},{name:"Short Explosive Hills",duration:"45-60 minutes",description:"Short, powerful hill bursts for explosive strength",structure:"15 min warmup + 12-15 x 45 sec @ maximum hill effort with 90 sec easy recovery + 10 min cooldown",intensity:"hills",benefits:"Explosive power, fast-twitch recruitment, neuromuscular development",technique:"Explosive knee drive, maximum power output. Quality over quantity - stop if power drops.",effort:{heartRate:"Zone 5 (95%+ max HR)",perceived:"Very hard, nearly maximum effort",legTurnover:"Explosive, powerful, exaggerated knee lift"},coachingTips:"These are about maximum power production. If you can't maintain explosiveness, end the workout.",landEquivalent:"Simulates 12-15 x 45-second steep hill sprints"}],RECOVERY:[{name:"Short Recovery Session",duration:"20-30 minutes",description:"Gentle active recovery to promote blood flow and healing",structure:"20-30 min very easy aqua running",intensity:"recovery",benefits:"Active recovery, blood flow to damaged tissues, mental refreshment without impact stress",technique:"Minimal effort. Focus on smooth, relaxed motion. This should feel easy.",effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Very easy, restorative, could maintain indefinitely",legTurnover:"Slow, relaxed, natural"},coachingTips:"The goal is recovery, not fitness. If this feels hard, you're going too fast or need complete rest instead."},{name:"Extended Recovery Float",duration:"30-40 minutes",description:"Longer gentle session for deep recovery",structure:"30-40 min very easy aqua running with ultra-relaxed form",intensity:"recovery",benefits:"Extended active recovery, mental reset, maintains movement patterns without stress",technique:"Barely moving. Think 'floating run.' Let the water do the work.",effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Extremely easy, almost meditative",legTurnover:"Minimal, smooth, effortless"},coachingTips:"This is recovery disguised as training. The zero impact makes it perfect for day-after-hard-workout sessions."}]}}getWorkoutByDuration(e,t){const n=e.toUpperCase(),r=this.workoutLibrary[n];if(!r||0===r.length)return null;let i=r[0],o=Math.abs(this.parseDuration(r[0].duration)-t);return r.forEach(e=>{const n=this.parseDuration(e.duration),r=Math.abs(n-t);r<o&&(o=r,i=e)}),i}parseDuration(e){const t=e.match(/(\d+)(?:-(\d+))?/);if(!t)return 60;const n=parseInt(t[1]);return(n+(t[2]?parseInt(t[2]):n))/2}getWorkoutsByType(e){const t=e.toUpperCase();return this.workoutLibrary[t]||[]}getBeginnerProgression(){return this.beginnerProgression}}const xp=Dp;class Ep{constructor(){this.equipmentSpecs={name:"Elliptical Machine",description:"Low-impact cardio with running-like motion, adjustable resistance and incline",accessibility:"Highly accessible - found in virtually every gym, common home equipment",benefits:["Low impact alternative to running","Similar movement pattern to running","Adjustable resistance and incline for varied intensity","Can match running heart rate zones","Works similar muscle groups with less joint stress"],keyMetrics:{cadence:"Target 90 RPM (revolutions per minute) - matches 180 spm running cadence",heartRate:"87-92% max for tempo, 95-100% max for intervals",resistance:"Increase for harder efforts, combined with incline changes",incline:"Higher incline = more glute/hamstring activation, simulates hills"}},this.workoutLibrary={EASY:[{name:"Easy Recovery Session",duration:"30-45 minutes",description:"Low-intensity active recovery to promote blood flow and healing",structure:"30-45 min continuous easy effort at low resistance and moderate incline",intensity:"easy",benefits:"Active recovery, maintains aerobic base without impact stress, promotes healing",settings:{resistance:"Low (3-5 out of 20)",incline:"Moderate (5-8)",cadence:"85-90 RPM",heartRate:"Zone 1-2 (60-75% max HR)"},technique:"Smooth, relaxed motion. Full foot contact on pedals. Upright posture. Let the machine do the work.",coachingTips:"This should feel easy. If you're breathing hard, reduce resistance. The goal is recovery, not fitness."},{name:"Moderate Easy Workout",duration:"45-60 minutes",description:"Sustained easy aerobic work for base building",structure:"45-60 min continuous steady effort",intensity:"easy",benefits:"Aerobic base development, maintains endurance without running impact",settings:{resistance:"Moderate (5-8 out of 20)",incline:"Moderate (6-10)",cadence:"90 RPM",heartRate:"Zone 2 (65-75% max HR)"},technique:"Consistent rhythm throughout. Focus on smooth circular motion. Engage core.",coachingTips:"Should feel comfortable and sustainable. You're building aerobic foundation."},{name:"Extended Easy Session",duration:"60-75 minutes",description:"Long easy aerobic session",structure:"60-75 min continuous steady effort with occasional resistance/incline variations",intensity:"easy",benefits:"Extended aerobic stimulus, mental endurance, significant calorie burn",settings:{resistance:"Moderate (6-9 out of 20)",incline:"Varies (6-12)",cadence:"90 RPM",heartRate:"Zone 2 (65-75% max HR)"},technique:"Vary incline every 10-15 minutes to work different muscle groups. Maintain consistent effort.",coachingTips:"Long sessions on the elliptical require mental toughness. Break it into chunks. Stay patient."}],TEMPO:[{name:"Sustained Tempo Effort",duration:"50-65 minutes",description:"Continuous tempo effort at lactate threshold",structure:"10 min easy warmup + 30-40 min @ tempo effort (high resistance, moderate incline) + 10 min easy cooldown",intensity:"tempo",benefits:"Lactate threshold development, sustained hard effort tolerance, race-specific fitness",settings:{warmup:{resistance:4,incline:6,cadence:85},tempo:{resistance:"12-14",incline:"8-10",cadence:"90-92 RPM"},cooldown:{resistance:3,incline:5,cadence:85}},effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard - can speak in short sentences, breathing elevated",cadence:"90-92 RPM during tempo portion"},technique:"Increase resistance to elevate heart rate. Maintain 90+ RPM. Strong leg drive. Upright posture.",coachingTips:"The tempo should feel challenging but sustainable for the full duration. Don't start too hard."},{name:"Tempo Intervals",duration:"55-70 minutes",description:"Repeated tempo blocks with active recovery",structure:"10 min warmup + 3-4 x 8 min @ tempo (high resistance) with 3 min easy recovery + 10 min cooldown",intensity:"tempo",benefits:"Threshold power, recovery management under fatigue, pacing discipline",settings:{intervals:{resistance:"13-15",incline:"8-10",cadence:"90-92 RPM"},recovery:{resistance:4,incline:5,cadence:85}},effort:{heartRate:"Zone 3-4 during efforts (80-90% max HR)",perceived:"Hard but repeatable, recovery feels easy",cadence:"90-92 RPM during efforts"},technique:"Sharp contrast between effort and recovery. Recovery is truly easy - let HR drop.",coachingTips:"Each interval should feel the same. If you're dying on the last one, you went too hard early."},{name:"Progressive Tempo Build",duration:"50-65 minutes",description:"Gradually increasing resistance to simulate race finish",structure:"10 min easy + 10 min moderate + 15 min tempo + 5 min hard + 10 min easy cooldown",intensity:"tempo",benefits:"Graduated effort adaptation, finishing strength, race simulation",settings:{easy:{resistance:4,incline:6},moderate:{resistance:9,incline:8},tempo:{resistance:13,incline:9},hard:{resistance:16,incline:10},cooldown:{resistance:3,incline:5}},effort:{heartRate:"Building from Zone 2 \u2192 Zone 5",perceived:"Starting comfortable, finishing very hard",cadence:"85 RPM building to 92+ RPM"},technique:"Progressive resistance increases. Final 5min should feel like racing the final mile.",coachingTips:"This teaches you to push when tired. The mental aspect is crucial for race day."},{name:"Cruise Intervals",duration:"55-70 minutes",description:"Classic lactate threshold intervals with short recovery",structure:"10 min warmup + 5-6 x 5 min @ tempo with 2 min easy recovery + 10 min cooldown",intensity:"tempo",benefits:"Threshold efficiency, mental resilience, consistent pacing",settings:{intervals:{resistance:"13-14",incline:"8-9",cadence:"90 RPM"},recovery:{resistance:4,incline:5,cadence:85}},effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard, short recovery keeps it honest",cadence:"Consistent 90 RPM"},technique:"Consistent effort and cadence across all intervals. Monitor RPM closely.",coachingTips:"Short recovery = never fully recovered. Classic threshold training."}],INTERVALS:[{name:"1-Minute On/Off Intervals",duration:"45-60 minutes",description:"Short, intense intervals with equal recovery",structure:"10-15 min easy warmup + 15 x 1 min fast (high resistance + incline) / 1 min easy float + 10-15 min cooldown",intensity:"intervals",benefits:"VO2max development, speed endurance, mental toughness",settings:{intervals:{resistance:"15-17",incline:"10-12",cadence:"95-100 RPM"},recovery:{resistance:3,incline:4,cadence:80}},effort:{heartRate:"Zone 4-5 (90-95%+ max HR)",perceived:"Hard - breathing heavily, can't speak during efforts",cadence:"95-100 RPM during efforts"},technique:"Maximum sustainable resistance and cadence. Drive hard through legs. Recover completely during floats.",coachingTips:"Equal work:rest teaches your body to recover under duress. These are hard!",landEquivalent:"Simulates 15 x 400m track repeats"},{name:"Pyramid Intervals",duration:"55-70 minutes",description:"Varied interval lengths for mental engagement",structure:"15 min warmup + [1min, 2min, 3min, 4min, 3min, 2min, 1min] hard with equal recovery + 10 min cooldown",intensity:"intervals",benefits:"Mental adaptability, varied pace practice, comprehensive speed work",settings:{intervals:{resistance:"14-16",incline:"9-11",cadence:"92-98 RPM"},recovery:{resistance:4,incline:5,cadence:85}},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Hard throughout, varying with interval length",cadence:"Adjust slightly for each length"},technique:"Shorter intervals = higher cadence, longer = controlled hard effort with moderate cadence.",coachingTips:"Pyramid keeps your mind engaged. Adjust resistance for each interval duration.",landEquivalent:"Simulates 200m-400m-600m-800m-600m-400m-200m pyramid"},{name:"3-Minute Hard Repeats",duration:"55-70 minutes",description:"Medium-length intervals building VO2max",structure:"15 min warmup + 6-8 x 3 min hard with 2 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"VO2max, lactate tolerance, sustained hard effort",settings:{intervals:{resistance:"15-16",incline:10,cadence:"92-95 RPM"},recovery:{resistance:4,incline:5,cadence:85}},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard, last 30 seconds hurts",cadence:"92-95 RPM"},technique:"Control your effort - 3 minutes is long enough to blow up if you start too hard.",coachingTips:"The 3-min duration builds serious lactate. Fight through the discomfort.",landEquivalent:"Simulates 6-8 x 800m track repeats"},{name:"Tabata-Style Sprint Intervals",duration:"40-55 minutes",description:"Very short, very intense efforts",structure:"15 min warmup + 8 rounds x (20 sec all-out / 10 sec rest) + 3 min recovery, repeat 2-3 sets + 10 min cooldown",intensity:"intervals",benefits:"Anaerobic capacity, explosive power, mental toughness",settings:{sprints:{resistance:"12-14",incline:8,cadence:"110-120 RPM"},rest:{resistance:4,incline:4,cadence:70}},effort:{heartRate:"Zone 5 (95%+ max HR)",perceived:"Maximum effort, gasping for air",cadence:"110-120 RPM - as fast as controllable"},technique:"Explosive leg speed. Maximum RPM while maintaining control. 10 seconds goes fast!",coachingTips:"These are brutal. Quality over quantity - if form breaks, stop the set.",landEquivalent:"Simulates all-out sprint intervals"},{name:"4-Minute VO2max Intervals",duration:"60-75 minutes",description:"Longer intervals at VO2max intensity",structure:"15 min warmup + 5-6 x 4 min hard with 3 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"VO2max endurance, mental toughness, race-pace specificity",settings:{intervals:{resistance:"14-15",incline:9,cadence:"92-95 RPM"},recovery:{resistance:4,incline:5,cadence:85}},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Hard and sustained, requires focus",cadence:"92-95 RPM consistently"},technique:"Pacing is critical - don't blow up early. Final minute is pure mental training.",coachingTips:"4 minutes is long enough to teach you to manage suffering. This is race prep.",landEquivalent:"Simulates 5-6 x 1000m track repeats"}],LONG:[{name:"Steady Long Session",duration:"75-90 minutes",description:"Extended moderate effort for aerobic development",structure:"75-90 min continuous moderate effort, vary incline every 10-15 min for muscle variety",intensity:"long",benefits:"Aerobic capacity, fat burning adaptation, mental endurance",settings:{resistance:"Moderate (7-9)",incline:"Varies (6-12)",cadence:"88-92 RPM"},effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Conversational but sustained",cadence:"Steady 88-92 RPM"},technique:"Vary incline to work different muscle angles. Stay patient and consistent.",coachingTips:"Long elliptical sessions build serious mental fortitude. Stay engaged by varying incline.",landEquivalent:"Simulates 10-12 mile long run"},{name:"Extended Long Session",duration:"90-120 minutes",description:"Marathon-specific endurance work",structure:"90-120 min continuous effort, systematic incline changes every 15 min",intensity:"long",benefits:"Maximum aerobic development, glycogen depletion training, mental toughness",settings:{resistance:"Moderate (7-10)",incline:"Cycles through 6-8-10-12 every 15 min",cadence:"88-92 RPM"},effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Comfortable early, becomes work in final 30 min",cadence:"Consistent throughout"},technique:"Systematic incline changes prevent boredom and work multiple muscle angles.",coachingTips:"Two hours on the elliptical is serious training. Bring water and entertainment.",landEquivalent:"Simulates 13-16 mile long run"},{name:"Progressive Long Session",duration:"75-105 minutes",description:"Long session with building effort in final portion",structure:"60 min easy-moderate + 15-30 min @ increased resistance/tempo effort + 10 min easy",intensity:"long",benefits:"Endurance + race-specific fatigue resistance",settings:{base:{resistance:7,incline:8,cadence:90},finish:{resistance:"12-13",incline:9,cadence:92},cooldown:{resistance:4,incline:5,cadence:85}},effort:{heartRate:"Zone 2 early, building to Zone 3-4",perceived:"Easy early, hard finish",cadence:"Building from 90 to 92+ RPM"},technique:"Simulate running hard when tired. This is race-day practice.",coachingTips:"The hard finish teaches you to push when fatigued - critical for racing.",landEquivalent:"Simulates long run with marathon pace finish"}],HILLS:[{name:"Hill Repeats",duration:"50-65 minutes",description:"Simulated hill running using maximum incline",structure:"15 min easy warmup + 8-10 x 90 sec @ max incline (high resistance) with 2 min easy recovery + 10 min cooldown",intensity:"hills",benefits:"Leg strength, power development, glute/hamstring activation",settings:{hills:{resistance:"13-15",incline:"15-20 (max)",cadence:"85-90 RPM"},recovery:{resistance:3,incline:2,cadence:80}},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Hard, muscular effort",cadence:"85-90 RPM - power over speed"},technique:"Maximum incline. Focus on driving through glutes and hamstrings. Strong core engagement.",coachingTips:"High incline + resistance = serious strength work. Feel the glutes burn.",landEquivalent:"Simulates 8-10 x 90-second hill repeats"},{name:"Long Hill Intervals",duration:"55-70 minutes",description:"Extended hill efforts for strength endurance",structure:"15 min warmup + 5-6 x 3 min @ high incline with 3 min easy recovery + 10 min cooldown",intensity:"hills",benefits:"Sustained power, muscular endurance, mental toughness",settings:{hills:{resistance:"12-14",incline:"12-15",cadence:"85-88 RPM"},recovery:{resistance:3,incline:2,cadence:80}},effort:{heartRate:"Zone 4 (85-90% max HR)",perceived:"Hard and sustained, muscular fatigue",cadence:"85-88 RPM"},technique:"Maintain form for full 3 minutes despite fatigue. Don't let cadence drop.",coachingTips:"3 minutes at high incline builds serious strength endurance. Last minute is grit.",landEquivalent:"Simulates 5-6 x 3-minute hill repeats"},{name:"Rolling Hills Session",duration:"60-75 minutes",description:"Varied incline simulating hilly terrain",structure:"Continuous 60-75 min with incline varying every 2-3 minutes between 4-16",intensity:"hills",benefits:"Variable terrain adaptation, mental engagement, comprehensive leg strength",settings:{resistance:"Moderate (8-10)",incline:"Cycles: 4-8-12-16-12-8-4 every 2-3 min",cadence:"90 RPM on flats, 85 RPM on steep sections"},effort:{heartRate:"Zone 2-4 (varies with incline)",perceived:"Moderate to hard depending on current incline",cadence:"Adjust with terrain"},technique:"Adjust cadence and effort with incline changes. Simulate real trail running.",coachingTips:"This simulates hilly race courses. Mental engagement is high with constant changes.",landEquivalent:"Simulates hilly long run or trail run"}],RECOVERY:[{name:"Short Recovery Session",duration:"20-30 minutes",description:"Gentle movement for active recovery",structure:"20-30 min very easy, minimal resistance and incline",intensity:"recovery",benefits:"Blood flow without stress, active recovery, movement pattern maintenance",settings:{resistance:"Very low (2-3)",incline:"Low (3-5)",cadence:"80-85 RPM"},effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Very easy, restorative",cadence:"Slow and relaxed"},technique:"Minimal effort. Focus on smooth motion. This should feel easy.",coachingTips:"If this feels hard, you need complete rest instead. Goal is recovery, not fitness."},{name:"Extended Recovery Session",duration:"30-45 minutes",description:"Longer gentle session for deep recovery",structure:"30-45 min very easy with minimal resistance",intensity:"recovery",benefits:"Extended active recovery without impact stress",settings:{resistance:"Very low (2-4)",incline:"Low (4-6)",cadence:"82-87 RPM"},effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Extremely easy, almost meditative",cadence:"Relaxed and natural"},technique:"Let the machine do the work. Focus on smooth, effortless motion.",coachingTips:"Perfect for day-after-hard-workout. Zero impact makes it ideal for recovery."}]}}getWorkoutByDuration(e,t){const n=e.toUpperCase(),r=this.workoutLibrary[n];if(!r||0===r.length)return null;let i=r[0],o=Math.abs(this.parseDuration(r[0].duration)-t);return r.forEach(e=>{const n=this.parseDuration(e.duration),r=Math.abs(n-t);r<o&&(o=r,i=e)}),i}parseDuration(e){const t=e.match(/(\d+)(?:-(\d+))?/);if(!t)return 60;const n=parseInt(t[1]);return(n+(t[2]?parseInt(t[2]):n))/2}getWorkoutsByType(e){const t=e.toUpperCase();return this.workoutLibrary[t]||[]}}const Sp=Ep;class Ap{constructor(){this.equipmentSpecs={name:"Stationary Bike",types:["Spin bike","Upright bike","Peloton","Indoor trainer with road bike","Recumbent bike"],description:"Traditional seated cycling for running-specific cross-training",accessibility:"Highly accessible - gyms, home Pelotons, Zwift setups, spin studios",benefits:["Low impact cardiovascular training","Maintains aerobic fitness during injury","Builds leg strength and power","Can match running heart rate zones","Accessible almost anywhere"],runningConversion:{time:"10-15 min cycling \u2248 1 mile running",distance:"3x distance (5 mile run \u2248 15 mile ride)",effort:"1 hour cycling \u2248 30-40 min running"},keyMetrics:{cadence:"Target 90 RPM (matches 180 spm running), up to 125 RPM for sprints",heartRate:"~8-10 bpm lower than running initially (sport-specific fitness improves this)",power:"If available: FTP-based zones similar to running pace zones",resistance:"Adjust to match running effort levels"}},this.workoutLibrary={EASY:[{name:"Recovery Spin",duration:"30-45 minutes",description:"Gentle spinning for active recovery",structure:"30-45 min continuous easy spinning at low resistance",intensity:"easy",benefits:"Active recovery, blood flow to legs, maintains aerobic base without impact",settings:{resistance:"Low (easy to spin)",cadence:"85-95 RPM",heartRate:"Zone 1-2 (60-75% max HR)",power:"< 60% FTP if using power meter"},technique:"Smooth, relaxed pedal stroke. Seated position. Light grip on handlebars. Let legs spin freely.",coachingTips:"This should feel easy. If you're breathing hard, reduce resistance. Recovery is the goal.",runningEquivalent:"30-45 min easy recovery run"},{name:"Moderate Easy Ride",duration:"45-75 minutes",description:"Sustained easy aerobic ride",structure:"45-75 min continuous steady effort",intensity:"easy",benefits:"Aerobic base building, endurance maintenance without running impact",settings:{resistance:"Moderate (conversational effort)",cadence:"88-95 RPM",heartRate:"Zone 2 (65-75% max HR)",power:"60-70% FTP"},technique:"Consistent cadence throughout. Vary seated/standing every 10-15 min for variety.",coachingTips:"Should feel comfortable and sustainable. You're building aerobic foundation.",runningEquivalent:"45-60 min easy run"},{name:"Extended Easy Ride",duration:"75-120 minutes",description:"Long easy aerobic session",structure:"75-120 min continuous steady effort, vary position occasionally",intensity:"easy",benefits:"Extended aerobic stimulus, fat burning adaptation, mental endurance",settings:{resistance:"Moderate",cadence:"88-92 RPM",heartRate:"Zone 2 (65-75% max HR)",power:"60-70% FTP"},technique:"Alternate seated and standing climbs every 15-20 min. Stay patient and consistent.",coachingTips:"Long rides build serious endurance. Bring water and fuel if over 90 minutes.",runningEquivalent:"60-75 min easy run"}],TEMPO:[{name:"Sustained Tempo Ride",duration:"60-90 minutes",description:"Continuous tempo effort at lactate threshold",structure:"15 min easy warmup + 30-60 min @ tempo effort (high resistance, 85-90 RPM) + 15 min easy cooldown",intensity:"tempo",benefits:"Lactate threshold development, sustained power, mental toughness",settings:{warmup:{resistance:"low",cadence:90},tempo:{resistance:"moderate-high",cadence:"85-90 RPM"},heartRate:"Zone 3-4 (80-90% max HR)",power:"85-95% FTP"},effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard - can speak short sentences, breathing elevated",cadence:"85-90 RPM consistently"},technique:"Seated mostly. Increase resistance to hit effort, not just higher cadence. Strong steady pedal stroke.",coachingTips:"Tempo should feel challenging but sustainable. Don't start too hard.",runningEquivalent:"45-60 min tempo run"},{name:"Tempo Intervals",duration:"75-105 minutes",description:"Repeated tempo efforts with active recovery",structure:"15 min warmup + 4 x 15 min @ tempo (moderate-high resistance) with 8 min easy spinning + 15 min cooldown",intensity:"tempo",benefits:"Threshold power, recovery management, pacing practice",settings:{intervals:{resistance:"moderate-high",cadence:"85-90 RPM"},recovery:{resistance:"low",cadence:"90-95 RPM"},heartRate:"Zone 3-4 during efforts",power:"85-95% FTP during efforts"},effort:{heartRate:"Zone 3-4 during efforts (80-90% max HR)",perceived:"Hard but repeatable, recovery truly easy",cadence:"85-90 RPM during efforts, faster during recovery"},technique:"Strong resistance during efforts. Truly easy spinning during recovery - let HR drop.",coachingTips:"This is classic threshold work. Each interval should feel the same.",runningEquivalent:"Tempo interval workout"},{name:"Progressive Power Build",duration:"60-90 minutes",description:"Gradually increasing resistance simulating race finish",structure:"15 min easy + 15 min moderate + 20 min tempo + 10 min hard + 15 min easy cooldown",intensity:"tempo",benefits:"Graduated effort adaptation, finishing strength, race simulation",settings:{progressive:{resistance:"increasing each segment",cadence:"88-92 RPM"},heartRate:"Building from Zone 2 \u2192 Zone 5",power:"Building from 65% \u2192 100% FTP"},effort:{heartRate:"Building from Zone 2 to Zone 5",perceived:"Starting comfortable, finishing very hard",cadence:"Steady throughout"},technique:"Gradually increase resistance each segment. Final 10min should feel like racing.",coachingTips:"This teaches you to push when tired. Mental training for race day.",runningEquivalent:"Progressive tempo run"},{name:"Sweet Spot Intervals",duration:"60-90 minutes",description:"Sustained efforts just below threshold",structure:"15 min warmup + 3 x 20 min @ sweet spot (88-93% FTP) with 5 min easy + 15 min cooldown",intensity:"tempo",benefits:"Threshold development with more volume, sustainable power",settings:{intervals:{resistance:"moderate-high",cadence:"85-90 RPM"},recovery:{resistance:"low",cadence:"95 RPM"},heartRate:"Zone 3 (75-85% max HR)",power:"88-93% FTP"},effort:{heartRate:"Zone 3 (75-85% max HR)",perceived:"Moderately hard, sustainable for longer durations",cadence:"Steady 85-90 RPM"},technique:"Just below threshold = can sustain longer. Focus on smooth power delivery.",coachingTips:"Sweet spot is hard enough to build fitness, sustainable enough for volume.",runningEquivalent:"Tempo run or marathon pace work"}],INTERVALS:[{name:"1-Minute Sprint Intervals",duration:"60-75 minutes",description:"Short, intense sprints with recovery",structure:"15 min warmup + 10 x 1 min all-out sprint (out of saddle) with 2 min easy recovery + 15 min cooldown",intensity:"intervals",benefits:"VO2max, explosive power, neuromuscular development",settings:{sprints:{resistance:"high",cadence:"100-125 RPM",position:"out of saddle"},recovery:{resistance:"low",cadence:"80-90 RPM"},heartRate:"Zone 5 (95%+ max HR)",power:"120-150% FTP"},effort:{heartRate:"Zone 5 (95%+ max HR)",perceived:"All-out effort, gasping for air",cadence:"100-125 RPM during sprints"},technique:"Out of saddle. Maximum power output. Control your bike. Recovery is truly easy.",coachingTips:"These are hard! Quality over quantity. If power drops significantly, stop the workout.",runningEquivalent:"10 x 400m track repeats",landEquivalent:"Simulates 10 x 400m on track"},{name:"90-Second Power Intervals",duration:"60-75 minutes",description:"Medium intervals building VO2max",structure:"15 min warmup + 6 x 90 sec @ RPE 9-10 with 3 min easy pedaling + 15 min cooldown",intensity:"intervals",benefits:"VO2max development, lactate tolerance, mental toughness",settings:{intervals:{resistance:"very high",cadence:"95-105 RPM"},recovery:{resistance:"low",cadence:"85 RPM"},heartRate:"Zone 4-5 (90-95% max HR)",power:"110-130% FTP"},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard, last 30 seconds hurts",cadence:"95-105 RPM"},technique:"Seated or standing - your choice. Maximum sustainable power for 90 seconds.",coachingTips:"90 seconds is long enough to hurt. Push through the final 30 seconds.",runningEquivalent:"6-8 x 800m repeats",landEquivalent:"Simulates 6 x 800m on track"},{name:"3-Minute Hard Repeats",duration:"60-90 minutes",description:"Longer intervals at high intensity",structure:"15 min warmup + 8 x 3 min hard with 2 min easy recovery + 15 min cooldown",intensity:"intervals",benefits:"VO2max endurance, sustained high power, mental resilience",settings:{intervals:{resistance:"high",cadence:"90-95 RPM"},recovery:{resistance:"low",cadence:"90 RPM"},heartRate:"Zone 4-5 (90-95% max HR)",power:"100-115% FTP"},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Hard and sustained, requires focus",cadence:"90-95 RPM"},technique:"Control your effort - 3 minutes is long enough to blow up early. Pace yourself.",coachingTips:"These are threshold-plus efforts. Final minute of each is mental training.",runningEquivalent:"8 x 1000m repeats",landEquivalent:"Simulates 8 x 1000m on track"},{name:"Tabata Sprints",duration:"45-60 minutes",description:"Ultra-short maximum efforts",structure:"15 min warmup + 8 rounds x (20 sec max sprint / 10 sec rest) + 3 min recovery, repeat 2-3 sets + 15 min cooldown",intensity:"intervals",benefits:"Anaerobic capacity, explosive power, maximum RPM development",settings:{sprints:{resistance:"moderate",cadence:"maximum sustainable RPM (120-140)"},rest:{resistance:"low",cadence:"slow pedal"},heartRate:"Zone 5 (95%+ max HR)",power:"150%+ FTP"},effort:{heartRate:"Zone 5 (95%+ max HR)",perceived:"Maximum effort, explosive",cadence:"Maximum controllable RPM"},technique:"Explosive leg speed. 20 seconds goes fast - go all out immediately. 10 sec rest = barely recover.",coachingTips:"These are brutal. Classic Tabata protocol. If form breaks, stop.",runningEquivalent:"Sprint intervals",landEquivalent:"Simulates all-out sprint training"},{name:"5-Minute Power Intervals",duration:"75-90 minutes",description:"Long VO2max efforts proven to improve running",structure:"15 min warmup + 4-5 x 5 min hard with 5 min easy recovery + 15 min cooldown",intensity:"intervals",benefits:"VO2max endurance, research-proven to improve 5K run times",settings:{intervals:{resistance:"high",cadence:"88-92 RPM"},recovery:{resistance:"low",cadence:"90-95 RPM"},heartRate:"Zone 4-5 (90-95% max HR)",power:"95-105% FTP"},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard and sustained",cadence:"88-92 RPM"},technique:"Seated position. Control your pacing - 5 minutes is long. Equal work:rest ratio allows quality.",coachingTips:"Research shows 5-min bike intervals improve running performance. These are gold.",runningEquivalent:"Mile repeats",landEquivalent:"Simulates 4-5 x mile repeats",researchNote:"Longer bike intervals (5 min) shown to improve running 5K times by over 1 minute in triathletes"},{name:"10-Second Max Sprints",duration:"45-60 minutes",description:"Ultra-short maximal sprints for running performance",structure:"15 min warmup + 6 x 10 sec maximal sprint with 5 min easy recovery + 15 min cooldown",intensity:"intervals",benefits:"Neuromuscular power, running economy, 3K performance improvement",settings:{sprints:{resistance:"moderate",cadence:"absolute maximum RPM"},recovery:{resistance:"very low",cadence:"easy spinning"},heartRate:"Zone 5 briefly",power:"Maximum wattage output"},effort:{heartRate:"Spikes to Zone 5",perceived:"Absolute maximum effort for 10 seconds",cadence:"Maximum possible RPM"},technique:"Explosive from first second. All-out maximum power for full 10 seconds. Long recovery allows quality.",coachingTips:"Research-backed for 3K running improvement. Maximum quality, full recovery between efforts.",runningEquivalent:"Sprint drills",researchNote:"6 x 10-second maximal sprints shown to improve 3K running performance"}],LONG:[{name:"Steady Endurance Ride",duration:"90-150 minutes",description:"Long steady effort for aerobic development",structure:"90-150 min continuous moderate effort, vary seated/standing every 15-20 min",intensity:"long",benefits:"Aerobic capacity, fat burning, endurance without running impact",settings:{resistance:"Moderate",cadence:"88-92 RPM",heartRate:"Zone 2 (65-75% max HR)",power:"65-75% FTP"},effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Conversational but sustained",cadence:"Steady 88-92 RPM"},technique:"Vary position to prevent fatigue. Stay patient. Fuel properly if over 90 minutes.",coachingTips:"Long rides build massive aerobic base. Time in Zone 2 is gold for endurance.",runningEquivalent:"Long run (1.5-2 hours)"},{name:"Extended Endurance Ride",duration:"150-240 minutes",description:"Ultra-long ride for maximum endurance",structure:"2.5-4 hours continuous moderate effort with nutrition strategy",intensity:"long",benefits:"Maximum aerobic development, glycogen management, mental fortitude",settings:{resistance:"Moderate",cadence:"88-92 RPM",heartRate:"Zone 2 (65-75% max HR)",power:"60-70% FTP"},effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Easy-moderate, becomes work in final hour",cadence:"Consistent throughout"},technique:"Nutrition is critical - fuel every 45-60 min. Stay hydrated. Mental breaks every 30 min.",coachingTips:"This is serious endurance training. Bring food, water, entertainment. Plan your fueling strategy.",runningEquivalent:"16-20 mile long run"},{name:"Progressive Endurance Ride",duration:"90-135 minutes",description:"Long ride with building effort finish",structure:"75 min easy-moderate + 15-45 min @ increased resistance/tempo + 15 min easy cooldown",intensity:"long",benefits:"Endurance + fatigue resistance, teaches pushing when tired",settings:{base:{resistance:"moderate",cadence:90,power:"70% FTP"},finish:{resistance:"moderate-high",cadence:88,power:"85-90% FTP"}},effort:{heartRate:"Zone 2 early, building to Zone 3-4",perceived:"Easy early, hard finish",cadence:"Steady throughout"},technique:"Simulate racing tired. Hard finish after endurance work is race-specific.",coachingTips:"The hard finish when fatigued is key race training. This is mental strength work.",runningEquivalent:"Long run with marathon pace finish"}],HILLS:[{name:"Seated Climbing Intervals",duration:"60-75 minutes",description:"High resistance climbs for leg strength",structure:"15 min warmup + 8-10 x 2 min @ very high resistance (seated) with 3 min easy recovery + 15 min cooldown",intensity:"hills",benefits:"Leg strength, sustained power, glute/quad development",settings:{climbs:{resistance:"very high",cadence:"60-75 RPM",position:"seated"},recovery:{resistance:"low",cadence:"90-95 RPM"}},effort:{heartRate:"Zone 4 (85-90% max HR)",perceived:"Very hard, muscular effort",cadence:"60-75 RPM - power over speed"},technique:"Seated position. Grind through high resistance. Feel the leg muscles working hard.",coachingTips:"Low cadence + high resistance = serious strength work. Builds running power.",runningEquivalent:"Hill repeats"},{name:"Standing Power Climbs",duration:"60-75 minutes",description:"Out-of-saddle climbing for explosive power",structure:"15 min warmup + 6-8 x 90 sec standing climb @ high resistance with 3 min easy recovery + 15 min cooldown",intensity:"hills",benefits:"Explosive power, full-body strength, running-specific power development",settings:{climbs:{resistance:"very high",cadence:"70-80 RPM",position:"standing"},recovery:{resistance:"low",cadence:"90 RPM",position:"seated"}},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard, explosive effort",cadence:"70-80 RPM out of saddle"},technique:"Standing position. Drive through legs. Rock bike side to side slightly. Core engaged.",coachingTips:"Standing climbs build explosive power that transfers to running. Feel the burn!",runningEquivalent:"Steep hill repeats"},{name:"Mixed Climbing Session",duration:"60-90 minutes",description:"Alternating seated and standing climbs",structure:"15 min warmup + 5 x (3 min seated climb + 2 min standing climb) with 4 min recovery + 15 min cooldown",intensity:"hills",benefits:"Comprehensive power development, muscular endurance, mental toughness",settings:{seated:{resistance:"very high",cadence:"65-75 RPM"},standing:{resistance:"very high",cadence:"75-85 RPM"}},effort:{heartRate:"Zone 4 (85-90% max HR)",perceived:"Hard throughout, muscular fatigue builds",cadence:"Varies between seated and standing"},technique:"Seated: grind through resistance. Standing: drive explosively. Transition smoothly.",coachingTips:"This builds both sustained and explosive power. Comprehensive strength session.",runningEquivalent:"Long hill workout"}],RECOVERY:[{name:"Active Recovery Spin",duration:"20-30 minutes",description:"Very easy spinning for recovery",structure:"20-30 min very easy, minimal resistance",intensity:"recovery",benefits:"Blood flow without stress, active recovery",settings:{resistance:"Very low",cadence:"85-95 RPM",heartRate:"Zone 1 (60-70% max HR)",power:"< 55% FTP"},effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Very easy, restorative",cadence:"Free spinning"},technique:"Let legs spin freely. Minimal resistance. This should feel easy.",coachingTips:"If this feels hard, you need complete rest. Recovery is the goal, not fitness."},{name:"Extended Recovery Ride",duration:"30-45 minutes",description:"Longer gentle ride for deep recovery",structure:"30-45 min very easy spinning",intensity:"recovery",benefits:"Extended active recovery, maintains movement patterns",settings:{resistance:"Very low",cadence:"88-95 RPM",heartRate:"Zone 1 (60-70% max HR)",power:"< 60% FTP"},effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Extremely easy",cadence:"Natural, relaxed"},technique:"Effortless pedaling. Focus on smooth circular motion.",coachingTips:"Perfect day-after-hard-workout session. Promotes recovery without stress."}]}}getWorkoutByDuration(e,t){const n=e.toUpperCase(),r=this.workoutLibrary[n];if(!r||0===r.length)return null;let i=r[0],o=Math.abs(this.parseDuration(r[0].duration)-t);return r.forEach(e=>{const n=this.parseDuration(e.duration),r=Math.abs(n-t);r<o&&(o=r,i=e)}),i}parseDuration(e){const t=e.match(/(\d+)(?:-(\d+))?/);if(!t)return 60;const n=parseInt(t[1]);return(n+(t[2]?parseInt(t[2]):n))/2}getWorkoutsByType(e){const t=e.toUpperCase();return this.workoutLibrary[t]||[]}}const Cp=Ap;class Tp{constructor(){this.equipmentSpecs={name:"Swimming",poolTypes:["25-yard pool","25-meter pool","50-meter pool","Open water"],description:"Full-body cardiovascular workout, different movement pattern from running",accessibility:"Widely accessible - community pools, gyms, lakes, ocean",benefits:["Low-impact full-body cardio","Works different muscle groups than running","Improves lung capacity and breathing control","Excellent for injury recovery","Can maintain aerobic fitness","Active recovery for tired legs"],swimStrokes:{freestyle:"Primary stroke for continuous swimming and aerobic work",backstroke:"Good for shoulder balance and variety",breaststroke:"Lower intensity, good for recovery",butterfly:"High intensity, brief use only unless experienced swimmer"},keyMetrics:{effort:"Use RPE (perceived exertion) rather than pace",heartRate:"Typically 10-15 bpm lower than running at same effort",breathing:"Controlled breathing improves lung capacity",technique:"Focus on efficiency over speed - poor technique = exhaustion"}},this.beginnerGuidance={important:"Swimming technique matters more than other modalities. Poor technique = quick exhaustion.",recommendation:"If new to swimming, take 2-3 lessons to learn proper freestyle form",alternatives:"If not comfortable swimming laps, use aqua running instead",progression:"Start with easier strokes (freestyle, backstroke, breaststroke) before attempting butterfly"},this.workoutLibrary={EASY:[{name:"Easy Aerobic Swim",duration:"20-40 minutes",description:"Continuous easy swimming for aerobic base",structure:"10 min drills/warmup + 20-30 min continuous easy swimming (vary strokes) + 5-10 min easy cooldown",intensity:"easy",benefits:"Aerobic base, active recovery for running, improves breathing and lung capacity",technique:{focus:"Smooth, efficient stroke. Don't fight the water.",breathing:"Controlled, rhythmic breathing",effort:"Should feel easy, sustainable indefinitely"},workout:{warmup:"200-400 yards easy mixed strokes",main:"800-1200 yards freestyle at conversational effort",cooldown:"200 yards easy backstroke or breaststroke"},effort:{heartRate:"Zone 1-2 (60-75% max HR)",perceived:"Easy, could maintain conversation if able to speak",breathing:"Relaxed and controlled"},coachingTips:"Focus on technique. If you're exhausted, you're swimming too hard or need technique work.",runningEquivalent:"30-40 min easy recovery run"},{name:"Moderate Aerobic Swim",duration:"30-45 minutes",description:"Sustained aerobic work with varied strokes",structure:"10 min drills + 30-40 min steady swimming (mostly freestyle, mix in other strokes) + 5-10 min cooldown",intensity:"easy",benefits:"Cardiovascular endurance, full-body conditioning, breathing development",technique:{focus:"Efficient stroke mechanics, bilateral breathing",breathing:"Every 3 or 5 strokes for balance",effort:"Moderate, sustainable"},workout:{warmup:"400 yards (200 free, 100 back, 100 breast)",main:"1200-1600 yards (1000 freestyle, mix in 200-400 other strokes for variety)",cooldown:"200-300 yards easy choice of stroke"},effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Comfortable but sustained effort",breathing:"Controlled, rhythmic"},coachingTips:"Varying strokes gives different muscles a break. Don't skip warmup - prevents shoulder issues.",runningEquivalent:"40-45 min easy run"},{name:"Extended Aerobic Swim",duration:"40-60 minutes",description:"Long aerobic swim for endurance",structure:"10 min drills + 45-50 min continuous varied swimming + 5-10 min cooldown",intensity:"easy",benefits:"Extended aerobic stimulus, mental endurance in water, active recovery",technique:{focus:"Maintain efficiency even when fatigued",breathing:"Consistent pattern throughout",effort:"Easy-moderate, mentally engaging"},workout:{warmup:"400-600 yards mixed strokes with drills",main:"2000-2500 yards (alternate 400 free, 200 back/breast, repeat)",cooldown:"300-400 yards easy"},effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Sustainable, becomes mentally challenging in final portion",breathing:"Steady throughout"},coachingTips:"Long swims build mental toughness. Break into chunks mentally. Vary strokes to stay engaged.",runningEquivalent:"60 min easy run"}],TEMPO:[{name:"Tempo Swim",duration:"35-50 minutes",description:"Sustained harder effort for threshold development",structure:"10 min warmup + 15-20 min @ tempo effort (80% effort) + 10 min easy cooldown",intensity:"tempo",benefits:"Lactate threshold, sustained effort tolerance, cardiovascular fitness",technique:{focus:"Maintain stroke efficiency despite elevated effort",breathing:"More frequent than easy pace",effort:"Comfortably hard, breathing elevated"},workout:{warmup:"400 yards (200 free, 100 back, 100 drills)",tempo:"800-1000 yards freestyle @ tempo effort (or 4 x 200 with 20 sec rest)",cooldown:"400 yards easy mixed"},effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard, breathing elevated but controlled",breathing:"Every 2-3 strokes"},coachingTips:"Tempo swimming teaches breathing control under duress. Don't let stroke fall apart.",runningEquivalent:"30 min tempo run"},{name:"Threshold Intervals",duration:"40-55 minutes",description:"Repeated threshold efforts with brief recovery",structure:"10 min warmup + 6 x 100 yards @ threshold with 15-20 sec rest + 10 min cooldown",intensity:"tempo",benefits:"Threshold efficiency, recovery management, pacing practice",technique:{focus:"Consistent stroke count per length across all intervals",breathing:"Controlled despite effort",effort:"Hard but repeatable"},workout:{warmup:"400-600 yards easy mixed with drills",main:"6-8 x 100 yards @ 85% effort with 15-20 sec rest between",cooldown:"300-400 yards easy"},effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Hard, breathing elevated, short rest keeps it honest",breathing:"Every 2-3 strokes"},coachingTips:"Short rest = never fully recovered. Classic threshold work. Monitor stroke count to ensure form holds.",runningEquivalent:"Cruise intervals (6 x 5 min tempo)"}],INTERVALS:[{name:"Sprint Intervals - 25s",duration:"35-50 minutes",description:"Short fast efforts for speed and power",structure:"10 min warmup + 12-16 x 25 yards @ 90% effort with 20-30 sec rest + 10 min cooldown",intensity:"intervals",benefits:"VO2max, speed, explosive power, anaerobic capacity",technique:{focus:"Maximum sustainable speed while maintaining technique",breathing:"Minimal during sprint (breath control)",effort:"Very hard for 25 yards"},workout:{warmup:"400-600 yards easy with speed drills",sprints:"12-16 x 25 yards @ 90% with 20-30 sec rest",cooldown:"400 yards easy"},effort:{heartRate:"Zone 5 (95%+ max HR)",perceived:"Very hard, nearly all-out for 25 yards",breathing:"Controlled, minimal breaths during sprint"},coachingTips:"25 yards is short enough to go hard. Focus on explosive speed off walls. Technique matters!",runningEquivalent:"200m sprint repeats",landEquivalent:"Simulates 12-16 x 200m sprints"},{name:"Medium Intervals - 50s",duration:"40-55 minutes",description:"Classic interval training at 50-yard distance",structure:"10 min warmup + 10-15 x 50 yards fast (80% max) with 20-30 sec rest + 10 min cooldown",intensity:"intervals",benefits:"VO2max development, speed endurance, breathing control",technique:{focus:"Fast but controlled - technique holds throughout",breathing:"Every 2-3 strokes, controlled",effort:"Hard for full 50 yards"},workout:{warmup:"600 yards (400 easy, 200 drills/build)",intervals:"10-15 x 50 yards @ 80% effort with 20-30 sec rest",cooldown:"400 yards easy"},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Hard, breathing elevated, repeatable",breathing:"Every 2-3 strokes"},coachingTips:"50 yards is perfect interval distance. Long enough to work, short enough to maintain quality.",runningEquivalent:"400m interval repeats",landEquivalent:"Simulates 10-15 x 400m on track"},{name:"100-Yard Intervals",duration:"45-60 minutes",description:"Longer intervals building VO2max endurance",structure:"10 min warmup + 8-12 x 100 yards @ 80% with 30 sec rest + 10 min cooldown",intensity:"intervals",benefits:"VO2max endurance, lactate tolerance, mental toughness",technique:{focus:"Maintain stroke efficiency throughout 100 yards",breathing:"Consistent pattern, don't panic breathe",effort:"Controlled hard effort"},workout:{warmup:"600-800 yards easy mixed with drills",intervals:"8-12 x 100 yards @ 80% effort with 30 sec rest",cooldown:"400 yards easy"},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard, requires pacing discipline",breathing:"Every 2-3 strokes, controlled"},coachingTips:"100s require pacing. Don't blow up first 25 yards. Final 25 should hurt but technique holds.",runningEquivalent:"800m interval repeats",landEquivalent:"Simulates 8-12 x 800m on track"},{name:"Descending Ladder",duration:"45-60 minutes",description:"Pyramid intervals for mental engagement",structure:"10 min warmup + [200-150-100-50-100-150-200] yards hard with 30-45 sec rest + 10 min cooldown",intensity:"intervals",benefits:"Mental engagement, varied pace practice, comprehensive speed work",technique:{focus:"Adjust effort slightly for distance - shorter = faster",breathing:"Varies with distance",effort:"Hard throughout"},workout:{warmup:"600-800 yards easy with drills",pyramid:"200-150-100-50-100-150-200 @ 80-90% effort with 30-45 sec rest",cooldown:"400-600 yards easy"},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Varies with distance, all feel hard",breathing:"Adjust with distance"},coachingTips:"Pyramid keeps mind engaged. Shorter distances allow faster swimming. Challenge yourself on the 50!",runningEquivalent:"Track pyramid workout",landEquivalent:"Simulates 800m-600m-400m-200m-400m-600m-800m pyramid"}],LONG:[{name:"Continuous Distance Swim",duration:"45-60 minutes",description:"Long continuous swim for endurance",structure:"10 min warmup/drills + 2000-3000 yards continuous varied swimming + 10 min cooldown",intensity:"long",benefits:"Aerobic capacity, mental endurance, full-body conditioning",technique:{focus:"Efficiency and patience - long swim is mental",breathing:"Bilateral for balance, consistent pattern",effort:"Moderate, sustainable"},workout:{warmup:"400-600 yards mixed with drills",main:"2000-3000 yards (vary: 500 free, 200 back, 300 free, 200 breast, repeat)",cooldown:"400 yards easy"},effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Moderate, mentally challenging in final portion",breathing:"Steady, controlled"},coachingTips:"Long swims are as much mental as physical. Break into chunks. Vary strokes to stay fresh.",runningEquivalent:"60-75 min long run"},{name:"Extended Distance Swim",duration:"60-90 minutes",description:"Very long swim for maximum aerobic development",structure:"10-15 min warmup + 3500-5000 yards continuous + 10-15 min cooldown",intensity:"long",benefits:"Maximum aerobic development, mental fortitude, comprehensive conditioning",technique:{focus:"Maintain form even when tired - count strokes to ensure efficiency",breathing:"Consistent throughout, bilateral recommended",effort:"Moderate, patient"},workout:{warmup:"600-800 yards mixed with drills",main:"3500-5000 yards (create sets: 10 x 400 with varied strokes, or continuous)",cooldown:"500-600 yards easy"},effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Comfortable early, requires mental discipline late",breathing:"Controlled, rhythmic"},coachingTips:"This is serious aerobic training. Stay patient. Focus on efficiency over speed. Mental game is key.",runningEquivalent:"90-120 min long run"},{name:"Negative Split Distance",duration:"45-60 minutes",description:"Long swim with faster second half",structure:"10 min warmup + 2000-2500 yards (first half easy, second half moderate-hard) + 10 min cooldown",intensity:"long",benefits:"Pacing practice, finishing strength, mental toughness",technique:{focus:"Start conservatively, build effort gradually",breathing:"More frequent in second half as effort increases",effort:"Building from easy to moderate-hard"},workout:{warmup:"600 yards easy with drills",main:"2000-2500 yards (first 1000-1250 @ easy, second half @ moderate-hard)",cooldown:"400 yards easy"},effort:{heartRate:"Zone 2 building to Zone 3-4",perceived:"Easy early, hard finish",breathing:"Controlled early, faster late"},coachingTips:"Negative splits teach you to pace and finish strong. Resist urge to go hard early.",runningEquivalent:"Long run with progression"}],RECOVERY:[{name:"Recovery Swim",duration:"20-30 minutes",description:"Very easy swimming for active recovery",structure:"20-30 min continuous very easy mixed strokes",intensity:"recovery",benefits:"Active recovery for running, promotes blood flow, maintains feel for water",technique:{focus:"Minimal effort, maximum relaxation",breathing:"Relaxed, no breathlessness",effort:"Very easy"},workout:{main:"800-1200 yards ultra-easy (mix freestyle, backstroke, breaststroke)"},effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Very easy, restorative",breathing:"Relaxed and comfortable"},coachingTips:"Perfect day-after-hard-workout. Legs get a break, cardio system stays engaged. Should feel refreshing.",runningEquivalent:"20-30 min recovery jog"},{name:"Extended Recovery Swim",duration:"30-40 minutes",description:"Longer gentle swim for deep recovery",structure:"30-40 min continuous very easy varied swimming",intensity:"recovery",benefits:"Extended active recovery without running impact, mental reset",technique:{focus:"Smooth, effortless strokes",breathing:"Natural, comfortable",effort:"Minimal"},workout:{main:"1200-1600 yards ultra-easy mixed strokes with emphasis on drills and technique work"},effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Extremely easy, almost meditative",breathing:"Relaxed"},coachingTips:"Great for tired runners. Water supports body weight - zero impact. Focus on technique and relaxation.",runningEquivalent:"30-40 min easy recovery run"}],TECHNIQUE:[{name:"Drill-Focused Session",duration:"30-45 minutes",description:"Technique drills for stroke improvement",structure:"Continuous 30-45 min of mixed drills and easy swimming",intensity:"easy",benefits:"Improved stroke efficiency, better body position, injury prevention",drills:["Catch-up drill (one arm at a time)","Fingertip drag (high elbow recovery)","Side-kick drill (rotation practice)","Fist swimming (feel for water)","6-kick switch (body rotation)","Sculling drills (hand position awareness)"],workout:{structure:"Rotate through 6-8 different drills, 50-100 yards each, with easy swimming between"},coachingTips:"Drills improve efficiency more than just swimming hard. Better technique = easier swimming = more sustainable training.",runningEquivalent:"Running drills and form work"}]}}getWorkoutByDuration(e,t){const n=e.toUpperCase(),r=this.workoutLibrary[n];if(!r||0===r.length)return null;let i=r[0],o=Math.abs(this.parseDuration(r[0].duration)-t);return r.forEach(e=>{const n=this.parseDuration(e.duration),r=Math.abs(n-t);r<o&&(o=r,i=e)}),i}parseDuration(e){const t=e.match(/(\d+)(?:-(\d+))?/);if(!t)return 40;const n=parseInt(t[1]);return(n+(t[2]?parseInt(t[2]):n))/2}getWorkoutsByType(e){const t=e.toUpperCase();return this.workoutLibrary[t]||[]}}const Rp=Tp;class Fp{constructor(){this.equipmentSpecs={name:"Rowing Machine (Erg)",primaryEquipment:"Concept2 Rowing Erg",description:"Full-body power-based cardio using rowing motion",accessibility:"Common in gyms, CrossFit boxes, home Concept2 machines",benefits:["Full-body cardiovascular workout","Power-based training similar to running","Low impact on running-specific joints","Builds posterior chain strength (glutes, hamstrings, back)","Excellent for maintaining fitness during injury","Teaches explosive power application"],runningConversion:{distance:"500m row \u2248 400m run (track workout equivalent)",longDistance:"2000m row \u2248 1 mile run",time:"Use time-based matching for easy/tempo work",effort:"Match heart rate zones and RPE to running"},keyMetrics:{strokeRate:"24-32 spm for steady state, 28-36 spm for intervals",pace:"Measure in time per 500m (e.g., 2:00/500m)",power:"Watts output correlates to effort level",damper:"Setting 3-5 typical for cardio work (higher = more resistance per stroke)",splitPace:"Monitor split pace (time per 500m) to gauge effort"},technique:{important:"Proper rowing technique is critical - prevents injury and maximizes efficiency",sequence:"Legs \u2192 Core \u2192 Arms on drive; Arms \u2192 Core \u2192 Legs on recovery",ratio:"Drive:Recovery should be roughly 1:2 (explosive drive, controlled recovery)",power:"70% of power from legs, 20% core, 10% arms"}},this.techniqueGuidance={catchPosition:"Shins vertical, arms straight, shoulders relaxed, core engaged",drive:"Explosive leg push \u2192 lean back with core \u2192 pull arms to lower ribs",finish:"Legs extended, lean back ~11 o'clock, handle to lower ribs, elbows past body",recovery:"Arms away \u2192 lean forward from hips \u2192 slide forward, controlled",commonMistakes:["Arms before legs (should be legs first)","Hunched back (maintain neutral spine)","Too fast recovery (should be twice as slow as drive)","Jerky motion (should be smooth and powerful)"]},this.workoutLibrary={EASY:[{name:"Easy Steady State Row",duration:"30-45 minutes",description:"Low-intensity rowing for aerobic base",structure:"30-45 min continuous at easy effort",intensity:"easy",benefits:"Aerobic base building, active recovery, full-body conditioning without impact",settings:{strokeRate:"20-24 spm (slow and controlled)",pace:"2:15-2:30 per 500m (adjust for fitness)",damper:"3-4",heartRate:"Zone 1-2 (60-75% max HR)",power:"< 70% of max watts"},technique:"Focus on smooth, controlled strokes. Long recovery, powerful drive. Ratio 1:2 (drive:recovery).",coachingTips:"Easy rowing should feel sustainable indefinitely. If breathing hard, slow down stroke rate or reduce power.",runningEquivalent:"30-45 min easy recovery run"},{name:"Moderate Steady State",duration:"45-60 minutes",description:"Sustained aerobic work at moderate effort",structure:"45-60 min continuous at conversational pace",intensity:"easy",benefits:"Aerobic development, endurance building, fat burning",settings:{strokeRate:"22-26 spm",pace:"2:05-2:20 per 500m",damper:"4-5",heartRate:"Zone 2 (65-75% max HR)",power:"65-75% of max watts"},technique:"Maintain consistent stroke rate. Focus on powerful leg drive. Keep core engaged throughout.",coachingTips:"Should feel like you could maintain this for hours. Build aerobic foundation here.",runningEquivalent:"45-60 min easy run"},{name:"Extended Steady State",duration:"60-90 minutes",description:"Long aerobic session for endurance",structure:"60-90 min continuous at easy-moderate effort",intensity:"easy",benefits:"Maximum aerobic development, mental endurance, comprehensive conditioning",settings:{strokeRate:"20-24 spm",pace:"2:10-2:25 per 500m",damper:"3-5",heartRate:"Zone 2 (65-75% max HR)",power:"60-70% of max watts"},technique:"Patience is key. Maintain form even when tired. Break mentally into 15-20 min chunks.",coachingTips:"Long rows build serious aerobic capacity. Stay patient. Hydrate throughout.",runningEquivalent:"60-75 min easy run"}],TEMPO:[{name:"Sustained Tempo Row",duration:"45-60 minutes",description:"Continuous rowing at lactate threshold",structure:"10 min easy warmup + 20-40 min @ tempo pace (2:00-2:10/500m) + 10 min easy cooldown",intensity:"tempo",benefits:"Lactate threshold development, sustained power, mental toughness",settings:{warmup:{strokeRate:20,pace:"2:20/500m"},tempo:{strokeRate:-4,pace:"1:55-2:10/500m"},cooldown:{strokeRate:-2,pace:"2:30/500m"},heartRate:"Zone 3-4 (80-90% max HR)",power:"80-90% of max watts"},effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard - can speak short sentences",strokeRate:"24-28 spm"},technique:"Strong leg drive. Maintain stroke length even under fatigue. Controlled power application.",coachingTips:"Tempo pace should be sustainable for 20-40 min. Don't start too hard.",runningEquivalent:"30-40 min tempo run"},{name:"Tempo Intervals",duration:"50-70 minutes",description:"Repeated threshold efforts with recovery",structure:"10 min warmup + 4 x 8-10 min @ tempo with 3-4 min easy recovery + 10 min cooldown",intensity:"tempo",benefits:"Threshold power, recovery management under fatigue",settings:{intervals:{strokeRate:-2,pace:"1:55-2:05/500m"},recovery:{strokeRate:20,pace:"2:25/500m"},heartRate:"Zone 3-4 during efforts",power:"85-95% max watts"},effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Hard but repeatable",strokeRate:"26-28 spm during efforts"},technique:"Each interval should feel the same. Monitor pace consistency. Recover completely during rest.",coachingTips:"Classic threshold training. Each piece should match in pace and effort.",runningEquivalent:"4 x 8 min tempo intervals"},{name:"2K Tempo Repeats",duration:"45-65 minutes",description:"Race-distance tempo work",structure:"10 min warmup + 3-4 x 2000m @ tempo effort with 5 min easy recovery + 10 min cooldown",intensity:"tempo",benefits:"Sustained power at race pace, mental toughness, pacing practice",settings:{intervals:{strokeRate:-4,pace:"1:50-2:00/500m"},recovery:{strokeRate:-2,pace:"2:30/500m"},heartRate:"Zone 3-4",power:"85-95% max watts"},effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Hard and sustained, requires pacing",strokeRate:"26-30 spm"},technique:"2000m is the Olympic rowing race distance. Pace yourself - don't blow up early.",coachingTips:"2K repeats are classic rowing threshold work. Focus on even pacing.",runningEquivalent:"Mile repeats at threshold"}],INTERVALS:[{name:"500m Repeats",duration:"45-60 minutes",description:"Classic track-style intervals",structure:"10 min warmup + 8-12 x 500m @ hard effort with 2-3 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"VO2max development, power output, speed endurance",settings:{intervals:{strokeRate:-6,pace:"1:35-1:50/500m"},recovery:{strokeRate:20,pace:"2:30/500m"},heartRate:"Zone 4-5 (90-95%+ max HR)",power:"100-120% max watts"},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard, breathing heavily",strokeRate:"30-36 spm"},technique:"Explosive leg drive. Maximum power output. Maintain stroke length despite high rate.",coachingTips:"500m is rowing's version of 400m run. Hard but manageable. Focus on power and speed.",runningEquivalent:"8-12 x 400m track repeats",landEquivalent:"Simulates 8-12 x 400m on track"},{name:"1000m Repeats",duration:"50-70 minutes",description:"Longer intervals building VO2max endurance",structure:"10 min warmup + 5-6 x 1000m @ hard effort with 3-4 min recovery + 10 min cooldown",intensity:"intervals",benefits:"VO2max endurance, lactate tolerance, mental toughness",settings:{intervals:{strokeRate:-4,pace:"1:45-1:58/500m"},recovery:{strokeRate:-2,pace:"2:30/500m"},heartRate:"Zone 4-5 (90-95% max HR)",power:"95-110% max watts"},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard and sustained, requires pacing",strokeRate:"28-32 spm"},technique:"Pacing critical - don't blow up first 500m. Maintain powerful strokes throughout.",coachingTips:"1K repeats build serious power endurance. Last 250m is mental training.",runningEquivalent:"5-6 x 1000m track repeats",landEquivalent:"Simulates 5-6 x 1000m on track"},{name:"Pyramid Intervals",duration:"55-70 minutes",description:"Varied distance intervals for engagement",structure:"10 min warmup + [250m-500m-750m-1000m-750m-500m-250m] hard with 2-4 min recovery + 10 min cooldown",intensity:"intervals",benefits:"Mental engagement, varied power output, comprehensive speed work",settings:{intervals:{strokeRate:"30-36 for short, 28-32 for long",pace:"varies by distance"},recovery:{strokeRate:20,pace:"2:30/500m",time:"2-4 min based on distance"},heartRate:"Zone 4-5",power:"100-120% max watts"},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Varies with distance, all hard",strokeRate:"Adjust for distance"},technique:"Shorter pieces = higher stroke rate and power. Longer = controlled high power.",coachingTips:"Pyramid keeps mind engaged. Challenge yourself on the 250s!",runningEquivalent:"Track pyramid workout",landEquivalent:"Simulates 200m-400m-600m-800m-600m-400m-200m"},{name:"1-Minute Max Efforts",duration:"40-55 minutes",description:"Short explosive intervals",structure:"10 min warmup + 10 x 1 min @ maximum effort with 2 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"Explosive power, anaerobic capacity, maximum watt development",settings:{intervals:{strokeRate:-8,pace:"1:25-1:40/500m",power:"maximum"},recovery:{strokeRate:18,pace:"slow",power:"minimal"},heartRate:"Zone 5 (95%+ max HR)"},effort:{heartRate:"Zone 5 (95%+ max HR)",perceived:"All-out, gasping",strokeRate:"32-40 spm - as high as controllable"},technique:"Maximum power from start. Explosive leg drive. High stroke rate but maintain form.",coachingTips:"These are brutal. Quality over quantity. If power drops significantly, stop workout.",runningEquivalent:"10 x 400m hard",landEquivalent:"Simulates hard 400m repeats"},{name:"2-Minute Power Intervals",duration:"45-60 minutes",description:"Medium intervals at high power",structure:"10 min warmup + 8 x 2 min @ very hard effort with 2-3 min recovery + 10 min cooldown",intensity:"intervals",benefits:"Power endurance, VO2max, lactate tolerance",settings:{intervals:{strokeRate:-4,pace:"1:40-1:52/500m"},recovery:{strokeRate:20,pace:"2:30/500m"},heartRate:"Zone 4-5 (90-95% max HR)",power:"105-120% max watts"},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard, final 30 sec hurts",strokeRate:"30-34 spm"},technique:"2 minutes is long enough to build serious lactate. Maintain power output throughout.",coachingTips:"Classic VO2max work. Don't fade in final 30 seconds - finish strong.",runningEquivalent:"8 x 800m intervals",landEquivalent:"Simulates 8 x 800m on track"}],LONG:[{name:"10K Row",duration:"45-55 minutes",description:"Classic long rowing distance",structure:"10K (10,000 meters) continuous at steady effort",intensity:"long",benefits:"Aerobic capacity, mental endurance, pacing practice",settings:{strokeRate:"22-26 spm",pace:"2:05-2:15/500m (adjust for fitness)",damper:"4-5",heartRate:"Zone 2 (65-75% max HR)",power:"70-80% max watts"},effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Moderate, sustainable",strokeRate:"Steady 22-26 spm"},technique:"Pacing is everything. Even splits. Stay patient. Final 2K can be slightly faster.",coachingTips:"10K is classic rowing endurance distance. Break into 2K chunks mentally. Monitor your split pace.",runningEquivalent:"10-12 mile long run"},{name:"Half Marathon Row",duration:"75-95 minutes",description:"Extended endurance row (21,097 meters)",structure:"Half marathon distance (21,097m) at steady moderate effort",intensity:"long",benefits:"Maximum aerobic development, mental fortitude, glycogen management",settings:{strokeRate:"20-24 spm",pace:"2:08-2:18/500m",damper:"3-5",heartRate:"Zone 2 (65-75% max HR)",power:"65-75% max watts"},effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Moderate, becomes challenging late",strokeRate:"Consistent 20-24 spm"},technique:"Ultra-patient pacing. Fuel every 30-45 min. Stay mentally engaged by breaking into 5K segments.",coachingTips:"This is serious endurance work. Bring water and fuel. Mental game is critical.",runningEquivalent:"Half marathon distance run"},{name:"Progressive 8K",duration:"35-45 minutes",description:"8K row with building effort",structure:"8000m with progressive effort: first 4K easy, next 2K moderate, final 2K hard",intensity:"long",benefits:"Negative split practice, finishing power, race simulation",settings:{first4K:{strokeRate:22,pace:"2:15/500m"},middle2K:{strokeRate:24,pace:"2:05/500m"},final2K:{strokeRate:-2,pace:"1:55/500m"}},effort:{heartRate:"Zone 2 building to Zone 4",perceived:"Easy early, hard finish",strokeRate:"Building throughout"},technique:"Start conservatively. Build power and rate gradually. Final 2K should feel like racing.",coachingTips:"Teaches you to negative split and finish strong. Resist urge to go hard early.",runningEquivalent:"Long run with progression"}],POWER:[{name:"Power Strokes",duration:"40-55 minutes",description:"Maximum power output for brief periods",structure:"10 min warmup + 10-12 x 10 strokes @ maximum power with 2 min easy recovery + 10 min cooldown",intensity:"power",benefits:"Explosive power, neuromuscular development, maximum watt production",settings:{strokes:{strokeRate:"maximum controllable",pace:"sub-1:20/500m",power:"absolute max"},recovery:{strokeRate:18,pace:"easy",duration:"2 min"}},effort:{heartRate:"Spikes to Zone 5 briefly",perceived:"All-out maximum effort for 10 strokes",strokeRate:"Maximum while maintaining form"},technique:"Explosive from first stroke. Maximum leg drive. Form must hold - if technique breaks, stop.",coachingTips:"These build explosive power that transfers to running. Quality is everything - full recovery between sets.",runningEquivalent:"Sprint drills, explosive power work"},{name:"30-Second Power Bursts",duration:"40-55 minutes",description:"Short maximum efforts",structure:"10 min warmup + 8-10 x 30 sec @ max effort with 3 min recovery + 10 min cooldown",intensity:"power",benefits:"Anaerobic power, explosive strength, running-specific power transfer",settings:{bursts:{strokeRate:-8,pace:"1:15-1:30/500m",power:"maximum"},recovery:{strokeRate:-2,pace:"easy"}},effort:{heartRate:"Zone 5 (95%+ max HR)",perceived:"Maximum sustainable effort for 30 sec",strokeRate:"Very high, controlled"},technique:"All-out from start. Maximum power production. Long recovery allows quality.",coachingTips:"30 seconds is long enough to really work anaerobic system. Push through the burn.",runningEquivalent:"200m sprint repeats"}],RECOVERY:[{name:"Recovery Row",duration:"20-30 minutes",description:"Very easy rowing for active recovery",structure:"20-30 min continuous at minimal effort",intensity:"recovery",benefits:"Blood flow without stress, active recovery, maintains movement patterns",settings:{strokeRate:"16-20 spm (very slow)",pace:"2:30-2:45/500m",damper:"3",heartRate:"Zone 1 (60-70% max HR)",power:"< 60% max watts"},effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Very easy, restorative",strokeRate:"Slow and controlled"},technique:"Minimal effort. Focus on perfect form. This should feel easy.",coachingTips:"If this feels hard, you need complete rest. Goal is recovery, not fitness.",runningEquivalent:"20-30 min recovery jog"},{name:"Extended Recovery Row",duration:"30-40 minutes",description:"Longer gentle row for deep recovery",structure:"30-40 min continuous very easy rowing",intensity:"recovery",benefits:"Extended active recovery, full-body movement without impact",settings:{strokeRate:"18-22 spm",pace:"2:25-2:40/500m",damper:"3-4",heartRate:"Zone 1 (60-70% max HR)"},effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Extremely easy",strokeRate:"Relaxed and natural"},technique:"Smooth, effortless strokes. Focus on technique perfection.",coachingTips:"Perfect for day-after-hard-workout. Promotes recovery while maintaining fitness.",runningEquivalent:"30-40 min easy recovery run"}]}}getWorkoutByDuration(e,t){const n=e.toUpperCase(),r=this.workoutLibrary[n];if(!r||0===r.length)return null;let i=r[0],o=Math.abs(this.parseDuration(r[0].duration)-t);return r.forEach(e=>{const n=this.parseDuration(e.duration),r=Math.abs(n-t);r<o&&(o=r,i=e)}),i}parseDuration(e){const t=e.match(/(\d+)(?:-(\d+))?/);if(!t)return 50;const n=parseInt(t[1]);return(n+(t[2]?parseInt(t[2]):n))/2}getWorkoutsByType(e){const t=e.toUpperCase();return this.workoutLibrary[t]||[]}}const Ip=Fp;const Pp=class{constructor(){this.transitionGuidelines={quick:{time:"30-60 seconds",description:"Simulate race conditions"},standard:{time:"60-90 seconds",description:"Equipment change + brief recovery"},recovery:{time:"2-3 minutes",description:"Hydration + equipment adjustment"},full:{time:"5+ minutes",description:"Complete recovery between segments"}},this.equipmentTransitions={cyclete:{setup:"30-45 seconds",notes:"Quick height adjustment, similar running position",advantages:"Minimal setup, running-like feel"},elliptigo:{setup:"60-90 seconds",notes:"Stride adjustment, gear selection",advantages:"Full body engagement after running"}},this.brickWorkouts={aerobic:[{name:"Base Building Brick",totalDuration:"60-90 minutes",difficulty:"beginner",runeqRatio:"moderate",structure:[{type:"run",duration:"20 min",intensity:"easy",description:"Easy warm-up run"},{type:"transition",duration:"90 sec",activity:"equipment change"},{type:"bike",duration:"30 min",intensity:"easy",description:"Steady aerobic effort"},{type:"transition",duration:"90 sec",activity:"equipment change"},{type:"run",duration:"15 min",intensity:"easy",description:"Easy finish run"}],purpose:"Develop aerobic fitness with equipment familiarity"},{name:"Long Aerobic Brick",totalDuration:"90-120 minutes",difficulty:"intermediate",runeqRatio:"balanced",structure:[{type:"run",duration:"30 min",intensity:"easy",description:"Extended warm-up"},{type:"transition",duration:"2 min",activity:"hydration + equipment"},{type:"bike",duration:"45 min",intensity:"easy",description:"Sustained aerobic effort"},{type:"transition",duration:"2 min",activity:"hydration + equipment"},{type:"run",duration:"20 min",intensity:"easy",description:"Finish strong"}],purpose:"Extended aerobic development, mental toughness"}],tempo:[{name:"Alternating Tempo Brick",totalDuration:"45-60 minutes",difficulty:"intermediate",runeqRatio:"run-focused",structure:[{type:"run",duration:"15 min",intensity:"easy",description:"Warm-up"},{type:"run",duration:"10 min",intensity:"tempo",description:"Threshold effort"},{type:"transition",duration:"60 sec",activity:"quick change"},{type:"bike",duration:"15 min",intensity:"tempo",description:"Maintain threshold"},{type:"transition",duration:"60 sec",activity:"quick change"},{type:"run",duration:"8 min",intensity:"tempo",description:"Final threshold"},{type:"run",duration:"10 min",intensity:"easy",description:"Cool down"}],purpose:"Lactate threshold development with equipment variety"},{name:"Sandwich Tempo Brick",totalDuration:"50-65 minutes",difficulty:"advanced",runeqRatio:"balanced",structure:[{type:"run",duration:"12 min",intensity:"easy",description:"Warm-up"},{type:"bike",duration:"20 min",intensity:"tempo",description:"Strong tempo effort"},{type:"transition",duration:"90 sec",activity:"equipment change"},{type:"run",duration:"15 min",intensity:"tempo",description:"Run off the bike"},{type:"run",duration:"12 min",intensity:"easy",description:"Cool down"}],purpose:"Practice running after hard bike effort"}],speed:[{name:"Speed Transition Brick",totalDuration:"35-45 minutes",difficulty:"advanced",runeqRatio:"balanced",structure:[{type:"run",duration:"15 min",intensity:"easy",description:"Warm-up with strides"},{type:"intervals",description:"4x (2min run hard + 45sec transition + 2min bike hard + 45sec transition)",recovery:"2 min easy run between sets"},{type:"run",duration:"10 min",intensity:"easy",description:"Cool down"}],purpose:"Speed endurance, equipment mastery"}],recovery:[{name:"Active Recovery Brick",totalDuration:"30-45 minutes",difficulty:"recovery",runeqRatio:"balanced",structure:[{type:"run",duration:"10 min",intensity:"easy",description:"Gentle start"},{type:"transition",duration:"2 min",activity:"relaxed change"},{type:"bike",duration:"15 min",intensity:"recovery",description:"Very easy spinning"},{type:"transition",duration:"2 min",activity:"relaxed change"},{type:"run",duration:"10 min",intensity:"easy",description:"Easy finish"}],purpose:"Active recovery, movement variety"}]}}getBrickWorkoutTypes(){return Object.keys(this.brickWorkouts)}getBrickWorkoutsByType(e){return this.brickWorkouts[e]||[]}generateBrickWorkout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{type:t="aerobic",difficulty:n="intermediate",equipment:r="cyclete"}=e,i=this.brickWorkouts[t]||this.brickWorkouts.aerobic;let o=i;"any"!==n&&(o=i.filter(e=>e.difficulty===n||"any"===e.difficulty),0===o.length&&(o=i));const a=o[Math.floor(Math.random()*o.length)];return this.formatBrickWorkoutForUI(a,r)}formatBrickWorkoutForUI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cyclete";return(0,c.A)((0,c.A)({},e),{},{type:"brick",category:"Brick Workout",runeqFeatures:{equipmentUsed:t,transitionPractice:!0,uniqueFeature:"\ud83e\uddf1 Run+Bike Combination",alternatives:this.getBrickAlternatives(e)},equipmentNotes:this.equipmentTransitions[t]||this.equipmentTransitions.cyclete,safetyNotes:["Practice transitions in training before using in workouts","Stay hydrated during equipment changes","Start with longer transition times, speed up as you improve","Listen to your body - brick workouts are demanding"],paceGuidance:{easy:"Conversational pace, 65-75% max HR",tempo:"Comfortably hard, 85-90% max HR",hard:"Hard effort, 90-95% max HR",recovery:"Very easy, 60-70% max HR"}})}getBrickAlternatives(e){return[{category:"\ud83c\udf21\ufe0f Weather Alternatives",options:[{name:"Hot Weather Adaptation",description:"Extend transition times for hydration and cooling",intensity:e.difficulty},{name:"Cold Weather Adaptation",description:"Minimize transition time to maintain body temperature",intensity:e.difficulty}]},{category:"\u26a1 Equipment Alternatives",options:[{name:"No Bike Available",description:"Replace bike segments with hill running at equivalent effort",intensity:e.difficulty},{name:"No Transitions",description:"Combine segments into continuous workout",intensity:e.difficulty},{name:"Indoor Alternative",description:"Use treadmill incline to simulate bike resistance",intensity:e.difficulty}]},{category:"\u2b07\ufe0f Make It Easier",options:[{name:"Extended Recovery Brick",description:"Longer transition times, lower intensity",intensity:"recovery"},{name:"Single Transition Brick",description:"Just one run\u2192bike or bike\u2192run transition",intensity:"easy"}]},{category:"\u2b06\ufe0f Make It Harder",options:[{name:"Quick Transition Brick",description:"Minimize transition times, race-like pace",intensity:"hard"},{name:"Multi-Transition Brick",description:"Add more run\u2194bike switches throughout workout",intensity:"advanced"}]}]}getRandomBrickWorkout(){const e=this.getBrickWorkoutTypes(),t=e[Math.floor(Math.random()*e.length)];return this.generateBrickWorkout({type:t})}isBrickWorkout(e){var t;return"brick"===(null===e||void 0===e?void 0:e.type)||"Brick Workout"===(null===e||void 0===e?void 0:e.category)||(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes("brick"))}formatBrickStructure(e){return e.map((e,t)=>({step:t+1,type:e.type,duration:e.duration||e.description,intensity:e.intensity||"standard",description:e.description||e.activity,isTransition:"transition"===e.type}))}};const Mp=function(e){var t,n,r;let{isOpen:i,onClose:o,currentWorkout:s,userProfile:l,trainingPlan:u,onWorkoutSelect:d,weather:h=null,mode:p="replace"}=e;const[m,f]=(0,a.useState)(null),[g,y]=(0,a.useState)(null),v=new We.s,w=new Ue.e,b=new Be.c,k=new qe.g,D=new ze,x=new Pp,E=new Dp,S=new Ep,A=new Ap,C=new Tp,T=new Fp,R=(null===u||void 0===u?void 0:u.trainingPaces)||null,F=(null===u||void 0===u?void 0:u.trackIntervals)||null,I=(null===u||void 0===u?void 0:u.currentWeek)||(null===u||void 0===u||null===(t=u.planOverview)||void 0===t?void 0:t.currentWeek)||null,P=(null===u||void 0===u||null===(n=u.planOverview)||void 0===n?void 0:n.totalWeeks)||(null===u||void 0===u||null===(r=u.weeks)||void 0===r?void 0:r.length)||null;if(!i||!s)return null;const M=()=>{const e=[];return e.push({id:"light-easy",title:"\ud83d\ude0c Light & Easy",subtitle:"Gentle movement that won't interfere with recovery",icon:"\ud83c\udf31",workouts:U()}),e.push({id:"active-recovery",title:"\ud83d\udd04 Active Recovery",subtitle:"Movement that actually helps recovery",icon:"\u267b\ufe0f",workouts:q()}),l.standUpBikeType&&e.push({id:"equipment-easy",title:"\ud83d\udeb4\u200d\u2642\ufe0f Easy ".concat((0,Bl.tS)(l.standUpBikeType)),subtitle:"Low-impact equipment workout",icon:"\u26a1",workouts:H()}),e.push({id:"cross-training",title:"\ud83c\udfca\u200d\u2642\ufe0f Cross-Training",subtitle:"Non-running activities for variety",icon:"\ud83c\udfaf",workouts:z()}),e.push({id:"short-sweet",title:"\u23f0 Short & Sweet",subtitle:"15-30 minutes max - just enough to move",icon:"\u26a1",workouts:V()}),e},_=()=>{const e=[],t=(null===l||void 0===l?void 0:l.crossTrainingEquipment)||{},n=Object.values(t).some(Boolean);return e.push({id:"just-rest",title:"\ud83d\udecc Just Rest",subtitle:"Take the day off completely - recovery is training too",icon:"\ud83d\ude34",workouts:[{name:"Complete Rest",description:"No activity today - let your body recover and adapt",duration:"Full day",intensity:"Rest",reason:"prioritize recovery",benefits:"Physical and mental recovery, injury prevention"}]}),t.pool&&e.push({id:"pool-xt",title:"\ud83c\udfca Pool Running",subtitle:"Zero impact, running-specific fitness",icon:"\ud83c\udf0a",workouts:N()}),t.elliptical&&e.push({id:"elliptical-xt",title:"\ud83c\udfc3 Elliptical",subtitle:"Low impact cardio machine",icon:"\u26a1",workouts:O()}),t.stationaryBike&&e.push({id:"stationary-bike-xt",title:"\ud83d\udeb4 Stationary Bike",subtitle:"Spin bike, Peloton, or indoor trainer",icon:"\ud83d\udd25",workouts:j()}),t.swimming&&e.push({id:"swimming-xt",title:"\ud83c\udfca Lap Swimming",subtitle:"Full body, zero impact workout",icon:"\ud83d\udca7",workouts:L()}),t.rowing&&e.push({id:"rowing-xt",title:"\ud83d\udea3 Rowing Machine",subtitle:"Full body power and cardio",icon:"\ud83d\udcaa",workouts:B()}),null!==l&&void 0!==l&&l.standUpBikeType&&e.push({id:"standup-bike-xt",title:"\ud83d\udeb4 ".concat((0,Bl.tS)(l.standUpBikeType)),subtitle:"Running-specific cross-training",icon:"\u26a1",workouts:W()}),n||null!==l&&void 0!==l&&l.standUpBikeType||e.push({id:"light-activity",title:"\ud83d\udeb6 Light Activity",subtitle:"No equipment needed",icon:"\ud83c\udf31",workouts:U()}),e},N=()=>{try{var e,t;const n=[],r=(null===(e=E.getWorkoutsByIntensity)||void 0===e?void 0:e.call(E,"easy"))||[],i=(null===(t=E.getWorkoutsByIntensity)||void 0===t?void 0:t.call(E,"moderate"))||[];return r.slice(0,2).forEach(e=>{n.push({name:e.name,description:e.description||e.structure||"Easy pool running",duration:e.duration||"30-40 minutes",intensity:"Easy",reason:"zero impact recovery",benefits:"Maintains running fitness without impact stress",equipmentType:"pool",sourceWorkout:e})}),i.slice(0,2).forEach(e=>{n.push({name:e.name,description:e.description||e.structure||"Moderate pool running",duration:e.duration||"35-45 minutes",intensity:"Moderate",reason:"aerobic maintenance",benefits:"Running-specific aerobic development",equipmentType:"pool",sourceWorkout:e})}),n.length>0?n:[{name:"Pool Running Session",description:"Deep water running with flotation belt - running motion without impact",duration:"30-45 minutes",intensity:"Easy to Moderate",reason:"zero impact",benefits:"Maintains running-specific fitness",equipmentType:"pool"}]}catch(Av){return[{name:"Pool Running Session",description:"Deep water running with flotation belt",duration:"30-45 minutes",intensity:"Easy to Moderate",reason:"zero impact",benefits:"Maintains running fitness",equipmentType:"pool"}]}},O=()=>{try{var e,t;const n=[],r=(null===(e=S.getWorkoutsByIntensity)||void 0===e?void 0:e.call(S,"easy"))||[],i=(null===(t=S.getWorkoutsByIntensity)||void 0===t?void 0:t.call(S,"moderate"))||[];return r.slice(0,2).forEach(e=>{n.push({name:e.name,description:e.description||e.structure||"Easy elliptical session",duration:e.duration||"30-40 minutes",intensity:"Easy",reason:"low impact cardio",benefits:"Cardio maintenance without joint stress",equipmentType:"elliptical",sourceWorkout:e})}),i.slice(0,2).forEach(e=>{n.push({name:e.name,description:e.description||e.structure||"Moderate elliptical workout",duration:e.duration||"35-45 minutes",intensity:"Moderate",reason:"aerobic development",benefits:"Aerobic fitness with minimal impact",equipmentType:"elliptical",sourceWorkout:e})}),n.length>0?n:[{name:"Elliptical Session",description:"Steady effort on elliptical - similar motion to running",duration:"30-45 minutes",intensity:"Easy to Moderate",reason:"gym alternative",benefits:"Low impact cardio maintenance",equipmentType:"elliptical"}]}catch(Av){return[{name:"Elliptical Session",description:"Steady effort on elliptical",duration:"30-45 minutes",intensity:"Easy to Moderate",reason:"gym alternative",benefits:"Low impact cardio",equipmentType:"elliptical"}]}},j=()=>{try{var e,t;const n=[],r=(null===(e=A.getWorkoutsByIntensity)||void 0===e?void 0:e.call(A,"easy"))||[],i=(null===(t=A.getWorkoutsByIntensity)||void 0===t?void 0:t.call(A,"moderate"))||[];return r.slice(0,2).forEach(e=>{n.push({name:e.name,description:e.description||e.structure||"Easy spin session",duration:e.duration||"30-40 minutes",intensity:"Easy",reason:"active recovery",benefits:"Leg turnover without running impact",equipmentType:"stationaryBike",sourceWorkout:e})}),i.slice(0,2).forEach(e=>{n.push({name:e.name,description:e.description||e.structure||"Moderate bike workout",duration:e.duration||"35-45 minutes",intensity:"Moderate",reason:"aerobic maintenance",benefits:"Aerobic development without impact",equipmentType:"stationaryBike",sourceWorkout:e})}),n.length>0?n:[{name:"Stationary Bike Session",description:"Spin session for aerobic development",duration:"30-45 minutes",intensity:"Easy to Moderate",reason:"cardio alternative",benefits:"Aerobic fitness maintenance",equipmentType:"stationaryBike"}]}catch(Av){return[{name:"Stationary Bike Session",description:"Spin session for aerobic development",duration:"30-45 minutes",intensity:"Easy to Moderate",reason:"cardio alternative",benefits:"Aerobic fitness maintenance",equipmentType:"stationaryBike"}]}},L=()=>{try{var e,t;const n=[],r=(null===(e=C.getWorkoutsByIntensity)||void 0===e?void 0:e.call(C,"easy"))||[],i=(null===(t=C.getWorkoutsByIntensity)||void 0===t?void 0:t.call(C,"moderate"))||[];return r.slice(0,2).forEach(e=>{n.push({name:e.name,description:e.description||e.structure||"Easy lap swimming",duration:e.duration||"30-40 minutes",intensity:"Easy",reason:"full body recovery",benefits:"Complete body workout with zero impact",equipmentType:"swimming",sourceWorkout:e})}),i.slice(0,2).forEach(e=>{n.push({name:e.name,description:e.description||e.structure||"Moderate swimming workout",duration:e.duration||"35-45 minutes",intensity:"Moderate",reason:"aerobic cross-training",benefits:"Full body cardio conditioning",equipmentType:"swimming",sourceWorkout:e})}),n.length>0?n:[{name:"Lap Swimming",description:"Continuous lap swimming for full body conditioning",duration:"30-45 minutes",intensity:"Easy to Moderate",reason:"full body workout",benefits:"Complete body conditioning",equipmentType:"swimming"}]}catch(Av){return[{name:"Lap Swimming",description:"Continuous lap swimming",duration:"30-45 minutes",intensity:"Easy to Moderate",reason:"full body workout",benefits:"Complete body conditioning",equipmentType:"swimming"}]}},B=()=>{try{var e,t;const n=[],r=(null===(e=T.getWorkoutsByIntensity)||void 0===e?void 0:e.call(T,"easy"))||[],i=(null===(t=T.getWorkoutsByIntensity)||void 0===t?void 0:t.call(T,"moderate"))||[];return r.slice(0,2).forEach(e=>{n.push({name:e.name,description:e.description||e.structure||"Easy rowing session",duration:e.duration||"25-35 minutes",intensity:"Easy",reason:"posterior chain focus",benefits:"Posterior chain development without impact",equipmentType:"rowing",sourceWorkout:e})}),i.slice(0,2).forEach(e=>{n.push({name:e.name,description:e.description||e.structure||"Moderate rowing workout",duration:e.duration||"30-40 minutes",intensity:"Moderate",reason:"full body power",benefits:"Full body power and cardio development",equipmentType:"rowing",sourceWorkout:e})}),n.length>0?n:[{name:"Rowing Session",description:"Rowing machine workout for full body conditioning",duration:"25-40 minutes",intensity:"Easy to Moderate",reason:"full body alternative",benefits:"Posterior chain and cardio development",equipmentType:"rowing"}]}catch(Av){return[{name:"Rowing Session",description:"Rowing machine workout",duration:"25-40 minutes",intensity:"Easy to Moderate",reason:"full body alternative",benefits:"Posterior chain and cardio",equipmentType:"rowing"}]}},W=()=>{const e=[],t=D.workoutLibrary.LONG_ENDURANCE_RIDES||[],n=D.workoutLibrary.TEMPO_BIKE||[];return t.slice(0,2).forEach(t=>{e.push((0,c.A)((0,c.A)({},t),{},{type:"bike",library:"bike",equipment:l.standUpBikeType,equipmentSpecific:!0,reason:"running-specific cross-training",benefits:"cyclete"===l.standUpBikeType?"Quad-dominant workout - high running specificity":"Glute + full-body workout - excellent for recovery"}))}),n.length>0&&e.push((0,c.A)((0,c.A)({},n[0]),{},{type:"bike",library:"bike",equipment:l.standUpBikeType,equipmentSpecific:!0,reason:"aerobic development",benefits:"Lactate threshold development without running impact"})),e.length>0?e:[{name:"Easy ".concat((0,Bl.tS)(l.standUpBikeType)," Ride"),description:"Light 30-minute ride at conversational effort",duration:"30 minutes",intensity:"Easy",equipment:(0,Bl.tS)(l.standUpBikeType),reason:"running-specific",benefits:"Aerobic maintenance with running-similar motion"}]},U=()=>[{name:"Easy 20-Minute Jog",description:"Very light conversational pace - just shake out the legs",duration:"20 minutes",intensity:"Very Easy",reason:"feeling energetic",benefits:"Promotes blood flow and maintains routine"},{name:"Walk-Run Intervals",description:"1 min easy jog, 2 min walk - perfect rest day movement",duration:"25-30 minutes",intensity:"Recovery",reason:"want light movement",benefits:"Active recovery without stress"},{name:"Easy Mile",description:"Just one easy mile to keep the legs moving",duration:"8-12 minutes",intensity:"Very Easy",reason:"minimal time commitment",benefits:"Maintains routine without fatigue"}],q=()=>[{name:"Dynamic Stretching Session",description:"20 minutes of movement-based stretches and mobility work",duration:"20 minutes",intensity:"Recovery",reason:"improve flexibility",benefits:"Enhances recovery and prevents injury"},{name:"Yoga Flow",description:"Gentle yoga focused on hip flexibility and core strength",duration:"25-30 minutes",intensity:"Recovery",reason:"mental relaxation",benefits:"Flexibility, balance, and mental clarity"},{name:"Foam Rolling + Light Movement",description:"15 min foam rolling + 10 min easy walking",duration:"25 minutes",intensity:"Recovery",reason:"muscle maintenance",benefits:"Improves tissue quality and circulation"}],H=()=>[{name:"Easy ".concat((0,Bl.tS)(l.standUpBikeType)," Spin"),description:"Light 30-minute ride at conversational effort",duration:"30 minutes",intensity:"Easy",equipment:(0,Bl.tS)(l.standUpBikeType),reason:"low impact variety",benefits:"Aerobic maintenance without running impact"},{name:"Recovery ".concat((0,Bl.tS)(l.standUpBikeType)," Ride"),description:"Very easy 20-minute ride focusing on leg turnover",duration:"20 minutes",intensity:"Recovery",equipment:(0,Bl.tS)(l.standUpBikeType),reason:"active recovery",benefits:"Promotes blood flow and recovery"}],z=()=>{const e=[],t=(null===l||void 0===l?void 0:l.crossTrainingEquipment)||{};return t.pool&&e.push({name:"Pool Running (Easy)",description:"25-30 minutes easy aqua jogging - zero impact recovery",duration:"25-30 minutes",intensity:"Easy",reason:"zero impact, running-specific",benefits:"Running fitness without impact stress"}),t.swimming&&e.push({name:"Swimming (Easy)",description:"20-30 minutes easy swimming - excellent for recovery",duration:"20-30 minutes",intensity:"Easy",reason:"full body, zero impact",benefits:"Complete body workout with minimal stress"}),t.elliptical&&e.push({name:"Elliptical Easy",description:"25 minutes easy effort on elliptical machine",duration:"25 minutes",intensity:"Easy",reason:"low impact cardio",benefits:"Cardio maintenance without impact"}),t.stationaryBike&&e.push({name:"Easy Spin",description:"25-30 minutes easy spinning - legs moving without stress",duration:"25-30 minutes",intensity:"Easy",reason:"active recovery",benefits:"Leg turnover without running impact"}),t.rowing&&e.push({name:"Easy Rowing",description:"20-25 minutes easy rowing - posterior chain focus",duration:"20-25 minutes",intensity:"Easy",reason:"full body, low impact",benefits:"Posterior chain development"}),e.push({name:"Strength Training (Light)",description:"Light strength work focusing on running-specific muscles",duration:"30-40 minutes",intensity:"Light",reason:"strength maintenance",benefits:"Maintains strength without fatigue"}),e},V=()=>[{name:"15-Minute Walk",description:"Brisk walk around the neighborhood - minimal time commitment",duration:"15 minutes",intensity:"Very Easy",reason:"time constraint",benefits:"Mental break and light movement"},{name:"10-Minute Core Work",description:"Quick core strengthening session - runner-specific exercises",duration:"10 minutes",intensity:"Light",reason:"minimal time",benefits:"Core strength for better running"},{name:"5-Minute Stretch",description:"Quick targeted stretching for tight spots",duration:"5 minutes",intensity:"Recovery",reason:"very minimal time",benefits:"Maintains flexibility"}],K=()=>{const e=[],t=(null===l||void 0===l?void 0:l.crossTrainingEquipment)||{},n=s.type;let r="EASY",i="Moderate";"tempo"===n?(r="TEMPO",i="Tempo"):"intervals"===n?(r="INTERVALS",i="Intervals"):"hills"===n?(r="TEMPO",i="Hard"):"longRun"===n?(r="EASY",i="Endurance"):"easy"===n&&(r="EASY",i="Easy");const o=(t,o,a,s)=>{try{const l=t.workoutLibrary||{};let u=l[r]||[];0===u.length&&(u=l.EASY||[]),0===u.length&&(u=l.TEMPO||[]),u.slice(0,2).forEach(t=>{const r=t.structure?(0,He.Y)(t.structure,I,P):t.structure;e.push({name:"".concat(o," ").concat(t.name),description:t.description||r||"".concat(s," workout"),duration:t.duration||"30-45 minutes",intensity:t.intensity||i,reason:"matches ".concat(n," intensity"),benefits:t.benefits||"Same training stimulus without running impact",equipmentType:a,sourceWorkout:(0,c.A)((0,c.A)({},t),{},{structure:r})})})}catch(Av){e.push({name:"".concat(o," ").concat(s," ").concat(i),description:"".concat(i," effort ").concat(s.toLowerCase()," session"),duration:"30-45 minutes",intensity:i,reason:"matches ".concat(n," intensity"),benefits:"Cross-training at equivalent effort",equipmentType:a})}};return t.pool&&o(E,"\ud83c\udfca","pool","Pool Running"),t.elliptical&&o(S,"\ud83c\udfc3","elliptical","Elliptical"),t.stationaryBike&&o(A,"\ud83d\udeb4","stationaryBike","Stationary Bike"),t.swimming&&o(C,"\ud83c\udfca","swimming","Swimming"),t.rowing&&o(T,"\ud83d\udea3","rowing","Rowing"),0===e.length&&(o(E,"\ud83c\udfca","pool","Pool Running"),o(T,"\ud83d\udea3","rowing","Rowing"),o(S,"\ud83c\udfc3","elliptical","Elliptical")),e},Y=(e,t,n)=>{var r;const i=(null===(r={tempo:{TRADITIONAL_TEMPO:"Sustained lactate threshold effort - builds race pace endurance",ALTERNATING_TEMPO:"Varied tempo segments - teaches pace changes and mental toughness",PROGRESSIVE_TEMPO:"Building tempo effort - develops pacing skills and confidence"},interval:{SHORT_SPEED:"Quick speed bursts - develops neuromuscular power and turnover",VO2_MAX:"Hard aerobic intervals - builds maximum oxygen uptake and speed",LONG_INTERVALS:"Extended speed work - race pace practice with recovery"},hill:{short_power:"Power hill repeats - builds leg strength and running power",long_strength:"Endurance hill training - develops climbing stamina and mental toughness",hill_circuits:"Mixed hill workout - combines power, strength, and endurance"},longRun:{TRADITIONAL_EASY:"Steady aerobic run - builds endurance base and fat adaptation",PROGRESSIVE_RUNS:"Building effort long run - develops race-day pacing skills",MIXED_PACE_LONG:"Mixed pace long run - practices energy system transitions"},brick:{aerobic:"Run+bike endurance combo - builds aerobic fitness with variety",tempo:"Run+bike threshold workout - lactate threshold with equipment changes",speed:"Run+bike intervals - develops speed with transition practice",recovery:"Easy run+bike combo - active recovery with movement variety"}}[t])||void 0===r?void 0:r[n])||e.description;return(0,c.A)((0,c.A)({},e),{},{description:i,originalDescription:e.description,category:n,library:t})},G=()=>{var e;const t=[];switch(s.type){case"tempo":["TRADITIONAL_TEMPO","ALTERNATING_TEMPO","PROGRESSIVE_TEMPO"].forEach(e=>{try{var n;const r=v.getRandomWorkout(e);if(r&&r.name!==(null===(n=s.workout)||void 0===n?void 0:n.name)){const n=v.prescribeTempoWorkout(r.name,{runEqPreference:(null===l||void 0===l?void 0:l.runEqPreference)||0,paces:R,weekNumber:I,totalWeeks:P});t.push(Y(n,"tempo",e))}}catch(Av){console.warn("Failed to get tempo workout from ".concat(e,":"),Av.message)}});break;case"intervals":["SHORT_SPEED","VO2_MAX","LONG_INTERVALS"].forEach(e=>{try{var n;const r=w.getRandomWorkout(e);if(r&&r.name!==(null===(n=s.workout)||void 0===n?void 0:n.name)){const n=w.prescribeIntervalWorkout(r.name,{runEqPreference:(null===l||void 0===l?void 0:l.runEqPreference)||0,paces:R,trackIntervals:F});t.push(Y(n,"interval",e))}}catch(Av){console.warn("Failed to get interval workout from ".concat(e,":"),Av.message)}});break;case"hills":["short_power","long_strength","hill_circuits"].forEach(e=>{try{var n;const r=b.getRandomWorkout(e);if(r&&r.name!==(null===(n=s.workout)||void 0===n?void 0:n.name)){const n=b.prescribeHillWorkout(r.name,{runEqPreference:(null===l||void 0===l?void 0:l.runEqPreference)||0,paces:R});t.push(Y(n,"hill",e))}}catch(Av){console.warn("Failed to get hill workout from ".concat(e,":"),Av.message)}});break;case"longRun":const n=ee((null===(e=s.workout)||void 0===e?void 0:e.name)||"")||ee(s.name||"")||8;["TRADITIONAL_EASY","PROGRESSIVE_RUNS","MIXED_PACE_LONG"].forEach(e=>{try{var r;const i=k.getRandomWorkout(e);if(i&&i.name!==(null===(r=s.workout)||void 0===r?void 0:r.name)){const r=k.prescribeLongRunWorkout(i.name,{runEqPreference:(null===l||void 0===l?void 0:l.runEqPreference)||0,distance:n,paces:R});t.push(Y(r,"longRun",e))}}catch(Av){console.warn("Failed to get long run workout from ".concat(e,":"),Av.message)}});break;case"brick":["aerobic","tempo","speed","recovery"].forEach(e=>{var n;const r=x.generateBrickWorkout({type:e,equipment:l.standUpBikeType||"cyclete",difficulty:"intermediate"});r&&r.name!==(null===(n=s.workout)||void 0===n?void 0:n.name)&&t.push(Y(r,"brick",e))});break;default:t.push({name:"Conversational Run",description:"Easy pace, focus on breathing and form",duration:"30-45 minutes",library:"easy"})}return t.slice(0,6)},Q=()=>[{name:"Easy Recovery Run",description:"Very easy pace, active recovery focus",duration:"20-30 minutes",intensity:"Recovery"},{name:"Walk-Run Intervals",description:"2 min run, 1 min walk intervals",duration:"30 minutes",intensity:"Easy"},{name:"Yoga Flow",description:"Active recovery with stretching",duration:"20-30 minutes",intensity:"Recovery"}],X=()=>{const e=[];if("easy"===s.type||"tempo"===s.type){const t=w.getRandomWorkout("SHORT_SPEED");if(t){const n=w.prescribeIntervalWorkout(t.name,{runEqPreference:(null===l||void 0===l?void 0:l.runEqPreference)||0,paces:R,trackIntervals:F});e.push(Y(n,"interval","SHORT_SPEED"))}}if("hills"!==s.type){const t=b.getRandomWorkout("short_power");if(t){const n=b.prescribeHillWorkout(t.name,{runEqPreference:(null===l||void 0===l?void 0:l.runEqPreference)||0,paces:R});e.push(Y(n,"hill","short_power"))}}return e.push({name:"Fartlek Run",description:"Playful speed play - develops speed and mental toughness with varied surges",duration:"30-40 minutes",intensity:"Moderate-Hard"}),e.push({name:"Progressive Run",description:"Building effort run - starts easy, finishes strong, develops pacing control",duration:"35-45 minutes",intensity:"Easy to Hard"}),e.filter(Boolean).slice(0,4)},Z=()=>{const e=[],t=s.type;if("tempo"===t||"intervals"===t){(D.workoutLibrary.TEMPO_BIKE||[]).slice(0,3).forEach(t=>{e.push((0,c.A)((0,c.A)({},t),{},{type:"bike",library:"bike",equipment:l.standUpBikeType,equipmentSpecific:!0}))});(D.workoutLibrary.INTERVAL_BIKE||[]).slice(0,2).forEach(t=>{e.push((0,c.A)((0,c.A)({},t),{},{type:"bike",library:"bike",equipment:l.standUpBikeType,equipmentSpecific:!0}))})}else if("hills"===t){(D.workoutLibrary.POWER_RESISTANCE||[]).slice(0,3).forEach(t=>{e.push((0,c.A)((0,c.A)({},t),{},{type:"bike",library:"bike",equipment:l.standUpBikeType,equipmentSpecific:!0}))})}else if("longRun"===t){(D.workoutLibrary.LONG_ENDURANCE_RIDES||[]).slice(0,3).forEach(t=>{e.push((0,c.A)((0,c.A)({},t),{},{type:"bike",library:"bike",equipment:l.standUpBikeType,equipmentSpecific:!0}))})}else{const t=D.workoutLibrary.LONG_ENDURANCE_RIDES||[],n=D.workoutLibrary.TEMPO_BIKE||[];t.length>0&&e.push((0,c.A)((0,c.A)({},t[0]),{},{type:"bike",library:"bike",equipment:l.standUpBikeType,equipmentSpecific:!0})),n.length>0&&e.push((0,c.A)((0,c.A)({},n[n.length-1]),{},{type:"bike",library:"bike",equipment:l.standUpBikeType,equipmentSpecific:!0}))}return e.slice(0,6)},J=()=>{var e;const t=ee((null===(e=s.workout)||void 0===e?void 0:e.name)||"")||12,n=Math.round(t/3);return[{name:"".concat(n,"-Mile Easy Run"),description:"Equivalent running distance for today's bike workout - same aerobic benefit",duration:"".concat(8*n,"-").concat(10*n," minutes"),intensity:"Easy"},{name:"".concat(Math.max(3,n-2),"-Mile Tempo Run"),description:"Shorter but higher intensity - builds lactate threshold",duration:"".concat(7*Math.max(3,n-2),"-").concat(8*Math.max(3,n-2)," minutes"),intensity:"Moderate-Hard"},{name:"Fartlek Run",description:"Playful speed play - develops speed and mental toughness",duration:"30-40 minutes",intensity:"Variable"},{name:"".concat(Math.max(2,n-1)," Miles Progressive"),description:"Start easy, build to moderate-hard finish",duration:"".concat(7*Math.max(2,n-1),"-").concat(9*Math.max(2,n-1)," minutes"),intensity:"Easy to Moderate-Hard"}]},$=()=>{var e;const t=s.type,n=(null===(e=s.workout)||void 0===e?void 0:e.name)||"Workout",r=[];if("intervals"===t||n.toLowerCase().includes("interval")||n.toLowerCase().includes("speed")||n.toLowerCase().includes("track"))r.push({name:"Treadmill Speed Work",description:"Same intervals on treadmill - 6x800m @ 5K pace (2min rest)",duration:"45-50 minutes",reason:"no track available",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"},{name:"Hill Sprints Alternative",description:"8x30sec uphill @ max effort - builds same speed without track",duration:"35-40 minutes",reason:"no track available",icon:"\ud83c\udfd4\ufe0f"},{name:"Fartlek Speed Session",description:"20min fartlek: fast when you feel it, easy when you need it",duration:"40-45 minutes",reason:"too hot / no track",icon:"\u26a1"},{name:"Shortened Speed Work",description:"4x400m @ 5K pace instead of full session",duration:"30-35 minutes",reason:"time constraint",icon:"\u23f0"});else if("tempo"===t||n.toLowerCase().includes("tempo")||n.toLowerCase().includes("threshold"))r.push({name:"Treadmill Tempo",description:"3 miles @ comfortably hard pace on 1% incline",duration:"35-40 minutes",reason:"too hot / weather",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"},{name:"Cruise Intervals Indoor",description:"3x1 mile @ tempo pace (90sec rest) - easier to pace indoors",duration:"40-45 minutes",reason:"too hot / pacing issues",icon:"\ud83d\udd00"},{name:"Easy Tempo",description:"2 miles @ marathon pace instead of tempo - still builds endurance",duration:"25-30 minutes",reason:"too tired",icon:"\ud83d\ude0c"},{name:"Short Tempo Burst",description:"15min tempo run instead of full session",duration:"25-30 minutes",reason:"time constraint",icon:"\u23f0"});else if("longRun"===t||n.toLowerCase().includes("long")||n.toLowerCase().includes("endurance")){const e=ee(n)||10;r.push({name:"".concat(e," Miles on Treadmill"),description:"Complete long run indoors with A/C and entertainment - same endurance benefit",duration:"".concat(Math.round(8.5*e),"-").concat(Math.round(10*e)," minutes"),reason:"too hot / weather",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"},{name:"Split Long Run",description:"".concat(Math.round(e/2)," miles morning + ").concat(Math.round(e/2)," miles evening"),duration:"Split sessions",reason:"too hot / time constraint",icon:"\ud83d\udd04"},{name:"".concat(Math.round(.75*e)," Mile Moderate"),description:"Shorter distance but at marathon pace for last ".concat(Math.round(.25*e)," miles"),duration:"".concat(Math.round(6.5*e),"-").concat(Math.round(8*e)," minutes"),reason:"time constraint",icon:"\u23f0"},{name:"Easy Long Walk/Run",description:"".concat(e," miles with walk breaks every 2 miles - active recovery style"),duration:"".concat(Math.round(10*e),"-").concat(Math.round(12*e)," minutes"),reason:"too tired",icon:"\ud83d\udeb6\u200d\u2642\ufe0f"})}else"hills"===t||n.toLowerCase().includes("hill")||n.toLowerCase().includes("incline")?r.push({name:"Treadmill Hill Repeats",description:"6x90sec @ 6-8% incline, 5K effort (walk down recovery)",duration:"40-45 minutes",reason:"no hills available",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"},{name:"Parking Garage Hills",description:"8x30sec up parking garage ramps - urban hill alternative",duration:"35-40 minutes",reason:"no hills available",icon:"\ud83c\udfe2"},{name:"Stadium Stairs",description:"6x60sec stadium/building stairs @ hard effort",duration:"30-35 minutes",reason:"no hills available",icon:"\ud83c\udfdf\ufe0f"},{name:"Flat Tempo Instead",description:"20min tempo run - still builds lactate threshold without hills",duration:"35-40 minutes",reason:"no hills / too tired",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"}):("easy"===t||n.toLowerCase().includes("easy")||n.toLowerCase().includes("recovery"))&&r.push({name:"Indoor Easy Run",description:"Same easy pace on treadmill with entertainment",duration:s.duration||"30-40 minutes",reason:"weather",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"},{name:"Easy Walk",description:"Brisk walk for same duration - active recovery",duration:s.duration||"30-40 minutes",reason:"too tired",icon:"\ud83d\udeb6\u200d\u2642\ufe0f"},{name:"Short Easy Run",description:"20min easy jog - better than nothing",duration:"20 minutes",reason:"time constraint",icon:"\u23f0"});return 0===r.length&&r.push({name:"Rest Day",description:"Complete rest - sometimes the best choice for your body",duration:"0 minutes",reason:"too tired / injury risk",icon:"\ud83d\udecc"},{name:"Light Cross Training",description:"20-30min easy bike, elliptical, or swimming",duration:"20-30 minutes",reason:"need something different",icon:"\ud83d\udeb4\u200d\u2642\ufe0f"}),r},ee=e=>{const t=e.match(/(\d+)\s*(mile|miles|mi)/i);return t?parseInt(t[1]):null},te=()=>[{name:"Treadmill Version",description:"Climate-controlled indoor version - same workout, perfect conditions",location:"Indoor"},{name:"Mall/Parking Garage Run",description:"Weather-protected option - stay dry and maintain your schedule",location:"Covered"},{name:"Early Morning Run",description:"Beat the heat/weather - cooler temps and quieter roads",timing:"Pre-dawn"},{name:"Split Session",description:"Break into 2 shorter runs - work around weather windows",timing:"Flexible"}],ne=()=>{var e,t;const n=[],r=ee((null===(e=s.workout)||void 0===e?void 0:e.name)||"")||ee(s.name||"")||0,i=(null===(t=s.workout)||void 0===t?void 0:t.duration)||s.duration||0;let o=[];return o=r<5||"number"===typeof i&&i<30?["recovery"]:r<10||"number"===typeof i&&i<60?["recovery","aerobic"]:["recovery","aerobic","tempo","speed"],o.forEach(e=>{const t=x.generateBrickWorkout({type:e,equipment:l.standUpBikeType||"cyclete",difficulty:"intermediate"}),r=Y(t,"brick",e);n.push((0,c.A)((0,c.A)({},r),{},{type:"brick",library:"brick"}))}),n},re=e=>{return"tempo"===e.library?"Lactate Threshold":"interval"===e.library?"Speed & Power":"hill"===e.library?"Strength & Power":"longRun"===e.library?"Endurance":"bike"===e.library?null!==(t=e.effort)&&void 0!==t&&null!==(n=t.perceived)&&void 0!==n&&n.includes("threshold")||null!==(r=e.name)&&void 0!==r&&r.toLowerCase().includes("tempo")?"Lactate Threshold":null!==(i=e.effort)&&void 0!==i&&null!==(o=i.perceived)&&void 0!==o&&o.includes("hard")||null!==(a=e.name)&&void 0!==a&&a.toLowerCase().includes("interval")?"Speed & Power":null!==(s=e.name)&&void 0!==s&&s.toLowerCase().includes("endurance")||null!==(l=e.name)&&void 0!==l&&l.toLowerCase().includes("long")?"Endurance":"Aerobic Power":"Recovery"===e.intensity?"Recovery":"Easy"===e.intensity?"Aerobic Base":"Training Focus";var t,n,r,i,o,a,s,l},ie=(()=>{const e=[];if("rest"===s.type)return M();if("rest_or_xt"===s.type)return _();e.push({id:"same-intensity",title:"\ud83c\udfc3\u200d\u2642\ufe0f Keep Running - Same Intensity",subtitle:"Alternative ".concat(s.type," workouts"),icon:"\ud83d\udd04",workouts:G()}),e.push({id:"easier",title:"\ud83d\ude0c Make It Easier",subtitle:"Lower intensity alternatives",icon:"\u2b07\ufe0f",workouts:Q()}),e.push({id:"harder",title:"\ud83d\udcaa Make It Harder",subtitle:"Higher intensity challenges",icon:"\u2b06\ufe0f",workouts:X()}),l.standUpBikeType&&("bike"===s.type?e.push({id:"run-instead",title:"\ud83c\udfc3\u200d\u2642\ufe0f Switch to Running",subtitle:"Run instead of bike",icon:"\ud83d\udc5f",workouts:J()}):e.push({id:"equipment",title:"\ud83d\udeb4\u200d\u2642\ufe0f Switch to ".concat((0,Bl.tS)(l.standUpBikeType)),subtitle:"Equipment-specific alternatives",icon:"\u26a1",workouts:Z()})),e.push({id:"contextual",title:"\ud83d\udd04 Quick Adaptations",subtitle:"Situational alternatives for real life",icon:"\ud83d\udee0\ufe0f",workouts:$()}),null!==h&&void 0!==h&&h.isExtreme&&e.push({id:"weather",title:"\ud83c\udf21\ufe0f Weather Alternatives",subtitle:"Safe options for ".concat(h.condition),icon:"\ud83d\udee1\ufe0f",workouts:te()}),l.standUpBikeType&&e.push({id:"brick",title:"\ud83e\uddf1 Brick Workouts",subtitle:"Run + bike combinations",icon:"\ud83d\udd04",workouts:ne()});const t=K();return t.length>0&&e.push({id:"cross-training",title:"\ud83c\udfca Cross-Train Instead",subtitle:"Use your cross-training equipment",icon:"\ud83d\udd04",workouts:t}),e})();return(0,je.jsx)("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,je.jsxs)("div",{className:"modal-content card",style:{width:"90%",maxWidth:"800px",maxHeight:"90vh",overflow:"auto",margin:"var(--space-4)"},children:[(0,je.jsxs)("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-6)"},children:[(0,je.jsxs)("div",{children:[(0,je.jsx)("h2",{style:{margin:0,color:"var(--runeq-primary)"},children:"add"===p?"\u2795 Add Second Workout":"\ud83d\udd04 Life Adaptations"}),(0,je.jsx)("p",{style:{margin:"var(--space-2) 0 0 0",color:"#CCCCCC"},children:"add"===p?(0,je.jsxs)(je.Fragment,{children:["Add a second workout to ",(0,je.jsx)("strong",{children:s.day})]}):(0,je.jsxs)(je.Fragment,{children:["Your plan adapts when life happens \u2022 Scheduled: ",(0,je.jsx)("strong",{children:s.workout.name})," \u2022 ",s.day]})})]}),(0,je.jsx)("button",{onClick:o,className:"btn btn-secondary",style:{minWidth:"auto",padding:"var(--space-2)"},children:"\u2715"})]}),m?(0,je.jsxs)("div",{children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)",marginBottom:"var(--space-4)"},children:[(0,je.jsx)("button",{onClick:()=>f(null),className:"btn btn-secondary",children:"\u2190 Back"}),(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{margin:0,color:"#FFFFFF"},children:m.title}),(0,je.jsx)("p",{style:{margin:0,color:"#CCCCCC",fontSize:"0.9rem"},children:m.subtitle})]})]}),(0,je.jsx)("div",{className:"card-grid",children:m.workouts.map((e,t)=>(0,je.jsxs)("div",{className:"card card-interactive ".concat(g===e?"selected":""),onClick:()=>(e=>{y(e)})(e),style:{cursor:"pointer",background:g===e?"linear-gradient(135deg, rgba(0, 212, 255, 0.3) 0%, rgba(0, 255, 136, 0.2) 100%)":"linear-gradient(135deg, rgba(0, 212, 255, 0.12) 0%, rgba(0, 255, 136, 0.08) 100%)",border:g===e?"2px solid rgba(0, 212, 255, 0.8)":"2px solid rgba(0, 212, 255, 0.3)",transition:"all 0.3s ease"},onMouseEnter:t=>{g!==e&&(t.currentTarget.style.background="linear-gradient(135deg, rgba(0, 212, 255, 0.2) 0%, rgba(0, 255, 136, 0.15) 100%)",t.currentTarget.style.border="2px solid rgba(0, 212, 255, 0.5)",t.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:t=>{g!==e&&(t.currentTarget.style.background="linear-gradient(135deg, rgba(0, 212, 255, 0.12) 0%, rgba(0, 255, 136, 0.08) 100%)",t.currentTarget.style.border="2px solid rgba(0, 212, 255, 0.3)",t.currentTarget.style.transform="translateY(0)")},children:[(0,je.jsx)("h4",{style:{margin:"0 0 var(--space-2) 0",color:"#FFFFFF",fontSize:"1.05rem"},children:e.name}),(0,je.jsx)("p",{style:{margin:"0 0 var(--space-3) 0",fontSize:"0.9rem",color:"#CCCCCC"},children:"string"===typeof e.description?e.description:"object"===typeof e.description?JSON.stringify(e.description):"Workout description"}),(0,je.jsxs)("div",{style:{display:"flex",gap:"var(--space-2)",flexWrap:"wrap"},children:[e.duration&&(0,je.jsx)("div",{className:"badge badge-info",children:"string"===typeof e.duration?e.duration:"object"===typeof e.duration?JSON.stringify(e.duration):"Duration"}),e.intensity&&(0,je.jsx)("div",{className:"badge badge-warning",children:"string"===typeof e.intensity?e.intensity:"object"===typeof e.intensity?JSON.stringify(e.intensity):"Intensity"}),e.equipment&&(0,je.jsx)("div",{className:"badge badge-success",children:(0,Bl.tS)(e.equipment)}),e.location&&(0,je.jsx)("div",{className:"badge badge-info",children:e.location})]})]},t))}),g&&(0,je.jsxs)("div",{style:{marginTop:"var(--space-6)",padding:"var(--space-4)",background:"var(--gray-50)",borderRadius:"var(--radius-lg)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,je.jsxs)("div",{children:[(0,je.jsxs)("p",{style:{margin:0,fontWeight:600},children:["add"===p?"Add: ":"Replace with: ",(0,je.jsx)("strong",{children:g.name})]}),(0,je.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"0.9rem",color:"var(--gray-600)"},children:"add"===p?"This will add a second workout to ".concat(s.day," for a two-a-day training session."):"This will update your ".concat(s.day," workout and maintain your training load.")})]}),(0,je.jsx)("button",{onClick:()=>{if(g){const e=(0,c.A)((0,c.A)({},s),{},{workout:(0,c.A)((0,c.A)({},g),{},{name:g.name,description:g.description,duration:g.duration||g.repetitions||"Variable"}),type:g.library||g.type||s.type,focus:re(g),equipmentSpecific:g.equipmentSpecific||!!g.equipment,workoutDetails:g,replacementReason:null===m||void 0===m?void 0:m.title});d(e),o()}},className:"btn btn-primary",children:"add"===p?"\u2795 Add Workout":"\ud83d\udd04 Replace Workout"})]})]}):(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{marginBottom:"var(--space-4)",color:"#FFFFFF"},children:"Choose Your Adventure"}),(0,je.jsx)("div",{className:"card-grid",children:ie.map(e=>(0,je.jsxs)("div",{className:"card card-interactive",onClick:()=>(e=>{f(e),y(null)})(e),style:{textAlign:"center",cursor:"pointer",background:"linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(0, 255, 136, 0.1) 100%)",border:"2px solid rgba(0, 212, 255, 0.4)",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, rgba(0, 212, 255, 0.25) 0%, rgba(0, 255, 136, 0.2) 100%)",e.currentTarget.style.border="2px solid rgba(0, 212, 255, 0.6)",e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(0, 255, 136, 0.1) 100%)",e.currentTarget.style.border="2px solid rgba(0, 212, 255, 0.4)",e.currentTarget.style.transform="translateY(0)"},children:[(0,je.jsx)("div",{style:{fontSize:"2.5rem",marginBottom:"var(--space-2)"},children:e.icon}),(0,je.jsx)("h4",{style:{margin:"0 0 var(--space-2) 0",color:"#FFFFFF",fontSize:"1.1rem"},children:e.title}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#CCCCCC"},children:e.subtitle}),(0,je.jsxs)("div",{className:"badge",style:{marginTop:"var(--space-3)",background:"rgba(0, 255, 136, 0.2)",color:"#00FF88",border:"1px solid rgba(0, 255, 136, 0.4)",fontWeight:"600"},children:[e.workouts.length," options"]})]},e.id))})]})]})})};const _p=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];const Np=function(e){var t;let{isOpen:n,onClose:r,userProfile:i,trainingPlan:o,currentWeek:s}=e;const l=Hl(),[u,d]=(0,a.useState)(5),[h,p]=(0,a.useState)([]),[m,f]=(0,a.useState)([]),[g,y]=(0,a.useState)("Saturday"),[v,w]=(0,a.useState)([]),[b,k]=(0,a.useState)(!1),[D,x]=(0,a.useState)(null),[E,S]=(0,a.useState)(null);if((0,a.useEffect)(()=>{h.length>0&&!h.includes(g)?y(h[0]):0===h.length&&g&&y("Sunday")},[h,g]),(0,a.useEffect)(()=>{if(n&&Pe.j2.currentUser){const e=async()=>{try{Oe.A.log("\u2699\ufe0f ManagePlanModal: Loading fresh data from Firestore...");const e=await Ne.getUserData(Pe.j2.currentUser.uid);if(Oe.A.log("  userData:",e),Oe.A.log("  userData.data keys:",null!==e&&void 0!==e&&e.data?Object.keys(e.data):"no data"),null!==e&&void 0!==e&&e.success&&null!==e&&void 0!==e&&e.data){const t=e.data.profile,n=e.data.trainingPlan;Oe.A.log("  Profile keys:",t?Object.keys(t):"no profile"),Oe.A.log("  Plan keys:",n?Object.keys(n):"no plan"),Oe.A.log("  Plan overview:",null===n||void 0===n?void 0:n.planOverview);const r=t||{};Oe.A.log("  Loading settings:"),Oe.A.log("    workoutsPerWeek:",r.workoutsPerWeek||r.runsPerWeek),Oe.A.log("    availableDays:",r.availableDays),Oe.A.log("    hardSessionDays:",r.hardSessionDays),Oe.A.log("    longRunDay:",r.longRunDay),Oe.A.log("    preferredBikeDays:",r.preferredBikeDays);const i=r.availableDays||[],o=r.longRunDay||"Sunday";d(r.workoutsPerWeek||r.runsPerWeek||5),p(i),f(r.hardSessionDays||[]),y(i.includes(o)?o:i.length>0?i[0]:"Sunday"),w(r.preferredBikeDays||[]),S(null),Oe.A.log("  \u2705 Settings loaded successfully")}}catch(e){Oe.A.error("\u274c Error loading settings:",e),S("Failed to load current settings. Please try again.")}};e()}},[n]),!n)return null;const A=(null===o||void 0===o||null===(t=o.planOverview)||void 0===t?void 0:t.raceDistance)||"Half",C={"5K":[3,4,5,6],"10K":[3,4,5,6],Half:[4,5,6,7],Marathon:[4,5,6,7]}[A]||[4,5,6];return(0,je.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4,padding:"20px"},onClick:e=>{e.target===e.currentTarget&&r()},children:(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%)",border:"1px solid #333",borderRadius:"12px",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",padding:"24px",position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,je.jsx)("style",{children:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        "}),(0,je.jsxs)("div",{style:{borderBottom:"1px solid #333",paddingBottom:"16px",marginBottom:"24px"},children:[(0,je.jsx)("h2",{style:{margin:0,fontSize:"1.5rem",color:"#fff",display:"flex",alignItems:"center",gap:"8px"},children:"\u2699\ufe0f Manage Plan"}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.9rem",color:"#999"},children:"Adjust your training schedule. Your completed weeks will be preserved."})]}),(0,je.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"Workouts per week"}),(0,je.jsx)("div",{style:{display:"flex",gap:"8px"},children:[3,4,5,6].map(e=>{const t=C.includes(e);return(0,je.jsx)("button",{onClick:()=>t&&d(e),disabled:!t,title:t?"":"".concat(e," days not supported for ").concat(A," training"),style:{flex:1,padding:"12px",fontSize:"1rem",fontWeight:"500",border:u===e?"2px solid #3b82f6":"1px solid #333",background:t?u===e?"rgba(59, 130, 246, 0.1)":"#1a1a1a":"#0a0a0a",color:t?u===e?"#3b82f6":"#999":"#444",borderRadius:"6px",cursor:t?"pointer":"not-allowed",opacity:t?1:.4},children:e},e)})}),!C.includes(3)&&(0,je.jsxs)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#666"},children:[A," training requires minimum 4 workouts per week"]})]}),(0,je.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"Training days"}),(0,je.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:_p.map(e=>(0,je.jsxs)("button",{onClick:()=>(e=>{if(h.includes(e)){const t=h.filter(t=>t!==e);p(t),m.includes(e)&&f(m.filter(t=>t!==e)),v.includes(e)&&w(v.filter(t=>t!==e)),g===e&&t.length>0?y(t[0]):0===t.length&&y("Sunday")}else{const t=[...h,e].sort((e,t)=>_p.indexOf(e)-_p.indexOf(t));p(t),!t.includes(g)&&t.length>0&&y(t[0])}})(e),style:{padding:"10px",fontSize:"0.9rem",border:h.includes(e)?"2px solid #22c55e":"1px solid #333",background:h.includes(e)?"rgba(34, 197, 94, 0.1)":"#1a1a1a",color:h.includes(e)?"#22c55e":"#999",borderRadius:"6px",cursor:"pointer"},children:[h.includes(e)?"\u2713 ":"",e.substring(0,3)]},e))}),(0,je.jsxs)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#666"},children:["Selected: ",h.length," days"]})]}),(0,je.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"Hard workout days"}),(0,je.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:h.filter(e=>e!==g).map(e=>(0,je.jsxs)("button",{onClick:()=>(e=>{h.includes(e)&&(m.includes(e)?f(m.filter(t=>t!==e)):f([...m,e]))})(e),style:{padding:"10px",fontSize:"0.9rem",border:m.includes(e)?"2px solid #f97316":"1px solid #333",background:m.includes(e)?"rgba(249, 115, 22, 0.1)":"#1a1a1a",color:m.includes(e)?"#f97316":"#999",borderRadius:"6px",cursor:"pointer"},children:[m.includes(e)?"\u26a1 ":"",e.substring(0,3)]},e))}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#666"},children:"Tempo runs, intervals, or hill workouts"})]}),(0,je.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"Long run day"}),(0,je.jsx)("select",{value:h.includes(g)?g:h.length>0?h[0]:"Sunday",onChange:e=>y(e.target.value),style:{width:"100%",padding:"12px",fontSize:"0.9rem",background:"#1a1a1a",color:"#fff",border:"1px solid #333",borderRadius:"6px",cursor:"pointer"},children:h.length>0?h.map(e=>(0,je.jsx)("option",{value:e,children:e},e)):(0,je.jsx)("option",{value:"Sunday",children:"Select training days first"})})]}),(null===i||void 0===i?void 0:i.standUpBikeType)&&(0,je.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,je.jsxs)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:["cyclete"===i.standUpBikeType?"Cyclete":"ElliptiGO"," days (optional)"]}),(0,je.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:h.map(e=>(0,je.jsxs)("button",{onClick:()=>(e=>{h.includes(e)&&(v.includes(e)?w(v.filter(t=>t!==e)):w([...v,e]))})(e),style:{padding:"10px",fontSize:"0.9rem",border:v.includes(e)?"2px solid #8b5cf6":"1px solid #333",background:v.includes(e)?"rgba(139, 92, 246, 0.1)":"#1a1a1a",color:v.includes(e)?"#8b5cf6":"#999",borderRadius:"6px",cursor:"pointer"},children:[v.includes(e)?"\ud83d\udeb4 ":"",e.substring(0,3)]},e))}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#666"},children:"Cross-training alternative to running"})]}),E&&!b&&(0,je.jsxs)("div",{style:{marginTop:"24px",padding:"16px",background:"rgba(239, 68, 68, 0.15)",border:"2px solid rgba(239, 68, 68, 0.5)",borderRadius:"12px",color:"#fca5a5"},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.2rem"},children:"\u26a0\ufe0f"}),(0,je.jsx)("strong",{style:{color:"#ef4444"},children:"Error"})]}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#fca5a5"},children:E})]}),b&&D&&(0,je.jsxs)("div",{style:{marginTop:"24px",padding:"20px",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(37, 99, 235, 0.1) 100%)",border:"2px solid rgba(59, 130, 246, 0.3)",borderRadius:"12px",textAlign:"center"},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",marginBottom:"12px"},children:[(0,je.jsx)("div",{style:{width:"24px",height:"24px",border:"3px solid rgba(59, 130, 246, 0.3)",borderTop:"3px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),(0,je.jsxs)("h3",{style:{margin:0,fontSize:"1.1rem",color:"#60a5fa",fontWeight:"600"},children:["regenerating"===D&&"\ud83e\udd16 AI Coach is regenerating your plan...","analyzing"===D&&"\ud83d\udca1 AI Coach is analyzing your adjustments...","saving"===D&&"\ud83d\udcbe Saving your updated plan..."]})]}),(0,je.jsxs)("p",{style:{margin:"8px 0 0 0",fontSize:"0.9rem",color:"#93c5fd",lineHeight:"1.5"},children:["regenerating"===D&&"Jason is restructuring your training plan based on your new preferences. Your completed workouts are being preserved.","analyzing"===D&&"Jason is reviewing your changes and preparing personalized coaching insights for your plan adjustments.","saving"===D&&"Almost done! Your updated plan is being saved..."]})]}),(0,je.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"32px",paddingTop:"24px",borderTop:"1px solid #333"},children:[(0,je.jsx)("button",{onClick:r,disabled:b,style:{flex:1,padding:"14px",fontSize:"1rem",fontWeight:"500",background:"#1a1a1a",color:"#999",border:"1px solid #333",borderRadius:"8px",cursor:b?"not-allowed":"pointer",opacity:b?.5:1},children:"Cancel"}),(0,je.jsx)("button",{onClick:async()=>{try{var e;if(S(null),!h||0===h.length)return S("Please select at least one training day."),void l.error("Please select at least one training day.");if(h.length!==u)return S("You selected ".concat(h.length," days but chose ").concat(u," workouts per week. Please match them.")),void l.error("You selected ".concat(h.length," days but chose ").concat(u," workouts per week."));if(!h.includes(g))return S("Long run day (".concat(g,") must be one of your selected training days.")),void l.error("Long run day must be one of your selected training days.");const n=m.filter(e=>h.includes(e)),r=v.filter(e=>h.includes(e));k(!0),x("regenerating"),Oe.A.log("\u2699\ufe0f Updating training plan..."),Oe.A.log("  Current week:",s),Oe.A.log("  New settings:",{workoutsPerWeek:u,trainingDays:h,hardDays:n,longRunDay:g,bikeDays:r});let a=i.units;!a&&null!==o&&void 0!==o&&null!==(e=o.planOverview)&&void 0!==e&&e.units&&(a=o.planOverview.units,Oe.A.log("\ud83d\udccf Units not in profile, using from training plan:",a)),a||(a="imperial",Oe.A.log("\ud83d\udccf Units not found in profile or plan, defaulting to imperial (legacy data - this is normal)"));const d=(0,c.A)((0,c.A)({},i),{},{units:a,workoutsPerWeek:u,runsPerWeek:u,availableDays:h,hardSessionDays:n,longRunDay:g,preferredBikeDays:r});Oe.A.log("  \ud83e\udd16 Using AI to regenerate plan structure...");const p=await _t.regeneratePlanStructureFromCurrentWeek(o,d,s);if(!p.success||!p.newWeeks)throw new Error(p.error||"Failed to regenerate plan with AI");Oe.A.log("  \u2705 AI plan structure regenerated");const f=function(e,t,n){Oe.A.log("\ud83d\udd27 Preserving completed weeks and merging...");const r=(null===e||void 0===e?void 0:e.weeks)||(null===e||void 0===e?void 0:e.weeklyPlans);if(!r)throw new Error("Training plan structure is invalid - missing weeks array");const i=r.slice(0,n-1);Oe.A.log("  Preserved",i.length,"completed weeks"),Oe.A.log("  Merging",t.length,"new weeks from week",n);const o=[...i,...t];return Oe.A.log("  \u2705 Weeks merged successfully"),Oe.A.log("    Total weeks:",o.length),Oe.A.log("    Completed weeks:",i.length),Oe.A.log("    New weeks:",t.length),o}(o,p.newWeeks,s),y=(0,c.A)((0,c.A)({},o),{},{weeks:f,planOverview:(0,c.A)((0,c.A)({},o.planOverview),{},{workoutsPerWeek:d.workoutsPerWeek||d.runsPerWeek,runsPerWeek:d.workoutsPerWeek||d.runsPerWeek})});Oe.A.log("  \u2705 Plan regenerated successfully (AI + utility merge)"),x("analyzing"),Oe.A.log("  \ud83e\udd16 Generating AI coaching analysis...");try{const e={workoutsPerWeek:i.workoutsPerWeek||i.runsPerWeek,runsPerWeek:i.workoutsPerWeek||i.runsPerWeek,availableDays:i.availableDays||[],hardSessionDays:i.hardSessionDays||[],longRunDay:i.longRunDay,preferredBikeDays:i.preferredBikeDays||[]},t={oldSettings:e,newSettings:{workoutsPerWeek:u,runsPerWeek:u,availableDays:h,hardSessionDays:n,longRunDay:g,preferredBikeDays:r},currentWeek:s},a=await _t.generatePlanAdjustmentCoaching(t,i,o);y.planAdjustmentCoaching=a,Oe.A.log("  \u2705 AI coaching analysis generated")}catch(t){Oe.A.error("  \u26a0\ufe0f Could not generate AI coaching (non-critical):",t)}x("saving"),await Ne.saveTrainingPlan(Pe.j2.currentUser.uid,y),await Ne.saveUserProfile(Pe.j2.currentUser.uid,d),Oe.A.log("  \u2705 Saved to Firestore"),l.success("Plan updated successfully! Your AI coach has regenerated your training plan."),setTimeout(()=>{window.location.reload()},1e3)}catch(t){Oe.A.error("\u274c Error updating plan:",t);const e=t.message||"Failed to update plan. Please try again.";S(e),l.error(e),k(!1),x(null)}},disabled:b,style:{flex:1,padding:"14px",fontSize:"1rem",fontWeight:"500",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#fff",border:"none",borderRadius:"8px",cursor:b?"not-allowed":"pointer",opacity:b?.7:1,position:"relative",overflow:"hidden"},children:b?(0,je.jsxs)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[(0,je.jsx)("span",{style:{width:"16px",height:"16px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 0.8s linear infinite",display:"inline-block"}}),"regenerating"===D&&"Regenerating Plan...","analyzing"===D&&"Coach Analyzing...","saving"===D&&"Saving..."]}):"Update Plan"})]})]})})};const Op=class{constructor(){this.aquaRunningLibrary=new xp,this.ellipticalLibrary=new Sp,this.stationaryBikeLibrary=new Cp,this.swimmingLibrary=new Rp,this.rowingLibrary=new Ip,this.standUpBikeLibrary=new ze}async regeneratePlanWithInjury(e,t,r,i,o,a){var s,l,u,d,h,p,m,f,g,y,v,w,b,k,D,x,E,S,A,C,T,R,F,I,P,M,_,N;Oe.A.log("\ud83c\udfe5 Generating injury recovery plan..."),Oe.A.log("  Current week:",r),Oe.A.log("  Weeks off running:",i),Oe.A.log("  Selected equipment:",o),Oe.A.log("  Reduce training days:",a);const O=(null===e||void 0===e?void 0:e.weeklyPlans)||(null===e||void 0===e?void 0:e.weeks);var j,L;if(!O||0===O.length)throw Oe.A.error("  \u274c Training plan structure is invalid - missing or empty weeklyPlans/weeks array"),Oe.A.error("    Plan keys:",Object.keys(e||{})),Oe.A.error("    Has weeklyPlans:",!(null===e||void 0===e||!e.weeklyPlans)),Oe.A.error("    Has weeks:",!(null===e||void 0===e||!e.weeks)),Oe.A.error("    weeklyPlans length:",(null===e||void 0===e||null===(j=e.weeklyPlans)||void 0===j?void 0:j.length)||0),Oe.A.error("    weeks length:",(null===e||void 0===e||null===(L=e.weeks)||void 0===L?void 0:L.length)||0),new Error("Training plan structure is invalid - missing or empty weeklyPlans/weeks array. Cannot create injury recovery plan without existing plan structure.");Oe.A.log("  \ud83d\udccb Plan structure validated:",{totalWeeks:O.length,currentWeek:r,weeksToModify:O.length-(r-1)});const B=O.slice(0,r-1);Oe.A.log("  Preserved",B.length,"completed weeks"),Oe.A.log("  \ud83d\udccb Original plan structure from Firestore:",{totalWeeks:O.length,weeksWithWorkouts:O.filter(e=>e&&e.workouts&&e.workouts.length>0).length,week1HasWorkouts:!(null===(s=O[0])||void 0===s||null===(l=s.workouts)||void 0===l||!l.length),week2HasWorkouts:!(null===(u=O[1])||void 0===u||null===(d=u.workouts)||void 0===d||!d.length),week3HasWorkouts:!(null===(h=O[2])||void 0===h||null===(p=h.workouts)||void 0===p||!p.length),week1WorkoutCount:(null===(m=O[0])||void 0===m||null===(f=m.workouts)||void 0===f?void 0:f.length)||0,week2WorkoutCount:(null===(g=O[1])||void 0===g||null===(y=g.workouts)||void 0===y?void 0:y.length)||0,week3WorkoutCount:(null===(v=O[2])||void 0===v||null===(w=v.workouts)||void 0===w?void 0:w.length)||0,week1IsNull:null===O[0]||void 0===O[0]});const W=[];if(o.pool&&W.push({type:"pool",library:this.aquaRunningLibrary}),o.elliptical&&W.push({type:"elliptical",library:this.ellipticalLibrary}),o.stationaryBike&&W.push({type:"stationaryBike",library:this.stationaryBikeLibrary}),o.swimming&&W.push({type:"swimming",library:this.swimmingLibrary}),o.rowing&&W.push({type:"rowing",library:this.rowingLibrary}),o.standUpBike){const e=t.standUpBikeType||"standUpBike";Oe.A.log("  \ud83d\udeb4 Stand-up bike type from profile:",t.standUpBikeType,"\u2192 using:",e),W.push({type:e,library:this.standUpBikeLibrary})}Oe.A.log("  Available cross-training options:",W.length);const U=r,q=r+i-1,H=r+i;Oe.A.log("  Injury weeks:",U,"-",q),Oe.A.log("  Return to running week:",H);const z=[],V=O.slice(r-1);Oe.A.log("  \ud83d\udccb Weeks to process:",{startIndex:r-1,count:V.length,firstWeekHasWorkouts:!(null===(b=V[0])||void 0===b||null===(k=b.workouts)||void 0===k||!k.length),firstWeekWorkoutCount:(null===(D=V[0])||void 0===D||null===(x=D.workouts)||void 0===x?void 0:x.length)||0,firstWeekIsNull:null===V[0]||void 0===V[0]});for(let c=0;c<V.length;c++){var K,Y,G,Q;let e=V[c];const i=r+c;Oe.A.log("  \ud83d\udd0d Processing week ".concat(i,":"),{isNull:null===e||void 0===e,hasWorkouts:!(null===(K=e)||void 0===K||null===(Y=K.workouts)||void 0===Y||!Y.length),workoutCount:(null===(G=e)||void 0===G||null===(Q=G.workouts)||void 0===Q?void 0:Q.length)||0,weekKeys:e?Object.keys(e):[]});const o=i>=U&&i<=q,s=i===H;if(!o&&!s||e&&e.workouts&&0!==e.workouts.length){if(!e||!e.workouts||0===e.workouts.length){Oe.A.warn("  \u26a0\ufe0f Week ".concat(i," (post-recovery) is null - preserving null structure to avoid overwriting plan")),z.push(e);continue}}else{Oe.A.warn("  \u26a0\ufe0f Week ".concat(i," (injury/return week) is null or has no workouts - generating workouts on the fly"));const{generateWeekWorkouts:r}=await Promise.resolve().then(n.bind(n,887)),o=r(i,t);e={week:i,weekDates:{displayText:"Week ".concat(i)},phase:"base",totalMileage:o.reduce((e,t)=>{var n,r,i,o;return e+((null===(n=t.workout)||void 0===n?void 0:n.distance)||parseFloat(null===(r=t.workout)||void 0===r||null===(i=r.name)||void 0===i||null===(o=i.match(/(\d+(?:\.\d+)?)\s*(?:mile|miles|mi)/i))||void 0===o?void 0:o[1])||0)},0),workouts:o},Oe.A.log("  \u2705 Generated ".concat(o.length," workouts for week ").concat(i))}o?(Oe.A.log("  Week ".concat(i,": Cross-training only (").concat(e.workouts.length," workouts to replace)")),z.push(this.createCrossTrainingWeek(e,W,a))):s?(Oe.A.log("  Week ".concat(i,": Return to running transition (").concat(e.workouts.length," workouts)")),z.push(this.createReturnToRunningWeek(e,W,a))):(Oe.A.log("  Week ".concat(i,": Regular training (full volume restored)")),z.push(e))}if(z.filter((e,t)=>{const n=r+t;return n>=U&&n<=H&&(!e||!e.workouts||0===e.workouts.length)}).length>0)throw Oe.A.error("  \u274c Some required injury weeks are still invalid after generation"),new Error("Failed to generate workouts for required injury weeks. Please try again or contact support.");const X=z.filter(e=>e&&e.workouts&&e.workouts.length>0);Oe.A.log("  \u2705 Successfully processed ".concat(X.length," weeks"));const Z=z.map((e,t)=>{const n=r+t;if(n>H&&(!e||!e.workouts||0===e.workouts.length)){const e=O[r-1+t];if(e&&e.workouts&&e.workouts.length>0)return Oe.A.log("  \ud83d\udd04 Restoring week ".concat(n," from original plan to preserve progressive distances")),e;throw Oe.A.error("  \u274c Week ".concat(n," is null in both modified and original plan - plan is corrupted")),new Error("Cannot create injury recovery plan: Week ".concat(n,' is null in your training plan. Please regenerate your plan first using "Manage Plan" before creating an injury recovery protocol.'))}return e}),J=[...B,...Z],$=J.filter(e=>null===e||void 0===e||!e.workouts||0===e.workouts.length);if($.length>0)throw Oe.A.error("  \u274c CRITICAL: Final plan has ".concat($.length," null/invalid weeks!")),new Error("Cannot save injury recovery plan: ".concat($.length," weeks are null or invalid. Please regenerate your plan first."));Oe.A.log("  \u2705 Injury recovery plan generated successfully"),Oe.A.log("    Total weeks:",J.length),Oe.A.log("    Completed weeks:",B.length),Oe.A.log("    Modified weeks:",z.length),Oe.A.log("  \ud83d\udccb Merged plan structure:",{totalWeeks:J.length,weeksWithWorkouts:J.filter(e=>e&&e.workouts&&e.workouts.length>0).length,week1HasWorkouts:!(null===(E=J[0])||void 0===E||null===(S=E.workouts)||void 0===S||!S.length),week2HasWorkouts:!(null===(A=J[1])||void 0===A||null===(C=A.workouts)||void 0===C||!C.length),week3HasWorkouts:!(null===(T=J[2])||void 0===T||null===(R=T.workouts)||void 0===R||!R.length),week1WorkoutCount:(null===(F=J[0])||void 0===F||null===(I=F.workouts)||void 0===I?void 0:I.length)||0,week2WorkoutCount:(null===(P=J[1])||void 0===P||null===(M=P.workouts)||void 0===M?void 0:M.length)||0,week3WorkoutCount:(null===(_=J[2])||void 0===_||null===(N=_.workouts)||void 0===N?void 0:N.length)||0,nullWeeks:J.filter(e=>null===e||void 0===e).length});const ee={weeks:O,planOverview:e.planOverview};return(0,c.A)((0,c.A)({},e),{},{weeks:J,injuryRecoveryActive:!0,injuryRecoveryInfo:{startWeek:U,endWeek:q,returnWeek:H,selectedEquipment:o,weeksOffRunning:i,reduceTrainingDays:a},originalPlanBeforeInjury:ee})}createCrossTrainingWeek(e,t,n){if(!e)throw Oe.A.error("  \u274c createCrossTrainingWeek: originalWeek is null"),new Error("Cannot create cross-training week - original week is null");if(!e.workouts)throw Oe.A.error("  \u274c createCrossTrainingWeek: originalWeek.workouts is null/undefined"),Oe.A.error("    Week structure:",Object.keys(e)),new Error("Cannot create cross-training week - original week has no workouts array");const r=e.workouts||[],i=r.filter(e=>"rest"!==e.type&&"REST"!==e.type);Oe.A.log("  createCrossTrainingWeek: Total days: ".concat(r.length,", Actual workouts: ").concat(i.length,", Reduce by: ").concat(n));const o=Math.max(1,i.length-n);Oe.A.log("  Target workout count: ".concat(o));const a=["long","LONG","longRun","tempo","TEMPO","intervals","INTERVALS","hills","HILLS","easy","EASY","recovery","RECOVERY"],s=[...i].sort((e,t)=>{const n=a.indexOf(e.type),r=a.indexOf(t.type);return(-1===n?999:n)-(-1===r?999:r)}).slice(0,o);Oe.A.log("  Workouts to use:",s.map(e=>"".concat(e.day," ").concat(e.type)));const l=new Map;s.forEach((e,t)=>{l.set(e.day,{originalWorkout:e,index:t})});const u=s.length,d=t.length,h=Math.floor(u/d),p=u%d;Oe.A.log("  Equipment distribution: ".concat(u," workouts across ").concat(d," types")),Oe.A.log("    Base per equipment: ".concat(h,", Extra workouts to distribute: ").concat(p));const m=[];for(let c=0;c<d;c++){const e=h+(c<p?1:0);for(let t=0;t<e;t++)m.push(c)}Oe.A.log("    Equipment assignments:",m);const f=r.map(e=>{if("rest"===e.type||"REST"===e.type)return{day:e.day,date:e.date,fullDate:e.fullDate,dateString:e.dateString,type:"rest",name:"Rest Day",description:"Recovery day - focus on healing"};if(!l.has(e.day))return{day:e.day,date:e.date,fullDate:e.fullDate,dateString:e.dateString,type:"rest",name:"Rest Day",description:"Recovery day - focus on healing"};const{originalWorkout:n,index:r}=l.get(e.day),i=m[r],{type:o,library:a}=t[i];let s="EASY";"tempo"===n.type||"TEMPO"===n.type?s="TEMPO":"intervals"===n.type||"INTERVALS"===n.type?s="INTERVALS":"long"===n.type||"LONG"===n.type||"longRun"===n.type?s="LONG":"hills"===n.type||"HILLS"===n.type?s="HILLS":"recovery"!==n.type&&"RECOVERY"!==n.type||(s="RECOVERY");const c={rowing:{HILLS:"INTERVALS"},swimming:{HILLS:"INTERVALS"},pool:{HILLS:"INTERVALS"}};if(c[o]&&c[o][s]){const e=s;s=c[o][s],Oe.A.log("    Equipment '".concat(o,"' doesn't support '").concat(e,"', mapping to '").concat(s,"'"))}let u=45;if(n.distance)u=Math.round(10*n.distance);else if(n.duration){const e=n.duration.match(/(\d+)/);e&&(u=parseInt(e[1]))}Oe.A.log("    ".concat(n.day,": Original type=").concat(n.type,", Mapped to=").concat(s,", Duration=").concat(u,"min, Equipment=").concat(o));const d=a.getWorkoutByDuration(s,u);return Oe.A.log("      Returned workout:",d?d.name:"null/undefined"),{day:n.day,date:n.date,fullDate:n.fullDate,dateString:n.dateString,type:"cross-training",crossTrainingType:o,name:d?d.name:"".concat(o," - ").concat(s),description:d?d.description:"Cross-training on ".concat(o),structure:d?d.structure:null,duration:d?d.duration:"".concat(u," minutes"),intensity:d?d.intensity:s.toLowerCase(),benefits:d?d.benefits:null,technique:d?d.technique:null,effort:d?d.effort:null,coachingTips:d?d.coachingTips:null,distance:null,pace:null,originalWorkout:{type:n.type,name:n.name,distance:n.distance,duration:n.duration}}});return Oe.A.log("  Full week: ".concat(f.length," days total")),(0,c.A)((0,c.A)({},e),{},{workouts:f,weekType:"injury-recovery",note:"Cross-training only - No running during injury recovery"})}createReturnToRunningWeek(e,t,n){const r=e.workouts||[],i=r.filter(e=>"rest"!==e.type&&"REST"!==e.type),o=Math.max(1,i.length-n),a=["long","LONG","longRun","tempo","TEMPO","intervals","INTERVALS","hills","HILLS","easy","EASY","recovery","RECOVERY"],s=[...i].sort((e,t)=>{const n=a.indexOf(e.type),r=a.indexOf(t.type);return(-1===n?999:n)-(-1===r?999:r)}).slice(0,o),l=Math.ceil(o/2),u=new Map;s.forEach((e,t)=>{u.set(e.day,{originalWorkout:e,index:t})});const d=r.map(e=>{if("rest"===e.type||"REST"===e.type)return{day:e.day,date:e.date,fullDate:e.fullDate,dateString:e.dateString,type:"rest",name:"Rest Day",description:"Recovery day"};if(!u.has(e.day))return{day:e.day,date:e.date,fullDate:e.fullDate,dateString:e.dateString,type:"rest",name:"Rest Day",description:"Recovery day"};const{originalWorkout:n,index:r}=u.get(e.day);if(r<l)return{day:n.day,date:n.date,fullDate:n.fullDate,dateString:n.dateString,type:"easy",name:"Easy Return Run",description:"Easy-paced running to gradually return from injury",distance:n.distance?Math.round(.5*n.distance*10)/10:3,pace:n.pace||"easy",note:"\u26a0\ufe0f Return to running: Start slow, listen to your body"};{const e=(r-l)%t.length,{type:i,library:o}=t[e],a=o.getWorkoutByDuration("EASY",45);return{day:n.day,date:n.date,fullDate:n.fullDate,dateString:n.dateString,type:"cross-training",crossTrainingType:i,name:a?a.name:"".concat(i," workout"),description:a?a.description:"Cross-training on ".concat(i),structure:a?a.structure:null,distance:null,benefits:a?a.benefits:null,technique:a?a.technique:null,effort:a?a.effort:null,coachingTips:a?a.coachingTips:null}}});return(0,c.A)((0,c.A)({},e),{},{workouts:d,weekType:"return-to-running",note:"\u26a0\ufe0f Gradual return to running - Mix of easy runs and cross-training"})}cancelInjuryRecovery(e){if(Oe.A.log("\ud83c\udfe5 Canceling injury recovery protocol..."),!e.injuryRecoveryActive)return Oe.A.warn("  \u26a0\ufe0f No active injury recovery to cancel"),e;if(!e.originalPlanBeforeInjury)throw Oe.A.error("  \u274c Original plan backup not found"),new Error("Cannot restore original plan - backup not found");return Oe.A.log("  \u2705 Restoring original plan"),(0,c.A)((0,c.A)({},e),{},{weeks:e.originalPlanBeforeInjury.weeks,injuryRecoveryActive:!1,injuryRecoveryInfo:null,originalPlanBeforeInjury:null})}};const jp=function(e){let{isOpen:t,onClose:n,userProfile:r,trainingPlan:i,currentWeek:o}=e;const[s,l]=(0,a.useState)(2),[u,d]=(0,a.useState)({pool:!1,elliptical:!1,stationaryBike:!1,swimming:!1,rowing:!1,standUpBike:!1}),[h,p]=(0,a.useState)(1),[m,f]=(0,a.useState)({itBand:!1,plantarFasciitis:!1,shinSplints:!1,kneeIssues:!1,lowerBackPain:!1,achillesTendonitis:!1,stressFracture:!1,hipIssues:!1,ankleIssues:!1,other:!1}),[g,y]=(0,a.useState)(""),[v,w]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{var e;t&&Pe.j2.currentUser&&(l(2),p(1),null!==r&&void 0!==r&&r.injuries?f(r.injuries):f({itBand:!1,plantarFasciitis:!1,shinSplints:!1,kneeIssues:!1,lowerBackPain:!1,achillesTendonitis:!1,stressFracture:!1,hipIssues:!1,ankleIssues:!1,other:!1}),y((null===r||void 0===r?void 0:r.injuryDescription)||(null===r||void 0===r||null===(e=r.injuryRecovery)||void 0===e?void 0:e.injuryDescription)||""),null!==r&&void 0!==r&&r.standUpBikeType?d(e=>(0,c.A)((0,c.A)({},e),{},{standUpBike:!0})):d({pool:!1,elliptical:!1,stationaryBike:!1,swimming:!1,rowing:!1,standUpBike:!1}))},[t,r]),!t)return null;const b=Object.values(u).filter(Boolean).length,k=[{id:"pool",name:"Pool / Aqua Running",emoji:"\ud83c\udfca",description:"Deep water running with flotation belt"},{id:"elliptical",name:"Elliptical",emoji:"\ud83c\udfc3",description:"Low-impact cardio machine"},{id:"stationaryBike",name:"Stationary Bike",emoji:"\ud83d\udeb4",description:"Spin bike, Peloton, or indoor trainer"},{id:"swimming",name:"Swimming",emoji:"\ud83c\udfca",description:"Lap swimming (technique required)"},{id:"rowing",name:"Rowing Machine",emoji:"\ud83d\udea3",description:"Concept2 or similar rowing erg"}];return null!==r&&void 0!==r&&r.standUpBikeType&&k.push({id:"standUpBike",name:"cyclete"===r.standUpBikeType?"Cyclete":"ElliptiGO",emoji:"\ud83d\udeb4",description:"Your stand-up bike"}),(0,je.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},children:(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%)",border:"1px solid #333",borderRadius:"12px",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",padding:"24px"},children:[(0,je.jsxs)("div",{style:{borderBottom:"1px solid #333",paddingBottom:"16px",marginBottom:"24px"},children:[(0,je.jsx)("h2",{style:{margin:0,fontSize:"1.5rem",color:"#fff",display:"flex",alignItems:"center",gap:"8px"},children:"\ud83c\udfe5 Injury Recovery Protocol"}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.9rem",color:"#999"},children:"We'll create a modified plan with cross-training while you recover. Your completed weeks will be preserved."})]}),(0,je.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"What injury are you recovering from? (Select all that apply)"}),(0,je.jsx)("p",{style:{marginBottom:"16px",fontSize:"0.85rem",color:"#999"},children:"This helps the AI coach recommend the safest cross-training equipment and avoid aggravating your injury."}),(0,je.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px"},children:[{id:"itBand",name:"IT Band Syndrome",description:"Hip/knee pain on outside of leg"},{id:"plantarFasciitis",name:"Plantar Fasciitis",description:"Bottom of foot pain"},{id:"shinSplints",name:"Shin Splints",description:"Pain along shin bone"},{id:"kneeIssues",name:"Knee Issues",description:"Patellofemoral, meniscus, etc."},{id:"lowerBackPain",name:"Lower Back Pain",description:"Lower back discomfort"},{id:"achillesTendonitis",name:"Achilles Tendonitis",description:"Back of heel/ankle pain"},{id:"stressFracture",name:"Stress Fracture",description:"Bone stress injury"},{id:"hipIssues",name:"Hip Issues",description:"Hip pain or impingement"},{id:"ankleIssues",name:"Ankle Issues",description:"Ankle pain or instability"},{id:"other",name:"Other",description:"Please specify below"}].map(e=>(0,je.jsxs)("button",{type:"button",onClick:()=>{const t=(0,c.A)((0,c.A)({},m),{},{[e.id]:!m[e.id]});f(t),"other"!==e.id||t.other||y("")},style:{padding:"12px 16px",fontSize:"0.9rem",border:m[e.id]?"2px solid #ef4444":"1px solid #333",background:m[e.id]?"rgba(239, 68, 68, 0.1)":"#1a1a1a",color:m[e.id]?"#ef4444":"#999",borderRadius:"6px",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.2rem"},children:m[e.id]?"\u2713":"\u25cb"}),(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsx)("div",{style:{fontWeight:"500"},children:e.name}),(0,je.jsx)("div",{style:{fontSize:"0.8rem",color:m[e.id]?"#fca5a5":"#666",marginTop:"2px"},children:e.description})]})]},e.id))}),m.other&&(0,je.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"8px"},children:"Please describe your injury:"}),(0,je.jsx)("textarea",{value:g,onChange:e=>y(e.target.value),placeholder:"e.g., Runner's knee, patellar tendinitis, etc.",rows:2,maxLength:100,style:{width:"100%",padding:"12px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#FFFFFF",fontSize:"0.9rem",fontFamily:"inherit",resize:"vertical",boxSizing:"border-box"}})]})]}),(0,je.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"How many weeks off running do you need?"}),(0,je.jsx)("div",{style:{display:"flex",gap:"8px"},children:[1,2,3,4,5,6].map(e=>(0,je.jsx)("button",{onClick:()=>l(e),style:{flex:1,padding:"12px",fontSize:"1rem",fontWeight:"500",border:s===e?"2px solid #ef4444":"1px solid #333",background:s===e?"rgba(239, 68, 68, 0.1)":"#1a1a1a",color:s===e?"#ef4444":"#999",borderRadius:"6px",cursor:"pointer"},children:e},e))}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#666"},children:"Your race date will remain the same. Plan will be compressed after recovery."})]}),(0,je.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"Select available cross-training equipment"}),(0,je.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:k.map(e=>(0,je.jsxs)("button",{onClick:()=>{return t=e.id,void d(e=>(0,c.A)((0,c.A)({},e),{},{[t]:!e[t]}));var t},style:{padding:"12px 16px",fontSize:"0.9rem",border:u[e.id]?"2px solid #22c55e":"1px solid #333",background:u[e.id]?"rgba(34, 197, 94, 0.1)":"#1a1a1a",color:u[e.id]?"#22c55e":"#999",borderRadius:"6px",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.5rem"},children:e.emoji}),(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsxs)("div",{style:{fontWeight:"500"},children:[u[e.id]?"\u2713 ":"",e.name]}),(0,je.jsx)("div",{style:{fontSize:"0.8rem",color:u[e.id]?"#86efac":"#666",marginTop:"2px"},children:e.description})]})]},e.id))}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:0===b?"#ef4444":"#666"},children:0===b?"Please select at least one option":"Selected: ".concat(b," option").concat(b>1?"s":"")})]}),(0,je.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"Reduce training days per week during recovery"}),(0,je.jsx)("div",{style:{display:"flex",gap:"8px"},children:[0,1,2].map(e=>(0,je.jsx)("button",{onClick:()=>p(e),style:{flex:1,padding:"12px",fontSize:"1rem",fontWeight:"500",border:h===e?"2px solid #3b82f6":"1px solid #333",background:h===e?"rgba(59, 130, 246, 0.1)":"#1a1a1a",color:h===e?"#3b82f6":"#999",borderRadius:"6px",cursor:"pointer"},children:0===e?"Keep same":"-".concat(e," day").concat(e>1?"s":"")},e))}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#666"},children:"Recommended: Reduce by 1-2 days to focus on recovery"})]}),(0,je.jsxs)("div",{style:{background:"rgba(59, 130, 246, 0.05)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"8px",padding:"16px",marginBottom:"24px"},children:[(0,je.jsx)("div",{style:{color:"#3b82f6",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"Recovery Plan Summary"}),(0,je.jsxs)("div",{style:{fontSize:"0.85rem",color:"#999",lineHeight:"1.6"},children:[(0,je.jsxs)("div",{style:{marginBottom:"6px"},children:["\u2022 Weeks ",o,"-",o+s-1,": Cross-training only (",b," modality options)"]}),(0,je.jsxs)("div",{style:{marginBottom:"6px"},children:["\u2022 Week ",o+s,": Gradual return to running"]}),(0,je.jsxs)("div",{style:{marginBottom:"6px"},children:["\u2022 Training days: ",0===h?"Same as current plan":"Reduced by ".concat(h," day").concat(h>1?"s":"")]}),(0,je.jsx)("div",{children:"\u2022 Race date: Unchanged (plan will be compressed)"})]})]}),(0,je.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"32px",paddingTop:"24px",borderTop:"1px solid #333"},children:[(0,je.jsx)("button",{onClick:n,disabled:v,style:{flex:1,padding:"14px",fontSize:"1rem",fontWeight:"500",background:"#1a1a1a",color:"#999",border:"1px solid #333",borderRadius:"8px",cursor:v?"not-allowed":"pointer",opacity:v?.5:1},children:"Cancel"}),(0,je.jsx)("button",{onClick:async()=>{try{var e,t,n,a,l,d,p,f,y,v,k,D,x;if(0===b)return void console.warn("Please select at least one cross-training option");w(!0),Oe.A.log("\ud83c\udfe5 Creating injury recovery plan..."),Oe.A.log("  Current week:",o),Oe.A.log("  Weeks off running:",s),Oe.A.log("  Selected equipment:",u),Oe.A.log("  Reduce training days by:",h);const S=new Op,A=(0,c.A)((0,c.A)({},r),{},{injuries:m,injuryDescription:m.other&&g.trim()||null,injuryRecovery:{weeksOffRunning:s,selectedEquipment:u,reduceTrainingDays:h,injuryStartWeek:o,returnToRunningWeek:o+s,injuryDescription:m.other&&g.trim()||null}});Oe.A.log("  \ud83d\udccb Current plan structure:",{hasWeeks:!(null===i||void 0===i||!i.weeks),weeksLength:(null===i||void 0===i||null===(e=i.weeks)||void 0===e?void 0:e.length)||0,currentWeek:o,firstWeekWorkouts:(null===i||void 0===i||null===(t=i.weeks)||void 0===t||null===(n=t[0])||void 0===n||null===(a=n.workouts)||void 0===a?void 0:a.length)||0});const C=await S.regeneratePlanWithInjury(i,A,o,s,u,h);Oe.A.log("  \u2705 Recovery plan generated successfully"),Oe.A.log("  \ud83d\udccb Updated plan structure:",{hasWeeks:!(null===C||void 0===C||!C.weeks),weeksLength:(null===C||void 0===C||null===(l=C.weeks)||void 0===l?void 0:l.length)||0,injuryRecoveryActive:null===C||void 0===C?void 0:C.injuryRecoveryActive,firstWeekWorkouts:(null===C||void 0===C||null===(d=C.weeks)||void 0===d||null===(p=d[0])||void 0===p||null===(f=p.workouts)||void 0===f?void 0:f.length)||0,firstWeekWorkoutTypes:(null===C||void 0===C||null===(y=C.weeks)||void 0===y||null===(v=y[0])||void 0===v||null===(k=v.workouts)||void 0===k?void 0:k.map(e=>e.type))||[]}),Oe.A.log("  \ud83e\udd16 Generating AI coaching analysis...");try{const e=[];m.itBand&&e.push("IT Band Syndrome"),m.plantarFasciitis&&e.push("Plantar Fasciitis"),m.shinSplints&&e.push("Shin Splints"),m.kneeIssues&&e.push("Knee Issues"),m.lowerBackPain&&e.push("Lower Back Pain"),m.achillesTendonitis&&e.push("Achilles Tendonitis"),m.stressFracture&&e.push("Stress Fracture"),m.hipIssues&&e.push("Hip Issues"),m.ankleIssues&&e.push("Ankle Issues"),m.other&&g.trim()&&e.push("Other: ".concat(g.trim()));const t={weeksOffRunning:s,selectedEquipment:u,reduceTrainingDays:h,currentWeek:o,returnToRunningWeek:o+s,injuries:e,injuryDescription:m.other&&g.trim()||null},n=await _t.generateInjuryRecoveryCoaching(t,r,i);C.injuryRecoveryCoaching=n,Oe.A.log("  \u2705 AI coaching analysis generated")}catch(E){Oe.A.error("  \u26a0\ufe0f Could not generate AI coaching (non-critical):",E)}if(!C.weeks||0===C.weeks.length)throw Oe.A.error("  \u274c CRITICAL: Updated plan has no weeks array! Cannot save."),new Error("Injury recovery plan generation failed - plan structure is invalid");Oe.A.log("  \ud83d\udccb Plan validation before save:",{weeksCount:C.weeks.length,injuryRecoveryActive:C.injuryRecoveryActive,hasInjuryRecoveryInfo:!!C.injuryRecoveryInfo,firstWeekWorkouts:(null===(D=C.weeks[0])||void 0===D||null===(x=D.workouts)||void 0===x?void 0:x.length)||0}),await Ne.saveTrainingPlan(Pe.j2.currentUser.uid,C),await Ne.saveUserProfile(Pe.j2.currentUser.uid,A),Oe.A.log("  \u2705 Saved to Firestore"),window.location.reload()}catch(E){Oe.A.error("\u274c Error creating recovery plan:",E),console.error("Error creating recovery plan. Please try again."),w(!1)}},disabled:v||0===b,style:{flex:1,padding:"14px",fontSize:"1rem",fontWeight:"500",background:0===b?"#333":"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"#fff",border:"none",borderRadius:"8px",cursor:v||0===b?"not-allowed":"pointer",opacity:v||0===b?.5:1},children:v?"Creating Recovery Plan...":"Create Recovery Plan"})]})]})})};const Lp=function(e){let{userProfile:t,trainingPlan:n,onClose:r}=e;const i=Hl(),[o,s]=(0,a.useState)(!1),[l,u]=(0,a.useState)(""),d=(e,t)=>{var n,r,i,o,a,s,l,u,d;const h=e.workoutsPerWeek||e.runsPerWeek||(null===(n=e.availableDays)||void 0===n?void 0:n.length)||5;let p=e.currentLongRun||e.currentLongRunDistance;if(!p&&null!==t&&void 0!==t&&null!==(r=t.weeks)&&void 0!==r&&null!==(i=r[0])&&void 0!==i&&i.workouts){const e=t.weeks[0].workouts;for(const t of e){const e=Array.isArray(t.workouts)?t.workouts:[t];for(const t of e){var m;if("longRun"===t.type||"long-run"===t.type||null!==(m=t.workout)&&void 0!==m&&m.name&&t.workout.name.toLowerCase().includes("long run")){var f,g,y;const e=(null===(f=t.workout)||void 0===f||null===(g=f.name)||void 0===g?void 0:g.match(/(\d+(?:\.\d+)?)\s*(mile|miles|mi)/i))||(null===(y=t.description)||void 0===y?void 0:y.match(/(\d+(?:\.\d+)?)\s*(mile|miles|mi)/i));if(e){p=parseFloat(e[1]);break}}}if(p)break}}let v=e.currentWeeklyMileage;!v&&null!==t&&void 0!==t&&null!==(o=t.weeks)&&void 0!==o&&null!==(a=o[0])&&void 0!==a&&a.totalMileage&&(v=t.weeks[0].totalMileage);const w=e.availableDays||["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].slice(0,h),b=e.restDays||["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].filter(e=>!w.includes(e));return(0,c.A)((0,c.A)({},e),{},{raceTime:e.raceTime||(null===t||void 0===t||null===(s=t.planOverview)||void 0===s?void 0:s.goalTime),raceDistance:e.raceDistance||(null===t||void 0===t||null===(l=t.planOverview)||void 0===l?void 0:l.raceDistance),raceDate:e.raceDate||(null===t||void 0===t||null===(u=t.planOverview)||void 0===u?void 0:u.raceDate),startDate:e.startDate||(null===t||void 0===t||null===(d=t.planOverview)||void 0===d?void 0:d.startDate),currentWeeklyMileage:v||e.currentWeeklyMileage,currentLongRun:p||e.currentLongRunDistance,workoutsPerWeek:h,runsPerWeek:h,longRunDay:e.longRunDay||"Sunday",experienceLevel:e.experienceLevel||"intermediate",units:e.units||"imperial",availableDays:w,hardSessionDays:e.hardSessionDays||e.qualityDays||[],restDays:b})};return(0,je.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},children:(0,je.jsxs)("div",{style:{background:"#1a1a1a",borderRadius:"12px",padding:"30px",maxWidth:"600px",width:"100%",border:"2px solid #00D4FF",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.5)"},children:[(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,je.jsx)("h2",{style:{color:"#00D4FF",margin:0},children:"\ud83d\udd27 Plan Debug Tool"}),(0,je.jsx)("button",{onClick:r,style:{background:"transparent",border:"none",color:"#AAAAAA",fontSize:"24px",cursor:"pointer",padding:"0",width:"30px",height:"30px"},children:"\xd7"})]}),(0,je.jsx)("p",{style:{color:"#AAAAAA",marginBottom:"24px",fontSize:"0.9rem"},children:"Test and regenerate plan components without full re-onboarding"}),(0,je.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[(0,je.jsxs)("button",{onClick:async()=>{if(t&&n){s(!0),u("Regenerating coaching analysis...");try{const e=d(t,n),r=await _t.generateCoachingAnalysis(e);if(!r.success)throw new Error(r.error||"Failed to regenerate coaching");{const e=(0,c.A)((0,c.A)({},n),{},{aiCoachingAnalysis:r.analysis});await Ne.saveTrainingPlan(Pe.j2.currentUser.uid,e),u("\u2705 Coaching analysis regenerated and saved!"),i.success("Coaching analysis regenerated!"),setTimeout(()=>window.location.reload(),1e3)}}catch(e){Oe.A.error("Error regenerating coaching:",e),u("\u274c Error: ".concat(e.message)),i.error("Error: ".concat(e.message))}finally{s(!1)}}else i.error("Missing user profile or training plan")},disabled:o,style:{padding:"14px 20px",background:o?"#333":"rgba(0, 212, 255, 0.2)",border:"1px solid rgba(0, 212, 255, 0.5)",borderRadius:"8px",color:"#00D4FF",cursor:o?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"600",textAlign:"left"},children:["\ud83d\udcdd Regenerate Coaching Analysis Only",(0,je.jsx)("div",{style:{fontSize:"0.85rem",color:"#888",marginTop:"4px",fontWeight:"400"},children:"Updates the coach's opening paragraph and analysis"})]}),(0,je.jsxs)("button",{onClick:async()=>{if(t&&n){if(window.confirm("This will regenerate the entire plan structure. Continue?")){s(!0),u("Regenerating plan structure...");try{const e=d(t,n);if(!e.raceTime||!e.raceDistance||!e.raceDate)throw new Error("Missing required plan data. Please ensure raceTime, raceDistance, and raceDate are set.");if(!e.currentWeeklyMileage||!e.currentLongRun)throw new Error("Missing required fitness data. Please ensure currentWeeklyMileage and currentLongRun are set.");const r=await _t.generateTrainingPlan(e);if(!r.success||!r.plan)throw new Error(r.error||"Failed to regenerate plan structure");await Ne.saveTrainingPlan(Pe.j2.currentUser.uid,r.plan),u("\u2705 Plan structure regenerated and saved!"),i.success("Plan structure regenerated!"),setTimeout(()=>window.location.reload(),2e3)}catch(e){Oe.A.error("Error regenerating plan structure:",e),u("\u274c Error: ".concat(e.message)),i.error("Error: ".concat(e.message))}finally{s(!1)}}}else i.error("Missing user profile or training plan")},disabled:o,style:{padding:"14px 20px",background:o?"#333":"rgba(139, 92, 246, 0.2)",border:"1px solid rgba(139, 92, 246, 0.5)",borderRadius:"8px",color:"#8b5cf6",cursor:o?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"600",textAlign:"left"},children:["\ud83c\udfd7\ufe0f Regenerate Plan Structure Only",(0,je.jsx)("div",{style:{fontSize:"0.85rem",color:"#888",marginTop:"4px",fontWeight:"400"},children:"Regenerates all weeks and workouts (keeps coaching analysis)"})]}),(0,je.jsxs)("button",{onClick:async()=>{if(t&&n){if(window.confirm("This will regenerate the plan structure from Week 1. Continue?")){s(!0),u("Fixing corrupted plan...");try{const e=d(t,n),r=1,o=await _t.regeneratePlanStructureFromCurrentWeek(n,e,r);if(!o.success||!o.newWeeks)throw new Error(o.error||"Failed to fix plan");{const e=(0,c.A)((0,c.A)({},n),{},{weeks:o.newWeeks,planOverview:(0,c.A)((0,c.A)({},n.planOverview),{},{totalWeeks:o.newWeeks.length})});await Ne.saveTrainingPlan(Pe.j2.currentUser.uid,e),u("\u2705 Plan fixed and saved!"),i.success("Plan fixed!"),setTimeout(()=>window.location.reload(),2e3)}}catch(e){Oe.A.error("Error fixing plan:",e),u("\u274c Error: ".concat(e.message)),i.error("Error: ".concat(e.message))}finally{s(!1)}}}else i.error("Missing user profile or training plan")},disabled:o,style:{padding:"14px 20px",background:o?"#333":"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.5)",borderRadius:"8px",color:"#ef4444",cursor:o?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"600",textAlign:"left"},children:["\ud83d\udd27 Fix Corrupted Plan",(0,je.jsx)("div",{style:{fontSize:"0.85rem",color:"#888",marginTop:"4px",fontWeight:"400"},children:"Regenerates plan structure from Week 1 (fixes null weeks, missing workouts)"})]})]}),l&&(0,je.jsx)("div",{style:{marginTop:"20px",padding:"12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",color:"#AAAAAA",fontSize:"0.9rem"},children:l}),o&&(0,je.jsx)("div",{style:{marginTop:"20px",textAlign:"center",color:"#00D4FF",fontSize:"0.9rem"},children:"\u23f3 Processing..."})]})})},Bp=e=>{const t=((null===e||void 0===e?void 0:e.type)||"").toLowerCase(),n=((null===e||void 0===e?void 0:e.name)||"").toLowerCase(),r=((null===e||void 0===e?void 0:e.focus)||"").toLowerCase();return["intervals","hills","tempo","longrun","easy","rest","rest_or_xt","bike"].includes(t)?"longrun"===t?"longRun":t:t.includes("vo2")||t.includes("speed")||t.includes("interval")||n.includes("interval")||n.includes("800m")||n.includes("400m")||n.includes("repeat")||r.includes("vo2")?"intervals":t.includes("hill")||t.includes("power")||t.includes("strength")||n.includes("hill")||r.includes("strength")?"hills":t.includes("tempo")||t.includes("threshold")||n.includes("tempo")||n.includes("threshold")||n.includes("cruise")||r.includes("threshold")?"tempo":t.includes("long")||t.includes("progressive")||t.includes("mixed")||n.includes("long run")||r.includes("endurance")?"longRun":t||"easy"},Wp=e=>{var t,n,r,i;return"longRun"===e.type||"brickLongRun"===e.type||(!(null===(t=e.metadata)||void 0===t||!t.workoutId||!e.metadata.workoutId.includes("longrun_"))||(!(!e.workoutId||!e.workoutId.includes("longrun_"))||!!(null!==(n=e.name)&&void 0!==n&&n.toLowerCase().includes("long run")||null!==(r=e.workout)&&void 0!==r&&null!==(i=r.name)&&void 0!==i&&i.toLowerCase().includes("long run"))))},Up=e=>({tempo:"#4299e1",intervals:"#e53e3e",hills:"#38a169",longRun:"#805ad5",bike:"#ff9500",brick:"#ff6b6b",brickLongRun:"#ff6b6b",easy:"#718096",rest:"#a0aec0",rest_or_xt:"#22c55e",preparation:"#ffd700"}[e]||"#718096"),qp=e=>{var t,n,r,i,o,a;const s=((null===(t=e.workout)||void 0===t?void 0:t.name)||e.name||"").toLowerCase(),l=(e.type||"").toLowerCase();if("rest"===l||s.includes("rest day")||"rest"===s||"Recovery"===e.focus&&"rest"===l)return null;var c,u,d;if(e.distance&&e.distance>0)return"bike"===e.type&&(null!==(c=e.name)&&void 0!==c&&c.includes("RunEQ")||null!==(u=e.workout)&&void 0!==u&&null!==(d=u.name)&&void 0!==d&&d.includes("RunEQ"))?"\ud83d\udccf ".concat(e.distance," RunEQ"):"\ud83d\udccf ".concat(e.distance," ").concat(1===e.distance?"mile":"miles");const h=(null===(n=e.workout)||void 0===n||null===(r=n.name)||void 0===r?void 0:r.match(/(\d+(?:\.\d+)?)\s*-?\s*(mile|miles|mi|RunEQ|km)/i))||(null===(i=e.name)||void 0===i?void 0:i.match(/(\d+(?:\.\d+)?)\s*-?\s*(mile|miles|mi|RunEQ|km)/i));if(h)return"\ud83d\udccf ".concat(h[1]," ").concat(h[2]);if(null!==(o=e.workoutDetails)&&void 0!==o&&o.repetitions)return"\ud83d\udd01 ".concat(e.workoutDetails.repetitions);if(null!==(a=e.workoutDetails)&&void 0!==a&&a.duration&&!e.distance)return"\u23f1\ufe0f ".concat(e.workoutDetails.duration);switch(e.type){case"longRun":return"\ud83d\udccf 10+ miles";case"tempo":return"\u23f1\ufe0f 20-40 min";case"intervals":return"\ud83d\udd01 Multiple reps";case"hills":return"\u26f0\ufe0f Hill session";case"easy":return"\ud83d\udccf 4-6 miles";case"bike":return"\ud83d\udeb4 12+ RunEQ miles";default:return null}};const Hp=function(e){let{workout:t,onMakeBrick:n,onHideBrickOptions:r}=e,i=t.distance||0;if(!i){var o,a;const e=null===(o=t.workout)||void 0===o||null===(a=o.name)||void 0===a?void 0:a.match(/(\d+(?:\.\d+)?)/);i=e?parseFloat(e[1]):10}if(!Wp(t))return null;const s=[{key:"heavy-run",emoji:"\ud83c\udfc3\u200d\u2642\ufe0f",label:"Heavy Run",runMiles:Math.round(.8*i),bikeMiles:Math.round(.2*i),description:"Feeling strong - mostly running",color:"#4299e1"},{key:"balanced",emoji:"\u2696\ufe0f",label:"Balanced",runMiles:Math.round(.6*i),bikeMiles:Math.round(.4*i),description:"Standard brick workout",color:"#ed8936"},{key:"heavy-bike",emoji:"\ud83d\udeb4",label:"Heavy Bike",runMiles:Math.round(.4*i),bikeMiles:Math.round(.6*i),description:"Legs need a break - more biking",color:"#9f7aea"},{key:"light-run",emoji:"\ud83d\udeb4\u200d\u2642\ufe0f",label:"Light Run",runMiles:Math.round(.2*i),bikeMiles:Math.round(.8*i),description:"Recovery mode - minimal running",color:"#48bb78"}];return(0,je.jsx)("div",{style:{marginTop:"12px"},children:(0,je.jsxs)("div",{style:{background:"transparent",border:"none",padding:"0"},children:[(0,je.jsx)("h4",{style:{margin:"0 0 16px 0",color:"#f59e0b",display:"flex",alignItems:"center",gap:"8px",fontSize:"1.2rem",fontWeight:"700"},children:"\ud83e\uddf1 Choose Your Brick Workout Split"}),(0,je.jsxs)("p",{style:{margin:"0 0 16px 0",fontSize:"0.9rem",color:"#CCCCCC"},children:["All options = ",i," miles total training load. Pick based on how your legs feel today:"]}),(0,je.jsx)("div",{style:{display:"grid",gap:"12px"},children:s.map(e=>(0,je.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"2px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"16px",cursor:"pointer",transition:"all 0.2s ease"},onClick:r=>{r.stopPropagation(),n(t,e.key)},onMouseEnter:t=>{t.currentTarget.style.borderColor=e.color,t.currentTarget.style.background="".concat(e.color,"15")},onMouseLeave:e=>{e.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)",e.currentTarget.style.background="rgba(255, 255, 255, 0.05)"},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.5rem"},children:e.emoji}),(0,je.jsx)("strong",{style:{color:e.color,fontSize:"1.1rem"},children:e.label})]}),(0,je.jsxs)("span",{style:{fontSize:"0.9rem",color:"#00D4FF",fontWeight:"bold"},children:[e.runMiles,"mi + ",e.bikeMiles," RunEQ"]})]}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#aaa"},children:e.description})]},e.key))}),(0,je.jsx)("button",{onClick:e=>{e.stopPropagation(),r(t)},style:{marginTop:"16px",padding:"8px 16px",background:"rgba(156, 163, 175, 0.1)",color:"#9ca3af",border:"1px solid rgba(156, 163, 175, 0.3)",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",cursor:"pointer",width:"100%"},children:"Cancel"})]})})};const zp=function(e){let{workout:t,currentWeek:n,options:r,selectedOption:i,onSelectOption:o,onConfirmSelection:a,onCancelSelection:s}=e;if(!r||0===r.length)return null;"".concat(n,"-").concat(t.day);const l="longRun"===t.type?"Long Run":"intervals"===t.type?"Speed":"tempo"===t.type?"Tempo":"hills"===t.type?"Hill":"Easy Run";return(0,je.jsx)("div",{style:{marginTop:"12px"},children:(0,je.jsxs)("div",{style:{background:"transparent",border:"none",padding:"0"},children:[(0,je.jsxs)("h4",{style:{margin:"0 0 16px 0",color:"#00D4FF",display:"flex",alignItems:"center",gap:"8px",fontSize:"1.2rem",fontWeight:"700"},children:["\ud83c\udfb2 Choose Your ",l," Adventure"]}),(0,je.jsx)("div",{style:{display:"grid",gap:"12px"},children:r.map(e=>{const n=((e,t)=>{const n={"Very Easy":{bg:"rgba(34, 197, 94, 0.4)",border:"rgba(34, 197, 94, 0.8)",accent:"#22c55e",icon:"\ud83d\ude0c"},Easy:{bg:"rgba(34, 197, 94, 0.45)",border:"rgba(34, 197, 94, 0.9)",accent:"#22c55e",icon:"\ud83d\udfe2"},"Easy-Moderate":{bg:"rgba(245, 158, 11, 0.4)",border:"rgba(245, 158, 11, 0.8)",accent:"#f59e0b",icon:"\ud83d\udfe1"},Moderate:{bg:"rgba(245, 158, 11, 0.45)",border:"rgba(245, 158, 11, 0.9)",accent:"#f59e0b",icon:"\ud83d\udd36"},"Medium-Hard":{bg:"rgba(239, 68, 68, 0.4)",border:"rgba(239, 68, 68, 0.8)",accent:"#ef4444",icon:"\ud83d\udd38"},Hard:{bg:"rgba(239, 68, 68, 0.45)",border:"rgba(239, 68, 68, 0.9)",accent:"#ef4444",icon:"\ud83d\udd25"},"Very Hard":{bg:"rgba(220, 38, 127, 0.4)",border:"rgba(220, 38, 127, 0.8)",accent:"#dc2626",icon:"\ud83d\udca5"},Variable:{bg:"rgba(168, 85, 247, 0.4)",border:"rgba(168, 85, 247, 0.8)",accent:"#a855f7",icon:"\u26a1"},"Variable Hard":{bg:"rgba(168, 85, 247, 0.45)",border:"rgba(168, 85, 247, 0.9)",accent:"#a855f7",icon:"\u26a1"},Progressive:{bg:"rgba(59, 130, 246, 0.4)",border:"rgba(59, 130, 246, 0.8)",accent:"#3b82f6",icon:"\ud83d\udcc8"}};if(!n[e]&&t)return{Low:n.Easy,"Low-Moderate":n["Easy-Moderate"],Moderate:n.Moderate,"Moderate-High":n["Medium-Hard"],High:n.Hard,"Very High":n["Very Hard"]}[t]||n.Moderate;return n[e]||n.Moderate})(e.intensity,e.difficulty),r=(null===i||void 0===i?void 0:i.id)===e.id;return(0,je.jsxs)("div",{className:"card",style:{cursor:"pointer",background:r?"rgba(74, 222, 128, 0.2)":n.bg,border:r?"3px solid #4ade80":"2px solid ".concat(n.border),borderLeft:r?"6px solid #22c55e":"6px solid ".concat(n.accent),transition:"all 0.2s ease",backdropFilter:"blur(3px)",boxShadow:r?"0 4px 20px rgba(74, 222, 128, 0.4)":"0 4px 16px ".concat(n.accent,"20"),transform:r?"scale(1.02)":"scale(1)"},onClick:n=>{n.preventDefault(),n.stopPropagation(),o(t,e)},onMouseEnter:e=>{e.currentTarget.style.background=n.bg.replace("0.1","0.2").replace("0.15","0.25"),e.currentTarget.style.border="2px solid ".concat(n.accent),e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 12px ".concat(n.accent,"40")},onMouseLeave:e=>{e.currentTarget.style.background=n.bg,e.currentTarget.style.border="2px solid ".concat(n.border),e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:[(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.2rem"},children:n.icon}),(0,je.jsx)("h5",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600",color:"#FFFFFF"},children:e.name}),r&&(0,je.jsx)("span",{style:{background:"#22c55e",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"0.7rem",fontWeight:"600"},children:"\u2713 SELECTED"})]}),(0,je.jsx)("p",{style:{margin:"0 0 10px 0",fontSize:"0.9rem",color:"#FFFFFF",lineHeight:"1.4",opacity:"1"},children:e.description}),(0,je.jsxs)("div",{style:{display:"flex",gap:"12px",fontSize:"0.8rem",color:"#FFFFFF",opacity:"1",marginBottom:"8px"},children:[(0,je.jsxs)("span",{children:["\u23f1\ufe0f ",e.timeRequired]}),(0,je.jsxs)("span",{children:["\ud83d\udccd ",e.location]}),(0,je.jsxs)("span",{children:["\ud83d\udcaa ",e.difficulty]})]})]}),(0,je.jsx)("div",{style:{background:n.accent+"20",color:"#FFFFFF",padding:"6px 12px",borderRadius:"16px",fontSize:"0.8rem",fontWeight:"600",whiteSpace:"nowrap",marginLeft:"12px",border:"1px solid ".concat(n.accent,"40")},children:e.focus})]}),(0,je.jsxs)("div",{style:{background:n.accent+"15",color:"#FFFFFF",padding:"8px 12px",borderRadius:"8px",fontSize:"0.85rem",fontWeight:"500",border:"1px solid ".concat(n.accent,"30")},children:["\ud83d\udca1 ",e.benefits]})]},e.id)})}),(0,je.jsx)("div",{style:{marginTop:"12px",padding:"8px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.8rem",color:"#CCCCCC",fontStyle:"italic"},children:["\ud83d\udca1 ",(0,je.jsx)("strong",{children:"All options target the same training system"})," - choose based on your mood, time, and location!"]})}),i&&(Oe.A.log("\u2705 Showing confirmation buttons for:",i.shortName),(0,je.jsxs)("div",{style:{marginTop:"16px",padding:"20px",background:"linear-gradient(135deg, rgba(74, 222, 128, 0.3), rgba(34, 197, 94, 0.2))",border:"3px solid #22c55e",borderRadius:"12px",boxShadow:"0 8px 25px rgba(34, 197, 94, 0.4)",position:"relative",zIndex:1e3},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.2rem"},children:"\u2705"}),(0,je.jsxs)("span",{style:{color:"#4ade80",fontWeight:"600",fontSize:"0.9rem"},children:["Selected: ",i.shortName]})]}),(0,je.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,je.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),a(t)},style:{flex:1,padding:"12px 20px",background:"linear-gradient(135deg, #22c55e, #16a34a)",color:"white",border:"2px solid #16a34a",borderRadius:"8px",fontSize:"1rem",fontWeight:"700",cursor:"pointer",transition:"all 0.2s ease",textShadow:"0 1px 2px rgba(0,0,0,0.3)",boxShadow:"0 4px 12px rgba(34, 197, 94, 0.4)"},onMouseEnter:e=>e.target.style.background="#22c55e",onMouseLeave:e=>e.target.style.background="#4ade80",children:"\u2713 Confirm Selection"}),(0,je.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),s(t)},style:{padding:"8px 16px",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.background="rgba(239, 68, 68, 0.2)",e.target.style.borderColor="#ef4444"},onMouseLeave:e=>{e.target.style.background="rgba(239, 68, 68, 0.1)",e.target.style.borderColor="rgba(239, 68, 68, 0.3)"},children:"\u2717 Cancel"})]})]}))]})})};const Vp=function(e){var t,n,r,i;let{workout:o,workoutIdx:a,workouts:s,currentWeek:l,userProfile:c,workoutCompletions:u,onWorkoutClick:d,onMarkComplete:h,onSomethingElse:p,onShowBrickOptions:m,onHideBrickOptions:f,onMakeBrick:g,onMakeRegularRun:y,onShowOptions:v,onHideOptions:w,onSelectOption:b,onConfirmSelection:k,onCancelSelection:D,onRemoveWorkout:x,showBrickOptions:E,showingOptions:S,workoutOptions:A,selectedOptions:C}=e;const T="".concat(l,"-").concat(o.day,"-").concat(o.workoutIndex||0),R=u[T],F=null===R||void 0===R?void 0:R.autoCompletedFromStrava,I=Bp(o),P=["tempo","intervals","longRun","hills"].includes(I),M=("adventure"===(null===c||void 0===c?void 0:c.trainingStyle)||"flexible"===(null===c||void 0===c?void 0:c.trainingStyle)&&P)&&P&&!F;return(0,je.jsxs)("div",{className:"card dashboard-workout-card",style:{background:"rest"===o.type?"linear-gradient(135deg, rgba(160, 174, 192, 0.1) 0%, rgba(160, 174, 192, 0.05) 100%)":"rest_or_xt"===o.type?"linear-gradient(135deg, rgba(34, 197, 94, 0.15) 0%, rgba(34, 197, 94, 0.08) 100%)":"linear-gradient(135deg, ".concat(Up(o.type),"25 0%, ").concat(Up(o.type),"08 50%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(Up(o.type),"40"),borderLeft:"5px solid ".concat(Up(o.type)),boxShadow:"rest"===o.type?"0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(255, 255, 255, 0.05)":"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(Up(o.type),"20, 0 0 20px ").concat(Up(o.type),"15"),opacity:"rest"===o.type||"rest_or_xt"===o.type?.7:1,cursor:"rest"===o.type||"rest_or_xt"===o.type?"default":"pointer",position:"relative",color:"#FFFFFF",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:"translateY(0)",overflow:"hidden"},onMouseEnter:e=>{"rest"!==o.type&&"rest_or_xt"!==o.type&&(e.currentTarget.style.transform="translateY(-4px) scale(1.01)",e.currentTarget.style.boxShadow="0 12px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px ".concat(Up(o.type),"50, 0 0 30px ").concat(Up(o.type),"30"),e.currentTarget.style.borderColor="".concat(Up(o.type),"60"),e.currentTarget.style.borderLeftWidth="6px")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0) scale(1)",e.currentTarget.style.boxShadow="rest"===o.type?"0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(255, 255, 255, 0.05)":"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(Up(o.type),"20, 0 0 20px ").concat(Up(o.type),"15"),e.currentTarget.style.borderColor="".concat(Up(o.type),"40"),e.currentTarget.style.borderLeftWidth="5px"},onClick:()=>d(o),children:[(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px",flexWrap:"wrap",gap:"12px"},children:[(0,je.jsxs)("div",{style:{flex:"1 1 auto",minWidth:"200px"},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[(0,je.jsx)("div",{children:(0,je.jsxs)("h3",{style:{margin:0,color:"#EEEEEE",fontSize:"1.1rem",fontWeight:"600"},children:[o.day,o.date&&(0,je.jsx)("span",{style:{fontSize:"0.85rem",marginLeft:"8px",color:"#AAAAAA",fontWeight:"400"},children:o.date}),s.length>1&&(0,je.jsxs)("span",{style:{fontSize:"0.75rem",marginLeft:"8px",background:"rgba(0, 212, 255, 0.2)",color:"#00D4FF",padding:"2px 8px",borderRadius:"12px",fontWeight:"700",border:"1px solid rgba(0, 212, 255, 0.4)"},children:["Workout ",a+1,"/",s.length]})]})}),o.equipmentSpecific&&(0,je.jsx)("span",{style:{fontSize:"1rem"},children:"\u26a1"}),"bike"===o.type&&(0,je.jsx)("span",{style:{fontSize:"1rem",color:"#ff9500"},title:"Pure bike workout",children:"\ud83d\udeb4"}),("brick"===o.type||"brickLongRun"===o.type)&&(0,je.jsx)("span",{style:{fontSize:"1rem",color:"#ff6b6b"},title:"Brick workout (Run + Bike combination)",children:"\ud83e\uddf1"}),"cross-training"===o.type&&(()=>{const e={pool:{emoji:"\ud83c\udfca",color:"#3b82f6",label:"Pool / Aqua Running"},aquaRunning:{emoji:"\ud83c\udfca",color:"#3b82f6",label:"Aqua Running"},rowing:{emoji:"\ud83d\udea3",color:"#22c55e",label:"Rowing Machine"},elliptical:{emoji:"\u26a1",color:"#f59e0b",label:"Elliptical"},swimming:{emoji:"\ud83c\udfca\u200d\u2642\ufe0f",color:"#06b6d4",label:"Swimming"},stationaryBike:{emoji:"\ud83d\udeb4\u200d\u2640\ufe0f",color:"#8b5cf6",label:"Stationary Bike"},standUpBike:{emoji:"\ud83d\udeb4",color:"#ec4899",label:"Stand-Up Bike"},cyclete:{emoji:"\ud83d\udeb4",color:"#ec4899",label:"Cyclete"},elliptigo:{emoji:"\ud83d\udeb4",color:"#ec4899",label:"ElliptiGO"}}[o.crossTrainingType]||{emoji:"\ud83c\udfc3",color:"#999",label:"Cross-Training"};return(0,je.jsx)("span",{style:{fontSize:"1rem",color:e.color},title:e.label,children:e.emoji})})(),o.completed&&(0,je.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),o.replacementReason&&(0,je.jsx)("span",{style:{color:"var(--runeq-accent)",fontSize:"1.2rem"},title:"Changed: ".concat(o.replacementReason),children:"\ud83d\udd04"})]}),(0,je.jsx)("h4",{style:{margin:"0 0 4px 0",fontSize:"1.1rem",color:Up(o.type)},children:"rest_or_xt"===o.type?"\ud83e\uddd8 Rest / Cross-Train":(_=(null===(t=o.workout)||void 0===t?void 0:t.name)||o.name||"Workout",_&&"string"===typeof _?_.replace(/\[WORKOUT_ID:\s*[^\]]+\]\s*/gi,"").trim():_)}),qp(o)&&(0,je.jsx)("div",{style:{display:"inline-block",background:"rgba(0, 212, 255, 0.15)",color:"#00D4FF",padding:"4px 10px",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"8px",border:"1px solid rgba(0, 212, 255, 0.3)"},children:qp(o)}),"cross-training"===o.type&&o.crossTrainingType&&(()=>{const e={pool:"Pool / Aqua Running",aquaRunning:"Aqua Running",rowing:"Rowing Machine",elliptical:"Elliptical",swimming:"Swimming",stationaryBike:"Stationary Bike",standUpBike:"Stand-Up Bike",cyclete:"Cyclete",elliptigo:"ElliptiGO"}[o.crossTrainingType]||o.crossTrainingType;return(0,je.jsxs)("div",{style:{display:"inline-block",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",padding:"4px 10px",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"8px",marginLeft:qp(o)?"8px":"0",border:"1px solid rgba(239, 68, 68, 0.3)"},children:["\ud83c\udfe5 ",e]})})(),((null===(n=o.workout)||void 0===n?void 0:n.description)||o.description)&&(0,je.jsx)("p",{style:{margin:"0 0 12px 0",fontSize:"1rem",color:"#CCCCCC",lineHeight:"1.4"},children:(null===(r=o.workout)||void 0===r?void 0:r.description)||o.description}),o.completed&&R&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(0, 255, 136, 0.15) 0%, rgba(0, 212, 255, 0.15) 100%)",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:"12px",padding:"12px",marginBottom:"12px"},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"8px"},children:[(0,je.jsx)("span",{style:{fontSize:"1rem"},children:"\u2713"}),(0,je.jsx)("span",{style:{color:"#00FF88",fontSize:"0.85rem",fontWeight:"700",letterSpacing:"0.5px"},children:R.autoCompletedFromStrava?"\ud83d\udd17 SYNCED FROM STRAVA":"COMPLETED"})]}),(0,je.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"8px",fontSize:"0.85rem"},children:[R.distance&&(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.75rem"},children:"Distance"}),(0,je.jsxs)("div",{style:{color:"#FFF",fontWeight:"600"},children:[R.distance," mi"]})]}),R.duration&&(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.75rem"},children:"Duration"}),(0,je.jsxs)("div",{style:{color:"#FFF",fontWeight:"600"},children:[R.duration," min"]})]}),R.pace&&(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.75rem"},children:"Pace"}),(0,je.jsx)("div",{style:{color:"#FFF",fontWeight:"600"},children:R.pace})]}),R.avgHeartRate&&(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.75rem"},children:"Avg HR"}),(0,je.jsxs)("div",{style:{color:"#FFF",fontWeight:"600"},children:[R.avgHeartRate," bpm"]})]}),R.cadence&&(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.75rem"},children:"Cadence"}),(0,je.jsxs)("div",{style:{color:"#FFF",fontWeight:"600"},children:[Math.round(R.cadence)," spm"]})]}),R.elevationGain&&(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.75rem"},children:"Elevation"}),(0,je.jsxs)("div",{style:{color:"#FFF",fontWeight:"600"},children:[R.elevationGain," ft"]})]})]}),R.notes&&(0,je.jsxs)("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.75rem",marginBottom:"4px"},children:"Notes"}),(0,je.jsx)("div",{style:{color:"#CCC",fontSize:"0.85rem"},children:R.notes})]}),R.stravaActivityUrl&&(0,je.jsx)("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,je.jsx)("a",{href:R.stravaActivityUrl,target:"_blank",rel:"noopener noreferrer",style:{color:"#FC4C02",fontSize:"0.85rem",fontWeight:"600",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"4px"},onClick:e=>e.stopPropagation(),children:"View on Strava"})})]}),(0,je.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[(e=>{const t={tempo:"Lactate Threshold",intervals:"Speed & VO2 Max",hills:"Strength & Power",longRun:"Distance Builder",brickLongRun:"Distance Builder",long:"Distance Builder",easy:"Aerobic Base",bike:"Cross-Training",rest:"Recovery",rest_or_xt:"Recovery / XT"},n=((null===(e=o.workout)||void 0===e?void 0:e.name)||o.name||"").toLowerCase(),r=n.includes("long run")||n.includes("long-run");let i;i=o.focus&&"Training"!==o.focus?o.focus:t[o.type]?t[o.type]:r?"Distance Builder":"Training";const a={"Lactate Threshold":"#4299e1","Speed & VO2 Max":"#e53e3e","Strength & Power":"#38a169",Endurance:"#805ad5","Distance Builder":"#a78bfa","Aerobic Base":"#38b2ac","Aerobic Power":"#ed8936","Cross-Training":"#ed8936",Recovery:"#68d391","Recovery / XT":"#48bb78","Active Recovery":"#68d391","Easy Effort":"#38b2ac","Base Building":"#4299e1",Training:"#a0aec0"}[i]||Up(o.type);return(0,je.jsx)("span",{className:"badge",style:{background:"".concat(a,"30"),color:a,fontSize:"0.8rem",fontWeight:"500"},children:i})})(),o.equipmentSpecific&&(null===c||void 0===c||null===(i=c.preferredBikeDays)||void 0===i?void 0:i.includes(o.day))&&(0,je.jsx)("span",{className:"badge badge-warning",style:{fontSize:"0.8rem",fontWeight:"500"},children:(0,Bl.tS)(c.standUpBikeType)})]})]}),"rest"===o.type||"rest_or_xt"===o.type?(0,je.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",minWidth:"140px",flexShrink:0},children:[(0,je.jsx)("button",{className:"btn",style:{fontSize:"0.85rem",padding:"10px 12px",fontWeight:"600",background:o.completed?"rgba(156, 163, 175, 0.1)":"rgba(0, 255, 136, 0.1)",color:o.completed?"#9ca3af":"#00FF88",border:o.completed?"1px solid rgba(156, 163, 175, 0.3)":"1px solid rgba(0, 255, 136, 0.3)",textAlign:"center"},onClick:e=>{e.stopPropagation(),h(o)},children:o.completed?"\u23ea Undo Rest":"\u2705 Rested"}),(0,je.jsx)("button",{className:"btn",style:{fontSize:"0.8rem",padding:"8px 12px",background:"rgba(34, 197, 94, 0.1)",color:"#22c55e",border:"1px solid rgba(34, 197, 94, 0.3)",fontWeight:"600",textAlign:"center"},onClick:e=>{e.stopPropagation(),p(o)},children:"rest_or_xt"===o.type?"\ud83c\udfca Cross-Train":"\ud83c\udf1f Add Workout"})]}):"rest"!==o.type&&"rest_or_xt"!==o.type&&(0,je.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",minWidth:"140px",flexShrink:0},children:[(0,je.jsx)("button",{className:"btn",style:{fontSize:"0.85rem",padding:"10px 12px",fontWeight:"600",background:o.completed?"rgba(156, 163, 175, 0.1)":null!==c&&void 0!==c&&c.stravaConnected?"rgba(0, 212, 255, 0.1)":"rgba(0, 255, 136, 0.1)",color:o.completed?"#9ca3af":null!==c&&void 0!==c&&c.stravaConnected?"#00D4FF":"#00FF88",border:o.completed?"1px solid rgba(156, 163, 175, 0.3)":null!==c&&void 0!==c&&c.stravaConnected?"1px solid rgba(0, 212, 255, 0.3)":"1px solid rgba(0, 255, 136, 0.3)",textAlign:"center",cursor:o.completed?"pointer":null!==c&&void 0!==c&&c.stravaConnected?"default":"pointer",opacity:null!==c&&void 0!==c&&c.stravaConnected&&!o.completed?.7:1},onClick:e=>{e.stopPropagation(),null!==c&&void 0!==c&&c.stravaConnected&&!o.completed||h(o)},children:o.completed?"\u23ea Undo":null!==c&&void 0!==c&&c.stravaConnected?(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("svg",{viewBox:"0 0 24 24",style:{width:"16px",height:"16px",display:"inline-block",marginRight:"6px",verticalAlign:"middle"},children:(0,je.jsx)("path",{fill:"#FC4C02",d:"M15.387 17.944l-2.089-4.116h-3.065L15.387 24l5.15-10.172h-3.066m-7.008-5.599l2.836 5.598h4.172L10.463 0l-7 13.828h4.169"})}),"Strava Sync"]}):"\ud83d\udcdd Log Workout"}),M&&(0,je.jsx)("button",{className:"btn btn-primary",style:{fontSize:"0.8rem",padding:"8px 12px",background:"#4299e1",border:"1px solid #4299e1",textAlign:"center"},onClick:e=>{e.stopPropagation();const t="".concat(l,"-").concat(o.day);S[t]?w(o):v(o)},children:S["".concat(l,"-").concat(o.day)]?"\ud83d\udccb Hide":"\ud83c\udfb2 Choose Adventure"}),Wp(o)&&(null===c||void 0===c?void 0:c.standUpBikeType)&&!F&&(0,je.jsx)("button",{className:"btn",style:{fontSize:"0.8rem",padding:"8px 12px",fontWeight:"600",background:"brickLongRun"===o.type?"Sunday"===o.day?"#48bb78":"#805ad5":"transparent",color:"brickLongRun"===o.type?"white":"#c4a77d",border:"1px solid ".concat("brickLongRun"===o.type?"Sunday"===o.day?"#48bb78":"#805ad5":"#c4a77d"),textAlign:"center"},onClick:e=>{e.stopPropagation(),"brickLongRun"===o.type?y(o):E[T]?f(o):m(o)},children:"brickLongRun"===o.type?"\ud83c\udfc3 Run Only":"\ud83e\uddf1 Make Brick"}),!F&&(0,je.jsx)("button",{className:"btn",style:{fontSize:"0.8rem",padding:"8px 14px",textAlign:"center",background:"linear-gradient(135deg, rgba(0, 212, 255, 0.25) 0%, rgba(0, 255, 136, 0.2) 100%)",border:"2px solid rgba(0, 212, 255, 0.5)",color:"#00D4FF",fontWeight:"600",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, rgba(0, 212, 255, 0.35) 0%, rgba(0, 255, 136, 0.3) 100%)",e.currentTarget.style.border="2px solid rgba(0, 212, 255, 0.8)",e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, rgba(0, 212, 255, 0.25) 0%, rgba(0, 255, 136, 0.2) 100%)",e.currentTarget.style.border="2px solid rgba(0, 212, 255, 0.5)",e.currentTarget.style.transform="translateY(0)"},onClick:e=>{e.stopPropagation(),p(o)},children:"Life Adaptations"}),o.replacementReason&&0===a&&(0,je.jsx)("button",{className:"btn",style:{fontSize:"0.8rem",padding:"6px 12px",background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",border:"1px solid rgba(59, 130, 246, 0.3)",fontWeight:"600",textAlign:"center"},onClick:e=>{e.stopPropagation(),y(o)},title:"Restore the original scheduled workout",children:"\u21a9\ufe0f Revert to Original"}),a>0&&(0,je.jsx)("button",{className:"btn",style:{fontSize:"0.8rem",padding:"6px 12px",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",fontWeight:"600",textAlign:"center"},onClick:e=>{e.stopPropagation(),window.confirm("Remove this workout?")&&x(o,a)},children:"\ud83d\uddd1\ufe0f Remove"})]})]}),E[T]&&Wp(o)&&(0,je.jsx)(Hp,{workout:o,onMakeBrick:g,onHideBrickOptions:f}),S["".concat(l,"-").concat(o.day)]&&A["".concat(l,"-").concat(o.day)]&&(0,je.jsx)(zp,{workout:o,currentWeek:l,options:A["".concat(l,"-").concat(o.day)],selectedOption:C["".concat(l,"-").concat(o.day)],onSelectOption:b,onConfirmSelection:k,onCancelSelection:D})]},"".concat(o.day,"-").concat(a));var _};function Kp(e,t){var n;if(null===t||void 0===t||null===(n=t.planOverview)||void 0===n||!n.startDate)return null;const r=new Date(t.planOverview.startDate+"T00:00:00"),i=864e5,o=r.getDay(),a=0===o?6:o-1,s=new Date(r.getTime()-a*i),l=new Date(s.getTime()+7*(e-1)*i),c=new Date(l.getTime()+5184e5),u={month:"short",day:"numeric"},d=l.toLocaleDateString("en-US",u),h=c.toLocaleDateString("en-US",u);return"".concat(d," - ").concat(h)}function Yp(e){return Array.isArray(e.workouts)?e.workouts:[e]}function Gp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yp;if(null===e||void 0===e||!e.workouts)return{runMiles:0,bikeMiles:0,ellipticalMiles:0,runEqMiles:0,totalMiles:0,equivalentMiles:0};const n=void 0!==e.totalMileage&&null!==e.totalMileage;let r=0,i=0,o=0;e.workouts.forEach(e=>{t(e).forEach(e=>{if("brick"===e.type)if(void 0!==e.distance&&null!==e.distance)r+=parseFloat(e.distance);else{var t,n,a,s;const o=null===(t=e.workout)||void 0===t||null===(n=t.description)||void 0===n?void 0:n.match(/(\d+(?:\.\d+)?)\s*mi.*run/i),l=null===(a=e.workout)||void 0===a||null===(s=a.description)||void 0===s?void 0:s.match(/(\d+(?:\.\d+)?)\s*mi.*bike/i);o&&(r+=parseFloat(o[1])),l&&(i+=parseFloat(l[1]))}else if("bike"===e.type){if(void 0!==e.distance&&null!==e.distance){const t=parseFloat(e.distance);o+=t}}else"rest"===e.type||void 0!==e.distance&&null!==e.distance&&(r+=parseFloat(e.distance))})});const a=i/3+0,s=r+o,l=n?e.totalMileage:s;return{runMiles:Math.round(10*r)/10,bikeMiles:Math.round(10*i)/10,ellipticalMiles:Math.round(0)/10,runEqMiles:Math.round(10*o)/10,equivalentMiles:Math.round(10*a)/10,totalMiles:Math.round(10*l)/10}}function Qp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yp;if(null===e||void 0===e||!e.weeks)return{last7Days:0,last30Days:0,allTime:0};const r=new Date,i=new Date(r.getTime()-6048e5),o=new Date(r.getTime()-2592e6);let a=0,s=0,l=0;return e.weeks.forEach(e=>{e&&e.workouts&&e.workouts.forEach(r=>{n(r).forEach(n=>{var r,c;const u=n.completed||(null===(r=t["".concat(e.week,"-").concat(n.day,"-").concat(n.workoutIndex||0)])||void 0===r?void 0:r.completed),d=n.actualDistance||(null===(c=t["".concat(e.week,"-").concat(n.day,"-").concat(n.workoutIndex||0)])||void 0===c?void 0:c.actualDistance);if(u&&d){var h;const r=n.completedAt||(null===(h=t["".concat(e.week,"-").concat(n.day,"-").concat(n.workoutIndex||0)])||void 0===h?void 0:h.completedAt),c=r?new Date(r):null;l+=d,c&&(c>=i&&(a+=d),c>=o&&(s+=d))}})})}),{last7Days:Math.round(10*a)/10,last30Days:Math.round(10*s)/10,allTime:Math.round(10*l)/10}}const Xp={clientId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_STRAVA_CLIENT_ID||"185232",clientSecret:void 0,redirectUri:"".concat(window.location.origin,"/auth/strava/callback"),authorizationUrl:"https://www.strava.com/oauth/authorize",apiBaseUrl:"https://www.strava.com/api/v3",scope:"activity:read_all"};Xp.clientId||console.error("\u26a0\ufe0f REACT_APP_STRAVA_CLIENT_ID is not set. Strava integration will not work.");const Zp=Xp;const Jp=new class{getAuthorizationUrl(){const e=new URLSearchParams({client_id:Zp.clientId,redirect_uri:Zp.redirectUri,response_type:"code",approval_prompt:"auto",scope:Zp.scope});return"".concat(Zp.authorizationUrl,"?").concat(e.toString())}async exchangeToken(e){try{const t=(0,At.Uz)(),n=(0,At.Qg)(t,"exchangeStravaToken"),r=await n({code:e,clientId:Zp.clientId});if(!r.data.success)throw Oe.A.error("\u274c Strava token exchange error:",r.data.error),new Error("Strava token exchange failed: ".concat(r.data.error));return r.data.data}catch(t){throw Oe.A.error("\u274c Strava token exchange error:",t),new Error("Strava token exchange failed: ".concat(t.message))}}async refreshAccessToken(e){try{const t=(0,At.Uz)(),n=(0,At.Qg)(t,"refreshStravaToken"),r=await n({refreshToken:e,clientId:Zp.clientId});if(!r.data.success)throw Oe.A.error("\u274c Strava token refresh error:",r.data.error),new Error("Failed to refresh Strava access token: ".concat(r.data.error));return r.data.data}catch(t){throw Oe.A.error("\u274c Strava token refresh error:",t),new Error("Failed to refresh Strava access token: ".concat(t.message))}}async getActivities(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const r=new URLSearchParams({page:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1).toString(),per_page:t.toString()});if(n){const e=Math.floor(n.getTime()/1e3);r.append("after",e.toString()),Oe.A.log("\ud83d\udcc5 Filtering activities after: ".concat(n.toLocaleDateString()," (").concat(e,")"))}const i=await fetch("".concat(Zp.apiBaseUrl,"/athlete/activities?").concat(r.toString()),{headers:{Authorization:"Bearer ".concat(e)}});if(!i.ok){if(401===i.status)throw new Error("STRAVA_TOKEN_EXPIRED");throw new Error("Failed to fetch Strava activities: ".concat(i.statusText))}return i.json()}async getActivity(e,t){const n=await fetch("".concat(Zp.apiBaseUrl,"/activities/").concat(t),{headers:{Authorization:"Bearer ".concat(e)}});if(!n.ok){if(401===n.status)throw new Error("STRAVA_TOKEN_EXPIRED");throw new Error("Failed to fetch Strava activity: ".concat(n.statusText))}return n.json()}async getActivityStreams(e,t){const n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:["time","distance","altitude","heartrate","cadence","watts","temp","moving","grade_smooth"]).join(","),r=await fetch("".concat(Zp.apiBaseUrl,"/activities/").concat(t,"/streams?keys=").concat(n,"&key_by_type=true"),{headers:{Authorization:"Bearer ".concat(e)}});if(!r.ok){if(401===r.status)throw new Error("STRAVA_TOKEN_EXPIRED");if(404===r.status)return Oe.A.log("\u26a0\ufe0f No stream data available for this activity"),null;throw new Error("Failed to fetch activity streams: ".concat(r.statusText))}return r.json()}async getAthlete(e){const t=await fetch("".concat(Zp.apiBaseUrl,"/athlete"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok){if(401===t.status)throw new Error("STRAVA_TOKEN_EXPIRED");throw new Error("Failed to fetch Strava athlete: ".concat(t.statusText))}return t.json()}isTokenExpired(e){return e-Math.floor(Date.now()/1e3)<3600}matchActivity(e,t){const n=new Date(e.start_date_local),r=new Date(t.date);if(n.getFullYear()!==r.getFullYear()||n.getMonth()!==r.getMonth()||n.getDate()!==r.getDate())return!1;if(!["Ride","VirtualRide","EBikeRide"].includes(e.type))return!1;if(t.distance){const n=e.distance/1609.34,r=t.distance;if(Math.abs(n-r)>.2*r)return!1}return!0}convertToRunEQCompletion(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=e.distance/1609.34,r=Math.round(e.moving_time/60);let i=null;if(["Run","VirtualRun"].includes(e.type)&&n>0){const t=e.moving_time/n,r=Math.floor(t/60),o=Math.round(t%60);i="".concat(r,":").concat(o.toString().padStart(2,"0"),"/mi")}let o=null;e.splits_standard&&e.splits_standard.length>0?o=e.splits_standard.map((e,t)=>({lap:t+1,distance:(e.distance/1609.34).toFixed(2)+" mi",distanceMiles:(e.distance/1609.34).toFixed(2),time:this.formatTime(e.moving_time),pace:e.average_speed?this.calculatePaceFromSpeed(e.average_speed):null,elevationGain:e.elevation_difference?Math.round(3.28084*e.elevation_difference):null,avgHeartRate:e.average_heartrate||null})):e.splits_metric&&e.splits_metric.length>0&&(o=e.splits_metric.map((e,t)=>({lap:t+1,distance:(e.distance/1e3).toFixed(2)+" km",distanceMiles:(e.distance/1609.34).toFixed(2),time:this.formatTime(e.moving_time),pace:e.average_speed?this.calculatePaceFromSpeed(e.average_speed):null,elevationGain:e.elevation_difference?Math.round(3.28084*e.elevation_difference):null,avgHeartRate:e.average_heartrate||null})));const a={distance:n.toFixed(2),duration:r,pace:i,notes:"Synced from Strava: ".concat(e.name),avgHeartRate:e.average_heartrate||null,maxHeartRate:e.max_heartrate||null,cadence:e.average_cadence||null,elevationGain:e.total_elevation_gain?Math.round(3.28084*e.total_elevation_gain):null,stravaActivityId:e.id,stravaActivityUrl:"https://www.strava.com/activities/".concat(e.id)};return o&&(a.laps=o),e.suffer_score&&(a.sufferScore=e.suffer_score),e.device_name&&(a.device=e.device_name),e.calories&&(a.calories=e.calories),t&&(a.streams=this.processStreams(t)),a}processStreams(e){const t={};return e.altitude&&(t.elevation=e.altitude.data),e.heartrate&&(t.heartRate=e.heartrate.data),e.distance&&(t.distance=e.distance.data),e.time&&(t.time=e.time.data),t}formatTime(e){const t=Math.floor(e/60),n=Math.round(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))}calculatePaceFromSpeed(e){if(!e||0===e)return null;const t=1609.34/e,n=Math.floor(t/60),r=Math.round(t%60);return"".concat(n,":").concat(r.toString().padStart(2,"0"),"/mi")}};const $p=new class{async syncActivities(e,t,n,r){if(Oe.A.log("\ud83d\udd04 Starting Strava sync...",{userId:e,currentWeek:r}),!t.stravaConnected)return Oe.A.log("\u26a0\ufe0f Strava not connected - skipping sync"),{success:!1,error:"Strava not connected"};try{var i,o,a,s,l;let d=t.stravaAccessToken;const h=t.stravaTokenExpiresAt;if(Jp.isTokenExpired(h)){Oe.A.log("\ud83d\udd04 Access token expired - refreshing...");const n=await Jp.refreshAccessToken(t.stravaRefreshToken),r=(0,Ie.doc)(Pe.db,"users",e);await(0,Ie.updateDoc)(r,{stravaAccessToken:n.access_token,stravaRefreshToken:n.refresh_token,stravaTokenExpiresAt:n.expires_at}),d=n.access_token,Oe.A.log("\u2705 Token refreshed successfully")}const p=null!==n&&void 0!==n&&null!==(i=n.planOverview)&&void 0!==i&&i.startDate?new Date(n.planOverview.startDate+"T00:00:00"):null;p||Oe.A.log("\u26a0\ufe0f No plan start date found - fetching all recent activities");const m=await Jp.getActivities(d,1,50,p);Oe.A.log("\ud83d\udce5 Fetched ".concat(m.length," Strava activities ").concat(p?"since ".concat(p.toLocaleDateString()):"")),Oe.A.log("\ud83d\udd0d Debug sync:",{currentWeek:r,totalWeeks:null===(o=n.weeks)||void 0===o?void 0:o.length,weeksArrayExists:!!n.weeks,weekIndex:r-1,weekDataExists:!(null===(a=n.weeks)||void 0===a||!a[r-1]),weekData:null!==(s=n.weeks)&&void 0!==s&&s[r-1]?{weekNumber:n.weeks[r-1].weekNumber,hasWorkouts:!!n.weeks[r-1].workouts,workoutCount:null===(l=n.weeks[r-1].workouts)||void 0===l?void 0:l.length}:null});let f=[];if(n.weeks&&n.weeks.length>0){const e=[r];r>1&&e.push(r-1),r>2&&e.push(r-2),e.forEach(e=>{const t=n.weeks[e-1];t&&t.workouts&&t.workouts.forEach(t=>{f.push((0,c.A)((0,c.A)({},t),{},{weekNumber:e,workoutIndex:0}))})})}else{if(Oe.A.log("\u26a0\ufe0f Weeks array is empty - generating minimal workout structure for matching"),!p)return Oe.A.log("\u26a0\ufe0f Cannot generate workouts - no plan start date"),{success:!1,error:"Training plan structure not available"};p.getDay();const e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=864e5,i=7*(r-1),o=new Date(p.getTime()+i*n),a=t.preferredBikeDays||[];for(let t=0;t<7;t++){const i=new Date(o.getTime()+t*n),s=e[i.getDay()],l=a.includes(s);f.push({day:s,type:l?"bike":0===t||6===t?"rest":"easy",date:i.toISOString().split("T")[0],weekNumber:r,workoutIndex:0,equipmentSpecific:l,workout:{name:l?"Bike Workout":"Easy Run",description:l?"Cyclete workout":"Easy run"}})}Oe.A.log("\u2705 Generated ".concat(f.length," workouts for week ").concat(r," based on plan start date"))}0===f.length&&Oe.A.log("\u26a0\ufe0f No workouts available for matching - sync will complete with 0 matches"),Oe.A.log("\ud83d\udd0d Checking ".concat(f.length," workouts for matching"));const g=[],y=await this.getCompletedWorkouts(e);for(const e of m){Oe.A.log('\ud83d\udccb Activity: "'.concat(e.name,'" - Type: "').concat(e.type,'" - Date: ').concat(e.start_date_local));if(!["Ride","VirtualRide","EBikeRide","Run","VirtualRun"].includes(e.type)){Oe.A.log("  \u23ed\ufe0f Skipping - unsupported type: ".concat(e.type));continue}const t=this.findMatchingWorkout(e,f,y);var u;if(t)Oe.A.log("\u2705 Matched Strava activity ".concat(e.id," to workout:"),{day:t.day,week:t.weekNumber,workout:null===(u=t.workout)||void 0===u?void 0:u.name,type:e.type}),g.push({activity:e,workout:t})}Oe.A.log("\ud83c\udfaf Found ".concat(g.length," matching workouts"));let v=0;for(const t of g){await this.completeWorkout(e,t.workout,t.activity,d)&&v++}return Oe.A.log("\u2705 Strava sync complete: ".concat(v,"/").concat(g.length," workouts auto-completed")),{success:!0,activitiesFetched:m.length,matchesFound:g.length,workoutsCompleted:v}}catch(d){return console.error("\u274c Strava sync error:",d),"STRAVA_TOKEN_EXPIRED"===d.message?{success:!1,error:"Token expired - please reconnect Strava"}:{success:!1,error:d.message}}}findMatchingWorkout(e,t,n){const r=new Date(e.start_date_local),i=e.distance/1609.34;Oe.A.log("\ud83d\udd0d Matching activity:",{name:e.name,type:e.type,date:e.start_date_local,activityDate:r.toLocaleDateString(),distance:i.toFixed(2)+" mi"});const o=["Ride","VirtualRide","EBikeRide"].includes(e.type),a=["Run","VirtualRun"].includes(e.type);for(const s of t){const t="".concat(s.weekNumber,"-").concat(s.day,"-").concat(s.workoutIndex||0);if(Oe.A.log("  \ud83d\udd11 Generated workout key: ".concat(t),{weekNumber:s.weekNumber,day:s.day,workoutIndex:s.workoutIndex,hasWorkoutIndex:s.hasOwnProperty("workoutIndex")}),Oe.A.log("  \ud83d\udccb Completed workouts keys:",n.map(e=>e.key)),n.some(e=>e.key===t)){Oe.A.log("  \u23ed\ufe0f Skipping ".concat(s.day," - already completed"));continue}const i="bike"===s.type||s.equipmentSpecific,l=["tempo","intervals","hills","longRun","easy"].includes(s.type),c=new Date(s.date+" 00:00:00");Oe.A.log("  \ud83d\udcc5 Checking ".concat(s.day,":"),{workoutDate:c.toLocaleDateString(),rawDate:s.date,workoutType:s.type,isBikeWorkout:i,isRunWorkout:l,activityIsBike:o,activityIsRun:a});if(!(r.getFullYear()===c.getFullYear()&&r.getMonth()===c.getMonth()&&r.getDate()===c.getDate())){Oe.A.log("    \u274c Date mismatch");continue}const u=o&&l||a&&i;if(o&&i||a&&l||u)return u&&Oe.A.log("    \u26a0\ufe0f Life adaptation detected: ".concat(e.type," activity matched to ").concat(s.type," workout")),Oe.A.log("    \u2705 MATCH FOUND!"),s;Oe.A.log("    \u274c Type mismatch: ".concat(e.type," activity doesn't match ").concat(s.type," workout"))}return Oe.A.log("  \u274c No match found for this activity"),null}async getCompletedWorkouts(e){try{const{doc:t,getDoc:r}=await Promise.resolve().then(n.bind(n,667)),{db:i}=await Promise.resolve().then(n.bind(n,121)),o=t(i,"users",e),a=await r(o);if(!a.exists())return Oe.A.log("\ud83d\udce6 getCompletedWorkouts: User doc does not exist"),[];const s=a.data().completedWorkouts||{};Oe.A.log("\ud83d\udce6 getCompletedWorkouts: Raw data from Firebase:",s),Oe.A.log("\ud83d\udce6 getCompletedWorkouts: Number of completed workouts:",Object.keys(s).length);const l=Object.keys(s).map(e=>({key:e,data:s[e]}));return Oe.A.log("\ud83d\udce6 getCompletedWorkouts: Returning array:",l),l}catch(t){return console.error("Error fetching completed workouts:",t),[]}}async completeWorkout(e,t,r,i){try{Oe.A.log("\ud83d\udce5 Fetching detailed activity data for ".concat(r.id,"..."));const a=await Jp.getActivity(i,r.id);Oe.A.log("  \u2705 Got detailed activity data");let s=null;try{s=await Jp.getActivityStreams(i,r.id),s&&Oe.A.log("  \u2705 Got activity streams (elevation profile, HR data, etc.)")}catch(o){Oe.A.log("  \u26a0\ufe0f Could not fetch streams (not critical):",o.message)}const l=Jp.convertToRunEQCompletion(a,s),u=["Run","VirtualRun"],d=["Ride","VirtualRide","EBikeRide"].includes(r.type),h=u.includes(r.type),p="bike"===t.type||t.equipmentSpecific,m=["tempo","intervals","hills","longRun","easy"].includes(t.type),f=d&&m||h&&p;let g=l.notes||"Synced from Strava: ".concat(r.name);if(f){const e=p?"bike":"run";g="Life adaptation: Did ".concat(d?"bike":"run"," instead of scheduled ").concat(e,". ").concat(g)}const y="".concat(t.weekNumber,"-").concat(t.day,"-").concat(t.workoutIndex||0),{doc:v,updateDoc:w,arrayUnion:b}=await Promise.resolve().then(n.bind(n,667)),{db:k}=await Promise.resolve().then(n.bind(n,121)),D=v(k,"users",e);return await w(D,{["completedWorkouts.".concat(y)]:(0,c.A)((0,c.A)({completedAt:(new Date).toISOString(),completed:!0},l),{},{notes:g,autoCompletedFromStrava:!0,isLifeAdaptation:f})}),Oe.A.log("\u2705 Auto-completed workout: ".concat(y)),l.laps&&Oe.A.log("  \ud83d\udcca Stored ".concat(l.laps.length," lap splits")),l.streams&&Oe.A.log("  \ud83d\udcc8 Stored elevation and HR profile data"),!0}catch(o){return console.error("\u274c Error completing workout:",o),!1}}getSyncStatus(e){if(!e.stravaConnected)return{connected:!1,status:"not_connected",message:"Connect Strava to enable automatic workout tracking"};const t=e.stravaLastSync;if(!t)return{connected:!0,status:"never_synced",message:"Connected - sync will happen automatically"};const n=new Date(t),r=(new Date-n)/36e5;return r<1?{connected:!0,status:"recent",message:"Synced recently",lastSync:n}:{connected:!0,status:"ready",message:"Last synced ".concat(Math.round(r)," hours ago"),lastSync:n}}},em=e=>{let{userProfile:t,trainingPlan:n,currentWeek:r}=e;const i=Hl(),[o,s]=(0,a.useState)(!1);return{stravaSyncing:o,handleManualStravaSync:async()=>{if(Oe.A.log("\ud83d\udd18 BUTTON CLICKED - handleManualStravaSync called"),null!==t&&void 0!==t&&t.stravaConnected&&Pe.j2.currentUser&&n){s(!0),Oe.A.log("\ud83d\udd04 Manual Strava sync triggered...");try{const e=await $p.syncActivities(Pe.j2.currentUser.uid,t,n,r);e.success?(Oe.A.log("\u2705 Strava sync successful:",e),localStorage.setItem("runeq_stravaLastSync",(new Date).toISOString()),e.workoutsCompleted>0?(Oe.A.log("\ud83d\udd04 ".concat(e.workoutsCompleted," workouts auto-completed - refreshing...")),window.location.reload()):(i.success("Sync complete! Found ".concat(e.activitiesFetched," activities, ").concat(e.matchesFound," matched workouts.")),s(!1))):(console.warn("\u26a0\ufe0f Strava sync failed:",e.error),i.error("Sync failed: ".concat(e.error)),s(!1))}catch(e){console.error("\u274c Strava sync error:",e),i.error("Sync error: ".concat(e.message)),s(!1)}}else Oe.A.log("\u274c Cannot sync - missing requirements:",{stravaConnected:null===t||void 0===t?void 0:t.stravaConnected,hasUser:!!Pe.j2.currentUser,hasTrainingPlan:!!n})},handleDisconnectStrava:async()=>{if(Pe.j2.currentUser&&window.confirm("Are you sure you want to disconnect Strava? You can reconnect anytime."))try{const e=(0,Ie.doc)(Pe.db,"users",Pe.j2.currentUser.uid);await(0,Ie.updateDoc)(e,{stravaConnected:!1,stravaAccessToken:null,stravaRefreshToken:null,stravaTokenExpiresAt:null,stravaAthleteId:null,stravaAthleteName:null}),Oe.A.log("\u2705 Strava disconnected"),i.success("Strava disconnected successfully"),window.location.reload()}catch(e){console.error("\u274c Error disconnecting Strava:",e),i.error("Failed to disconnect: ".concat(e.message))}}}};function tm(e){var t,n;let{currentWeek:r,setCurrentWeek:i,trainingPlan:o,currentWeekData:a,workoutCompletions:s,getWorkouts:l,userProfile:u,setShowManagePlanModal:d,setShowInjuryRecoveryModal:h,setShowDebugTool:p,clearAllData:m,toast:f}=e;const g=re(),{stravaSyncing:y,handleManualStravaSync:v,handleDisconnectStrava:w}=em({userProfile:u,trainingPlan:o,currentWeek:r}),b=Kp(r,o),k=Gp(a,l),D=k.equivalentMiles>0||k.runEqMiles>0,x=Qp(o,s,l),E=x.allTime>0,S=a.phase||"base",A={base:{color:"#3b82f6",bgColor:"rgba(59, 130, 246, 0.15)",borderColor:"rgba(59, 130, 246, 0.4)",icon:"\ud83c\udfc3",message:"Building your aerobic foundation - consistency over intensity"},build:{color:"#f59e0b",bgColor:"rgba(245, 158, 11, 0.15)",borderColor:"rgba(245, 158, 11, 0.4)",icon:"\ud83c\udfd7\ufe0f",message:"Building strength and speed - time to push harder"},peak:{color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.15)",borderColor:"rgba(239, 68, 68, 0.4)",icon:"\ud83c\udfd4\ufe0f",message:"Peak fitness - your hardest workouts are here"},taper:{color:"#8b5cf6",bgColor:"rgba(139, 92, 246, 0.15)",borderColor:"rgba(139, 92, 246, 0.4)",icon:"\u26a1",message:"Tapering for race day - trust your training"},recovery:{color:"#22c55e",bgColor:"rgba(34, 197, 94, 0.15)",borderColor:"rgba(34, 197, 94, 0.4)",icon:"\ud83c\udf31",message:"Recovery week - let your body adapt and rebuild"}},C=A[S]||A.base;return(0,je.jsx)("div",{style:{color:"#AAAAAA",padding:"20px 0"},children:(0,je.jsxs)("div",{className:"container",children:[(0,je.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,je.jsxs)("h1",{className:"dashboard-week-title",style:{margin:"0",lineHeight:"1.2"},children:["Week ",r]}),b&&(0,je.jsxs)("div",{style:{fontSize:"0.9rem",color:"#AAAAAA",marginTop:"4px"},children:["Week of ",b]})]}),(0,je.jsx)("div",{style:{display:"flex",gap:"12px",alignItems:"center",marginBottom:"16px"},children:(0,je.jsx)("button",{onClick:()=>g("/welcome"),style:{padding:"8px 16px",background:"rgba(0, 245, 212, 0.1)",border:"1px solid rgba(0, 245, 212, 0.3)",borderRadius:"6px",color:"#00f5d4",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.2s"},onMouseEnter:e=>{e.target.style.background="rgba(0, 245, 212, 0.2)",e.target.style.borderColor="#00f5d4"},onMouseLeave:e=>{e.target.style.background="rgba(0, 245, 212, 0.1)",e.target.style.borderColor="rgba(0, 245, 212, 0.3)"},children:"\u2190 Coach's Analysis"})}),(0,je.jsxs)("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap",marginBottom:"16px"},children:[(0,je.jsxs)("div",{className:"dashboard-stats-badge",style:{background:"rgba(0, 212, 255, 0.2)",color:"#00D4FF",padding:"8px 14px",borderRadius:"10px",fontWeight:"600",fontSize:"1.1rem",border:"1px solid rgba(0, 212, 255, 0.3)"},children:["\ud83d\udcca ",k.totalMiles," Miles This Week",D&&(0,je.jsxs)("div",{className:"stats-subtext",style:{fontSize:"0.85rem",fontWeight:"500",marginTop:"4px",color:"#66E8FF"},children:[k.runMiles>0&&"".concat(k.runMiles,"mi running"),k.runEqMiles>0&&(k.runMiles>0?" + ".concat(k.runEqMiles,"mi RunEQ"):"".concat(k.runEqMiles,"mi RunEQ")),k.bikeMiles>0&&" + ".concat(k.bikeMiles,"mi bike"),k.ellipticalMiles>0&&" + ".concat(k.ellipticalMiles,"mi elliptical"),k.equivalentMiles>0&&(0,je.jsxs)("span",{style:{fontSize:"0.75rem",opacity:.8,display:"block",marginTop:"2px"},children:["(",k.equivalentMiles,"mi equivalent activity)"]})]})]}),E&&(0,je.jsxs)("div",{className:"dashboard-stats-badge",style:{background:"rgba(34, 197, 94, 0.15)",color:"#22c55e",padding:"8px 14px",borderRadius:"10px",fontWeight:"600",fontSize:"1.1rem",border:"1px solid rgba(34, 197, 94, 0.3)"},children:["\ud83c\udfc3 ",x.last7Days," Miles (7 days)",(0,je.jsxs)("div",{style:{fontSize:"0.8rem",fontWeight:"500",marginTop:"4px",color:"#4ade80"},children:[x.last30Days,"mi last 30 days \u2022 ",x.allTime,"mi total"]})]})]}),(0,je.jsxs)("div",{style:{background:C.bgColor,border:"2px solid ".concat(C.borderColor),borderRadius:"12px",padding:"14px 18px",marginTop:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("div",{className:"dashboard-phase-icon",style:{fontSize:"1.8rem",lineHeight:"1"},children:C.icon}),(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsx)("div",{style:{color:C.color,fontSize:"1rem",fontWeight:"700",marginBottom:"2px"},children:(0,Bl.Z0)(S)}),(0,je.jsx)("div",{style:{color:"#CCCCCC",fontSize:"0.85rem",fontWeight:"500"},children:C.message})]})]}),(0,je.jsxs)("div",{className:"dashboard-button-row",style:{display:"flex",gap:"8px",marginTop:"16px",flexWrap:"wrap",alignItems:"center"},children:[(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-prev",onClick:()=>i(Math.max(1,r-1)),disabled:r<=1,children:"\u2190 Prev"}),(0,je.jsx)("select",{className:"dashboard-week-select",value:r,onChange:e=>i(parseInt(e.target.value,10)),children:Array.from({length:(null===o||void 0===o||null===(t=o.planOverview)||void 0===t?void 0:t.totalWeeks)||12},(e,t)=>t+1).map(e=>(0,je.jsxs)("option",{value:e,children:["Week ",e]},e))}),(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-next",onClick:()=>{var e;return i(Math.min((null===o||void 0===o||null===(e=o.planOverview)||void 0===e?void 0:e.totalWeeks)||12,r+1))},disabled:r===((null===o||void 0===o||null===(n=o.planOverview)||void 0===n?void 0:n.totalWeeks)||12),children:"Next \u2192"}),(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-manage",onClick:()=>d(!0),title:"Adjust training schedule, days, and preferences",children:"\u2699\ufe0f Manage Plan"}),(0,je.jsx)("button",{className:"dashboard-nav-button",onClick:()=>p(!0),title:"Debug tool - test plan components without re-onboarding",style:{background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.3)",color:"#8b5cf6"},children:"\ud83d\udd27 Debug"}),null!==o&&void 0!==o&&o.injuryRecoveryActive?(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-recovery",onClick:async()=>{if(window.confirm("Cancel injury recovery protocol and restore your original training plan?"))try{var e,t,n,r;if(console.log("\ud83c\udfe5 Canceling injury recovery..."),console.log("  trainingPlan.injuryRecoveryActive:",null===o||void 0===o?void 0:o.injuryRecoveryActive),console.log("  trainingPlan.originalPlanBeforeInjury exists:",!(null===o||void 0===o||!o.originalPlanBeforeInjury)),console.log("  originalPlanBeforeInjury.weeks count:",null===o||void 0===o||null===(e=o.originalPlanBeforeInjury)||void 0===e||null===(t=e.weeks)||void 0===t?void 0:t.length),console.log("  auth.currentUser.uid:",null===(n=Pe.j2.currentUser)||void 0===n?void 0:n.uid),!o.originalPlanBeforeInjury){const e="Cannot restore original plan - backup not found";return console.error("\u274c",e),void alert(e)}if(!o.originalPlanBeforeInjury.weeks){const e="Cannot restore original plan - backup weeks not found";return console.error("\u274c",e),void alert(e)}const a=o.originalPlanBeforeInjury.weeks,s=a.map((e,t)=>e&&e.workouts&&0!==e.workouts.length?null:t+1).filter(Boolean);if(s.length>0){var i;console.warn("\u26a0\ufe0f Original plan backup has null weeks:",s);const e=a.map((e,t)=>{if(!e||!e.workouts||0===e.workouts.length){const e=o.weeks[t];if(e&&e.workouts&&e.workouts.length>0)return console.log("  Repairing week ".concat(t+1," from current plan")),e}return e}),t=e.filter(e=>!e||!e.workouts||0===e.workouts.length).length;if(t>0)return void alert("Cannot restore plan - ".concat(t,' weeks are corrupted in both backup and current plan. Please use "Manage Plan" to regenerate your training plan instead.'));const n=(0,c.A)((0,c.A)({},o),{},{weeks:e,injuryRecoveryActive:!1,injuryRecoveryInfo:null,injuryRecoveryCoaching:null,originalPlanBeforeInjury:null});console.log("  Restored plan weeks count:",null===(i=n.weeks)||void 0===i?void 0:i.length),console.log("  Saving repaired plan to Firestore...");const r=await Ne.saveTrainingPlan(Pe.j2.currentUser.uid,n);return r.success?(console.log("  \u2705 Saved successfully, reloading..."),void window.location.reload()):void alert("Error saving: ".concat(r.error))}const l=(0,c.A)((0,c.A)({},o),{},{weeks:a,injuryRecoveryActive:!1,injuryRecoveryInfo:null,injuryRecoveryCoaching:null,originalPlanBeforeInjury:null});console.log("  Restored plan weeks count:",null===(r=l.weeks)||void 0===r?void 0:r.length),console.log("  Saving to Firestore...");const u=await Ne.saveTrainingPlan(Pe.j2.currentUser.uid,l);if(!u.success)return void alert("Error saving: ".concat(u.error));console.log("  \u2705 Saved successfully, reloading..."),window.location.reload()}catch(a){console.error("\u274c Error canceling injury recovery:",a),alert("Error restoring plan: ".concat(a.message))}},title:"Cancel injury recovery and restore original plan",children:"\u2713 Cancel Recovery Protocol"}):(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-injury",onClick:()=>h(!0),title:"Modify plan for injury recovery with cross-training",children:"\ud83c\udfe5 Report Injury"}),(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-reset",onClick:()=>{window.confirm("Clear all data and start over? This will reset your profile and training plan.")&&m()},title:"Clear all data and restart onboarding",children:"\ud83d\uddd1\ufe0f Reset"}),null!==u&&void 0!==u&&u.stravaConnected?(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-strava",title:"Connected as ".concat(u.stravaAthleteName||"Strava athlete"),children:"\u2713 Strava Connected"}),(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-strava",onClick:e=>{e.preventDefault(),e.stopPropagation(),v()},disabled:y,title:"Manually sync your Strava activities",children:y?"\u23f3 Syncing...":"\ud83d\udd04 Sync Now"}),(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-strava",onClick:w,title:"Disconnect Strava account",style:{opacity:.7},children:"\u2715 Disconnect"})]}):(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-strava strava-brand-button",onClick:()=>{const e=Jp.getAuthorizationUrl();window.location.href=e},title:"Connect with Strava",children:(0,je.jsx)("img",{src:"/images/strava/btn_strava_connect_with_orange_x2.png",alt:"Connect with Strava",className:"strava-connect-img"})}),(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-logout",onClick:async()=>{window.confirm("Logout? Your data is saved and will be here when you log back in.")&&await(0,Fe.CI)(Pe.j2)},title:"Logout (your data is saved)",children:"\ud83d\udeaa Logout"})]})]})})}function nm(e){let{trainingPlan:t,currentWeekData:n,userProfile:r}=e;const[i,o]=(0,a.useState)(!0),[s,l]=(0,a.useState)(!0);return(0,je.jsxs)(je.Fragment,{children:["injury-recovery"===n.weekType&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("div",{className:"card",style:{marginBottom:"20px",background:"rgba(239, 68, 68, 0.15)",border:"2px solid rgba(239, 68, 68, 0.5)"},children:(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{className:"dashboard-alert-emoji",style:{fontSize:"1.5rem"},children:"\ud83c\udfe5"}),(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsx)("h3",{style:{margin:"0 0 4px 0",color:"#ef4444"},children:"Injury Recovery Protocol Active"}),(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem",color:"#dc2626"},children:["No running this week. You're cross-training to maintain fitness while healing.",(null===r||void 0===r?void 0:r.injuryRecovery)&&(0,je.jsxs)("span",{children:[" ","Return to running: Week ",r.injuryRecovery.returnToRunningWeek,"."]})]})]})]})}),(null===t||void 0===t?void 0:t.injuryRecoveryCoaching)&&(0,je.jsx)("div",{className:"card",style:{marginBottom:"20px",background:"linear-gradient(135deg, #1a2a3a 0%, #0f1f2f 100%)",border:"2px solid #00D4FF"},children:(0,je.jsxs)("div",{style:{padding:"20px"},children:[(0,je.jsxs)("h3",{onClick:()=>o(!i),style:{margin:"0 0 16px 0",color:"#00D4FF",fontSize:"1.3rem",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",userSelect:"none",transition:"opacity 0.2s ease"},onMouseEnter:e=>e.currentTarget.style.opacity="0.8",onMouseLeave:e=>e.currentTarget.style.opacity="1",children:[(0,je.jsx)("span",{children:"\ud83d\udca1"}),(0,je.jsx)("span",{style:{flex:1},children:"Coach's Recovery Guidance"}),(0,je.jsx)("span",{style:{fontSize:"1rem",transition:"transform 0.3s ease",transform:i?"rotate(180deg)":"rotate(0deg)",display:"inline-block"},children:"\u25bc"})]}),i&&(0,je.jsx)("div",{className:"dashboard-coaching-text",style:{color:"#DDD",fontSize:"1rem",lineHeight:"1.8",whiteSpace:"pre-line",animation:"fadeIn 0.3s ease"},children:t.injuryRecoveryCoaching})]})})]}),"return-to-running"===n.weekType&&(0,je.jsx)("div",{className:"card",style:{marginBottom:"20px",background:"rgba(34, 197, 94, 0.15)",border:"2px solid rgba(34, 197, 94, 0.5)"},children:(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{className:"dashboard-alert-emoji",style:{fontSize:"1.5rem"},children:"\ud83c\udfaf"}),(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsx)("h3",{style:{margin:"0 0 4px 0",color:"#22c55e"},children:"Return to Running Week"}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#16a34a"},children:"Gradual return to running mixed with cross-training. Listen to your body and ease back into it."})]})]})}),(null===t||void 0===t?void 0:t.planAdjustmentCoaching)&&(0,je.jsx)("div",{className:"card",style:{marginBottom:"20px",background:"linear-gradient(135deg, #1a2a3a 0%, #0f1f2f 100%)",border:"2px solid #3b82f6"},children:(0,je.jsxs)("div",{style:{padding:"20px"},children:[(0,je.jsxs)("h3",{onClick:()=>l(!s),style:{margin:"0 0 16px 0",color:"#3b82f6",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",userSelect:"none"},children:[(0,je.jsx)("span",{children:"\ud83d\udca1"}),(0,je.jsx)("span",{style:{flex:1},children:"Coach's Take on Your Plan Adjustments"}),(0,je.jsx)("span",{style:{fontSize:"1rem",transition:"transform 0.3s ease",transform:s?"rotate(180deg)":"rotate(0deg)",display:"inline-block"},children:"\u25bc"})]}),s&&(0,je.jsx)("div",{className:"dashboard-coaching-text",style:{color:"#DDD",fontSize:"1rem",lineHeight:"1.8",whiteSpace:"pre-line",animation:"fadeIn 0.3s ease"},children:t.planAdjustmentCoaching})]})})]})}const rm=e=>{let{currentWeek:t,workoutCompletions:n,setWorkoutCompletions:r}=e;const i=Hl(),[o,s]=(0,a.useState)({isOpen:!1,workout:null,distance:"",notes:""});return{completionModal:o,setCompletionModal:s,handleMarkComplete:async e=>{var o,a;if(!Pe.j2.currentUser)return void i.error("You must be logged in to complete workouts");const l=e.workoutIndex||0,u="".concat(t,"-").concat(e.day,"-").concat(l);if((null===(o=n[u])||void 0===o?void 0:o.completed)||e.completed){const n=!1;r(e=>(0,c.A)((0,c.A)({},e),{},{[u]:{completed:n,completedAt:null,actualDistance:null,notes:null}}));try{(await Ne.markWorkoutComplete(Pe.j2.currentUser.uid,t,e.day,n,null,null)).success||(console.error("Failed to save completion status"),r(e=>{const t=(0,c.A)({},e);return delete t[u],t}),i.error("Failed to save. Please try again."))}catch(d){console.error("Error uncompleting workout:",d)}return}if("rest"===e.type){const n=!0;r(e=>(0,c.A)((0,c.A)({},e),{},{[u]:{completed:n,completedAt:(new Date).toISOString()}}));try{await Ne.markWorkoutComplete(Pe.j2.currentUser.uid,t,e.day,n)}catch(d){console.error("Error completing rest day:",d)}return}s({isOpen:!0,workout:e,distance:(null===(a=e.distance)||void 0===a?void 0:a.toString())||"",notes:""})},handleSaveCompletion:async()=>{const{workout:e,distance:n,notes:a}=o;if(!e||!Pe.j2.currentUser)return;const l=!0,u=e.workoutIndex||0,d="".concat(t,"-").concat(e.day,"-").concat(u);r(e=>(0,c.A)((0,c.A)({},e),{},{[d]:{completed:l,completedAt:(new Date).toISOString(),actualDistance:n?parseFloat(n):null,notes:a||null}})),s({isOpen:!1,workout:null,distance:"",notes:""});try{(await Ne.markWorkoutComplete(Pe.j2.currentUser.uid,t,e.day,l,n?parseFloat(n):null,a||null)).success||(console.error("Failed to save completion status"),r(e=>{const t=(0,c.A)({},e);return delete t[d],t}),i.error("Failed to save. Please try again."))}catch(h){console.error("Error saving completion:",h),r(e=>{const t=(0,c.A)({},e);return delete t[d],t}),i.error("Failed to save. Please try again.")}},handleCloseCompletionModal:()=>{s({isOpen:!1,workout:null,distance:"",notes:""})}}};const im=class{constructor(){this.standUpBikeLibrary=new ze,this.rowingLibrary=new Fp,this.aquaLibrary=new Dp,this.ellipticalLibrary=new Ep}getSpeedOptions(e,t){return[{id:"classic-track",name:"\ud83c\udfc3\u200d\u2642\ufe0f Classic Track Session",shortName:"Track Intervals",description:"6x800m @ 5K pace (2min rest)",duration:"45-55 minutes",intensity:"Hard",structure:"2mi warmup + 6x800m @ 5K pace (2min rest) + 2mi cooldown",focus:"VO2 Max Development",location:"Track preferred",equipment:"None",difficulty:"High",timeRequired:"45-55 minutes",benefits:"Improves oxygen uptake, running economy, speed endurance"},{id:"hill-sprints",name:"\ud83c\udfd4\ufe0f Hill Sprint Power",shortName:"Hill Sprints",description:"8x30sec uphill @ max effort (jog down recovery)",duration:"35-45 minutes",intensity:"Very Hard",structure:"2mi warmup + 8x30sec uphill sprints (jog down) + 2mi cooldown",focus:"Neuromuscular Power",location:"Hills required",equipment:"None",difficulty:"Very High",timeRequired:"35-45 minutes",benefits:"Builds power, strength, running economy, mental toughness"},{id:"fartlek-fun",name:"\u26a1 Fartlek Freedom",shortName:"Fartlek",description:"20min fartlek: fast when you feel it, easy when you need it",duration:"40-50 minutes",intensity:"Variable",structure:"2mi easy + 20min fartlek (surge when you feel good, recover when you need) + 2mi easy",focus:"Speed Endurance",location:"Anywhere",equipment:"None",difficulty:"Moderate-High",timeRequired:"40-50 minutes",benefits:"Improves speed, teaches pacing, mentally engaging"},{id:"pyramid-power",name:"\ud83d\udd04 Pyramid Progression",shortName:"Pyramid",description:"400-800-1200-800-400m @ 5K pace (90sec rest)",duration:"50-60 minutes",intensity:"Hard",structure:"2mi warmup + 400-800-1200-800-400m @ 5K pace (90sec rest) + 2mi cooldown",focus:"Progressive Speed",location:"Track or measured route",equipment:"None",difficulty:"High",timeRequired:"50-60 minutes",benefits:"Progressive challenge, mental focus, speed development"}]}getTempoOptions(e,t){return[{id:"classic-tempo",name:"\ud83c\udfaf Classic Tempo Run",shortName:"Tempo Run",description:"4 miles @ comfortably hard pace",duration:"45-55 minutes",intensity:"Medium-Hard",structure:"2mi easy warmup + 4mi @ tempo pace + 1mi easy cooldown",focus:"Lactate Threshold",location:"Flat, measured route",equipment:"None",difficulty:"Moderate-High",timeRequired:"45-55 minutes",benefits:"Improves lactate clearance, race pace fitness"},{id:"cruise-intervals",name:"\ud83d\udd00 Cruise Intervals",shortName:"Cruise Intervals",description:"3x1 mile @ tempo pace (90sec rest)",duration:"45-50 minutes",intensity:"Medium-Hard",structure:"2mi warmup + 3x1mi @ tempo pace (90sec jog) + 2mi cooldown",focus:"Threshold Power",location:"Any measured route",equipment:"None",difficulty:"Moderate-High",timeRequired:"45-50 minutes",benefits:"Mental break during rest, maintains pace discipline"},{id:"progressive-build",name:"\ud83d\udcc8 Progressive Tempo Build",shortName:"Progressive",description:"5 miles: start easy, finish at tempo pace",duration:"50-55 minutes",intensity:"Progressive",structure:"1mi easy + 5mi progressive (easy to tempo) + 1mi easy cooldown",focus:"Progressive Effort",location:"Any route",equipment:"None",difficulty:"Moderate",timeRequired:"50-55 minutes",benefits:"Teaches effort progression, confidence building"},{id:"tempo-sandwich",name:"\ud83e\udd6a Tempo Sandwich",shortName:"Sandwich",description:"2mi easy + 3mi tempo + 2mi easy",duration:"50-60 minutes",intensity:"Medium-Hard",structure:"2mi easy + 3mi @ tempo pace + 2mi easy",focus:"Sustained Threshold",location:"Any route",equipment:"None",difficulty:"Moderate-High",timeRequired:"50-60 minutes",benefits:"Practices running fast when tired, mental toughness"}]}getLongRunOptions(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return[{id:"conversational-long",name:"\ud83c\udfc3\u200d\u2642\ufe0f Classic Conversational",shortName:"Easy Long Run",description:"".concat(n," miles @ easy, conversational pace"),duration:"".concat(Math.round(9*n),"-").concat(Math.round(10.5*n)," minutes"),intensity:"Easy",structure:"".concat(n," miles @ conversational pace throughout"),focus:"Aerobic Base",location:"Any route",equipment:"None",difficulty:"Low-Moderate",timeRequired:"".concat(Math.round(9*n),"-").concat(Math.round(10.5*n)," minutes"),benefits:"Builds aerobic capacity, fat burning, mental endurance"},{id:"negative-split-long",name:"\ud83d\udcc8 Negative Split Challenge",shortName:"Negative Split",description:"".concat(n," miles: second half faster than first"),duration:"".concat(Math.round(8.5*n),"-").concat(Math.round(10*n)," minutes"),intensity:"Easy-Moderate",structure:"".concat(n/2,"mi easy + ").concat(n/2,"mi moderate (30-45sec/mi faster)"),focus:"Pacing Discipline",location:"Measured route preferred",equipment:"None",difficulty:"Moderate",timeRequired:"".concat(Math.round(8.5*n),"-").concat(Math.round(10*n)," minutes"),benefits:"Teaches pacing control, finishes strong, race simulation"},{id:"long-with-pickups",name:"\u26a1 Long Run + Pickups",shortName:"Long + Pickups",description:"".concat(n-1," miles easy + 4x30sec pickups in final mile"),duration:"".concat(Math.round(9*n),"-").concat(Math.round(10*n)," minutes"),intensity:"Easy with surges",structure:"".concat(n-1,"mi easy + 4x30sec @ 5K pace (30sec recovery) + easy finish"),focus:"Neuromuscular Readiness",location:"Any route",equipment:"None",difficulty:"Moderate",timeRequired:"".concat(Math.round(9*n),"-").concat(Math.round(10*n)," minutes"),benefits:"Keeps legs sharp, practices running fast when tired"},{id:"progressive-long",name:"\ud83c\udfaf Marathon Pace Progression",shortName:"Progressive",description:"".concat(Math.round(.6*n),"mi easy + ").concat(Math.round(.4*n),"mi @ marathon pace"),duration:"".concat(Math.round(8.5*n),"-").concat(Math.round(9.5*n)," minutes"),intensity:"Easy-Moderate",structure:"".concat(Math.round(.6*n),"mi easy + ").concat(Math.round(.4*n),"mi @ marathon pace"),focus:"Race Pace Practice",location:"Flat, measured route",equipment:"None",difficulty:"Moderate-High",timeRequired:"".concat(Math.round(8.5*n),"-").concat(Math.round(9.5*n)," minutes"),benefits:"Practices goal race pace, builds confidence"}]}getHillOptions(e,t){return[{id:"classic-hills",name:"\ud83c\udfd4\ufe0f Classic Hill Repeats",shortName:"Hill Repeats",description:"6x90sec uphill @ hard effort (jog down recovery)",duration:"40-50 minutes",intensity:"Hard",structure:"2mi warmup + 6x90sec uphill @ 5K effort (jog down) + 2mi cooldown",focus:"Hill Strength",location:"Steady 4-6% grade hill",equipment:"None",difficulty:"High",timeRequired:"40-50 minutes",benefits:"Builds leg strength, power, running economy"},{id:"variable-hills",name:"\ud83c\udfa2 Variable Hill Circuit",shortName:"Variable Hills",description:"4x(30sec hard + 60sec moderate + 30sec hard) uphill",duration:"45-50 minutes",intensity:"Variable Hard",structure:"2mi warmup + 4x(30sec hard + 60sec moderate + 30sec hard) + jog down + 2mi cooldown",focus:"Power Endurance",location:"Long hill or multiple hills",equipment:"None",difficulty:"Very High",timeRequired:"45-50 minutes",benefits:"Varied stimulus, mental toughness, power development"},{id:"rolling-hills",name:"\ud83c\udf0a Rolling Hill Tempo",shortName:"Rolling Tempo",description:"25min tempo effort on rolling hills",duration:"45-55 minutes",intensity:"Medium-Hard",structure:"2mi easy + 25min @ tempo effort on rolling terrain + 2mi easy",focus:"Hill Endurance",location:"Rolling hills course",equipment:"None",difficulty:"Moderate-High",timeRequired:"45-55 minutes",benefits:"Teaches effort management on varied terrain"}]}getEasyOptions(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;return[{id:"classic-easy",name:"\ud83d\ude0c Classic Recovery Run",shortName:"Easy Run",description:"".concat(n," miles @ easy, conversational pace"),duration:"".concat(Math.round(9.5*n),"-").concat(Math.round(11*n)," minutes"),intensity:"Very Easy",structure:"".concat(n," miles @ recovery pace throughout"),focus:"Active Recovery",location:"Any route",equipment:"None",difficulty:"Low",timeRequired:"".concat(Math.round(9.5*n),"-").concat(Math.round(11*n)," minutes"),benefits:"Promotes recovery, maintains aerobic fitness"},{id:"easy-with-strides",name:"\u26a1 Easy + Strides",shortName:"Easy + Strides",description:"".concat(n," miles easy + 4x20sec strides"),duration:"".concat(Math.round(9.5*n),"-").concat(Math.round(10.5*n)," minutes"),intensity:"Easy with pickups",structure:"".concat(n-.5,"mi easy + 4x20sec strides (40sec recovery) + 0.5mi easy"),focus:"Neuromuscular Activation",location:"Any route with straight section",equipment:"None",difficulty:"Low-Moderate",timeRequired:"".concat(Math.round(9.5*n),"-").concat(Math.round(10.5*n)," minutes"),benefits:"Maintains speed while recovering, improves running form"}]}getStandUpBikeOptions(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=this.standUpBikeLibrary,i=[];let o=[];return o="intervals"===e?["INTERVAL_BIKE"]:"tempo"===e?["TEMPO_BIKE"]:"hills"===e?["POWER_RESISTANCE"]:"longRun"===e?["LONG_ENDURANCE_RIDES"]:["AEROBIC_BASE","RECOVERY_SPECIFIC"],o.forEach(o=>{(r.workoutLibrary[o]||[]).filter(e=>e.equipment===t||"both"===e.equipment).slice(0,3).forEach(a=>{let s=a;if(n)try{s=r.prescribeStandUpBikeWorkout(a.name,t,{duration:n,hasGarmin:!0})}catch(Av){s=a}i.push({id:"bike_".concat(o,"_").concat(a.name.replace(/\s+/g,"_").toLowerCase()),name:s.name||a.name,shortName:a.name,description:s.description||a.description||a.structure,duration:s.duration||a.duration||"30-45 minutes",intensity:a.intensity||("easy"===e?"Easy":"Hard"),structure:s.structure||a.structure,focus:"TEMPO_BIKE"===o?"Lactate Threshold":"INTERVAL_BIKE"===o?"Speed & Power":"POWER_RESISTANCE"===o?"Power & Strength":"Aerobic Base",equipment:t,equipmentSpecific:!0,sourceWorkout:s,benefits:a.benefits||"Cross-training at equivalent effort"})})}),i.slice(0,4)}getCrossTrainingOptions(e,t){const n=(null===t||void 0===t?void 0:t.crossTrainingEquipment)||{},r=[],i={intervals:{rowing:"INTERVALS",aqua:"INTERVALS",elliptical:"INTERVALS"},tempo:{rowing:"TEMPO",aqua:"TEMPO",elliptical:"TEMPO"},hills:{rowing:"POWER",aqua:"HILLS",elliptical:"HILLS"},longRun:{rowing:"EASY",aqua:"EASY",elliptical:"EASY"},easy:{rowing:"EASY",aqua:"EASY",elliptical:"EASY"}},o=i[e]||i.easy;if(n.rowing){const t=o.rowing;(this.rowingLibrary.workoutLibrary[t]||[]).slice(0,1).forEach(n=>{r.push({id:"row_".concat(t,"_").concat(n.name.replace(/\s+/g,"_").toLowerCase()),name:"\ud83d\udea3 ".concat(n.name),shortName:n.name,description:n.description||n.structure,duration:n.duration||"30-45 minutes",intensity:n.intensity||e,structure:n.structure,focus:"TEMPO"===t?"Lactate Threshold":"INTERVALS"===t?"VO2 Max":"POWER"===t?"Power & Strength":"Aerobic Base",equipmentType:"rowing",equipment:"rowing",sourceWorkout:n,benefits:n.benefits||"Full-body power development"})})}if(n.pool){const t=o.aqua;(this.aquaLibrary.workoutLibrary[t]||[]).slice(0,1).forEach(n=>{r.push({id:"aqua_".concat(t,"_").concat(n.name.replace(/\s+/g,"_").toLowerCase()),name:"\ud83c\udfca ".concat(n.name),shortName:n.name,description:n.description||n.structure,duration:n.duration||"30-45 minutes",intensity:n.intensity||e,structure:n.structure,focus:"TEMPO"===t?"Lactate Threshold":"INTERVALS"===t?"VO2 Max":"HILLS"===t?"Power & Strength":"Aerobic Base",equipmentType:"pool",equipment:"pool",sourceWorkout:n,benefits:n.benefits||"Zero-impact running simulation"})})}if(n.elliptical){const t=o.elliptical;(this.ellipticalLibrary.workoutLibrary[t]||[]).slice(0,1).forEach(n=>{r.push({id:"elliptical_".concat(t,"_").concat(n.name.replace(/\s+/g,"_").toLowerCase()),name:"\ud83c\udfc3 ".concat(n.name),shortName:n.name,description:n.description||n.structure,duration:n.duration||"30-45 minutes",intensity:n.intensity||e,structure:n.structure,focus:"TEMPO"===t?"Lactate Threshold":"INTERVALS"===t?"VO2 Max":"HILLS"===t?"Power & Strength":"Aerobic Base",equipmentType:"elliptical",equipment:"elliptical",sourceWorkout:n,benefits:n.benefits||"Low-impact running alternative"})})}return r}};const om=function(e){var t,n,r,i,o,s;let{userProfile:l,trainingPlan:u,completedWorkouts:d,clearAllData:h}=e;const p=re(),m=Hl(),[f,g]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),[w,b]=(0,a.useState)(!1),k=()=>function(e){var t,n;if(null===e||void 0===e||null===(t=e.planOverview)||void 0===t||!t.startDate)return 1;const r=new Date,i=new Date(e.planOverview.startDate+"T00:00:00"),o=i.getDay(),a=0===o?6:o-1,s=new Date(i.getTime()-864e5*a);if(r<s)return 1;const l=Math.floor((r-s)/6048e5);return Math.min(l+1,(null===e||void 0===e||null===(n=e.planOverview)||void 0===n?void 0:n.totalWeeks)||12)}(u),D=e=>Kp(e,u),x=(e,t)=>{const n=function(e,t,n){var r;if(null===n||void 0===n||null===(r=n.planOverview)||void 0===r||!r.startDate)return null;const i=new Date(n.planOverview.startDate+"T00:00:00"),o=864e5,a=i.getDay(),s=0===a?6:a-1,l=new Date(i.getTime()-s*o),c=new Date(l.getTime()+7*(e-1)*o),u={monday:0,tuesday:1,wednesday:2,thursday:3,friday:4,saturday:5,sunday:6}[t.toLowerCase()];return void 0===u?null:new Date(c.getTime()+u*o)}(e,t,u);return n?function(e){return e?e.toLocaleDateString("en-US",{month:"short",day:"numeric"}):""}(n):null},[E,S]=(0,a.useState)(()=>{var e;const t=k(),n=localStorage.getItem("runeq_currentWeek"),r=localStorage.getItem("runeq_startDate");var i;if((null===u||void 0===u||null===(e=u.planOverview)||void 0===e?void 0:e.startDate)!==r)return Oe.A.log("\ud83d\udcc5 New plan detected - using calculated week:",t),localStorage.setItem("runeq_startDate",null===u||void 0===u||null===(i=u.planOverview)||void 0===i?void 0:i.startDate),t;if(n){var o;const e=parseInt(n,10);if(e>=1&&e<=((null===u||void 0===u||null===(o=u.planOverview)||void 0===o?void 0:o.totalWeeks)||12))return e}return t});(0,a.useEffect)(()=>{localStorage.setItem("runeq_currentWeek",E.toString())},[E]);const[A,C]=(0,a.useState)({}),[T,R]=(0,a.useState)({}),[F,I]=(0,a.useState)(!1);(0,a.useEffect)(()=>{try{const e=localStorage.getItem("runeq_modifiedWorkouts");if(Oe.A.log("\ud83d\udce6 Dashboard loading from localStorage:",e),e){const t=JSON.parse(e);Oe.A.log("\ud83d\udce6 Dashboard parsed data:",t),C(t)}M(!0)}catch(e){console.warn("Error loading modified workouts:",e),localStorage.removeItem("runeq_modifiedWorkouts"),M(!0)}},[]),(0,a.useEffect)(()=>{(async()=>{if(Pe.j2.currentUser)try{const e=await Ne.getModifiedWorkouts(Pe.j2.currentUser.uid);e.success&&e.data&&Object.keys(e.data).length>0&&(Oe.A.log("\ud83d\udce6 Loaded modified workouts from Firestore:",e.data),C(e.data),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(e.data)))}catch(e){console.warn("Error loading modified workouts from Firestore:",e)}})()},[null===(t=Pe.j2.currentUser)||void 0===t?void 0:t.uid]);const[P,M]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(P)try{Oe.A.log("\ud83d\udcbe Dashboard saving to localStorage:",A),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(A))}catch(e){console.warn("Error saving modified workouts:",e)}},[A,P]),(0,a.useEffect)(()=>{d?(Oe.A.log("\ud83d\udce6 Dashboard: Loading completions from Firebase:",d),R(d)):R({})},[d]);const{stravaSyncing:_,handleManualStravaSync:N,handleDisconnectStrava:O}=em({userProfile:l,trainingPlan:u,currentWeek:E}),{completionModal:j,setCompletionModal:L,handleMarkComplete:B,handleSaveCompletion:W,handleCloseCompletionModal:U}=rm({currentWeek:E,workoutCompletions:T,setWorkoutCompletions:R}),q=function(e){let{currentWeek:t,userProfile:n,modifiedWorkouts:r,setModifiedWorkouts:i,toast:o}=e;const[s,l]=(0,a.useState)({isOpen:!1,workout:null,mode:"replace"}),[u,d]=(0,a.useState)({}),[h,p]=(0,a.useState)({}),[m,f]=(0,a.useState)({}),[g,y]=(0,a.useState)({}),v=new im,w=(0,a.useCallback)(function(e){l({isOpen:!0,workout:e,mode:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"replace"})},[]),b=(0,a.useCallback)(()=>{l({isOpen:!1,workout:null,mode:"replace"})},[]),k=(0,a.useCallback)(e=>{w(e,"add")},[w]),D=(0,a.useCallback)((e,n)=>{if(0===n)return void o.warning("Cannot remove the primary workout. Use 'Something Else' to replace it instead.");const a="".concat(t,"-").concat(e.day),s="".concat(a,"-").concat(n),l=(0,c.A)({},r);delete l[s],i(l),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(l)),Pe.j2.currentUser&&Ne.removeModifiedWorkout(Pe.j2.currentUser.uid,t,e.day,n).catch(e=>{Oe.A.error("Error removing workout from Firestore:",e)})},[t,r,i,o]),x=(0,a.useCallback)(e=>{const n=s.mode||"replace",o="".concat(t,"-").concat(e.day);if("add"===n){var a;let t=0;for(;r["".concat(o,"-").concat(t)];)t++;0===t&&(t=1);const n="".concat(o,"-").concat(t),s=(0,c.A)((0,c.A)({},r),{},{[n]:e});i(s),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(s)),Oe.A.log("\ud83d\udcbe Added second workout:",n,null===(a=e.workout)||void 0===a?void 0:a.name)}else{var l;const t="".concat(o,"-0"),n=(0,c.A)((0,c.A)({},r),{},{[t]:e});i(n),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(n)),Oe.A.log("\ud83d\udcbe Replaced workout:",t,null===(l=e.workout)||void 0===l?void 0:l.name)}Pe.j2.currentUser&&Ne.saveModifiedWorkout(Pe.j2.currentUser.uid,t,e.day,e).catch(e=>{Oe.A.error("Error saving workout to Firestore:",e)}),b()},[t,r,i,s.mode,b]),E=(0,a.useCallback)(async function(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s="".concat(t,"-").concat(e.day),l=e.workoutIndex||0,u="".concat(s,"-").concat(l),d="".concat(t,"-").concat(n),h=(null===a||void 0===a?void 0:a.workoutIndex)||0,p="".concat(d,"-").concat(h),m=(0,c.A)({},r),f=r[u]||e,g=(0,c.A)((0,c.A)({},f),{},{day:n});let y=null,v=null;if(a?(y=r[p]||a,v=(0,c.A)((0,c.A)({},y),{},{day:e.day}),m["".concat(d,"-").concat(h)]=g,m["".concat(s,"-").concat(l)]=v):(m["".concat(d,"-0")]=g,delete m[u]),i(m),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(m)),Pe.j2.currentUser)try{var w;await Ne.saveModifiedWorkout(Pe.j2.currentUser.uid,t,n,g),a&&v?await Ne.saveModifiedWorkout(Pe.j2.currentUser.uid,t,e.day,v):await Ne.removeModifiedWorkout(Pe.j2.currentUser.uid,t,e.day,l),Oe.A.log("\u2705 Swapped workouts successfully"),o.success("Swapped ".concat((null===(w=e.workout)||void 0===w?void 0:w.name)||"workout"," to ").concat(n))}catch(b){Oe.A.error("Error swapping workouts in Firestore:",b),o.error("Error saving swap. Changes are saved locally.")}},[t,r,i,o]),S=(0,a.useCallback)(async(e,t)=>{await E(e,t,null)},[E]),A=(0,a.useCallback)(e=>{const n="".concat(t,"-").concat(e.day,"-").concat(e.workoutIndex||0);d(e=>(0,c.A)((0,c.A)({},e),{},{[n]:!0}))},[t]),C=(0,a.useCallback)(e=>{const n="".concat(t,"-").concat(e.day,"-").concat(e.workoutIndex||0);d(e=>(0,c.A)((0,c.A)({},e),{},{[n]:!1}))},[t]),T=(0,a.useCallback)(function(e){var o,a,s;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"balanced";const u=parseFloat(null===(o=e.workout)||void 0===o||null===(a=o.name)||void 0===a||null===(s=a.match(/\d+/))||void 0===s?void 0:s[0])||8;let d,h,p;switch(l){case"heavy-run":d=Math.round(.8*u),h=Math.round(.2*u),p="Heavy Run";break;case"balanced":default:d=Math.round(.6*u),h=Math.round(.4*u),p="Balanced";break;case"heavy-bike":d=Math.round(.4*u),h=Math.round(.6*u),p="Heavy Bike";break;case"light-run":d=Math.round(.2*u),h=Math.round(.8*u),p="Light Run"}const m=(0,c.A)((0,c.A)({},e),{},{type:"brickLongRun",workout:{name:"Brick Long Run (".concat(d,"mi run + ").concat(h," RunEQ Miles ").concat((0,Bl.tS)(null===n||void 0===n?void 0:n.standUpBikeType),")"),description:"".concat(p," brick: ").concat(d," mile run + ").concat(h," RunEQ miles on ").concat((0,Bl.tS)(null===n||void 0===n?void 0:n.standUpBikeType))},focus:"Brick Endurance",equipmentSpecific:!0,replacementReason:"Converted to ".concat(p.toLowerCase()," brick workout")}),f=e.workoutIndex||0,g="".concat(t,"-").concat(e.day,"-").concat(f);i(e=>(0,c.A)((0,c.A)({},e),{},{[g]:m})),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify((0,c.A)((0,c.A)({},r),{},{[g]:m}))),Pe.j2.currentUser&&Ne.saveModifiedWorkout(Pe.j2.currentUser.uid,t,e.day,m).catch(e=>{Oe.A.error("Error saving brick workout to Firestore:",e)}),C(e)},[t,n,r,i,C]),R=(0,a.useCallback)(e=>{const n=e.workoutIndex||0,o="".concat(t,"-").concat(e.day,"-").concat(n),a=(0,c.A)({},r);delete a[o],i(a),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(a)),Pe.j2.currentUser&&Ne.removeModifiedWorkout(Pe.j2.currentUser.uid,t,e.day,n).catch(e=>{Oe.A.error("Error removing workout from Firestore:",e)})},[t,r,i]),F=(0,a.useCallback)(e=>{var r,i,o;const a="".concat(t,"-").concat(e.day);let s=[];const l=parseFloat(null===(r=e.workout)||void 0===r||null===(i=r.name)||void 0===i||null===(o=i.match(/\d+/))||void 0===o?void 0:o[0])||8;switch(Bp(e)){case"intervals":s=v.getSpeedOptions(t,n);break;case"tempo":s=v.getTempoOptions(t,n);break;case"longRun":s=v.getLongRunOptions(t,n,l);break;case"hills":s=v.getHillOptions(t,n);break;case"easy":s=v.getEasyOptions(t,n,4);break;default:s=[]}f(e=>(0,c.A)((0,c.A)({},e),{},{[a]:s})),p(e=>(0,c.A)((0,c.A)({},e),{},{[a]:!0}))},[t,n,v]),I=(0,a.useCallback)(e=>{const n="".concat(t,"-").concat(e.day);p(e=>(0,c.A)((0,c.A)({},e),{},{[n]:!1}))},[t]),P=(0,a.useCallback)((e,n)=>{const r="".concat(t,"-").concat(e.day);Oe.A.log("\ud83c\udfaf Option selected:",{workoutKey:r,selectedOption:n.shortName,workout:e.day,currentWeek:t,selectedOptionObject:n});try{const e=(0,c.A)((0,c.A)({},g),{},{[r]:n});y(e),Oe.A.log("\u2728 State update dispatched, should see confirmation buttons next")}catch(i){console.error("\u274c Error in handleSelectOption:",i)}},[t,g]),M=(0,a.useCallback)(async e=>{const n="".concat(t,"-").concat(e.day),o=g[n];if(!o)return;const a=(0,c.A)((0,c.A)({},e),{},{workout:(0,c.A)({},o),focus:o.focus||e.focus,replacementReason:"Choose Your Adventure selection"}),s=(0,c.A)((0,c.A)({},r),{},{[n]:a});i(s),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(s)),Pe.j2.currentUser&&(await Ne.saveModifiedWorkout(Pe.j2.currentUser.uid,t,e.day,a),Oe.A.log("\u2705 SAVED to Firestore:",o.name,"for",e.day)),y(e=>{const t=(0,c.A)({},e);return delete t[n],t}),p(e=>(0,c.A)((0,c.A)({},e),{},{[n]:!1}))},[t,r,i,g]),_=(0,a.useCallback)(e=>{const n="".concat(t,"-").concat(e.day);y(e=>{const t=(0,c.A)({},e);return delete t[n],t})},[t]);return{somethingElseModal:s,setSomethingElseModal:l,showBrickOptions:u,setShowBrickOptions:d,showingOptions:h,setShowingOptions:p,workoutOptions:m,setWorkoutOptions:f,selectedOptions:g,setSelectedOptions:y,handleSomethingElse:w,handleCloseSomethingElse:b,handleAddWorkout:k,handleRemoveWorkout:D,handleWorkoutReplacement:x,handleSwapWorkouts:E,handleMoveWorkout:S,handleShowBrickOptions:A,handleHideBrickOptions:C,handleMakeBrick:T,handleMakeRegularRun:R,handleShowOptions:F,handleHideOptions:I,handleSelectOption:P,handleConfirmSelection:M,handleCancelSelection:_}}({currentWeek:E,userProfile:l,modifiedWorkouts:A,setModifiedWorkouts:C,toast:m}),H=(()=>{if(E<=0){var e;const t=new Date((null===u||void 0===u||null===(e=u.planOverview)||void 0===e?void 0:e.startDate)+"T00:00:00");return{week:0,weekDates:{displayText:"Training starts ".concat(t.toLocaleDateString())},phase:"preparation",totalMileage:0,workouts:[{day:"Preparation",type:"preparation",workout:{name:"Training Starts Soon!",description:"Your RunEQ training plan will begin on ".concat(t.toLocaleDateString(),". Get ready!")},focus:"Preparation",completed:!1}]}}if(u&&u.weeks&&u.weeks.length>0){const e=u.weeks[E-1];if(e&&e.workouts&&e.workouts.length>0){if(Oe.A.log("Using training plan data for week",E,"with",e.workouts.length,"workouts"),e.workouts.forEach(e=>{var t;"brickLongRun"===e.type&&Oe.A.log("Found brick workout:",e.day,null===(t=e.workout)||void 0===t?void 0:t.name)}),u.injuryRecoveryActive&&u.injuryRecoveryInfo){const{startWeek:t,endWeek:n,returnWeek:r}=u.injuryRecoveryInfo;e.weekType||(E>=t&&E<=n?(e.weekType="injury-recovery",Oe.A.log("\ud83c\udfe5 Week ".concat(E," marked as injury-recovery (").concat(t,"-").concat(n,")"))):E===r&&(e.weekType="return-to-running",Oe.A.log("\ud83c\udfaf Week ".concat(E," marked as return-to-running"))))}return e}}return!u||!u.aiCoachingAnalysis&&!u.fullPlanText||u.weeks&&0!==u.weeks.length||(Oe.A.error("\u26a0\ufe0f CRITICAL: Training plan has AI coaching but no weeks array!"),Oe.A.error("   This means the plan structure was not saved correctly."),Oe.A.error("   The coach's analysis shows the correct workouts, but they're not in the weeks array."),Oe.A.error("   Solution: User needs to regenerate the plan or we need to parse the coaching text.")),Oe.A.log("\u26a0\ufe0f Falling back to generated workouts for week",E,"- these may not match your AI-generated plan!"),{week:E,weekDates:{displayText:"Week ".concat(E)},phase:"base",totalMileage:15,workouts:(0,kp.generateWeekWorkouts)(E,l)}})(),z=e=>{if("rest"===e.type||"rest_or_xt"===e.type||"preparation"===e.type)return;const t=(e.day||"unknown").toLowerCase().replace(/\s+/g,"-");p("/workout/".concat(t),{state:{workout:e,userProfile:(0,c.A)((0,c.A)({},l),{},{paces:null===u||void 0===u?void 0:u.paces,trackIntervals:null===u||void 0===u?void 0:u.trackIntervals}),currentWeek:E,weekData:H}})},{somethingElseModal:V,showBrickOptions:K,showingOptions:Y,workoutOptions:G,selectedOptions:Q,handleSomethingElse:X,handleCloseSomethingElse:Z,handleAddWorkout:J,handleRemoveWorkout:$,handleWorkoutReplacement:ee,handleSwapWorkouts:te,handleMoveWorkout:ne,handleShowBrickOptions:ie,handleHideBrickOptions:oe,handleMakeBrick:ae,handleMakeRegularRun:se,handleShowOptions:le,handleHideOptions:ce,handleSelectOption:ue,handleConfirmSelection:de,handleCancelSelection:he}=q,pe=e=>{const t=[],n="".concat(E,"-").concat(e.day);let r=0,i=!0;for(;i;){const o="".concat(n,"-").concat(r),a=A[o];if(a){const e=T[o];t.push((0,c.A)((0,c.A)({},a),{},{completed:(null===e||void 0===e?void 0:e.completed)||!1,completedAt:(null===e||void 0===e?void 0:e.completedAt)||null,workoutIndex:r})),r++}else if(0===r){const n=T[o];t.push((0,c.A)((0,c.A)({},e),{},{completed:(null===n||void 0===n?void 0:n.completed)||!1,completedAt:(null===n||void 0===n?void 0:n.completedAt)||null,workoutIndex:0})),i=!1}else i=!1}return t},me=e=>pe(e)[0]||e;return"pending"===(null===l||void 0===l?void 0:l.approvalStatus)?(0,je.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"20px"},children:(0,je.jsxs)("div",{className:"dashboard-pending-approval",style:{maxWidth:"500px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"40px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,je.jsx)("div",{className:"pending-emoji",style:{fontSize:"4rem",marginBottom:"20px"},children:"\u23f3"}),(0,je.jsx)("h1",{style:{color:"#00D4FF",marginBottom:"16px"},children:"Account Pending Approval"}),(0,je.jsx)("p",{style:{color:"#AAAAAA",fontSize:"1.1rem",lineHeight:"1.6",marginBottom:"24px"},children:"Thank you for signing up! Your account is currently pending approval."}),(0,je.jsxs)("p",{style:{color:"#AAAAAA",fontSize:"0.95rem",lineHeight:"1.6"},children:["You'll receive an email at ",(0,je.jsx)("strong",{style:{color:"#FFFFFF"},children:null===l||void 0===l?void 0:l.email})," once your account has been approved. This usually takes less than 24 hours."]}),(0,je.jsx)("button",{onClick:async()=>{await(0,Fe.CI)(Pe.j2),p("/")},style:{marginTop:"32px",padding:"12px 24px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"#FFFFFF",cursor:"pointer",fontSize:"1rem"},children:"Sign Out"})]})}):(0,je.jsx)(je.Fragment,{children:(0,je.jsxs)("div",{style:{minHeight:"100vh"},children:[(0,je.jsx)(tm,{currentWeek:E,setCurrentWeek:S,trainingPlan:u,currentWeekData:H,workoutCompletions:T,getWorkouts:pe,userProfile:l,setShowManagePlanModal:g,setShowInjuryRecoveryModal:v,setShowDebugTool:b,clearAllData:h,toast:m}),(0,je.jsxs)("div",{className:"container dashboard-container",style:{padding:"20px 16px"},children:[(0,je.jsxs)("div",{className:"card",style:{marginBottom:"20px",background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)"},children:[(0,je.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,je.jsx)("h3",{className:"dashboard-section-header",style:{margin:"0 0 4px 0",color:"#00D4FF"},children:"Current Training System"}),(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.2rem"},children:"\ud83d\udd2c"}),(0,je.jsx)("span",{style:{fontSize:"1.1rem",fontWeight:"bold"},children:(0,Bl.ly)((null===u||void 0===u||null===(n=u.planOverview)||void 0===n?void 0:n.trainingPhilosophy)||(null===l||void 0===l?void 0:l.trainingPhilosophy)||"Zone-Based Training")})]}),(0,je.jsxs)("p",{style:{margin:"4px 0 0 0",fontSize:"0.9rem",color:"#00D4FF"},children:["Week ",E," of ",(null===u||void 0===u||null===(r=u.planOverview)||void 0===r?void 0:r.totalWeeks)||16,D(E)&&" \u2022 ".concat(D(E))," \u2022 Periodized training system"]})]}),(0,je.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px",fontSize:"0.85rem"},children:[(0,je.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",padding:"8px",borderRadius:"6px"},children:[(0,je.jsx)("strong",{children:"Focus:"})," ",H.phase?H.phase.charAt(0).toUpperCase()+H.phase.slice(1)+" Phase":"Periodized Training"]}),(0,je.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",padding:"8px",borderRadius:"6px"},children:[(0,je.jsx)("strong",{children:"Current Phase:"})," ",(H.phase||"base").toUpperCase()]})]})]}),(0,je.jsxs)("div",{className:"card",style:{marginBottom:"20px"},children:[(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[(0,je.jsx)("h2",{className:"dashboard-section-header",style:{margin:0},children:"Week Progress"}),(0,je.jsx)("span",{className:"badge badge-info",children:(()=>{const e=H.workouts.filter(e=>me(e).completed).length,t=H.workouts.filter(e=>"rest"!==e.type).length;return"".concat(e,"/").concat(t," completed")})()})]}),(0,je.jsx)("div",{className:"progress-bar",children:(0,je.jsx)("div",{className:"progress-fill",style:{width:"".concat(H.workouts.filter(e=>me(e).completed).length/H.workouts.filter(e=>"rest"!==e.type).length*100,"%")}})})]}),"hot_humid"===l.climate&&(0,je.jsx)("div",{className:"card",style:{marginBottom:"20px",background:"rgba(255, 184, 0, 0.1)",border:"1px solid rgba(255, 184, 0, 0.3)"},children:(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{className:"dashboard-alert-emoji",style:{fontSize:"1.5rem"},children:"\ud83c\udf21\ufe0f"}),(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{margin:"0 0 4px 0",color:"#c05621"},children:"Climate Adjustment Active"}),(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem",color:"#744210"},children:["Paces automatically adjusted for ",l.climate.replace("_"," ")," conditions. Add 30-60 seconds per mile to easy runs when very humid."]})]})]})}),(0,je.jsx)(nm,{trainingPlan:u,currentWeekData:H,userProfile:l}),(0,je.jsxs)("div",{className:"card",style:{marginBottom:"20px"},children:[(0,je.jsxs)("div",{className:"card-header",children:[(0,je.jsx)("h2",{className:"dashboard-section-header",style:{margin:0},children:"This Week's Workouts"}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",color:"#666"},children:l.standUpBikeType&&"Equipment-specific workouts marked with \u26a1"})]}),(0,je.jsx)("div",{className:"dashboard-workout-list",style:{display:"grid",gap:"16px"},children:H.workouts.filter(e=>!function(e,t,n){var r;if(null===n||void 0===n||null===(r=n.planOverview)||void 0===r||!r.startDate)return!1;const i=new Date(n.planOverview.startDate+"T00:00:00"),o=864e5,a=i.getDay(),s=0===a?6:a-1,l=new Date(i.getTime()-s*o),c=new Date(l.getTime()+7*(e-1)*o),u={Monday:0,Mon:0,Tuesday:1,Tue:1,Wednesday:2,Wed:2,Thursday:3,Thu:3,Friday:4,Fri:4,Saturday:5,Sat:5,Sunday:6,Sun:6}[t];if(void 0===u)return!1;const d=new Date(c.getTime()+u*o),h=new Date;return h.setHours(0,0,0,0),d.setHours(0,0,0,0),d<h}(E,e.day,u)&&!function(e,t,n){var r;if(1!==e)return!1;if(null===n||void 0===n||null===(r=n.planOverview)||void 0===r||!r.startDate)return!1;const i=new Date(n.planOverview.startDate+"T00:00:00").getDay(),o={Sunday:0,Sun:0,Monday:1,Mon:1,Tuesday:2,Tue:2,Wednesday:3,Wed:3,Thursday:4,Thu:4,Friday:5,Fri:5,Saturday:6,Sat:6}[t];return void 0!==o&&0!==o&&0!==i&&o<i}(E,e.day,u)).map(e=>{const t=pe(e),n=t.map(t=>(0,c.A)((0,c.A)({},t),{},{date:x(E,e.day)}));return(0,je.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[n.map((n,r)=>(0,je.jsx)(Vp,{workout:n,workoutIdx:r,workouts:t,currentWeek:E,userProfile:l,workoutCompletions:T,onWorkoutClick:z,onMarkComplete:B,onSomethingElse:X,onShowBrickOptions:ie,onHideBrickOptions:oe,onMakeBrick:ae,onMakeRegularRun:se,onShowOptions:le,onHideOptions:ce,onSelectOption:ue,onConfirmSelection:de,onCancelSelection:he,onRemoveWorkout:t=>$(e,r),showBrickOptions:K,showingOptions:Y,workoutOptions:G,selectedOptions:Q},"".concat(e.day,"-").concat(r))),(0,je.jsx)("button",{className:"btn dashboard-add-workout-button",style:{width:"100%",fontSize:"0.9rem",padding:"12px",background:"rgba(34, 197, 94, 0.1)",color:"#22c55e",border:"2px dashed rgba(34, 197, 94, 0.3)",fontWeight:"600",marginTop:t.length>1?"0":"8px"},onClick:t=>{t.stopPropagation(),J(e)},children:"\u2795 Add Second Workout (Two-a-Day)"})]},e.day)})})]})]}),(0,je.jsx)(Mp,{isOpen:V.isOpen,onClose:Z,currentWorkout:V.workout,userProfile:l,trainingPlan:u,onWorkoutSelect:ee,weather:null,mode:V.mode||"replace"}),(0,je.jsx)(Np,{isOpen:f,onClose:()=>g(!1),userProfile:l,trainingPlan:u,currentWeek:E}),(0,je.jsx)(jp,{isOpen:y,onClose:()=>v(!1),userProfile:l,trainingPlan:u,currentWeek:E}),w&&(0,je.jsx)(Lp,{userProfile:l,trainingPlan:u,onClose:()=>b(!1)}),j.isOpen&&(0,je.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:"20px"},children:(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",borderRadius:"12px",padding:"30px",maxWidth:"500px",width:"100%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},children:[(0,je.jsxs)("h2",{style:{margin:"0 0 20px 0",color:"#FFFFFF",fontSize:"24px"},children:["Log Workout: ",(null===(i=j.workout)||void 0===i||null===(o=i.workout)||void 0===o?void 0:o.name)||(null===(s=j.workout)||void 0===s?void 0:s.name)||"Workout"]}),(0,je.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,je.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"#CCCCCC",fontSize:"14px"},children:"Distance (miles)"}),(0,je.jsx)("input",{type:"number",step:"0.1",value:j.distance||"",onChange:e=>L((0,c.A)((0,c.A)({},j),{},{distance:parseFloat(e.target.value)||0})),style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#FFFFFF",fontSize:"16px"}})]}),(0,je.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,je.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"#CCCCCC",fontSize:"14px"},children:"Duration (minutes)"}),(0,je.jsx)("input",{type:"number",value:j.duration||"",onChange:e=>L((0,c.A)((0,c.A)({},j),{},{duration:parseInt(e.target.value)||0})),style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#FFFFFF",fontSize:"16px"}})]}),(0,je.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,je.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"#CCCCCC",fontSize:"14px"},children:"Notes (optional)"}),(0,je.jsx)("textarea",{value:j.notes||"",onChange:e=>L((0,c.A)((0,c.A)({},j),{},{notes:e.target.value})),placeholder:"How did it feel? Any observations?",style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#FFFFFF",fontSize:"16px",minHeight:"100px",resize:"vertical",boxSizing:"border-box"}})]}),(0,je.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,je.jsx)("button",{onClick:W,style:{flex:1,padding:"15px",background:"#00D4FF",color:"#000000",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},children:"Save"}),(0,je.jsx)("button",{onClick:U,style:{padding:"15px 30px",background:"rgba(156, 163, 175, 0.1)",color:"#9CA3AF",border:"1px solid rgba(156, 163, 175, 0.3)",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},children:"Cancel"})]})]})}),F&&(0,je.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:"20px"},children:(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",borderRadius:"12px",padding:"30px",maxWidth:"500px",width:"100%",border:"2px solid rgba(0, 212, 255, 0.3)"},children:[(0,je.jsx)("h2",{style:{color:"#00D4FF",marginTop:0,marginBottom:"20px"},children:"Beta Code Setup"}),(0,je.jsx)("p",{style:{color:"#CCCCCC",marginBottom:"20px"},children:"This feature is for admin use only."}),(0,je.jsx)("button",{onClick:()=>I(!1),style:{padding:"12px 24px",background:"rgba(156, 163, 175, 0.1)",color:"#9CA3AF",border:"1px solid rgba(156, 163, 175, 0.3)",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},children:"Close"})]})})]})})},am=new Ue.e,sm=new We.s,lm=new Be.c,cm=new qe.g,um=["longRun","long-run","tempo","interval","intervals","hill","hills"],dm=function(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").toLowerCase();return t.includes("fartlek")?"Develops speed, mental toughness, and ability to surge during races. Improves VO2 max and teaches body to handle varied paces.":t.includes("progressive")?"Builds mental strength and pacing skills. Teaches body to run strong when tired. Improves lactate clearance and finishing speed.":t.includes("tempo")||"tempo"===e?"Raises lactate threshold, improves race pace endurance, and builds mental toughness. Key workout for half marathon and marathon training.":t.includes("interval")||t.includes("speed")||"intervals"===e?"Increases VO2 max, running economy, and speed. Develops neuromuscular power and teaches body to handle high-intensity efforts.":t.includes("hill")||"hills"===e?"Builds leg strength, power, and running economy. Improves form and reduces injury risk through strength development.":t.includes("long")||"longRun"===e?"Builds aerobic endurance, fat adaptation, and mental toughness. Strengthens bones, tendons, and cardiovascular system.":t.includes("easy")||t.includes("recovery")||"easy"===e?"Promotes recovery, builds aerobic base, and strengthens cardiovascular system without stress. Allows body to adapt to training.":"Develops overall fitness and running ability"};function hm(e){var t,n,r,i,o,a,s,l,c,u,d,h,p,m,f,g,y,v,w,b,k,D,x,E,S,A,C,T,R,F,I,P,M,_,N,O,j,L,B,W,U,q,H,z,V,K,Y,G,Q,X,Z,J,$,ee,te,ne,re,ie,oe,ae,se,le;let{workoutData:ce,userProfile:ue,trainingPlan:de,vdotPaces:he,experienceLevel:pe}=e;if(!ce)return null;const me=ue||{},fe="cross-training"===ce.type;let ge=fe?ce:ce.workoutDetails||ce.workout;const ye=ce.type,ve=((null===(t=ge)||void 0===t?void 0:t.name)||ce.name||"").toLowerCase(),we=ve.includes("long run")||ve.includes("progression")||ve.includes("dropdown")||ve.includes("thirds")||ve.includes("marathon pace")||ve.includes("steady state")||ve.includes("sandwich")||ve.includes("simulation")||ve.includes("dress rehearsal")||ve.includes("goal pace")?"longRun":ye,be=(null===de||void 0===de?void 0:de.currentWeek)||(null===de||void 0===de||null===(n=de.planOverview)||void 0===n?void 0:n.currentWeek)||null,ke=(null===de||void 0===de||null===(r=de.planOverview)||void 0===r?void 0:r.totalWeeks)||null,De=me.runEqPreference||0,xe=!(null!==(i=ge)&&void 0!==i&&i.intensityGuidance)||um.includes(we);if(ge&&xe&&!fe&&"easy"!==we){var Ee,Se;const e=ge.name||ce.name,t=ge.trackIntervals||(null===de||void 0===de?void 0:de.trackIntervals)||me.trackIntervals;let n=ce.distance||(null===(Ee=ge)||void 0===Ee?void 0:Ee.distance)||(null===(Se=ce.workout)||void 0===Se?void 0:Se.distance);if(!n){const t=(e||"").match(/(\d+(?:\.\d+)?)[- ]?Mile/i);t&&(n=parseFloat(t[1]))}if(!n){var Ae;const e=(ce.description||(null===(Ae=ge)||void 0===Ae?void 0:Ae.description)||"").match(/(\d+(?:\.\d+)?)\s*(?:miles?|mi)\b/i);e&&(n=parseFloat(e[1]))}if(!n){const e=(ce.name||"").match(/(\d+(?:\.\d+)?)\s*(?:miles?|mi|-Mile)\b/i);e&&(n=parseFloat(e[1]))}n||"longRun"!==we||console.warn('\u26a0\ufe0f NO DISTANCE FOUND for long run "'.concat(e,'" - AI coach should include distance in description'));const r=((e,t,n)=>{if(!e)return null;try{switch(t){case"interval":case"intervals":return am.prescribeIntervalWorkout(e,n);case"tempo":return sm.prescribeTempoWorkout(e,n);case"hill":case"hills":return lm.prescribeHillWorkout(e,n);case"longRun":case"long-run":return cm.prescribeLongRunWorkout(e,n);default:return null}}catch(Av){return console.warn('Could not fetch workout "'.concat(e,'" from library:'),Av.message),null}})(e,we,{runEqPreference:De,paces:he,trackIntervals:t,totalDistance:n,weekNumber:be,totalWeeks:ke,distance:n});r&&(ge=r)}const Ce=(e=>{switch(e){case"interval":case"intervals":return{intensity:"High intensity - 5K to 1-mile race pace",heartRate:"90-100% Max HR"};case"tempo":return{intensity:"Medium-hard effort, sustainable for 20-60 minutes",heartRate:"86-90% Max HR"};case"hill":case"hills":return{intensity:"Hard effort on hills, easy on recovery",heartRate:"85-95% Max HR"};case"longRun":case"long-run":return{intensity:"Easy conversational pace",heartRate:"70-80% Max HR"};default:return{intensity:"Moderate effort",heartRate:"70-85% Max HR"}}})(ye);let Te=null;if(fe&&null!==(o=ge)&&void 0!==o&&o.structure)Te=ge.structure;else if(null!==(a=ge)&&void 0!==a&&a.warmupCooldown&&null!==(s=ge)&&void 0!==s&&s.repetitions){const e=ge.warmupCooldown,t=[];e.warmup&&t.push("**Warmup:** ".concat(e.warmup)),t.push("**Main Set:** ".concat(ge.repetitions).concat(ge.recovery?" with ".concat(ge.recovery):"")),e.cooldown&&t.push("**Cooldown:** ".concat(e.cooldown)),Te=t.join("\n\n")}else if(null!==(l=ge)&&void 0!==l&&l.mileByMilePacing)Te=ge.mileByMilePacing;else if(null===(c=ge)||void 0===c||!c.structure||"longRun"!==ye&&"long-run"!==ye&&"tempo"!==ye)if(null!==(u=ce.workout)&&void 0!==u&&u.structure)Te=ce.workout.structure;else if(null!==(d=ge)&&void 0!==d&&d.workout){const e=[];ge.workout.warmup&&e.push("**Warmup:** ".concat(ge.workout.warmup)),ge.workout.main&&e.push("**Main Set:** ".concat(ge.workout.main)),ge.workout.recovery&&e.push("**Recovery:** ".concat(ge.workout.recovery)),ge.workout.cooldown&&e.push("**Cooldown:** ".concat(ge.workout.cooldown)),Te=e.length?e.join("\n\n"):ge.workout}else null!==(h=ge)&&void 0!==h&&null!==(p=h.totalWorkout)&&void 0!==p&&p.structure?Te=ge.totalWorkout.structure:null!==(m=ge)&&void 0!==m&&m.structure?Te=ge.structure:null!==(f=ge)&&void 0!==f&&f.repetitions&&null!==(g=ge)&&void 0!==g&&g.recovery?Te="".concat(ge.repetitions," with ").concat(ge.recovery):null!==(y=ge)&&void 0!==y&&y.repetitions&&(Te="".concat(ge.repetitions));else Te=ge.structure;if(!Te||"Complete the workout as prescribed"===Te){var Re,Fe,Ie,Pe;const e=(null===(Re=ce.workout)||void 0===Re?void 0:Re.name)||(null===(Fe=ge)||void 0===Fe?void 0:Fe.name)||"Workout",t=(null===(Ie=ce.workout)||void 0===Ie?void 0:Ie.description)||(null===(Pe=ge)||void 0===Pe?void 0:Pe.description)||"";Te=e.toLowerCase().includes("fartlek")?"10 min warmup + 20-30 min fartlek (surge when you feel strong, recover as needed) + 10 min cooldown":e.toLowerCase().includes("progressive")?"10 min easy + gradually build pace to moderate-hard finish + 5 min cooldown":e.toLowerCase().includes("tempo")?"10-15 min easy warmup + 20-30 min @ comfortably hard pace + 5-10 min cooldown":e.toLowerCase().includes("interval")||e.toLowerCase().includes("speed")?"15 min warmup + intervals at high intensity with recovery + 10 min cooldown":e.toLowerCase().includes("easy")||e.toLowerCase().includes("recovery")?"Conversational pace throughout":e.toLowerCase().includes("long")?"Steady, easy pace - focus on time on feet":t||"Complete the workout as prescribed"}const Me=fe&&(null===(v=ge)||void 0===v||null===(w=v.effort)||void 0===w?void 0:w.perceived)||(null===(b=ce.workout)||void 0===b||null===(k=b.effort)||void 0===k?void 0:k.perceived)||(null===(D=ge)||void 0===D||null===(x=D.intensityGuidance)||void 0===x?void 0:x.effort)||(null===(E=ge)||void 0===E||null===(S=E.intensityGuidance)||void 0===S?void 0:S.description)||("string"!==typeof(null===(A=ge)||void 0===A?void 0:A.intensity)||["shortSpeed","vo2Max","longIntervals","threshold","tempoPlus"].includes(ge.intensity)?null:ge.intensity)||Ce.intensity,_e=fe&&(null===(C=ge)||void 0===C||null===(T=C.effort)||void 0===T?void 0:T.heartRate)||(null===(R=ce.workout)||void 0===R||null===(F=R.effort)||void 0===F?void 0:F.heartRate)||(null===(I=ge)||void 0===I||null===(P=I.intensityGuidance)||void 0===P?void 0:P.heartRate)||(null===(M=ge)||void 0===M?void 0:M.heartRate)||Ce.heartRate;let Ne="Maintain steady effort throughout";const Oe=(null===(_=ge)||void 0===_?void 0:_.paces)||he,je=((null===(N=ge)||void 0===N?void 0:N.name)||ce.name||"").toLowerCase(),Le=je.includes("dropdown")||je.includes("10-second")||je.includes("thirds")||je.includes("dusa")||je.includes("fast finish")||je.includes("progressive"),Be=je.includes("sandwich")||je.includes("simulation")||je.includes("dress rehearsal")||je.includes("marathon pace long")||je.includes("goal pace"),We=je.includes("fast finish")||je.includes("super fast");var Ue,qe;if(ce.equipmentSpecific&&me.standUpBikeType)Ne="cyclete"===me.standUpBikeType&&null!==(Ue=ce.workout)&&void 0!==Ue&&Ue.cycleteNotes?ce.workout.cycleteNotes:"elliptigo"===me.standUpBikeType&&null!==(qe=ce.workout)&&void 0!==qe&&qe.elliptigoNotes?ce.workout.elliptigoNotes:"".concat((0,Bl.tS)(me.standUpBikeType)," specific: Focus on smooth motion and consistent effort");else if(Oe){var He,ze;if(Be&&(Oe.racePace||Oe.marathon)){var Ve,Ke;const e=(null===(Ve=Oe.racePace)||void 0===Ve?void 0:Ve.pace)||(null===(Ke=Oe.marathon)||void 0===Ke?void 0:Ke.pace);Ne="".concat(e,"/mile (goal pace)")}else if(We&&Oe.easy&&Oe.interval){const e="".concat(Oe.easy.min,"-").concat(Oe.easy.max,"/mile"),t=Oe.interval.pace;Ne="".concat(e," \u2192 ").concat(t,"/mile (fast finish)")}else Le&&Oe.easy?Ne="".concat(Oe.easy.min,"-").concat(Oe.easy.max,"/mile (starting pace)"):"intervals"!==ye&&"interval"!==ye||!Oe.interval?("tempo"===ye||"threshold"===ye||je.includes("tempo"))&&Oe.threshold?Ne="".concat(Oe.threshold.pace,"/mile"):"longRun"===ye&&Oe.easy?Ne="".concat(Oe.easy.min,"-").concat(Oe.easy.max,"/mile"):!Oe.easy||"easy"!==ye&&"recovery"!==ye?null!==(He=ge)&&void 0!==He&&null!==(ze=He.intensityGuidance)&&void 0!==ze&&ze.pace&&(Ne=ge.intensityGuidance.pace):Ne="".concat(Oe.easy.min,"-").concat(Oe.easy.max,"/mile"):Ne="".concat(Oe.interval.pace,"/mile")}else null!==(O=ge)&&void 0!==O&&null!==(j=O.intensityGuidance)&&void 0!==j&&j.pace&&(Ne=ge.intensityGuidance.pace);let Ye=null!==(L=ge)&&void 0!==L&&L.safetyNotes&&Array.isArray(ge.safetyNotes)&&ge.safetyNotes.length>0?ge.safetyNotes:["Listen to your body and adjust as needed","Stay hydrated throughout the workout","Stop if you feel pain or excessive fatigue"];null!==(B=ce.workout)&&void 0!==B&&B.roadConsiderations&&(Ye=[...Ye,"Road planning: ".concat(ce.workout.roadConsiderations)]);let Ge="30-45 minutes";if(fe&&null!==(W=ge)&&void 0!==W&&W.duration||null!==(U=ge)&&void 0!==U&&U.duration&&um.includes(we)?Ge=ge.duration:null!==(q=ce.workout)&&void 0!==q&&q.duration?Ge=ce.workout.duration:null!==(H=ge)&&void 0!==H&&H.duration&&(Ge=ge.duration),("longRun"===we||"easy"===ye)&&Ge.includes("45-")&&null!==(z=ge)&&void 0!==z&&null!==(V=z.paces)&&void 0!==V&&V.easy){var Qe,Xe;const e=((null===(Qe=ge)||void 0===Qe?void 0:Qe.name)||(null===(Xe=ce.workout)||void 0===Xe?void 0:Xe.name)||"").match(/(\d+(?:\.\d+)?)[- ]?Mile/i);if(e){const t=parseFloat(e[1]),n=ge.paces.easy.min,r=ge.paces.easy.max;if(n&&r){const e=e=>{const[t,n]=e.split(":").map(Number);return t+n/60},i=Math.round(t*e(n)),o=Math.round(t*e(r));Ge="".concat(i,"-").concat(o," minutes")}}}if(Te&&"string"===typeof Te){const e=Te.match(/(\d+-\d+)\s*minutes?\s*total/i);e?Ge="".concat(e[1]," minutes total"):Te.includes("warmup")&&Te.includes("cooldown")&&(Ge="".concat(Ge," (main set)"))}let Ze=null===(K=ge)||void 0===K?void 0:K.progression;if(Ze&&"object"===typeof Ze&&!Array.isArray(Ze)){const e=pe?Object.keys(Ze).find(e=>e.toLowerCase()===pe.toLowerCase()):null;if(e)Ze=Ze[e];else{const e=Object.values(Ze);Ze=e.length>0?e[0]:null}}return{name:(null===(Y=ge)||void 0===Y?void 0:Y.name)||"Workout",type:ce.type||"easy",focus:ce.focus||(null===(G=ge)||void 0===G?void 0:G.focus)||(Je=ye,{hills:"Power & Strength",tempo:"Lactate Threshold",intervals:"VO2 Max & Speed",easy:"Aerobic Base",longRun:"Endurance","cross-training":"Active Recovery"}[Je]||"General Fitness"),duration:Ge,description:(null===(Q=ge)||void 0===Q?void 0:Q.description)||"Standard workout",structure:Te,equipmentSpecific:ce.equipmentSpecific||!1,intensity:Me,heartRate:_e,paceGuidance:Ne,safetyNotes:Ye,alternatives:(null===(X=ge)||void 0===X?void 0:X.alternatives)||{tooHot:"Move indoors or adjust timing",tooTired:"Easy recovery pace instead",timeConstraint:"Reduce duration but maintain intensity",noEquipment:"Bodyweight alternative available"},hillRequirement:null===(Z=ge)||void 0===Z?void 0:Z.hillRequirement,terrainInstructions:null===(J=ge)||void 0===J?void 0:J.terrainInstructions,progression:Ze,benefits:(null===($=ge)||void 0===$?void 0:$.benefits)||dm(ye,null===(ee=ge)||void 0===ee?void 0:ee.name),variations:null===(te=ge)||void 0===te?void 0:te.variations,examples:null===(ne=ge)||void 0===ne?void 0:ne.examples,trackIntervals:null===(re=ge)||void 0===re?void 0:re.trackIntervals,fueling:null===(ie=ge)||void 0===ie?void 0:ie.fueling,runEqOptions:ce.runEqOptions,coachingGuidance:ce.coachingGuidance,technique:null===(oe=ge)||void 0===oe?void 0:oe.technique,effort:null===(ae=ge)||void 0===ae?void 0:ae.effort,coachingTips:null===(se=ge)||void 0===se?void 0:se.coachingTips,settings:null===(le=ge)||void 0===le?void 0:le.settings,crossTrainingType:ce.crossTrainingType};var Je}const pm=new Ve.O,mm={"5K":3.1,"10K":6.2,Half:13.1,"Half Marathon":13.1,Marathon:26.2};function fm(e){let{day:t,userProfile:r,trainingPlan:i,locationState:o={}}=e;const[s,l]=(0,a.useState)({isOpen:!1,workout:null}),[u,d]=(0,a.useState)(null),[h,p]=(0,a.useState)(null),m=o.workout,f=o.userProfile||r,g=o.currentWeek||1,y=o.weekData,v=(0,a.useMemo)(()=>{var e,t,n,o;const a=(null===i||void 0===i||null===(e=i.planOverview)||void 0===e?void 0:e.goalTime)||(null===f||void 0===f?void 0:f.raceTime)||(null===r||void 0===r?void 0:r.raceTime),s=(null===i||void 0===i||null===(t=i.planOverview)||void 0===t?void 0:t.raceDistance)||(null===f||void 0===f?void 0:f.raceDistance)||(null===r||void 0===r?void 0:r.raceDistance),l=((e,t)=>{if(!e||!t)return null;const n=(e.includes("-")?e.split("-")[1]:e).split(":").map(Number);let r;if(3===n.length)r=60*n[0]+n[1]+n[2]/60;else{if(2!==n.length)return null;r=n[0]+n[1]/60}const i=mm[t]||parseFloat(t);if(!i)return null;const o=r/i,a=Math.floor(o),s=Math.round(60*(o-a));return"".concat(a,":").concat(s.toString().padStart(2,"0"))})(a,s),u=e=>e&&l?(0,c.A)((0,c.A)({},e),{},{racePace:{pace:l},raceDistance:s}):e;if(null!==f&&void 0!==f&&null!==(n=f.paces)&&void 0!==n&&n.easy)return u(f.paces);if(null!==i&&void 0!==i&&null!==(o=i.paces)&&void 0!==o&&o.easy)return u(i.paces);if(a&&s)try{var d;const e=pm.calculateFromGoal(s,a);if(null!==e&&void 0!==e&&null!==(d=e.paces)&&void 0!==d&&d.easy)return u(e.paces)}catch(h){}return null},[i,f,r]),w=(0,a.useMemo)(()=>{if(m)return m;const e=(t||"").toLowerCase();if(null!==y&&void 0!==y&&y.workouts)if(Array.isArray(y.workouts)){const t=y.workouts.find(t=>t.day&&t.day.toLowerCase()===e);if(t)return t}else if(y.workouts[e])return y.workouts[e];if(null===i||void 0===i||!i.weeks)return null;const n=Math.min(g-1,i.weeks.length-1),r=i.weeks[n];return null!==r&&void 0!==r&&r.workouts&&r.workouts.find(t=>t.day&&t.day.toLowerCase()===e)||null},[m,y,i,t,g]);(0,a.useEffect)(()=>{let e=!0;return(async()=>{if(Pe.j2.currentUser&&w)try{const{doc:t,getDoc:r}=await Promise.resolve().then(n.bind(n,667)),{db:i}=await Promise.resolve().then(n.bind(n,121)),o=t(i,"users",Pe.j2.currentUser.uid),a=await r(o);if(e&&a.exists()){const e=a.data().completedWorkouts||{},t=w.workoutIndex||0,n="".concat(g,"-").concat(w.day,"-").concat(t);p(e[n]||null)}}catch(t){console.error("Error fetching completion data:",t)}else e&&p(null)})(),()=>{e=!1}},[w,g]);const b=f||r,k=(0,a.useMemo)(()=>({tuesday:{name:null!==b&&void 0!==b&&b.standUpBikeType?"Progressive Build Session":"Sandwich Tempo",type:"tempo",focus:"Lactate Threshold",duration:"45 minutes",description:null!==b&&void 0!==b&&b.standUpBikeType?"Gradually increasing intensity throughout session on your stand-up bike":"Tempo effort sandwiched between easy running",structure:null!==b&&void 0!==b&&b.standUpBikeType?"20 min easy + 20-40 min progressive build to tempo + 10 min easy":"10-15 min easy warmup + 15-20 min tempo + 5-10 min easy cooldown",equipmentSpecific:!(null===b||void 0===b||!b.standUpBikeType),intensity:"Medium-hard effort, sustainable for 20-60 minutes",heartRate:"86-90% Max HR",paceGuidance:null!==b&&void 0!==b&&b.standUpBikeType?"".concat((0,Bl.tS)(null===b||void 0===b?void 0:b.standUpBikeType)," specific: Focus on smooth ").concat("cyclete"===(null===b||void 0===b?void 0:b.standUpBikeType)?"teardrop":"elliptical"," motion"):"Half marathon to 10-mile race pace",safetyNotes:['Start conservatively - tempo should feel "controlled discomfort"',"If breathing becomes labored, slow down slightly","Better to run slightly too easy than too hard"],alternatives:{tooHot:"Move indoors or to early morning",tooTired:"Easy run with 4-6 x 1 minute pickups",timeConstraint:"20 min tempo run instead of full session",noEquipment:null!==b&&void 0!==b&&b.standUpBikeType?"Traditional running tempo workout":"Treadmill with 1% incline"}},thursday:{name:"Easy Run",type:"easy",focus:"Recovery",duration:"35-45 minutes",description:"Conversational pace, aerobic base building",structure:"Easy effort throughout, should feel refreshed after",equipmentSpecific:!1,intensity:"Easy conversational pace",heartRate:"65-79% Max HR",paceGuidance:"Should be able to speak in full sentences",safetyNotes:["This should feel easy - not a workout day","Focus on form and relaxation","Cut short if feeling overly fatigued"],alternatives:{tooHot:"Move to air conditioning or pool running",tooTired:"Walk or very easy bike ride",injury:"Cross-training or complete rest",timeConstraint:"20-30 minutes is fine"}},sunday:{name:"Conversational Long Run",type:"longRun",focus:"Endurance",duration:"60-75 minutes",description:"Easy long run emphasizing conversational pace",structure:"Run with partner/group, maintain conversation throughout",equipmentSpecific:!1,intensity:"Easy conversational pace",heartRate:"65-78% Max HR",paceGuidance:"If you can't hold a conversation, you're going too fast",safetyNotes:["Carry water for runs over 60 minutes","Know your route and have bailout options","Focus on time on feet, not speed"],alternatives:{tooHot:"Start very early or split into two shorter runs",timeConstraint:"Run for available time, maintain easy effort",noPartner:"Solo run with audiobook or podcast",injury:"Long bike ride or pool running session"}}}),[null===b||void 0===b?void 0:b.standUpBikeType]),D=(t||"").toLowerCase(),x=(0,a.useMemo)(()=>{const e=w||k[D]||k.tuesday;return e?hm({workoutData:e,userProfile:b,trainingPlan:i,vdotPaces:v,experienceLevel:null===b||void 0===b?void 0:b.experienceLevel}):null},[w,k,D,b,i,v]),E=()=>{l({isOpen:!1,workout:null})};return{userProfileForDisplay:f,currentWeekNumber:g,weekDataFromState:y,workoutData:w,completionData:h,currentWorkout:u||x,somethingElseModal:s,openSomethingElseModal:e=>{e&&l({isOpen:!0,workout:{day:t.charAt(0).toUpperCase()+t.slice(1),type:e.type,workout:{name:e.name,description:e.description},focus:e.focus,equipmentSpecific:e.equipmentSpecific}})},closeSomethingElseModal:E,handleWorkoutReplacement:async e=>{if(!x)return;const n=(0,c.A)((0,c.A)({},x),{},{workout:(0,c.A)({},e.workout),name:e.workout.name,description:e.workout.description,type:e.type,focus:e.focus,equipmentSpecific:e.equipmentSpecific,replacementReason:e.replacementReason});d(n);const r="".concat(g,"-").concat(t),i={day:t.charAt(0).toUpperCase()+t.slice(1),workout:(0,c.A)({},e.workout),focus:e.focus,type:e.type,equipmentSpecific:e.equipmentSpecific,replacementReason:e.replacementReason},o=JSON.parse(localStorage.getItem("runeq_modifiedWorkouts")||"{}");o[r]=i,localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(o)),Pe.j2.currentUser&&await Ne.saveModifiedWorkout(Pe.j2.currentUser.uid,g,t,i),E()}}}function gm(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}function ym(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}let vm=function(){const{crypto:e}=globalThis;if(null!==e&&void 0!==e&&e.randomUUID)return vm=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^n()&15>>+e/4).toString(16))};function wm(e){return"object"===typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const bm=e=>{if(e instanceof Error)return e;if("object"===typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch(t){}try{return new Error(JSON.stringify(e))}catch(n){}}return new Error(e)};class km extends Error{}class Dm extends km{constructor(e,t,n,r){super("".concat(Dm.makeMessage(e,t,n))),this.status=e,this.headers=r,this.requestID=null===r||void 0===r?void 0:r.get("request-id"),this.error=t}static makeMessage(e,t,n){const r=null!==t&&void 0!==t&&t.message?"string"===typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?"".concat(e," ").concat(r):e?"".concat(e," status code (no body)"):r||"(no status code or body)"}static generate(e,t,n,r){if(!e||!r)return new Em({message:n,cause:bm(t)});const i=t;return 400===e?new Am(e,i,n,r):401===e?new Cm(e,i,n,r):403===e?new Tm(e,i,n,r):404===e?new Rm(e,i,n,r):409===e?new Fm(e,i,n,r):422===e?new Im(e,i,n,r):429===e?new Pm(e,i,n,r):e>=500?new Mm(e,i,n,r):new Dm(e,i,n,r)}}class xm extends Dm{constructor(){let{message:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(void 0,void 0,e||"Request was aborted.",void 0)}}class Em extends Dm{constructor(e){let{message:t,cause:n}=e;super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class Sm extends Em{constructor(){let{message:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({message:null!==e&&void 0!==e?e:"Request timed out."})}}class Am extends Dm{}class Cm extends Dm{}class Tm extends Dm{}class Rm extends Dm{}class Fm extends Dm{}class Im extends Dm{}class Pm extends Dm{}class Mm extends Dm{}const _m=/^[a-z][a-z0-9+.-]*:/i;let Nm=e=>(Nm=Array.isArray,Nm(e)),Om=Nm;function jm(e){return"object"!==typeof e?{}:null!==e&&void 0!==e?e:{}}const Lm=e=>{try{return JSON.parse(e)}catch(t){return}},Bm="0.69.0";const Wm=()=>{const e="undefined"!==typeof Deno&&null!=Deno.build?"deno":"undefined"!==typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call("undefined"!==typeof globalThis.process?globalThis.process:0)?"node":"unknown";var t,n,r,i,o;if("deno"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bm,"X-Stainless-OS":qm(Deno.build.os),"X-Stainless-Arch":Um(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"===typeof Deno.version?Deno.version:null!==(t=null===(n=Deno.version)||void 0===n?void 0:n.deno)&&void 0!==t?t:"unknown"};if("undefined"!==typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"other:".concat(EdgeRuntime),"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bm,"X-Stainless-OS":qm(null!==(r=globalThis.process.platform)&&void 0!==r?r:"unknown"),"X-Stainless-Arch":Um(null!==(i=globalThis.process.arch)&&void 0!==i?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":null!==(o=globalThis.process.version)&&void 0!==o?o:"unknown"};const a=function(){if("undefined"===typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const e=n.exec(navigator.userAgent);if(e){const n=e[1]||0,r=e[2]||0,i=e[3]||0;return{browser:t,version:"".concat(n,".").concat(r,".").concat(i)}}}return null}();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"browser:".concat(a.browser),"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};const Um=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?"other:".concat(e):"unknown",qm=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?"Other:".concat(e):"Unknown";let Hm;function zm(){const e=globalThis.ReadableStream;if("undefined"===typeof e)throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new e(...n)}function Vm(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return zm({start(){},async pull(e){const{done:n,value:r}=await t.next();n?e.close():e.enqueue(r)},async cancel(){var e;await(null===(e=t.return)||void 0===e?void 0:e.call(t))}})}function Km(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return null!==e&&void 0!==e&&e.done&&t.releaseLock(),e}catch(Av){throw t.releaseLock(),Av}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const Ym=e=>{let{headers:t,body:n}=e;return{bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(n)}};function Gm(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Qm(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Qm(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Qm=function(e){this.s=e,this.n=e.next},Qm.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Qm(e)}function Xm(e,t){this.v=e,this.k=t}function Zm(e){return new Xm(e,0)}function Jm(e){return function(){return new $m(e.apply(this,arguments))}}function $m(e){var t,n;function r(t,n){try{var o=e[t](n),a=o.value,s=a instanceof Xm;Promise.resolve(s?a.v:a).then(function(n){if(s){var l="return"===t?"return":"next";if(!a.k||n.done)return r(l,n);n=e[l](n).value}i(o.done?"return":"normal",n)},function(e){r("throw",e)})}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise(function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,i))})},"function"!=typeof e.return&&(this.return=void 0)}let ef,tf;function nf(e){let t;return(null!==ef&&void 0!==ef?ef:(t=new globalThis.TextEncoder,ef=t.encode.bind(t)))(e)}function rf(e){let t;return(null!==tf&&void 0!==tf?tf:(t=new globalThis.TextDecoder,tf=t.decode.bind(t)))(e)}var of,af;$m.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},$m.prototype.next=function(e){return this._invoke("next",e)},$m.prototype.throw=function(e){return this._invoke("throw",e)},$m.prototype.return=function(e){return this._invoke("return",e)};class sf{constructor(){of.set(this,void 0),af.set(this,void 0),gm(this,of,new Uint8Array,"f"),gm(this,af,null,"f")}decode(e){if(null==e)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"===typeof e?nf(e):e;gm(this,of,function(e){let t=0;for(const i of e)t+=i.length;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}([ym(this,of,"f"),t]),"f");const n=[];let r;for(;null!=(r=lf(ym(this,of,"f"),ym(this,af,"f")));){if(r.carriage&&null==ym(this,af,"f")){gm(this,af,r.index,"f");continue}if(null!=ym(this,af,"f")&&(r.index!==ym(this,af,"f")+1||r.carriage)){n.push(rf(ym(this,of,"f").subarray(0,ym(this,af,"f")-1))),gm(this,of,ym(this,of,"f").subarray(ym(this,af,"f")),"f"),gm(this,af,null,"f");continue}const e=null!==ym(this,af,"f")?r.preceding-1:r.preceding,t=rf(ym(this,of,"f").subarray(0,e));n.push(t),gm(this,of,ym(this,of,"f").subarray(r.index),"f"),gm(this,af,null,"f")}return n}flush(){return ym(this,of,"f").length?this.decode("\n"):[]}}function lf(e,t){for(let n=null!==t&&void 0!==t?t:0;n<e.length;n++){if(10===e[n])return{preceding:n,index:n+1,carriage:!1};if(13===e[n])return{preceding:n,index:n+1,carriage:!0}}return null}function cf(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1}of=new WeakMap,af=new WeakMap,sf.NEWLINE_CHARS=new Set(["\n","\r"]),sf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;const uf={off:0,error:200,warn:300,info:400,debug:500},df=(e,t,n)=>{var r,i;if(e)return r=uf,i=e,Object.prototype.hasOwnProperty.call(r,i)?e:void gf(n).warn("".concat(t," was set to ").concat(JSON.stringify(e),", expected one of ").concat(JSON.stringify(Object.keys(uf))))};function hf(){}function pf(e,t,n){return!t||uf[e]>uf[n]?hf:t[e].bind(t)}const mf={error:hf,warn:hf,info:hf,debug:hf};let ff=new WeakMap;function gf(e){var t;const n=e.logger,r=null!==(t=e.logLevel)&&void 0!==t?t:"off";if(!n)return mf;const i=ff.get(n);if(i&&i[0]===r)return i[1];const o={error:pf("error",n,r),warn:pf("warn",n,r),info:pf("info",n,r),debug:pf("debug",n,r)};return ff.set(n,[r,o]),o}const yf=e=>(e.options&&(e.options=(0,c.A)({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(e=>{let[t,n]=e;return[t,"x-api-key"===t.toLowerCase()||"authorization"===t.toLowerCase()||"cookie"===t.toLowerCase()||"set-cookie"===t.toLowerCase()?"***":n]}))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);var vf,wf,bf;class kf{constructor(e,t,n){this.iterator=e,vf.set(this,void 0),this.controller=t,gm(this,vf,n,"f")}static fromSSEResponse(e,t,n){let r=!1;const i=n?gf(n):console;function o(){return o=Jm(function*(){if(r)throw new km("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let n=!1;try{var o,a=!1,s=!1;try{for(var l,c=Gm(function(e,t){return Df.apply(this,arguments)}(e,t));a=!(l=yield Zm(c.next())).done;a=!1){const t=l.value;if("completion"===t.event)try{yield JSON.parse(t.data)}catch(Av){throw i.error("Could not parse message into JSON:",t.data),i.error("From chunk:",t.raw),Av}if("message_start"===t.event||"message_delta"===t.event||"message_stop"===t.event||"content_block_start"===t.event||"content_block_delta"===t.event||"content_block_stop"===t.event)try{yield JSON.parse(t.data)}catch(Av){throw i.error("Could not parse message into JSON:",t.data),i.error("From chunk:",t.raw),Av}var u;if("ping"!==t.event)if("error"===t.event)throw new Dm(void 0,null!==(u=Lm(t.data))&&void 0!==u?u:t.data,void 0,e.headers)}}catch(d){s=!0,o=d}finally{try{a&&null!=c.return&&(yield Zm(c.return()))}finally{if(s)throw o}}n=!0}catch(Av){if(wm(Av))return;throw Av}finally{n||t.abort()}}),o.apply(this,arguments)}return new kf(function(){return o.apply(this,arguments)},t,n)}static fromReadableStream(e,t,n){let r=!1;function i(){return(i=Jm(function*(){const t=new sf,n=Km(e);var r,i=!1,o=!1;try{for(var a,s=Gm(n);i=!(a=yield Zm(s.next())).done;i=!1){const e=a.value;for(const n of t.decode(e))yield n}}catch(l){o=!0,r=l}finally{try{i&&null!=s.return&&(yield Zm(s.return()))}finally{if(o)throw r}}for(const e of t.flush())yield e})).apply(this,arguments)}function o(){return o=Jm(function*(){if(r)throw new km("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let e=!1;try{var n,o=!1,a=!1;try{for(var s,l=Gm(function(){return i.apply(this,arguments)}());o=!(s=yield Zm(l.next())).done;o=!1){const t=s.value;e||t&&(yield JSON.parse(t))}}catch(c){a=!0,n=c}finally{try{o&&null!=l.return&&(yield Zm(l.return()))}finally{if(a)throw n}}e=!0}catch(Av){if(wm(Av))return;throw Av}finally{e||t.abort()}}),o.apply(this,arguments)}return new kf(function(){return o.apply(this,arguments)},t,n)}[(vf=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=r=>({next:()=>{if(0===r.length){const r=n.next();e.push(r),t.push(r)}return r.shift()}});return[new kf(()=>r(e),this.controller,ym(this,vf,"f")),new kf(()=>r(t),this.controller,ym(this,vf,"f"))]}toReadableStream(){const e=this;let t;return zm({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:n,done:r}=await t.next();if(r)return e.close();const i=nf(JSON.stringify(n)+"\n");e.enqueue(i)}catch(n){e.error(n)}},async cancel(){var e,n;await(null===(e=(n=t).return)||void 0===e?void 0:e.call(n))}})}}function Df(){return Df=Jm(function*(e,t){if(!e.body){if(t.abort(),"undefined"!==typeof globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new km("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new km("Attempted to iterate over a response with no body")}const n=new Ef,r=new sf,i=Km(e.body);var o,a=!1,s=!1;try{for(var l,c=Gm(function(e){return xf.apply(this,arguments)}(i));a=!(l=yield Zm(c.next())).done;a=!1){const e=l.value;for(const t of r.decode(e)){const e=n.decode(t);e&&(yield e)}}}catch(u){s=!0,o=u}finally{try{a&&null!=c.return&&(yield Zm(c.return()))}finally{if(s)throw o}}for(const d of r.flush()){const e=n.decode(d);e&&(yield e)}}),Df.apply(this,arguments)}function xf(){return xf=Jm(function*(e){let t=new Uint8Array;var n,r=!1,i=!1;try{for(var o,a=Gm(e);r=!(o=yield Zm(a.next())).done;r=!1){const e=o.value;{if(null==e)continue;const n=e instanceof ArrayBuffer?new Uint8Array(e):"string"===typeof e?nf(e):e;let r,i=new Uint8Array(t.length+n.length);for(i.set(t),i.set(n,t.length),t=i;-1!==(r=cf(t));)yield t.slice(0,r),t=t.slice(r)}}}catch(s){i=!0,n=s}finally{try{r&&null!=a.return&&(yield Zm(a.return()))}finally{if(i)throw n}}t.length>0&&(yield t)}),xf.apply(this,arguments)}class Ef{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=function(e,t){const n=e.indexOf(t);if(-1!==n)return[e.substring(0,n),t,e.substring(n+t.length)];return[e,"",""]}(e,":");return r.startsWith(" ")&&(r=r.substring(1)),"event"===t?this.event=r:"data"===t&&this.data.push(r),null}}async function Sf(e,t){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=t,a=await(async r=>{if(t.options.stream)return gf(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller):kf.fromSSEResponse(n,t.controller);if(204===n.status)return null;if(t.options.__binaryResponse)return n;const i=n.headers.get("content-type"),o=null===i||void 0===i||null===(r=i.split(";")[0])||void 0===r?void 0:r.trim();if((null===o||void 0===o?void 0:o.includes("application/json"))||(null===o||void 0===o?void 0:o.endsWith("+json"))){return Af(await n.json(),n)}return await n.text()})();return gf(e).debug("[".concat(r,"] response parsed"),yf({retryOfRequestLogID:i,url:n.url,status:n.status,body:a,durationMs:Date.now()-o})),a}function Af(e,t){return!e||"object"!==typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("request-id"),enumerable:!1})}class Cf extends Promise{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sf;super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=n,wf.set(this,void 0),gm(this,wf,e,"f")}_thenUnwrap(e){return new Cf(ym(this,wf,"f"),this.responsePromise,async(t,n)=>Af(e(await this.parseResponse(t,n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(ym(this,wf,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}wf=new WeakMap;class Tf{constructor(e,t,n,r){bf.set(this,void 0),gm(this,bf,e,"f"),this.options=r,this.response=t,this.body=n}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageRequestOptions()}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new km("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await ym(this,bf,"f").requestAPIList(this.constructor,e)}iterPages(){var e=this;return Jm(function*(){let t=e;for(yield t;t.hasNextPage();)t=yield Zm(t.getNextPage()),yield t})()}[(bf=new WeakMap,Symbol.asyncIterator)](){var e=this;return Jm(function*(){var t,n=!1,r=!1;try{for(var i,o=Gm(e.iterPages());n=!(i=yield Zm(o.next())).done;n=!1){const e=i.value;for(const t of e.getPaginatedItems())yield t}}catch(a){r=!0,t=a}finally{try{n&&null!=o.return&&(yield Zm(o.return()))}finally{if(r)throw t}}})()}}class Rf extends Cf{constructor(e,t,n){super(e,t,async(e,t)=>new n(e,t.response,await Sf(e,t),t.options))}[Symbol.asyncIterator](){var e=this;return Jm(function*(){const t=yield Zm(e);var n,r=!1,i=!1;try{for(var o,a=Gm(t);r=!(o=yield Zm(a.next())).done;r=!1){const e=o.value;yield e}}catch(s){i=!0,n=s}finally{try{r&&null!=a.return&&(yield Zm(a.return()))}finally{if(i)throw n}}})()}}class Ff extends Tf{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1,this.first_id=n.first_id||null,this.last_id=n.last_id||null}getPaginatedItems(){var e;return null!==(e=this.data)&&void 0!==e?e:[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){var e;if(null!==(e=this.options.query)&&void 0!==e&&e.before_id){const e=this.first_id;return e?(0,c.A)((0,c.A)({},this.options),{},{query:(0,c.A)((0,c.A)({},jm(this.options.query)),{},{before_id:e})}):null}const t=this.last_id;return t?(0,c.A)((0,c.A)({},this.options),{},{query:(0,c.A)((0,c.A)({},jm(this.options.query)),{},{after_id:t})}):null}}class If extends Tf{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1,this.next_page=n.next_page||null}getPaginatedItems(){var e;return null!==(e=this.data)&&void 0!==e?e:[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){const e=this.next_page;return e?(0,c.A)((0,c.A)({},this.options),{},{query:(0,c.A)((0,c.A)({},jm(this.options.query)),{},{page:e})}):null}}const Pf=()=>{if("undefined"===typeof File){var e;const{process:t}=globalThis,n="string"===typeof(null===t||void 0===t||null===(e=t.versions)||void 0===e?void 0:e.node)&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Mf(e,t,n){return Pf(),new File(e,null!==t&&void 0!==t?t:"unknown_file",n)}function _f(e){return("object"===typeof e&&null!==e&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const Nf=e=>null!=e&&"object"===typeof e&&"function"===typeof e[Symbol.asyncIterator],Of=async(e,t)=>(0,c.A)((0,c.A)({},e),{},{body:await Lf(e.body,t)}),jf=new WeakMap;const Lf=async(e,t)=>{if(!await function(e){const t="function"===typeof e?e:e.fetch,n=jf.get(t);if(n)return n;const r=(async()=>{try{const e="Response"in t?t.Response:(await t("data:,")).constructor,n=new FormData;return n.toString()!==await new e(n).text()}catch(e){return!0}})();return jf.set(t,r),r}(t))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(e||{}).map(e=>{let[t,r]=e;return Wf(n,t,r)})),n},Bf=e=>e instanceof Blob&&"name"in e,Wf=async(e,t,n)=>{if(void 0!==n){if(null==n)throw new TypeError('Received null for "'.concat(t,"\"; to pass null in FormData, you must use the string 'null'"));if("string"===typeof n||"number"===typeof n||"boolean"===typeof n)e.append(t,String(n));else if(n instanceof Response){let r={};const i=n.headers.get("Content-Type");i&&(r={type:i}),e.append(t,Mf([await n.blob()],_f(n),r))}else if(Nf(n))e.append(t,Mf([await new Response(Vm(n)).blob()],_f(n)));else if(Bf(n))e.append(t,Mf([n],_f(n),{type:n.type}));else if(Array.isArray(n))await Promise.all(n.map(n=>Wf(e,t+"[]",n)));else{if("object"!==typeof n)throw new TypeError("Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ".concat(n," instead"));await Promise.all(Object.entries(n).map(n=>{let[r,i]=n;return Wf(e,"".concat(t,"[").concat(r,"]"),i)}))}}},Uf=e=>null!=e&&"object"===typeof e&&"number"===typeof e.size&&"string"===typeof e.type&&"function"===typeof e.text&&"function"===typeof e.slice&&"function"===typeof e.arrayBuffer;async function qf(e){let t=[];if("string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(Uf(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else{if(!Nf(e)){var n;const t=null===e||void 0===e||null===(n=e.constructor)||void 0===n?void 0:n.name;throw new Error("Unexpected data type: ".concat(typeof e).concat(t?"; constructor: ".concat(t):"").concat(function(e){if("object"!==typeof e||null===e)return"";const t=Object.getOwnPropertyNames(e);return"; props: [".concat(t.map(e=>'"'.concat(e,'"')).join(", "),"]")}(e)))}var r,i=!1,o=!1;try{for(var a,s=Gm(e);i=!(a=await s.next()).done;i=!1){const e=a.value;t.push(...await qf(e))}}catch(l){o=!0,r=l}finally{try{i&&null!=s.return&&await s.return()}finally{if(o)throw r}}}return t}class Hf{constructor(e){this._client=e}}function zf(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const Vf=Symbol.for("brand.privateNullableHeaders");function*Kf(e){if(!e)return;if(Vf in e){const{values:t,nulls:n}=e;yield*t.entries();for(const e of n)yield[e,null];return}let t,n=!1;e instanceof Headers?t=e.entries():Om(e)?t=e:(n=!0,t=Object.entries(null!==e&&void 0!==e?e:{}));for(let r of t){const e=r[0];if("string"!==typeof e)throw new TypeError("expected header name to be a string");const t=Om(r[1])?r[1]:[r[1]];let i=!1;for(const r of t)void 0!==r&&(n&&!i&&(i=!0,yield[e,null]),yield[e,r])}}const Yf=e=>{const t=new Headers,n=new Set;for(const r of e){const e=new Set;for(const[i,o]of Kf(r)){const r=i.toLowerCase();e.has(r)||(t.delete(i),e.add(r)),null===o?(t.delete(i),n.add(r)):(t.append(i,o),n.delete(r))}}return{[Vf]:!0,values:t,nulls:n}};function Gf(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Qf=Object.freeze(Object.create(null)),Xf=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gf;return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(1===t.length)return t[0];let o=!1;const a=[],s=t.reduce((t,n,i)=>{var s,l,c;/[?#]/.test(n)&&(o=!0);const u=r[i];let d=(o?encodeURIComponent:e)(""+u);return i!==r.length&&(null==u||"object"===typeof u&&u.toString===(null===(s=Object.getPrototypeOf(null!==(l=Object.getPrototypeOf(null!==(c=u.hasOwnProperty)&&void 0!==c?c:Qf))&&void 0!==l?l:Qf))||void 0===s?void 0:s.toString))&&(d=u+"",a.push({start:t.length+n.length,length:d.length,error:"Value of type ".concat(Object.prototype.toString.call(u).slice(8,-1)," is not a valid path parameter")})),t+n+(i===r.length?"":d)},""),l=s.split(/[?#]/,1)[0],c=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;let u;for(;null!==(u=c.exec(l));)a.push({start:u.index,length:u[0].length,error:'Value "'.concat(u[0],"\" can't be safely passed as a path parameter")});if(a.sort((e,t)=>e.start-t.start),a.length>0){let e=0;const t=a.reduce((t,n)=>{const r=" ".repeat(n.start-e),i="^".repeat(n.length);return e=n.start+n.length,t+r+i},"");throw new km("Path parameters result in path with invalid segments:\n".concat(a.map(e=>e.error).join("\n"),"\n").concat(s,"\n").concat(t))}return s}},Zf=Xf(Gf);var Jf,$f,eg;const tg=["betas"],ng=["betas"];class rg extends Hf{list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=null!==e&&void 0!==e?e:{},{betas:r}=n,i=(0,eo.A)(n,tg);return this._client.getAPIList("/v1/files",Ff,(0,c.A)((0,c.A)({query:i},t),{},{headers:Yf([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"files-api-2025-04-14"].toString()},null===t||void 0===t?void 0:t.headers])}))}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.delete(Zf(Jf||(Jf=zf(["/v1/files/",""])),e),(0,c.A)((0,c.A)({},n),{},{headers:Yf([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"files-api-2025-04-14"].toString()},null===n||void 0===n?void 0:n.headers])}))}download(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.get(Zf($f||($f=zf(["/v1/files/","/content"])),e),(0,c.A)((0,c.A)({},n),{},{headers:Yf([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},null===n||void 0===n?void 0:n.headers]),__binaryResponse:!0}))}retrieveMetadata(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.get(Zf(eg||(eg=zf(["/v1/files/",""])),e),(0,c.A)((0,c.A)({},n),{},{headers:Yf([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"files-api-2025-04-14"].toString()},null===n||void 0===n?void 0:n.headers])}))}upload(e,t){const{betas:n}=e,r=(0,eo.A)(e,ng);return this._client.post("/v1/files",Of((0,c.A)((0,c.A)({body:r},t),{},{headers:Yf([{"anthropic-beta":[...null!==n&&void 0!==n?n:[],"files-api-2025-04-14"].toString()},null===t||void 0===t?void 0:t.headers])}),this._client))}}const ig=["betas"];var og;class ag extends Hf{retrieve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.get(Zf(og||(og=zf(["/v1/models/","?beta=true"])),e),(0,c.A)((0,c.A)({},n),{},{headers:Yf([(0,c.A)({},null!=(null===r||void 0===r?void 0:r.toString())?{"anthropic-beta":null===r||void 0===r?void 0:r.toString()}:void 0),null===n||void 0===n?void 0:n.headers])}))}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=null!==e&&void 0!==e?e:{},{betas:r}=n,i=(0,eo.A)(n,ig);return this._client.getAPIList("/v1/models?beta=true",Ff,(0,c.A)((0,c.A)({query:i},t),{},{headers:Yf([(0,c.A)({},null!=(null===r||void 0===r?void 0:r.toString())?{"anthropic-beta":null===r||void 0===r?void 0:r.toString()}:void 0),null===t||void 0===t?void 0:t.headers])}))}}const sg={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192,"claude-opus-4-1-20250805":8192,"anthropic.claude-opus-4-1-20250805-v1:0":8192,"claude-opus-4-1@20250805":8192};function lg(e,t){var n;return t&&"parse"in(null!==(n=t.output_format)&&void 0!==n?n:{})?cg(e,t):(0,c.A)((0,c.A)({},e),{},{content:e.content.map(e=>"text"===e.type?(0,c.A)((0,c.A)({},e),{},{parsed:null}):e),parsed_output:null})}function cg(e,t){let n=null;const r=e.content.map(e=>{if("text"===e.type){const r=function(e,t){var n;if("json_schema"!==(null===(n=e.output_format)||void 0===n?void 0:n.type))return null;try{return"parse"in e.output_format?e.output_format.parse(t):JSON.parse(t)}catch(r){throw new km("Failed to parse structured output: ".concat(r))}}(t,e.text);return null===n&&(n=r),(0,c.A)((0,c.A)({},e),{},{parsed:r})}return e});return(0,c.A)((0,c.A)({},e),{},{content:r,parsed_output:n})}const ug=e=>{if(0===e.length)return e;let t=e[e.length-1];switch(t.type){case"separator":return e=e.slice(0,e.length-1),ug(e);case"number":let n=t.value[t.value.length-1];if("."===n||"-"===n)return e=e.slice(0,e.length-1),ug(e);case"string":let r=e[e.length-2];if("delimiter"===(null===r||void 0===r?void 0:r.type))return e=e.slice(0,e.length-1),ug(e);if("brace"===(null===r||void 0===r?void 0:r.type)&&"{"===r.value)return e=e.slice(0,e.length-1),ug(e);break;case"delimiter":return e=e.slice(0,e.length-1),ug(e)}return e},dg=e=>JSON.parse((e=>{let t="";return e.map(e=>{"string"===e.type?t+='"'+e.value+'"':t+=e.value}),t})((e=>{let t=[];return e.map(e=>{"brace"===e.type&&("{"===e.value?t.push("}"):t.splice(t.lastIndexOf("}"),1)),"paren"===e.type&&("["===e.value?t.push("]"):t.splice(t.lastIndexOf("]"),1))}),t.length>0&&t.reverse().map(t=>{"}"===t?e.push({type:"brace",value:"}"}):"]"===t&&e.push({type:"paren",value:"]"})}),e})(ug((e=>{let t=0,n=[];for(;t<e.length;){let r=e[t];if("\\"===r){t++;continue}if("{"===r){n.push({type:"brace",value:"{"}),t++;continue}if("}"===r){n.push({type:"brace",value:"}"}),t++;continue}if("["===r){n.push({type:"paren",value:"["}),t++;continue}if("]"===r){n.push({type:"paren",value:"]"}),t++;continue}if(":"===r){n.push({type:"separator",value:":"}),t++;continue}if(","===r){n.push({type:"delimiter",value:","}),t++;continue}if('"'===r){let i="",o=!1;for(r=e[++t];'"'!==r;){if(t===e.length){o=!0;break}if("\\"===r){if(t++,t===e.length){o=!0;break}i+=r+e[t],r=e[++t]}else i+=r,r=e[++t]}r=e[++t],o||n.push({type:"string",value:i});continue}if(r&&/\s/.test(r)){t++;continue}let i=/[0-9]/;if(r&&i.test(r)||"-"===r||"."===r){let o="";for("-"===r&&(o+=r,r=e[++t]);r&&i.test(r)||"."===r;)o+=r,r=e[++t];n.push({type:"number",value:o});continue}let o=/[a-z]/i;if(r&&o.test(r)){let i="";for(;r&&o.test(r)&&t!==e.length;)i+=r,r=e[++t];if("true"!=i&&"false"!=i&&"null"!==i){t++;continue}n.push({type:"name",value:i});continue}t++}return n})(e)))));var hg,pg,mg,fg,gg,yg,vg,wg,bg,kg,Dg,xg,Eg,Sg,Ag,Cg,Tg,Rg,Fg,Ig,Pg,Mg,_g;const Ng="__json_buf";function Og(e){return"tool_use"===e.type||"server_tool_use"===e.type||"mcp_tool_use"===e.type}class jg{constructor(e){hg.add(this),this.messages=[],this.receivedMessages=[],pg.set(this,void 0),mg.set(this,null),this.controller=new AbortController,fg.set(this,void 0),gg.set(this,()=>{}),yg.set(this,()=>{}),vg.set(this,void 0),wg.set(this,()=>{}),bg.set(this,()=>{}),kg.set(this,{}),Dg.set(this,!1),xg.set(this,!1),Eg.set(this,!1),Sg.set(this,!1),Ag.set(this,void 0),Cg.set(this,void 0),Fg.set(this,e=>{if(gm(this,xg,!0,"f"),wm(e)&&(e=new xm),e instanceof xm)return gm(this,Eg,!0,"f"),this._emit("abort",e);if(e instanceof km)return this._emit("error",e);if(e instanceof Error){const t=new km(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new km(String(e)))}),gm(this,fg,new Promise((e,t)=>{gm(this,gg,e,"f"),gm(this,yg,t,"f")}),"f"),gm(this,vg,new Promise((e,t)=>{gm(this,wg,e,"f"),gm(this,bg,t,"f")}),"f"),ym(this,fg,"f").catch(()=>{}),ym(this,vg,"f").catch(()=>{}),gm(this,mg,e,"f")}get response(){return ym(this,Ag,"f")}get request_id(){return ym(this,Cg,"f")}async withResponse(){const e=await ym(this,fg,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const t=new jg(null);return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,n){const r=new jg(t);for(const i of t.messages)r._addMessageParam(i);return gm(r,mg,(0,c.A)((0,c.A)({},t),{},{stream:!0}),"f"),r._run(()=>r._createMessage(e,(0,c.A)((0,c.A)({},t),{},{stream:!0}),(0,c.A)((0,c.A)({},n),{},{headers:(0,c.A)((0,c.A)({},null===n||void 0===n?void 0:n.headers),{},{"X-Stainless-Helper-Method":"stream"})}))),r}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},ym(this,Fg,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,n){const r=null===n||void 0===n?void 0:n.signal;let i;r&&(r.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),r.addEventListener("abort",i));try{var o;ym(this,hg,"m",Ig).call(this);const{response:r,data:i}=await e.create((0,c.A)((0,c.A)({},t),{},{stream:!0}),(0,c.A)((0,c.A)({},n),{},{signal:this.controller.signal})).withResponse();this._connected(r);var a,s=!1,l=!1;try{for(var u,d=Gm(i);s=!(u=await d.next()).done;s=!1){const e=u.value;ym(this,hg,"m",Pg).call(this,e)}}catch(h){l=!0,a=h}finally{try{s&&null!=d.return&&await d.return()}finally{if(l)throw a}}if(null!==(o=i.controller.signal)&&void 0!==o&&o.aborted)throw new xm;ym(this,hg,"m",Mg).call(this)}finally{r&&i&&r.removeEventListener("abort",i)}}_connected(e){this.ended||(gm(this,Ag,e,"f"),gm(this,Cg,null===e||void 0===e?void 0:e.headers.get("request-id"),"f"),ym(this,gg,"f").call(this,e),this._emit("connect"))}get ended(){return ym(this,Dg,"f")}get errored(){return ym(this,xg,"f")}get aborted(){return ym(this,Eg,"f")}abort(){this.controller.abort()}on(e,t){return(ym(this,kg,"f")[e]||(ym(this,kg,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=ym(this,kg,"f")[e];if(!n)return this;const r=n.findIndex(e=>e.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(ym(this,kg,"f")[e]||(ym(this,kg,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{gm(this,Sg,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)})}async done(){gm(this,Sg,!0,"f"),await ym(this,vg,"f")}get currentMessage(){return ym(this,pg,"f")}async finalMessage(){return await this.done(),ym(this,hg,"m",Tg).call(this)}async finalText(){return await this.done(),ym(this,hg,"m",Rg).call(this)}_emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(ym(this,Dg,"f"))return;"end"===e&&(gm(this,Dg,!0,"f"),ym(this,wg,"f").call(this));const i=ym(this,kg,"f")[e];if(i&&(ym(this,kg,"f")[e]=i.filter(e=>!e.once),i.forEach(e=>{let{listener:t}=e;return t(...n)})),"abort"===e){const e=n[0];return ym(this,Sg,"f")||null!==i&&void 0!==i&&i.length||Promise.reject(e),ym(this,yg,"f").call(this,e),ym(this,bg,"f").call(this,e),void this._emit("end")}if("error"===e){const e=n[0];ym(this,Sg,"f")||null!==i&&void 0!==i&&i.length||Promise.reject(e),ym(this,yg,"f").call(this,e),ym(this,bg,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",ym(this,hg,"m",Tg).call(this))}async _fromReadableStream(e,t){const n=null===t||void 0===t?void 0:t.signal;let r;n&&(n.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),n.addEventListener("abort",r));try{var i;ym(this,hg,"m",Ig).call(this),this._connected(null);const t=kf.fromReadableStream(e,this.controller);var o,a=!1,s=!1;try{for(var l,c=Gm(t);a=!(l=await c.next()).done;a=!1){const e=l.value;ym(this,hg,"m",Pg).call(this,e)}}catch(u){s=!0,o=u}finally{try{a&&null!=c.return&&await c.return()}finally{if(s)throw o}}if(null!==(i=t.controller.signal)&&void 0!==i&&i.aborted)throw new xm;ym(this,hg,"m",Mg).call(this)}finally{n&&r&&n.removeEventListener("abort",r)}}[(pg=new WeakMap,mg=new WeakMap,fg=new WeakMap,gg=new WeakMap,yg=new WeakMap,vg=new WeakMap,wg=new WeakMap,bg=new WeakMap,kg=new WeakMap,Dg=new WeakMap,xg=new WeakMap,Eg=new WeakMap,Sg=new WeakMap,Ag=new WeakMap,Cg=new WeakMap,Fg=new WeakMap,hg=new WeakSet,Tg=function(){if(0===this.receivedMessages.length)throw new km("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},Rg=function(){if(0===this.receivedMessages.length)throw new km("stream ended without producing a Message with role=assistant");const e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new km("stream ended without producing a content block with type=text");return e.join(" ")},Ig=function(){this.ended||gm(this,pg,void 0,"f")},Pg=function(e){if(this.ended)return;const t=ym(this,hg,"m",_g).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{const r=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===r.type&&this._emit("text",e.delta.text,r.text||"");break;case"citations_delta":var n;if("text"===r.type)this._emit("citation",e.delta.citation,null!==(n=r.citations)&&void 0!==n?n:[]);break;case"input_json_delta":Og(r)&&r.input&&this._emit("inputJson",e.delta.partial_json,r.input);break;case"thinking_delta":"thinking"===r.type&&this._emit("thinking",e.delta.thinking,r.thinking);break;case"signature_delta":"thinking"===r.type&&this._emit("signature",r.signature);break;default:e.delta}break}case"message_stop":this._addMessageParam(t),this._addMessage(lg(t,ym(this,mg,"f")),!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":gm(this,pg,t,"f")}},Mg=function(){if(this.ended)throw new km("stream has ended, this shouldn't happen");const e=ym(this,pg,"f");if(!e)throw new km("request ended without sending any chunks");return gm(this,pg,void 0,"f"),lg(e,ym(this,mg,"f"))},_g=function(e){let t=ym(this,pg,"f");if("message_start"===e.type){if(t)throw new km("Unexpected event order, got ".concat(e.type,' before receiving "message_stop"'));return e.message}if(!t)throw new km("Unexpected event order, got ".concat(e.type,' before "message_start"'));switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.container=e.delta.container,t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,t.context_management=e.context_management,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push(e.content_block),t;case"content_block_delta":{const i=t.content.at(e.index);switch(e.delta.type){case"text_delta":"text"===(null===i||void 0===i?void 0:i.type)&&(t.content[e.index]=(0,c.A)((0,c.A)({},i),{},{text:(i.text||"")+e.delta.text}));break;case"citations_delta":var n;if("text"===(null===i||void 0===i?void 0:i.type))t.content[e.index]=(0,c.A)((0,c.A)({},i),{},{citations:[...null!==(n=i.citations)&&void 0!==n?n:[],e.delta.citation]});break;case"input_json_delta":if(i&&Og(i)){let n=i[Ng]||"";n+=e.delta.partial_json;const o=(0,c.A)({},i);if(Object.defineProperty(o,Ng,{value:n,enumerable:!1,writable:!0}),n)try{o.input=dg(n)}catch(r){const e=new km("Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ".concat(r,". JSON: ").concat(n));ym(this,Fg,"f").call(this,e)}t.content[e.index]=o}break;case"thinking_delta":"thinking"===(null===i||void 0===i?void 0:i.type)&&(t.content[e.index]=(0,c.A)((0,c.A)({},i),{},{thinking:i.thinking+e.delta.thinking}));break;case"signature_delta":"thinking"===(null===i||void 0===i?void 0:i.type)&&(t.content[e.index]=(0,c.A)((0,c.A)({},i),{},{signature:e.delta.signature}));break;default:e.delta}return t}}},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("streamEvent",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0});return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new kf(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}const Lg=["max_iterations"];var Bg,Wg,Ug,qg,Hg,zg,Vg,Kg,Yg,Gg,Qg,Xg,Zg;function Jg(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}class $g{constructor(e,t,n){Bg.add(this),this.client=e,Wg.set(this,!1),Ug.set(this,!1),qg.set(this,void 0),Hg.set(this,void 0),zg.set(this,void 0),Vg.set(this,void 0),Kg.set(this,void 0),Yg.set(this,0),gm(this,qg,{params:(0,c.A)((0,c.A)({},t),{},{messages:structuredClone(t.messages)})},"f"),gm(this,Hg,(0,c.A)((0,c.A)({},n),{},{headers:Yf([{"x-stainless-helper":"BetaToolRunner"},null===n||void 0===n?void 0:n.headers])}),"f"),gm(this,Kg,Jg(),"f")}[(Wg=new WeakMap,Ug=new WeakMap,qg=new WeakMap,Hg=new WeakMap,zg=new WeakMap,Vg=new WeakMap,Kg=new WeakMap,Yg=new WeakMap,Bg=new WeakSet,Symbol.asyncIterator)](){var e=this;return Jm(function*(){var t;if(ym(e,Wg,"f"))throw new km("Cannot iterate over a consumed stream");gm(e,Wg,!0,"f"),gm(e,Ug,!0,"f"),gm(e,Vg,void 0,"f");try{for(;;){let n;try{if(ym(e,qg,"f").params.max_iterations&&ym(e,Yg,"f")>=ym(e,qg,"f").params.max_iterations)break;gm(e,Ug,!1,"f"),gm(e,zg,void 0,"f"),gm(e,Vg,void 0,"f"),gm(e,Yg,(t=ym(e,Yg,"f"),++t),"f");const r=ym(e,qg,"f").params,{max_iterations:i}=r,o=(0,eo.A)(r,Lg);if(o.stream?(n=e.client.beta.messages.stream((0,c.A)({},o),ym(e,Hg,"f")),gm(e,zg,n.finalMessage(),"f"),ym(e,zg,"f").catch(()=>{}),yield n):(gm(e,zg,e.client.beta.messages.create((0,c.A)((0,c.A)({},o),{},{stream:!1}),ym(e,Hg,"f")),"f"),yield ym(e,zg,"f")),!ym(e,Ug,"f")){const{role:t,content:n}=yield Zm(ym(e,zg,"f"));ym(e,qg,"f").params.messages.push({role:t,content:n})}const a=yield Zm(ym(e,Bg,"m",Gg).call(e,ym(e,qg,"f").params.messages.at(-1)));if(a&&ym(e,qg,"f").params.messages.push(a),!a&&!ym(e,Ug,"f"))break}finally{n&&n.abort()}}if(!ym(e,zg,"f"))throw new km("ToolRunner concluded without a message from the server");ym(e,Kg,"f").resolve(yield Zm(ym(e,zg,"f")))}catch(n){throw gm(e,Wg,!1,"f"),ym(e,Kg,"f").promise.catch(()=>{}),ym(e,Kg,"f").reject(n),gm(e,Kg,Jg(),"f"),n}})()}setMessagesParams(e){ym(this,qg,"f").params="function"===typeof e?e(ym(this,qg,"f").params):e,gm(this,Ug,!0,"f"),gm(this,Vg,void 0,"f")}async generateToolResponse(){var e;const t=null!==(e=await ym(this,zg,"f"))&&void 0!==e?e:this.params.messages.at(-1);return t?ym(this,Bg,"m",Gg).call(this,t):null}done(){return ym(this,Kg,"f").promise}async runUntilDone(){if(!ym(this,Wg,"f")){var e,t=!1,n=!1;try{for(var r,i=Gm(this);t=!(r=await i.next()).done;t=!1){r.value}}catch(o){n=!0,e=o}finally{try{t&&null!=i.return&&await i.return()}finally{if(n)throw e}}}return this.done()}get params(){return ym(this,qg,"f").params}pushMessages(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.setMessagesParams(e=>(0,c.A)((0,c.A)({},e),{},{messages:[...e.messages,...t]}))}then(e,t){return this.runUntilDone().then(e,t)}}Gg=async function(e){return void 0!==ym(this,Vg,"f")||gm(this,Vg,async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.messages.at(-1);if(!t||"assistant"!==t.role||!t.content||"string"===typeof t.content)return null;const n=t.content.filter(e=>"tool_use"===e.type);if(0===n.length)return null;const r=await Promise.all(n.map(async t=>{const n=e.tools.find(e=>e.name===t.name);if(!n||!("run"in n))return{type:"tool_result",tool_use_id:t.id,content:"Error: Tool '".concat(t.name,"' not found"),is_error:!0};try{let e=t.input;"parse"in n&&n.parse&&(e=n.parse(e));const r=await n.run(e);return{type:"tool_result",tool_use_id:t.id,content:r}}catch(r){return{type:"tool_result",tool_use_id:t.id,content:"Error: ".concat(r instanceof Error?r.message:String(r)),is_error:!0}}}));return{role:"user",content:r}}(ym(this,qg,"f").params,e),"f"),ym(this,Vg,"f")};class ey{constructor(e,t){this.iterator=e,this.controller=t}decoder(){var e=this;return Jm(function*(){const t=new sf;var n,r=!1,i=!1;try{for(var o,a=Gm(e.iterator);r=!(o=yield Zm(a.next())).done;r=!1){const e=o.value;for(const n of t.decode(e))yield JSON.parse(n)}}catch(s){i=!0,n=s}finally{try{r&&null!=a.return&&(yield Zm(a.return()))}finally{if(i)throw n}}for(const e of t.flush())yield JSON.parse(e)})()}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,t){if(!e.body){if(t.abort(),"undefined"!==typeof globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new km("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new km("Attempted to iterate over a response with no body")}return new ey(Km(e.body),t)}}const ty=["betas"],ny=["betas"];class ry extends Hf{create(e,t){const{betas:n}=e,r=(0,eo.A)(e,ty);return this._client.post("/v1/messages/batches?beta=true",(0,c.A)((0,c.A)({body:r},t),{},{headers:Yf([{"anthropic-beta":[...null!==n&&void 0!==n?n:[],"message-batches-2024-09-24"].toString()},null===t||void 0===t?void 0:t.headers])}))}retrieve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.get(Zf(Qg||(Qg=zf(["/v1/messages/batches/","?beta=true"])),e),(0,c.A)((0,c.A)({},n),{},{headers:Yf([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"message-batches-2024-09-24"].toString()},null===n||void 0===n?void 0:n.headers])}))}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=null!==e&&void 0!==e?e:{},{betas:r}=n,i=(0,eo.A)(n,ny);return this._client.getAPIList("/v1/messages/batches?beta=true",Ff,(0,c.A)((0,c.A)({query:i},t),{},{headers:Yf([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"message-batches-2024-09-24"].toString()},null===t||void 0===t?void 0:t.headers])}))}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.delete(Zf(Xg||(Xg=zf(["/v1/messages/batches/","?beta=true"])),e),(0,c.A)((0,c.A)({},n),{},{headers:Yf([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"message-batches-2024-09-24"].toString()},null===n||void 0===n?void 0:n.headers])}))}cancel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.post(Zf(Zg||(Zg=zf(["/v1/messages/batches/","/cancel?beta=true"])),e),(0,c.A)((0,c.A)({},n),{},{headers:Yf([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"message-batches-2024-09-24"].toString()},null===n||void 0===n?void 0:n.headers])}))}async results(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=await this.retrieve(e);if(!r.results_url)throw new km("No batch `results_url`; Has it finished processing? ".concat(r.processing_status," - ").concat(r.id));const{betas:i}=null!==t&&void 0!==t?t:{};return this._client.get(r.results_url,(0,c.A)((0,c.A)({},n),{},{headers:Yf([{"anthropic-beta":[...null!==i&&void 0!==i?i:[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},null===n||void 0===n?void 0:n.headers]),stream:!0,__binaryResponse:!0}))._thenUnwrap((e,t)=>ey.fromResponse(t.response,t.controller))}}const iy=["betas"],oy=["betas"],ay={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026"};class sy extends Hf{constructor(){super(...arguments),this.batches=new ry(this._client)}create(e,t){var n;const{betas:r}=e,i=(0,eo.A)(e,iy);i.model in ay&&console.warn("The model '".concat(i.model,"' is deprecated and will reach end-of-life on ").concat(ay[i.model],"\nPlease migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information."));let o=this._client._options.timeout;if(!i.stream&&null==o){var a;const e=null!==(a=sg[i.model])&&void 0!==a?a:void 0;o=this._client.calculateNonstreamingTimeout(i.max_tokens,e)}return this._client.post("/v1/messages?beta=true",(0,c.A)((0,c.A)({body:i,timeout:null!==o&&void 0!==o?o:6e5},t),{},{headers:Yf([(0,c.A)({},null!=(null===r||void 0===r?void 0:r.toString())?{"anthropic-beta":null===r||void 0===r?void 0:r.toString()}:void 0),null===t||void 0===t?void 0:t.headers]),stream:null!==(n=e.stream)&&void 0!==n&&n}))}parse(e,t){var n,r;return t=(0,c.A)((0,c.A)({},t),{},{headers:Yf([{"anthropic-beta":[...null!==(n=e.betas)&&void 0!==n?n:[],"structured-outputs-2025-09-17"].toString()},null===(r=t)||void 0===r?void 0:r.headers])}),this.create(e,t).then(t=>cg(t,e))}stream(e,t){return jg.createMessage(this,e,t)}countTokens(e,t){const{betas:n}=e,r=(0,eo.A)(e,oy);return this._client.post("/v1/messages/count_tokens?beta=true",(0,c.A)((0,c.A)({body:r},t),{},{headers:Yf([{"anthropic-beta":[...null!==n&&void 0!==n?n:[],"token-counting-2024-11-01"].toString()},null===t||void 0===t?void 0:t.headers])}))}toolRunner(e,t){return new $g(this._client,e,t)}}var ly,cy,uy,dy;sy.Batches=ry,sy.BetaToolRunner=$g;const hy=["betas"],py=["betas"];class my extends Hf{create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=null!==t&&void 0!==t?t:{},{betas:i}=r,o=(0,eo.A)(r,hy);return this._client.post(Zf(ly||(ly=zf(["/v1/skills/","/versions?beta=true"])),e),Of((0,c.A)((0,c.A)({body:o},n),{},{headers:Yf([{"anthropic-beta":[...null!==i&&void 0!==i?i:[],"skills-2025-10-02"].toString()},null===n||void 0===n?void 0:n.headers])}),this._client))}retrieve(e,t,n){const{skill_id:r,betas:i}=t;return this._client.get(Zf(cy||(cy=zf(["/v1/skills/","/versions/","?beta=true"])),r,e),(0,c.A)((0,c.A)({},n),{},{headers:Yf([{"anthropic-beta":[...null!==i&&void 0!==i?i:[],"skills-2025-10-02"].toString()},null===n||void 0===n?void 0:n.headers])}))}list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=null!==t&&void 0!==t?t:{},{betas:i}=r,o=(0,eo.A)(r,py);return this._client.getAPIList(Zf(uy||(uy=zf(["/v1/skills/","/versions?beta=true"])),e),If,(0,c.A)((0,c.A)({query:o},n),{},{headers:Yf([{"anthropic-beta":[...null!==i&&void 0!==i?i:[],"skills-2025-10-02"].toString()},null===n||void 0===n?void 0:n.headers])}))}delete(e,t,n){const{skill_id:r,betas:i}=t;return this._client.delete(Zf(dy||(dy=zf(["/v1/skills/","/versions/","?beta=true"])),r,e),(0,c.A)((0,c.A)({},n),{},{headers:Yf([{"anthropic-beta":[...null!==i&&void 0!==i?i:[],"skills-2025-10-02"].toString()},null===n||void 0===n?void 0:n.headers])}))}}var fy,gy;const yy=["betas"],vy=["betas"];class wy extends Hf{constructor(){super(...arguments),this.versions=new my(this._client)}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=null!==e&&void 0!==e?e:{},{betas:r}=n,i=(0,eo.A)(n,yy);return this._client.post("/v1/skills?beta=true",Of((0,c.A)((0,c.A)({body:i},t),{},{headers:Yf([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"skills-2025-10-02"].toString()},null===t||void 0===t?void 0:t.headers])}),this._client))}retrieve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.get(Zf(fy||(fy=zf(["/v1/skills/","?beta=true"])),e),(0,c.A)((0,c.A)({},n),{},{headers:Yf([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"skills-2025-10-02"].toString()},null===n||void 0===n?void 0:n.headers])}))}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=null!==e&&void 0!==e?e:{},{betas:r}=n,i=(0,eo.A)(n,vy);return this._client.getAPIList("/v1/skills?beta=true",If,(0,c.A)((0,c.A)({query:i},t),{},{headers:Yf([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"skills-2025-10-02"].toString()},null===t||void 0===t?void 0:t.headers])}))}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.delete(Zf(gy||(gy=zf(["/v1/skills/","?beta=true"])),e),(0,c.A)((0,c.A)({},n),{},{headers:Yf([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"skills-2025-10-02"].toString()},null===n||void 0===n?void 0:n.headers])}))}}wy.Versions=my;class by extends Hf{constructor(){super(...arguments),this.models=new ag(this._client),this.messages=new sy(this._client),this.files=new rg(this._client),this.skills=new wy(this._client)}}by.Models=ag,by.Messages=sy,by.Files=rg,by.Skills=wy;const ky=["betas"];class Dy extends Hf{create(e,t){var n,r;const{betas:i}=e,o=(0,eo.A)(e,ky);return this._client.post("/v1/complete",(0,c.A)((0,c.A)({body:o,timeout:null!==(n=this._client._options.timeout)&&void 0!==n?n:6e5},t),{},{headers:Yf([(0,c.A)({},null!=(null===i||void 0===i?void 0:i.toString())?{"anthropic-beta":null===i||void 0===i?void 0:i.toString()}:void 0),null===t||void 0===t?void 0:t.headers]),stream:null!==(r=e.stream)&&void 0!==r&&r}))}}var xy,Ey,Sy,Ay,Cy,Ty,Ry,Fy,Iy,Py,My,_y,Ny,Oy,jy,Ly,By,Wy,Uy,qy,Hy,zy;const Vy="__json_buf";function Ky(e){return"tool_use"===e.type||"server_tool_use"===e.type}class Yy{constructor(){xy.add(this),this.messages=[],this.receivedMessages=[],Ey.set(this,void 0),this.controller=new AbortController,Sy.set(this,void 0),Ay.set(this,()=>{}),Cy.set(this,()=>{}),Ty.set(this,void 0),Ry.set(this,()=>{}),Fy.set(this,()=>{}),Iy.set(this,{}),Py.set(this,!1),My.set(this,!1),_y.set(this,!1),Ny.set(this,!1),Oy.set(this,void 0),jy.set(this,void 0),Wy.set(this,e=>{if(gm(this,My,!0,"f"),wm(e)&&(e=new xm),e instanceof xm)return gm(this,_y,!0,"f"),this._emit("abort",e);if(e instanceof km)return this._emit("error",e);if(e instanceof Error){const t=new km(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new km(String(e)))}),gm(this,Sy,new Promise((e,t)=>{gm(this,Ay,e,"f"),gm(this,Cy,t,"f")}),"f"),gm(this,Ty,new Promise((e,t)=>{gm(this,Ry,e,"f"),gm(this,Fy,t,"f")}),"f"),ym(this,Sy,"f").catch(()=>{}),ym(this,Ty,"f").catch(()=>{})}get response(){return ym(this,Oy,"f")}get request_id(){return ym(this,jy,"f")}async withResponse(){const e=await ym(this,Sy,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const t=new Yy;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,n){const r=new Yy;for(const i of t.messages)r._addMessageParam(i);return r._run(()=>r._createMessage(e,(0,c.A)((0,c.A)({},t),{},{stream:!0}),(0,c.A)((0,c.A)({},n),{},{headers:(0,c.A)((0,c.A)({},null===n||void 0===n?void 0:n.headers),{},{"X-Stainless-Helper-Method":"stream"})}))),r}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},ym(this,Wy,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,n){const r=null===n||void 0===n?void 0:n.signal;let i;r&&(r.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),r.addEventListener("abort",i));try{var o;ym(this,xy,"m",Uy).call(this);const{response:r,data:i}=await e.create((0,c.A)((0,c.A)({},t),{},{stream:!0}),(0,c.A)((0,c.A)({},n),{},{signal:this.controller.signal})).withResponse();this._connected(r);var a,s=!1,l=!1;try{for(var u,d=Gm(i);s=!(u=await d.next()).done;s=!1){const e=u.value;ym(this,xy,"m",qy).call(this,e)}}catch(h){l=!0,a=h}finally{try{s&&null!=d.return&&await d.return()}finally{if(l)throw a}}if(null!==(o=i.controller.signal)&&void 0!==o&&o.aborted)throw new xm;ym(this,xy,"m",Hy).call(this)}finally{r&&i&&r.removeEventListener("abort",i)}}_connected(e){this.ended||(gm(this,Oy,e,"f"),gm(this,jy,null===e||void 0===e?void 0:e.headers.get("request-id"),"f"),ym(this,Ay,"f").call(this,e),this._emit("connect"))}get ended(){return ym(this,Py,"f")}get errored(){return ym(this,My,"f")}get aborted(){return ym(this,_y,"f")}abort(){this.controller.abort()}on(e,t){return(ym(this,Iy,"f")[e]||(ym(this,Iy,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=ym(this,Iy,"f")[e];if(!n)return this;const r=n.findIndex(e=>e.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(ym(this,Iy,"f")[e]||(ym(this,Iy,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{gm(this,Ny,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)})}async done(){gm(this,Ny,!0,"f"),await ym(this,Ty,"f")}get currentMessage(){return ym(this,Ey,"f")}async finalMessage(){return await this.done(),ym(this,xy,"m",Ly).call(this)}async finalText(){return await this.done(),ym(this,xy,"m",By).call(this)}_emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(ym(this,Py,"f"))return;"end"===e&&(gm(this,Py,!0,"f"),ym(this,Ry,"f").call(this));const i=ym(this,Iy,"f")[e];if(i&&(ym(this,Iy,"f")[e]=i.filter(e=>!e.once),i.forEach(e=>{let{listener:t}=e;return t(...n)})),"abort"===e){const e=n[0];return ym(this,Ny,"f")||null!==i&&void 0!==i&&i.length||Promise.reject(e),ym(this,Cy,"f").call(this,e),ym(this,Fy,"f").call(this,e),void this._emit("end")}if("error"===e){const e=n[0];ym(this,Ny,"f")||null!==i&&void 0!==i&&i.length||Promise.reject(e),ym(this,Cy,"f").call(this,e),ym(this,Fy,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",ym(this,xy,"m",Ly).call(this))}async _fromReadableStream(e,t){const n=null===t||void 0===t?void 0:t.signal;let r;n&&(n.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),n.addEventListener("abort",r));try{var i;ym(this,xy,"m",Uy).call(this),this._connected(null);const t=kf.fromReadableStream(e,this.controller);var o,a=!1,s=!1;try{for(var l,c=Gm(t);a=!(l=await c.next()).done;a=!1){const e=l.value;ym(this,xy,"m",qy).call(this,e)}}catch(u){s=!0,o=u}finally{try{a&&null!=c.return&&await c.return()}finally{if(s)throw o}}if(null!==(i=t.controller.signal)&&void 0!==i&&i.aborted)throw new xm;ym(this,xy,"m",Hy).call(this)}finally{n&&r&&n.removeEventListener("abort",r)}}[(Ey=new WeakMap,Sy=new WeakMap,Ay=new WeakMap,Cy=new WeakMap,Ty=new WeakMap,Ry=new WeakMap,Fy=new WeakMap,Iy=new WeakMap,Py=new WeakMap,My=new WeakMap,_y=new WeakMap,Ny=new WeakMap,Oy=new WeakMap,jy=new WeakMap,Wy=new WeakMap,xy=new WeakSet,Ly=function(){if(0===this.receivedMessages.length)throw new km("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},By=function(){if(0===this.receivedMessages.length)throw new km("stream ended without producing a Message with role=assistant");const e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new km("stream ended without producing a content block with type=text");return e.join(" ")},Uy=function(){this.ended||gm(this,Ey,void 0,"f")},qy=function(e){if(this.ended)return;const t=ym(this,xy,"m",zy).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{const r=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===r.type&&this._emit("text",e.delta.text,r.text||"");break;case"citations_delta":var n;if("text"===r.type)this._emit("citation",e.delta.citation,null!==(n=r.citations)&&void 0!==n?n:[]);break;case"input_json_delta":Ky(r)&&r.input&&this._emit("inputJson",e.delta.partial_json,r.input);break;case"thinking_delta":"thinking"===r.type&&this._emit("thinking",e.delta.thinking,r.thinking);break;case"signature_delta":"thinking"===r.type&&this._emit("signature",r.signature);break;default:e.delta}break}case"message_stop":this._addMessageParam(t),this._addMessage(t,!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":gm(this,Ey,t,"f")}},Hy=function(){if(this.ended)throw new km("stream has ended, this shouldn't happen");const e=ym(this,Ey,"f");if(!e)throw new km("request ended without sending any chunks");return gm(this,Ey,void 0,"f"),e},zy=function(e){let t=ym(this,Ey,"f");if("message_start"===e.type){if(t)throw new km("Unexpected event order, got ".concat(e.type,' before receiving "message_stop"'));return e.message}if(!t)throw new km("Unexpected event order, got ".concat(e.type,' before "message_start"'));switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push((0,c.A)({},e.content_block)),t;case"content_block_delta":{const r=t.content.at(e.index);switch(e.delta.type){case"text_delta":"text"===(null===r||void 0===r?void 0:r.type)&&(t.content[e.index]=(0,c.A)((0,c.A)({},r),{},{text:(r.text||"")+e.delta.text}));break;case"citations_delta":var n;if("text"===(null===r||void 0===r?void 0:r.type))t.content[e.index]=(0,c.A)((0,c.A)({},r),{},{citations:[...null!==(n=r.citations)&&void 0!==n?n:[],e.delta.citation]});break;case"input_json_delta":if(r&&Ky(r)){let n=r[Vy]||"";n+=e.delta.partial_json;const i=(0,c.A)({},r);Object.defineProperty(i,Vy,{value:n,enumerable:!1,writable:!0}),n&&(i.input=dg(n)),t.content[e.index]=i}break;case"thinking_delta":"thinking"===(null===r||void 0===r?void 0:r.type)&&(t.content[e.index]=(0,c.A)((0,c.A)({},r),{},{thinking:r.thinking+e.delta.thinking}));break;case"signature_delta":"thinking"===(null===r||void 0===r?void 0:r.type)&&(t.content[e.index]=(0,c.A)((0,c.A)({},r),{},{signature:e.delta.signature}));break;default:e.delta}return t}}},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("streamEvent",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0});return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new kf(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}var Gy,Qy,Xy;class Zy extends Hf{create(e,t){return this._client.post("/v1/messages/batches",(0,c.A)({body:e},t))}retrieve(e,t){return this._client.get(Zf(Gy||(Gy=zf(["/v1/messages/batches/",""])),e),t)}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return this._client.getAPIList("/v1/messages/batches",Ff,(0,c.A)({query:e},t))}delete(e,t){return this._client.delete(Zf(Qy||(Qy=zf(["/v1/messages/batches/",""])),e),t)}cancel(e,t){return this._client.post(Zf(Xy||(Xy=zf(["/v1/messages/batches/","/cancel"])),e),t)}async results(e,t){const n=await this.retrieve(e);if(!n.results_url)throw new km("No batch `results_url`; Has it finished processing? ".concat(n.processing_status," - ").concat(n.id));return this._client.get(n.results_url,(0,c.A)((0,c.A)({},t),{},{headers:Yf([{Accept:"application/binary"},null===t||void 0===t?void 0:t.headers]),stream:!0,__binaryResponse:!0}))._thenUnwrap((e,t)=>ey.fromResponse(t.response,t.controller))}}class Jy extends Hf{constructor(){super(...arguments),this.batches=new Zy(this._client)}create(e,t){var n;e.model in $y&&console.warn("The model '".concat(e.model,"' is deprecated and will reach end-of-life on ").concat($y[e.model],"\nPlease migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information."));let r=this._client._options.timeout;if(!e.stream&&null==r){var i;const t=null!==(i=sg[e.model])&&void 0!==i?i:void 0;r=this._client.calculateNonstreamingTimeout(e.max_tokens,t)}return this._client.post("/v1/messages",(0,c.A)((0,c.A)({body:e,timeout:null!==r&&void 0!==r?r:6e5},t),{},{stream:null!==(n=e.stream)&&void 0!==n&&n}))}stream(e,t){return Yy.createMessage(this,e,t)}countTokens(e,t){return this._client.post("/v1/messages/count_tokens",(0,c.A)({body:e},t))}}const $y={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026"};Jy.Batches=Zy;const ev=["betas"];var tv;class nv extends Hf{retrieve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.get(Zf(tv||(tv=zf(["/v1/models/",""])),e),(0,c.A)((0,c.A)({},n),{},{headers:Yf([(0,c.A)({},null!=(null===r||void 0===r?void 0:r.toString())?{"anthropic-beta":null===r||void 0===r?void 0:r.toString()}:void 0),null===n||void 0===n?void 0:n.headers])}))}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=null!==e&&void 0!==e?e:{},{betas:r}=n,i=(0,eo.A)(n,ev);return this._client.getAPIList("/v1/models",Ff,(0,c.A)((0,c.A)({query:i},t),{},{headers:Yf([(0,c.A)({},null!=(null===r||void 0===r?void 0:r.toString())?{"anthropic-beta":null===r||void 0===r?void 0:r.toString()}:void 0),null===t||void 0===t?void 0:t.headers])}))}}const rv=e=>{var t,n,r,i;return"undefined"!==typeof globalThis.process?null!==(t=null===(n=globalThis.process.env)||void 0===n||null===(n=n[e])||void 0===n?void 0:n.trim())&&void 0!==t?t:void 0:"undefined"!==typeof globalThis.Deno?null===(r=globalThis.Deno.env)||void 0===r||null===(i=r.get)||void 0===i||null===(i=i.call(r,e))||void 0===i?void 0:i.trim():void 0},iv=["baseURL","apiKey","authToken"],ov=["signal","method"];var av,sv,lv,cv;class uv{constructor(){var e,t,n,r,i,o,a,s;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{baseURL:u=rv("ANTHROPIC_BASE_URL"),apiKey:d=(null!==(e=rv("ANTHROPIC_API_KEY"))&&void 0!==e?e:null),authToken:h=(null!==(t=rv("ANTHROPIC_AUTH_TOKEN"))&&void 0!==t?t:null)}=l,p=(0,eo.A)(l,iv);av.add(this),lv.set(this,void 0);const m=(0,c.A)((0,c.A)({apiKey:d,authToken:h},p),{},{baseURL:u||"https://api.anthropic.com"});if(!m.dangerouslyAllowBrowser&&"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof navigator)throw new km("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew Anthropic({ apiKey, dangerouslyAllowBrowser: true });\n");this.baseURL=m.baseURL,this.timeout=null!==(n=m.timeout)&&void 0!==n?n:sv.DEFAULT_TIMEOUT,this.logger=null!==(r=m.logger)&&void 0!==r?r:console;const f="warn";this.logLevel=f,this.logLevel=null!==(i=null!==(o=df(m.logLevel,"ClientOptions.logLevel",this))&&void 0!==o?o:df(rv("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this))&&void 0!==i?i:f,this.fetchOptions=m.fetchOptions,this.maxRetries=null!==(a=m.maxRetries)&&void 0!==a?a:2,this.fetch=null!==(s=m.fetch)&&void 0!==s?s:function(){if("undefined"!==typeof fetch)return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),gm(this,lv,Ym,"f"),this._options=m,this.apiKey=d,this.authToken=h}withOptions(e){return new this.constructor((0,c.A)((0,c.A)({},this._options),{},{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken},e))}defaultQuery(){return this._options.defaultQuery}validateHeaders(e){let{values:t,nulls:n}=e;if((!this.apiKey||!t.get("x-api-key"))&&!n.has("x-api-key")&&(!this.authToken||!t.get("authorization"))&&!n.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}async authHeaders(e){return Yf([await this.apiKeyAuth(e),await this.bearerAuth(e)])}async apiKeyAuth(e){if(null!=this.apiKey)return Yf([{"X-Api-Key":this.apiKey}])}async bearerAuth(e){if(null!=this.authToken)return Yf([{Authorization:"Bearer ".concat(this.authToken)}])}stringifyQuery(e){return Object.entries(e).filter(e=>{let[t,n]=e;return"undefined"!==typeof n}).map(e=>{let[t,n]=e;if("string"===typeof n||"number"===typeof n||"boolean"===typeof n)return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n));if(null===n)return"".concat(encodeURIComponent(t),"=");throw new km("Cannot stringify type ".concat(typeof n,"; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case."))}).join("&")}getUserAgent(){return"".concat(this.constructor.name,"/JS ").concat(Bm)}defaultIdempotencyKey(){return"stainless-node-retry-".concat(vm())}makeStatusError(e,t,n,r){return Dm.generate(e,t,n,r)}buildURL(e,t,n){const r=!ym(this,av,"m",cv).call(this)&&n||this.baseURL,i=(e=>_m.test(e))(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return function(e){if(!e)return!0;for(const t in e)return!1;return!0}(o)||(t=(0,c.A)((0,c.A)({},o),t)),"object"===typeof t&&t&&!Array.isArray(t)&&(i.search=this.stringifyQuery(t)),i.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new km("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 6e5}async prepareOptions(e){}async prepareRequest(e,t){let{url:n,options:r}=t}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(n=>(0,c.A)({method:e,path:t},n)))}request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Cf(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,n){var r,i;const o=await e,a=null!==(r=o.maxRetries)&&void 0!==r?r:this.maxRetries;null==t&&(t=a),await this.prepareOptions(o);const{req:s,url:l,timeout:c}=await this.buildRequest(o,{retryCount:a-t});await this.prepareRequest(s,{url:l,options:o});const u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),d=void 0===n?"":", retryOf: ".concat(n),h=Date.now();if(gf(this).debug("[".concat(u,"] sending request"),yf({retryOfRequestLogID:n,method:o.method,url:l,options:o,headers:s.headers})),null!==(i=o.signal)&&void 0!==i&&i.aborted)throw new xm;const p=new AbortController,m=await this.fetchWithTimeout(l,s,c,p).catch(bm),f=Date.now();if(m instanceof globalThis.Error){var g;const e="retrying, ".concat(t," attempts remaining");if(null!==(g=o.signal)&&void 0!==g&&g.aborted)throw new xm;const r=wm(m)||/timed? ?out/i.test(String(m)+("cause"in m?String(m.cause):""));if(t)return gf(this).info("[".concat(u,"] connection ").concat(r?"timed out":"failed"," - ").concat(e)),gf(this).debug("[".concat(u,"] connection ").concat(r?"timed out":"failed"," (").concat(e,")"),yf({retryOfRequestLogID:n,url:l,durationMs:f-h,message:m.message})),this.retryRequest(o,t,null!==n&&void 0!==n?n:u);if(gf(this).info("[".concat(u,"] connection ").concat(r?"timed out":"failed"," - error; no more retries left")),gf(this).debug("[".concat(u,"] connection ").concat(r?"timed out":"failed"," (error; no more retries left)"),yf({retryOfRequestLogID:n,url:l,durationMs:f-h,message:m.message})),r)throw new Sm;throw new Em({cause:m})}const y=[...m.headers.entries()].filter(e=>{let[t]=e;return"request-id"===t}).map(e=>{let[t,n]=e;return", "+t+": "+JSON.stringify(n)}).join(""),v="[".concat(u).concat(d).concat(y,"] ").concat(s.method," ").concat(l," ").concat(m.ok?"succeeded":"failed"," with status ").concat(m.status," in ").concat(f-h,"ms");if(!m.ok){const e=await this.shouldRetry(m);if(t&&e){const e="retrying, ".concat(t," attempts remaining");return await async function(e){if(null===e||"object"!==typeof e)return;var t,n;if(e[Symbol.asyncIterator])return void await(null===(t=(n=e[Symbol.asyncIterator]()).return)||void 0===t?void 0:t.call(n));const r=e.getReader(),i=r.cancel();r.releaseLock(),await i}(m.body),gf(this).info("".concat(v," - ").concat(e)),gf(this).debug("[".concat(u,"] response error (").concat(e,")"),yf({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,durationMs:f-h})),this.retryRequest(o,t,null!==n&&void 0!==n?n:u,m.headers)}const r=e?"error; no more retries left":"error; not retryable";gf(this).info("".concat(v," - ").concat(r));const i=await m.text().catch(e=>bm(e).message),a=Lm(i),s=a?void 0:i;gf(this).debug("[".concat(u,"] response error (").concat(r,")"),yf({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,message:s,durationMs:Date.now()-h}));throw this.makeStatusError(m.status,a,s,m.headers)}return gf(this).info(v),gf(this).debug("[".concat(u,"] response start"),yf({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,durationMs:f-h})),{response:m,options:o,controller:p,requestLogID:u,retryOfRequestLogID:n,startTime:h}}getAPIList(e,t,n){return this.requestAPIList(t,(0,c.A)({method:"get",path:e},n))}requestAPIList(e,t){const n=this.makeRequest(t,null,void 0);return new Rf(this,n,e)}async fetchWithTimeout(e,t,n,r){const i=t||{},{signal:o,method:a}=i,s=(0,eo.A)(i,ov);o&&o.addEventListener("abort",()=>r.abort());const l=setTimeout(()=>r.abort(),n),u=globalThis.ReadableStream&&s.body instanceof globalThis.ReadableStream||"object"===typeof s.body&&null!==s.body&&Symbol.asyncIterator in s.body,d=(0,c.A)((0,c.A)({signal:r.signal},u?{duplex:"half"}:{}),{},{method:"GET"},s);a&&(d.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(l)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||(409===e.status||(429===e.status||e.status>=500)))}async retryRequest(e,t,n,r){let i;const o=null===r||void 0===r?void 0:r.get("retry-after-ms");if(o){const e=parseFloat(o);Number.isNaN(e)||(i=e)}const a=null===r||void 0===r?void 0:r.get("retry-after");if(a&&!i){const e=parseFloat(a);i=Number.isNaN(e)?Date.parse(a)-Date.now():1e3*e}if(!(i&&0<=i&&i<6e4)){var s;const n=null!==(s=e.maxRetries)&&void 0!==s?s:this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(t,n)}var l;return await(l=i,new Promise(e=>setTimeout(e,l))),this.makeRequest(e,t-1,n)}calculateDefaultRetryTimeoutMillis(e,t){const n=t-e;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}calculateNonstreamingTimeout(e,t){const n=6e5;if(36e5*e/128e3>n||null!=t&&e>t)throw new km("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return n}async buildRequest(e){var t,n,r;let{retryCount:i=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=(0,c.A)({},e),{method:a,path:s,query:l,defaultBaseURL:u}=o,d=this.buildURL(s,l,u);"timeout"in o&&((e,t)=>{if("number"!==typeof t||!Number.isInteger(t))throw new km("".concat(e," must be an integer"));if(t<0)throw new km("".concat(e," must be a positive integer"))})("timeout",o.timeout),o.timeout=null!==(t=o.timeout)&&void 0!==t?t:this.timeout;const{bodyHeaders:h,body:p}=this.buildBody({options:o}),m=await this.buildHeaders({options:e,method:a,bodyHeaders:h,retryCount:i});return{req:(0,c.A)((0,c.A)((0,c.A)((0,c.A)((0,c.A)({method:a,headers:m},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&p instanceof globalThis.ReadableStream&&{duplex:"half"}),p&&{body:p}),null!==(n=this.fetchOptions)&&void 0!==n?n:{}),null!==(r=o.fetchOptions)&&void 0!==r?r:{}),url:d,timeout:o.timeout}}async buildHeaders(e){let{options:t,method:n,bodyHeaders:r,retryCount:i}=e,o={};this.idempotencyHeader&&"get"!==n&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=t.idempotencyKey);const a=Yf([o,(0,c.A)((0,c.A)((0,c.A)((0,c.A)({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),null!==Hm&&void 0!==Hm?Hm:Hm=Wm()),this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0),{},{"anthropic-version":"2023-06-01"}),await this.authHeaders(t),this._options.defaultHeaders,r,t.headers]);return this.validateHeaders(a),a.values}buildBody(e){let{options:{body:t,headers:n}}=e;if(!t)return{bodyHeaders:void 0,body:void 0};const r=Yf([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||"string"===typeof t&&r.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:"object"===typeof t&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&"function"===typeof t.next)?{bodyHeaders:void 0,body:Vm(t)}:ym(this,lv,"f").call(this,{body:t,headers:r})}}sv=uv,lv=new WeakMap,av=new WeakSet,cv=function(){return"https://api.anthropic.com"!==this.baseURL},uv.Anthropic=sv,uv.HUMAN_PROMPT="\\n\\nHuman:",uv.AI_PROMPT="\\n\\nAssistant:",uv.DEFAULT_TIMEOUT=6e5,uv.AnthropicError=km,uv.APIError=Dm,uv.APIConnectionError=Em,uv.APIConnectionTimeoutError=Sm,uv.APIUserAbortError=xm,uv.NotFoundError=Rm,uv.ConflictError=Fm,uv.RateLimitError=Pm,uv.BadRequestError=Am,uv.AuthenticationError=Cm,uv.InternalServerError=Mm,uv.PermissionDeniedError=Tm,uv.UnprocessableEntityError=Im,uv.toFile=async function(e,t,n){var r;if(Pf(),e=await e,t||(t=_f(e)),(e=>null!=e&&"object"===typeof e&&"string"===typeof e.name&&"number"===typeof e.lastModified&&Uf(e))(e))return e instanceof File&&null==t&&null==n?e:Mf([await e.arrayBuffer()],null!==t&&void 0!==t?t:e.name,(0,c.A)({type:e.type,lastModified:e.lastModified},n));if((e=>null!=e&&"object"===typeof e&&"string"===typeof e.url&&"function"===typeof e.blob)(e)){const r=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),Mf(await qf(r),t,n)}const i=await qf(e);if(null===(r=n)||void 0===r||!r.type){const e=i.find(e=>"object"===typeof e&&"type"in e&&e.type);"string"===typeof e&&(n=(0,c.A)((0,c.A)({},n),{},{type:e}))}return Mf(i,t,n)};class dv extends uv{constructor(){super(...arguments),this.completions=new Dy(this),this.messages=new Jy(this),this.models=new nv(this),this.beta=new by(this)}}dv.Completions=Dy,dv.Messages=Jy,dv.Models=nv,dv.Beta=by;const hv=new class{constructor(){this.apiKey=null,this.client=null}initialize(e){this.apiKey=e,this.client=new dv({apiKey:this.apiKey,dangerouslyAllowBrowser:!0})}async analyzeWorkout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.client)throw new Error("AICoachService not initialized. Call initialize(apiKey) first.");const n=this.buildCoachingPrompt(e,t);try{return(await this.client.messages.create({model:"claude-sonnet-4-20250514",max_tokens:500,temperature:.7,messages:[{role:"user",content:n}]})).content[0].text}catch(r){throw console.error("\u274c Error calling Claude API:",r),r}}buildCoachingPrompt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{trainingContext:n,injuryContext:r,prescribedWorkout:i,upcomingWorkouts:o}=t,a=("Ride"===e.type||"VirtualRide"===e.type)&&e.standUpBikeType,s="Run"===e.type||"VirtualRun"===e.type;let l="";if(e.laps&&e.laps.length>0){e.laps[0].distance&&e.laps[0].distance.includes("km")?(l="\n\nLap-by-Lap Breakdown (kilometer splits):\n",e.laps.forEach(e=>{const t=null!==e.elevationGain?"".concat(e.elevationGain>0?"+":"").concat(e.elevationGain,"ft"):"flat";l+="Kilometer ".concat(e.lap," (~").concat(e.distanceMiles," mi cumulative): ").concat(e.pace||"N/A"," pace, ").concat(t," elevation, ").concat(e.avgHeartRate||"N/A"," bpm\n")})):(l="\n\nLap-by-Lap Breakdown (mile splits):\n",e.laps.forEach(e=>{const t=null!==e.elevationGain?"".concat(e.elevationGain>0?"+":"").concat(e.elevationGain,"ft"):"flat";l+="Mile ".concat(e.lap,": ").concat(e.pace||"N/A"," pace, ").concat(t," elevation, ").concat(e.avgHeartRate||"N/A"," bpm\n")}))}let c="",u="";const d=e.isLifeAdaptation||!1;if(a){const t="cyclete"===e.standUpBikeType?"Cyclete":"elliptigo"===e.standUpBikeType?"ElliptiGO":"stand-up bike";d?(c="".concat(t," workout (life adaptation - user did a run instead of scheduled bike) - Weight-bearing, NO-IMPACT outdoor cardio"),u="This was scheduled as a ".concat(t," workout, but the user completed a run instead (life adaptation). For coaching purposes, treat this as the scheduled ").concat(t," workout. Stand-up bikes are weight-bearing but have ZERO impact forces on joints. Since the user did a run, they got impact stress that wouldn't have occurred on the bike. Recovery needs: manage both the muscular fatigue from the run AND the impact-related stress on joints/bones/tendons that wouldn't have happened on the bike.")):(c="".concat(t," (stand-up bike) - Weight-bearing, NO-IMPACT outdoor cardio"),u='This was completed on a stand-up bike (comes into Strava as "Ride"). Stand-up bikes are weight-bearing but have ZERO impact forces on joints. Quads still work eccentrically controlling descents but without the pounding. Recovery needs: less joint/bone stress than running, but similar muscular fatigue. Can often handle higher volume than running due to no impact.')}else s?d?(c="Running workout (life adaptation - user did a run instead of scheduled bike) - Weight-bearing, HIGH-IMPACT activity",u="This was scheduled as a bike workout, but the user completed a run instead (life adaptation). For coaching purposes, treat this as the scheduled bike workout. However, since the user did a run, they got impact stress that wouldn't have occurred on the bike. Recovery needs: manage both the muscular fatigue AND the impact-related stress on joints/bones/tendons that wouldn't have happened on the bike."):(c="Running - Weight-bearing, HIGH-IMPACT activity",u="This was a running workout with full ground impact forces. Every foot strike creates 2-3x bodyweight forces absorbed by joints, bones, and connective tissue. Descents create even higher eccentric loading on quads AND impact stress. Recovery needs: manage both muscular fatigue AND impact-related stress on joints/bones/tendons."):(c="Cycling or other cardio activity",u="This appears to be a traditional cycling workout. Lower body muscular work but minimal impact forces.");return"You are a USATF-certified running coach analyzing a completed workout. Your coaching style is conversational, data-driven, and actionable - like you're coaching someone you know personally.\n\nIMPORTANT GUIDELINES:\n- Keep response to 150-175 words MAXIMUM\n- Use conversational tone (not robotic or generic)\n- Focus on terrain's impact on performance (especially descents and eccentric loading)\n- Provide specific lap-by-lap storytelling when relevant\n- Give actionable next-step advice\n- DO NOT use any real coach names in your response\n- Be concise and insightful, not flowery or generic\n\nWORKOUT TYPE: ".concat(c,"\n\nCRITICAL CONTEXT - RECOVERY IMPLICATIONS:\n").concat(u,"\n\nCOMPLETED WORKOUT:\n- Distance: ").concat(e.distance," miles\n- Duration: ").concat(e.duration," minutes\n").concat(e.pace?"- Pace: ".concat(e.pace):"","\n").concat(null!==e.elevationGain&&void 0!==e.elevationGain?"- Total Elevation Gain: ".concat(e.elevationGain," feet"):"","\n").concat(e.avgHeartRate?"- Avg Heart Rate: ".concat(e.avgHeartRate," bpm"):"","\n").concat(e.maxHeartRate?"- Max Heart Rate: ".concat(e.maxHeartRate," bpm"):"","\n").concat(l,"\n\n").concat(i?"PRESCRIBED WORKOUT:\n".concat(i,"\n"):"","\n\n").concat(n?"TRAINING CONTEXT:\n".concat(n,"\n"):"","\n\n").concat(o?"UPCOMING WORKOUTS THIS WEEK:\n".concat(o,'\n\nCRITICAL: You HAVE access to the upcoming schedule above. You MUST reference these specific upcoming workouts in your advice. DO NOT say "without seeing your upcoming schedule" or "I don\'t have access to your schedule" - you DO have it listed above. Use specific day names and workout names from the list above (e.g., "Friday\'s tempo run", "Sunday\'s long run").'):"","\n\n").concat(r?"INJURY/FATIGUE NOTES:\n".concat(r,"\n"):"","\n\nAnalyze this workout and provide coaching feedback. Focus on how terrain affected performance, whether pacing was appropriate given elevation changes, and what recovery/preparation is needed for the upcoming scheduled workouts. ").concat(o?"You MUST reference the specific upcoming workouts listed above using their exact day names and workout names.":"If upcoming workouts are not listed above, you can provide general recovery advice.")}},pv=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];const mv=function(e){let{userProfile:t,trainingPlan:n}=e;const r=re(),{day:i}=function(){let{matches:e}=a.useContext(J),t=e[e.length-1];return t?t.params:{}}(),o=te(),{userProfileForDisplay:s,currentWeekNumber:l,weekDataFromState:c,workoutData:u,completionData:d,currentWorkout:h,somethingElseModal:p,openSomethingElseModal:m,closeSomethingElseModal:f,handleWorkoutReplacement:g}=fm({day:i,userProfile:t,trainingPlan:n,locationState:o.state}),{coachingAnalysis:y,loadingCoaching:v,coachingError:w,getCoaching:b}=function(e){let{completionData:t,currentWorkout:n,currentWeekNumber:r,weekDataFromState:i,trainingPlan:o,day:s,userProfile:l}=e;const[c,u]=(0,a.useState)(null),[d,h]=(0,a.useState)(!1),[p,m]=(0,a.useState)(null),f=(0,a.useCallback)(()=>{if(!t||!n)return"Run";const e=t.isLifeAdaptation||!1;let r="Run";if(e){const e=n.type;r="bike"===e||n.equipmentSpecific?"Ride":"Run",Oe.A.log("\ud83d\udd04 Life adaptation detected: Using scheduled workout type for coaching",{scheduledType:e,actualWorkoutType:r})}else{var i,o,a;(null===(i=t.laps)||void 0===i?void 0:i.length)>0&&t.laps[0].pace||null!==(o=t.pace)&&void 0!==o&&o.includes("/mi")?r="Run":(null===(a=t.laps)||void 0===a?void 0:a.length)>0&&!t.laps[0].pace&&(r="Ride")}return{actualWorkoutType:r,isLifeAdaptation:e}},[t,n]),g=(0,a.useCallback)(()=>{if(!o||null===i||void 0===i||!i.workouts)return null;const e=i.workouts,t=Array.isArray(e),n=null===s||void 0===s?void 0:s.toLowerCase(),r=pv.indexOf(n),a=[];for(let i=r+1;i<Math.min(r+4,pv.length);i++){var l;const n=pv[i];let r=null;if(r=t?e.find(e=>e.day&&e.day.toLowerCase()===n):null===e||void 0===e?void 0:e[n],r&&(r.name||null!==(l=r.workout)&&void 0!==l&&l.name)){var c;const e=n.charAt(0).toUpperCase()+n.slice(1),t=r.name||(null===(c=r.workout)||void 0===c?void 0:c.name)||"Workout";a.push("".concat(e,": ").concat(t))}}return a.length>0?a.join(", "):null},[o,i,s]),y=(0,a.useCallback)(async()=>{if(!t)return void console.warn("No workout data available for analysis");const e=prompt("Enter your Anthropic API key (local dev only):");if(e){h(!0),m(null);try{var i;hv.initialize(e);const{actualWorkoutType:a,isLifeAdaptation:s}=f(),c={type:a,distance:t.distance,duration:t.duration,pace:t.pace,elevationGain:t.elevationGain,avgHeartRate:t.avgHeartRate,maxHeartRate:t.maxHeartRate,laps:t.laps,standUpBikeType:"Ride"===a?null===l||void 0===l?void 0:l.standUpBikeType:null,isLifeAdaptation:s},d=g(),h={prescribedWorkout:null!==n&&void 0!==n&&n.name?"".concat(n.name,": ").concat(n.description):null,trainingContext:o?"Week ".concat(r," of ").concat((null===(i=o.weeks)||void 0===i?void 0:i.length)||"N/A"," week training plan for ").concat(o.goalRace||"race"):null,upcomingWorkouts:d},p=await hv.analyzeWorkout(c,h);u(p)}catch(a){console.error("Error getting coaching analysis:",a),m(a.message||"Failed to get coaching analysis")}finally{h(!1)}}},[t,n,r,o,l,f,g]);return{coachingAnalysis:c,loadingCoaching:d,coachingError:p,getCoaching:y}}({completionData:d,currentWorkout:h,currentWeekNumber:l,weekDataFromState:c,trainingPlan:n,day:i,userProfile:s}),k=e=>({tempo:"#4299e1",intervals:"#e53e3e",hills:"#38a169",longRun:"#805ad5",easy:"#718096"}[e]||"#718096");return(0,je.jsxs)("div",{className:"workout-detail",style:{minHeight:"100vh",background:"#0a0a0a"},children:[(0,je.jsx)("div",{className:"workout-detail-header",style:{background:"linear-gradient(135deg, ".concat(k(h.type),"15 0%, #1a1a1a 50%, #0a0a0a 100%)"),borderBottom:"2px solid ".concat(k(h.type),"30"),padding:"32px 0 48px 0",position:"relative",overflow:"hidden",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4), inset 0 -1px 0 ".concat(k(h.type),"20")},children:(0,je.jsxs)("div",{className:"container",style:{position:"relative",zIndex:1},children:[(0,je.jsxs)("div",{style:{display:"flex",gap:"12px",marginBottom:"24px"},children:[(0,je.jsx)("button",{onClick:()=>r(-1),style:{background:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"8px 16px",borderRadius:"12px",display:"flex",alignItems:"center",fontWeight:"bold"},children:"\u2190 Back"}),(0,je.jsx)("button",{onClick:()=>window.location.reload(),style:{background:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.1)",color:"#999",fontSize:"0.9rem",cursor:"pointer",padding:"8px 16px",borderRadius:"12px",display:"flex",alignItems:"center",fontWeight:"600",gap:"6px"},title:"Reload workout data from libraries (useful after code changes)",children:"Refresh"})]}),(0,je.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"16px"},children:(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsx)("h1",{style:{margin:0,color:"white",fontSize:"2.5rem",fontWeight:"800",letterSpacing:"-0.5px"},children:"string"===typeof h.name?h.name:"object"===typeof h.name?JSON.stringify(h.name):"Workout"}),h.crossTrainingType&&(()=>{const e={pool:{emoji:"\ud83c\udfca",color:"#3b82f6",label:"Pool / Aqua Running"},aquaRunning:{emoji:"\ud83c\udfca",color:"#3b82f6",label:"Aqua Running"},rowing:{emoji:"\ud83d\udea3",color:"#22c55e",label:"Rowing Machine"},elliptical:{emoji:"\u26a1",color:"#f59e0b",label:"Elliptical"},swimming:{emoji:"\ud83c\udfca\u200d\u2642\ufe0f",color:"#06b6d4",label:"Swimming"},stationaryBike:{emoji:"\ud83d\udeb4\u200d\u2640\ufe0f",color:"#8b5cf6",label:"Stationary Bike"},standUpBike:{emoji:"\ud83d\udeb4",color:"#ec4899",label:"Stand-Up Bike"},cyclete:{emoji:"\ud83d\udeb4",color:"#ec4899",label:"Cyclete"},elliptigo:{emoji:"\ud83d\udeb4",color:"#ec4899",label:"ElliptiGO"}}[h.crossTrainingType]||{emoji:"\ud83c\udfc3",color:"#999",label:"Cross-Training"};return(0,je.jsxs)("div",{className:"workout-equipment-indicator",style:{display:"inline-flex",alignItems:"center",gap:"12px",background:"linear-gradient(135deg, ".concat(e.color,"15 0%, ").concat(e.color,"25 100%)"),border:"2px solid ".concat(e.color),borderRadius:"12px",padding:"12px 20px",marginTop:"16px"},children:[(0,je.jsx)("span",{className:"workout-equipment-emoji",style:{fontSize:"2rem"},children:e.emoji}),(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:e.color,fontSize:"0.75rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px"},children:"Cross-Training Workout"}),(0,je.jsx)("div",{className:"workout-equipment-label",style:{color:"white",fontSize:"1.3rem",fontWeight:"800",marginTop:"2px"},children:e.label})]})]})})(),(0,je.jsx)("p",{className:"workout-subtitle",style:{margin:"8px 0 0 0",color:"#999",fontSize:"1.1rem",fontWeight:"500"},children:i.charAt(0).toUpperCase()+i.slice(1)})]})}),(0,je.jsxs)("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[(0,je.jsxs)("span",{className:"workout-badge",style:{background:"linear-gradient(135deg, ".concat(k(h.type),"20 0%, ").concat(k(h.type),"40 100%)"),border:"2px solid ".concat(k(h.type)),color:k(h.type),padding:"8px 16px",borderRadius:"20px",fontSize:"0.9rem",fontWeight:"700"},children:[(D=h.type,{tempo:"\u26a1",intervals:"\ud83d\udd25",hills:"\u26f0\ufe0f",longRun:"\ud83c\udfc3",easy:"\ud83c\udf24\ufe0f"}[D]||"\ud83d\udcaa")," ",h.focus]}),h.equipmentSpecific&&(null===t||void 0===t?void 0:t.standUpBikeType)&&(0,je.jsx)("span",{style:{background:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.1)",color:"#999",padding:"8px 16px",borderRadius:"20px",fontSize:"0.9rem",fontWeight:"600"},children:(0,Bl.tS)(t.standUpBikeType)})]})]})}),(0,je.jsxs)("div",{className:"container",style:{padding:"24px 16px"},children:[(0,je.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px",marginBottom:"24px"},children:[(0,je.jsxs)("div",{className:"workout-detail-card workout-metric-card",style:{background:"linear-gradient(135deg, ".concat(k(h.type),"25 0%, ").concat(k(h.type),"08 50%, rgba(255, 255, 255, 0.05) 100%)"),padding:"20px",borderRadius:"16px",border:"2px solid ".concat(k(h.type),"50"),boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"20, 0 0 20px ").concat(k(h.type),"15"),transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px) scale(1.02)",e.currentTarget.style.boxShadow="0 12px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px ".concat(k(h.type),"60, 0 0 30px ").concat(k(h.type),"30"),e.currentTarget.style.borderColor="".concat(k(h.type),"70")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0) scale(1)",e.currentTarget.style.boxShadow="0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"20, 0 0 20px ").concat(k(h.type),"15"),e.currentTarget.style.borderColor="".concat(k(h.type),"50")},children:[(0,je.jsx)("div",{className:"workout-metric-label",style:{color:"#999",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},children:"Target Pace"}),(0,je.jsx)("div",{className:"workout-metric-value",style:{color:"white",fontSize:"1.5rem",fontWeight:"800",lineHeight:"1.2",textShadow:"0 2px 8px ".concat(k(h.type),"40")},children:(e=>{if("string"===typeof e)return e;if("object"===typeof e){const t=Object.entries(e);return 1===t.length?t[0][1]:t.map(e=>{let[t,n]=e;return"".concat(t.charAt(0).toUpperCase()+t.slice(1),": ").concat(n)}).join(" | ")}return"Steady, controlled effort"})(h.paceGuidance)})]}),(0,je.jsxs)("div",{className:"workout-detail-card workout-metric-card",style:{background:"linear-gradient(135deg, ".concat(k(h.type),"25 0%, ").concat(k(h.type),"08 50%, rgba(255, 255, 255, 0.05) 100%)"),padding:"20px",borderRadius:"16px",border:"2px solid ".concat(k(h.type),"50"),boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"20, 0 0 20px ").concat(k(h.type),"15"),transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px) scale(1.02)",e.currentTarget.style.boxShadow="0 12px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px ".concat(k(h.type),"60, 0 0 30px ").concat(k(h.type),"30"),e.currentTarget.style.borderColor="".concat(k(h.type),"70")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0) scale(1)",e.currentTarget.style.boxShadow="0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"20, 0 0 20px ").concat(k(h.type),"15"),e.currentTarget.style.borderColor="".concat(k(h.type),"50")},children:[(0,je.jsx)("div",{className:"workout-metric-label",style:{color:"#999",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},children:"Intensity"}),(0,je.jsx)("div",{className:"workout-metric-value",style:{color:"white",fontSize:"1.1rem",fontWeight:"700",lineHeight:"1.3",textShadow:"0 2px 6px ".concat(k(h.type),"40")},children:"string"===typeof h.intensity?(0,Bl.TA)(h.intensity):"object"===typeof h.intensity?JSON.stringify(h.intensity):"Medium Effort"})]}),(0,je.jsxs)("div",{className:"workout-detail-card workout-metric-card",style:{background:"linear-gradient(135deg, ".concat(k(h.type),"25 0%, ").concat(k(h.type),"08 50%, rgba(255, 255, 255, 0.05) 100%)"),padding:"20px",borderRadius:"16px",border:"2px solid ".concat(k(h.type),"50"),boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"20, 0 0 20px ").concat(k(h.type),"15"),transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px) scale(1.02)",e.currentTarget.style.boxShadow="0 12px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px ".concat(k(h.type),"60, 0 0 30px ").concat(k(h.type),"30"),e.currentTarget.style.borderColor="".concat(k(h.type),"70")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0) scale(1)",e.currentTarget.style.boxShadow="0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"20, 0 0 20px ").concat(k(h.type),"15"),e.currentTarget.style.borderColor="".concat(k(h.type),"50")},children:[(0,je.jsx)("div",{className:"workout-metric-label",style:{color:"#999",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},children:"Heart Rate Zone"}),(0,je.jsx)("div",{className:"workout-metric-value",style:{color:"white",fontSize:"1.5rem",fontWeight:"800",lineHeight:"1.2",textShadow:"0 2px 8px ".concat(k(h.type),"40")},children:"string"===typeof h.heartRate?(0,Bl.I$)(h.heartRate):"object"===typeof h.heartRate?JSON.stringify(h.heartRate):"70-85% Max HR"})]})]}),(null===u||void 0===u?void 0:u.completed)&&d&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(0, 255, 136, 0.15) 0%, rgba(0, 212, 255, 0.12) 50%, rgba(255, 255, 255, 0.05) 100%)",border:"2px solid rgba(0, 255, 136, 0.4)",borderRadius:"20px",padding:"24px",marginBottom:"24px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 255, 136, 0.2), 0 0 25px rgba(0, 255, 136, 0.15)",transition:"all 0.3s ease"},children:[(0,je.jsx)("h2",{style:{margin:"0 0 20px 0",color:"white",fontSize:"1.8rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"12px"},children:d.autoCompletedFromStrava?"Synced from Strava":"Workout Completed"}),(0,je.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"16px",marginBottom:d.notes||d.stravaActivityUrl?"20px":"0"},children:[d.distance&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(0, 212, 255, 0.05) 100%)",padding:"16px",borderRadius:"12px",border:"2px solid rgba(0, 212, 255, 0.5)",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 212, 255, 0.4), 0 0 25px rgba(0, 212, 255, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)"},children:[(0,je.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Distance"}),(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:d.distance}),(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"miles"})]})]}),d.duration&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(0, 212, 255, 0.05) 100%)",padding:"16px",borderRadius:"12px",border:"2px solid rgba(0, 212, 255, 0.5)",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 212, 255, 0.4), 0 0 25px rgba(0, 212, 255, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)"},children:[(0,je.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Duration"}),(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:d.duration}),(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"minutes"})]})]}),d.pace&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(0, 212, 255, 0.05) 100%)",padding:"16px",borderRadius:"12px",border:"2px solid rgba(0, 212, 255, 0.5)",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 212, 255, 0.4), 0 0 25px rgba(0, 212, 255, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)"},children:[(0,je.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Pace"}),(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:d.pace.replace("/mi","")}),(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"per mile"})]})]}),d.avgHeartRate&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(0, 212, 255, 0.05) 100%)",padding:"16px",borderRadius:"12px",border:"2px solid rgba(0, 212, 255, 0.5)",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 212, 255, 0.4), 0 0 25px rgba(0, 212, 255, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)"},children:[(0,je.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Avg Heart Rate"}),(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:d.avgHeartRate}),(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"bpm"})]})]}),d.maxHeartRate&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(0, 212, 255, 0.05) 100%)",padding:"16px",borderRadius:"12px",border:"2px solid rgba(0, 212, 255, 0.5)",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 212, 255, 0.4), 0 0 25px rgba(0, 212, 255, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)"},children:[(0,je.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Max Heart Rate"}),(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:d.maxHeartRate}),(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"bpm"})]})]}),d.cadence&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(0, 212, 255, 0.05) 100%)",padding:"16px",borderRadius:"12px",border:"2px solid rgba(0, 212, 255, 0.5)",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 212, 255, 0.4), 0 0 25px rgba(0, 212, 255, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)"},children:[(0,je.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Cadence"}),(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:Math.round(d.cadence)}),(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"steps/min"})]})]}),d.elevationGain&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(0, 212, 255, 0.05) 100%)",padding:"16px",borderRadius:"12px",border:"2px solid rgba(0, 212, 255, 0.5)",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 212, 255, 0.4), 0 0 25px rgba(0, 212, 255, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)"},children:[(0,je.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Elevation Gain"}),(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:d.elevationGain}),(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"feet"})]})]})]}),d.notes&&(0,je.jsxs)("div",{style:{background:"#0a0a0a",padding:"16px",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.05)",marginBottom:d.stravaActivityUrl?"16px":"0"},children:[(0,je.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Notes"}),(0,je.jsx)("div",{style:{color:"#DDD",fontSize:"1rem",lineHeight:"1.6"},children:d.notes})]}),d.stravaActivityUrl&&(0,je.jsx)("div",{style:{display:"flex",justifyContent:"center",paddingTop:"8px"},children:(0,je.jsxs)("a",{href:d.stravaActivityUrl,target:"_blank",rel:"noopener noreferrer",style:{background:"#FC4C02",color:"white",padding:"12px 24px",borderRadius:"12px",fontSize:"1rem",fontWeight:"700",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(252, 76, 2, 0.4)",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 6px 16px rgba(252, 76, 2, 0.6)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 12px rgba(252, 76, 2, 0.4)"},children:[(0,je.jsx)("span",{style:{fontSize:"1.2rem"},children:"\ud83d\udd17"}),"View on Strava"]})}),d.laps&&d.laps.length>0&&(0,je.jsx)("div",{style:{display:"flex",justifyContent:"center",paddingTop:"16px",marginTop:"16px",borderTop:"1px solid rgba(255, 255, 255, 0.05)"},children:(0,je.jsxs)("button",{onClick:b,disabled:v,style:{background:v?"#1a1a1a":"linear-gradient(135deg, #00D4FF 0%, #0099CC 100%)",color:"white",padding:"14px 28px",borderRadius:"12px",fontSize:"1.05rem",fontWeight:"700",border:"none",cursor:v?"not-allowed":"pointer",display:"inline-flex",alignItems:"center",gap:"10px",boxShadow:v?"none":"0 4px 12px rgba(0, 212, 255, 0.4)",transition:"all 0.2s",opacity:v?.6:1},onMouseEnter:e=>{v||(e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 6px 16px rgba(0, 212, 255, 0.6)")},onMouseLeave:e=>{v||(e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 12px rgba(0, 212, 255, 0.4)")},children:[(0,je.jsx)("span",{style:{fontSize:"1.3rem"},children:v?"\u23f3":"\ud83e\udd16"}),v?"Analyzing Workout...":"Get Coaching"]})}),y&&(0,je.jsxs)("div",{style:{marginTop:"20px",background:"linear-gradient(135deg, #1a2a3a 0%, #0f1f2f 100%)",padding:"24px",borderRadius:"16px",border:"2px solid #00D4FF"},children:[(0,je.jsxs)("h4",{style:{margin:"0 0 16px 0",color:"#00D4FF",fontSize:"1.4rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"10px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.5rem"},children:"\ud83d\udca1"}),"Workout Insights"]}),(0,je.jsx)("div",{className:"workout-coaching-text",style:{color:"#DDD",fontSize:"1.05rem",lineHeight:"1.8",whiteSpace:"pre-line"},children:y})]}),w&&(0,je.jsx)("div",{style:{marginTop:"20px",background:"#2a1a1a",padding:"20px",borderRadius:"12px",border:"1px solid #e53e3e"},children:(0,je.jsxs)("div",{style:{color:"#e53e3e",fontSize:"1rem",fontWeight:"600"},children:["Error getting coaching analysis: ",w]})})]}),(0,je.jsxs)("div",{className:"workout-detail-card workout-section",style:{background:"linear-gradient(135deg, ".concat(k(h.type),"15 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(k(h.type),"30"),borderRadius:"20px",padding:"24px",marginBottom:"24px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"15, 0 0 25px ").concat(k(h.type),"10"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h2",{style:{margin:"0 0 20px 0",color:"white",fontSize:"1.8rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"12px"},children:"Workout Structure"}),(0,je.jsx)("div",{className:"workout-structure-text",style:{background:"linear-gradient(135deg, ".concat(k(h.type),"08 0%, rgba(0, 0, 0, 0.3) 100%)"),padding:"20px",borderRadius:"16px",border:"2px solid ".concat(k(h.type),"20"),fontSize:"1.1rem",lineHeight:"2",color:"#ddd",fontWeight:"500",whiteSpace:"pre-line",boxShadow:"inset 0 2px 8px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"10, 0 0 15px ").concat(k(h.type),"08")},children:(e=>{if("string"===typeof e)return e;if(Array.isArray(e))return e.map((e,t)=>{if("object"===typeof e){const t=[];return e.duration&&t.push(e.duration),e.type&&t.push(e.type),e.intensity&&t.push("@ ".concat(e.intensity)),e.description&&t.push("(".concat(e.description,")")),e.activity&&t.push(e.activity),t.join(" ")}return e}).join(" \u2192 ");if("object"===typeof e){const t=[];return e.warmup&&t.push("**Warmup:** ".concat(e.warmup)),e.main&&t.push("**Main Set:** ".concat(e.main)),e.recovery&&t.push("**Recovery:** ".concat(e.recovery)),e.cooldown&&t.push("**Cooldown:** ".concat(e.cooldown)),e.repeat&&t.push("**Repeat:** ".concat(e.repeat)),e.effort&&t.push("**Effort:** ".concat(e.effort)),e.technique&&t.push("**Technique:** ".concat(e.technique)),e.style&&t.push("**Style:** ".concat(e.style)),e.approach&&t.push("**Approach:** ".concat(e.approach)),e.pattern&&t.push("**Pattern:** ".concat(e.pattern)),t.length>0?t.join("\n\n"):Object.entries(e).map(e=>{let[t,n]=e;return"".concat(t,": ").concat(n)}).join(", ")}return"Complete the workout as prescribed"})(h.structure)})]}),h.description&&(0,je.jsxs)("div",{className:"workout-detail-card workout-section",style:{background:"linear-gradient(135deg, ".concat(k(h.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(k(h.type),"25"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"10, 0 0 20px ").concat(k(h.type),"08"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 12px 0",color:"white",fontSize:"1.3rem",fontWeight:"700"},children:"About This Workout"}),(0,je.jsx)("p",{className:"workout-description-text",style:{fontSize:"1rem",margin:0,lineHeight:"1.7",color:"#ddd"},children:"string"===typeof h.description?h.description:"object"===typeof h.description?JSON.stringify(h.description):"Standard workout description"})]}),h.specificFocus&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(k(h.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(k(h.type),"35"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"15, 0 0 20px ").concat(k(h.type),"12"),transition:"all 0.3s ease"},children:[(0,je.jsxs)("h3",{style:{margin:"0 0 12px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:[(0,je.jsx)("span",{children:"\ud83c\udfaf"})," Training Focus"]}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:h.specificFocus})]}),h.progression&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(k(h.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(k(h.type),"35"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"15, 0 0 20px ").concat(k(h.type),"12"),transition:"all 0.3s ease"},children:[(0,je.jsxs)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:[(0,je.jsx)("span",{children:"\ud83d\udcc8"})," Progression Scheme"]}),(0,je.jsx)("div",{style:{display:"grid",gap:"8px"},children:"object"===typeof h.progression?Object.entries(h.progression).map(e=>{let[t,n]=e;return(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"4px 0"},children:[(0,je.jsxs)("strong",{style:{color:"#999",minWidth:"80px"},children:[t,":"]}),(0,je.jsx)("span",{style:{color:"#ddd"},children:n})]},t)}):(0,je.jsx)("p",{style:{margin:0,color:"#ddd"},children:h.progression})})]}),h.benefits&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(34, 197, 94, 0.2) 0%, rgba(34, 197, 94, 0.08) 50%, rgba(255, 255, 255, 0.05) 100%)",border:"2px solid rgba(34, 197, 94, 0.4)",borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(34, 197, 94, 0.2), 0 0 20px rgba(34, 197, 94, 0.15)",transition:"all 0.3s ease"},children:[(0,je.jsxs)("h3",{style:{margin:"0 0 12px 0",color:"#22c55e",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:[(0,je.jsx)("span",{children:"\ud83d\udcaa"})," Benefits"]}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:"string"===typeof h.benefits?h.benefits:Array.isArray(h.benefits)?h.benefits.join(", "):"object"===typeof h.benefits?JSON.stringify(h.benefits):"Training adaptation"})]}),h.technique&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(59, 130, 246, 0.08) 50%, rgba(255, 255, 255, 0.05) 100%)",border:"2px solid rgba(59, 130, 246, 0.5)",borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(59, 130, 246, 0.2), 0 0 20px rgba(59, 130, 246, 0.15)",transition:"all 0.3s ease"},children:[(0,je.jsxs)("h3",{style:{margin:"0 0 12px 0",color:"#3b82f6",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:[(0,je.jsx)("span",{children:"\ud83c\udfaf"})," Technique"]}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:"string"===typeof h.technique?h.technique:"object"===typeof h.technique?JSON.stringify(h.technique):"Maintain good form"})]}),h.effort&&"object"===typeof h.effort&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.2) 0%, rgba(239, 68, 68, 0.08) 50%, rgba(255, 255, 255, 0.05) 100%)",border:"2px solid rgba(239, 68, 68, 0.5)",borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(239, 68, 68, 0.2), 0 0 20px rgba(239, 68, 68, 0.15)",transition:"all 0.3s ease"},children:[(0,je.jsxs)("h3",{style:{margin:"0 0 16px 0",color:"#ef4444",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:[(0,je.jsx)("span",{children:"\u2764\ufe0f"})," Effort Guidelines"]}),(0,je.jsxs)("div",{style:{display:"grid",gap:"12px"},children:[h.effort.heartRate&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Heart Rate:"}),(0,je.jsx)("span",{style:{color:"#ddd",fontSize:"1rem"},children:h.effort.heartRate})]}),h.effort.perceived&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Perceived Effort:"}),(0,je.jsx)("span",{style:{color:"#ddd",fontSize:"1rem"},children:h.effort.perceived})]}),h.effort.cadence&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Cadence:"}),(0,je.jsx)("span",{style:{color:"#ddd",fontSize:"1rem"},children:h.effort.cadence})]}),h.effort.strokeRate&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Stroke Rate:"}),(0,je.jsx)("span",{style:{color:"#ddd",fontSize:"1rem"},children:h.effort.strokeRate})]}),h.effort.legTurnover&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Leg Turnover:"}),(0,je.jsx)("span",{style:{color:"#ddd",fontSize:"1rem"},children:h.effort.legTurnover})]})]})]}),h.settings&&"object"===typeof h.settings&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(168, 85, 247, 0.2) 0%, rgba(168, 85, 247, 0.08) 50%, rgba(255, 255, 255, 0.05) 100%)",border:"2px solid rgba(168, 85, 247, 0.5)",borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(168, 85, 247, 0.2), 0 0 20px rgba(168, 85, 247, 0.15)",transition:"all 0.3s ease"},children:[(0,je.jsxs)("h3",{style:{margin:"0 0 16px 0",color:"#a855f7",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:[(0,je.jsx)("span",{children:"\u2699\ufe0f"})," Equipment Settings"]}),(0,je.jsxs)("div",{style:{display:"grid",gap:"16px"},children:[h.settings.intervals&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#a855f7",fontSize:"1rem",display:"block",marginBottom:"8px"},children:"Intervals:"}),(0,je.jsxs)("div",{style:{paddingLeft:"12px",display:"grid",gap:"6px"},children:[h.settings.intervals.strokeRate&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("span",{style:{color:"#999"},children:"Stroke Rate:"})," ",h.settings.intervals.strokeRate," spm"]}),h.settings.intervals.pace&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("span",{style:{color:"#999"},children:"Pace:"})," ",h.settings.intervals.pace]}),h.settings.intervals.resistance&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("span",{style:{color:"#999"},children:"Resistance:"})," ",h.settings.intervals.resistance]}),h.settings.intervals.incline&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("span",{style:{color:"#999"},children:"Incline:"})," ",h.settings.intervals.incline]}),h.settings.intervals.cadence&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("span",{style:{color:"#999"},children:"Cadence:"})," ",h.settings.intervals.cadence]})]})]}),h.settings.recovery&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#a855f7",fontSize:"1rem",display:"block",marginBottom:"8px"},children:"Recovery:"}),(0,je.jsxs)("div",{style:{paddingLeft:"12px",display:"grid",gap:"6px"},children:[h.settings.recovery.strokeRate&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("span",{style:{color:"#999"},children:"Stroke Rate:"})," ",h.settings.recovery.strokeRate," spm"]}),h.settings.recovery.pace&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("span",{style:{color:"#999"},children:"Pace:"})," ",h.settings.recovery.pace]}),h.settings.recovery.resistance&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("span",{style:{color:"#999"},children:"Resistance:"})," ",h.settings.recovery.resistance]}),h.settings.recovery.incline&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("span",{style:{color:"#999"},children:"Incline:"})," ",h.settings.recovery.incline]}),h.settings.recovery.cadence&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("span",{style:{color:"#999"},children:"Cadence:"})," ",h.settings.recovery.cadence]})]})]}),h.settings.heartRate&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("strong",{style:{color:"#999"},children:"Heart Rate:"})," ",h.settings.heartRate]}),h.settings.power&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("strong",{style:{color:"#999"},children:"Power:"})," ",h.settings.power]})]})]}),h.coachingTips&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%)",border:"2px solid rgba(139, 92, 246, 0.3)",borderRadius:"16px",padding:"20px",marginBottom:"24px"},children:[(0,je.jsxs)("h3",{style:{margin:"0 0 12px 0",color:"#8b5cf6",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:[(0,je.jsx)("span",{children:"\ud83d\udca1"})," Coaching Tips"]}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:"string"===typeof h.coachingTips?h.coachingTips:"object"===typeof h.coachingTips?JSON.stringify(h.coachingTips):"Execute as prescribed"})]}),"hot_humid"===(null===t||void 0===t?void 0:t.climate)&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255, 149, 0, 0.15) 0%, rgba(255, 255, 255, 0.05) 100%)",border:"2px solid rgba(255, 149, 0, 0.4)",borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 149, 0, 0.2), 0 0 20px rgba(255, 149, 0, 0.15)",transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.5rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"10px"},children:"Climate Adjustments"}),(0,je.jsxs)("div",{style:{display:"grid",gap:"12px"},children:[(0,je.jsx)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Pace:"}),(0,je.jsx)("span",{style:{color:"#ddd"},children:"Add 30-60 seconds per mile in high humidity"})]})}),(0,je.jsx)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Hydration:"}),(0,je.jsx)("span",{style:{color:"#ddd"},children:"Drink before feeling thirsty"})]})}),(0,je.jsx)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Timing:"}),(0,je.jsx)("span",{style:{color:"#ddd"},children:"Early morning (before 7am) or late evening recommended"})]})}),(0,je.jsx)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Effort:"}),(0,je.jsx)("span",{style:{color:"#ddd"},children:"Focus on effort level rather than exact pace"})]})})]})]}),(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(k(h.type),"10 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(k(h.type),"25"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"10, 0 0 20px ").concat(k(h.type),"08"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.5rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"10px"},children:"Safety & Execution Notes"}),(0,je.jsx)("div",{style:{display:"grid",gap:"12px"},children:(Array.isArray(h.safetyNotes)?h.safetyNotes:["Listen to your body and adjust as needed","Stay hydrated throughout the workout","Stop if you feel pain or excessive fatigue"]).map((e,t)=>(0,je.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"8px 0"},children:[(0,je.jsx)("span",{className:"workout-safety-bullet",style:{color:"#666",fontSize:"1.5rem",minWidth:"24px"},children:"\u2022"}),(0,je.jsx)("span",{className:"workout-body-text",style:{fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:"string"===typeof e?e:JSON.stringify(e)})]},t))})]}),h.hillRequirement&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(k(h.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(k(h.type),"35"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"15, 0 0 20px ").concat(k(h.type),"12"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.5rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"10px"},children:"Hill Requirements"}),(0,je.jsxs)("div",{style:{display:"grid",gap:"12px"},children:[h.hillRequirement.description&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"8px",fontSize:"1.1rem"},children:"Description:"}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:h.hillRequirement.description})]}),h.hillRequirement.grade&&(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("strong",{style:{color:"#999",fontSize:"1.1rem"},children:"Grade:"}),(0,je.jsx)("span",{style:{fontSize:"1rem",color:"#ddd"},children:h.hillRequirement.grade})]}),h.hillRequirement.distance&&(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("strong",{style:{color:"#999",fontSize:"1.1rem"},children:"Distance:"}),(0,je.jsx)("span",{style:{fontSize:"1rem",color:"#ddd"},children:h.hillRequirement.distance})]})]})]}),h.terrainInstructions&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(k(h.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(k(h.type),"35"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"15, 0 0 20px ").concat(k(h.type),"12"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 12px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:"Terrain Instructions"}),"string"===typeof h.terrainInstructions?(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:h.terrainInstructions}):"object"===typeof h.terrainInstructions?(0,je.jsx)("div",{style:{display:"grid",gap:"16px"},children:Object.entries(h.terrainInstructions).map(e=>{let[t,n]=e;return(0,je.jsxs)("div",{children:[(0,je.jsxs)("strong",{style:{color:"#999",textTransform:"capitalize",display:"block",marginBottom:"6px",fontSize:"1.1rem"},children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),"string"===typeof n?(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:n}):Array.isArray(n)?(0,je.jsx)("div",{style:{paddingLeft:"12px"},children:n.map((e,t)=>(0,je.jsxs)("p",{style:{margin:"4px 0",fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:["\u2022 ",e]},t))}):(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:JSON.stringify(n)})]},t)})}):null]}),h.progression&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(k(h.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(k(h.type),"35"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"15, 0 0 20px ").concat(k(h.type),"12"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:"Progression"}),"string"===typeof h.progression?(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:h.progression}):"object"===typeof h.progression?(0,je.jsx)("div",{style:{display:"grid",gap:"16px"},children:Object.entries(h.progression).map(e=>{let[t,n]=e;return(0,je.jsxs)("div",{children:[(0,je.jsxs)("strong",{style:{color:"#999",textTransform:"capitalize",display:"block",marginBottom:"6px",fontSize:"1.1rem"},children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:n})]},t)})}):null]}),h.variations&&Array.isArray(h.variations)&&h.variations.length>0&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(k(h.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(k(h.type),"35"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"15, 0 0 20px ").concat(k(h.type),"12"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:"Variations"}),(0,je.jsx)("div",{style:{display:"grid",gap:"12px"},children:h.variations.map((e,t)=>(0,je.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"8px 0"},children:[(0,je.jsx)("span",{style:{color:"#666",fontSize:"1.5rem",minWidth:"24px"},children:"\u2022"}),(0,je.jsx)("span",{style:{fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:e})]},t))})]}),h.examples&&Array.isArray(h.examples)&&h.examples.length>0&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(k(h.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(k(h.type),"35"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"15, 0 0 20px ").concat(k(h.type),"12"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:"Examples"}),(0,je.jsx)("div",{style:{display:"grid",gap:"12px"},children:h.examples.map((e,t)=>(0,je.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"8px 0"},children:[(0,je.jsx)("span",{style:{color:"#666",fontSize:"1.5rem",minWidth:"24px"},children:"\u2022"}),(0,je.jsx)("span",{style:{fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:e})]},t))})]}),h.trackIntervals&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(k(h.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(k(h.type),"35"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"15, 0 0 20px ").concat(k(h.type),"12"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:"Track Intervals"}),"string"===typeof h.trackIntervals?(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:h.trackIntervals}):"object"===typeof h.trackIntervals?(0,je.jsx)("div",{style:{display:"grid",gap:"16px"},children:Object.entries(h.trackIntervals).map(e=>{let[t,n]=e;return(0,je.jsxs)("div",{children:[(0,je.jsxs)("strong",{style:{color:"#999",textTransform:"capitalize",display:"block",marginBottom:"6px",fontSize:"1.1rem"},children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),"object"===typeof n?(0,je.jsx)("div",{style:{paddingLeft:"12px"},children:Object.entries(n).map(e=>{let[t,n]=e;return(0,je.jsxs)("p",{style:{margin:"4px 0",fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:[(0,je.jsxs)("strong",{style:{color:"#999"},children:[t,":"]})," ","string"===typeof n?n:JSON.stringify(n)]},t)})}):(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:"string"===typeof n?n:JSON.stringify(n)})]},t)})}):null]}),h.fueling&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(k(h.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(k(h.type),"35"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"15, 0 0 20px ").concat(k(h.type),"12"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:"Fueling"}),"string"===typeof h.fueling?(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:h.fueling}):"object"===typeof h.fueling?(0,je.jsx)("div",{style:{display:"grid",gap:"16px"},children:Object.entries(h.fueling).map(e=>{let[t,n]=e;return(0,je.jsxs)("div",{children:[(0,je.jsxs)("strong",{style:{color:"#999",textTransform:"capitalize",display:"block",marginBottom:"6px",fontSize:"1.1rem"},children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:n})]},t)})}):null]}),h.runEqOptions&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(k(h.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(k(h.type),"40"),borderRadius:"20px",padding:"24px",marginBottom:"24px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"20, 0 0 25px ").concat(k(h.type),"15"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 20px 0",color:"white",fontSize:"1.6rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"12px"},children:"RunEQ Options - 4 Ways to Complete This Workout"}),(0,je.jsxs)("div",{style:{display:"grid",gap:"16px"},children:[h.runEqOptions.optionA&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(k(h.type),"08 0%, rgba(0, 0, 0, 0.3) 100%)"),padding:"16px",borderRadius:"12px",border:"2px solid ".concat(k(h.type),"25"),boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2), 0 0 0 1px ".concat(k(h.type),"10, 0 0 10px ").concat(k(h.type),"08")},children:[(0,je.jsx)("strong",{style:{color:"#999",fontSize:"1.1rem",display:"block",marginBottom:"8px"},children:"Option A:"}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:h.runEqOptions.optionA})]}),h.runEqOptions.optionB&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(k(h.type),"08 0%, rgba(0, 0, 0, 0.3) 100%)"),padding:"16px",borderRadius:"12px",border:"2px solid ".concat(k(h.type),"25"),boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2), 0 0 0 1px ".concat(k(h.type),"10, 0 0 10px ").concat(k(h.type),"08")},children:[(0,je.jsx)("strong",{style:{color:"#999",fontSize:"1.1rem",display:"block",marginBottom:"8px"},children:"Option B:"}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:h.runEqOptions.optionB})]}),h.runEqOptions.optionC&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(k(h.type),"08 0%, rgba(0, 0, 0, 0.3) 100%)"),padding:"16px",borderRadius:"12px",border:"2px solid ".concat(k(h.type),"25"),boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2), 0 0 0 1px ".concat(k(h.type),"10, 0 0 10px ").concat(k(h.type),"08")},children:[(0,je.jsx)("strong",{style:{color:"#999",fontSize:"1.1rem",display:"block",marginBottom:"8px"},children:"Option C:"}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:h.runEqOptions.optionC})]}),h.runEqOptions.optionD&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(k(h.type),"08 0%, rgba(0, 0, 0, 0.3) 100%)"),padding:"16px",borderRadius:"12px",border:"2px solid ".concat(k(h.type),"25"),boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2), 0 0 0 1px ".concat(k(h.type),"10, 0 0 10px ").concat(k(h.type),"08")},children:[(0,je.jsx)("strong",{style:{color:"#999",fontSize:"1.1rem",display:"block",marginBottom:"8px"},children:"Option D:"}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:h.runEqOptions.optionD})]}),h.runEqOptions.recommendation&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(k(h.type),"20 0%, ").concat(k(h.type),"10 100%)"),padding:"16px",borderRadius:"12px",border:"2px solid ".concat(k(h.type),"50"),boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"30, 0 0 15px ").concat(k(h.type),"20")},children:[(0,je.jsx)("strong",{style:{color:"white",fontSize:"1.2rem",display:"block",marginBottom:"8px"},children:"Recommended for you:"}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1.05rem",lineHeight:"1.6",color:"white",fontWeight:"500"},children:h.runEqOptions.recommendation})]})]})]}),h.coachingGuidance&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(k(h.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(k(h.type),"35"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"15, 0 0 20px ").concat(k(h.type),"12"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.5rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"10px"},children:"Coaching Guidance"}),"string"===typeof h.coachingGuidance?(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:h.coachingGuidance}):"object"===typeof h.coachingGuidance?(0,je.jsx)("div",{style:{display:"grid",gap:"16px"},children:Object.entries(h.coachingGuidance).map(e=>{let[t,n]=e;return(0,je.jsxs)("div",{children:[(0,je.jsxs)("strong",{style:{color:"#999",textTransform:"capitalize",display:"block",marginBottom:"6px",fontSize:"1.1rem"},children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:n})]},t)})}):null]}),(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(k(h.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(k(h.type),"30"),borderRadius:"20px",padding:"24px",marginBottom:"24px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(k(h.type),"15, 0 0 25px ").concat(k(h.type),"10"),transition:"all 0.3s ease"},children:[(0,je.jsxs)("button",{onClick:()=>m(h),className:"workout-button",style:{width:"100%",background:"linear-gradient(135deg, #8b5cf6 0%, #ec4899 50%, #f59e0b 100%)",border:"2px solid rgba(255, 255, 255, 0.3)",color:"white",fontSize:"1.2rem",fontWeight:"700",padding:"18px 24px",borderRadius:"16px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",boxShadow:"0 6px 20px rgba(139, 92, 246, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1), 0 0 30px rgba(236, 72, 153, 0.3)",textShadow:"0 2px 8px rgba(0, 0, 0, 0.4)",position:"relative",overflow:"hidden"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, #a78bfa 0%, #f472b6 50%, #fbbf24 100%)",e.currentTarget.style.borderColor="rgba(255, 255, 255, 0.5)",e.currentTarget.style.transform="translateY(-3px) scale(1.02)",e.currentTarget.style.boxShadow="0 12px 32px rgba(139, 92, 246, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.2), 0 0 40px rgba(236, 72, 153, 0.5)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, #8b5cf6 0%, #ec4899 50%, #f59e0b 100%)",e.currentTarget.style.borderColor="rgba(255, 255, 255, 0.3)",e.currentTarget.style.transform="translateY(0) scale(1)",e.currentTarget.style.boxShadow="0 6px 20px rgba(139, 92, 246, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1), 0 0 30px rgba(236, 72, 153, 0.3)"},children:[(0,je.jsx)("span",{style:{fontSize:"1.3rem"},children:"\u2728"}),"Something Else (Show Alternatives)"]}),(0,je.jsx)("div",{style:{marginTop:"20px",textAlign:"center",padding:"16px",background:"#0a0a0a",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.05)"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.95rem",color:"#666",lineHeight:"1.6"},children:[(0,je.jsx)("strong",{style:{color:"#999"},children:"Need something different?"}),(0,je.jsx)("br",{}),"Click above for all alternatives including contextual adaptations (too hot, too tired, time constraints, etc.)"]})})]})]}),(0,je.jsx)(Mp,{isOpen:p.isOpen,onClose:f,currentWorkout:p.workout,userProfile:t,trainingPlan:n,onWorkoutSelect:g})]});var D};const fv=function(){var e;const[t,n]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[o,s]=(0,a.useState)(""),l=re(),u=null===(e=Pe.j2.currentUser)||void 0===e?void 0:e.email,d=["herrenbrad@gmail.com"].includes(u);(0,a.useEffect)(()=>{h()},[]);const h=async()=>{try{i(!0);const e=(0,Ie.rJ)(Pe.db,"users"),t=(0,Ie.P)(e,(0,Ie._M)("approvalStatus","==","pending")),r=await(0,Ie.GG)(t),o=[];r.forEach(e=>{o.push((0,c.A)({id:e.id},e.data()))}),o.sort((e,t)=>{var n,r;const i=(null===(n=e.createdAt)||void 0===n?void 0:n.toMillis())||0;return((null===(r=t.createdAt)||void 0===r?void 0:r.toMillis())||0)-i}),n(o),i(!1)}catch(e){console.error("Error loading pending users:",e),s("Error loading pending users: "+e.message),i(!1)}};return d?(0,je.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"20px"},children:(0,je.jsxs)("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[(0,je.jsxs)("div",{children:[(0,je.jsx)("h1",{style:{color:"#00D4FF",margin:"0 0 8px 0"},children:"Admin: User Approvals"}),(0,je.jsx)("p",{style:{color:"#AAAAAA",margin:0},children:"Approve or deny pending user accounts"})]}),(0,je.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,je.jsx)("button",{onClick:h,disabled:r,style:{padding:"10px 20px",background:"rgba(0, 212, 255, 0.2)",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:"6px",color:"#00D4FF",cursor:r?"not-allowed":"pointer",fontSize:"0.9rem"},children:r?"Loading...":"\ud83d\udd04 Refresh"}),(0,je.jsx)("button",{onClick:()=>l("/"),style:{padding:"10px 20px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"#FFFFFF",cursor:"pointer",fontSize:"0.9rem"},children:"Back to Dashboard"})]})]}),o&&(0,je.jsx)("div",{style:{background:"rgba(229, 62, 62, 0.1)",border:"1px solid rgba(229, 62, 62, 0.3)",borderRadius:"8px",padding:"16px",color:"#FC8181",marginBottom:"20px"},children:o}),(0,je.jsx)("div",{children:r?(0,je.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#AAAAAA"},children:"Loading pending users..."}):0===t.length?(0,je.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"40px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,je.jsx)("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:"\u2705"}),(0,je.jsx)("h2",{style:{color:"#00D4FF",marginBottom:"8px"},children:"All Caught Up!"}),(0,je.jsx)("p",{style:{color:"#AAAAAA",margin:0},children:"No pending user approvals at this time."})]}):(0,je.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:t.map(e=>(0,je.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"24px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[(0,je.jsxs)("div",{style:{flex:1,minWidth:"250px"},children:[(0,je.jsx)("div",{style:{fontSize:"1.2rem",color:"#FFFFFF",marginBottom:"8px",fontWeight:"bold"},children:e.displayName||"No name provided"}),(0,je.jsx)("div",{style:{color:"#00D4FF",marginBottom:"8px",fontSize:"0.95rem"},children:e.email}),(0,je.jsxs)("div",{style:{color:"#AAAAAA",fontSize:"0.85rem"},children:["Signed up: ",e.createdAt?new Date(e.createdAt.toMillis()).toLocaleString():"Unknown"]})]}),(0,je.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,je.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm("Approve ".concat(t,"?")))try{const n=(0,Ie.doc)(Pe.db,"users",e);await(0,Ie.updateDoc)(n,{approvalStatus:"approved",approvedAt:(0,Ie.serverTimestamp)(),approvedBy:u}),console.log("\u2705 Approved user: ".concat(t)),await h()}catch(n){console.error("Error approving user:",n),console.error("Error approving user: "+n.message)}})(e.id,e.email),style:{padding:"10px 24px",background:"#00FF88",border:"none",borderRadius:"6px",color:"#000000",cursor:"pointer",fontSize:"0.95rem",fontWeight:"bold"},children:"\u2705 Approve"}),(0,je.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm("Deny ".concat(t,"? They will need to create a new account.")))try{const n=(0,Ie.doc)(Pe.db,"users",e);await(0,Ie.updateDoc)(n,{approvalStatus:"denied",deniedAt:(0,Ie.serverTimestamp)(),deniedBy:u}),console.log("\u274c Denied user: ".concat(t)),await h()}catch(n){console.error("Error denying user:",n),console.error("Error denying user: "+n.message)}})(e.id,e.email),style:{padding:"10px 24px",background:"rgba(255, 107, 107, 0.2)",border:"1px solid rgba(255, 107, 107, 0.3)",borderRadius:"6px",color:"#FF6B6B",cursor:"pointer",fontSize:"0.95rem",fontWeight:"bold"},children:"\u274c Deny"})]})]})},e.id))})})]})}):(0,je.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"20px"},children:(0,je.jsxs)("div",{style:{maxWidth:"500px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"40px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,je.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:"\ud83d\udd12"}),(0,je.jsx)("h1",{style:{color:"#FF6B6B",marginBottom:"16px"},children:"Access Denied"}),(0,je.jsx)("p",{style:{color:"#AAAAAA",fontSize:"1.1rem",marginBottom:"24px"},children:"You do not have permission to access this page."}),(0,je.jsx)("button",{onClick:()=>l("/"),style:{padding:"12px 24px",background:"#00D4FF",border:"none",borderRadius:"6px",color:"#000000",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:"Go to Dashboard"})]})})};const gv=function(){const[e,t]=(0,a.useState)("idle"),[n,r]=(0,a.useState)({total:0,migrated:0,skipped:0,errors:0}),[i,o]=(0,a.useState)([]),[s,l]=(0,a.useState)(!1),[u,d]=(0,a.useState)(!0),[h,p]=(0,a.useState)(null);(0,a.useEffect)(()=>{try{console.log("PhaseMigrationAdmin: Checking admin status...");(()=>{const e=Pe.j2.currentUser;console.log("PhaseMigrationAdmin: Current user:",e?e.email:"Not logged in"),e?(console.log("PhaseMigrationAdmin: User is admin"),l(!0)):console.log("PhaseMigrationAdmin: User not logged in"),d(!1)})()}catch(e){console.error("PhaseMigrationAdmin: Error checking admin status:",e),p(e.message),d(!1)}},[]);const m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const n=(new Date).toLocaleTimeString();o(r=>[...r,{timestamp:n,message:e,type:t}]),console.log("[".concat(n,"] ").concat(e))},f=e=>{if(!e)return console.warn("recalculatePhases: No training plan provided"),null;var t;if(!e.weeks||!Array.isArray(e.weeks))return console.warn("recalculatePhases: Invalid weeks array",{hasWeeks:!!e.weeks,weeksType:typeof e.weeks,weeksLength:null===(t=e.weeks)||void 0===t?void 0:t.length}),null;const n=e.weeks.length;if(n<=0)return console.warn("recalculatePhases: Plan has no weeks"),null;const r={Base:"Aerobic foundation & durability",Build:"Strength & speed development",Peak:"Race-specific sharpening",Taper:"Freshen up & execute"},i={Base:["Consistency right now builds race-day confidence \ud83d\udcaa","Aerobic base today = faster workouts later \u2699\ufe0f","Keep stacking easy miles \u2013 durability wins \ud83e\uddf1","Recovery matters as much as the miles \ud83d\ude34"],Build:["Dial in effort \u2013 smooth, fast, controlled \ud83d\ude80","This phase teaches you to love the grind \ud83d\udd01","Every quality day is sharpening your edge \u2702\ufe0f","Fuel, sleep, repeat \u2013 you're in the work zone \ud83e\uddea"],Peak:["Race-specific work now = calm on race day \ud83c\udfc1","Trust your legs \u2013 they know what to do \ud83d\udc63","Two words: race rehearsals \ud83e\udde0","Your engine is built. Now we fine tune \ud83d\udd27"],Taper:["Less work, more readiness \u2013 let freshness build \ud83c\udf31","Nothing new. Stay sharp, stay calm \ud83c\udfaf","Visualize success \u2013 you've earned this \ud83d\udcab","Rest is training. Really. \ud83d\ude34"]},o=(e,t)=>{const n=i[e]||i.Base;return n[(t-1)%n.length]},a=e.weeks.map((e,t)=>{const i=e.weekNumber||e.week||t+1;if(!i||i<=0){console.warn("recalculatePhases: Invalid week number for week at index ".concat(t),e);const i=t+1,a=_t.getPhaseForWeek(i,n),s=a.toLowerCase();return(0,c.A)((0,c.A)({},e),{},{weekNumber:i,phase:s,weeklyFocus:r[a]||"Periodized training",motivation:o(a,i)})}const a=_t.getPhaseForWeek(i,n),s=a.toLowerCase();return(0,c.A)((0,c.A)({},e),{},{phase:s,weeklyFocus:r[a]||"Periodized training",motivation:o(a,i)})});return(0,c.A)((0,c.A)({},e),{},{weeks:a,phaseMigrationCompleted:!0,phaseMigrationDate:(new Date).toISOString()})};return u?(0,je.jsxs)("div",{style:{padding:"20px",textAlign:"center"},children:[(0,je.jsx)("h2",{children:"Loading..."}),(0,je.jsx)("p",{children:"Checking admin access..."})]}):h?(0,je.jsxs)("div",{style:{padding:"20px",textAlign:"center"},children:[(0,je.jsx)("h2",{children:"Error"}),(0,je.jsx)("p",{style:{color:"red"},children:h})]}):s?(0,je.jsxs)("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},children:[(0,je.jsx)("h1",{children:"Phase Migration Admin"}),(0,je.jsx)("p",{children:"This tool recalculates training plan phases (Base, Build, Peak, Taper) for all users using the updated phase calculation logic."}),(0,je.jsx)("div",{style:{margin:"20px 0"},children:(0,je.jsx)("button",{onClick:async()=>{if(s){t("running"),r({total:0,migrated:0,skipped:0,errors:0}),o([]);try{m("\ud83d\ude80 Starting phase migration for all users...","info");const n=(0,Ie.rJ)(Pe.db,"users"),i=await(0,Ie.GG)(n);let o=0,a=0,s=0,l=0;r({total:i.size,migrated:0,skipped:0,errors:0});for(const t of i.docs){o++;const n=t.id,i=t.data().trainingPlan;if(i)if(i.phaseMigrationCompleted)m("\u2705 User ".concat(n,": Already migrated, skipping"),"info"),s++,r(e=>(0,c.A)((0,c.A)({},e),{},{skipped:e.skipped+1}));else try{m("\ud83d\udcdd Migrating plan for user ".concat(n,"..."),"info");const t=f(i);if(!t){var e;const t=!!i.weeks,o=Array.isArray(i.weeks),a=null===(e=i.weeks)||void 0===e?void 0:e.length;m("\u26a0\ufe0f  User ".concat(n,": Failed to recalculate phases (hasWeeks: ").concat(t,", isArray: ").concat(o,", length: ").concat(a,")"),"error"),l++,r(e=>(0,c.A)((0,c.A)({},e),{},{errors:e.errors+1}));continue}const o=(0,Ie.doc)(Pe.db,"users",n);await(0,Ie.updateDoc)(o,{trainingPlan:t,updatedAt:(0,Ie.serverTimestamp)()});const s={};t.weeks.forEach(e=>{const t=e.phase||"unknown";s[t]=(s[t]||0)+1}),m("\u2705 User ".concat(n,": Migrated (").concat(t.weeks.length," weeks) - Phases: ").concat(JSON.stringify(s)),"success"),a++,r(e=>(0,c.A)((0,c.A)({},e),{},{migrated:e.migrated+1}))}catch(h){const t=h.message||"Unknown error",i=h.code||"no-code";m("\u274c Error migrating user ".concat(n,": ").concat(t," (code: ").concat(i,")"),"error"),("permission-denied"===h.code||t.includes("permission"))&&m("   \ud83d\udca1 Note: This is a Firestore security rules issue. Admin needs permission to update other users' plans.","info"),l++,r(e=>(0,c.A)((0,c.A)({},e),{},{errors:e.errors+1}))}else m("\u23ed\ufe0f  User ".concat(n,": No training plan, skipping"),"info"),s++,r(e=>(0,c.A)((0,c.A)({},e),{},{skipped:e.skipped+1}))}m("","info"),m("=".repeat(60),"info"),m("\ud83d\udcca Migration Summary:","info"),m("   Total users: ".concat(o),"info"),m("   Plans migrated: ".concat(a),"success"),m("   Plans skipped: ".concat(s),"info"),m("   Errors: ".concat(l),l>0?"error":"info"),m("=".repeat(60),"info"),t("complete")}catch(h){m("\u274c Fatal error during migration: ".concat(h.message),"error"),t("error")}}else m("\u274c Access denied. Admin privileges required.","error")},disabled:"running"===e,style:{padding:"12px 24px",fontSize:"16px",backgroundColor:"running"===e?"#ccc":"#06b6d4",color:"white",border:"none",borderRadius:"8px",cursor:"running"===e?"not-allowed":"pointer"},children:"running"===e?"Running Migration...":"Run Migration"})}),n.total>0&&(0,je.jsxs)("div",{style:{margin:"20px 0",padding:"15px",backgroundColor:"#f3f4f6",borderRadius:"8px"},children:[(0,je.jsx)("h3",{children:"Progress"}),(0,je.jsxs)("p",{children:["Total users: ",n.total]}),(0,je.jsxs)("p",{style:{color:"#10b981"},children:["\u2705 Migrated: ",n.migrated]}),(0,je.jsxs)("p",{style:{color:"#6b7280"},children:["\u23ed\ufe0f  Skipped: ",n.skipped]}),(0,je.jsxs)("p",{style:{color:"#ef4444"},children:["\u274c Errors: ",n.errors]})]}),i.length>0&&(0,je.jsxs)("div",{style:{margin:"20px 0"},children:[(0,je.jsx)("h3",{children:"Migration Logs"}),(0,je.jsx)("div",{style:{backgroundColor:"#1f2937",color:"#f3f4f6",padding:"15px",borderRadius:"8px",fontFamily:"monospace",fontSize:"12px",maxHeight:"500px",overflowY:"auto"},children:i.map((e,t)=>(0,je.jsxs)("div",{style:{marginBottom:"4px",color:"error"===e.type?"#ef4444":"success"===e.type?"#10b981":"#9ca3af"},children:["[",e.timestamp,"] ",e.message]},t))})]})]}):(0,je.jsxs)("div",{style:{padding:"20px",textAlign:"center"},children:[(0,je.jsx)("h2",{children:"Access Denied"}),(0,je.jsx)("p",{children:"Admin privileges required to run phase migration."}),(0,je.jsx)("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px"},children:"Please log in to access this page."})]})};const yv=function(){const[e]=Re(),t=re(),[r,i]=(0,a.useState)("processing"),[o,s]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{const r=e.get("error");if(r)return s("Strava authorization failed: ".concat(r)),void i("error");const o=e.get("code");if(!o)return s("No authorization code received from Strava"),void i("error");if(!Pe.j2.currentUser)return s("You must be logged in to connect Strava"),void i("error");i("exchanging");const a=await Jp.exchangeToken(o);i("saving");const{updateDoc:l,doc:c}=await Promise.resolve().then(n.bind(n,667)),{db:u}=await Promise.resolve().then(n.bind(n,121)),d=c(u,"users",Pe.j2.currentUser.uid);await l(d,{stravaConnected:!0,stravaAccessToken:a.access_token,stravaRefreshToken:a.refresh_token,stravaTokenExpiresAt:a.expires_at,stravaAthleteId:a.athlete.id,stravaAthleteName:"".concat(a.athlete.firstname," ").concat(a.athlete.lastname),stravaConnectedAt:(new Date).toISOString()}),console.log("\u2705 Strava connected successfully:",a.athlete),i("success"),setTimeout(()=>{t("/dashboard")},2e3)}catch(r){console.error("\u274c Strava callback error:",r),s(r.message||"Failed to connect Strava"),i("error")}})()},[e,t]),(0,je.jsxs)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"20px"},children:[(0,je.jsxs)("div",{style:{maxWidth:"500px",width:"100%",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",padding:"40px",textAlign:"center"},children:["processing"===r&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px",animation:"spin 2s linear infinite"},children:"\u23f3"}),(0,je.jsx)("h1",{style:{color:"white",marginBottom:"10px"},children:"Processing..."}),(0,je.jsx)("p",{style:{color:"#aaa"},children:"Connecting your Strava account"})]}),"exchanging"===r&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px",animation:"pulse 1.5s ease-in-out infinite"},children:"\ud83d\udd04"}),(0,je.jsx)("h1",{style:{color:"white",marginBottom:"10px"},children:"Exchanging Tokens..."}),(0,je.jsx)("p",{style:{color:"#aaa"},children:"Getting your Strava authorization"})]}),"saving"===r&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px",animation:"bounce 1s ease-in-out infinite"},children:"\ud83d\udcbe"}),(0,je.jsx)("h1",{style:{color:"white",marginBottom:"10px"},children:"Saving Connection..."}),(0,je.jsx)("p",{style:{color:"#aaa"},children:"Almost done!"})]}),"success"===r&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:"\u2705"}),(0,je.jsx)("h1",{style:{color:"#00FF88",marginBottom:"10px"},children:"Strava Connected!"}),(0,je.jsx)("p",{style:{color:"#aaa",marginBottom:"20px"},children:"Your workouts will now sync automatically"}),(0,je.jsx)("p",{style:{color:"#666",fontSize:"0.9rem"},children:"Redirecting to dashboard..."})]}),"error"===r&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:"\u274c"}),(0,je.jsx)("h1",{style:{color:"#ff4444",marginBottom:"10px"},children:"Connection Failed"}),(0,je.jsx)("p",{style:{color:"#aaa",marginBottom:"20px"},children:o}),(0,je.jsx)("button",{onClick:()=>t("/dashboard"),style:{background:"rgba(255, 255, 255, 0.1)",color:"white",border:"1px solid rgba(255, 255, 255, 0.2)",padding:"12px 24px",borderRadius:"10px",cursor:"pointer",fontSize:"1rem",fontWeight:"600"},children:"Return to Dashboard"})]})]}),(0,je.jsx)("style",{children:"\n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n        @keyframes pulse {\n          0%, 100% { opacity: 1; transform: scale(1); }\n          50% { opacity: 0.7; transform: scale(1.1); }\n        }\n        @keyframes bounce {\n          0%, 100% { transform: translateY(0); }\n          50% { transform: translateY(-10px); }\n        }\n      "})]})};var vv=n(462);const wv=function(){var e,t,n,r;const i=re(),o=Hl(),[s,l]=(0,a.useState)(null),[u,d]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!0),[m,f]=(0,a.useState)(""),[g,y]=(0,a.useState)(null),[v,w]=(0,a.useState)(null),[b,k]=(0,a.useState)(null),[D,x]=(0,a.useState)(!1),[E,S]=(0,a.useState)(null),[A,C]=(0,a.useState)([]),[T,R]=(0,a.useState)(!1);(0,a.useEffect)(()=>{const e=Pe.j2.onAuthStateChanged(e=>{if(e){l(e);const t="herrenbrad@gmail.com"===e.email;d(t),t&&F(e.uid)}else l(null),d(!1);p(!1)});return()=>e()},[]);const F=async e=>{try{const t=await Ne.getUserData(e);null!==t&&void 0!==t&&t.profile&&(w(t.profile),f(JSON.stringify(t.profile,null,2)),o.success("Profile loaded from Firestore"))}catch(t){Oe.A.error("Error loading profile from Firestore:",t)}},I=async()=>{if(g){x(!0),k(null),S(null),C([]);try{Oe.A.log("\ud83d\ude80 Generating plan with profile:",g),Oe.A.log("\ud83c\udfd7\ufe0f Step 1: Generating deterministic plan structure...");const n=St.generatePlanStructure(g);if(!n||!n.weeks||0===n.weeks.length)throw new Error("Failed to generate plan structure - weeks array is missing");Oe.A.log("\u2705 Plan structure generated: ".concat(n.weeks.length," weeks")),Oe.A.log("\ud83e\udd16 Step 2: Adding AI coaching analysis...");let r=null;try{const e=await _t.generateCoachingAnalysis(g);e.success?(r=e.analysis,Oe.A.log("\u2705 AI coaching analysis generated")):(Oe.A.warn("\u26a0\ufe0f AI coaching failed, continuing without it:",e.error),r="Welcome to your training plan! This plan is designed specifically for your goals and schedule.")}catch(e){Oe.A.warn("\u26a0\ufe0f AI coaching failed, continuing without it:",e),r="Welcome to your training plan! This plan is designed specifically for your goals and schedule."}const i=(0,c.A)((0,c.A)({},n),{},{aiCoachingAnalysis:r,fullPlanText:r||"Your personalized training plan"});k(i),R(!!r);try{const e=(0,vv.validateTrainingPlan)(i,g);S(e),e.valid?o.success("Plan generated successfully!"):(Oe.A.warn("\u26a0\ufe0f Validation failed:",e.errors),o.warning("Plan generated but ".concat(e.errors.length," validation errors found")))}catch(t){Oe.A.warn("Could not run validations:",t)}}catch(n){Oe.A.error("Error generating plan:",n),C([n.message]),o.error("Error: ".concat(n.message))}finally{x(!1)}}else o.error("Please provide a valid profile JSON")};return h?(0,je.jsx)("div",{style:{padding:"40px",textAlign:"center"},children:(0,je.jsx)("p",{children:"Loading..."})}):u?(0,je.jsxs)("div",{className:"dev-mode",children:[(0,je.jsxs)("div",{className:"dev-mode-header",children:[(0,je.jsx)("h1",{children:"\ud83d\udd27 Dev Mode - Plan Generation Testing"}),(0,je.jsx)("button",{onClick:()=>i("/dashboard"),className:"btn-secondary",children:"Back to Dashboard"})]}),(0,je.jsxs)("div",{className:"dev-mode-content",children:[(0,je.jsxs)("div",{className:"dev-mode-panel",children:[(0,je.jsx)("h2",{children:"Profile Input"}),(0,je.jsxs)("div",{className:"dev-mode-actions",children:[(0,je.jsx)("button",{onClick:()=>{const e={raceDistance:"Half Marathon",raceTime:"2:00:00",raceDate:"2025-06-15",startDate:(new Date).toISOString().split("T")[0],raceElevationProfile:"flat",currentWeeklyMileage:16,currentLongRun:6,recentRaceTime:"1:58:00",recentRaceDistance:"Half Marathon",workoutsPerWeek:4,runsPerWeek:4,availableDays:["Monday","Wednesday","Friday","Saturday"],restDays:["Tuesday","Thursday","Sunday"],longRunDay:"Saturday",qualityDays:["Wednesday","Friday"],standUpBikeType:"cyclete",preferredBikeDays:["Monday"],crossTrainingEquipment:{},experienceLevel:"intermediate",runningStatus:"active",units:"imperial",name:"Test User"};f(JSON.stringify(e,null,2)),y(e),o.info("Template loaded")},className:"btn-secondary",children:"Load Template"}),v&&(0,je.jsx)("button",{onClick:()=>{f(JSON.stringify(v,null,2)),y(v),o.info("Profile loaded from Firestore")},className:"btn-secondary",children:"Load from Firestore"})]}),(0,je.jsx)("textarea",{value:m,onChange:e=>{f(e.target.value);try{const t=JSON.parse(e.target.value);Object.keys(t).forEach(e=>{e.startsWith("_comment")&&delete t[e]}),y(t),C([])}catch(t){C(["JSON Parse Error: ".concat(t.message)]),y(null)}},placeholder:"Paste profile JSON here...",className:"dev-mode-textarea",rows:20}),A.length>0&&(0,je.jsxs)("div",{className:"dev-mode-errors",children:[(0,je.jsx)("h3",{children:"Errors:"}),(0,je.jsx)("ul",{children:A.map((e,t)=>(0,je.jsx)("li",{children:e},t))})]}),(0,je.jsx)("button",{onClick:I,disabled:!g||D,className:"btn-primary",style:{marginTop:"20px",width:"100%"},children:D?"Generating...":"Generate Plan"})]}),(0,je.jsxs)("div",{className:"dev-mode-panel",children:[(0,je.jsx)("h2",{children:"Generated Plan"}),E&&(0,je.jsxs)("div",{className:"dev-mode-validation ".concat(E.valid?"valid":"invalid"),children:[(0,je.jsx)("h3",{children:"Validation Results:"}),E.valid?(0,je.jsx)("p",{children:"\u2705 All validations passed"}):(0,je.jsxs)("div",{children:[(0,je.jsxs)("p",{children:["\u274c ",E.errors.length," validation errors:"]}),(0,je.jsx)("ul",{children:E.errors.map((e,t)=>(0,je.jsx)("li",{children:e},t))})]})]}),b?(0,je.jsxs)("div",{className:"dev-mode-plan",children:[(0,je.jsxs)("div",{className:"dev-mode-plan-actions",children:[(0,je.jsx)("button",{onClick:I,className:"btn-secondary",disabled:D,children:"Regenerate"}),(0,je.jsx)("button",{onClick:()=>{const e=new WeakSet,t=JSON.stringify(b,(t,n)=>{if("object"===typeof n&&null!==n){if(e.has(n))return"[Circular]";e.add(n)}return n},2);navigator.clipboard.writeText(t),o.success("Plan JSON copied to clipboard")},className:"btn-secondary",children:"Copy Plan JSON"}),b.aiCoachingAnalysis&&(0,je.jsxs)("button",{onClick:()=>R(!T),className:"btn-secondary",children:[T?"Hide":"Show"," AI Coach"]})]}),(0,je.jsxs)("div",{className:"dev-mode-plan-stats",children:[(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"Total Weeks:"})," ",(null===(e=b.planOverview)||void 0===e?void 0:e.totalWeeks)||(null===(t=b.weeks)||void 0===t?void 0:t.length)]}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"Start Date:"})," ",null===(n=b.planOverview)||void 0===n?void 0:n.startDate]}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"Race Date:"})," ",null===(r=b.planOverview)||void 0===r?void 0:r.raceDate]}),b.aiCoachingAnalysis&&(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"AI Coaching:"})," ",T?"\u2705 Visible":"\ud83d\udcc4 Available"]})]}),T&&b.aiCoachingAnalysis&&(0,je.jsxs)("div",{className:"dev-mode-coaching",style:{marginBottom:"20px",padding:"20px",backgroundColor:"#1a1a1a",borderRadius:"8px",border:"1px solid #333"},children:[(0,je.jsx)("h3",{style:{marginTop:0,marginBottom:"15px"},children:"\ud83e\udd16 AI Coach Analysis"}),(0,je.jsx)(yp,{rawResponse:b.aiCoachingAnalysis})]}),(0,je.jsx)("div",{className:"dev-mode-dashboard",children:(0,je.jsx)(om,{userProfile:g,trainingPlan:b,completedWorkouts:null,clearAllData:()=>{}})})]}):(0,je.jsx)("div",{className:"dev-mode-placeholder",children:D?(0,je.jsx)("p",{children:"Generating plan... This may take 30-60 seconds."}):(0,je.jsx)("p",{children:'Enter a profile and click "Generate Plan" to start.'})})]})]})]}):(0,je.jsxs)("div",{style:{padding:"40px",textAlign:"center"},children:[(0,je.jsx)("h1",{children:"\ud83d\udd12 Access Denied"}),(0,je.jsx)("p",{children:"Dev Mode is only accessible to authorized users."}),(0,je.jsxs)("p",{children:["Current user: ",(null===s||void 0===s?void 0:s.email)||"Not logged in"]}),(0,je.jsx)("button",{onClick:()=>i("/"),style:{marginTop:"20px",padding:"10px 20px"},children:"Go Home"})]})};class bv extends a.Component{constructor(e){super(e),this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){Oe.A.error("\u274c Error Boundary caught an error:",e),Oe.A.error("Error Info:",t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?(0,je.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"20px",color:"#ffffff"},children:(0,je.jsxs)("div",{style:{maxWidth:"600px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"40px",border:"1px solid rgba(255, 255, 255, 0.1)",textAlign:"center"},children:[(0,je.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:"\u26a0\ufe0f"}),(0,je.jsx)("h1",{style:{color:"#00D4FF",marginBottom:"16px"},children:"Something went wrong"}),(0,je.jsx)("p",{style:{color:"#AAAAAA",fontSize:"1.1rem",lineHeight:"1.6",marginBottom:"24px"},children:"We're sorry, but something unexpected happened. Our team has been notified."}),!1,(0,je.jsxs)("div",{style:{marginTop:"32px",display:"flex",gap:"12px",justifyContent:"center"},children:[(0,je.jsx)("button",{onClick:this.handleReset,style:{padding:"12px 24px",background:"rgba(0, 212, 255, 0.2)",border:"1px solid rgba(0, 212, 255, 0.5)",borderRadius:"6px",color:"#00D4FF",cursor:"pointer",fontSize:"1rem",transition:"all 0.2s"},onMouseOver:e=>{e.target.style.background="rgba(0, 212, 255, 0.3)"},onMouseOut:e=>{e.target.style.background="rgba(0, 212, 255, 0.2)"},children:"Reload App"}),(0,je.jsx)("button",{onClick:()=>window.location.href="/",style:{padding:"12px 24px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"#FFFFFF",cursor:"pointer",fontSize:"1rem",transition:"all 0.2s"},onMouseOver:e=>{e.target.style.background="rgba(255, 255, 255, 0.15)"},onMouseOut:e=>{e.target.style.background="rgba(255, 255, 255, 0.1)"},children:"Go Home"})]})]})}):this.props.children}}const kv=bv;function Dv(){const{pathname:e}=te();return(0,a.useEffect)(()=>{window.scrollTo(0,0)},[e]),null}function xv(){const e=Hl(),t="v2.0-approval-fix-"+(new Date).toISOString();Oe.A.log("\ud83d\ude80 APP VERSION:",t),Oe.A.log("\ud83d\udcc5 Build timestamp:",(new Date).toISOString());const[n,r]=(0,a.useState)(null),[i,o]=(0,a.useState)(null),[s,l]=(0,a.useState)(null),[u,d]=(0,a.useState)(null),[h,p]=(0,a.useState)(!0);(0,a.useEffect)(()=>{const e=(0,Fe.hg)(Pe.j2,e=>{if(Oe.A.log("\ud83d\udd10 Auth state changed:",e?"Logged in":"Logged out"),e)r(e),Oe.A.log("\u2705 User authenticated, real-time listener will load data");else{r(null),o(null),l(null),d(null);const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&n.startsWith("runeq_")&&e.push(n)}e.forEach(e=>localStorage.removeItem(e)),p(!1)}});return()=>e()},[]),(0,a.useEffect)(()=>{if(!n)return;Oe.A.log("\ud83d\udc42 Setting up real-time listener for user:",n.uid);const t=(0,Ie.doc)(Pe.db,"users",n.uid),r=(0,Ie.aQ)(t,n=>{if(Oe.A.log("\ud83d\udd04 Snapshot received:",{exists:n.exists()}),n.exists()){const r=n.data();Oe.A.log("\ud83d\udce6 User document data:",{hasProfile:!!r.profile,hasTrainingPlan:!!r.trainingPlan,hasEmail:!!r.email,approvalStatus:r.approvalStatus,allKeys:Object.keys(r)});const a=(0,c.A)((0,c.A)({},r.profile),{},{email:r.email,displayName:r.displayName,approvalStatus:r.approvalStatus,createdAt:r.createdAt,approvedAt:r.approvedAt,approvedBy:r.approvedBy,stravaConnected:r.stravaConnected,stravaAccessToken:r.stravaAccessToken,stravaRefreshToken:r.stravaRefreshToken,stravaTokenExpiresAt:r.stravaTokenExpiresAt,stravaAthleteId:r.stravaAthleteId,stravaAthleteName:r.stravaAthleteName,stravaConnectedAt:r.stravaConnectedAt,stravaLastSync:r.stravaLastSync});a.approvalStatus||(Oe.A.log("\ud83d\udd04 [Realtime] Migrating existing user without approvalStatus - auto-approving"),a.approvalStatus="approved",(0,Ie.updateDoc)(t,{approvalStatus:"approved",approvedAt:new Date,approvedBy:"auto-migration-all-existing-users"}).catch(e=>console.error("Failed to migrate user:",e))),Oe.A.log("\u2705 Setting userProfile with approvalStatus:",a.approvalStatus),"pending"===(null===i||void 0===i?void 0:i.approvalStatus)&&"approved"===a.approvalStatus&&(Oe.A.log("\ud83c\udf89 User approved! Showing notification..."),e.success("Great news! Your account has been approved. Welcome to Run+ Plans!",8e3)),o(a),r.trainingPlan&&(Oe.A.log("\u2705 Setting training plan"),l(r.trainingPlan)),r.completedWorkouts?(Oe.A.log("\u2705 Setting completed workouts:",Object.keys(r.completedWorkouts).length,"workouts"),d(r.completedWorkouts)):d({})}else Oe.A.log("\u26a0\ufe0f User document does not exist yet - waiting for creation");p(!1)},e=>{console.error("\u274c Error listening to user document:",e),p(!1)});return()=>{Oe.A.log("\ud83d\udd07 Cleaning up real-time listener"),r()}},[n,null===i||void 0===i?void 0:i.approvalStatus]);const m=()=>{const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&n.startsWith("runeq_")&&e.push(n)}e.forEach(e=>localStorage.removeItem(e)),Oe.A.log("\ud83e\uddf9 Cleared localStorage:",e)},f=async(t,r)=>{var i,a;(Oe.A.log("\ud83c\udfaf Onboarding complete - received data:",{hasProfile:!!t,hasPlan:!!r,planKeys:r?Object.keys(r):[]}),r&&r.weeks&&r.weeks[0])&&Oe.A.log("\ud83d\udcca First week structure:",{weekNumber:r.weeks[0].weekNumber,totalMileage:r.weeks[0].totalMileage,workoutsCount:null===(i=r.weeks[0].workouts)||void 0===i?void 0:i.length,firstWorkout:null===(a=r.weeks[0].workouts)||void 0===a?void 0:a[0]});if(o(t),l(r),m(),!n)throw console.error("\u274c No user found - cannot save to Firestore"),new Error("User not authenticated");{Oe.A.log("\ud83d\udcbe Saving profile to Firestore...",t);const i=await Ne.saveUserProfile(n.uid,t);if(!i.success)throw console.error("\u274c Failed to save profile:",i.error),e.error("Warning: Failed to save your profile. Please try again or contact support.",1e4),new Error("Profile save failed: "+i.error);var s;if(!r.weeks||0===r.weeks.length)throw Oe.A.error("\u274c CRITICAL: Plan has no weeks array! Cannot save invalid plan."),Oe.A.error("   Plan keys:",Object.keys(r)),Oe.A.error("   Plan structure:",{hasWeeks:!!r.weeks,weeksLength:null===(s=r.weeks)||void 0===s?void 0:s.length,hasCoaching:!(!r.aiCoachingAnalysis&&!r.fullPlanText)}),e.error("Plan generation failed - weeks array is missing. Please try again or contact support.",1e4),new Error("Plan structure is invalid - weeks array is missing");Oe.A.log("\ud83d\udcbe Saving training plan to Firestore...",{weeksCount:r.weeks.length,hasCoaching:!(!r.aiCoachingAnalysis&&!r.fullPlanText)});const o=await Ne.saveTrainingPlan(n.uid,r);if(!o.success)throw console.error("\u274c Failed to save training plan:",o.error),e.error("Warning: Failed to save your training plan. Please try again or contact support.",1e4),new Error("Training plan save failed: "+o.error);Oe.A.log("\u2705 Successfully saved all data to Firestore")}};return h?(0,je.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)"},children:(0,je.jsx)("div",{style:{textAlign:"center",color:"#00D4FF"},children:(0,je.jsx)("h2",{children:"Loading..."})})}):n?(Oe.A.log("\ud83d\udd0d Checking approval status:",{hasUserProfile:!!i,approvalStatus:null===i||void 0===i?void 0:i.approvalStatus,willShowPendingScreen:"pending"===(null===i||void 0===i?void 0:i.approvalStatus)}),"pending"===(null===i||void 0===i?void 0:i.approvalStatus)?(Oe.A.log("\ud83d\udeab Showing pending approval screen"),(0,je.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"20px"},children:(0,je.jsxs)("div",{style:{maxWidth:"500px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"40px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,je.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:"\u23f3"}),(0,je.jsx)("h1",{style:{color:"#00D4FF",marginBottom:"16px"},children:"Account Pending Approval"}),(0,je.jsx)("p",{style:{color:"#AAAAAA",fontSize:"1.1rem",lineHeight:"1.6",marginBottom:"24px"},children:"Thank you for signing up! Your account is currently pending approval."}),(0,je.jsxs)("p",{style:{color:"#AAAAAA",fontSize:"0.95rem",lineHeight:"1.6"},children:["You'll receive an email at ",(0,je.jsx)("strong",{style:{color:"#FFFFFF"},children:null===i||void 0===i?void 0:i.email})," once your account has been approved. This usually takes less than 24 hours."]}),(0,je.jsx)("button",{onClick:async()=>{await(0,Fe.CI)(Pe.j2),window.location.href="/"},style:{marginTop:"32px",padding:"12px 24px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"#FFFFFF",cursor:"pointer",fontSize:"1rem"},children:"Sign Out"})]})})):(0,je.jsxs)(Ae,{children:[(0,je.jsx)(Dv,{}),(0,je.jsx)("div",{className:"App",children:(0,je.jsxs)(be,{children:[(0,je.jsx)(ve,{path:"/auth",element:(0,je.jsx)(Le,{})}),(0,je.jsx)(ve,{path:"/",element:n?s?(0,je.jsx)(ye,{to:"/dashboard",replace:!0}):(0,je.jsx)(ye,{to:"/onboarding",replace:!0}):(0,je.jsx)(ye,{to:"/auth",replace:!0})}),(0,je.jsx)(ve,{path:"/onboarding",element:s?(0,je.jsx)(ye,{to:"/welcome",replace:!0}):(0,je.jsx)(Kl,{onComplete:f})}),(0,je.jsx)(ve,{path:"/welcome",element:s?(0,je.jsx)(wp,{trainingPlan:s,userProfile:i,onPlanUpdated:f}):(0,je.jsx)(ye,{to:"/onboarding",replace:!0})}),(0,je.jsx)(ve,{path:"/preview",element:s?(0,je.jsx)(bp,{userProfile:i,trainingPlan:s}):(0,je.jsx)(ye,{to:"/onboarding",replace:!0})}),(0,je.jsx)(ve,{path:"/dashboard",element:s?(0,je.jsx)(om,{userProfile:i,trainingPlan:s,completedWorkouts:u,clearAllData:async()=>{n&&await Ne.clearUserData(n.uid),o(null),l(null),m(),await(0,Fe.CI)(Pe.j2),window.location.href="/"}}):(0,je.jsx)(ye,{to:"/onboarding",replace:!0})}),(0,je.jsx)(ve,{path:"/workout/:day",element:(0,je.jsx)(mv,{userProfile:i,trainingPlan:s})}),(0,je.jsx)(ve,{path:"/admin/approvals",element:(0,je.jsx)(fv,{})}),(0,je.jsx)(ve,{path:"/admin/migrate-phases",element:(0,je.jsx)(gv,{})}),(0,je.jsx)(ve,{path:"/dev",element:(0,je.jsx)(wv,{})}),(0,je.jsx)(ve,{path:"/auth/strava/callback",element:(0,je.jsx)(yv,{})})]})})]})):(0,je.jsx)(Le,{})}const Ev=function(){return(0,je.jsx)(kv,{children:(0,je.jsx)(Ul,{children:(0,je.jsx)(xv,{})})})},Sv=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:a}=t;n(e),r(e),i(e),o(e),a(e)})};window.addEventListener("error",e=>{if(e.message&&(e.message.includes("ResizeObserver loop")||e.message.includes("ResizeObserver loop completed with undelivered notifications")))return e.stopImmediatePropagation(),!1});l.createRoot(document.getElementById("root")).render((0,je.jsx)(a.StrictMode,{children:(0,je.jsx)(Ev,{})})),Sv()})();
//# sourceMappingURL=main.05f697ac.js.map