/*! For license information please see main.e3ed5cf6.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),i=n(43),o=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function u(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(l(e)!==e)throw Error(a(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),D=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var A=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var T=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var F=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=F&&e[F]||e["@@iterator"])?e:null}var _=Symbol.for("react.client.reference");function I(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===_?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case x:return"Suspense";case E:return"SuspenseList";case A:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case f:return"Portal";case D:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case S:return null!==(t=e.displayName||null)?t:I(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return I(e(t))}catch(n){}}return null}var P=Array.isArray,M=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j={pending:!1,data:null,method:null,action:null},B=[],O=-1;function L(e){return{current:e}}function W(e){0>O||(e.current=B[O],B[O]=null,O--)}function q(e,t){O++,B[O]=e.current,e.current=t}var U=L(null),z=L(null),H=L(null),V=L(null);function K(e,t){switch(q(H,t),q(z,e),q(U,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?id(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=od(t=id(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}W(U),q(U,e)}function Y(){W(U),W(z),W(H)}function G(e){null!==e.memoizedState&&q(V,e);var t=U.current,n=od(t,e.type);t!==n&&(q(z,e),q(U,n))}function Q(e){z.current===e&&(W(U),W(z)),V.current===e&&(W(V),Gd._currentValue=j)}var Z=Object.prototype.hasOwnProperty,X=r.unstable_scheduleCallback,J=r.unstable_cancelCallback,$=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,oe=r.unstable_NormalPriority,ae=r.unstable_LowPriority,se=r.unstable_IdlePriority,le=r.log,ue=r.unstable_setDisableYieldValue,ce=null,de=null;function he(e){if("function"===typeof le&&ue(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ce,e)}catch(t){}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(me(e)/fe|0)|0},me=Math.log,fe=Math.LN2;var ge=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,o=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~o)?i=ve(r):0!==(a&=s)?i=ve(a):n||0!==(n=s&~e)&&(i=ve(n)):0!==(s=r&~o)?i=ve(s):0!==a?i=ve(a):n||0!==(n=r&~e)&&(i=ve(n)),0===i?0:0!==t&&t!==i&&0===(t&o)&&((o=i&-i)>=(n=t&-t)||32===o&&0!==(4194048&n))?t:i}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function De(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ke(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function xe(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function Ee(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Se(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ce(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-pe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ae(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-pe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Te(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Re(){var e=N.p;return 0!==e?e:void 0===(e=window.event)?32:uh(e.type)}var _e=Math.random().toString(36).slice(2),Ie="__reactFiber$"+_e,Pe="__reactProps$"+_e,Me="__reactContainer$"+_e,Ne="__reactEvents$"+_e,je="__reactListeners$"+_e,Be="__reactHandles$"+_e,Oe="__reactResources$"+_e,Le="__reactMarker$"+_e;function We(e){delete e[Ie],delete e[Pe],delete e[Ne],delete e[je],delete e[Be]}function qe(e){var t=e[Ie];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Me]||n[Ie]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bd(e);null!==e;){if(n=e[Ie])return n;e=bd(e)}return t}n=(e=n).parentNode}return null}function Ue(e){if(e=e[Ie]||e[Me]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function ze(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function He(e){var t=e[Oe];return t||(t=e[Oe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ve(e){e[Le]=!0}var Ke=new Set,Ye={};function Ge(e,t){Qe(e,t),Qe(e+"Capture",t)}function Qe(e,t){for(Ye[e]=t,e=0;e<t.length;e++)Ke.add(t[e])}var Ze,Xe,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$e={},et={};function tt(e,t,n){if(i=t,Z.call(et,i)||!Z.call($e,i)&&(Je.test(i)?et[i]=!0:($e[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Ze)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ze=t&&t[1]||"",Xe=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ze+e+Xe}var ot=!1;function at(e,t){if(!e||ot)return"";ot=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(o){r=o}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),a=o[0],s=o[1];if(a&&s){var l=a.split("\n"),u=s.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===u.length)for(r=l.length-1,i=u.length-1;1<=r&&0<=i&&l[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==u[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==u[i]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=i);break}}}finally{ot=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function st(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=st(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ct(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ct(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var mt=/[\n"\\]/g;function ft(e){return e.replace(mt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,i,o,a,s){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?vt(e,a,ut(t)):null!=n?vt(e,a,ut(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=o&&(e.defaultChecked=!!o),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.name=""+ut(s):e.removeAttribute("name")}function yt(e,t,n,r,i,o,a,s){if(null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.type=o),null!=t||null!=n){if(!("submit"!==o&&"reset"!==o||void 0!==t&&null!==t))return;n=null!=n?""+ut(n):"",t=null!=t?""+ut(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function vt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ut(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ut(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Dt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(P(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ut(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var xt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||xt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function St(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Et(e,i,r)}else for(var o in t)t.hasOwnProperty(o)&&Et(e,o,t[o])}function Ct(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var At=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ft(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Rt=null;function _t(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var It=null,Pt=null;function Mt(e){var t=Ue(e);if(t&&(e=t.stateNode)){var n=e[Pe]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ft(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Pe]||null;if(!i)throw Error(a(90));gt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Nt=!1;function jt(e,t,n){if(Nt)return e(t,n);Nt=!0;try{return e(t)}finally{if(Nt=!1,(null!==It||null!==Pt)&&(qu(),It&&(t=It,e=Pt,Pt=It=null,Mt(t),e)))for(t=0;t<e.length;t++)Mt(e[t])}}function Bt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Pe]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ot=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Lt=!1;if(Ot)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch(Ph){Lt=!1}var qt=null,Ut=null,zt=null;function Ht(){if(zt)return zt;var e,t,n=Ut,r=n.length,i="value"in qt?qt.value:qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return zt=i.slice(e,1<t?1-t:void 0)}function Vt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function Yt(){return!1}function Gt(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Kt:Yt,this.isPropagationStopped=Yt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var Qt,Zt,Xt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$t=Gt(Jt),en=h({},Jt,{view:0,detail:0}),tn=Gt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xt&&(Xt&&"mousemove"===e.type?(Qt=e.screenX-Xt.screenX,Zt=e.screenY-Xt.screenY):Zt=Qt=0,Xt=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),rn=Gt(nn),on=Gt(h({},nn,{dataTransfer:0})),an=Gt(h({},en,{relatedTarget:0})),sn=Gt(h({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Gt(h({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),un=Gt(h({},Jt,{data:0})),cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function mn(){return pn}var fn=Gt(h({},en,{key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Vt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mn,charCode:function(e){return"keypress"===e.type?Vt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Vt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Gt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=Gt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mn})),vn=Gt(h({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Gt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Gt(h({},Jt,{newState:0,oldState:0})),Dn=[9,13,27,32],kn=Ot&&"CompositionEvent"in window,xn=null;Ot&&"documentMode"in document&&(xn=document.documentMode);var En=Ot&&"TextEvent"in window&&!xn,Sn=Ot&&(!kn||xn&&8<xn&&11>=xn),Cn=String.fromCharCode(32),An=!1;function Tn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1;var _n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function In(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!_n[e.type]:"textarea"===t}function Pn(e,t,n,r){It?Pt?Pt.push(r):Pt=[r]:It=r,0<(t=Hc(t,"onChange")).length&&(n=new $t("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mn=null,Nn=null;function jn(e){jc(e,0)}function Bn(e){if(ht(ze(e)))return e}function On(e,t){if("change"===e)return t}var Ln=!1;if(Ot){var Wn;if(Ot){var qn="oninput"in document;if(!qn){var Un=document.createElement("div");Un.setAttribute("oninput","return;"),qn="function"===typeof Un.oninput}Wn=qn}else Wn=!1;Ln=Wn&&(!document.documentMode||9<document.documentMode)}function zn(){Mn&&(Mn.detachEvent("onpropertychange",Hn),Nn=Mn=null)}function Hn(e){if("value"===e.propertyName&&Bn(Nn)){var t=[];Pn(t,Nn,e,_t(e)),jt(jn,t)}}function Vn(e,t,n){"focusin"===e?(zn(),Nn=n,(Mn=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&zn()}function Kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Bn(Nn)}function Yn(e,t){if("click"===e)return Bn(t)}function Gn(e,t){if("input"===e||"change"===e)return Bn(t)}var Qn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Zn(e,t){if(Qn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Z.call(t,i)||!Qn(e[i],t[i]))return!1}return!0}function Xn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,r=Xn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Xn(r)}}function $n(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?$n(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ot&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,or=null,ar=!1;function sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==pt(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&Zn(or,r)||(or=r,0<(r=Hc(ir,"onSelect")).length&&(t=new $t("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ur={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},cr={},dr={};function hr(e){if(cr[e])return cr[e];if(!ur[e])return e;var t,n=ur[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return cr[e]=n[t];return e}Ot&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);var pr=hr("animationend"),mr=hr("animationiteration"),fr=hr("animationstart"),gr=hr("transitionrun"),yr=hr("transitionstart"),vr=hr("transitioncancel"),br=hr("transitionend"),wr=new Map,Dr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){wr.set(e,t),Ge(t,[e])}Dr.push("scrollEnd");var xr=new WeakMap;function Er(e,t){if("object"===typeof e&&null!==e){var n=xr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},xr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Sr=[],Cr=0,Ar=0;function Tr(){for(var e=Cr,t=Ar=Cr=0;t<e;){var n=Sr[t];Sr[t++]=null;var r=Sr[t];Sr[t++]=null;var i=Sr[t];Sr[t++]=null;var o=Sr[t];if(Sr[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==o&&Ir(n,i,o)}}function Fr(e,t,n,r){Sr[Cr++]=e,Sr[Cr++]=t,Sr[Cr++]=n,Sr[Cr++]=r,Ar|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Rr(e,t,n,r){return Fr(e,t,n,r),Pr(e)}function _r(e,t){return Fr(e,null,null,t),Pr(e)}function Ir(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(i=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,i&&null!==t&&(i=31-pe(n),null===(r=(e=o.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),o):null}function Pr(e){if(50<Iu)throw Iu=0,Pu=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Mr={};function Nr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(e,t,n,r){return new Nr(e,t,n,r)}function Br(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Or(e,t){var n=e.alternate;return null===n?((n=jr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Lr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Wr(e,t,n,r,i,o){var s=0;if(r=e,"function"===typeof e)Br(e)&&(s=1);else if("string"===typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,U.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case A:return(e=jr(31,n,t,i)).elementType=A,e.lanes=o,e;case g:return qr(n.children,i,o,t);case y:s=8,i|=24;break;case v:return(e=jr(12,n,t,2|i)).elementType=v,e.lanes=o,e;case x:return(e=jr(13,n,t,i)).elementType=x,e.lanes=o,e;case E:return(e=jr(19,n,t,i)).elementType=E,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case D:s=10;break e;case w:s=9;break e;case k:s=11;break e;case S:s=14;break e;case C:s=16,r=null;break e}s=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=jr(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function qr(e,t,n,r){return(e=jr(7,e,r,t)).lanes=n,e}function Ur(e,t,n){return(e=jr(6,e,null,t)).lanes=n,e}function zr(e,t,n){return(t=jr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],Vr=0,Kr=null,Yr=0,Gr=[],Qr=0,Zr=null,Xr=1,Jr="";function $r(e,t){Hr[Vr++]=Yr,Hr[Vr++]=Kr,Kr=e,Yr=t}function ei(e,t,n){Gr[Qr++]=Xr,Gr[Qr++]=Jr,Gr[Qr++]=Zr,Zr=e;var r=Xr;e=Jr;var i=32-pe(r)-1;r&=~(1<<i),n+=1;var o=32-pe(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xr=1<<32-pe(t)+i|n<<i|r,Jr=o+e}else Xr=1<<o|n<<i|r,Jr=e}function ti(e){null!==e.return&&($r(e,1),ei(e,1,0))}function ni(e){for(;e===Kr;)Kr=Hr[--Vr],Hr[Vr]=null,Yr=Hr[--Vr],Hr[Vr]=null;for(;e===Zr;)Zr=Gr[--Qr],Gr[Qr]=null,Jr=Gr[--Qr],Gr[Qr]=null,Xr=Gr[--Qr],Gr[Qr]=null}var ri=null,ii=null,oi=!1,ai=null,si=!1,li=Error(a(519));function ui(e){throw fi(Er(Error(a(418,"")),e)),li}function ci(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ie]=e,t[Pe]=r,n){case"dialog":Bc("cancel",t),Bc("close",t);break;case"iframe":case"object":case"embed":Bc("load",t);break;case"video":case"audio":for(n=0;n<Mc.length;n++)Bc(Mc[n],t);break;case"source":Bc("error",t);break;case"img":case"image":case"link":Bc("error",t),Bc("load",t);break;case"details":Bc("toggle",t);break;case"input":Bc("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Bc("invalid",t);break;case"textarea":Bc("invalid",t),Dt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Zc(t.textContent,n)?(null!=r.popover&&(Bc("beforetoggle",t),Bc("toggle",t)),null!=r.onScroll&&Bc("scroll",t),null!=r.onScrollEnd&&Bc("scrollend",t),null!=r.onClick&&(t.onclick=Xc),t=!0):t=!1,t||ui(e)}function di(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(si=!1);case 27:case 3:return void(si=!0);default:ri=ri.return}}function hi(e){if(e!==ri)return!1;if(!oi)return di(e),oi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ad(e.type,e.memoizedProps)),t=!t),t&&ii&&ui(e),di(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=yd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,pd(e.type)?(e=vd,vd=null,ii=e):ii=n):ii=ri?yd(e.stateNode.nextSibling):null;return!0}function pi(){ii=ri=null,oi=!1}function mi(){var e=ai;return null!==e&&(null===bu?bu=e:bu.push.apply(bu,e),ai=null),e}function fi(e){null===ai?ai=[e]:ai.push(e)}var gi=L(null),yi=null,vi=null;function bi(e,t,n){q(gi,t._currentValue),t._currentValue=n}function wi(e){e._currentValue=gi.current,W(gi)}function Di(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ki(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var o=i.dependencies;if(null!==o){var s=i.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=i;for(var u=0;u<t.length;u++)if(l.context===t[u]){o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Di(o.return,n,e),r||(s=null);break e}o=l.next}}else if(18===i.tag){if(null===(s=i.return))throw Error(a(341));s.lanes|=n,null!==(o=s.alternate)&&(o.lanes|=n),Di(s,n,e),s=null}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===e){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}}function xi(e,t,n,r){e=null;for(var i=t,o=!1;null!==i;){if(!o)if(0!==(524288&i.flags))o=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var s=i.alternate;if(null===s)throw Error(a(387));if(null!==(s=s.memoizedProps)){var l=i.type;Qn(i.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(i===V.current){if(null===(s=i.alternate))throw Error(a(387));s.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Gd):e=[Gd])}i=i.return}null!==e&&ki(t,e,n,r),t.flags|=262144}function Ei(e){for(e=e.firstContext;null!==e;){if(!Qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Si(e){yi=e,vi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ci(e){return Ti(yi,e)}function Ai(e,t){return null===yi&&Si(e),Ti(e,t)}function Ti(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===vi){if(null===e)throw Error(a(308));vi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vi=vi.next=t;return n}var Fi="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ri=r.unstable_scheduleCallback,_i=r.unstable_NormalPriority,Ii={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pi(){return{controller:new Fi,data:new Map,refCount:0}}function Mi(e){e.refCount--,0===e.refCount&&Ri(_i,function(){e.controller.abort()})}var Ni=null,ji=0,Bi=0,Oi=null;function Li(){if(0===--ji&&null!==Ni){null!==Oi&&(Oi.status="fulfilled");var e=Ni;Ni=null,Bi=0,Oi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Wi=M.S;M.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ni){var n=Ni=[];ji=0,Bi=Fc(),Oi={status:"pending",value:void 0,then:function(e){n.push(e)}}}ji++,t.then(Li,Li)}(0,t),null!==Wi&&Wi(e,t)};var qi=L(null);function Ui(){var e=qi.current;return null!==e?e:ru.pooledCache}function zi(e,t){q(qi,null===t?qi.current:t.pool)}function Hi(){var e=Ui();return null===e?null:{parent:Ii._currentValue,pool:e}}var Vi=Error(a(460)),Ki=Error(a(474)),Yi=Error(a(542)),Gi={then:function(){}};function Qi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Zi(){}function Xi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Zi,Zi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e;default:if("string"===typeof t.status)t.then(Zi,Zi);else{if(null!==(e=ru)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e}throw Ji=t,Vi}}var Ji=null;function $i(){if(null===Ji)throw Error(a(459));var e=Ji;return Ji=null,e}function eo(e){if(e===Vi||e===Yi)throw Error(a(483))}var to=!1;function no(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function io(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Pr(e),Ir(e,null,n),t}return Fr(e,r,t,n),Pr(e)}function ao(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ae(e,n)}}function so(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var lo=!1;function uo(){if(lo){if(null!==Oi)throw Oi}}function co(e,t,n,r){lo=!1;var i=e.updateQueue;to=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(a=0,c=u=l=null,s=o;;){var p=-536870913&s.lane,m=p!==s.lane;if(m?(ou&p)===p:(r&p)===p){0!==p&&p===Bi&&(lo=!0),null!==c&&(c=c.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var f=e,g=s;p=t;var y=n;switch(g.tag){case 1:if("function"===typeof(f=g.payload)){d=f.call(y,d,p);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(p="function"===typeof(f=g.payload)?f.call(y,d,p):f)||void 0===p)break e;d=h({},d,p);break e;case 2:to=!0}}null!==(p=s.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=i.callbacks)?i.callbacks=[p]:m.push(p))}else m={lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=m,l=d):c=c.next=m,a|=p;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(m=s).next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null===o&&(i.shared.lanes=0),pu|=a,e.lanes=a,e.memoizedState=d}}function ho(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function po(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ho(n[e],t)}var mo=L(null),fo=L(0);function go(e,t){q(fo,e=du),q(mo,t),du=e|t.baseLanes}function yo(){q(fo,du),q(mo,mo.current)}function vo(){du=fo.current,W(mo),W(fo)}var bo=0,wo=null,Do=null,ko=null,xo=!1,Eo=!1,So=!1,Co=0,Ao=0,To=null,Fo=0;function Ro(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qn(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){return bo=o,wo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,M.H=null===e||null===e.memoizedState?Ka:Ya,So=!1,o=n(r,i),So=!1,Eo&&(o=Mo(t,n,r,i)),Po(e),o}function Po(e){M.H=Va;var t=null!==Do&&null!==Do.next;if(bo=0,ko=Do=wo=null,xo=!1,Ao=0,To=null,t)throw Error(a(300));null===e||As||null!==(e=e.dependencies)&&Ei(e)&&(As=!0)}function Mo(e,t,n,r){wo=e;var i=0;do{if(Eo&&(To=null),Ao=0,Eo=!1,25<=i)throw Error(a(301));if(i+=1,ko=Do=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}M.H=Ga,o=t(n,r)}while(Eo);return o}function No(){var e=M.H,t=e.useState()[0];return t="function"===typeof t.then?qo(t):t,e=e.useState()[0],(null!==Do?Do.memoizedState:null)!==e&&(wo.flags|=1024),t}function jo(){var e=0!==Co;return Co=0,e}function Bo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Oo(e){if(xo){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}xo=!1}bo=0,ko=Do=wo=null,Eo=!1,Ao=Co=0,To=null}function Lo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ko?wo.memoizedState=ko=e:ko=ko.next=e,ko}function Wo(){if(null===Do){var e=wo.alternate;e=null!==e?e.memoizedState:null}else e=Do.next;var t=null===ko?wo.memoizedState:ko.next;if(null!==t)ko=t,Do=e;else{if(null===e){if(null===wo.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(Do=e).memoizedState,baseState:Do.baseState,baseQueue:Do.baseQueue,queue:Do.queue,next:null},null===ko?wo.memoizedState=ko=e:ko=ko.next=e}return ko}function qo(e){var t=Ao;return Ao+=1,null===To&&(To=[]),e=Xi(To,e,t),t=wo,null===(null===ko?t.memoizedState:ko.next)&&(t=t.alternate,M.H=null===t||null===t.memoizedState?Ka:Ya),e}function Uo(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return qo(e);if(e.$$typeof===D)return Ci(e)}throw Error(a(438,String(e)))}function zo(e){var t=null,n=wo.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=wo.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},wo.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=T;return t.index++,n}function Ho(e,t){return"function"===typeof t?t(e):t}function Vo(e){return Ko(Wo(),Do,e)}function Ko(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var i=e.baseQueue,o=r.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}t.baseQueue=i=o,r.pending=null}if(o=e.baseState,null===i)e.memoizedState=o;else{var l=s=null,u=null,c=t=i.next,d=!1;do{var h=-536870913&c.lane;if(h!==c.lane?(ou&h)===h:(bo&h)===h){var p=c.revertLane;if(0===p)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===Bi&&(d=!0);else{if((bo&p)===p){c=c.next,p===Bi&&(d=!0);continue}h={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=h,s=o):u=u.next=h,wo.lanes|=p,pu|=p}h=c.action,So&&n(o,h),o=c.hasEagerState?c.eagerState:n(o,h)}else p={lane:h,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=p,s=o):u=u.next=p,wo.lanes|=h,pu|=h;c=c.next}while(null!==c&&c!==t);if(null===u?s=o:u.next=l,!Qn(o,e.memoizedState)&&(As=!0,d&&null!==(n=Oi)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=u,r.lastRenderedState=o}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Yo(e){var t=Wo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);Qn(o,t.memoizedState)||(As=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Go(e,t,n){var r=wo,i=Wo(),o=oi;if(o){if(void 0===n)throw Error(a(407));n=n()}else n=t();var s=!Qn((Do||i).memoizedState,n);if(s&&(i.memoizedState=n,As=!0),i=i.queue,ya(2048,8,Xo.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||null!==ko&&1&ko.memoizedState.tag){if(r.flags|=2048,ma(9,{destroy:void 0,resource:void 0},Zo.bind(null,r,i,n,t),null),null===ru)throw Error(a(349));o||0!==(124&bo)||Qo(r,t,n)}return n}function Qo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=wo.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},wo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Zo(e,t,n,r){t.value=n,t.getSnapshot=r,Jo(t)&&$o(e)}function Xo(e,t,n){return n(function(){Jo(t)&&$o(e)})}function Jo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qn(e,n)}catch(r){return!0}}function $o(e){var t=_r(e,2);null!==t&&ju(t,e,2)}function ea(e){var t=Lo();if("function"===typeof e){var n=e;if(e=n(),So){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:e},t}function ta(e,t,n,r){return e.baseState=n,Ko(e,Do,"function"===typeof r?r:Ho)}function na(e,t,n,r,i){if(Ua(e))throw Error(a(485));if(null!==(e=t.action)){var o={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==M.T?n(!0):o.isTransition=!1,r(o),null===(n=t.pending)?(o.next=t.pending=o,ra(t,o)):(o.next=n.next,t.pending=n.next=o)}}function ra(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var o=M.T,a={};M.T=a;try{var s=n(i,r),l=M.S;null!==l&&l(a,s),ia(e,t,s)}catch(u){aa(e,t,u)}finally{M.T=o}}else try{ia(e,t,o=n(i,r))}catch(c){aa(e,t,c)}}function ia(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){oa(e,t,n)},function(n){return aa(e,t,n)}):oa(e,t,n)}function oa(e,t,n){t.status="fulfilled",t.value=n,sa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ra(e,n)))}function aa(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,sa(t),t=t.next}while(t!==r)}e.action=null}function sa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function la(e,t){return t}function ua(e,t){if(oi){var n=ru.formState;if(null!==n){e:{var r=wo;if(oi){if(ii){t:{for(var i=ii,o=si;8!==i.nodeType;){if(!o){i=null;break t}if(null===(i=yd(i.nextSibling))){i=null;break t}}i="F!"===(o=i.data)||"F"===o?i:null}if(i){ii=yd(i.nextSibling),r="F!"===i.data;break e}}ui(r)}r=!1}r&&(t=n[0])}}return(n=Lo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:t},n.queue=r,n=La.bind(null,wo,r),r.dispatch=n,r=ea(!1),o=qa.bind(null,wo,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Lo()).queue=i,n=na.bind(null,wo,i,o,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function ca(e){return da(Wo(),Do,e)}function da(e,t,n){if(t=Ko(e,t,la)[0],e=Vo(Ho)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=qo(t)}catch(a){if(a===Vi)throw Yi;throw a}else r=t;var i=(t=Wo()).queue,o=i.dispatch;return n!==t.memoizedState&&(wo.flags|=2048,ma(9,{destroy:void 0,resource:void 0},ha.bind(null,i,n),null)),[r,o,e]}function ha(e,t){e.action=t}function pa(e){var t=Wo(),n=Do;if(null!==n)return da(t,n,e);Wo(),t=t.memoizedState;var r=(n=Wo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ma(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=wo.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},wo.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function fa(){return Wo().memoizedState}function ga(e,t,n,r){var i=Lo();r=void 0===r?null:r,wo.flags|=e,i.memoizedState=ma(1|t,{destroy:void 0,resource:void 0},n,r)}function ya(e,t,n,r){var i=Wo();r=void 0===r?null:r;var o=i.memoizedState.inst;null!==Do&&null!==r&&_o(r,Do.memoizedState.deps)?i.memoizedState=ma(t,o,n,r):(wo.flags|=e,i.memoizedState=ma(1|t,o,n,r))}function va(e,t){ga(8390656,8,e,t)}function ba(e,t){ya(2048,8,e,t)}function wa(e,t){return ya(4,2,e,t)}function Da(e,t){return ya(4,4,e,t)}function ka(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function xa(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ya(4,4,ka.bind(null,t,e),n)}function Ea(){}function Sa(e,t){var n=Wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ca(e,t){var n=Wo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&_o(t,r[1]))return r[0];if(r=e(),So){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function Aa(e,t,n){return void 0===n||0!==(1073741824&bo)?e.memoizedState=t:(e.memoizedState=n,e=Nu(),wo.lanes|=e,pu|=e,n)}function Ta(e,t,n,r){return Qn(n,t)?n:null!==mo.current?(e=Aa(e,n,r),Qn(e,t)||(As=!0),e):0===(42&bo)?(As=!0,e.memoizedState=n):(e=Nu(),wo.lanes|=e,pu|=e,t)}function Fa(e,t,n,r,i){var o=N.p;N.p=0!==o&&8>o?o:8;var a=M.T,s={};M.T=s,qa(e,!1,t,n);try{var l=i(),u=M.S;if(null!==u&&u(s,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r);Wa(e,t,c,Mu())}else Wa(e,t,r,Mu())}catch(d){Wa(e,t,{then:function(){},status:"rejected",reason:d},Mu())}finally{N.p=o,M.T=a}}function Ra(){}function _a(e,t,n,r){if(5!==e.tag)throw Error(a(476));var i=Ia(e).queue;Fa(e,i,t,j,null===n?Ra:function(){return Pa(e),n(r)})}function Ia(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:j},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Pa(e){Wa(e,Ia(e).next.queue,{},Mu())}function Ma(){return Ci(Gd)}function Na(){return Wo().memoizedState}function ja(){return Wo().memoizedState}function Ba(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Mu(),r=oo(t,e=io(n),n);return null!==r&&(ju(r,t,n),ao(r,t,n)),t={cache:Pi()},void(e.payload=t)}t=t.return}}function Oa(e,t,n){var r=Mu();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ua(e)?za(t,n):null!==(n=Rr(e,t,n,r))&&(ju(n,e,r),Ha(n,t,r))}function La(e,t,n){Wa(e,t,n,Mu())}function Wa(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ua(e))za(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Qn(s,a))return Fr(e,t,i,0),null===ru&&Tr(),!1}catch(l){}if(null!==(n=Rr(e,t,i,r)))return ju(n,e,r),Ha(n,t,r),!0}return!1}function qa(e,t,n,r){if(r={lane:2,revertLane:Fc(),action:r,hasEagerState:!1,eagerState:null,next:null},Ua(e)){if(t)throw Error(a(479))}else null!==(t=Rr(e,n,r,2))&&ju(t,e,2)}function Ua(e){var t=e.alternate;return e===wo||null!==t&&t===wo}function za(e,t){Eo=xo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ha(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ae(e,n)}}var Va={readContext:Ci,use:Uo,useCallback:Ro,useContext:Ro,useEffect:Ro,useImperativeHandle:Ro,useLayoutEffect:Ro,useInsertionEffect:Ro,useMemo:Ro,useReducer:Ro,useRef:Ro,useState:Ro,useDebugValue:Ro,useDeferredValue:Ro,useTransition:Ro,useSyncExternalStore:Ro,useId:Ro,useHostTransitionStatus:Ro,useFormState:Ro,useActionState:Ro,useOptimistic:Ro,useMemoCache:Ro,useCacheRefresh:Ro},Ka={readContext:Ci,use:Uo,useCallback:function(e,t){return Lo().memoizedState=[e,void 0===t?null:t],e},useContext:Ci,useEffect:va,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ga(4194308,4,ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ga(4194308,4,e,t)},useInsertionEffect:function(e,t){ga(4,2,e,t)},useMemo:function(e,t){var n=Lo();t=void 0===t?null:t;var r=e();if(So){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Lo();if(void 0!==n){var i=n(t);if(So){he(!0);try{n(t)}finally{he(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Oa.bind(null,wo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Lo().memoizedState=e},useState:function(e){var t=(e=ea(e)).queue,n=La.bind(null,wo,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ea,useDeferredValue:function(e,t){return Aa(Lo(),e,t)},useTransition:function(){var e=ea(!1);return e=Fa.bind(null,wo,e.queue,!0,!1),Lo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=wo,i=Lo();if(oi){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===ru)throw Error(a(349));0!==(124&ou)||Qo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,va(Xo.bind(null,r,o,e),[e]),r.flags|=2048,ma(9,{destroy:void 0,resource:void 0},Zo.bind(null,r,o,n,t),null),n},useId:function(){var e=Lo(),t=ru.identifierPrefix;if(oi){var n=Jr;t="\xab"+t+"R"+(n=(Xr&~(1<<32-pe(Xr)-1)).toString(32)+n),0<(n=Co++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Fo++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Ma,useFormState:ua,useActionState:ua,useOptimistic:function(e){var t=Lo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=qa.bind(null,wo,!0,n),n.dispatch=t,[e,t]},useMemoCache:zo,useCacheRefresh:function(){return Lo().memoizedState=Ba.bind(null,wo)}},Ya={readContext:Ci,use:Uo,useCallback:Sa,useContext:Ci,useEffect:ba,useImperativeHandle:xa,useInsertionEffect:wa,useLayoutEffect:Da,useMemo:Ca,useReducer:Vo,useRef:fa,useState:function(){return Vo(Ho)},useDebugValue:Ea,useDeferredValue:function(e,t){return Ta(Wo(),Do.memoizedState,e,t)},useTransition:function(){var e=Vo(Ho)[0],t=Wo().memoizedState;return["boolean"===typeof e?e:qo(e),t]},useSyncExternalStore:Go,useId:Na,useHostTransitionStatus:Ma,useFormState:ca,useActionState:ca,useOptimistic:function(e,t){return ta(Wo(),0,e,t)},useMemoCache:zo,useCacheRefresh:ja},Ga={readContext:Ci,use:Uo,useCallback:Sa,useContext:Ci,useEffect:ba,useImperativeHandle:xa,useInsertionEffect:wa,useLayoutEffect:Da,useMemo:Ca,useReducer:Yo,useRef:fa,useState:function(){return Yo(Ho)},useDebugValue:Ea,useDeferredValue:function(e,t){var n=Wo();return null===Do?Aa(n,e,t):Ta(n,Do.memoizedState,e,t)},useTransition:function(){var e=Yo(Ho)[0],t=Wo().memoizedState;return["boolean"===typeof e?e:qo(e),t]},useSyncExternalStore:Go,useId:Na,useHostTransitionStatus:Ma,useFormState:pa,useActionState:pa,useOptimistic:function(e,t){var n=Wo();return null!==Do?ta(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:zo,useCacheRefresh:ja},Qa=null,Za=0;function Xa(e){var t=Za;return Za+=1,null===Qa&&(Qa=[]),Xi(Qa,e,t)}function Ja(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function $a(e,t){if(t.$$typeof===p)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function es(e){return(0,e._init)(e._payload)}function ts(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Or(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Ur(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===C&&es(o)===t.type)?(Ja(t=i(t,n.props),n),t.return=e,t):(Ja(t=Wr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=qr(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Ur(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return Ja(n=Wr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case f:return(t=zr(t,e.mode,n)).return=e,t;case C:return h(e,t=(0,t._init)(t._payload),n)}if(P(t)||R(t))return(t=qr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Xa(t),n);if(t.$$typeof===D)return h(e,Ai(e,t),n);$a(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===i?u(e,t,n,r):null;case f:return n.key===i?c(e,t,n,r):null;case C:return p(e,t,n=(i=n._init)(n._payload),r)}if(P(n)||R(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return p(e,t,Xa(n),r);if(n.$$typeof===D)return p(e,t,Ai(e,n),r);$a(e,n)}return null}function y(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case f:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case C:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(P(r)||R(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return y(e,t,n,Xa(r),i);if(r.$$typeof===D)return y(e,t,n,Ai(t,r),i);$a(t,r)}return null}function v(l,u,c,d){if("object"===typeof c&&null!==c&&c.type===g&&null===c.key&&(c=c.props.children),"object"===typeof c&&null!==c){switch(c.$$typeof){case m:e:{for(var b=c.key;null!==u;){if(u.key===b){if((b=c.type)===g){if(7===u.tag){n(l,u.sibling),(d=i(u,c.props.children)).return=l,l=d;break e}}else if(u.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===C&&es(b)===u.type){n(l,u.sibling),Ja(d=i(u,c.props),c),d.return=l,l=d;break e}n(l,u);break}t(l,u),u=u.sibling}c.type===g?((d=qr(c.props.children,l.mode,d,c.key)).return=l,l=d):(Ja(d=Wr(c.type,c.key,c.props,null,l.mode,d),c),d.return=l,l=d)}return s(l);case f:e:{for(b=c.key;null!==u;){if(u.key===b){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(d=i(u,c.children||[])).return=l,l=d;break e}n(l,u);break}t(l,u),u=u.sibling}(d=zr(c,l.mode,d)).return=l,l=d}return s(l);case C:return v(l,u,c=(b=c._init)(c._payload),d)}if(P(c))return function(i,a,s,l){for(var u=null,c=null,d=a,m=a=0,f=null;null!==d&&m<s.length;m++){d.index>m?(f=d,d=null):f=d.sibling;var g=p(i,d,s[m],l);if(null===g){null===d&&(d=f);break}e&&d&&null===g.alternate&&t(i,d),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g,d=f}if(m===s.length)return n(i,d),oi&&$r(i,m),u;if(null===d){for(;m<s.length;m++)null!==(d=h(i,s[m],l))&&(a=o(d,a,m),null===c?u=d:c.sibling=d,c=d);return oi&&$r(i,m),u}for(d=r(d);m<s.length;m++)null!==(f=y(d,i,m,s[m],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?m:f.key),a=o(f,a,m),null===c?u=f:c.sibling=f,c=f);return e&&d.forEach(function(e){return t(i,e)}),oi&&$r(i,m),u}(l,u,c,d);if(R(c)){if("function"!==typeof(b=R(c)))throw Error(a(150));return function(i,s,l,u){if(null==l)throw Error(a(151));for(var c=null,d=null,m=s,f=s=0,g=null,v=l.next();null!==m&&!v.done;f++,v=l.next()){m.index>f?(g=m,m=null):g=m.sibling;var b=p(i,m,v.value,u);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,f),null===d?c=b:d.sibling=b,d=b,m=g}if(v.done)return n(i,m),oi&&$r(i,f),c;if(null===m){for(;!v.done;f++,v=l.next())null!==(v=h(i,v.value,u))&&(s=o(v,s,f),null===d?c=v:d.sibling=v,d=v);return oi&&$r(i,f),c}for(m=r(m);!v.done;f++,v=l.next())null!==(v=y(m,i,f,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?f:v.key),s=o(v,s,f),null===d?c=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(i,e)}),oi&&$r(i,f),c}(l,u,c=b.call(c),d)}if("function"===typeof c.then)return v(l,u,Xa(c),d);if(c.$$typeof===D)return v(l,u,Ai(l,c),d);$a(l,c)}return"string"===typeof c&&""!==c||"number"===typeof c||"bigint"===typeof c?(c=""+c,null!==u&&6===u.tag?(n(l,u.sibling),(d=i(u,c)).return=l,l=d):(n(l,u),(d=Ur(c,l.mode,d)).return=l,l=d),s(l)):n(l,u)}return function(e,t,n,r){try{Za=0;var i=v(e,t,n,r);return Qa=null,i}catch(a){if(a===Vi||a===Yi)throw a;var o=jr(29,a,null,e.mode);return o.lanes=r,o.return=e,o}}}var ns=ts(!0),rs=ts(!1),is=L(null),os=null;function as(e){var t=e.alternate;q(cs,1&cs.current),q(is,e),null===os&&(null===t||null!==mo.current||null!==t.memoizedState)&&(os=e)}function ss(e){if(22===e.tag){if(q(cs,cs.current),q(is,e),null===os){var t=e.alternate;null!==t&&null!==t.memoizedState&&(os=e)}}else ls()}function ls(){q(cs,cs.current),q(is,is.current)}function us(e){W(is),os===e&&(os=null),W(cs)}var cs=L(0);function ds(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function hs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ps={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Mu(),i=io(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=oo(e,i,r))&&(ju(t,e,r),ao(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Mu(),i=io(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=oo(e,i,r))&&(ju(t,e,r),ao(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Mu(),r=io(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=oo(e,r,n))&&(ju(t,e,n),ao(t,e,n))}};function ms(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Zn(n,r)||!Zn(i,o))}function fs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ps.enqueueReplaceState(t,t.state,null)}function gs(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var ys="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function vs(e){ys(e)}function bs(e){console.error(e)}function ws(e){ys(e)}function Ds(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function ks(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function xs(e,t,n){return(n=io(n)).tag=3,n.payload={element:null},n.callback=function(){Ds(e,t)},n}function Es(e){return(e=io(e)).tag=3,e}function Ss(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var o=r.value;e.payload=function(){return i(o)},e.callback=function(){ks(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){ks(t,n,r),"function"!==typeof i&&(null===Eu?Eu=new Set([this]):Eu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Cs=Error(a(461)),As=!1;function Ts(e,t,n,r){t.child=null===e?rs(t,null,n,r):ns(t,e.child,n,r)}function Fs(e,t,n,r,i){n=n.render;var o=t.ref;if("ref"in r){var a={};for(var s in r)"ref"!==s&&(a[s]=r[s])}else a=r;return Si(t),r=Io(e,t,n,a,o,i),s=jo(),null===e||As?(oi&&s&&ti(t),t.flags|=1,Ts(e,t,r,i),t.child):(Bo(e,t,i),Qs(e,t,i))}function Rs(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Br(o)||void 0!==o.defaultProps||null!==n.compare?((e=Wr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,_s(e,t,o,r,i))}if(o=e.child,!Zs(e,i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:Zn)(a,r)&&e.ref===t.ref)return Qs(e,t,i)}return t.flags|=1,(e=Or(o,r)).ref=t.ref,e.return=t,t.child=e}function _s(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(Zn(o,r)&&e.ref===t.ref){if(As=!1,t.pendingProps=r=o,!Zs(e,i))return t.lanes=e.lanes,Qs(e,t,i);0!==(131072&e.flags)&&(As=!0)}}return Ns(e,t,n,r,i)}function Is(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==o?o.baseLanes|n:n,null!==e){for(i=t.child=e.child,o=0;null!==i;)o=o|i.lanes|i.childLanes,i=i.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return Ps(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Ps(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&zi(0,null!==o?o.cachePool:null),null!==o?go(t,o):yo(),ss(t)}else null!==o?(zi(0,o.cachePool),go(t,o),ls(),t.memoizedState=null):(null!==e&&zi(0,null),yo(),ls());return Ts(e,t,i,n),t.child}function Ps(e,t,n,r){var i=Ui();return i=null===i?null:{parent:Ii._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&zi(0,null),yo(),ss(t),null!==e&&xi(e,t,r,!0),null}function Ms(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ns(e,t,n,r,i){return Si(t),n=Io(e,t,n,r,void 0,i),r=jo(),null===e||As?(oi&&r&&ti(t),t.flags|=1,Ts(e,t,n,i),t.child):(Bo(e,t,i),Qs(e,t,i))}function js(e,t,n,r,i,o){return Si(t),t.updateQueue=null,n=Mo(t,r,n,i),Po(e),r=jo(),null===e||As?(oi&&r&&ti(t),t.flags|=1,Ts(e,t,n,o),t.child):(Bo(e,t,o),Qs(e,t,o))}function Bs(e,t,n,r,i){if(Si(t),null===t.stateNode){var o=Mr,a=n.contextType;"object"===typeof a&&null!==a&&(o=Ci(a)),o=new n(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=ps,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},no(t),a=n.contextType,o.context="object"===typeof a&&null!==a?Ci(a):Mr,o.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(hs(t,n,a,r),o.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(a=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),a!==o.state&&ps.enqueueReplaceState(o,o.state,null),co(t,r,o,i),uo(),o.state=t.memoizedState),"function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var s=t.memoizedProps,l=gs(n,s);o.props=l;var u=o.context,c=n.contextType;a=Mr,"object"===typeof c&&null!==c&&(a=Ci(c));var d=n.getDerivedStateFromProps;c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate,s=t.pendingProps!==s,c||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s||u!==a)&&fs(t,o,r,a),to=!1;var h=t.memoizedState;o.state=h,co(t,r,o,i),uo(),u=t.memoizedState,s||h!==u||to?("function"===typeof d&&(hs(t,n,d,r),u=t.memoizedState),(l=to||ms(t,n,l,r,h,u,a))?(c||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=a,r=l):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ro(e,t),c=gs(n,a=t.memoizedProps),o.props=c,d=t.pendingProps,h=o.context,u=n.contextType,l=Mr,"object"===typeof u&&null!==u&&(l=Ci(u)),(u="function"===typeof(s=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&fs(t,o,r,l),to=!1,h=t.memoizedState,o.state=h,co(t,r,o,i),uo();var p=t.memoizedState;a!==d||h!==p||to||null!==e&&null!==e.dependencies&&Ei(e.dependencies)?("function"===typeof s&&(hs(t,n,s,r),p=t.memoizedState),(c=to||ms(t,n,c,r,h,p,l)||null!==e&&null!==e.dependencies&&Ei(e.dependencies))?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,Ms(e,t),r=0!==(128&t.flags),o||r?(o=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=ns(t,e.child,null,i),t.child=ns(t,null,n,i)):Ts(e,t,n,i),t.memoizedState=o.state,e=t.child):e=Qs(e,t,i),e}function Os(e,t,n,r){return pi(),t.flags|=256,Ts(e,t,n,r),t.child}var Ls={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ws(e){return{baseLanes:e,cachePool:Hi()}}function qs(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gu),e}function Us(e,t,n){var r,i=t.pendingProps,o=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&cs.current)),r&&(o=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(oi){if(o?as(t):ls(),oi){var l,u=ii;if(l=u){e:{for(l=u,u=si;8!==l.nodeType;){if(!u){u=null;break e}if(null===(l=yd(l.nextSibling))){u=null;break e}}u=l}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==Zr?{id:Xr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},(l=jr(18,null,null,0)).stateNode=u,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ui(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return gd(u)?t.lanes=32:t.lanes=536870912,null;us(t)}return u=i.children,i=i.fallback,o?(ls(),u=Hs({mode:"hidden",children:u},o=t.mode),i=qr(i,o,n,null),u.return=t,i.return=t,u.sibling=i,t.child=u,(o=t.child).memoizedState=Ws(n),o.childLanes=qs(e,r,n),t.memoizedState=Ls,i):(as(t),zs(t,u))}if(null!==(l=e.memoizedState)&&null!==(u=l.dehydrated)){if(s)256&t.flags?(as(t),t.flags&=-257,t=Vs(e,t,n)):null!==t.memoizedState?(ls(),t.child=e.child,t.flags|=128,t=null):(ls(),o=i.fallback,u=t.mode,i=Hs({mode:"visible",children:i.children},u),(o=qr(o,u,n,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,ns(t,e.child,null,n),(i=t.child).memoizedState=Ws(n),i.childLanes=qs(e,r,n),t.memoizedState=Ls,t=o);else if(as(t),gd(u)){if(r=u.nextSibling&&u.nextSibling.dataset)var c=r.dgst;r=c,(i=Error(a(419))).stack="",i.digest=r,fi({value:i,source:null,stack:null}),t=Vs(e,t,n)}else if(As||xi(e,t,n,!1),r=0!==(n&e.childLanes),As||r){if(null!==(r=ru)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:Te(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,_r(e,i),ju(r,e,i),Cs;"$?"===u.data||Yu(),t=Vs(e,t,n)}else"$?"===u.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=yd(u.nextSibling),ri=t,oi=!0,ai=null,si=!1,null!==e&&(Gr[Qr++]=Xr,Gr[Qr++]=Jr,Gr[Qr++]=Zr,Xr=e.id,Jr=e.overflow,Zr=t),(t=zs(t,i.children)).flags|=4096);return t}return o?(ls(),o=i.fallback,u=t.mode,c=(l=e.child).sibling,(i=Or(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==c?o=Or(c,o):(o=qr(o,u,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,null===(u=e.child.memoizedState)?u=Ws(n):(null!==(l=u.cachePool)?(c=Ii._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Hi(),u={baseLanes:u.baseLanes|n,cachePool:l}),o.memoizedState=u,o.childLanes=qs(e,r,n),t.memoizedState=Ls,i):(as(t),e=(n=e.child).sibling,(n=Or(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function zs(e,t){return(t=Hs({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Hs(e,t){return(e=jr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Vs(e,t,n){return ns(t,e.child,null,n),(e=zs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ks(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Di(e.return,t,n)}function Ys(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Gs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ts(e,t,r.children,n),0!==(2&(r=cs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ks(e,n,t);else if(19===e.tag)Ks(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(q(cs,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ds(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ys(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ds(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ys(t,!0,n,null,o);break;case"together":Ys(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pu|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(xi(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Or(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Or(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Zs(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ei(e))}function Xs(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)As=!0;else{if(!Zs(e,n)&&0===(128&t.flags))return As=!1,function(e,t,n){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),bi(0,Ii,e.memoizedState.cache),pi();break;case 27:case 5:G(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:bi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(as(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Us(e,t,n):(as(t),null!==(e=Qs(e,t,n))?e.sibling:null);as(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(xi(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Gs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),q(cs,cs.current),r)break;return null;case 22:case 23:return t.lanes=0,Is(e,t,n);case 24:bi(0,Ii,e.memoizedState.cache)}return Qs(e,t,n)}(e,t,n);As=0!==(131072&e.flags)}else As=!1,oi&&0!==(1048576&t.flags)&&ei(t,Yr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===k){t.tag=11,t=Fs(null,t,r,e,n);break e}if(i===S){t.tag=14,t=Rs(null,t,r,e,n);break e}}throw t=I(r)||r,Error(a(306,t,""))}Br(r)?(e=gs(r,e),t.tag=1,t=Bs(null,t,r,e,n)):(t.tag=0,t=Ns(null,t,r,e,n))}return t;case 0:return Ns(e,t,t.type,t.pendingProps,n);case 1:return Bs(e,t,r=t.type,i=gs(r,t.pendingProps),n);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var o=t.memoizedState;i=o.element,ro(e,t),co(t,r,null,n);var s=t.memoizedState;if(r=s.cache,bi(0,Ii,r),r!==o.cache&&ki(t,[Ii],n,!0),uo(),r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Os(e,t,r,n);break e}if(r!==i){fi(i=Er(Error(a(424)),t)),t=Os(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=yd(e.firstChild),ri=t,oi=!0,ai=null,si=!0,n=rs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===i){t=Qs(e,t,n);break e}Ts(e,t,r,n)}t=t.child}return t;case 26:return Ms(e,t),null===e?(n=Td(t.type,null,t.pendingProps,null))?t.memoizedState=n:oi||(n=t.type,e=t.pendingProps,(r=rd(H.current).createElement(n))[Ie]=t,r[Pe]=e,ed(r,n,e),Ve(r),t.stateNode=r):t.memoizedState=Td(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return G(t),null===e&&oi&&(r=t.stateNode=wd(t.type,t.pendingProps,H.current),ri=t,si=!0,i=ii,pd(t.type)?(vd=i,ii=yd(r.firstChild)):ii=i),Ts(e,t,t.pendingProps.children,n),Ms(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&oi&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Le])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===o)return e}if(null===(e=yd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,si))?(t.stateNode=r,ri=t,ii=yd(r.firstChild),si=!1,i=!0):i=!1),i||ui(t)),G(t),i=t.type,o=t.pendingProps,s=null!==e?e.memoizedProps:null,r=o.children,ad(i,o)?r=null:null!==s&&ad(i,s)&&(t.flags|=32),null!==t.memoizedState&&(i=Io(e,t,No,null,null,n),Gd._currentValue=i),Ms(e,t),Ts(e,t,r,n),t.child;case 6:return null===e&&oi&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(n,t.pendingProps,si))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ui(t)),null;case 13:return Us(e,t,n);case 4:return K(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ns(t,null,r,n):Ts(e,t,r,n),t.child;case 11:return Fs(e,t,t.type,t.pendingProps,n);case 7:return Ts(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ts(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,bi(0,t.type,r.value),Ts(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Si(t),r=r(i=Ci(i)),t.flags|=1,Ts(e,t,r,n),t.child;case 14:return Rs(e,t,t.type,t.pendingProps,n);case 15:return _s(e,t,t.type,t.pendingProps,n);case 19:return Gs(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Hs(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Or(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Is(e,t,n);case 24:return Si(t),r=Ci(Ii),null===e?(null===(i=Ui())&&(i=ru,o=Pi(),i.pooledCache=o,o.refCount++,null!==o&&(i.pooledCacheLanes|=n),i=o),t.memoizedState={parent:r,cache:i},no(t),bi(0,Ii,i)):(0!==(e.lanes&n)&&(ro(e,t),co(t,null,null,n),uo()),i=e.memoizedState,o=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),bi(0,Ii,r)):(r=o.cache,bi(0,Ii,r),r!==i.cache&&ki(t,[Ii],n,!0))),Ts(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Js(e){e.flags|=4}function $s(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!qd(t)){if(null!==(t=is.current)&&((4194048&ou)===ou?null!==os:(62914560&ou)!==ou&&0===(536870912&ou)||t!==os))throw Ji=Gi,Ki;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?xe():536870912,e.lanes|=t,yu|=t)}function tl(e,t){if(!oi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),wi(Ii),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hi(t)?Js(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,mi())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Js(t),null!==n?(nl(t),$s(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Js(t),nl(t),$s(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Js(t),nl(t),t.flags&=-16777217),null;case 27:Q(t),n=H.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Js(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}e=U.current,hi(t)?ci(t):(e=wd(i,r,n),t.stateNode=e,Js(t))}return nl(t),null;case 5:if(Q(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Js(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}if(e=U.current,hi(t))ci(t);else{switch(i=rd(H.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Ie]=t,e[Pe]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Js(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Js(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=H.current,hi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Ie]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Zc(e.nodeValue,n)))||ui(t)}else(e=rd(e).createTextNode(r))[Ie]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[Ie]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),i=!1}else i=mi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(us(t),t):(us(t),null)}if(us(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var o=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return Y(),null===e&&Wc(t.stateNode.containerInfo),nl(t),null;case 10:return wi(t.type),nl(t),null;case 19:if(W(cs),null===(i=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(o=i.rendering))if(r)tl(i,!1);else{if(0!==hu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=ds(e))){for(t.flags|=128,tl(i,!1),e=o.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Lr(n,e),n=n.sibling;return q(cs,1&cs.current|2),t.child}e=e.sibling}null!==i.tail&&te()>ku&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ds(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!oi)return nl(t),null}else 2*te()-i.renderingStartTime>ku&&536870912!==n&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=i.last)?e.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=cs.current,q(cs,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return us(t),vo(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&W(qi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),wi(Ii),nl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function il(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return wi(Ii),Y(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 13:if(us(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return W(cs),null;case 4:return Y(),null;case 10:return wi(t.type),null;case 22:case 23:return us(t),vo(),null!==e&&W(qi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return wi(Ii),null;default:return null}}function ol(e,t){switch(ni(t),t.tag){case 3:wi(Ii),Y();break;case 26:case 27:case 5:Q(t);break;case 4:Y();break;case 13:us(t);break;case 19:W(cs);break;case 10:wi(t.type);break;case 22:case 23:us(t),vo(),null!==e&&W(qi);break;case 24:wi(Ii)}}function al(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var o=n.create,a=n.inst;r=o(),a.destroy=r}n=n.next}while(n!==i)}}catch(s){cc(t,t.return,s)}}function sl(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var o=i.next;r=o;do{if((r.tag&e)===e){var a=r.inst,s=a.destroy;if(void 0!==s){a.destroy=void 0,i=t;var l=n,u=s;try{u()}catch(c){cc(i,l,c)}}}r=r.next}while(r!==o)}}catch(c){cc(t,t.return,c)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{po(t,n)}catch(r){cc(e,e.return,r)}}}function ul(e,t,n){n.props=gs(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){cc(e,t,r)}}function cl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){cc(e,t,i)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){cc(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(o){cc(e,t,o)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){cc(e,e.return,i)}}function pl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,o=null,s=null,l=null,u=null,c=null,d=null;for(m in n){var h=n[m];if(n.hasOwnProperty(m)&&null!=h)switch(m){case"checked":case"value":break;case"defaultValue":u=h;default:r.hasOwnProperty(m)||Jc(e,t,m,null,r,h)}}for(var p in r){var m=r[p];if(h=n[p],r.hasOwnProperty(p)&&(null!=m||null!=h))switch(p){case"type":o=m;break;case"name":i=m;break;case"checked":c=m;break;case"defaultChecked":d=m;break;case"value":s=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(a(137,t));break;default:m!==h&&Jc(e,t,p,m,r,h)}}return void gt(e,s,l,u,c,d,o,i);case"select":for(o in m=s=l=p=null,n)if(u=n[o],n.hasOwnProperty(o)&&null!=u)switch(o){case"value":break;case"multiple":m=u;default:r.hasOwnProperty(o)||Jc(e,t,o,null,r,u)}for(i in r)if(o=r[i],u=n[i],r.hasOwnProperty(i)&&(null!=o||null!=u))switch(i){case"value":p=o;break;case"defaultValue":l=o;break;case"multiple":s=o;default:o!==u&&Jc(e,t,i,o,r,u)}return t=l,n=s,r=m,void(null!=p?bt(e,!!n,p,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in m=p=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Jc(e,t,l,null,r,i)}for(s in r)if(i=r[s],o=n[s],r.hasOwnProperty(s)&&(null!=i||null!=o))switch(s){case"value":p=i;break;case"defaultValue":m=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(a(91));break;default:i!==o&&Jc(e,t,s,i,r,o)}return void wt(e,p,m);case"option":for(var f in n)if(p=n[f],n.hasOwnProperty(f)&&null!=p&&!r.hasOwnProperty(f))if("selected"===f)e.selected=!1;else Jc(e,t,f,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(null!=p||null!=m))if("selected"===u)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else Jc(e,t,u,p,r,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g)&&Jc(e,t,g,null,r,p);for(c in r)if(p=r[c],m=n[c],r.hasOwnProperty(c)&&p!==m&&(null!=p||null!=m))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:Jc(e,t,c,p,r,m)}return;default:if(Ct(t)){for(var y in n)p=n[y],n.hasOwnProperty(y)&&void 0!==p&&!r.hasOwnProperty(y)&&$c(e,t,y,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||void 0===p&&void 0===m||$c(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&null!=p&&!r.hasOwnProperty(v)&&Jc(e,t,v,null,r,p);for(h in r)p=r[h],m=n[h],!r.hasOwnProperty(h)||p===m||null==p&&null==m||Jc(e,t,h,p,r,m)}(r,e.type,n,t),r[Pe]=t}catch(i){cc(e,e.return,i)}}function ml(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&pd(e.type)||4===e.tag}function fl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&pd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xc));else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ed(t,r,n),t[Ie]=e,t[Pe]=n}catch(o){cc(e,e.return,o)}}var bl=!1,wl=!1,Dl=!1,kl="function"===typeof WeakSet?WeakSet:Set,xl=null;function El(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Bl(e,n),4&r&&al(5,n);break;case 1:if(Bl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){cc(n,n.return,a)}else{var i=gs(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){cc(n,n.return,s)}}64&r&&ll(n),512&r&&cl(n,n.return);break;case 3:if(Bl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{po(e,t)}catch(a){cc(n,n.return,a)}}break;case 27:null===t&&4&r&&vl(n);case 26:case 5:Bl(e,n),null===t&&4&r&&hl(n),512&r&&cl(n,n.return);break;case 12:Bl(e,n);break;case 13:Bl(e,n),4&r&&Rl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=mc.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||bl)){t=null!==t&&null!==t.memoizedState||wl,i=bl;var o=wl;bl=r,(wl=t)&&!o?Ll(e,n,0!==(8772&n.subtreeFlags)):Bl(e,n),bl=i,wl=o}break;case 30:break;default:Bl(e,n)}}function Sl(e){var t=e.alternate;null!==t&&(e.alternate=null,Sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&We(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Cl=null,Al=!1;function Tl(e,t,n){for(n=n.child;null!==n;)Fl(e,t,n),n=n.sibling}function Fl(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ce,n)}catch(o){}switch(n.tag){case 26:wl||dl(n,t),Tl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:wl||dl(n,t);var r=Cl,i=Al;pd(n.type)&&(Cl=n.stateNode,Al=!1),Tl(e,t,n),Dd(n.stateNode),Cl=r,Al=i;break;case 5:wl||dl(n,t);case 6:if(r=Cl,i=Al,Cl=null,Tl(e,t,n),Al=i,null!==(Cl=r))if(Al)try{(9===Cl.nodeType?Cl.body:"HTML"===Cl.nodeName?Cl.ownerDocument.body:Cl).removeChild(n.stateNode)}catch(a){cc(n,t,a)}else try{Cl.removeChild(n.stateNode)}catch(a){cc(n,t,a)}break;case 18:null!==Cl&&(Al?(md(9===(e=Cl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Ah(e)):md(Cl,n.stateNode));break;case 4:r=Cl,i=Al,Cl=n.stateNode.containerInfo,Al=!0,Tl(e,t,n),Cl=r,Al=i;break;case 0:case 11:case 14:case 15:wl||sl(2,n,t),wl||sl(4,n,t),Tl(e,t,n);break;case 1:wl||(dl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&ul(n,t,r)),Tl(e,t,n);break;case 21:Tl(e,t,n);break;case 22:wl=(r=wl)||null!==n.memoizedState,Tl(e,t,n),wl=r;break;default:Tl(e,t,n)}}function Rl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ah(e)}catch(n){cc(t,t.return,n)}}function _l(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new kl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new kl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var r=fc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Il(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(pd(l.type)){Cl=l.stateNode,Al=!1;break e}break;case 5:Cl=l.stateNode,Al=!1;break e;case 3:case 4:Cl=l.stateNode.containerInfo,Al=!0;break e}l=l.return}if(null===Cl)throw Error(a(160));Fl(o,s,i),Cl=null,Al=!1,null!==(o=i.alternate)&&(o.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ml(t,e),t=t.sibling}var Pl=null;function Ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Il(t,e),Nl(e),4&r&&(sl(3,e,e.return),al(3,e),sl(5,e,e.return));break;case 1:Il(t,e),Nl(e),512&r&&(wl||null===n||dl(n,n.return)),64&r&&bl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Pl;if(Il(t,e),Nl(e),512&r&&(wl||null===n||dl(n,n.return)),4&r){var o=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(o=i.getElementsByTagName("title")[0])||o[Le]||o[Ie]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=i.createElement(r),i.head.insertBefore(o,i.querySelector("head > title"))),ed(o,r,n),o[Ie]=e,Ve(o),r=o;break e;case"link":var s=Ld("link","href",i).get(r+(n.href||""));if(s)for(var l=0;l<s.length;l++)if((o=s[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&o.getAttribute("rel")===(null==n.rel?null:n.rel)&&o.getAttribute("title")===(null==n.title?null:n.title)&&o.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(l,1);break t}ed(o=i.createElement(r),r,n),i.head.appendChild(o);break;case"meta":if(s=Ld("meta","content",i).get(r+(n.content||"")))for(l=0;l<s.length;l++)if((o=s[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&o.getAttribute("name")===(null==n.name?null:n.name)&&o.getAttribute("property")===(null==n.property?null:n.property)&&o.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&o.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(l,1);break t}ed(o=i.createElement(r),r,n),i.head.appendChild(o);break;default:throw Error(a(468,r))}o[Ie]=e,Ve(o),r=o}e.stateNode=r}else Wd(i,e.type,e.stateNode);else e.stateNode=Md(i,r,e.memoizedProps);else o!==r?(null===o?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):o.count--,null===r?Wd(i,e.type,e.stateNode):Md(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&pl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Il(t,e),Nl(e),512&r&&(wl||null===n||dl(n,n.return)),null!==n&&4&r&&pl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Il(t,e),Nl(e),512&r&&(wl||null===n||dl(n,n.return)),32&e.flags){i=e.stateNode;try{kt(i,"")}catch(m){cc(e,e.return,m)}}4&r&&null!=e.stateNode&&pl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(Dl=!0);break;case 6:if(Il(t,e),Nl(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){cc(e,e.return,m)}}break;case 3:if(Od=null,i=Pl,Pl=Ed(t.containerInfo),Il(t,e),Pl=i,Nl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ah(t.containerInfo)}catch(m){cc(e,e.return,m)}Dl&&(Dl=!1,jl(e));break;case 4:r=Pl,Pl=Ed(e.stateNode.containerInfo),Il(t,e),Nl(e),Pl=r;break;case 12:default:Il(t,e),Nl(e);break;case 13:Il(t,e),Nl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Du=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,_l(e,r)));break;case 22:i=null!==e.memoizedState;var u=null!==n&&null!==n.memoizedState,c=bl,d=wl;if(bl=c||i,wl=d||u,Il(t,e),wl=d,bl=c,Nl(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||u||bl||wl||Ol(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){u=n=t;try{if(o=u.stateNode,i)"function"===typeof(s=o.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=u.stateNode;var h=u.memoizedProps.style,p=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(m){cc(u,u.return,m)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=i?"":u.memoizedProps}catch(m){cc(u,u.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,_l(e,n))));break;case 19:Il(t,e),Nl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,_l(e,r)));case 30:case 21:}}function Nl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(ml(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var i=n.stateNode;yl(e,fl(e),i);break;case 5:var o=n.stateNode;32&n.flags&&(kt(o,""),n.flags&=-33),yl(e,fl(e),o);break;case 3:case 4:var s=n.stateNode.containerInfo;gl(e,fl(e),s);break;default:throw Error(a(161))}}catch(l){cc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function jl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;jl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Bl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)El(e,t.alternate,t),t=t.sibling}function Ol(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sl(4,t,t.return),Ol(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&ul(t,t.return,n),Ol(t);break;case 27:Dd(t.stateNode);case 26:case 5:dl(t,t.return),Ol(t);break;case 22:null===t.memoizedState&&Ol(t);break;default:Ol(t)}e=e.sibling}}function Ll(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,o=t,a=o.flags;switch(o.tag){case 0:case 11:case 15:Ll(i,o,n),al(4,o);break;case 1:if(Ll(i,o,n),"function"===typeof(i=(r=o).stateNode).componentDidMount)try{i.componentDidMount()}catch(u){cc(r,r.return,u)}if(null!==(i=(r=o).updateQueue)){var s=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)ho(l[i],s)}catch(u){cc(r,r.return,u)}}n&&64&a&&ll(o),cl(o,o.return);break;case 27:vl(o);case 26:case 5:Ll(i,o,n),n&&null===r&&4&a&&hl(o),cl(o,o.return);break;case 12:Ll(i,o,n);break;case 13:Ll(i,o,n),n&&4&a&&Rl(i,o);break;case 22:null===o.memoizedState&&Ll(i,o,n),cl(o,o.return);break;case 30:break;default:Ll(i,o,n)}t=t.sibling}}function Wl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Mi(n))}function ql(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Mi(e))}function Ul(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)zl(e,t,n,r),t=t.sibling}function zl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Ul(e,t,n,r),2048&i&&al(9,t);break;case 1:case 13:default:Ul(e,t,n,r);break;case 3:Ul(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Mi(e)));break;case 12:if(2048&i){Ul(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,a=o.id,s=o.onPostCommit;"function"===typeof s&&s(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){cc(t,t.return,l)}}else Ul(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,a=t.alternate,null!==t.memoizedState?2&o._visibility?Ul(e,t,n,r):Vl(e,t):2&o._visibility?Ul(e,t,n,r):(o._visibility|=2,Hl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&Wl(a,t);break;case 24:Ul(e,t,n,r),2048&i&&ql(t.alternate,t)}}function Hl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,a=t,s=n,l=r,u=a.flags;switch(a.tag){case 0:case 11:case 15:Hl(o,a,s,l,i),al(8,a);break;case 23:break;case 22:var c=a.stateNode;null!==a.memoizedState?2&c._visibility?Hl(o,a,s,l,i):Vl(o,a):(c._visibility|=2,Hl(o,a,s,l,i)),i&&2048&u&&Wl(a.alternate,a);break;case 24:Hl(o,a,s,l,i),i&&2048&u&&ql(a.alternate,a);break;default:Hl(o,a,s,l,i)}t=t.sibling}}function Vl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Vl(n,r),2048&i&&Wl(r.alternate,r);break;case 24:Vl(n,r),2048&i&&ql(r.alternate,r);break;default:Vl(n,r)}t=t.sibling}}var Kl=8192;function Yl(e){if(e.subtreeFlags&Kl)for(e=e.child;null!==e;)Gl(e),e=e.sibling}function Gl(e){switch(e.tag){case 26:Yl(e),e.flags&Kl&&null!==e.memoizedState&&function(e,t,n){if(null===Ud)throw Error(a(475));var r=Ud;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Fd(n.href),o=e.querySelector(Rd(i));if(o)return null!==(e=o._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Hd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=o,void Ve(o);o=e.ownerDocument||e,n=_d(n),(i=kd.get(i))&&jd(n,i),Ve(o=o.createElement("link"));var s=o;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ed(o,"link",n),t.instance=o}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Hd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Pl,e.memoizedState,e.memoizedProps);break;case 5:default:Yl(e);break;case 3:case 4:var t=Pl;Pl=Ed(e.stateNode.containerInfo),Yl(e),Pl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Kl,Kl=16777216,Yl(e),Kl=t):Yl(e))}}function Ql(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Zl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];xl=r,$l(r,e)}Ql(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Xl(e),e=e.sibling}function Xl(e){switch(e.tag){case 0:case 11:case 15:Zl(e),2048&e.flags&&sl(9,e,e.return);break;case 3:case 12:default:Zl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Jl(e)):Zl(e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];xl=r,$l(r,e)}Ql(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:sl(8,t,t.return),Jl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function $l(e,t){for(;null!==xl;){var n=xl;switch(n.tag){case 0:case 11:case 15:sl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Mi(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,xl=r;else e:for(n=e;null!==xl;){var i=(r=xl).sibling,o=r.return;if(Sl(r),r===n){xl=null;break e}if(null!==i){i.return=o,xl=i;break e}xl=o}}}var eu={getCacheForType:function(e){var t=Ci(Ii),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tu="function"===typeof WeakMap?WeakMap:Map,nu=0,ru=null,iu=null,ou=0,au=0,su=null,lu=!1,uu=!1,cu=!1,du=0,hu=0,pu=0,mu=0,fu=0,gu=0,yu=0,vu=null,bu=null,wu=!1,Du=0,ku=1/0,xu=null,Eu=null,Su=0,Cu=null,Au=null,Tu=0,Fu=0,Ru=null,_u=null,Iu=0,Pu=null;function Mu(){if(0!==(2&nu)&&0!==ou)return ou&-ou;if(null!==M.T){return 0!==Bi?Bi:Fc()}return Re()}function Nu(){0===gu&&(gu=0===(536870912&ou)||oi?ke():536870912);var e=is.current;return null!==e&&(e.flags|=32),gu}function ju(e,t,n){(e!==ru||2!==au&&9!==au)&&null===e.cancelPendingCommit||(zu(e,0),Wu(e,ou,gu,!1)),Se(e,n),0!==(2&nu)&&e===ru||(e===ru&&(0===(2&nu)&&(mu|=n),4===hu&&Wu(e,ou,gu,!1)),kc(e))}function Bu(e,t,n){if(0!==(6&nu))throw Error(a(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),i=r?function(e,t){var n=nu;nu|=2;var r=Vu(),i=Ku();ru!==e||ou!==t?(xu=null,ku=te()+500,zu(e,t)):uu=we(e,t);e:for(;;)try{if(0!==au&&null!==iu){t=iu;var o=su;t:switch(au){case 1:au=0,su=null,$u(e,t,o,1);break;case 2:case 9:if(Qi(o)){au=0,su=null,Ju(t);break}t=function(){2!==au&&9!==au||ru!==e||(au=7),kc(e)},o.then(t,t);break e;case 3:au=7;break e;case 4:au=5;break e;case 7:Qi(o)?(au=0,su=null,Ju(t)):(au=0,su=null,$u(e,t,o,7));break;case 5:var s=null;switch(iu.tag){case 26:s=iu.memoizedState;case 5:case 27:var l=iu;if(!s||qd(s)){au=0,su=null;var u=l.sibling;if(null!==u)iu=u;else{var c=l.return;null!==c?(iu=c,ec(c)):iu=null}break t}}au=0,su=null,$u(e,t,o,5);break;case 6:au=0,su=null,$u(e,t,o,6);break;case 8:Uu(),hu=6;break e;default:throw Error(a(462))}}Zu();break}catch(d){Hu(e,d)}return vi=yi=null,M.H=r,M.A=i,nu=n,null!==iu?0:(ru=null,ou=0,Tr(),hu)}(e,t):Gu(e,t,!0),o=r;;){if(0===i){uu&&!r&&Wu(e,t,0,!1);break}if(n=e.current.alternate,!o||Lu(n)){if(2===i){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;i=vu;var u=l.current.memoizedState.isDehydrated;if(u&&(zu(l,s).flags|=256),2!==(s=Gu(l,s,!1))){if(cu&&!u){l.errorRecoveryDisabledLanes|=o,mu|=o,i=4;break e}o=bu,bu=i,null!==o&&(null===bu?bu=o:bu.push.apply(bu,o))}i=s}if(o=!1,2!==i)continue}}if(1===i){zu(e,0),Wu(e,t,0,!0);break}e:{switch(r=e,o=i){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Wu(r,t,gu,!lu);break e;case 2:bu=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(i=Du+300-te())){if(Wu(r,t,gu,!lu),0!==be(r,0,!0))break e;r.timeoutHandle=ld(Ou.bind(null,r,n,bu,xu,wu,t,gu,mu,yu,lu,o,2,-0,0),i)}else Ou(r,n,bu,xu,wu,t,gu,mu,yu,lu,o,0,-0,0)}break}i=Gu(e,t,!1),o=!1}kc(e)}function Ou(e,t,n,r,i,o,s,l,u,c,d,h,p,m){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Ud={stylesheets:null,count:0,unsuspend:zd},Gl(t),null!==(h=function(){if(null===Ud)throw Error(a(475));var e=Ud;return e.stylesheets&&0===e.count&&Kd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Kd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nc.bind(null,e,t,o,n,r,i,s,l,u,d,1,p,m)),void Wu(e,o,s,!c);nc(e,t,o,n,r,i,s,l,u)}function Lu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Qn(o(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wu(e,t,n,r){t&=~fu,t&=~mu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var o=31-pe(i),a=1<<o;r[o]=-1,i&=~a}0!==n&&Ce(e,n,t)}function qu(){return 0!==(6&nu)||(xc(0,!1),!1)}function Uu(){if(null!==iu){if(0===au)var e=iu.return;else vi=yi=null,Oo(e=iu),Qa=null,Za=0,e=iu;for(;null!==e;)ol(e.alternate,e),e=e.return;iu=null}}function zu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ud(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uu(),ru=e,iu=n=Or(e.current,null),ou=t,au=0,su=null,lu=!1,uu=we(e,t),cu=!1,yu=gu=fu=mu=pu=hu=0,bu=vu=null,wu=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-pe(r),o=1<<i;t|=e[i],r&=~o}return du=t,Tr(),n}function Hu(e,t){wo=null,M.H=Va,t===Vi||t===Yi?(t=$i(),au=3):t===Ki?(t=$i(),au=4):au=t===Cs?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,su=t,null===iu&&(hu=1,Ds(e,Er(t,e.current)))}function Vu(){var e=M.H;return M.H=Va,null===e?Va:e}function Ku(){var e=M.A;return M.A=eu,e}function Yu(){hu=4,lu||(4194048&ou)!==ou&&null!==is.current||(uu=!0),0===(134217727&pu)&&0===(134217727&mu)||null===ru||Wu(ru,ou,gu,!1)}function Gu(e,t,n){var r=nu;nu|=2;var i=Vu(),o=Ku();ru===e&&ou===t||(xu=null,zu(e,t)),t=!1;var a=hu;e:for(;;)try{if(0!==au&&null!==iu){var s=iu,l=su;switch(au){case 8:Uu(),a=6;break e;case 3:case 2:case 9:case 6:null===is.current&&(t=!0);var u=au;if(au=0,su=null,$u(e,s,l,u),n&&uu){a=0;break e}break;default:u=au,au=0,su=null,$u(e,s,l,u)}}Qu(),a=hu;break}catch(c){Hu(e,c)}return t&&e.shellSuspendCounter++,vi=yi=null,nu=r,M.H=i,M.A=o,null===iu&&(ru=null,ou=0,Tr()),a}function Qu(){for(;null!==iu;)Xu(iu)}function Zu(){for(;null!==iu&&!$();)Xu(iu)}function Xu(e){var t=Xs(e.alternate,e,du);e.memoizedProps=e.pendingProps,null===t?ec(e):iu=t}function Ju(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=js(n,t,t.pendingProps,t.type,void 0,ou);break;case 11:t=js(n,t,t.pendingProps,t.type.render,t.ref,ou);break;case 5:Oo(t);default:ol(n,t),t=Xs(n,t=iu=Lr(t,du),du)}e.memoizedProps=e.pendingProps,null===t?ec(e):iu=t}function $u(e,t,n,r){vi=yi=null,Oo(t),Qa=null,Za=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&xi(t,n,i,!0),null!==(n=is.current)){switch(n.tag){case 13:return null===os?Yu():null===n.alternate&&0===hu&&(hu=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Gi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),dc(e,r,i)),!1;case 22:return n.flags|=65536,r===Gi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),dc(e,r,i)),!1}throw Error(a(435,n.tag))}return dc(e,r,i),Yu(),!1}if(oi)return null!==(t=is.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&fi(Er(e=Error(a(422),{cause:r}),n))):(r!==li&&fi(Er(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Er(r,n),so(e,i=xs(e.stateNode,r,i)),4!==hu&&(hu=2)),!1;var o=Error(a(520),{cause:r});if(o=Er(o,n),null===vu?vu=[o]:vu.push(o),4!==hu&&(hu=2),null===t)return!0;r=Er(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,so(n,e=xs(n.stateNode,r,e)),!1;case 1:if(t=n.type,o=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==o&&"function"===typeof o.componentDidCatch&&(null===Eu||!Eu.has(o))))return n.flags|=65536,i&=-i,n.lanes|=i,Ss(i=Es(i),e,n,r),so(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,ou))return hu=1,Ds(e,Er(n,e.current)),void(iu=null)}catch(o){if(null!==i)throw iu=i,o;return hu=1,Ds(e,Er(n,e.current)),void(iu=null)}32768&t.flags?(oi||1===r?e=!0:uu||0!==(536870912&ou)?e=!1:(lu=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=is.current)&&13===r.tag&&(r.flags|=16384))),tc(t,e)):ec(t)}function ec(e){var t=e;do{if(0!==(32768&t.flags))return void tc(t,lu);e=t.return;var n=rl(t.alternate,t,du);if(null!==n)return void(iu=n);if(null!==(t=t.sibling))return void(iu=t);iu=t=e}while(null!==t);0===hu&&(hu=5)}function tc(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(iu=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(iu=e);iu=e=n}while(null!==e);hu=6,iu=null}function nc(e,t,n,r,i,o,s,l,u){e.cancelPendingCommit=null;do{sc()}while(0!==Su);if(0!==(6&nu))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(o=t.lanes|t.childLanes,function(e,t,n,r,i,o){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=a&~n;0<n;){var c=31-pe(n),d=1<<c;s[c]=0,l[c]=-1;var h=u[c];if(null!==h)for(u[c]=null,c=0;c<h.length;c++){var p=h[c];null!==p&&(p.lane&=-536870913)}n&=~d}0!==r&&Ce(e,r,0),0!==o&&0===i&&0!==e.tag&&(e.suspendedLanes|=o&~(a&~t))}(e,n,o|=Ar,s,l,u),e===ru&&(iu=ru=null,ou=0),Au=t,Cu=e,Tu=n,Fu=o,Ru=i,_u=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,X(oe,function(){return lc(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=M.T,M.T=null,i=N.p,N.p=2,s=nu,nu|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(g){n=null;break e}var s=0,l=-1,u=-1,c=0,d=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==o||0!==r&&3!==h.nodeType||(u=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++c===i&&(l=s),p===o&&++d===r&&(u=s),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,xl=t;null!==xl;)if(e=(t=xl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,xl=e;else for(;null!==xl;){switch(o=(t=xl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==o){e=void 0,n=t,i=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var f=gs(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(f,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){cc(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))fd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,xl=e;break}xl=t.return}}(e,t)}finally{nu=s,N.p=i,M.T=r}}Su=1,rc(),ic(),oc()}}function rc(){if(1===Su){Su=0;var e=Cu,t=Au,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=M.T,M.T=null;var r=N.p;N.p=2;var i=nu;nu|=4;try{Ml(t,e);var o=nd,a=er(e.containerInfo),s=o.focusedElem,l=o.selectionRange;if(a!==s&&s&&s.ownerDocument&&$n(s.ownerDocument.documentElement,s)){if(null!==l&&tr(s)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in s)s.selectionStart=u,s.selectionEnd=Math.min(c,s.value.length);else{var d=s.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var p=h.getSelection(),m=s.textContent.length,f=Math.min(l.start,m),g=void 0===l.end?f:Math.min(l.end,m);!p.extend&&f>g&&(a=g,g=f,f=a);var y=Jn(s,f),v=Jn(s,g);if(y&&v&&(1!==p.rangeCount||p.anchorNode!==y.node||p.anchorOffset!==y.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),p.removeAllRanges(),f>g?(p.addRange(b),p.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),p.addRange(b))}}}}for(d=[],p=s;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<d.length;s++){var w=d[s];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}nh=!!td,nd=td=null}finally{nu=i,N.p=r,M.T=n}}e.current=t,Su=2}}function ic(){if(2===Su){Su=0;var e=Cu,t=Au,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=M.T,M.T=null;var r=N.p;N.p=2;var i=nu;nu|=4;try{El(e,t.alternate,t)}finally{nu=i,N.p=r,M.T=n}}Su=3}}function oc(){if(4===Su||3===Su){Su=0,ee();var e=Cu,t=Au,n=Tu,r=_u;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Su=5:(Su=0,Au=Cu=null,ac(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Eu=null),Fe(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ce,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=M.T,i=N.p,N.p=2,M.T=null;try{for(var o=e.onRecoverableError,a=0;a<r.length;a++){var s=r[a];o(s.value,{componentStack:s.stack})}}finally{M.T=t,N.p=i}}0!==(3&Tu)&&sc(),kc(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Pu?Iu++:(Iu=0,Pu=e):Iu=0,xc(0,!1)}}function ac(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Mi(t)))}function sc(e){return rc(),ic(),oc(),lc()}function lc(){if(5!==Su)return!1;var e=Cu,t=Fu;Fu=0;var n=Fe(Tu),r=M.T,i=N.p;try{N.p=32>n?32:n,M.T=null,n=Ru,Ru=null;var o=Cu,s=Tu;if(Su=0,Au=Cu=null,Tu=0,0!==(6&nu))throw Error(a(331));var l=nu;if(nu|=4,Xl(o.current),zl(o,o.current,s,n),nu=l,xc(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ce,o)}catch(u){}return!0}finally{N.p=i,M.T=r,ac(e,t)}}function uc(e,t,n){t=Er(n,t),null!==(e=oo(e,t=xs(e.stateNode,t,2),2))&&(Se(e,2),kc(e))}function cc(e,t,n){if(3===e.tag)uc(e,e,n);else for(;null!==t;){if(3===t.tag){uc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Eu||!Eu.has(r))){e=Er(n,e),null!==(r=oo(t,n=Es(2),2))&&(Ss(n,r,t,e),Se(r,2),kc(r));break}}t=t.return}}function dc(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(cu=!0,i.add(n),e=hc.bind(null,e,t,n),t.then(e,e))}function hc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ru===e&&(ou&n)===n&&(4===hu||3===hu&&(62914560&ou)===ou&&300>te()-Du?0===(2&nu)&&zu(e,0):fu|=n,yu===ou&&(yu=0)),kc(e)}function pc(e,t){0===t&&(t=xe()),null!==(e=_r(e,t))&&(Se(e,t),kc(e))}function mc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pc(e,n)}function fc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),pc(e,n)}var gc=null,yc=null,vc=!1,bc=!1,wc=!1,Dc=0;function kc(e){e!==yc&&null===e.next&&(null===yc?gc=yc=e:yc=yc.next=e),bc=!0,vc||(vc=!0,dd(function(){0!==(6&nu)?X(re,Ec):Sc()}))}function xc(e,t){if(!wc&&bc){wc=!0;do{for(var n=!1,r=gc;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var o=0;else{var a=r.suspendedLanes,s=r.pingedLanes;o=(1<<31-pe(42|e)+1)-1,o=201326741&(o&=i&~(a&~s))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,Tc(r,o))}else o=ou,0===(3&(o=be(r,r===ru?o:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,o)||(n=!0,Tc(r,o));r=r.next}}while(n);wc=!1}}function Ec(){Sc()}function Sc(){bc=vc=!1;var e=0;0!==Dc&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==sd&&(sd=e,!0);return sd=null,!1}()&&(e=Dc),Dc=0);for(var t=te(),n=null,r=gc;null!==r;){var i=r.next,o=Cc(r,t);0===o?(r.next=null,null===n?gc=i:n.next=i,null===i&&(yc=n)):(n=r,(0!==e||0!==(3&o))&&(bc=!0)),r=i}xc(e,!1)}function Cc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var a=31-pe(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=De(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}if(n=ou,n=be(e,e===(t=ru)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===au||9===au)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&J(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&J(r),Fe(n)){case 2:case 8:n=ie;break;case 32:default:n=oe;break;case 268435456:n=se}return r=Ac.bind(null,e),n=X(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&J(r),e.callbackPriority=2,e.callbackNode=null,2}function Ac(e,t){if(0!==Su&&5!==Su)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(sc()&&e.callbackNode!==n)return null;var r=ou;return 0===(r=be(e,e===ru?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Bu(e,r,t),Cc(e,te()),null!=e.callbackNode&&e.callbackNode===n?Ac.bind(null,e):null)}function Tc(e,t){if(sc())return null;Bu(e,t,!0)}function Fc(){return 0===Dc&&(Dc=ke()),Dc}function Rc(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Ft(""+e)}function _c(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ic=0;Ic<Dr.length;Ic++){var Pc=Dr[Ic];kr(Pc.toLowerCase(),"on"+(Pc[0].toUpperCase()+Pc.slice(1)))}kr(pr,"onAnimationEnd"),kr(mr,"onAnimationIteration"),kr(fr,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(gr,"onTransitionRun"),kr(yr,"onTransitionStart"),kr(vr,"onTransitionCancel"),kr(br,"onTransitionEnd"),Qe("onMouseEnter",["mouseout","mouseover"]),Qe("onMouseLeave",["mouseout","mouseover"]),Qe("onPointerEnter",["pointerout","pointerover"]),Qe("onPointerLeave",["pointerout","pointerover"]),Ge("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ge("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ge("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ge("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mc));function jc(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=u;try{o(i)}catch(c){ys(c)}i.currentTarget=null,o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=u;try{o(i)}catch(c){ys(c)}i.currentTarget=null,o=l}}}}function Bc(e,t){var n=t[Ne];void 0===n&&(n=t[Ne]=new Set);var r=e+"__bubble";n.has(r)||(qc(t,e,2,!1),n.add(r))}function Oc(e,t,n){var r=0;t&&(r|=4),qc(n,e,r,t)}var Lc="_reactListening"+Math.random().toString(36).slice(2);function Wc(e){if(!e[Lc]){e[Lc]=!0,Ke.forEach(function(t){"selectionchange"!==t&&(Nc.has(t)||Oc(t,!1,e),Oc(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Lc]||(t[Lc]=!0,Oc("selectionchange",!1,t))}}function qc(e,t,n,r){switch(uh(t)){case 2:var i=rh;break;case 8:i=ih;break;default:i=oh}n=i.bind(null,t,n,e),i=void 0,!Lt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Uc(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&a.stateNode.containerInfo===i)return;a=a.return}for(;null!==s;){if(null===(a=qe(s)))return;if(5===(u=a.tag)||6===u||26===u||27===u){r=o=a;continue e}s=s.parentNode}}r=r.return}jt(function(){var r=o,i=_t(n),a=[];e:{var s=wr.get(e);if(void 0!==s){var u=$t,c=e;switch(e){case"keypress":if(0===Vt(n))break e;case"keydown":case"keyup":u=fn;break;case"focusin":c="focus",u=an;break;case"focusout":c="blur",u=an;break;case"beforeblur":case"afterblur":u=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=yn;break;case pr:case mr:case fr:u=sn;break;case br:u=vn;break;case"scroll":case"scrollend":u=tn;break;case"wheel":u=bn;break;case"copy":case"cut":case"paste":u=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=gn;break;case"toggle":case"beforetoggle":u=wn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),p=d?null!==s?s+"Capture":null:s;d=[];for(var m,f=r;null!==f;){var g=f;if(m=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===m||null===p||null!=(g=Bt(f,p))&&d.push(zc(f,g,m)),h)break;f=f.return}0<d.length&&(s=new u(s,c,null,n,i),a.push({event:s,listeners:d}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Rt||!(c=n.relatedTarget||n.fromElement)||!qe(c)&&!c[Me])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?qe(c):null)&&(h=l(c),d=c.tag,c!==h||5!==d&&27!==d&&6!==d)&&(c=null)):(u=null,c=r),u!==c)){if(d=rn,g="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",p="onPointerEnter",f="pointer"),h=null==u?s:ze(u),m=null==c?s:ze(c),(s=new d(g,f+"leave",u,n,i)).target=h,s.relatedTarget=m,g=null,qe(i)===r&&((d=new d(p,f+"enter",c,n,i)).target=m,d.relatedTarget=h,g=d),h=g,u&&c)e:{for(p=c,f=0,m=d=u;m;m=Vc(m))f++;for(m=0,g=p;g;g=Vc(g))m++;for(;0<f-m;)d=Vc(d),f--;for(;0<m-f;)p=Vc(p),m--;for(;f--;){if(d===p||null!==p&&d===p.alternate)break e;d=Vc(d),p=Vc(p)}d=null}else d=null;null!==u&&Kc(a,s,u,d,!1),null!==c&&null!==h&&Kc(a,h,c,d,!0)}if("select"===(u=(s=r?ze(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=On;else if(In(s))if(Ln)y=Gn;else{y=Kn;var v=Vn}else!(u=s.nodeName)||"input"!==u.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&Ct(r.elementType)&&(y=On):y=Yn;switch(y&&(y=y(e,r))?Pn(a,y,n,i):(v&&v(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&vt(s,"number",s.value)),v=r?ze(r):window,e){case"focusin":(In(v)||"true"===v.contentEditable)&&(rr=v,ir=r,or=null);break;case"focusout":or=ir=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,sr(a,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":sr(a,n,i)}var b;if(kn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Rn?Tn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Sn&&"ko"!==n.locale&&(Rn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Rn&&(b=Ht()):(Ut="value"in(qt=i)?qt.value:qt.textContent,Rn=!0)),0<(v=Hc(r,w)).length&&(w=new un(w,e,null,n,i),a.push({event:w,listeners:v}),b?w.data=b:null!==(b=Fn(n))&&(w.data=b))),(b=En?function(e,t){switch(e){case"compositionend":return Fn(t);case"keypress":return 32!==t.which?null:(An=!0,Cn);case"textInput":return(e=t.data)===Cn&&An?null:e;default:return null}}(e,n):function(e,t){if(Rn)return"compositionend"===e||!kn&&Tn(e,t)?(e=Ht(),zt=Ut=qt=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=Hc(r,"onBeforeInput")).length&&(v=new un("onBeforeInput","beforeinput",null,n,i),a.push({event:v,listeners:w}),v.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var o=Rc((i[Pe]||null).action),a=r.submitter;a&&null!==(t=(t=a[Pe]||null)?Rc(t.formAction):a.getAttribute("formAction"))&&(o=t,a=null);var s=new $t("action","action",null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Dc){var e=a?_c(i,a):new FormData(i);_a(n,{pending:!0,data:e,method:i.method,action:o},null,e)}}else"function"===typeof o&&(s.preventDefault(),e=a?_c(i,a):new FormData(i),_a(n,{pending:!0,data:e,method:i.method,action:o},o,e))},currentTarget:i}]})}}(a,e,r,n,i)}jc(a,t)})}function zc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hc(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===o||(null!=(i=Bt(e,n))&&r.unshift(zc(e,i,o)),null!=(i=Bt(e,t))&&r.push(zc(e,i,o))),3===e.tag)return r;e=e.return}return[]}function Vc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Kc(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===u||(l=u,i?null!=(u=Bt(n,o))&&a.unshift(zc(n,u,l)):i||null!=(u=Bt(n,o))&&a.push(zc(n,u,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yc=/\r\n?/g,Gc=/\u0000|\uFFFD/g;function Qc(e){return("string"===typeof e?e:""+e).replace(Yc,"\n").replace(Gc,"")}function Zc(e,t){return t=Qc(t),Qc(e)===t}function Xc(){}function Jc(e,t,n,r,i,o){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":St(e,r,o);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Ft(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof o&&("formAction"===n?("input"!==t&&Jc(e,t,"name",i.name,i,null),Jc(e,t,"formEncType",i.formEncType,i,null),Jc(e,t,"formMethod",i.formMethod,i,null),Jc(e,t,"formTarget",i.formTarget,i,null)):(Jc(e,t,"encType",i.encType,i,null),Jc(e,t,"method",i.method,i,null),Jc(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Ft(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Xc);break;case"onScroll":null!=r&&Bc("scroll",e);break;case"onScrollEnd":null!=r&&Bc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Ft(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Bc("beforetoggle",e),Bc("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=At.get(n)||n,r)}}function $c(e,t,n,r,i,o){switch(n){case"style":St(e,r,o);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?kt(e,r):("number"===typeof r||"bigint"===typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&Bc("scroll",e);break;case"onScrollEnd":null!=r&&Bc("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Xc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ye.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(o=null!=(o=e[Pe]||null)?o[n]:null)&&e.removeEventListener(t,o,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof o&&null!==o&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bc("error",e),Bc("load",e);var r,i=!1,o=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Jc(e,t,r,s,n,null)}}return o&&Jc(e,t,"srcSet",n.srcSet,n,null),void(i&&Jc(e,t,"src",n.src,n,null));case"input":Bc("invalid",e);var l=r=s=o=null,u=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":o=d;break;case"type":s=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:Jc(e,t,i,d,n,null)}}return yt(e,r,l,u,c,s,o,!1),void dt(e);case"select":for(o in Bc("invalid",e),i=s=r=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":r=l;break;case"defaultValue":s=l;break;case"multiple":i=l;default:Jc(e,t,o,l,n,null)}return t=r,n=s,e.multiple=!!i,void(null!=t?bt(e,!!i,t,!1):null!=n&&bt(e,!!i,n,!0));case"textarea":for(s in Bc("invalid",e),r=o=i=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":i=l;break;case"defaultValue":o=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Jc(e,t,s,l,n,null)}return Dt(e,i,o,r),void dt(e);case"option":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))if("selected"===u)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Jc(e,t,u,i,n,null);return;case"dialog":Bc("beforetoggle",e),Bc("toggle",e),Bc("cancel",e),Bc("close",e);break;case"iframe":case"object":Bc("load",e);break;case"video":case"audio":for(i=0;i<Mc.length;i++)Bc(Mc[i],e);break;case"image":Bc("error",e),Bc("load",e);break;case"details":Bc("toggle",e);break;case"embed":case"source":case"link":Bc("error",e),Bc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Jc(e,t,c,i,n,null)}return;default:if(Ct(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&$c(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Jc(e,t,l,i,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function id(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function od(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ad(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sd=null;var ld="function"===typeof setTimeout?setTimeout:void 0,ud="function"===typeof clearTimeout?clearTimeout:void 0,cd="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof cd?function(e){return cd.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout(function(){throw e})}function pd(e){return"head"===e}function md(e,t){var n=t,r=0,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&Dd(a.documentElement),2&n&&Dd(a.body),4&n)for(Dd(n=a.head),a=n.firstChild;a;){var s=a.nextSibling,l=a.nodeName;a[Le]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=s}}if(0===i)return e.removeChild(o),void Ah(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=o}while(n);Ah(t)}function fd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":fd(n),We(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vd=null;function bd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function wd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function Dd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);We(e)}var kd=new Map,xd=new Set;function Ed(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Sd=N.d;N.d={f:function(){var e=Sd.f(),t=qu();return e||t},r:function(e){var t=Ue(e);null!==t&&5===t.tag&&"form"===t.type?Pa(t):Sd.r(e)},D:function(e){Sd.D(e),Ad("dns-prefetch",e,null)},C:function(e,t){Sd.C(e,t),Ad("preconnect",e,t)},L:function(e,t,n){Sd.L(e,t,n);var r=Cd;if(r&&e&&t){var i='link[rel="preload"][as="'+ft(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+ft(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+ft(n.imageSizes)+'"]')):i+='[href="'+ft(e)+'"]';var o=i;switch(t){case"style":o=Fd(e);break;case"script":o=Id(e)}kd.has(o)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),kd.set(o,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Rd(o))||"script"===t&&r.querySelector(Pd(o))||(ed(t=r.createElement("link"),"link",e),Ve(t),r.head.appendChild(t)))}},m:function(e,t){Sd.m(e,t);var n=Cd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+ft(r)+'"][href="'+ft(e)+'"]',o=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Id(e)}if(!kd.has(o)&&(e=h({rel:"modulepreload",href:e},t),kd.set(o,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Pd(o)))return}ed(r=n.createElement("link"),"link",e),Ve(r),n.head.appendChild(r)}}},X:function(e,t){Sd.X(e,t);var n=Cd;if(n&&e){var r=He(n).hoistableScripts,i=Id(e),o=r.get(i);o||((o=n.querySelector(Pd(i)))||(e=h({src:e,async:!0},t),(t=kd.get(i))&&Bd(e,t),Ve(o=n.createElement("script")),ed(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}},S:function(e,t,n){Sd.S(e,t,n);var r=Cd;if(r&&e){var i=He(r).hoistableStyles,o=Fd(e);t=t||"default";var a=i.get(o);if(!a){var s={loading:0,preload:null};if(a=r.querySelector(Rd(o)))s.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=kd.get(o))&&jd(e,n);var l=a=r.createElement("link");Ve(l),ed(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Nd(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:s},i.set(o,a)}}},M:function(e,t){Sd.M(e,t);var n=Cd;if(n&&e){var r=He(n).hoistableScripts,i=Id(e),o=r.get(i);o||((o=n.querySelector(Pd(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=kd.get(i))&&Bd(e,t),Ve(o=n.createElement("script")),ed(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}}};var Cd="undefined"===typeof document?null:document;function Ad(e,t,n){var r=Cd;if(r&&"string"===typeof t&&t){var i=ft(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),xd.has(i)||(xd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(ed(t=r.createElement("link"),"link",e),Ve(t),r.head.appendChild(t)))}}function Td(e,t,n,r){var i,o,s,l,u=(u=H.current)?Ed(u):null;if(!u)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Fd(n.href),(r=(n=He(u).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Fd(n.href);var c=He(u).hoistableStyles,d=c.get(e);if(d||(u=u.ownerDocument||u,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=u.querySelector(Rd(e)))&&!c._p&&(d.instance=c,d.state.loading=5),kd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},kd.set(e,n),c||(i=u,o=e,s=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+o+"]")?l.loading=1:(o=i.createElement("link"),l.preload=o,o.addEventListener("load",function(){return l.loading|=1}),o.addEventListener("error",function(){return l.loading|=2}),ed(o,"link",s),Ve(o),i.head.appendChild(o))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Id(n),(r=(n=He(u).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Fd(e){return'href="'+ft(e)+'"'}function Rd(e){return'link[rel="stylesheet"]['+e+"]"}function _d(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Id(e){return'[src="'+ft(e)+'"]'}function Pd(e){return"script[async]"+e}function Md(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+ft(n.href)+'"]');if(r)return t.instance=r,Ve(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ve(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",i),Nd(r,n.precedence,e),t.instance=r;case"stylesheet":i=Fd(n.href);var o=e.querySelector(Rd(i));if(o)return t.state.loading|=4,t.instance=o,Ve(o),o;r=_d(n),(i=kd.get(i))&&jd(r,i),Ve(o=(e.ownerDocument||e).createElement("link"));var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ed(o,"link",r),t.state.loading|=4,Nd(o,n.precedence,e),t.instance=o;case"script":return o=Id(n.src),(i=e.querySelector(Pd(o)))?(t.instance=i,Ve(i),i):(r=n,(i=kd.get(o))&&Bd(r=h({},n),i),Ve(i=(e=e.ownerDocument||e).createElement("script")),ed(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Nd(r,n.precedence,e));return t.instance}function Nd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,o=i,a=0;a<r.length;a++){var s=r[a];if(s.dataset.precedence===t)o=s;else if(o!==i)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function jd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Bd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Od=null;function Ld(e,t,n){if(null===Od){var r=new Map,i=Od=new Map;i.set(n,r)}else(r=(i=Od).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var o=n[i];if(!(o[Le]||o[Ie]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var a=o.getAttribute(t)||"";a=e+a;var s=r.get(a);s?s.push(o):r.set(a,[o])}}return r}function Wd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function qd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Ud=null;function zd(){}function Hd(){if(this.count--,0===this.count)if(this.stylesheets)Kd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Vd=null;function Kd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Vd=new Map,t.forEach(Yd,e),Vd=null,Hd.call(e))}function Yd(e,t){if(!(4&t.state.loading)){var n=Vd.get(e);if(n)var r=n.get(null);else{n=new Map,Vd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var a=i[o];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(o=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=Hd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),o?o.parentNode.insertBefore(i,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Gd={$$typeof:D,Provider:null,Consumer:null,_currentValue:j,_currentValue2:j,_threadCount:0};function Qd(e,t,n,r,i,o,a,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.hiddenUpdates=Ee(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function Zd(e,t,n,r,i,o,a,s,l,u,c,d){return e=new Qd(e,t,n,a,s,l,u,d),t=1,!0===o&&(t|=24),o=jr(3,null,null,t),e.current=o,o.stateNode=e,(t=Pi()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},no(o),e}function Xd(e){return e?e=Mr:Mr}function Jd(e,t,n,r,i,o){i=Xd(i),null===r.context?r.context=i:r.pendingContext=i,(r=io(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=oo(e,r,t))&&(ju(n,0,t),ao(n,e,t))}function $d(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){$d(e,t),(e=e.alternate)&&$d(e,t)}function th(e){if(13===e.tag){var t=_r(e,67108864);null!==t&&ju(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var i=M.T;M.T=null;var o=N.p;try{N.p=2,oh(e,t,n,r)}finally{N.p=o,M.T=i}}function ih(e,t,n,r){var i=M.T;M.T=null;var o=N.p;try{N.p=8,oh(e,t,n,r)}finally{N.p=o,M.T=i}}function oh(e,t,n,r){if(nh){var i=ah(r);if(null===i)Uc(e,t,r,sh,n),vh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return dh=bh(dh,e,t,n,r,i),!0;case"dragenter":return hh=bh(hh,e,t,n,r,i),!0;case"mouseover":return ph=bh(ph,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return mh.set(o,bh(mh.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,fh.set(o,bh(fh.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(vh(e,r),4&t&&-1<yh.indexOf(e)){for(;null!==i;){var o=Ue(i);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var a=ve(o.pendingLanes);if(0!==a){var s=o;for(s.pendingLanes|=2,s.entangledLanes|=2;a;){var l=1<<31-pe(a);s.entanglements[1]|=l,a&=~l}kc(o),0===(6&nu)&&(ku=te()+500,xc(0,!1))}}break;case 13:null!==(s=_r(o,2))&&ju(s,0,2),qu(),eh(o,2)}if(null===(o=ah(r))&&Uc(e,t,r,sh,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Uc(e,t,r,null,n)}}function ah(e){return lh(e=_t(e))}var sh=null;function lh(e){if(sh=null,null!==(e=qe(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return sh=e,null}function uh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case oe:case ae:return 32;case se:return 268435456;default:return 32}default:return 32}}var ch=!1,dh=null,hh=null,ph=null,mh=new Map,fh=new Map,gh=[],yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":ph=null;break;case"pointerover":case"pointerout":mh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fh.delete(t.pointerId)}}function bh(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=Ue(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function wh(e){var t=qe(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=u(n)))return e.blockedOn=t,void function(e,t){var n=N.p;try{return N.p=e,t()}finally{N.p=n}}(e.priority,function(){if(13===n.tag){var e=Mu();e=Te(e);var t=_r(n,e);null!==t&&ju(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ah(e.nativeEvent);if(null!==n)return null!==(t=Ue(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Rt=r,n.target.dispatchEvent(r),Rt=null,t.shift()}return!0}function kh(e,t,n){Dh(e)&&n.delete(t)}function xh(){ch=!1,null!==dh&&Dh(dh)&&(dh=null),null!==hh&&Dh(hh)&&(hh=null),null!==ph&&Dh(ph)&&(ph=null),mh.forEach(kh),fh.forEach(kh)}function Eh(e,t){e.blockedOn===t&&(e.blockedOn=null,ch||(ch=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,xh)))}var Sh=null;function Ch(e){Sh!==e&&(Sh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Sh===e&&(Sh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===lh(r||n))continue;break}var o=Ue(n);null!==o&&(e.splice(t,3),t-=3,_a(o,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Ah(e){function t(t){return Eh(t,e)}null!==dh&&Eh(dh,e),null!==hh&&Eh(hh,e),null!==ph&&Eh(ph,e),mh.forEach(t),fh.forEach(t);for(var n=0;n<gh.length;n++){var r=gh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<gh.length&&null===(n=gh[0]).blockedOn;)wh(n),null===n.blockedOn&&gh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],o=n[r+1],a=i[Pe]||null;if("function"===typeof o)a||Ch(n);else if(a){var s=null;if(o&&o.hasAttribute("formAction")){if(i=o,a=o[Pe]||null)s=a.formAction;else if(null!==lh(i))continue}else s=a.action;"function"===typeof s?n[r+1]=s:(n.splice(r,3),r-=3),Ch(n)}}}function Th(e){this._internalRoot=e}function Fh(e){this._internalRoot=e}Fh.prototype.render=Th.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Jd(t.current,Mu(),e,t,null,null)},Fh.prototype.unmount=Th.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Jd(e.current,2,null,e,null,null),qu(),t[Me]=null}},Fh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Re();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gh.length&&0!==t&&t<gh[n].priority;n++);gh.splice(n,0,e),0===n&&wh(e)}};var Rh=i.version;if("19.1.1"!==Rh)throw Error(a(527,Rh,"19.1.1"));N.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return c(i),e;if(o===r)return c(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var _h={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ih.isDisabled&&Ih.supportsFiber)try{ce=Ih.inject(_h),de=Ih}catch(Mh){}}t.createRoot=function(e,t){if(!s(e))throw Error(a(299));var n=!1,r="",i=vs,o=bs,l=ws;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Zd(e,1,!1,null,0,n,r,i,o,l,0,null),e[Me]=t.current,Wc(e),new Th(t)},t.hydrateRoot=function(e,t,n){if(!s(e))throw Error(a(299));var r=!1,i="",o=vs,l=bs,u=ws,c=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(u=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(c=n.formState)),(t=Zd(e,1,!0,t,0,r,i,o,l,u,0,c)).context=Xd(null),n=t.current,(i=io(r=Te(r=Mu()))).callback=null,oo(n,i,r),n=r,t.current.lanes=n,Se(t,n),kc(t),e[Me]=t.current,Wc(e),new Fh(t)},t.version="19.1.1"},43:(e,t,n)=>{e.exports=n(288)},106:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,r=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,l=/^\s+|\s+$/g,u="";function c(e){return e?e.replace(l,u):u}e.exports=function(e,l){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];l=l||{};var d=1,h=1;function p(e){var t=e.match(n);t&&(d+=t.length);var r=e.lastIndexOf("\n");h=~r?e.length-r:h+e.length}function m(){var e={line:d,column:h};return function(t){return t.position=new f(e),v(),t}}function f(e){this.start=e,this.end={line:d,column:h},this.source=l.source}function g(t){var n=new Error(l.source+":"+d+":"+h+": "+t);if(n.reason=t,n.filename=l.source,n.line=d,n.column=h,n.source=e,!l.silent)throw n}function y(t){var n=t.exec(e);if(n){var r=n[0];return p(r),e=e.slice(r.length),n}}function v(){y(r)}function b(e){var t;for(e=e||[];t=w();)!1!==t&&e.push(t);return e}function w(){var t=m();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;u!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,u===e.charAt(n-1))return g("End of comment missing");var r=e.slice(2,n-2);return h+=2,p(r),e=e.slice(n),h+=2,t({type:"comment",comment:r})}}function D(){var e=m(),n=y(i);if(n){if(w(),!y(o))return g("property missing ':'");var r=y(a),l=e({type:"declaration",property:c(n[0].replace(t,u)),value:r?c(r[0].replace(t,u)):u});return y(s),l}}return f.prototype.content=e,v(),function(){var e,t=[];for(b(t);e=D();)!1!==e&&(t.push(e),b(t));return t}()}},121:(e,t,n)=>{n.d(t,{j2:()=>Be,db:()=>Oe,Cn:()=>Le});var r=n(150);(0,r.KO)("firebase","12.5.0","app");var i=n(144),o=n(667),a=n(379),s=n(965),l=n(776),u=n(606),c=n(799);const d="@firebase/installations",h="0.6.19",p=1e4,m="w:".concat(h),f="FIS_v2",g=36e5,y={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},v=new l.FA("installations","Installations",y);function b(e){return e instanceof l.g&&e.code.includes("request-failed")}function w(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function D(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function k(e,t){const n=(await t.json()).error;return v.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function x(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function E(e,t){let{refreshToken:n}=t;const r=x(e);return r.append("Authorization",function(e){return"".concat(f," ").concat(e)}(n)),r}async function S(e){const t=await e();return t.status>=500&&t.status<600?e():t}function C(e){return new Promise(t=>{setTimeout(t,e)})}const A=/^[cdef][\w-]{21}$/;function T(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return A.test(t)?t:""}catch(e){return""}}function F(e){return"".concat(e.appName,"!").concat(e.appId)}const R=new Map;function _(e,t){const n=F(e);I(n,t),function(e,t){const n=M();n&&n.postMessage({key:e,fid:t});N()}(n,t)}function I(e,t){const n=R.get(e);if(n)for(const r of n)r(t)}let P=null;function M(){return!P&&"BroadcastChannel"in self&&(P=new BroadcastChannel("[Firebase] FID Change"),P.onmessage=e=>{I(e.data.key,e.data.fid)}),P}function N(){0===R.size&&P&&(P.close(),P=null)}const j="firebase-installations-store";let B=null;function O(){return B||(B=(0,c.P2)("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(j)}})),B}async function L(e,t){const n=F(e),r=(await O()).transaction(j,"readwrite"),i=r.objectStore(j),o=await i.get(n);return await i.put(t,n),await r.done,o&&o.fid===t.fid||_(e,t.fid),t}async function W(e){const t=F(e),n=(await O()).transaction(j,"readwrite");await n.objectStore(j).delete(t),await n.done}async function q(e,t){const n=F(e),r=(await O()).transaction(j,"readwrite"),i=r.objectStore(j),o=await i.get(n),a=t(o);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||o&&o.fid===a.fid||_(e,a.fid),a}async function U(e){let t;const n=await q(e.appConfig,n=>{const r=function(e){const t=e||{fid:T(),registrationStatus:0};return V(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(v.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const o=w(n),a=x(n),s=r.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:i,authVersion:f,appId:n.appId,sdkVersion:m},u={method:"POST",headers:a,body:JSON.stringify(l)},c=await S(()=>fetch(o,u));if(c.ok){const e=await c.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:D(e.authToken)}}throw await k("Create Installation",c)}(e,t);return L(e.appConfig,n)}catch(n){throw b(n)&&409===n.customData.serverCode?await W(e.appConfig):await L(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:z(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function z(e){let t=await H(e.appConfig);for(;1===t.registrationStatus;)await C(100),t=await H(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await U(e);return n||t}return t}function H(e){return q(e,e=>{if(!e)throw v.create("installation-not-found");return V(e)})}function V(e){return 1===(t=e).registrationStatus&&t.registrationTime+p<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function K(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return"".concat(w(e),"/").concat(n,"/authTokens:generate")}(n,t),o=E(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const s={installation:{sdkVersion:m,appId:n.appId}},l={method:"POST",headers:o,body:JSON.stringify(s)},u=await S(()=>fetch(i,l));if(u.ok){return D(await u.json())}throw await k("Generate Auth Token",u)}async function Y(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await q(e.appConfig,r=>{if(!Q(r))throw v.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+g}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await G(e.appConfig);for(;1===n.authToken.requestStatus;)await C(100),n=await G(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Y(e,t):r}(e,n),r;{if(!navigator.onLine)throw v.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return(0,a.A)((0,a.A)({},e),{},{authToken:t})}(r);return t=async function(e,t){try{const n=await K(e,t),r=(0,a.A)((0,a.A)({},t),{},{authToken:n});return await L(e.appConfig,r),n}catch(n){if(!b(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=(0,a.A)((0,a.A)({},t),{},{authToken:{requestStatus:0}});await L(e.appConfig,n)}else await W(e.appConfig);throw n}}(e,n),n}});return t?await t:r.authToken}function G(e){return q(e,e=>{if(!Q(e))throw v.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+p<Date.now()?(0,a.A)((0,a.A)({},e),{},{authToken:{requestStatus:0}}):e;var n})}function Q(e){return void 0!==e&&2===e.registrationStatus}async function Z(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await U(e);t&&await t}(n);return(await Y(n,t)).token}function X(e){return v.create("missing-app-config-values",{valueName:e})}const J="installations",$=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw X("App Configuration");if(!e.name)throw X("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw X(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:(0,r.j6)(t,"heartbeat"),_delete:()=>Promise.resolve()}},ee=e=>{const t=e.getProvider("app").getImmediate(),n=(0,r.j6)(t,J).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await U(t);return r?r.catch(console.error):Y(t).catch(console.error),n.fid}(n),getToken:e=>Z(n,e)}};(0,r.om)(new u.uA(J,$,"PUBLIC")),(0,r.om)(new u.uA("installations-internal",ee,"PRIVATE")),(0,r.KO)(d,h),(0,r.KO)(d,h,"esm2020");const te="analytics",ne="https://www.googletagmanager.com/gtag/js",re=new s.Vy("@firebase/analytics"),ie={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},oe=new l.FA("analytics","Analytics",ie);function ae(e){if(!e.startsWith(ne)){const t=oe.create("invalid-gtag-resource",{gtagURL:e});return re.warn(t.message),""}return e}function se(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function le(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:ae}),r=document.createElement("script"),i="".concat(ne,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function ue(e,t,n,r){return async function(i){try{for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];if("event"===i){const[r,i]=a;await async function(e,t,n,r,i){try{let o=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await se(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){o=[];break}o.push(i)}}0===o.length&&(o=Object.values(t)),await Promise.all(o),e("event",r,i||{})}catch(o){re.error(o)}}(e,t,n,r,i)}else if("config"===i){const[i,o]=a;await async function(e,t,n,r,i,o){const a=r[i];try{if(a)await t[a];else{const e=(await se(n)).find(e=>e.measurementId===i);e&&await t[e.appId]}}catch(s){re.error(s)}e("config",i,o)}(e,t,n,r,i,o)}else if("consent"===i){const[t,n]=a;e("consent",t,n)}else if("get"===i){const[t,n,r]=a;e("get",t,n,r)}else if("set"===i){const[t]=a;e("set",t)}else e(i,...a)}catch(l){re.error(l)}}}const ce=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function de(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function he(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:o}=e.options;if(!r)throw oe.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw oe.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new me;return setTimeout(async()=>{s.abort()},void 0!==n?n:6e4),pe({appId:r,apiKey:i,measurementId:o},a,s,t)}async function pe(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ce;const{appId:a,measurementId:s}=e;try{await function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(o),r(oe.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(n,r)}catch(c){if(s)return re.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(s)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===c||void 0===c?void 0:c.message,"]")),{appId:a,measurementId:s};throw c}try{const t=await async function(e){const{appId:t,apiKey:n}=e,r={method:"GET",headers:de(n)},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",t),o=await fetch(i,r);if(200!==o.status&&304!==o.status){let e="";try{var a;const t=await o.json();null!==(a=t.error)&&void 0!==a&&a.message&&(e=t.error.message)}catch(s){}throw oe.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return o.deleteThrottleMetadata(a),t}catch(c){var u;const t=c;if(!function(e){if(!(e instanceof l.g)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(o.deleteThrottleMetadata(a),s)return re.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(s)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===t||void 0===t?void 0:t.message,"]")),{appId:a,measurementId:s};throw c}const r=503===Number(null===t||void 0===t||null===(u=t.customData)||void 0===u?void 0:u.httpStatus)?(0,l.p9)(i,o.intervalMillis,30):(0,l.p9)(i,o.intervalMillis),d={throttleEndTimeMillis:Date.now()+r,backoffCount:i+1};return o.setThrottleMetadata(a,d),re.debug("Calling attemptFetch again in ".concat(r," millis")),pe(e,d,n,o)}}class me{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let fe,ge;function ye(e){ge=e}function ve(e){fe=e}async function be(e,t,n,r,i,o,a){var s;const u=he(e);u.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&re.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(e=>re.error(e)),t.push(u);const c=async function(){if(!(0,l.zW)())return re.warn(oe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await(0,l.eX)()}catch(e){return re.warn(oe.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[d,h]=await Promise.all([u,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(ne)&&n.src.includes(e))return n;return null})(o)||le(o,d.measurementId),ge&&(i("consent","default",ge),ye(void 0)),i("js",new Date);const p=null!==(s=null===a||void 0===a?void 0:a.config)&&void 0!==s?s:{};return p.origin="firebase",p.update=!0,null!=h&&(p.firebase_id=h),i("config",d.measurementId,p),fe&&(i("set",fe),ve(void 0)),d.measurementId}class we{constructor(e){this.app=e}_delete(){return delete De[this.app.options.appId],Promise.resolve()}}let De={},ke=[];const xe={};let Ee,Se,Ce="dataLayer",Ae="gtag",Te=!1;function Fe(e,t,n){!function(){const e=[];if((0,l.sr)()&&e.push("This is a browser extension environment."),(0,l.dM)()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(" "),n=oe.create("invalid-analytics-context",{errorInfo:t});re.warn(n.message)}}();const r=e.options.appId;if(!r)throw oe.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw oe.create("no-api-key");re.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=De[r])throw oe.create("already-exists",{id:r});if(!Te){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Ce);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=ue(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}(De,ke,xe,Ce,Ae);Se=e,Ee=t,Te=!0}De[r]=be(e,ke,xe,t,Ee,Ce,n);return new we(e)}function Re(e,t,n){e=(0,l.Ku)(e),async function(e,t,n,r){if(r&&r.global){const t={};for(const e of Object.keys(n))t["user_properties.".concat(e)]=n[e];return e("set",t),Promise.resolve()}e("config",await t,{update:!0,user_properties:n})}(Se,De[e.app.options.appId],t,n).catch(e=>re.error(e))}function _e(e,t,n,r){e=(0,l.Ku)(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,(0,a.A)((0,a.A)({},r),{},{send_to:i}))}}(Se,De[e.app.options.appId],t,n,r).catch(e=>re.error(e))}const Ie="@firebase/analytics",Pe="0.10.19";(0,r.om)(new u.uA(te,(e,t)=>{let{options:n}=t;return Fe(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),(0,r.om)(new u.uA("analytics-internal",function(e){try{const t=e.getProvider(te).getImmediate();return{logEvent:(e,n,r)=>_e(t,e,n,r),setUserProperties:(e,n)=>Re(t,e,n)}}catch(t){throw oe.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,r.KO)(Ie,Pe),(0,r.KO)(Ie,Pe,"esm2020");var Me=n(889);const Ne={apiKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_API_KEY||"AIzaSyD8w8BevGoG5L5n5wSU5TrVyYe1qi008Do",authDomain:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_AUTH_DOMAIN||"run-plus-plans.firebaseapp.com",projectId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_PROJECT_ID||"run-plus-plans",storageBucket:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_STORAGE_BUCKET||"run-plus-plans.firebasestorage.app",messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_MESSAGING_SENDER_ID||"426458481793",appId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_APP_ID||"1:426458481793:web:dbcb81b021501d94e7f980",measurementId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_MEASUREMENT_ID||"G-HFHB0GWKCC"},je=(0,r.Wp)(Ne),Be=(0,i.xI)(je),Oe=(0,o.aU)(je),Le=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)();e=(0,l.Ku)(e);const t=(0,r.j6)(e,te);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(0,r.j6)(e,te);if(n.isInitialized()){const e=n.getImmediate();if((0,l.bD)(t,n.getOptions()))return e;throw oe.create("already-initialized")}const i=n.initialize({options:t})}(e)}(je),(0,Me.Uz)(je,"us-central1"))},144:(e,t,n)=>{n.d(t,{eJ:()=>gt,xI:()=>zn,hg:()=>bt,J1:()=>ft,x9:()=>yt,CI:()=>wt,r7:()=>vt});var r=n(986),i=n(379),o=n(150),a=n(776),s=n(965),l=n(606);const u=["providerId"],c=["uid","auth","stsTokenManager"],d=["providerId","signInMethod"];function h(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const p=h,m=new a.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),f=new s.Vy("@firebase/auth");function g(e){if(f.logLevel<=s.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];f.error("Auth (".concat(o.MF,"): ").concat(e),...n)}}function y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw D(e,...n)}function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return D(e,...n)}function b(e,t,n){const r=(0,i.A)((0,i.A)({},p()),{},{[t]:n});return new a.FA("auth","Firebase",r).create(t,{appName:e.name})}function w(e){return b(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function D(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return m.create(e,...n)}function k(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw D(t,...r)}}function x(e){const t="INTERNAL ASSERTION FAILED: "+e;throw g(t),new Error(t)}function E(e,t){e||x(t)}function S(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function C(){return"http:"===A()||"https:"===A()}function A(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class T{constructor(e,t){this.shortDelay=e,this.longDelay=t,E(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,a.jZ)()||(0,a.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(C()||(0,a.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function F(e,t){E(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class R{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void x("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void x("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void x("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},I=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],P=new T(3e4,6e4);function M(e,t){return e.tenantId&&!t.tenantId?(0,i.A)((0,i.A)({},t),{},{tenantId:e.tenantId}):t}async function N(e,t,n,r){return j(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let o={},s={};r&&("GET"===t?s=r:o={body:JSON.stringify(r)});const l=(0,a.Am)((0,i.A)({key:e.config.apiKey},s)).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const c=(0,i.A)({method:t,headers:u},o);return(0,a.c1)()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,a.zJ)(e.emulatorConfig.host)&&(c.credentials="include"),R.fetch()(await O(e,e.config.apiHost,n,l),c)})}async function j(e,t,n){e._canInitEmulator=!1;const r=(0,i.A)((0,i.A)({},_),t);try{const t=new W(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw q(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw q(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw q(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw q(e,"user-disabled",o);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw b(e,s,a);y(e,s)}}catch(o){if(o instanceof a.g)throw o;y(e,"network-request-failed",{message:String(o)})}}async function B(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await N(e,t,n,r,i);return"mfaPendingCredential"in o&&y(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function O(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),o=e,a=o.config.emulator?F(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(I.includes(n)&&(await o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())){return o._getPersistence()._getFinalTarget(a).toString()}return a}function L(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class W{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(v(this.auth,"network-request-failed")),P.get())})}}function q(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=v(e,t,r);return i.customData._tokenResponse=n,i}function U(e){return void 0!==e&&void 0!==e.enterprise}class z{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return L(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function H(e,t){return N(e,"GET","/v2/recaptchaConfig",M(e,t))}async function V(e,t){return N(e,"POST","/v1/accounts:lookup",t)}function K(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Y(e){return 1e3*Number(e)}function G(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return g("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,a.u)(n);return e?JSON.parse(e):(g("Failed to decode base64 JWT payload"),null)}catch(i){return g("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function Q(e){const t=G(e);return k(t,"internal-error"),k("undefined"!==typeof t.exp,"internal-error"),k("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Z(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof a.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class X{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class J{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=K(this.lastLoginAt),this.creationTime=K(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function $(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Z(e,V(n,{idToken:r}));k(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=null!==(t=o.providerUserInfo)&&void 0!==t&&t.length?ee(o.providerUserInfo):[],s=(l=e.providerData,u=a,[...l.filter(e=>!u.some(t=>t.providerId===e.providerId)),...u]);var l,u;const c=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null!==s&&void 0!==s&&s.length),h=!!c&&d,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new J(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,p)}function ee(e){return e.map(e=>{let{providerId:t}=e,n=(0,r.A)(e,u);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class te{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){k(e.idToken,"internal-error"),k("undefined"!==typeof e.idToken,"internal-error"),k("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Q(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){k(0!==e.length,"internal-error");const t=Q(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(k(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await j(e,{},async()=>{const n=(0,a.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=await O(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();s["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:s,body:n};return e.emulatorConfig&&(0,a.zJ)(e.emulatorConfig.host)&&(l.credentials="include"),R.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new te;return n&&(k("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(k("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(k("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new te,this.toJSON())}_performRefresh(){return x("not implemented")}}function ne(e,t){k("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class re{constructor(e){let{uid:t,auth:n,stsTokenManager:i}=e,o=(0,r.A)(e,c);this.providerId="firebase",this.proactiveRefresh=new X(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new J(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Z(this,this.stsTokenManager.getToken(this.auth,e));return k(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,a.Ku)(e),r=await n.getIdToken(t),i=G(r);k(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:K(Y(i.auth_time)),issuedAtTime:K(Y(i.iat)),expirationTime:K(Y(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,a.Ku)(e);await $(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(k(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>(0,i.A)({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new re((0,i.A)((0,i.A)({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){k(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await $(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,o.xZ)(this.auth.app))return Promise.reject(w(this.auth));const e=await this.getIdToken();return await Z(this,async function(e,t){return N(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return(0,i.A)((0,i.A)({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>(0,i.A)({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,o,a,s,l,u,c;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,p=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,m=null!==(a=t.photoURL)&&void 0!==a?a:void 0,f=null!==(s=t.tenantId)&&void 0!==s?s:void 0,g=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,y=null!==(u=t.createdAt)&&void 0!==u?u:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:w,isAnonymous:D,providerData:x,stsTokenManager:E}=t;k(b&&E,e,"internal-error");const S=te.fromJSON(this.name,E);k("string"===typeof b,e,"internal-error"),ne(d,e.name),ne(h,e.name),k("boolean"===typeof w,e,"internal-error"),k("boolean"===typeof D,e,"internal-error"),ne(p,e.name),ne(m,e.name),ne(f,e.name),ne(g,e.name),ne(y,e.name),ne(v,e.name);const C=new re({uid:b,auth:e,email:h,emailVerified:w,displayName:d,isAnonymous:D,photoURL:m,phoneNumber:p,tenantId:f,stsTokenManager:S,createdAt:y,lastLoginAt:v});return x&&Array.isArray(x)&&(C.providerData=x.map(e=>(0,i.A)({},e))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new te;r.updateFromServerResponse(t);const i=new re({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await $(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];k(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?ee(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),a=new te;a.updateFromIdToken(n);const s=new re({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new J(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(s,l),s}}const ie=new Map;function oe(e){E(e instanceof Function,"Expected a class definition");let t=ie.get(e);return t?(E(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ie.set(e,t),t)}class ae{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ae.type="NONE";const se=ae;function le(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ue{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=le(this.userKey,r.apiKey,i),this.fullPersistenceKey=le("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await V(this.auth,{idToken:e}).catch(()=>{});return t?re._fromGetAccountInfoResponse(this.auth,t,e):null}return re._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ue(oe(se),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||oe(se);const o=le(n,e.config.apiKey,e.name);let a=null;for(const u of t)try{const t=await u._get(o);if(t){let n;if("string"===typeof t){const r=await V(e,{idToken:t}).catch(()=>{});if(!r)break;n=await re._fromGetAccountInfoResponse(e,r,t)}else n=re._fromJSON(e,t);u!==i&&(a=n),i=u;break}}catch(l){}const s=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&s.length?(i=s[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(o)}catch(t){}})),new ue(i,e,n)):new ue(i,e,n)}}function ce(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(me(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(de(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ge(t))return"Blackberry";if(ye(t))return"Webos";if(he(t))return"Safari";if((t.includes("chrome/")||pe(t))&&!t.includes("edge/"))return"Chrome";if(fe(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/firefox\//i.test(e)}function he(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/crios\//i.test(e)}function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/iemobile/i.test(e)}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/android/i.test(e)}function ge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/blackberry/i.test(e)}function ye(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/webos/i.test(e)}function ve(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function be(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return ve(e)||fe(e)||ye(e)||ge(e)||/windows phone/i.test(e)||me(e)}function we(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ce((0,a.ZQ)());break;case"Worker":t="".concat(ce((0,a.ZQ)()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(o.MF,"/").concat(r)}class De{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class ke{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(o=s.containsNumericCharacter)||void 0===o||o),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class xe{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Se(this),this.idTokenSubscription=new Se(this),this.beforeStateQueue=new De(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=oe(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await ue.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(o){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await V(this,{idToken:e}),n=await re._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if((0,o.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,a;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,o=null===(a=n)||void 0===a?void 0:a._redirectEventId,s=await this.tryRedirectSignIn(e);t&&t!==o||null===s||void 0===s||!s.user||(n=s.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return k(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,o.xZ)(this.app))return Promise.reject(w(this));const t=e?(0,a.Ku)(e):null;return t&&k(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&k(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,o.xZ)(this.app)?Promise.reject(w(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,o.xZ)(this.app)?Promise.reject(w(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(oe(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return N(e,"GET","/v2/passwordPolicy",M(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ke(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new a.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return N(e,"POST","/v2/accounts:revokeToken",M(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&oe(e)||this._popupRedirectResolver;k(t,this,"argument-error"),this.redirectPersistenceManager=await ue.create(this,[oe(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(k(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return k(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=we(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if((0,o.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(f.logLevel<=s.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];f.warn("Auth (".concat(o.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ee(e){return(0,a.Ku)(e)}class Se{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,a.tD)(e=>this.observer=e)}get next(){return k(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ce={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ae(e){return Ce.loadJS(e)}function Te(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Fe{constructor(){this.enterprise=new Re}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Re{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const _e="NO_RECAPTCHA";class Ie{constructor(e){this.type="recaptcha-enterprise",this.auth=Ee(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;U(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(_e)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Fe).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{H(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new z(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&U(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ce.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Ae(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Pe(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=new Ie(e);let s;if(o)s=_e;else try{s=await a.verify(n)}catch(u){s=await a.verify(n,!0)}const l=(0,i.A)({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in l){const e=l.phoneEnrollmentInfo.phoneNumber,t=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const e=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:s}):Object.assign(l,{captchaResponse:s}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Me(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Pe(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Pe(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const i=await Pe(e,t,n);return r(e,i).catch(async i=>{var o;if("AUDIT"===(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Pe(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Pe(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Ne(e){const t=Ee(e),n=await H(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new z(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Ie(t).verify()}}function je(e,t,n){const r=Ee(e);k(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),o=Be(t),{host:s,port:l}=function(e){const t=Be(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Oe(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Oe(t)}}}(t),u=null===l?"":":".concat(l),c={url:"".concat(o,"//").concat(s).concat(u,"/")},d=Object.freeze({host:s,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return k(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void k((0,a.bD)(c,r.config.emulator)&&(0,a.bD)(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,(0,a.zJ)(s)?((0,a.gE)("".concat(o,"//").concat(s).concat(u)),(0,a.P1)("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Be(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Oe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Le{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return x("not implemented")}_getIdTokenResponse(e){return x("not implemented")}_linkToIdToken(e,t){return x("not implemented")}_getReauthenticationResolver(e){return x("not implemented")}}async function We(e,t){return N(e,"POST","/v1/accounts:signUp",t)}async function qe(e,t){return B(e,"POST","/v1/accounts:signInWithPassword",M(e,t))}async function Ue(e,t){return N(e,"POST","/v1/accounts:sendOobCode",M(e,t))}async function ze(e,t){return Ue(e,t)}class He extends Le{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new He(e,t,"password")}static _fromEmailAndCode(e,t){return new He(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Me(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",qe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return B(e,"POST","/v1/accounts:signInWithEmailLink",M(e,t))}(e,{email:this._email,oobCode:this._password});default:y(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Me(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",We,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return B(e,"POST","/v1/accounts:signInWithEmailLink",M(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:y(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ve(e,t){return B(e,"POST","/v1/accounts:signInWithIdp",M(e,t))}class Ke extends Le{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ke(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):y("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,o=(0,r.A)(t,d);if(!n||!i)return null;const a=new Ke(n,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){return Ve(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ve(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ve(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,a.Am)(t)}return e}}async function Ye(e,t){return N(e,"POST","/v1/accounts:sendVerificationCode",M(e,t))}const Ge={USER_NOT_FOUND:"user-not-found"};class Qe extends Le{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Qe({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Qe({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return B(e,"POST","/v1/accounts:signInWithPhoneNumber",M(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await B(e,"POST","/v1/accounts:signInWithPhoneNumber",M(e,t));if(n.temporaryProof)throw q(e,"account-exists-with-different-credential",n);return n}(e,(0,i.A)({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return B(e,"POST","/v1/accounts:signInWithPhoneNumber",M(e,(0,i.A)((0,i.A)({},t),{},{operation:"REAUTH"})),Ge)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Qe({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ze{constructor(e){var t,n,r,i,o,s;const l=(0,a.I9)((0,a.hp)(e)),u=null!==(t=l.apiKey)&&void 0!==t?t:null,c=null!==(n=l.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);k(u&&c&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=c,this.continueUrl=null!==(i=l.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=l.lang)&&void 0!==o?o:null,this.tenantId=null!==(s=l.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=(0,a.I9)((0,a.hp)(e)).link,n=t?(0,a.I9)((0,a.hp)(t)).deep_link_id:null,r=(0,a.I9)((0,a.hp)(e)).deep_link_id;return(r?(0,a.I9)((0,a.hp)(r)).link:null)||r||n||t||e}(e);try{return new Ze(t)}catch(n){return null}}}class Xe{constructor(){this.providerId=Xe.PROVIDER_ID}static credential(e,t){return He._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ze.parseLink(t);return k(n,"argument-error"),He._fromEmailAndCode(e,n.code,n.tenantId)}}Xe.PROVIDER_ID="password",Xe.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Xe.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Je{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class $e extends Je{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class et extends $e{constructor(){super("facebook.com")}static credential(e){return Ke._fromParams({providerId:et.PROVIDER_ID,signInMethod:et.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return et.credentialFromTaggedObject(e)}static credentialFromError(e){return et.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return et.credential(t.oauthAccessToken)}catch(n){return null}}}et.FACEBOOK_SIGN_IN_METHOD="facebook.com",et.PROVIDER_ID="facebook.com";class tt extends $e{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ke._fromParams({providerId:tt.PROVIDER_ID,signInMethod:tt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return tt.credentialFromTaggedObject(e)}static credentialFromError(e){return tt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return tt.credential(n,r)}catch(i){return null}}}tt.GOOGLE_SIGN_IN_METHOD="google.com",tt.PROVIDER_ID="google.com";class nt extends $e{constructor(){super("github.com")}static credential(e){return Ke._fromParams({providerId:nt.PROVIDER_ID,signInMethod:nt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nt.credentialFromTaggedObject(e)}static credentialFromError(e){return nt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return nt.credential(t.oauthAccessToken)}catch(n){return null}}}nt.GITHUB_SIGN_IN_METHOD="github.com",nt.PROVIDER_ID="github.com";class rt extends $e{constructor(){super("twitter.com")}static credential(e,t){return Ke._fromParams({providerId:rt.PROVIDER_ID,signInMethod:rt.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return rt.credentialFromTaggedObject(e)}static credentialFromError(e){return rt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return rt.credential(n,r)}catch(i){return null}}}async function it(e,t){return B(e,"POST","/v1/accounts:signUp",M(e,t))}rt.TWITTER_SIGN_IN_METHOD="twitter.com",rt.PROVIDER_ID="twitter.com";class ot{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await re._fromIdTokenResponse(e,n,r),o=at(n);return new ot({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=at(n);return new ot({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function at(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class st extends a.g{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,st.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new st(e,t,n,r)}}function lt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw st._fromErrorAndOperation(e,n,t,r);throw n})}async function ut(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Z(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ot._forOperation(e,"link",r)}async function ct(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if((0,o.xZ)(r.app))return Promise.reject(w(r));const i="reauthenticate";try{const o=await Z(e,lt(r,i,t,e),n);k(o.idToken,r,"internal-error");const a=G(o.idToken);k(a,r,"internal-error");const{sub:s}=a;return k(e.uid===s,r,"user-mismatch"),ot._forOperation(e,i,o)}catch(a){throw(null===a||void 0===a?void 0:a.code)==="auth/".concat("user-not-found")&&y(r,"user-mismatch"),a}}async function dt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,o.xZ)(e.app))return Promise.reject(w(e));const r="signIn",i=await lt(e,r,t),a=await ot._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function ht(e,t){return dt(Ee(e),t)}function pt(e,t,n){var r;k((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),k("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),k("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(k(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(k(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function mt(e){const t=Ee(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ft(e,t,n){const r=Ee(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&pt(r,i,n),await Me(r,i,"getOobCode",ze,"EMAIL_PASSWORD_PROVIDER")}async function gt(e,t,n){if((0,o.xZ)(e.app))return Promise.reject(w(e));const r=Ee(e),i=Me(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",it,"EMAIL_PASSWORD_PROVIDER"),a=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&mt(e),t}),s=await ot._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(s.user),s}function yt(e,t,n){return(0,o.xZ)(e.app)?Promise.reject(w(e)):ht((0,a.Ku)(e),Xe.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&mt(e),t})}async function vt(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=(0,a.Ku)(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await Z(i,async function(e,t){return N(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const l=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}function bt(e,t,n,r){return(0,a.Ku)(e).onAuthStateChanged(t,n,r)}function wt(e){return(0,a.Ku)(e).signOut()}function Dt(e,t){return N(e,"POST","/v2/accounts/mfaEnrollment:start",M(e,t))}new WeakMap;const kt="__sak";class xt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kt,"1"),this.storage.removeItem(kt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Et extends xt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=be(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,a.lT)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Et.type="LOCAL";const St=Et;function Ct(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function At(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Tt{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=At(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Ct(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=At(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=At(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Ct(n);const i=setInterval(()=>{const e=Ct(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Tt.type="COOKIE";class Ft extends xt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ft.type="SESSION";const Rt=Ft;class _t{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new _t(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(null===o||void 0===o||!o.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map(async e=>e(t.origin,i)),s=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function It(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}_t.receivers=[];class Pt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,s)=>{const l=It("",20);r.port1.start();const u=setTimeout(()=>{s(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{s(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(u),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Mt(){return window}function Nt(){return"undefined"!==typeof Mt().WorkerGlobalScope&&"function"===typeof Mt().importScripts}const jt="firebaseLocalStorageDb",Bt="firebaseLocalStorage",Ot="fbase_key";class Lt{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wt(e,t){return e.transaction([Bt],t?"readwrite":"readonly").objectStore(Bt)}function qt(){const e=indexedDB.open(jt,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Bt,{keyPath:Ot})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Bt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(jt);return new Lt(e).toPromise()}(),t(await qt()))})})}async function Ut(e,t,n){const r=Wt(e,!0).put({[Ot]:t,value:n});return new Lt(r).toPromise()}function zt(e,t){const n=Wt(e,!0).delete(t);return new Lt(n).toPromise()}class Ht{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await qt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Nt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_t._getInstance(Nt()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Pt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qt();return await Ut(e,kt,"1"),await zt(e,kt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ut(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Wt(e,!1).get(t),r=await new Lt(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>zt(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Wt(e,!1).getAll();return new Lt(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ht.type="LOCAL";const Vt=Ht;function Kt(e,t){return N(e,"POST","/v2/accounts/mfaSignIn:start",M(e,t))}Te("rcb"),new T(3e4,6e4);const Yt="recaptcha";async function Gt(e,t,n){if(!e._getRecaptchaConfig())try{await Ne(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){k("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},o=Me(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===_e){k((null===n||void 0===n?void 0:n.type)===Yt,e,"argument-error");return Dt(e,await Qt(e,t,n))}return Dt(e,t)},"PHONE_PROVIDER"),a=await o.catch(e=>Promise.reject(e));return a.phoneSessionInfo.sessionInfo}{var r;k("signin"===t.type,e,"internal-error");const o=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;k(o,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},s=Me(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===_e){k((null===n||void 0===n?void 0:n.type)===Yt,e,"argument-error");return Kt(e,await Qt(e,t,n))}return Kt(e,t)},"PHONE_PROVIDER"),l=await s.catch(e=>Promise.reject(e));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Me(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===_e){k((null===n||void 0===n?void 0:n.type)===Yt,e,"argument-error");return Ye(e,await Qt(e,t,n))}return Ye(e,t)},"PHONE_PROVIDER"),o=await r.catch(e=>Promise.reject(e));return o.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Qt(e,t,n){k(n.type===Yt,e,"argument-error");const r=await n.verify();k("string"===typeof r,e,"argument-error");const o=(0,i.A)({},t);if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.captchaResponse,n=o.phoneEnrollmentInfo.clientType,i=o.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),o}if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.captchaResponse,t=o.phoneSignInInfo.clientType,n=o.phoneSignInInfo.recaptchaVersion;return Object.assign(o,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),o}return Object.assign(o,{recaptchaToken:r}),o}class Zt{constructor(e){this.providerId=Zt.PROVIDER_ID,this.auth=Ee(e)}verifyPhoneNumber(e,t){return Gt(this.auth,e,(0,a.Ku)(t))}static credential(e,t){return Qe._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Zt.credentialFromTaggedObject(t)}static credentialFromError(e){return Zt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Qe._fromTokenResponse(n,r):null}}function Xt(e,t){return t?oe(t):(k(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Zt.PROVIDER_ID="phone",Zt.PHONE_SIGN_IN_METHOD="phone";class Jt extends Le{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ve(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ve(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ve(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $t(e){return dt(e.auth,new Jt(e),e.bypassAuthState)}function en(e){const{auth:t,user:n}=e;return k(n,t,"internal-error"),ct(n,new Jt(e),e.bypassAuthState)}async function tn(e){const{auth:t,user:n}=e;return k(n,t,"internal-error"),ut(n,new Jt(e),e.bypassAuthState)}class nn{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $t;case"linkViaPopup":case"linkViaRedirect":return tn;case"reauthViaPopup":case"reauthViaRedirect":return en;default:y(this.auth,"internal-error")}}resolve(e){E(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){E(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rn=new T(2e3,1e4);class on extends nn{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,on.currentPopupAction&&on.currentPopupAction.cancel(),on.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return k(e,this.auth,"internal-error"),e}async onExecution(){E(1===this.filter.length,"Popup operations only handle one event");const e=It();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(v(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(v(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,on.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(v(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,rn.get())};e()}}on.currentPopupAction=null;const an=new Map;class sn extends nn{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=an.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=cn(t),r=un(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}an.set(this.auth._key(),e)}return this.bypassAuthState||an.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ln(e,t){an.set(e._key(),t)}function un(e){return oe(e._redirectPersistence)}function cn(e){return le("pendingRedirect",e.config.apiKey,e.name)}async function dn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,o.xZ)(e.app))return Promise.reject(w(e));const r=Ee(e),i=Xt(r,t),a=new sn(r,i,n),s=await a.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class hn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!mn(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(v(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pn(e))}saveEventToCache(e){this.cachedEventUids.add(pn(e)),this.lastProcessedEventTime=Date.now()}}function pn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function mn(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const fn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gn=/^https?/;async function yn(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return N(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(vn(r))return}catch(n){}y(e,"unauthorized-domain")}function vn(e){const t=S(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!gn.test(n))return!1;if(fn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const bn=new T(3e4,6e4);function wn(){const e=Mt().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Dn(e){return new Promise((t,n)=>{var r,i;function o(){wn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{wn(),n(v(e,"network-request-failed"))},timeout:bn.get()})}if(null!==(r=Mt().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=Mt().gapi)||void 0===i||!i.load){const t=Te("iframefcb");return Mt()[t]=()=>{gapi.load?o():n(v(e,"network-request-failed"))},Ae("".concat(Ce.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw kn=null,e})}let kn=null;const xn=new T(5e3,15e3),En={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cn(e){const t=e.config;k(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?F(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:o.MF},i=Sn.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat((0,a.Am)(r).slice(1))}async function An(e){const t=await function(e){return kn=kn||Dn(e),kn}(e),n=Mt().gapi;return k(n,e,"internal-error"),t.open({where:document.body,url:Cn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:En,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=v(e,"network-request-failed"),o=Mt().setTimeout(()=>{r(i)},xn.get());function a(){Mt().clearTimeout(o),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const Tn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Fn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Rn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-o)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=(0,i.A)((0,i.A)({},Tn),{},{width:r.toString(),height:o.toString(),top:s,left:l}),d=(0,a.ZQ)().toLowerCase();n&&(u=pe(d)?"_blank":n),de(d)&&(t=t||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return ve(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(d)&&"_self"!==u)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new Fn(null);const p=window.open(t||"",u,h);k(p,e,"popup-blocked");try{p.focus()}catch(m){}return new Fn(p)}const _n="__/auth/handler",In="emulator/auth/handler",Pn=encodeURIComponent("fac");async function Mn(e,t,n,r,i,s){k(e.config.authDomain,e,"auth-domain-config-required"),k(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:o.MF,eventId:i};if(t instanceof Je){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,a.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))l[e]=t}if(t instanceof $e){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const u=l;for(const o of Object.keys(u))void 0===u[o]&&delete u[o];const c=await e._getAppCheckToken(),d=c?"#".concat(Pn,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(_n);return F(t,In)}(e),"?").concat((0,a.Am)(u).slice(1)).concat(d)}const Nn="webStorageSupport";const jn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rt,this._completeRedirectFn=dn,this._overrideRedirectResult=ln}async _openPopup(e,t,n,r){var i;E(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Rn(e,await Mn(e,t,n,S(),r),It())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Mt().location.href=e}(await Mn(e,t,n,S(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(E(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await An(e),n=new hn(e);return t.register("authEvent",t=>{k(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Nn,{type:Nn},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Nn];void 0!==i&&t(!!i),y(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yn(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return be()||he()||ve()}};var Bn="@firebase/auth",On="1.11.1";class Ln{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){k(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Wn=(0,a.XA)("authIdTokenMaxAge")||300;let qn=null;const Un=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Wn)return;const i=null===n||void 0===n?void 0:n.token;qn!==i&&(qn=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))};function zn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.Sx)();const t=(0,o.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,o.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,a.bD)(r,null!==t&&void 0!==t?t:{}))return e;y(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:jn,persistence:[Vt,St,Rt]}),r=(0,a.XA)("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=Un(e.toString());!function(e,t,n){(0,a.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,a.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}const i=(0,a.Tj)("auth");return i&&je(n,"http://".concat(i)),n}var Hn,Vn;Hn={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=v("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Ce=Hn,Vn="Browser",(0,o.om)(new l.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;k(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:s,clientPlatform:Vn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:we(Vn)},u=new xe(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(oe);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,o.om)(new l.uA("auth-internal",e=>(e=>new Ln(e))(Ee(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,o.KO)(Bn,On,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Vn)),(0,o.KO)(Bn,On,"esm2020")},146:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,r=/-([a-z])/g,i=/^[^-]+$/,o=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,s=function(e,t){return t.toUpperCase()},l=function(e,t){return"".concat(t,"-")};t.camelCase=function(e,t){return void 0===t&&(t={}),function(e){return!e||i.test(e)||n.test(e)}(e)?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(a,l):e.replace(o,l)).replace(r,s))}},150:(e,t,n)=>{n.d(t,{KO:()=>$,MF:()=>Z,Sx:()=>J,Wp:()=>X,j6:()=>V,om:()=>H,xZ:()=>K});var r=n(379),i=n(606),o=n(965),a=n(776),s=n(799);class l{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const u="@firebase/app",c="0.14.5",d=new o.Vy("@firebase/app"),h="@firebase/app-compat",p="@firebase/analytics-compat",m="@firebase/analytics",f="@firebase/app-check-compat",g="@firebase/app-check",y="@firebase/auth",v="@firebase/auth-compat",b="@firebase/database",w="@firebase/data-connect",D="@firebase/database-compat",k="@firebase/functions",x="@firebase/functions-compat",E="@firebase/installations",S="@firebase/installations-compat",C="@firebase/messaging",A="@firebase/messaging-compat",T="@firebase/performance",F="@firebase/performance-compat",R="@firebase/remote-config",_="@firebase/remote-config-compat",I="@firebase/storage",P="@firebase/storage-compat",M="@firebase/firestore",N="@firebase/ai",j="@firebase/firestore-compat",B="firebase",O="[DEFAULT]",L={[u]:"fire-core",[h]:"fire-core-compat",[m]:"fire-analytics",[p]:"fire-analytics-compat",[g]:"fire-app-check",[f]:"fire-app-check-compat",[y]:"fire-auth",[v]:"fire-auth-compat",[b]:"fire-rtdb",[w]:"fire-data-connect",[D]:"fire-rtdb-compat",[k]:"fire-fn",[x]:"fire-fn-compat",[E]:"fire-iid",[S]:"fire-iid-compat",[C]:"fire-fcm",[A]:"fire-fcm-compat",[T]:"fire-perf",[F]:"fire-perf-compat",[R]:"fire-rc",[_]:"fire-rc-compat",[I]:"fire-gcs",[P]:"fire-gcs-compat",[M]:"fire-fst",[j]:"fire-fst-compat",[N]:"fire-vertex","fire-js":"fire-js",[B]:"fire-js-all"},W=new Map,q=new Map,U=new Map;function z(e,t){try{e.container.addComponent(t)}catch(n){d.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function H(e){const t=e.name;if(U.has(t))return d.debug("There were multiple attempts to register component ".concat(t,".")),!1;U.set(t,e);for(const n of W.values())z(n,e);for(const n of q.values())z(n,e);return!0}function V(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function K(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Y={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},G=new a.FA("app","Firebase",Y);class Q{constructor(e,t,n){this._isDeleted=!1,this._options=(0,r.A)({},e),this._config=(0,r.A)({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw G.create("app-deleted",{appName:this._name})}}const Z="12.5.0";function X(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const o=(0,r.A)({name:O,automaticDataCollectionEnabled:!0},t),s=o.name;if("string"!==typeof s||!s)throw G.create("bad-app-name",{appName:String(s)});if(n||(n=(0,a.T9)()),!n)throw G.create("no-options");const l=W.get(s);if(l){if((0,a.bD)(n,l.options)&&(0,a.bD)(o,l.config))return l;throw G.create("duplicate-app",{appName:s})}const u=new i.h1(s);for(const r of U.values())u.addComponent(r);const c=new Q(n,o,u);return W.set(s,c),c}function J(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;const t=W.get(e);if(!t&&e===O&&(0,a.T9)())return X();if(!t)throw G.create("no-app",{appName:e});return t}function $(e,t,n){var r;let o=null!==(r=L[e])&&void 0!==r?r:e;n&&(o+="-".concat(n));const a=o.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const e=['Unable to register library "'.concat(o,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(o,'" contains illegal characters (whitespace or "/")')),a&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void d.warn(e.join(" "))}H(new i.uA("".concat(o,"-version"),()=>({library:o,version:t}),"VERSION"))}const ee="firebase-heartbeat-store";let te=null;function ne(){return te||(te=(0,s.P2)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ee)}catch(n){console.warn(n)}}}).catch(e=>{throw G.create("idb-open",{originalErrorMessage:e.message})})),te}async function re(e,t){try{const n=(await ne()).transaction(ee,"readwrite"),r=n.objectStore(ee);await r.put(t,ie(e)),await n.done}catch(n){if(n instanceof a.g)d.warn(n.message);else{const e=G.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});d.warn(e.message)}}}function ie(e){return"".concat(e.name,"!").concat(e.options.appId)}class oe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new se(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ae();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){d.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ae(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),le(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),le(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,a.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return d.warn(t),""}}}function ae(){return(new Date).toISOString().substring(0,10)}class se{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,a.zW)()&&(0,a.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ne()).transaction(ee),n=await t.objectStore(ee).get(ie(e));return await t.done,n}catch(t){if(t instanceof a.g)d.warn(t.message);else{const e=G.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});d.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function le(e){return(0,a.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var ue;ue="",H(new i.uA("platform-logger",e=>new l(e),"PRIVATE")),H(new i.uA("heartbeat",e=>new oe(e),"PRIVATE")),$(u,c,ue),$(u,c,"esm2020"),$("fire-js","")},166:(e,t,n)=>{n.d(t,{O:()=>o});var r=n(379),i=n(224);e=n.hmd(e);class o{constructor(){this.distanceMap={"10K":"10K","10k":"10K","10 K":"10K",Marathon:"marathon",marathon:"marathon",MARATHON:"marathon","Half Marathon":"halfMarathon",Half:"halfMarathon",half:"halfMarathon",halfMarathon:"halfMarathon",HalfMarathon:"halfMarathon"},this.validRanges={"10K":{min:"30:00",max:"90:00"},marathon:{min:"2:00:00",max:"6:00:00"},halfMarathon:{min:"1:00:00",max:"3:00:00"}}}timeToSeconds(e){const t=e.split(":").map(Number);if(2===t.length)return 60*t[0]+t[1];if(3===t.length)return 3600*t[0]+60*t[1]+t[2];throw new Error("Invalid time format. Use MM:SS or H:MM:SS")}secondsToTime(e){const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.round(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"))}normalizeDistance(e){const t=this.distanceMap[e];if(!t)throw new Error("Unsupported race distance: ".concat(e,". Use 'Marathon' or 'Half Marathon'"));return t}isWithinRange(e,t){const n=this.validRanges[e],r=this.timeToSeconds(n.min),i=this.timeToSeconds(n.max);return t>=r&&t<=i}getRangeMessage(e){const t=this.validRanges[e];return"Training plans are designed for ".concat("marathon"===e?"Marathon":"Half Marathon"," times between ").concat(t.min," and ").concat(t.max,". ")+"For goals outside this range, please reach out to the developer for additional support."}findExactMatch(e,t){const n=i.i0[e];return n&&n.find(e=>e.goalTime===t)||null}findSurroundingPoints(e,t){const n=i.i0[e];if(!n)return null;const o=n.map(e=>(0,r.A)((0,r.A)({},e),{},{seconds:this.timeToSeconds(e.goalTime)})).sort((e,t)=>e.seconds-t.seconds);let a=null,s=null;for(let r=0;r<o.length;r++)if(o[r].seconds<=t&&(a=o[r]),o[r].seconds>=t&&!s){s=o[r];break}return a&&s?{lowerPoint:a,upperPoint:s}:null}interpolatePace(e,t,n){const r=(0,i.iY)(e),o=r+((0,i.iY)(t)-r)*n;return(0,i.i8)(o)}interpolatePaceData(e,t,n){const r=this.findSurroundingPoints(e,n);if(!r)throw new Error("Unable to find data points for interpolation");const{lowerPoint:i,upperPoint:o}=r;if(i.goalTime===o.goalTime)return{goalTime:t,paces:i.paces,trackIntervals:i.trackIntervals,interpolated:!1};const a=o.seconds-i.seconds,s=(n-i.seconds)/a,l={easy:{min:this.interpolatePace(i.paces.easy.min,o.paces.easy.min,s),max:this.interpolatePace(i.paces.easy.max,o.paces.easy.max,s),km:i.paces.easy.km},marathon:{pace:this.interpolatePace(i.paces.marathon.pace,o.paces.marathon.pace,s),km:i.paces.marathon.km},threshold:{pace:this.interpolatePace(i.paces.threshold.pace,o.paces.threshold.pace,s),km:i.paces.threshold.km},interval:{pace:this.interpolatePace(i.paces.interval.pace,o.paces.interval.pace,s),km:i.paces.interval.km}},u={threshold:{},interval:{}};for(const[c,d]of Object.entries(i.trackIntervals.threshold))u.threshold[c]=this.interpolatePace(i.trackIntervals.threshold[c],o.trackIntervals.threshold[c],s);for(const[c,d]of Object.entries(i.trackIntervals.interval))u.interval[c]=this.interpolatePace(i.trackIntervals.interval[c],o.trackIntervals.interval[c],s);return{goalTime:t,paces:l,trackIntervals:u,interpolated:!0,interpolatedBetween:{lower:i.goalTime,upper:o.goalTime}}}getPaceData(e,t){const n=this.normalizeDistance(e),i=this.timeToSeconds(t);if(!this.isWithinRange(n,i))throw new Error(this.getRangeMessage(n));const o=this.findExactMatch(n,t);return o?(0,r.A)((0,r.A)({},o),{},{interpolated:!1}):this.interpolatePaceData(n,t,i)}calculateFromGoal(e,t){try{const n=this.getPaceData(e,t);return(0,r.A)({distance:e,goalTime:t,paces:{easy:{pace:"".concat(n.paces.easy.min,"-").concat(n.paces.easy.max),min:n.paces.easy.min,max:n.paces.easy.max,description:"Easy/Recovery runs",heartRate:"65-79% max HR"},marathon:{pace:n.paces.marathon.pace,description:"Marathon race pace",heartRate:"80-85% max HR"},threshold:{pace:n.paces.threshold.pace,description:"Tempo/Threshold runs",heartRate:"86-90% max HR"},interval:{pace:n.paces.interval.pace,description:"VO2 Max intervals (3-8 min)",heartRate:"95-100% max HR"}},trackIntervals:n.trackIntervals,interpolated:n.interpolated},n.interpolated&&{interpolatedBetween:n.interpolatedBetween})}catch(n){throw new Error("Pace calculation failed: ".concat(n.message))}}estimateCurrentVDOT(e,t){let n=30;return!e||e<=0?n=t>=40?40:t>=30?35:t>=20?32:30:(n=e>=18?42:e>=15?40:e>=13?38:e>=10?36:e>=8?34:e>=6?32:30,t>=50?n+=2:t<20&&(n-=2)),Math.max(25,Math.min(55,n))}estimateRaceTimeFromVDOT(e,t){const n={25:{"10K":"65:00",halfMarathon:"2:35:00",marathon:"5:30:00"},30:{"10K":"58:00",halfMarathon:"2:15:00",marathon:"4:45:00"},32:{"10K":"55:00",halfMarathon:"2:08:00",marathon:"4:30:00"},34:{"10K":"52:00",halfMarathon:"2:02:00",marathon:"4:15:00"},36:{"10K":"49:30",halfMarathon:"1:56:00",marathon:"4:02:00"},38:{"10K":"47:00",halfMarathon:"1:50:00",marathon:"3:50:00"},40:{"10K":"45:00",halfMarathon:"1:45:00",marathon:"3:40:00"},42:{"10K":"43:00",halfMarathon:"1:40:00",marathon:"3:30:00"},45:{"10K":"40:30",halfMarathon:"1:33:00",marathon:"3:15:00"},50:{"10K":"37:00",halfMarathon:"1:23:00",marathon:"2:55:00"}},r=Object.keys(n).map(Number).sort((e,t)=>e-t);let i=r[0];for(const a of r)Math.abs(a-e)<Math.abs(i-e)&&(i=a);const o=this.normalizeDistance(t);return n[i][o]||"2:00:00"}calculateFromCurrentFitness(e,t,n){const r=this.estimateCurrentVDOT(e,t),i=this.estimateRaceTimeFromVDOT(r,n);return console.log("\ud83d\udcca Estimated current fitness: VDOT ".concat(r," = ").concat(n," in ").concat(i)),this.calculateFromGoal(n,i)}blendPaces(e,t,n,r){const o=(n-1)/(r-1),a=this.smoothProgressionCurve(o),s=(e,t)=>{const n=(0,i.iY)(e),r=n-(n-(0,i.iY)(t))*a;return(0,i.i8)(r)},l=e.paces||e,u=t.paces||t;return{paces:{easy:(c=l.easy.min,d=l.easy.max,h=u.easy.min,p=u.easy.max,{min:s(c,h),max:s(d,p)}),marathon:{pace:s(l.marathon.pace,u.marathon.pace)},threshold:{pace:s(l.threshold.pace,u.threshold.pace)},interval:{pace:s(l.interval.pace,u.interval.pace)}},progressionRatio:a,weekNumber:n,totalWeeks:r};var c,d,h,p}smoothProgressionCurve(e){return e<.3?.5*e:e<.7?.15+1.5*(e-.3):.75+.833*(e-.7)}calculateRunEqDistance(e){const t=2*e;return{runDistance:e,bikeDistance:t,factor:2,description:"Ride ".concat(t," miles on stand-up bike (").concat(2,"x run equivalent)")}}getAvailableGoalTimes(e){const t=this.normalizeDistance(e),n=i.i0[t];return n?n.map(e=>e.goalTime):[]}}e.exports&&(e.exports={PaceCalculator:o})},180:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var o in r={},t)"key"!==o&&(r[o]=t[o]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},222:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let n=null;if(!e||"string"!==typeof e)return n;const r=(0,i.default)(e),o="function"===typeof t;return r.forEach(e=>{if("declaration"!==e.type)return;const{property:r,value:i}=e;o?t(r,i,e):i&&(n=n||{},n[r]=i)}),n};const i=r(n(106))},224:(e,t,n)=>{n.d(t,{i0:()=>r,i8:()=>o,iY:()=>i});const r={marathon:[{goalTime:"6:00:00",paces:{easy:{min:"12:52",max:"14:04",km:"8:00-8:44"},marathon:{pace:"13:38",km:"8:28"},threshold:{pace:"11:42",km:"7:16"},interval:{pace:"10:00",km:"6:13"}},trackIntervals:{threshold:{"1200m":"8:43","800m":"5:49","600m":"4:22"},interval:{"400m":"2:29","300m":"1:53","200m":"1:15"}}},{goalTime:"5:45:00",paces:{easy:{min:"12:35",max:"13:45",km:"7:49-8:33"},marathon:{pace:"13:05",km:"8:08"},threshold:{pace:"11:20",km:"7:02"},interval:{pace:"9:46",km:"6:04"}},trackIntervals:{threshold:{"1200m":"8:27","800m":"5:38","600m":"4:13"},interval:{"400m":"2:26","300m":"1:49","200m":"1:13"}}},{goalTime:"5:30:00",paces:{easy:{min:"12:17",max:"13:26",km:"7:38-8:21"},marathon:{pace:"12:32",km:"7:47"},threshold:{pace:"10:57",km:"6:49"},interval:{pace:"9:31",km:"5:55"}},trackIntervals:{threshold:{"1200m":"8:10","800m":"5:27","600m":"4:05"},interval:{"400m":"2:22","300m":"1:46","200m":"1:11"}}},{goalTime:"5:15:00",paces:{easy:{min:"11:58",max:"13:06",km:"7:26-8:08"},marathon:{pace:"11:58",km:"7:26"},threshold:{pace:"10:34",km:"6:34"},interval:{pace:"9:16",km:"5:45"}},trackIntervals:{threshold:{"1200m":"7:53","800m":"5:15","600m":"3:57"},interval:{"400m":"2:18","300m":"1:44","200m":"1:09"}}},{goalTime:"5:00:00",paces:{easy:{min:"11:38",max:"12:45",km:"7:14-7:55"},marathon:{pace:"11:25",km:"7:05"},threshold:{pace:"10:11",km:"6:20"},interval:{pace:"9:00",km:"5:35"}},trackIntervals:{threshold:{"1200m":"7:36","800m":"5:04","600m":"3:48"},interval:{"400m":"2:14","300m":"1:41","200m":"1:07"}}},{goalTime:"4:45:00",paces:{easy:{min:"11:18",max:"12:23",km:"7:01-7:42"},marathon:{pace:"10:51",km:"6:45"},threshold:{pace:"9:47",km:"6:05"},interval:{pace:"8:43",km:"5:25"}},trackIntervals:{threshold:{"1200m":"7:18","800m":"4:52","600m":"3:39"},interval:{"400m":"2:10","300m":"1:38","200m":"1:05"}}},{goalTime:"4:30:00",paces:{easy:{min:"10:57",max:"12:00",km:"6:48-7:27"},marathon:{pace:"10:17",km:"6:24"},threshold:{pace:"9:22",km:"5:49"},interval:{pace:"8:26",km:"5:15"}},trackIntervals:{threshold:{"1200m":"6:59","800m":"4:40","600m":"3:30"},interval:{"400m":"2:06","300m":"1:34","200m":"1:03"}}},{goalTime:"4:15:00",paces:{easy:{min:"10:34",max:"11:36",km:"6:34-7:13"},marathon:{pace:"9:43",km:"6:02"},threshold:{pace:"8:57",km:"5:34"},interval:{pace:"8:08",km:"5:03"}},trackIntervals:{threshold:{"1200m":"6:41","800m":"4:27","600m":"3:20"},interval:{"400m":"2:01","300m":"1:31","200m":"1:01"}}},{goalTime:"4:00:00",paces:{easy:{min:"10:11",max:"11:11",km:"6:20-6:57"},marathon:{pace:"9:09",km:"5:41"},threshold:{pace:"8:32",km:"5:18"},interval:{pace:"7:50",km:"4:52"}},trackIntervals:{threshold:{"1200m":"6:22","800m":"4:14","600m":"3:11"},interval:{"400m":"1:57","300m":"1:28","200m":"0:58"}}},{goalTime:"3:45:00",paces:{easy:{min:"9:39",max:"10:36",km:"6:00-6:35"},marathon:{pace:"8:35",km:"5:20"},threshold:{pace:"8:02",km:"5:00"},interval:{pace:"7:24",km:"4:36"}},trackIntervals:{threshold:{"1200m":"6:00","800m":"4:00","600m":"3:00"},interval:{"400m":"1:50","300m":"1:23","200m":"0:55"}}},{goalTime:"3:30:00",paces:{easy:{min:"9:02",max:"9:56",km:"5:37-6:11"},marathon:{pace:"8:01",km:"4:59"},threshold:{pace:"7:31",km:"4:40"},interval:{pace:"6:55",km:"4:18"}},trackIntervals:{threshold:{"1200m":"5:36","800m":"3:44","600m":"2:48"},interval:{"400m":"1:43","300m":"1:17","200m":"0:52"}}},{goalTime:"3:15:00",paces:{easy:{min:"8:25",max:"9:16",km:"5:14-5:46"},marathon:{pace:"7:26",km:"4:37"},threshold:{pace:"7:00",km:"4:21"},interval:{pace:"6:26",km:"4:00"}},trackIntervals:{threshold:{"1200m":"5:13","800m":"3:29","600m":"2:37"},interval:{"400m":"1:36","300m":"1:12","200m":"0:48"}}},{goalTime:"3:00:00",paces:{easy:{min:"7:48",max:"8:36",km:"4:51-5:21"},marathon:{pace:"6:52",km:"4:16"},threshold:{pace:"6:29",km:"4:02"},interval:{pace:"5:58",km:"3:42"}},trackIntervals:{threshold:{"1200m":"4:50","800m":"3:13","600m":"2:25"},interval:{"400m":"1:29","300m":"1:07","200m":"0:44"}}},{goalTime:"2:45:00",paces:{easy:{min:"7:11",max:"7:55",km:"4:28-4:55"},marathon:{pace:"6:18",km:"3:55"},threshold:{pace:"5:58",km:"3:42"},interval:{pace:"5:29",km:"3:24"}},trackIntervals:{threshold:{"1200m":"4:27","800m":"2:58","600m":"2:13"},interval:{"400m":"1:22","300m":"1:01","200m":"0:41"}}},{goalTime:"2:30:00",paces:{easy:{min:"6:33",max:"7:14",km:"4:04-4:30"},marathon:{pace:"5:43",km:"3:33"},threshold:{pace:"5:27",km:"3:23"},interval:{pace:"5:01",km:"3:07"}},trackIntervals:{threshold:{"1200m":"4:04","800m":"2:42","600m":"2:02"},interval:{"400m":"1:15","300m":"0:56","200m":"0:37"}}},{goalTime:"2:15:00",paces:{easy:{min:"5:56",max:"6:33",km:"3:41-4:04"},marathon:{pace:"5:09",km:"3:12"},threshold:{pace:"4:56",km:"3:04"},interval:{pace:"4:32",km:"2:49"}},trackIntervals:{threshold:{"1200m":"3:40","800m":"2:27","600m":"1:50"},interval:{"400m":"1:08","300m":"0:51","200m":"0:34"}}},{goalTime:"2:00:00",paces:{easy:{min:"5:18",max:"5:51",km:"3:18-3:38"},marathon:{pace:"4:34",km:"2:50"},threshold:{pace:"4:25",km:"2:44"},interval:{pace:"4:04",km:"2:32"}},trackIntervals:{threshold:{"1200m":"3:17","800m":"2:12","600m":"1:39"},interval:{"400m":"1:01","300m":"0:45","200m":"0:30"}}}],"10K":[{goalTime:"80:00",paces:{easy:{min:"13:14",max:"14:28",km:"8:13-8:59"},marathon:{pace:"14:04",km:"8:44"},threshold:{pace:"11:58",km:"7:26"},interval:{pace:"10:11",km:"6:20"}},trackIntervals:{threshold:{"1200m":"8:56","800m":"5:58","600m":"4:28"},interval:{"400m":"2:32","300m":"1:54","200m":"1:16"}}},{goalTime:"70:00",paces:{easy:{min:"12:18",max:"13:27",km:"7:38-8:21"},marathon:{pace:"12:35",km:"7:49"},threshold:{pace:"10:59",km:"6:49"},interval:{pace:"9:33",km:"5:56"}},trackIntervals:{threshold:{"1200m":"8:12","800m":"5:28","600m":"4:06"},interval:{"400m":"2:23","300m":"1:47","200m":"1:11"}}},{goalTime:"60:00",paces:{easy:{min:"11:11",max:"12:15",km:"6:57-7:37"},marathon:{pace:"10:58",km:"6:49"},threshold:{pace:"9:48",km:"6:05"},interval:{pace:"8:39",km:"5:22"}},trackIntervals:{threshold:{"1200m":"7:19","800m":"4:53","600m":"3:40"},interval:{"400m":"2:09","300m":"1:37","200m":"1:04"}}},{goalTime:"55:00",paces:{easy:{min:"10:32",max:"11:32",km:"6:33-7:10"},marathon:{pace:"10:15",km:"6:22"},threshold:{pace:"9:09",km:"5:41"},interval:{pace:"8:08",km:"5:03"}},trackIntervals:{threshold:{"1200m":"6:50","800m":"4:33","600m":"3:25"},interval:{"400m":"2:01","300m":"1:31","200m":"1:01"}}},{goalTime:"50:00",paces:{easy:{min:"9:51",max:"10:48",km:"6:07-6:43"},marathon:{pace:"9:29",km:"5:53"},threshold:{pace:"8:29",km:"5:16"},interval:{pace:"7:35",km:"4:43"}},trackIntervals:{threshold:{"1200m":"6:20","800m":"4:13","600m":"3:10"},interval:{"400m":"1:53","300m":"1:25","200m":"0:57"}}},{goalTime:"45:00",paces:{easy:{min:"9:07",max:"10:00",km:"5:40-6:13"},marathon:{pace:"8:41",km:"5:23"},threshold:{pace:"7:46",km:"4:50"},interval:{pace:"6:58",km:"4:20"}},trackIntervals:{threshold:{"1200m":"5:48","800m":"3:52","600m":"2:54"},interval:{"400m":"1:44","300m":"1:18","200m":"0:52"}}},{goalTime:"42:00",paces:{easy:{min:"8:42",max:"9:32",km:"5:24-5:56"},marathon:{pace:"8:15",km:"5:08"},threshold:{pace:"7:23",km:"4:35"},interval:{pace:"6:38",km:"4:07"}},trackIntervals:{threshold:{"1200m":"5:31","800m":"3:40","600m":"2:45"},interval:{"400m":"1:39","300m":"1:14","200m":"0:50"}}},{goalTime:"38:00",paces:{easy:{min:"8:07",max:"8:56",km:"5:02-5:33"},marathon:{pace:"7:36",km:"4:43"},threshold:{pace:"6:51",km:"4:15"},interval:{pace:"6:10",km:"3:50"}},trackIntervals:{threshold:{"1200m":"5:07","800m":"3:24","600m":"2:33"},interval:{"400m":"1:32","300m":"1:09","200m":"0:46"}}},{goalTime:"32:00",paces:{easy:{min:"7:13",max:"7:56",km:"4:29-4:56"},marathon:{pace:"6:40",km:"4:09"},threshold:{pace:"6:03",km:"3:45"},interval:{pace:"5:28",km:"3:23"}},trackIntervals:{threshold:{"1200m":"4:31","800m":"3:01","600m":"2:16"},interval:{"400m":"1:22","300m":"1:01","200m":"0:41"}}}],halfMarathon:[{goalTime:"3:00:00",paces:{easy:{min:"12:59",max:"14:11",km:"8:04-8:49"},marathon:{pace:"13:51",km:"8:36"},threshold:{pace:"11:50",km:"7:21"},interval:{pace:"10:05",km:"6:16"}},trackIntervals:{threshold:{"1200m":"8:50","800m":"5:53","600m":"4:25"},interval:{"400m":"2:30","300m":"1:53","200m":"1:15"}}},{goalTime:"2:45:00",paces:{easy:{min:"12:25",max:"13:34",km:"7:43-8:26"},marathon:{pace:"12:46",km:"7:56"},threshold:{pace:"11:07",km:"6:55"},interval:{pace:"9:37",km:"5:59"}},trackIntervals:{threshold:{"1200m":"8:17","800m":"5:32","600m":"4:09"},interval:{"400m":"2:23","300m":"1:48","200m":"1:12"}}},{goalTime:"2:30:00",paces:{easy:{min:"11:48",max:"12:55",km:"7:20-8:02"},marathon:{pace:"11:40",km:"7:15"},threshold:{pace:"10:22",km:"6:26"},interval:{pace:"9:07",km:"5:40"}},trackIntervals:{threshold:{"1200m":"7:44","800m":"5:09","600m":"3:52"},interval:{"400m":"2:16","300m":"1:42","200m":"1:08"}}},{goalTime:"2:15:00",paces:{easy:{min:"11:07",max:"12:12",km:"6:55-7:35"},marathon:{pace:"10:34",km:"6:34"},threshold:{pace:"9:35",km:"5:57"},interval:{pace:"8:35",km:"5:20"}},trackIntervals:{threshold:{"1200m":"7:08","800m":"4:46","600m":"3:34"},interval:{"400m":"2:08","300m":"1:36","200m":"1:04"}}},{goalTime:"2:00:00",paces:{easy:{min:"10:23",max:"11:24",km:"6:27-7:05"},marathon:{pace:"9:27",km:"5:52"},threshold:{pace:"8:45",km:"5:26"},interval:{pace:"7:59",km:"4:58"}},trackIntervals:{threshold:{"1200m":"6:32","800m":"4:21","600m":"3:16"},interval:{"400m":"1:59","300m":"1:29","200m":"1:00"}}},{goalTime:"1:45:00",paces:{easy:{min:"9:21",max:"10:17",km:"5:49-6:23"},marathon:{pace:"8:19",km:"5:10"},threshold:{pace:"7:48",km:"4:51"},interval:{pace:"7:10",km:"4:27"}},trackIntervals:{threshold:{"1200m":"5:49","800m":"3:52","600m":"2:54"},interval:{"400m":"1:47","300m":"1:20","200m":"0:53"}}},{goalTime:"1:30:00",paces:{easy:{min:"8:07",max:"8:56",km:"5:02-5:33"},marathon:{pace:"7:09",km:"4:27"},threshold:{pace:"6:45",km:"4:11"},interval:{pace:"6:12",km:"3:51"}},trackIntervals:{threshold:{"1200m":"5:02","800m":"3:21","600m":"2:31"},interval:{"400m":"1:33","300m":"1:09","200m":"0:46"}}},{goalTime:"1:15:00",paces:{easy:{min:"6:51",max:"7:33",km:"4:15-4:42"},marathon:{pace:"5:59",km:"3:43"},threshold:{pace:"5:41",km:"3:32"},interval:{pace:"5:14",km:"3:15"}},trackIntervals:{threshold:{"1200m":"4:14","800m":"2:49","600m":"2:07"},interval:{"400m":"1:18","300m":"0:58","200m":"0:39"}}},{goalTime:"1:00:00",paces:{easy:{min:"5:33",max:"6:07",km:"3:27-3:48"},marathon:{pace:"4:47",km:"2:59"},threshold:{pace:"4:36",km:"2:52"},interval:{pace:"4:15",km:"2:38"}},trackIntervals:{threshold:{"1200m":"3:26","800m":"2:17","600m":"1:43"},interval:{"400m":"1:03","300m":"0:47","200m":"0:32"}}}]};function i(e){const t=e.split(":").map(Number);return 60*t[0]+t[1]}function o(e){const t=Math.floor(e/60),n=Math.round(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))}},240:e=>{var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},a=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var r,i=t.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!o)return!1;for(r in e);return"undefined"===typeof r||t.call(e,r)},s=function(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(i)return i(e,n).value}return e[n]};e.exports=function e(){var t,n,r,i,u,c,d=arguments[0],h=1,p=arguments.length,m=!1;for("boolean"===typeof d&&(m=d,d=arguments[1]||{},h=2),(null==d||"object"!==typeof d&&"function"!==typeof d)&&(d={});h<p;++h)if(null!=(t=arguments[h]))for(n in t)r=l(d,n),d!==(i=l(t,n))&&(m&&i&&(a(i)||(u=o(i)))?(u?(u=!1,c=r&&o(r)?r:[]):c=r&&a(r)?r:{},s(d,{name:n,newValue:e(m,c,i)})):"undefined"!==typeof i&&s(d,{name:n,newValue:i}));return d}},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,f(w,y.prototype),w.isPureReactComponent=!0;var D=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},x=Object.prototype.hasOwnProperty;function E(e,t,r,i,o,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(){}function F(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l,u,c=!1;if(null===e)c=!0;else switch(s){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0;break;case h:return F((c=e._init)(e._payload),t,i,o,a)}}if(c)return a=a(e),c=""===o?"."+A(e,0):o,D(a)?(i="",null!=c&&(i=c.replace(C,"$&/")+"/"),F(a,t,i,"",function(e){return e})):null!=a&&(S(a)&&(l=a,u=i+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+c,a=E(l.type,u,void 0,0,0,l.props)),t.push(a)),1;c=0;var d,m=""===o?".":o+":";if(D(e))for(var f=0;f<e.length;f++)c+=F(o=e[f],t,i,s=m+A(o,f),a);else if("function"===typeof(f=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=f.call(e),f=0;!(o=e.next()).done;)c+=F(o=o.value,t,i,s=m+A(o,f++),a);else if("object"===s){if("function"===typeof e.then)return F(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(T,T):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,o,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function R(e,t,n){if(null==e)return e;var r=[],i=0;return F(e,r,"","",function(e){return t.call(n,e,i++)}),r}function _(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function P(){}t.Children={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return k.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=f({},e.props),i=e.key;if(null!=t)for(o in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!x.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var a=Array(o),s=0;s<o;s++)a[s]=arguments[s+2];r.children=a}return E(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,i={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)x.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var s=Array(a),l=0;l<a;l++)s[l]=arguments[l+2];i.children=s}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return E(e,o,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:_}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var r=e(),i=k.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(P,I)}catch(o){I(o)}finally{k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=k.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.1.1"},294:function(e,t,n){var r=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(n(222)),i=n(146);function o(e,t){var n={};return e&&"string"===typeof e?((0,r.default)(e,function(e,r){e&&r&&(n[(0,i.camelCase)(e,t)]=r)}),n):n}o.default=o,e.exports=o},379:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(705);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(180)},606:(e,t,n)=>{n.d(t,{h1:()=>s,uA:()=>i});var r=n(776);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const o="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===o?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.component?this.component.multipleInstances?e:o:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class s{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},667:(e,t,n)=>{n.d(t,{arrayUnion:()=>yu,rJ:()=>nl,kd:()=>hu,doc:()=>rl,getDoc:()=>su,GG:()=>uu,aU:()=>ul,aQ:()=>pu,P:()=>Yl,serverTimestamp:()=>gu,setDoc:()=>cu,updateDoc:()=>du,_M:()=>Ql});var r,i,o=n(379),a=n(150),s=n(606),l=n(965),u=n(776),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},d={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let o,a=e.g[3];o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[3]+3250441966&4294967295,o=t+(a^(n=i+(o<<22&4294967295|o>>>10))&(i^a))+r[4]+4118548399&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[7]+4249261313&4294967295,o=t+(a^(n=i+(o<<22&4294967295|o>>>10))&(i^a))+r[8]+1770035416&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[11]+2304563134&4294967295,o=t+(a^(n=i+(o<<22&4294967295|o>>>10))&(i^a))+r[12]+1804603682&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[15]+1236535329&4294967295,o=t+(i^a&((n=i+(o<<22&4294967295|o>>>10))^i))+r[1]+4129170786&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[0]+3921069994&4294967295,o=t+(i^a&((n=i+(o<<20&4294967295|o>>>12))^i))+r[5]+3593408605&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[4]+3889429448&4294967295,o=t+(i^a&((n=i+(o<<20&4294967295|o>>>12))^i))+r[9]+568446438&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[8]+1163531501&4294967295,o=t+(i^a&((n=i+(o<<20&4294967295|o>>>12))^i))+r[13]+2850285829&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[12]+2368359562&4294967295,o=t+((n=i+(o<<20&4294967295|o>>>12))^i^a)+r[5]+4294588738&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[14]+4259657740&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^a)+r[1]+2763975236&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[10]+3200236656&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^a)+r[13]+681279174&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[6]+76029189&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^a)+r[9]+3654602809&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[2]+3299628645&4294967295,o=t+(i^((n=i+(o<<23&4294967295|o>>>9))|~a))+r[0]+4096336452&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[5]+4237533241&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~a))+r[12]+1700485571&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[1]+2240044497&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~a))+r[8]+1873313359&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[13]+1309151649&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~a))+r[4]+4149444226&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function o(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let o=this.h,a=0;for(;a<t;){if(0==o)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[o++]=e.charCodeAt(a++),o==this.blockSize){n(this,i),o=0;break}}else for(;a<t;)if(i[o++]=e[a++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var a={};function s(e){return-128<=e&&e<128?function(e,t){var n=a;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new o([0|e],e<0?-1:0)}):new o([0|e],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return u;if(e<0)return f(l(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}var u=s(0),c=s(1),h=s(16777216);function p(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function m(e){return-1==e.h}function f(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(c)}function g(e,t){return e.add(f(t))}function y(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function v(e,t){this.g=e,this.h=t}function b(e,t){if(p(t))throw Error("division by zero");if(p(e))return new v(u,u);if(m(e))return t=b(f(e),t),new v(f(t.g),f(t.h));if(m(t))return t=b(e,f(t)),new v(f(t.g),t.h);if(e.g.length>30){if(m(e)||m(t))throw Error("slowDivide_ only works with positive integers.");for(var n=c,r=t;r.l(e)<=0;)n=w(n),r=w(r);var i=D(n,1),o=D(r,1);for(r=D(r,2),n=D(n,2);!p(r);){var a=o.add(r);a.l(e)<=0&&(i=i.add(n),o=a),r=D(r,1),n=D(n,1)}return t=g(e,i.j(t)),new v(i,t)}for(i=u;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),a=(o=l(n)).j(t);m(a)||a.l(e)>0;)a=(o=l(n-=r)).j(t);p(o)&&(o=c),i=i.add(o),e=g(e,a)}return new v(i,e)}function w(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function D(e,t){const n=t>>5;t%=32;const r=e.g.length-n,i=[];for(let o=0;o<r;o++)i[o]=t>0?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new o(i,e.h)}(e=o.prototype).m=function(){if(m(this))return-f(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(p(this))return"0";if(m(this))return"-"+f(this).toString(e);const t=l(Math.pow(e,6));var n=this;let r="";for(;;){const i=b(n,t).g;let o=(((n=g(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(p(n=i))return o+r;for(;o.length<6;)o="0"+o;r=o+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return m(e=g(this,e))?-1:p(e)?0:1},e.abs=function(){return m(this)?f(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let r=0;for(let i=0;i<=t;i++){let t=r+(65535&this.i(i))+(65535&e.i(i)),o=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=o>>>16,t&=65535,o&=65535,n[i]=o<<16|t}return new o(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(p(this)||p(e))return u;if(m(this))return m(e)?f(this).j(f(e)):f(f(this).j(e));if(m(e))return f(this.j(f(e)));if(this.l(h)<0&&e.l(h)<0)return l(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){const i=this.i(r)>>>16,o=65535&this.i(r),a=e.i(t)>>>16,s=65535&e.i(t);n[2*r+2*t]+=o*s,y(n,2*r+2*t),n[2*r+2*t+1]+=i*s,y(n,2*r+2*t+1),n[2*r+2*t+1]+=o*a,y(n,2*r+2*t+1),n[2*r+2*t+2]+=i*a,y(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new o(n,0)},e.B=function(e){return b(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,i=d.Md5=t,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return f(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=l(Math.pow(n,8));let i=u;for(let a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+o),n);o<8?(o=l(Math.pow(n,o)),i=i.j(o).add(l(e))):(i=i.j(r),i=i.add(l(e)))}return i},r=d.Integer=o}).apply("undefined"!==typeof c?c:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var h,p,m,f,g,y,v,b,w="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},D={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof w&&w];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in i))break e;i=i[a]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},o=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=s).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function c(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function k(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function E(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function S(e){o.setTimeout(()=>{throw e},0)}function C(){var e=_;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var A=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new T,e=>e.reset());class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let F,R=!1,_=new class{constructor(){this.h=this.g=null}add(e,t){const n=A.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},I=()=>{const e=Promise.resolve(void 0);F=()=>{e.then(P)}};function P(){for(var e;e=C();){try{e.h.call(e.g)}catch(n){S(n)}var t=A;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}R=!1}function M(){this.u=this.u,this.C=this.C}function N(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},N.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};o.addEventListener("test",e,t),o.removeEventListener("test",e,t)}catch(n){}return e}();function B(e){return/^[\s\xa0]*$/.test(e)}function O(e,t){N.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}c(O,N),O.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&O.Z.h.call(this)},O.prototype.h=function(){O.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),W=0;function q(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++W,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function H(e){const t={};for(const n in e)t[n]=e[n];return t}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<V.length;t++)n=V[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Y(e){this.src=e,this.g={},this.h=0}function G(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=o>=0)&&Array.prototype.splice.call(i,o,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Q(e,t,n,r){for(let i=0;i<e.length;++i){const o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}Y.prototype.add=function(e,t,n,r,i){const o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);const a=Q(e,t,r,i);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new q(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var Z="closure_lm_"+(1e6*Math.random()|0),X={};function J(e,t,n,r,i){if(r&&r.once)return ee(e,t,n,r,i);if(Array.isArray(t)){for(let o=0;o<t.length;o++)J(e,t[o],n,r,i);return null}return n=le(n),e&&e[L]?e.J(t,n,a(r)?!!r.capture:!!r,i):$(e,t,n,!1,r,i)}function $(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");const s=a(i)?!!i.capture:!!i;let l=ae(e);if(l||(e[Z]=l=new Y(e)),(n=l.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=oe;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)j||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ie(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ee(e,t,n,r,i){if(Array.isArray(t)){for(let o=0;o<t.length;o++)ee(e,t[o],n,r,i);return null}return n=le(n),e&&e[L]?e.K(t,n,a(r)?!!r.capture:!!r,i):$(e,t,n,!0,r,i)}function ne(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)ne(e,t[o],n,r,i);else r=a(r)?!!r.capture:!!r,n=le(n),e&&e[L]?(e=e.i,(o=String(t).toString())in e.g&&((n=Q(t=e.g[o],n,r,i))>-1&&(U(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[o],e.h--)))):e&&(e=ae(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Q(t,n,r,i)),(n=e>-1?t[e]:null)&&re(n))}function re(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])G(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ie(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ae(t))?(G(n,e),0==n.h&&(n.src=null,t[Z]=null)):U(e)}}}function ie(e){return e in X?X[e]:X[e]="on"+e}function oe(e,t){if(e.da)e=!0;else{t=new O(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&re(e),e=n.call(r,t)}return e}function ae(e){return(e=e[Z])instanceof Y?e:null}var se="__closure_events_fn_"+(1e9*Math.random()>>>0);function le(e){return"function"===typeof e?e:(e[se]||(e[se]=function(t){return e.handleEvent(t)}),e[se])}function ue(){M.call(this),this.i=new Y(this),this.M=this,this.G=null}function ce(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new N(t,e);else if(t instanceof N)t.target=t.target||e;else{var i=t;K(t=new N(r,e),i)}let o,a;if(i=!0,n)for(a=n.length-1;a>=0;a--)o=t.g=n[a],i=de(o,r,!0,t)&&i;if(o=t.g=e,i=de(o,r,!0,t)&&i,i=de(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)o=t.g=n[a],i=de(o,r,!1,t)&&i}function de(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let o=0;o<t.length;++o){const a=t[o];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&G(e.i,a),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function he(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,he(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}c(ue,M),ue.prototype[L]=!0,ue.prototype.removeEventListener=function(e,t,n,r){ne(this,e,t,n,r)},ue.prototype.N=function(){if(ue.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)U(n[e]);delete e.g[t],e.h--}}this.G=null},ue.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ue.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class pe extends M{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:he(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function me(e){M.call(this),this.h=e,this.g={}}c(me,M);var fe=[];function ge(e){z(e.g,function(e,t){this.g.hasOwnProperty(t)&&re(e)},e),e.g={}}me.prototype.N=function(){me.Z.N.call(this),ge(this)},me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ye=o.JSON.stringify,ve=o.JSON.parse,be=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function we(){}function De(){}var ke={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xe(){N.call(this,"d")}function Ee(){N.call(this,"c")}c(xe,N),c(Ee,N);var Se={},Ce=null;function Ae(){return Ce=Ce||new ue}function Te(e){N.call(this,Se.Ia,e)}function Fe(e){const t=Ae();ce(t,new Te(t))}function Re(e,t){N.call(this,Se.STAT_EVENT,e),this.stat=t}function _e(e){const t=Ae();ce(t,new Re(t,e))}function Ie(e,t){N.call(this,Se.Ja,e),this.size=t}function Pe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){e()},t)}function Me(){this.g=!0}function Ne(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const o=JSON.parse(t);if(o)for(e=0;e<o.length;e++)if(Array.isArray(o[e])){var n=o[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return ye(o)}catch(o){return t}}(e,n)+(r?" "+r:"")})}Se.Ia="serverreachability",c(Te,N),Se.STAT_EVENT="statevent",c(Re,N),Se.Ja="timingevent",c(Ie,N),Me.prototype.ua=function(){this.g=!1},Me.prototype.info=function(){};var je,Be={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Oe={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Le(){}function We(e){return encodeURIComponent(String(e))}function qe(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ue(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new me(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ze}function ze(){this.i=null,this.g="",this.h=!1}c(Le,we),Le.prototype.g=function(){return new XMLHttpRequest},je=new Le;var He={},Ve={};function Ke(e,t,n){e.M=1,e.A=yt(ht(t)),e.u=n,e.R=!0,Ye(e,null)}function Ye(e,t){e.F=Date.now(),Ze(e),e.B=ht(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),_t(n.i,"t",r),e.C=0,n=e.j.L,e.h=new ze,e.g=vn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new pe(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(fe[0]=i.toString()),i=fe);for(let o=0;o<i.length;o++){const e=J(n,i[o],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?H(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),Fe(),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o){var a="",s=o.split("&");for(let e=0;e<s.length;e++){var l=s[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+l+"&":a+(e+"=redacted&")}}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Ge(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Qe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ve:(n=Number(t.substring(n,r)),isNaN(n)?He:(r+=1)+n>t.length?Ve:(t=t.slice(r,r+n),e.C=r+n,t))}function Ze(e){e.T=Date.now()+e.H,Xe(e,e.H)}function Xe(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=Pe(l(e.aa,e),t)}function Je(e){e.D&&(o.clearTimeout(e.D),e.D=null)}function $e(e){0==e.j.I||e.K||pn(e.j,e)}function et(e){Je(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ge(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function tt(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||at(n.h,e)))if(!e.L&&at(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;hn(n),tn(n)}un(n),_e(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=Pe(l(n.Va,n),6e3));ot(n.h)<=1&&n.ta&&(n.ta=void 0)}else fn(n,11)}else if((e.L||n.g==e)&&hn(n),!B(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const c=l[0];if(!(c<=n.K))if(n.K=c,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const c=l[5];null!=c&&"number"===typeof c&&c>0&&(r=1.5*c,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(st(o,o.h),o.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,gt(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=yn(r,r.L?r.ba:null,r.W),a.L){lt(r.h,a);var s=a,u=r.O;u&&(s.H=u),s.D&&(Je(s),Ze(s)),r.g=a}else ln(r);n.i.length>0&&rn(n)}else"stop"!=l[0]&&"close"!=l[0]||fn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?fn(n,7):en(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}Fe()}catch(c){}}Ue.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Zt(e)?t.j():this.Y(e)},Ue.prototype.Y=function(e){try{if(e==this.g)e:{const l=Zt(this.g),u=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Xt(this.g)))){this.K||4!=l||7==u||Fe(),Je(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Ge(e))return e.g.la();const t=Xt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Zt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return et(e),$e(e),"";e.h.i=new o.TextDecoder}for(let o=0;o<r;o++)e.h.h=!0,n+=e.h.i.decode(t[o],{stream:!(i&&o==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,o,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(r)){var a=r;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,_e(12),et(this),$e(this);break e}Ne(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tt(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Qe(this,n),t==Ve){4==l&&(this.m=4,_e(14),e=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(t==He){this.m=4,_e(15),Ne(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Ne(this.i,this.l,t,null),tt(this,t)}if(Ge(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,_e(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var s=this.j;s.g==this&&s.aa&&!s.P&&(s.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),cn(s),s.P=!0,_e(11))}}else Ne(this.i,this.l,n,"[Invalid Chunked Response]"),et(this),$e(this)}else Ne(this.i,this.l,n,null),tt(this,n);4==l&&et(this),this.o&&!this.K&&(4==l?pn(this.j,this):(this.o=!1,Ze(this)))}else(function(e){const t={};e=(e.g&&Zt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(B(e[r]))continue;var n=qe(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,_e(12)):(this.m=0,_e(13)),et(this),$e(this)}}}catch(te){}},Ue.prototype.cancel=function(){this.K=!0,et(this)},Ue.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(Fe(),_e(17)),et(this),this.m=2,$e(this)):Xe(this,this.T-e)};var nt=class{constructor(e,t){this.g=e,this.map=t}};function rt(e){this.l=e||10,o.PerformanceNavigationTiming?e=(e=o.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function it(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ot(e){return e.h?1:e.g?e.g.size:0}function at(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function st(e,t){e.g?e.g.add(t):e.h=t}function lt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ut(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return k(e.i)}rt.prototype.cancel=function(){if(this.i=ut(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ct=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dt(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof dt?(this.l=e.l,pt(this,e.j),this.o=e.o,this.g=e.g,mt(this,e.u),this.h=e.h,ft(this,It(e.i)),this.m=e.m):e&&(t=String(e).match(ct))?(this.l=!1,pt(this,t[1]||"",!0),this.o=vt(t[2]||""),this.g=vt(t[3]||"",!0),mt(this,t[4]),this.h=vt(t[5]||"",!0),ft(this,t[6]||"",!0),this.m=vt(t[7]||"")):(this.l=!1,this.i=new Ct(null,this.l))}function ht(e){return new dt(e)}function pt(e,t,n){e.j=n?vt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function mt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function ft(e,t,n){t instanceof Ct?(e.i=t,function(e,t){t&&!e.j&&(At(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(Tt(this,t),_t(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=bt(t,Et)),e.i=new Ct(t,e.l))}function gt(e,t,n){e.i.set(t,n)}function yt(e){return gt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function vt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function bt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,wt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function wt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}dt.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(bt(t,Dt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(bt(t,Dt,!0),"@"),e.push(We(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(bt(n,"/"==n.charAt(0)?xt:kt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",bt(n,St)),e.join("")},dt.prototype.resolve=function(e){const t=ht(this);let n=!!e.j;n?pt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)mt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?ft(t,It(e.i)):n=!!e.m,n&&(t.m=e.m),t};var Dt=/[#\/\?@]/g,kt=/[#\?:]/g,xt=/[#\?]/g,Et=/[#\?@]/g,St=/#/g;function Ct(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function At(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,o=null;r>=0?(i=e[n].substring(0,r),o=e[n].substring(r+1)):i=e[n],t(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Tt(e,t){At(e),t=Pt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ft(e,t){return At(e),t=Pt(e,t),e.g.has(t)}function Rt(e,t){At(e);let n=[];if("string"===typeof t)Ft(e,t)&&(n=n.concat(e.g.get(Pt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function _t(e,t,n){Tt(e,t),n.length>0&&(e.i=null,e.g.set(Pt(e,t),k(n)),e.h+=n.length)}function It(e){const t=new Ct;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function Pt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Mt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(o){}}function Nt(){this.g=new be}function jt(e){this.i=e.Sb||null,this.h=e.ab||!1}function Bt(e,t){ue.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Ot(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Lt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Wt(e)}function Wt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function qt(e){let t="";return z(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Ut(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=qt(n),"string"===typeof e?null!=n&&We(n):gt(e,t,n))}function zt(e){ue.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=Ct.prototype).add=function(e,t){At(this),this.i=null,e=Pt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){At(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return At(this),this.i=null,Ft(this,e=Pt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=Rt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=We(n);n=Rt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+We(n[t])),e.push(r)}}return this.i=e.join("&")},c(jt,we),jt.prototype.g=function(){return new Bt(this.i,this.h)},c(Bt,ue),(e=Bt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Wt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Lt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Wt(this)),this.g&&(this.readyState=3,Wt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof o.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ot(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Lt(this):Wt(this),3==this.readyState&&Ot(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Lt(this))},e.Na=function(e){this.g&&(this.response=e,Lt(this))},e.ga=function(){this.g&&Lt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Bt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),c(zt,ue);var Ht=/^https?$/i,Vt=["POST","PUT"];function Kt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Yt(e),Qt(e)}function Yt(e){e.A||(e.A=!0,ce(e,"complete"),ce(e,"error"))}function Gt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Zt(e))setTimeout(e.Ca.bind(e),0);else if(ce(e,"readystatechange"),4==Zt(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(ct)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!Ht.test(t?t.toLowerCase():"")}n=r}if(n)ce(e,"complete"),ce(e,"success");else{e.o=6;try{var a=Zt(e)>2?e.g.statusText:""}catch(s){a=""}e.l=a+" ["+e.ca()+"]",Yt(e)}}finally{Qt(e)}}}function Qt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||ce(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Zt(e){return e.g?e.g.readyState:0}function Xt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Jt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function $t(e){this.za=0,this.i=[],this.j=new Me,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Jt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Jt("baseRetryDelayMs",5e3,e),this.Za=Jt("retryDelaySeedMs",1e4,e),this.Ta=Jt("forwardChannelMaxRetries",2,e),this.va=Jt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new rt(e&&e.concurrentRequestLimit),this.Ba=new Nt,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function en(e){if(nn(e),3==e.I){var t=e.V++,n=ht(e.J);if(gt(n,"SID",e.M),gt(n,"RID",t),gt(n,"TYPE","terminate"),an(e,n),(t=new Ue(e,e.j,t)).M=2,t.A=yt(ht(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&o.Image&&((new Image).src=t.A,n=!0),n||(t.g=vn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Ze(t)}gn(e)}function tn(e){e.g&&(cn(e),e.g.cancel(),e.g=null)}function nn(e){tn(e),e.v&&(o.clearTimeout(e.v),e.v=null),hn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&o.clearTimeout(e.m),e.m=null)}function rn(e){if(!it(e.h)&&!e.m){e.m=!0;var t=e.Ea;F||I(),R||(F(),R=!0),_.add(t,e),e.D=0}}function on(e,t){var n;n=t?t.l:e.V++;const r=ht(e.J);gt(r,"SID",e.M),gt(r,"RID",n),gt(r,"AID",e.K),an(e,r),e.u&&e.o&&Ut(r,e.u,e.o),n=new Ue(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=sn(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),st(e.h,n),Ke(n,r,t)}function an(e,t){e.H&&z(e.H,function(e,n){gt(t,n,e)}),e.l&&z({},function(e,n){gt(t,n,e)})}function sn(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let u=0;u<n;u++){var o=i[u].g;const n=i[u].map;if((o-=t)<0)t=Math.max(0,i[u].g-100),l=!1;else try{o="req"+o+"_"||0;try{var s=n instanceof Map?n:Object.entries(n);for(const[t,n]of s){let r=n;a(n)&&(r=ye(n)),e.push(o+t+"="+encodeURIComponent(r))}}catch(x){throw e.push(o+"type="+encodeURIComponent("_badmap")),x}}catch(x){r&&r(n)}}if(l){s=e.join("&");break e}}s=void 0}return e=e.i.splice(0,n),t.G=e,s}function ln(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;F||I(),R||(F(),R=!0),_.add(t,e),e.A=0}}function un(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=Pe(l(e.Da,e),mn(e,e.A)),e.A++,!0)}function cn(e){null!=e.B&&(o.clearTimeout(e.B),e.B=null)}function dn(e){e.g=new Ue(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=ht(e.na);gt(t,"RID","rpc"),gt(t,"SID",e.M),gt(t,"AID",e.K),gt(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&gt(t,"TO",e.ia),gt(t,"TYPE","xmlhttp"),an(e,t),e.u&&e.o&&Ut(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=yt(ht(t)),n.u=null,n.R=!0,Ye(n,e)}function hn(e){null!=e.C&&(o.clearTimeout(e.C),e.C=null)}function pn(e,t){var n=null;if(e.g==t){hn(e),cn(e),e.g=null;var r=2}else{if(!at(e.h,t))return;n=t.G,lt(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;ce(r=Ae(),new Ie(r,n)),rn(e)}else ln(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(ot(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=Pe(l(e.Ea,e,t),mn(e,e.D)),e.D++,!0))}(e,t)||2==r&&un(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:fn(e,5);break;case 4:fn(e,10);break;case 3:fn(e,6);break;default:fn(e,2)}}function mn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function fn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new dt(r||"//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||pt(r,"https"),yt(r),t?function(e,t){const n=new Me;if(o.Image){const r=new Image;r.onload=u(Mt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Mt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Mt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Mt,n,"TestLoadImage: timeout",!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Me;const n=new AbortController,r=setTimeout(()=>{n.abort(),Mt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Mt(0,0,!0,t):Mt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Mt(0,0,!1,t)})}(r.toString(),n)}else _e(2);e.I=0,e.l&&e.l.pa(t),gn(e),nn(e)}function gn(e){if(e.I=0,e.ja=[],e.l){const t=ut(e.h);0==t.length&&0==e.i.length||(E(e.ja,t),E(e.ja,e.i),e.h.i.length=0,k(e.i),e.i.length=0),e.l.oa()}}function yn(e,t,n){var r=n instanceof dt?ht(n):new dt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),mt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new dt(null);r&&pt(e,r),t&&(e.g=t),i&&mt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&gt(r,n,t),gt(r,"VER",e.ka),an(e,r),r}function vn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new zt(new jt({ab:n})):new zt(e.ma)).Fa(e.L),t}function bn(){}function wn(){}function Dn(e,t){ue.call(this),this.g=new $t(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!B(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!B(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new En(this)}function kn(e){xe.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function xn(){Ee.call(this),this.status=1}function En(e){this.g=e}(e=zt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():je.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Kt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(Vt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(a){Kt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,ce(this,"complete"),ce(this,"abort"),Qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qt(this,!0)),zt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Gt(this):this.Xa())},e.Xa=function(){Gt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Zt(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ve(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=$t.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){_e(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=yn(this,null,this.W),rn(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Ue(this,this.j,e);let o=this.o;if(this.U&&(o?(o=H(o),K(o,this.U)):o=this.U),null!==this.u||this.R||(i.J=o,o=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=sn(this,i,t),gt(n=ht(this.J),"RID",e),gt(n,"CVER",22),this.G&&gt(n,"X-HTTP-Session-Id",this.G),an(this,n),o&&(this.R?t="headers="+We(qt(o))+"&"+t:this.u&&Ut(n,this.u,o)),st(this.h,i),this.Ra&&gt(n,"TYPE","init"),this.S?(gt(n,"$req",t),gt(n,"SID","null"),i.U=!0,Ke(i,n,null)):Ke(i,n,t),this.I=2}}else 3==this.I&&(e?on(this,e):0==this.i.length||it(this.h)||on(this))},e.Da=function(){if(this.v=null,dn(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=Pe(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_e(10),tn(this),dn(this))},e.Va=function(){null!=this.C&&(this.C=null,tn(this),un(this),_e(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=bn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},wn.prototype.g=function(e,t){return new Dn(e,t)},c(Dn,ue),Dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){en(this.g)},Dn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ye(e),e=n);t.i.push(new nt(t.Ya++,e)),3==t.I&&rn(t)},Dn.prototype.N=function(){this.g.l=null,delete this.j,en(this.g),delete this.g,Dn.Z.N.call(this)},c(kn,xe),c(xn,Ee),c(En,bn),En.prototype.ra=function(){ce(this.g,"a")},En.prototype.qa=function(e){ce(this.g,new kn(e))},En.prototype.pa=function(e){ce(this.g,new xn)},En.prototype.oa=function(){ce(this.g,"b")},wn.prototype.createWebChannel=wn.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,b=D.createWebChannelTransport=function(){return new wn},v=D.getStatEventTarget=function(){return Ae()},y=D.Event=Se,g=D.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Be.NO_ERROR=0,Be.TIMEOUT=8,Be.HTTP_ERROR=6,f=D.ErrorCode=Be,Oe.COMPLETE="complete",m=D.EventType=Oe,De.EventType=ke,ke.OPEN="a",ke.CLOSE="b",ke.ERROR="c",ke.MESSAGE="d",ue.prototype.listen=ue.prototype.J,p=D.WebChannel=De,D.FetchXmlHttpFactory=jt,zt.prototype.listenOnce=zt.prototype.K,zt.prototype.getLastError=zt.prototype.Ha,zt.prototype.getLastErrorCode=zt.prototype.ya,zt.prototype.getStatus=zt.prototype.ca,zt.prototype.getResponseJson=zt.prototype.La,zt.prototype.getResponseText=zt.prototype.la,zt.prototype.send=zt.prototype.ea,zt.prototype.setWithCredentials=zt.prototype.Fa,h=D.XhrIo=zt}).apply("undefined"!==typeof w?w:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const k="@firebase/firestore",x="4.9.2";class E{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}E.UNAUTHENTICATED=new E(null),E.GOOGLE_CREDENTIALS=new E("google-credentials-uid"),E.FIRST_PARTY=new E("first-party-uid"),E.MOCK_USER=new E("mock-user");let S="12.3.0";const C=new l.Vy("@firebase/firestore");function A(){return C.logLevel}function T(e){if(C.logLevel<=l.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(_);C.debug("Firestore (".concat(S,"): ").concat(e),...i)}}function F(e){if(C.logLevel<=l.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(_);C.error("Firestore (".concat(S,"): ").concat(e),...i)}}function R(e){if(C.logLevel<=l.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(_);C.warn("Firestore (".concat(S,"): ").concat(e),...i)}}function _(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function I(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,P(e,r,n)}function P(e,t,n){let r="FIRESTORE (".concat(S,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw F(r),new Error(r)}function M(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||P(t,i,r)}function N(e,t){return e}const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends u.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class O{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class L{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class W{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(E.UNAUTHENTICATED))}shutdown(){}}class q{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class U{constructor(e){this.t=e,this.currentUser=E.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){M(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new O;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new O,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{T("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(T("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new O)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(T("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(M("string"==typeof t.accessToken,31837,{l:t}),new L(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return M(null===e||"string"==typeof e,2055,{h:e}),new E(e)}}class z{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=E.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class H{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new z(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(E.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class V{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,a.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){M(void 0===this.o,3512);const n=e=>{null!=e.error&&T("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,T("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{T("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):T("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new V(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(M("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new V(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Y(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class G{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Y(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Q(e,t){return e<t?-1:e>t?1:0}function Z(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return $(n)===$(i)?Q(n,i):$(n)?1:-1}return Q(e.length,t.length)}const X=55296,J=57343;function $(e){const t=e.charCodeAt(0);return t>=X&&t<=J}function ee(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const te="__name__";class ne{constructor(e,t,n){void 0===t?t=0:t>e.length&&I(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&I(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ne.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ne?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=ne.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Q(e.length,t.length)}static compareSegments(e,t){const n=ne.isNumericId(e),r=ne.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?ne.extractNumericId(e).compare(ne.extractNumericId(t)):Z(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return r.fromString(e.substring(4,e.length-2))}}class re extends ne{construct(e,t,n){return new re(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new B(j.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new re(e)}static emptyPath(){return new re([])}}const ie=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class oe extends ne{construct(e,t,n){return new oe(e,t,n)}static isValidIdentifier(e){return ie.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),oe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===te}static keyField(){return new oe([te])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new B(j.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new B(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new B(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new B(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new oe(t)}static emptyPath(){return new oe([])}}class ae{constructor(e){this.path=e}static fromPath(e){return new ae(re.fromString(e))}static fromName(e){return new ae(re.fromString(e).popFirst(5))}static empty(){return new ae(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===re.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return re.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new re(e.slice()))}}function se(e,t,n){if(!n)throw new B(j.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function le(e){if(!ae.isDocumentKey(e))throw new B(j.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ue(e){if(ae.isDocumentKey(e))throw new B(j.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ce(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function de(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":I(12329,{type:typeof e})}function he(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new B(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=de(e);throw new B(j.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function pe(e,t){const n={typeString:e};return t&&(n.value=t),n}function me(e,t){if(!ce(e))throw new B(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,o="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(i&&typeof a!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==o&&a!==o.value){n="Expected '".concat(r,"' field to equal '").concat(o.value,"'");break}}if(n)throw new B(j.INVALID_ARGUMENT,n);return!0}const fe=-62135596800,ge=1e6;class ye{static now(){return ye.fromMillis(Date.now())}static fromDate(e){return ye.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*ge);return new ye(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new B(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new B(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<fe)throw new B(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ge}_compareTo(e){return this.seconds===e.seconds?Q(this.nanoseconds,e.nanoseconds):Q(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(me(e,ye._jsonSchema))return new ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fe;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ye._jsonSchemaVersion="firestore/timestamp/1.0",ye._jsonSchema={type:pe("string",ye._jsonSchemaVersion),seconds:pe("number"),nanoseconds:pe("number")};class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new ye(0,0))}static max(){return new ve(new ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const be=-1;class we{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}we.UNKNOWN_ID=-1;function De(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ve.fromTimestamp(1e9===r?new ye(n+1,0):new ye(n,r));return new xe(i,ae.empty(),t)}function ke(e){return new xe(e.readTime,e.key,be)}class xe{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new xe(ve.min(),ae.empty(),be)}static max(){return new xe(ve.max(),ae.empty(),be)}}function Ee(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ae.comparator(e.documentKey,t.documentKey),0!==n?n:Q(e.largestBatchId,t.largestBatchId))}const Se="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ce{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ae(e){if(e.code!==j.FAILED_PRECONDITION||e.message!==Se)throw e;T("LocalStore","Unexpectedly lost primary lease")}class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&I(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(e){return Te.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.reject(t)}static resolve(e){return new Te((t,n)=>{t(e)})}static reject(e){return new Te((t,n)=>{n(e)})}static waitFor(e){return new Te((t,n)=>{let r=0,i=0,o=!1;e.forEach(e=>{++r,e.next(()=>{++i,o&&i===r&&t()},e=>n(e))}),o=!0,i===r&&t()})}static or(e){let t=Te.resolve(!1);for(const n of e)t=t.next(e=>e?Te.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Te((n,r)=>{const i=e.length,o=new Array(i);let a=0;for(let s=0;s<i;s++){const l=s;t(e[l]).next(e=>{o[l]=e,++a,a===i&&n(o)},e=>r(e))}})}static doWhile(e,t){return new Te((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Fe(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Re(e){return"IndexedDbTransactionError"===e.name}class _e{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}_e.ce=-1;const Ie=-1;function Pe(e){return null==e}function Me(e){return 0===e&&1/e==-1/0}function Ne(e){return"number"==typeof e&&Number.isInteger(e)&&!Me(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const je="\x01";function Be(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Le(t)),t=Oe(e.get(n),t);return Le(t)}function Oe(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case je:n+="\x01\x11";break;default:n+=t}}return n}function Le(e){return e+je+"\x01"}const We="remoteDocuments",qe="owner",Ue="mutationQueues",ze="mutations";const He="documentMutations",Ve="remoteDocumentsV14",Ke="remoteDocumentGlobal",Ye="targets",Qe="targetDocuments",Ze="targetGlobal",Xe="collectionParents",Je="clientMetadata",$e="bundles",et="namedQueries",tt="indexConfiguration",nt="indexState",rt="indexEntries",it="documentOverlays",ot="globals",at=[Ue,ze,He,We,Ye,qe,Ze,Qe,Je,Ke,Xe,$e,et],st=[Ue,ze,He,Ve,Ye,qe,Ze,Qe,Je,Ke,Xe,$e,et,it],lt=st,ut=[...lt,tt,nt,rt];function ct(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function dt(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ht(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class pt{constructor(e,t){this.comparator=e,this.root=t||ft.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mt(this.root,e,this.comparator,!1)}getReverseIterator(){return new mt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mt(this.root,e,this.comparator,!0)}}class mt{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ft{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ft.RED,this.left=null!=r?r:ft.EMPTY,this.right=null!=i?i:ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ft(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ft.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw I(43730,{key:this.key,value:this.value});if(this.right.isRed())throw I(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw I(27949);return e+(this.isRed()?0:1)}}ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1,ft.EMPTY=new class{constructor(){this.size=0}get key(){throw I(57766)}get value(){throw I(16141)}get color(){throw I(16727)}get left(){throw I(29726)}get right(){throw I(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new ft(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yt(this.data.getIterator())}getIteratorFrom(e){return new yt(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof gt))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gt(this.comparator);return t.data=e,t}}class yt{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class vt{constructor(e){this.fields=e,e.sort(oe.comparator)}static empty(){return new vt([])}unionWith(e){let t=new gt(oe.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new vt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ee(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class bt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new bt("Invalid base64 string: "+e):e}}(e);return new wt(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Q(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const Dt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kt(e){if(M(!!e,39018),"string"==typeof e){let t=0;const n=Dt.exec(e);if(M(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:xt(e.seconds),nanos:xt(e.nanos)}}function xt(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Et(e){return"string"==typeof e?wt.fromBase64String(e):wt.fromUint8Array(e)}const St="server_timestamp",Ct="__type__",At="__previous_value__",Tt="__local_write_time__";function Ft(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Ct])||void 0===t?void 0:t.stringValue)===St}function Rt(e){const t=e.mapValue.fields[At];return Ft(t)?Rt(t):t}function _t(e){const t=kt(e.mapValue.fields[Tt].timestampValue);return new ye(t.seconds,t.nanos)}class It{constructor(e,t,n,r,i,o,a,s,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=s,this.useFetchStreams=l,this.isUsingEmulator=u}}const Pt="(default)";class Mt{constructor(e,t){this.projectId=e,this.database=t||Pt}static empty(){return new Mt("","")}get isDefaultDatabase(){return this.database===Pt}isEqual(e){return e instanceof Mt&&e.projectId===this.projectId&&e.database===this.database}}const Nt="__type__",jt="__max__",Bt={mapValue:{fields:{__type__:{stringValue:jt}}}},Ot="__vector__",Lt="value";function Wt(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ft(e)?4:rn(e)?9007199254740991:tn(e)?10:11:I(28295,{value:e})}function qt(e,t){if(e===t)return!0;const n=Wt(e);if(n!==Wt(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return _t(e).isEqual(_t(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=kt(e.timestampValue),r=kt(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Et(e.bytesValue).isEqual(Et(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return xt(e.geoPointValue.latitude)===xt(t.geoPointValue.latitude)&&xt(e.geoPointValue.longitude)===xt(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return xt(e.integerValue)===xt(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=xt(e.doubleValue),r=xt(t.doubleValue);return n===r?Me(n)===Me(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ee(e.arrayValue.values||[],t.arrayValue.values||[],qt);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ct(n)!==ct(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!qt(n[i],r[i])))return!1;return!0}(e,t);default:return I(52216,{left:e})}}function Ut(e,t){return void 0!==(e.values||[]).find(e=>qt(e,t))}function zt(e,t){if(e===t)return 0;const n=Wt(e),r=Wt(t);if(n!==r)return Q(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Q(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=xt(e.integerValue||e.doubleValue),r=xt(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ht(e.timestampValue,t.timestampValue);case 4:return Ht(_t(e),_t(t));case 5:return Z(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Et(e),r=Et(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Q(n[i],r[i]);if(0!==e)return e}return Q(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Q(xt(e.latitude),xt(t.latitude));return 0!==n?n:Q(xt(e.longitude),xt(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Vt(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,o){const a=e.fields||{},s=t.fields||{},l=null===(n=a[Lt])||void 0===n?void 0:n.arrayValue,u=null===(r=s[Lt])||void 0===r?void 0:r.arrayValue,c=Q((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===u||void 0===u||null===(o=u.values)||void 0===o?void 0:o.length)||0);return 0!==c?c:Vt(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Bt.mapValue&&t===Bt.mapValue)return 0;if(e===Bt.mapValue)return 1;if(t===Bt.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let a=0;a<r.length&&a<o.length;++a){const e=Z(r[a],o[a]);if(0!==e)return e;const t=zt(n[r[a]],i[o[a]]);if(0!==t)return t}return Q(r.length,o.length)}(e.mapValue,t.mapValue);default:throw I(23264,{he:n})}}function Ht(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Q(e,t);const n=kt(e),r=kt(t),i=Q(n.seconds,r.seconds);return 0!==i?i:Q(n.nanos,r.nanos)}function Vt(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=zt(n[i],r[i]);if(e)return e}return Q(n.length,r.length)}function Kt(e){return Yt(e)}function Yt(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=kt(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Et(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ae.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Yt(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Yt(e.fields[i]));return n+"}"}(e.mapValue):I(61005,{value:e})}function Gt(e){switch(Wt(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Rt(e);return t?16+Gt(t):16;case 5:return 2*e.stringValue.length;case 6:return Et(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Gt(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return dt(e.fields,(e,n)=>{t+=e.length+Gt(n)}),t}(e.mapValue);default:throw I(13486,{value:e})}}function Qt(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Zt(e){return!!e&&"integerValue"in e}function Xt(e){return!!e&&"arrayValue"in e}function Jt(e){return!!e&&"nullValue"in e}function $t(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function en(e){return!!e&&"mapValue"in e}function tn(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Nt])||void 0===t?void 0:t.stringValue)===Ot}function nn(e){if(e.geoPointValue)return{geoPointValue:(0,o.A)({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:(0,o.A)({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return dt(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=nn(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=nn(e.arrayValue.values[n]);return t}return(0,o.A)({},e)}function rn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===jt}class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!en(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nn(t)}setAll(e){let t=oe.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=nn(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());en(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];en(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){dt(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new on(nn(this.value))}}function an(e){const t=[];return dt(e.fields,(e,n)=>{const r=new oe([e]);if(en(n)){const e=an(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new vt(t)}class sn{constructor(e,t,n,r,i,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new sn(e,0,ve.min(),ve.min(),ve.min(),on.empty(),0)}static newFoundDocument(e,t,n,r){return new sn(e,1,t,ve.min(),n,r,0)}static newNoDocument(e,t){return new sn(e,2,t,ve.min(),ve.min(),on.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,ve.min(),ve.min(),on.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ln{constructor(e,t){this.position=e,this.inclusive=t}}function un(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],a=e.position[i];if(r=o.field.isKeyField()?ae.comparator(ae.fromName(a.referenceValue),n.key):zt(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function cn(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!qt(e.position[n],t.position[n]))return!1;return!0}class dn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function hn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class pn{}class mn extends pn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new kn(e,t,n):"array-contains"===t?new Cn(e,n):"in"===t?new An(e,n):"not-in"===t?new Tn(e,n):"array-contains-any"===t?new Fn(e,n):new mn(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new xn(e,n):new En(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(zt(t,this.value)):null!==t&&Wt(this.value)===Wt(t)&&this.matchesComparison(zt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return I(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends pn{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new fn(e,t)}matches(e){return gn(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gn(e){return"and"===e.op}function yn(e){return vn(e)&&gn(e)}function vn(e){for(const t of e.filters)if(t instanceof fn)return!1;return!0}function bn(e){if(e instanceof mn)return e.field.canonicalString()+e.op.toString()+Kt(e.value);if(yn(e))return e.filters.map(e=>bn(e)).join(",");{const t=e.filters.map(e=>bn(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function wn(e,t){return e instanceof mn?function(e,t){return t instanceof mn&&e.op===t.op&&e.field.isEqual(t.field)&&qt(e.value,t.value)}(e,t):e instanceof fn?function(e,t){return t instanceof fn&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&wn(n,t.filters[r]),!0)}(e,t):void I(19439)}function Dn(e){return e instanceof mn?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Kt(e.value))}(e):e instanceof fn?function(e){return e.op.toString()+" {"+e.getFilters().map(Dn).join(" ,")+"}"}(e):"Filter"}class kn extends mn{constructor(e,t,n){super(e,t,n),this.key=ae.fromName(n.referenceValue)}matches(e){const t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class xn extends mn{constructor(e,t){super(e,"in",t),this.keys=Sn("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class En extends mn{constructor(e,t){super(e,"not-in",t),this.keys=Sn("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Sn(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ae.fromName(e.referenceValue))}class Cn extends mn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xt(t)&&Ut(t.arrayValue,this.value)}}class An extends mn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ut(this.value.arrayValue,t)}}class Tn extends mn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ut(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Ut(this.value.arrayValue,t)}}class Fn extends mn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ut(this.value.arrayValue,e))}}class Rn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function _n(e){return new Rn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function In(e){const t=N(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>bn(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Pe(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Kt(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Kt(e)).join(",")),t.Te=e}return t.Te}function Pn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!hn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!wn(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!cn(e.startAt,t.startAt)&&cn(e.endAt,t.endAt)}function Mn(e){return ae.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Nn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function jn(e,t,n,r,i,o,a,s){return new Nn(e,t,n,r,i,o,a,s)}function Bn(e){return new Nn(e)}function On(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ln(e){return null!==e.collectionGroup}function Wn(e){const t=N(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new gt(oe.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new dn(r,n))}),e.has(oe.keyField().canonicalString())||t.Ie.push(new dn(oe.keyField(),n))}return t.Ie}function qn(e){const t=N(e);return t.Ee||(t.Ee=Un(t,Wn(e))),t.Ee}function Un(e,t){if("F"===e.limitType)return _n(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new dn(e.field,t)});const n=e.endAt?new ln(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ln(e.startAt.position,e.startAt.inclusive):null;return _n(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function zn(e,t){const n=e.filters.concat([t]);return new Nn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Hn(e,t,n){return new Nn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Vn(e,t){return Pn(qn(e),qn(t))&&e.limitType===t.limitType}function Kn(e){return"".concat(In(qn(e)),"|lt:").concat(e.limitType)}function Yn(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Dn(e)).join(", "),"]")),Pe(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Kt(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Kt(e)).join(",")),"Target(".concat(t,")")}(qn(e)),"; limitType=").concat(e.limitType,")")}function Gn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ae.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Wn(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=un(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Wn(e),t))&&!(e.endAt&&!function(e,t,n){const r=un(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Wn(e),t))}(e,t)}function Qn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Zn(e){return(t,n)=>{let r=!1;for(const i of Wn(e)){const e=Xn(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Xn(e,t,n){const r=e.field.isKeyField()?ae.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?zt(r,i):I(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return I(19790,{direction:e.dir})}}class Jn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){dt(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return ht(this.inner)}size(){return this.innerSize}}const $n=new pt(ae.comparator);function er(){return $n}const tr=new pt(ae.comparator);function nr(){let e=tr;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function rr(e){let t=tr;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ir(){return ar()}function or(){return ar()}function ar(){return new Jn(e=>e.toString(),(e,t)=>e.isEqual(t))}const sr=new pt(ae.comparator),lr=new gt(ae.comparator);function ur(){let e=lr;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const cr=new gt(Q);function dr(){return cr}function hr(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Me(t)?"-0":t}}function pr(e){return{integerValue:""+e}}function mr(e,t){return Ne(t)?pr(t):hr(e,t)}class fr{constructor(){this._=void 0}}function gr(e,t,n){return e instanceof br?function(e,t){const n={fields:{[Ct]:{stringValue:St},[Tt]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ft(t)&&(t=Rt(t)),t&&(n.fields[At]=t),{mapValue:n}}(n,t):e instanceof wr?Dr(e,t):e instanceof kr?xr(e,t):function(e,t){const n=vr(e,t),r=Sr(n)+Sr(e.Ae);return Zt(n)&&Zt(e.Ae)?pr(r):hr(e.serializer,r)}(e,t)}function yr(e,t,n){return e instanceof wr?Dr(e,t):e instanceof kr?xr(e,t):n}function vr(e,t){return e instanceof Er?function(e){return Zt(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class br extends fr{}class wr extends fr{constructor(e){super(),this.elements=e}}function Dr(e,t){const n=Cr(t);for(const r of e.elements)n.some(e=>qt(e,r))||n.push(r);return{arrayValue:{values:n}}}class kr extends fr{constructor(e){super(),this.elements=e}}function xr(e,t){let n=Cr(t);for(const r of e.elements)n=n.filter(e=>!qt(e,r));return{arrayValue:{values:n}}}class Er extends fr{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Sr(e){return xt(e.integerValue||e.doubleValue)}function Cr(e){return Xt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ar{constructor(e,t){this.field=e,this.transform=t}}class Tr{constructor(e,t){this.version=e,this.transformResults=t}}class Fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fr}static exists(e){return new Fr(void 0,e)}static updateTime(e){return new Fr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rr(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class _r{}function Ir(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ur(e.key,Fr.none()):new Br(e.key,e.data,Fr.none());{const n=e.data,r=on.empty();let i=new gt(oe.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Or(e.key,r,new vt(i.toArray()),Fr.none())}}function Pr(e,t,n){e instanceof Br?function(e,t,n){const r=e.value.clone(),i=Wr(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Or?function(e,t,n){if(!Rr(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Wr(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Lr(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Mr(e,t,n,r){return e instanceof Br?function(e,t,n,r){if(!Rr(e.precondition,t))return n;const i=e.value.clone(),o=qr(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Or?function(e,t,n,r){if(!Rr(e.precondition,t))return n;const i=qr(e.fieldTransforms,r,t),o=t.data;return o.setAll(Lr(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Rr(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Nr(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=vr(r.transform,e||null);null!=i&&(null===n&&(n=on.empty()),n.set(r.field,i))}return n||null}function jr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ee(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof wr&&t instanceof wr||e instanceof kr&&t instanceof kr?ee(e.elements,t.elements,qt):e instanceof Er&&t instanceof Er?qt(e.Ae,t.Ae):e instanceof br&&t instanceof br}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Br extends _r{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Or extends _r{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Lr(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Wr(e,t,n){const r=new Map;M(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,yr(a,s,n[i]))}return r}function qr(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,gr(e,o,t))}return r}class Ur extends _r{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zr extends _r{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Hr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Pr(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Mr(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Mr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=or();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const s=Ir(o,a);null!==s&&n.set(r.key,s),o.isValidDocument()||o.convertToNoDocument(ve.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ur())}isEqual(e){return this.batchId===e.batchId&&ee(this.mutations,e.mutations,(e,t)=>jr(e,t))&&ee(this.baseMutations,e.baseMutations,(e,t)=>jr(e,t))}}class Vr{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){M(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=sr;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Vr(e,t,n,r)}}class Kr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Yr{constructor(e,t){this.count=e,this.unchangedNames=t}}var Gr,Qr;function Zr(e){switch(e){case j.OK:return I(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return I(15467,{code:e})}}function Xr(e){if(void 0===e)return F("GRPC error has no .code"),j.UNKNOWN;switch(e){case Gr.OK:return j.OK;case Gr.CANCELLED:return j.CANCELLED;case Gr.UNKNOWN:return j.UNKNOWN;case Gr.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Gr.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Gr.INTERNAL:return j.INTERNAL;case Gr.UNAVAILABLE:return j.UNAVAILABLE;case Gr.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Gr.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Gr.NOT_FOUND:return j.NOT_FOUND;case Gr.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Gr.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Gr.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Gr.ABORTED:return j.ABORTED;case Gr.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Gr.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Gr.DATA_LOSS:return j.DATA_LOSS;default:return I(39323,{code:e})}}(Qr=Gr||(Gr={}))[Qr.OK=0]="OK",Qr[Qr.CANCELLED=1]="CANCELLED",Qr[Qr.UNKNOWN=2]="UNKNOWN",Qr[Qr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qr[Qr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qr[Qr.NOT_FOUND=5]="NOT_FOUND",Qr[Qr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qr[Qr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qr[Qr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qr[Qr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qr[Qr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qr[Qr.ABORTED=10]="ABORTED",Qr[Qr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qr[Qr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qr[Qr.INTERNAL=13]="INTERNAL",Qr[Qr.UNAVAILABLE=14]="UNAVAILABLE",Qr[Qr.DATA_LOSS=15]="DATA_LOSS";let Jr=null;function $r(){return new TextEncoder}const ei=new r([4294967295,4294967295],0);function ti(e){const t=$r().encode(e),n=new i;return n.update(t),new Uint8Array(n.digest())}function ni(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),o=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new r([n,i],0),new r([o,a],0)]}class ri{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ii("Invalid padding: ".concat(t));if(n<0)throw new ii("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ii("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ii("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=r.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(r.fromNumber(n)));return 1===i.compare(ei)&&(i=new r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=ti(e),[n,r]=ni(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ri(i,r,t);return n.forEach(e=>o.insert(e)),o}insert(e){if(0===this.ge)return;const t=ti(e),[n,r]=ni(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ii extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class oi{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ai.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new oi(ve.min(),r,new pt(Q),er(),ur())}}class ai{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ai(n,t,ur(),ur(),ur())}}class si{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class li{constructor(e,t){this.targetId=e,this.Ce=t}}class ui{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wt.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ci{constructor(){this.ve=0,this.Fe=pi(),this.Me=wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ur(),t=ur(),n=ur();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:I(38017,{changeType:i})}}),new ai(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=pi()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,M(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class di{constructor(e){this.Ge=e,this.ze=new Map,this.je=er(),this.Je=hi(),this.He=hi(),this.Ye=new pt(Q)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:I(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const o=r.target;if(Mn(o))if(0===n){const e=new ae(o.path);this.et(t,e,sn.newNoDocument(e,ve.min()))}else M(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),o=n?this.ct(n,e,r):1;if(0!==o){this.it(t);const e=2===o?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=Jr)||void 0===i||i.lt(function(e,t,n,r,i,o,a,s,l,u){const c={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(c.bloomFilter={applied:0===i,hashCount:null!==(o=null===d||void 0===d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(a=null===d||void 0===d||null===(s=d.bits)||void 0===s||null===(s=s.bitmap)||void 0===s?void 0:s.length)&&void 0!==a?a:0,padding:null!==(l=null===d||void 0===d||null===(u=d.bits)||void 0===u?void 0:u.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),c}(r,e.Ce,this.Ge.ht(),n,o))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,a;try{o=Et(n).toUint8Array()}catch(e){if(e instanceof bt)return R("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new ri(o,r,i)}catch(e){return R(e instanceof ii?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Mn(i.target)){const t=new ae(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,sn.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=ur();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new oi(e,t,this.Ye,this.je,n);return this.je=er(),this.Je=hi(),this.He=hi(),this.Ye=new pt(Q),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ci,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new gt(Q),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new gt(Q),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||T("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ci),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function hi(){return new pt(ae.comparator)}function pi(){return new pt(ae.comparator)}const mi={asc:"ASCENDING",desc:"DESCENDING"},fi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gi={and:"AND",or:"OR"};class yi{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vi(e,t){return e.useProto3Json||Pe(t)?t:{value:t}}function bi(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function wi(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Di(e,t){return bi(e,t.toTimestamp())}function ki(e){return M(!!e,49232),ve.fromTimestamp(function(e){const t=kt(e);return new ye(t.seconds,t.nanos)}(e))}function xi(e,t){return Ei(e,t).canonicalString()}function Ei(e,t){const n=function(e){return new re(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Si(e){const t=re.fromString(e);return M(Vi(t),10190,{key:t.toString()}),t}function Ci(e,t){return xi(e.databaseId,t.path)}function Ai(e,t){const n=Si(t);if(n.get(1)!==e.databaseId.projectId)throw new B(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new B(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ae(_i(n))}function Ti(e,t){return xi(e.databaseId,t)}function Fi(e){const t=Si(e);return 4===t.length?re.emptyPath():_i(t)}function Ri(e){return new re(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function _i(e){return M(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Ii(e,t,n){return{name:Ci(e,t),fields:n.value.mapValue.fields}}function Pi(e,t){let n;if(t instanceof Br)n={update:Ii(e,t.key,t.value)};else if(t instanceof Ur)n={delete:Ci(e,t.key)};else if(t instanceof Or)n={update:Ii(e,t.key,t.data),updateMask:Hi(t.fieldMask)};else{if(!(t instanceof zr))return I(16599,{Vt:t.type});n={verify:Ci(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof br)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof wr)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof kr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Er)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw I(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Di(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:I(27497)}(e,t.precondition)),n}function Mi(e,t){return{documents:[Ti(e,t.path)]}}function Ni(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ti(e,i);const o=function(e){if(0!==e.length)return zi(fn.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:qi(e.field),direction:Oi(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const s=vi(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function ji(e){let t=Fi(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){M(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Bi(e);return t instanceof fn&&yn(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new dn(Ui(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,Pe(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ln(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new ln(n,t)}(n.endAt)),jn(t,i,a,o,s,"F",l,u)}function Bi(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ui(e.unaryFilter.field);return mn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Ui(e.unaryFilter.field);return mn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ui(e.unaryFilter.field);return mn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ui(e.unaryFilter.field);return mn.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return I(61313);default:return I(60726)}}(e):void 0!==e.fieldFilter?function(e){return mn.create(Ui(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return I(58110);default:return I(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fn.create(e.compositeFilter.filters.map(e=>Bi(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return I(1026)}}(e.compositeFilter.op))}(e):I(30097,{filter:e})}function Oi(e){return mi[e]}function Li(e){return fi[e]}function Wi(e){return gi[e]}function qi(e){return{fieldPath:e.canonicalString()}}function Ui(e){return oe.fromServerFormat(e.fieldPath)}function zi(e){return e instanceof mn?function(e){if("=="===e.op){if($t(e.value))return{unaryFilter:{field:qi(e.field),op:"IS_NAN"}};if(Jt(e.value))return{unaryFilter:{field:qi(e.field),op:"IS_NULL"}}}else if("!="===e.op){if($t(e.value))return{unaryFilter:{field:qi(e.field),op:"IS_NOT_NAN"}};if(Jt(e.value))return{unaryFilter:{field:qi(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qi(e.field),op:Li(e.op),value:e.value}}}(e):e instanceof fn?function(e){const t=e.getFilters().map(e=>zi(e));return 1===t.length?t[0]:{compositeFilter:{op:Wi(e.op),filters:t}}}(e):I(54877,{filter:e})}function Hi(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Vi(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ki{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ve.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ve.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:wt.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=s}withSequenceNumber(e){return new Ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Yi{constructor(e){this.yt=e}}function Gi(e){const t=ji({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Hn(t,t.limit,"L"):t}class Qi{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(xt(e.integerValue));else if("doubleValue"in e){const n=xt(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Me(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=kt(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Et(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?rn(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):tn(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):I(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=Lt,o=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(xt(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),ae.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Qi.Kt=new Qi;class Zi{constructor(){this.Cn=new Xi}addToCollectionParentIndex(e,t){return this.Cn.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Te.resolve()}deleteFieldIndex(e,t){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,t){return Te.resolve()}getDocumentsMatchingTarget(e,t){return Te.resolve(null)}getIndexType(e,t){return Te.resolve(0)}getFieldIndexes(e,t){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,t){return Te.resolve(xe.min())}getMinOffsetFromCollectionGroup(e,t){return Te.resolve(xe.min())}updateCollectionGroup(e,t,n){return Te.resolve()}updateIndexEntries(e,t){return Te.resolve()}}class Xi{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new gt(re.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new gt(re.comparator)).toArray()}}new Uint8Array(0);const Ji={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$i=41943040;class eo{static withCacheSize(e){return new eo(e,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}eo.DEFAULT_COLLECTION_PERCENTILE=10,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,eo.DEFAULT=new eo($i,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),eo.DISABLED=new eo(-1,0,0);class to{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new to(0)}static cr(){return new to(-1)}}const no="LruGarbageCollector",ro=1048576;function io(e,t){let[n,r]=e,[i,o]=t;const a=Q(n,i);return 0===a?Q(r,o):a}class oo{constructor(e){this.Ir=e,this.buffer=new gt(io),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();io(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ao{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){T(no,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Re(e)?T(no,"Ignoring IndexedDB error during garbage collection: ",e):await Ae(e)}await this.Vr(3e5)})}}class so{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Te.resolve(_e.ce);const n=new oo(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(Ji)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Ji):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,o,a,s,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(T("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(u=Date.now(),A()<=l.$b.DEBUG&&T("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-c,"ms")),Te.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function lo(e,t){return new so(e,t)}class uo{constructor(){this.changes=new Jn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Te.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class co{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ho{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Mr(n.mutation,e,vt.empty(),ye.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ur()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ur();const r=ir();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=nr();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=ir();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ur()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=er();const o=ar(),a=ar();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Or)?i=i.insert(t.key,t):void 0!==a?(o.set(t.key,a.mutation.getFieldMask()),Mr(a.mutation,t,a.mutation.getFieldMask(),ye.now())):o.set(t.key,vt.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new co(t,null!==(n=o.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=ar();let r=new pt((e,t)=>e-t),i=ur();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let a=n.get(e)||vt.empty();a=i.applyToLocalView(o,a),n.set(e,a);const s=(r.get(i.batchId)||ur()).add(e);r=r.insert(i.batchId,s)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,l=r.value,u=or();l.forEach(e=>{if(!i.has(e)){const r=Ir(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,s,u))}return Te.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ae.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ln(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Te.resolve(ir());let a=be,s=i;return o.next(t=>Te.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Te.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{s=s.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,s,t,ur())).next(e=>({batchId:a,changes:rr(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next(e=>{let t=nr();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=nr();return this.indexManager.getCollectionParents(e,i).next(a=>Te.forEach(a,a=>{const s=function(e,t){return new Nn(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next(e=>{e.forEach((e,t)=>{o=o.insert(e,t)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,sn.newInvalidDocument(r)))});let n=nr();return e.forEach((e,r)=>{const o=i.get(e);void 0!==o&&Mr(o.mutation,r,vt.empty(),ye.now()),Gn(t,r)&&(n=n.insert(e,r))}),n})}}class po{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ki(e.createTime)}}(t)),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Gi(e.bundledQuery),readTime:ki(e.readTime)}}(t)),Te.resolve()}}class mo{constructor(){this.overlays=new pt(ae.comparator),this.qr=new Map}getOverlay(e,t){return Te.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ir();return Te.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Te.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Te.resolve()}getOverlaysForCollection(e,t,n){const r=ir(),i=t.length+1,o=new ae(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const e=a.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Te.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new pt((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=ir(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=ir(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Te.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Kr(t,n));let i=this.qr.get(t);void 0===i&&(i=ur(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class fo{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return Te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Te.resolve()}}class go{constructor(){this.Qr=new gt(yo.$r),this.Ur=new gt(yo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new yo(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new yo(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new ae(new re([])),n=new yo(t,e),r=new yo(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ae(new re([])),n=new yo(t,e),r=new yo(t,e+1);let i=ur();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new yo(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class yo{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ae.comparator(e.key,t.key)||Q(e.Yr,t.Yr)}static Kr(e,t){return Q(e.Yr,t.Yr)||ae.comparator(e.key,t.key)}}class vo{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new gt(yo.$r)}checkEmpty(e){return Te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Hr(i,t,n,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new yo(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Te.resolve(o)}lookupMutationBatch(e,t){return Te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Te.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(0===this.mutationQueue.length?Ie:this.tr-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new yo(t,0),r=new yo(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Te.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new gt(Q);return t.forEach(e=>{const t=new yo(e,0),r=new yo(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Te.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ae.isDocumentKey(i)||(i=i.child(""));const o=new yo(new ae(i),0);let a=new gt(Q);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},o),Te.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){M(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Te.forEach(t.mutations,r=>{const i=new yo(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new yo(t,0),r=this.Zr.firstAfterOrEqual(n);return Te.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Te.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class bo{constructor(e){this.ri=e,this.docs=new pt(ae.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Te.resolve(n?n.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let n=er();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():sn.newInvalidDocument(e))}),Te.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=er();const o=t.path,a=new ae(o.child("__id-9223372036854775808__")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Ee(ke(a),n)<=0||(r.has(a.key)||Gn(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Te.resolve(i)}getAllFromCollectionGroup(e,t,n,r){I(9500)}ii(e,t){return Te.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new wo(this)}getSize(e){return Te.resolve(this.size)}}class wo extends uo{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Do{constructor(e){this.persistence=e,this.si=new Jn(e=>In(e),Pn),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new go,this.targetCount=0,this.ai=to.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new to(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.Pr(t),Te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Te.waitFor(i).next(()=>r)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Te.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Te.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Te.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Te.resolve(n)}containsKey(e,t){return Te.resolve(this._i.containsKey(t))}}class ko{constructor(e,t){this.ui={},this.overlays={},this.ci=new _e(0),this.li=!1,this.li=!0,this.hi=new fo,this.referenceDelegate=e(this),this.Pi=new Do(this),this.indexManager=new Zi,this.remoteDocumentCache=function(e){return new bo(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Yi(t),this.Ii=new po(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mo,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new vo(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){T("MemoryPersistence","Starting transaction:",e);const r=new xo(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Te.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class xo extends Ce{constructor(e){super(),this.currentSequenceNumber=e}}class Eo{constructor(e){this.persistence=e,this.Ri=new go,this.Vi=null}static mi(e){return new Eo(e)}get fi(){if(this.Vi)return this.Vi;throw I(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Te.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.fi,n=>{const r=ae.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,ve.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Te.or([()=>Te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class So{constructor(e,t){this.persistence=e,this.pi=new Jn(e=>Be(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=lo(this,t)}static mi(e,t){return new So(e,t)}Ei(){}di(e){return Te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Te.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Te.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,ve.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Te.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Te.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Gt(e.data.value)),t}br(e,t,n){return Te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Te.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Co{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=ur(),r=ur();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Co(e,t.fromCache,n,r)}}class Ao{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class To{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(0,u.nr)()?8:Fe((0,u.ZQ)())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Ao;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(A()<=l.$b.DEBUG&&T("QueryEngine","SDK will not create cache indexes for query:",Yn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Te.resolve()):(A()<=l.$b.DEBUG&&T("QueryEngine","Query:",Yn(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(A()<=l.$b.DEBUG&&T("QueryEngine","The SDK decides to create cache indexes for query:",Yn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qn(t))):Te.resolve())}ys(e,t){if(On(t))return Te.resolve(null);let n=qn(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Hn(t,null,"F"),n=qn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=ur(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const o=this.Ds(t,r);return this.Cs(t,o,i,n.readTime)?this.ys(e,Hn(t,null,"F")):this.vs(e,o,t,n)}))})))}ws(e,t,n,r){return On(t)||r.isEqual(ve.min())?Te.resolve(null):this.ps.getDocuments(e,n).next(i=>{const o=this.Ds(t,i);return this.Cs(t,o,n,r)?Te.resolve(null):(A()<=l.$b.DEBUG&&T("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Yn(t)),this.vs(e,o,t,De(r,be)).next(e=>e))})}Ds(e,t){let n=new gt(Zn(e));return t.forEach((t,r)=>{Gn(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return A()<=l.$b.DEBUG&&T("QueryEngine","Using full collection scan to execute query:",Yn(t)),this.ps.getDocumentsMatchingQuery(e,t,xe.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Fo="LocalStore",Ro=3e8;class _o{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new pt(Q),this.xs=new Jn(e=>In(e),Pn),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ho(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Io(e,t,n,r){return new _o(e,t,n,r)}async function Po(e,t){const n=N(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],o=[];let a=ur();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:o}))})})}function Mo(e){const t=N(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function No(e,t,n){let r=ur(),i=ur();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=er();return n.forEach((n,o)=>{const a=e.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(ve.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):T(Fo,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),{ks:r,qs:i}})}function jo(e,t){const n=N(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Ie),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Bo(e,t){const n=N(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Te.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new Ki(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Oo(e,t,n){const r=N(e),i=r.Ms.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Re(e))throw e;T(Fo,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Lo(e,t,n){const r=N(e);let i=ve.min(),o=ur();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=N(e),i=r.xs.get(n);return void 0!==i?Te.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,qn(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{o=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:ve.min(),n?o:ur())).next(e=>(Wo(r,Qn(t),e),{documents:e,Qs:o})))}function Wo(e,t,n){let r=e.Os.get(t)||ve.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class qo{constructor(){this.activeTargetIds=dr()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uo{constructor(){this.Mo=new qo,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new qo,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zo{Oo(e){}shutdown(){}}const Ho="ConnectivityMonitor";class Vo{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){T(Ho,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){T(Ho,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ko=null;function Yo(){return null===Ko?Ko=268435456+Math.round(2147483648*Math.random()):Ko++,"0x"+Ko.toString(16)}const Go="RestConnection",Qo={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Zo{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Pt?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const o=Yo(),a=this.zo(e,t.toUriEncodedString());T(Go,"Sending RPC '".concat(e,"' ").concat(o,":"),a,n);const s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,i);const{host:l}=new URL(a),c=(0,u.zJ)(l);return this.Jo(e,a,s,n,c).then(t=>(T(Go,"Received RPC '".concat(e,"' ").concat(o,": "),t),t),t=>{throw R(Go,"RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,i,o){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+S,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Qo[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Xo{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Jo="WebChannelConnection";class $o extends Zo{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const o=Yo();return new Promise((i,a)=>{const s=new h;s.setWithCredentials(!0),s.listenOnce(m.COMPLETE,()=>{try{switch(s.getLastErrorCode()){case f.NO_ERROR:const n=s.getResponseJson();T(Jo,"XHR for RPC '".concat(e,"' ").concat(o," received:"),JSON.stringify(n)),i(n);break;case f.TIMEOUT:T(Jo,"RPC '".concat(e,"' ").concat(o," timed out")),a(new B(j.DEADLINE_EXCEEDED,"Request time out"));break;case f.HTTP_ERROR:const r=s.getStatus();if(T(Jo,"RPC '".concat(e,"' ").concat(o," failed with status:"),r,"response text:",s.getResponseText()),r>0){var t;let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(t)>=0?t:j.UNKNOWN}(n.status);a(new B(e,n.message))}else a(new B(j.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new B(j.UNAVAILABLE,"Connection failed."));break;default:I(9055,{l_:e,streamId:o,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{T(Jo,"RPC '".concat(e,"' ").concat(o," completed."))}});const l=JSON.stringify(r);T(Jo,"RPC '".concat(e,"' ").concat(o," sending request:"),r),s.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Yo(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=b(),a=v(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const u=i.join("");T(Jo,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),s);const c=o.createWebChannel(u,s);this.I_(c);let d=!1,h=!1;const m=new Xo({Yo:t=>{h?T(Jo,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(T(Jo,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),d=!0),T(Jo,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Zo:()=>c.close()}),f=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return f(c,p.EventType.OPEN,()=>{h||(T(Jo,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),m.o_())}),f(c,p.EventType.CLOSE,()=>{h||(h=!0,T(Jo,"RPC '".concat(e,"' stream ").concat(r," transport closed")),m.a_(),this.E_(c))}),f(c,p.EventType.ERROR,t=>{h||(h=!0,R(Jo,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),m.a_(new B(j.UNAVAILABLE,"The operation could not be completed")))}),f(c,p.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];M(!!i,16349);const o=i,a=(null===o||void 0===o?void 0:o.error)||(null===(n=o[0])||void 0===n?void 0:n.error);if(a){T(Jo,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Gr[e];if(void 0!==t)return Xr(t)}(t),i=a.message;void 0===n&&(n=j.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,m.a_(new B(n,i)),c.close()}else T(Jo,"RPC '".concat(e,"' stream ").concat(r," received:"),i),m.u_(i)}}),f(a,y.STAT_EVENT,t=>{t.stat===g.PROXY?T(Jo,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===g.NOPROXY&&T(Jo,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{m.__()},0),m}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function ea(){return"undefined"!=typeof document?document:null}function ta(e){return new yi(e,!0)}class na{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&T("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ra="PersistentStream";class ia{constructor(e,t,n,r,i,o,a,s){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new na(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===j.RESOURCE_EXHAUSTED?(F(t.toString()),F("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===j.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new B(j.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return T(ra,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(T(ra,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oa extends ia{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:I(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(M(void 0===t||"string"==typeof t,58123),wt.fromBase64String(t||"")):(M(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),wt.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){const t=void 0===e.code?j.UNKNOWN:Xr(e.code);return new B(t,e.message||"")}(a);n=new ui(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ai(e,r.document.name),o=ki(r.document.updateTime),a=r.document.createTime?ki(r.document.createTime):ve.min(),s=new on({mapValue:{fields:r.document.fields}}),l=sn.newFoundDocument(i,o,a,s),u=r.targetIds||[],c=r.removedTargetIds||[];n=new si(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Ai(e,r.document),o=r.readTime?ki(r.readTime):ve.min(),a=sn.newNoDocument(i,o),s=r.removedTargetIds||[];n=new si([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Ai(e,r.document),o=r.removedTargetIds||[];n=new si([],o,i,null)}else{if(!("filter"in t))return I(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Yr(r,i),a=e.targetId;n=new li(a,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ve.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ve.min():t.readTime?ki(t.readTime):ve.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Ri(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Mn(r)?{documents:Mi(e,r)}:{query:Ni(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=wi(e,t.resumeToken);const r=vi(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ve.min())>0){n.readTime=bi(e,t.snapshotVersion.toTimestamp());const r=vi(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return I(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Ri(this.serializer),t.removeTarget=e,this.q_(t)}}class aa extends ia{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return M(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,M(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){M(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(M(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?ki(e.updateTime):ki(t);return n.isEqual(ve.min())&&(n=ki(t)),new Tr(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=ki(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Ri(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Pi(this.serializer,e))};this.q_(t)}}class sa{}class la extends sa{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new B(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,a]=i;return this.connection.Go(e,Ei(t,n),r,o,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new B(j.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(o=>{let[a,s]=o;return this.connection.Ho(e,Ei(t,n),r,a,s,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new B(j.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ua{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(F(t),this.aa=!1):T("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const ca="RemoteStore";class da{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{wa(this)&&(T(ca,"Restarting streams for network reachability change."),await async function(e){const t=N(e);t.Ea.add(4),await pa(t),t.Ra.set("Unknown"),t.Ea.delete(4),await ha(t)}(this))})}),this.Ra=new ua(n,r)}}async function ha(e){if(wa(e))for(const t of e.da)await t(!0)}async function pa(e){for(const t of e.da)await t(!1)}function ma(e,t){const n=N(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),ba(n)?va(n):La(n).O_()&&ga(n,t))}function fa(e,t){const n=N(e),r=La(n);n.Ia.delete(t),r.O_()&&ya(n,t),0===n.Ia.size&&(r.O_()?r.L_():wa(n)&&n.Ra.set("Unknown"))}function ga(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ve.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}La(e).Y_(t)}function ya(e,t){e.Va.Ue(t),La(e).Z_(t)}function va(e){e.Va=new di({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),La(e).start(),e.Ra.ua()}function ba(e){return wa(e)&&!La(e).x_()&&e.Ia.size>0}function wa(e){return 0===N(e).Ea.size}function Da(e){e.Va=void 0}async function ka(e){e.Ra.set("Online")}async function xa(e){e.Ia.forEach((t,n)=>{ga(e,t)})}async function Ea(e,t){Da(e),ba(e)?(e.Ra.ha(t),va(e)):e.Ra.set("Unknown")}async function Sa(e,t,n){if(e.Ra.set("Online"),t instanceof ui&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){T(ca,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Ca(e,n)}else if(t instanceof si?e.Va.Ze(t):t instanceof li?e.Va.st(t):e.Va.tt(t),!n.isEqual(ve.min()))try{const t=await Mo(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(wt.EMPTY_BYTE_STRING,r.snapshotVersion)),ya(e,t);const i=new Ki(r.target,t,n,r.sequenceNumber);ga(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){T(ca,"Failed to raise snapshot:",t),await Ca(e,t)}}async function Ca(e,t,n){if(!Re(t))throw t;e.Ea.add(1),await pa(e),e.Ra.set("Offline"),n||(n=()=>Mo(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{T(ca,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await ha(e)})}function Aa(e,t){return t().catch(n=>Ca(e,n,t))}async function Ta(e){const t=N(e),n=Wa(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Ie;for(;Fa(t);)try{const e=await jo(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Ra(t,e)}catch(e){await Ca(t,e)}_a(t)&&Ia(t)}function Fa(e){return wa(e)&&e.Ta.length<10}function Ra(e,t){e.Ta.push(t);const n=Wa(e);n.O_()&&n.X_&&n.ea(t.mutations)}function _a(e){return wa(e)&&!Wa(e).x_()&&e.Ta.length>0}function Ia(e){Wa(e).start()}async function Pa(e){Wa(e).ra()}async function Ma(e){const t=Wa(e);for(const n of e.Ta)t.ea(n.mutations)}async function Na(e,t,n){const r=e.Ta.shift(),i=Vr.from(r,t,n);await Aa(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Ta(e)}async function ja(e,t){t&&Wa(e).X_&&await async function(e,t){if(function(e){return Zr(e)&&e!==j.ABORTED}(t.code)){const n=e.Ta.shift();Wa(e).B_(),await Aa(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Ta(e)}}(e,t),_a(e)&&Ia(e)}async function Ba(e,t){const n=N(e);n.asyncQueue.verifyOperationInProgress(),T(ca,"RemoteStore received new credentials");const r=wa(n);n.Ea.add(3),await pa(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await ha(n)}async function Oa(e,t){const n=N(e);t?(n.Ea.delete(2),await ha(n)):t||(n.Ea.add(2),await pa(n),n.Ra.set("Unknown"))}function La(e){return e.ma||(e.ma=function(e,t,n){const r=N(e);return r.sa(),new oa(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:ka.bind(null,e),t_:xa.bind(null,e),r_:Ea.bind(null,e),H_:Sa.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),ba(e)?va(e):e.Ra.set("Unknown")):(await e.ma.stop(),Da(e))})),e.ma}function Wa(e){return e.fa||(e.fa=function(e,t,n){const r=N(e);return r.sa(),new aa(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Pa.bind(null,e),r_:ja.bind(null,e),ta:Ma.bind(null,e),na:Na.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Ta(e)):(await e.fa.stop(),e.Ta.length>0&&(T(ca,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class qa{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new O,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,a=new qa(e,t,o,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new B(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ua(e,t){if(F("AsyncQueue","".concat(t,": ").concat(e)),Re(e))return new B(j.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class za{static emptySet(e){return new za(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ae.comparator(t.key,n.key):(e,t)=>ae.comparator(e.key,t.key),this.keyedMap=nr(),this.sortedSet=new pt(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof za))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new za;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Ha{constructor(){this.ga=new pt(ae.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):I(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Va{constructor(e,t,n,r,i,o,a,s,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach(e=>{o.push({type:0,doc:e})}),new Va(e,t,za.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ka{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Ya{constructor(){this.queries=Ga(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=N(e),r=n.queries;n.queries=Ga(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new B(j.ABORTED,"Firestore shutting down"))}}function Ga(){return new Jn(e=>Kn(e),Vn)}async function Qa(e,t){const n=N(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.ba()&&t.Da()&&(r=2):(o=new Ka,r=t.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Ua(e,"Initialization of query '".concat(Yn(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,o),o.Sa.push(t),t.va(n.onlineState),o.wa&&t.Fa(o.wa)&&$a(n)}async function Za(e,t){const n=N(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.Sa.indexOf(t);e>=0&&(o.Sa.splice(e,1),0===o.Sa.length?i=t.Da()?0:1:!o.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Xa(e,t){const n=N(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&$a(n)}function Ja(e,t,n){const r=N(e),i=r.queries.get(t);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(t)}function $a(e){e.Ca.forEach(e=>{e.next()})}var es,ts;(ts=es||(es={})).Ma="default",ts.Cache="cache";class ns{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Va(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Va.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==es.Cache}}class rs{constructor(e){this.key=e}}class is{constructor(e){this.key=e}}class os{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ur(),this.mutatedKeys=ur(),this.eu=Zn(e),this.tu=new za(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Ha,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),c=Gn(this.query,t)?t:null,d=!!u&&this.mutatedKeys.has(u.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let p=!1;u&&c?u.data.isEqual(c.data)?d!==h&&(n.track({type:3,doc:c}),p=!0):this.su(u,c)||(n.track({type:2,doc:c}),p=!0,(s&&this.eu(c,s)>0||l&&this.eu(c,l)<0)&&(a=!0)):!u&&c?(n.track({type:0,doc:c}),p=!0):u&&!c&&(n.track({type:1,doc:u}),p=!0,(s||l)&&(a=!0)),p&&(c?(o=o.add(c),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:o,iu:n,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return I(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],s=0===this.Xa.size&&this.current&&!r?1:0,l=s!==this.Za;return this.Za=s,0!==o.length||l?{snapshot:new Va(this.query,e.tu,i,o,e.mutatedKeys,0===s,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ha,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ur(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new is(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new rs(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=ur();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Va.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const as="SyncEngine";class ss{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ls{constructor(e){this.key=e,this.hu=!1}}class us{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Jn(e=>Kn(e),Vn),this.Iu=new Map,this.Eu=new Set,this.du=new pt(ae.comparator),this.Au=new Map,this.Ru=new go,this.Vu={},this.mu=new Map,this.fu=to.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function cs(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=_s(e);let i;const o=r.Tu.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await hs(r,t,n,!0),i}async function ds(e,t){const n=_s(e);await hs(n,t,!0,!1)}async function hs(e,t,n,r){const i=await Bo(e.localStore,qn(t)),o=i.targetId,a=e.sharedClientState.addLocalQueryTarget(o,n);let s;return r&&(s=await ps(e,t,o,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&ma(e.remoteStore,i),s}async function ps(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Lo(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const o=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o,a);return Ss(e,t.targetId,s.au),s.snapshot}(e,t,n,r);const o=await Lo(e.localStore,t,!0),a=new os(t,o.Qs),s=a.ru(o.documents),l=ai.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=a.applyChanges(s,e.isPrimaryClient,l);Ss(e,n,u.au);const c=new ss(t,n,a);return e.Tu.set(t,c),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),u.snapshot}async function ms(e,t,n){const r=N(e),i=r.Tu.get(t),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(e=>!Vn(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Oo(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&fa(r.remoteStore,i.targetId),xs(r,i.targetId)}).catch(Ae)):(xs(r,i.targetId),await Oo(r.localStore,i.targetId,!0))}async function fs(e,t){const n=N(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fa(n.remoteStore,r.targetId))}async function gs(e,t){const n=N(e);try{const e=await function(e,t){const n=N(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach((o,s)=>{const l=i.get(s);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,o.removedDocuments,s).next(()=>n.Pi.addMatchingKeys(e,o.addedDocuments,s)));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?u=u.withResumeToken(wt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):o.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(o.resumeToken,r)),i=i.insert(s,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Ro||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,u,o)&&a.push(n.Pi.updateTargetData(e,u))});let s=er(),l=ur();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(No(e,o,t.documentUpdates).next(e=>{s=e.ks,l=e.qs})),!r.isEqual(ve.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Te.waitFor(a).next(()=>o.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,s,l)).next(()=>s)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(M(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?M(r.hu,14607):e.removedDocuments.size>0&&(M(r.hu,42227),r.hu=!1))}),await Ts(n,e,t)}catch(e){await Ae(e)}}function ys(e,t,n){const r=N(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=N(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&$a(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function vs(e,t,n){const r=N(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),o=i&&i.key;if(o){let e=new pt(ae.comparator);e=e.insert(o,sn.newNoDocument(o,ve.min()));const n=ur().add(o),i=new oi(ve.min(),new Map,new pt(Q),e,n);await gs(r,i),r.du=r.du.remove(o),r.Au.delete(t),As(r)}else await Oo(r.localStore,t,!1).then(()=>xs(r,t,n)).catch(Ae)}async function bs(e,t){const n=N(e),r=t.batch.batchId;try{const e=await function(e,t){const n=N(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let a=Te.resolve();return o.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const o=n.docVersions.get(e);M(null!==o,48541),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ur();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);ks(n,r,null),Ds(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ts(n,e)}catch(e){await Ae(e)}}async function ws(e,t,n){const r=N(e);try{const e=await function(e,t){const n=N(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(M(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);ks(r,t,n),Ds(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ts(r,e)}catch(n){await Ae(n)}}function Ds(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function ks(e,t,n){const r=N(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function xs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Es(e,t)})}function Es(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(fa(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),As(e))}function Ss(e,t,n){for(const r of n)r instanceof rs?(e.Ru.addReference(r.key,t),Cs(e,r)):r instanceof is?(T(as,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Es(e,r.key)):I(19791,{wu:r})}function Cs(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(T(as,"New document in limbo: "+n),e.Eu.add(r),As(e))}function As(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ae(re.fromString(t)),r=e.fu.next();e.Au.set(r,new ls(n)),e.du=e.du.insert(n,r),ma(e.remoteStore,new Ki(qn(Bn(n.path)),r,"TargetPurposeLimboResolution",_e.ce))}}async function Ts(e,t,n){const r=N(e),i=[],o=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,s)=>{a.push(r.pu(s,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(s.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(s.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Co.As(s.targetId,e);o.push(t)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(e,t){const n=N(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Te.forEach(t,t=>Te.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Te.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Re(e))throw e;T(Fo,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,o))}async function Fs(e,t){const n=N(e);if(!n.currentUser.isEqual(t)){T(as,"User change. New user:",t.toKey());const e=await Po(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new B(j.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Ts(n,e.Ls)}}function Rs(e,t){const n=N(e),r=n.Au.get(t);if(r&&r.hu)return ur().add(r.key);{let e=ur();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function _s(e){const t=N(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gs.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rs.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=vs.bind(null,t),t.Pu.H_=Xa.bind(null,t.eventManager),t.Pu.yu=Ja.bind(null,t.eventManager),t}function Is(e){const t=N(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=bs.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ws.bind(null,t),t}class Ps{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ta(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Io(this.persistence,new To,e.initialUser,this.serializer)}Cu(e){return new ko(Eo.mi,this.serializer)}Du(e){return new Uo}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ps.provider={build:()=>new Ps};class Ms extends Ps{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){M(this.persistence.referenceDelegate instanceof So,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new ao(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?eo.withCacheSize(this.cacheSizeBytes):eo.DEFAULT;return new ko(e=>So.mi(e,t),this.serializer)}}class Ns{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ys(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Fs.bind(null,this.syncEngine),await Oa(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ya}createDatastore(e){const t=ta(e.databaseInfo.databaseId),n=function(e){return new $o(e)}(e.databaseInfo);return function(e,t,n,r){return new la(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new da(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>ys(this.syncEngine,e,0),Vo.v()?new Vo:new zo)}createSyncEngine(e,t){return function(e,t,n,r,i,o,a){const s=new us(e,t,n,r,i,o);return a&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=N(e);T(ca,"RemoteStore shutting down."),t.Ea.add(5),await pa(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Ns.provider={build:()=>new Ns};class js{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):F("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Bs="FirestoreClient";class Os{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=E.UNAUTHENTICATED,this.clientId=G.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{T(Bs,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(T(Bs,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new O;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ua(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ls(e,t){e.asyncQueue.verifyOperationInProgress(),T(Bs,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Po(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Ws(e,t){e.asyncQueue.verifyOperationInProgress();const n=await qs(e);T(Bs,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Ba(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ba(t.remoteStore,n)),e._onlineComponents=t}async function qs(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){T(Bs,"Using user provided OfflineComponentProvider");try{await Ls(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===j.FAILED_PRECONDITION||e.code===j.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;R("Error using user provided cache. Falling back to memory cache: "+n),await Ls(e,new Ps)}}else T(Bs,"Using default OfflineComponentProvider"),await Ls(e,new Ms(void 0));return e._offlineComponents}async function Us(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(T(Bs,"Using user provided OnlineComponentProvider"),await Ws(e,e._uninitializedComponentsProvider._online)):(T(Bs,"Using default OnlineComponentProvider"),await Ws(e,new Ns))),e._onlineComponents}function zs(e){return Us(e).then(e=>e.syncEngine)}async function Hs(e){const t=await Us(e),n=t.eventManager;return n.onListen=cs.bind(null,t.syncEngine),n.onUnlisten=ms.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ds.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=fs.bind(null,t.syncEngine),n}function Vs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new O;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new js({next:s=>{o.Nu(),t.enqueueAndForget(()=>Za(e,a));const l=s.docs.has(n);!l&&s.fromCache?i.reject(new B(j.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&s.fromCache&&r&&"server"===r.source?i.reject(new B(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),a=new ns(Bn(n.path),o,{includeMetadataChanges:!0,qa:!0});return Qa(e,a)}(await Hs(e),e.asyncQueue,t,n,r)),r.promise}function Ks(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new O;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new js({next:n=>{o.Nu(),t.enqueueAndForget(()=>Za(e,a)),n.fromCache&&"server"===r.source?i.reject(new B(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new ns(n,o,{includeMetadataChanges:!0,qa:!0});return Qa(e,a)}(await Hs(e),e.asyncQueue,t,n,r)),r.promise}function Ys(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Gs=new Map,Qs="firestore.googleapis.com",Zs=!0;class Xs{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new B(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qs,this.ssl=Zs}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Zs;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=$i;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<ro)throw new B(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new B(j.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ys(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new B(j.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new B(j.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new B(j.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Js{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xs({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new B(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xs(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new W;switch(e.type){case"firstParty":return new H(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new B(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Gs.get(e);t&&(T("ComponentProvider","Removing Datastore"),Gs.delete(e),t.terminate())}(this),Promise.resolve()}}class $s{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new $s(this.firestore,e,this._query)}}class el{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new el(this.firestore,e,this._key)}toJSON(){return{type:el._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(me(t,el._jsonSchema))return new el(e,n||null,new ae(re.fromString(t.referencePath)))}}el._jsonSchemaVersion="firestore/documentReference/1.0",el._jsonSchema={type:pe("string",el._jsonSchemaVersion),referencePath:pe("string")};class tl extends $s{constructor(e,t,n){super(e,t,Bn(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new el(this.firestore,null,new ae(e))}withConverter(e){return new tl(this.firestore,e,this._path)}}function nl(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,u.Ku)(e),se("collection","path",t),e instanceof Js){const n=re.fromString(t,...r);return ue(n),new tl(e,null,n)}{if(!(e instanceof el||e instanceof tl))throw new B(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(re.fromString(t,...r));return ue(n),new tl(e.firestore,null,n)}}function rl(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,u.Ku)(e),1===arguments.length&&(t=G.newId()),se("doc","path",t),e instanceof Js){const n=re.fromString(t,...r);return le(n),new el(e,null,new ae(n))}{if(!(e instanceof el||e instanceof tl))throw new B(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(re.fromString(t,...r));return le(n),new el(e.firestore,e instanceof tl?e.converter:null,new ae(n))}}const il="AsyncQueue";class ol{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new na(this,"async_queue_retry"),this._c=()=>{const e=ea();e&&T(il,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=ea();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ea();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new O;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Re(e))throw e;T(il,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,F("INTERNAL UNHANDLED ERROR: ",al(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=qa.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&I(47125,{Pc:al(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function al(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function sl(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class ll extends Js{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new ol,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ol(e),this._firestoreClient=void 0,await e}}}function ul(e,t){const n="object"==typeof e?e:(0,a.Sx)(),r="string"==typeof e?e:t||Pt,i=(0,a.j6)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(0,u.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=he(e,Js);const i=(0,u.zJ)(t),a=e._getSettings(),s=(0,o.A)((0,o.A)({},a),{},{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);i&&((0,u.gE)("https://".concat(l)),(0,u.P1)("Firestore",!0)),a.host!==Qs&&a.host!==l&&R("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=(0,o.A)((0,o.A)({},a),{},{host:l,ssl:i,emulatorOptions:r});if(!(0,u.bD)(c,s)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=E.MOCK_USER;else{var d;t=(0,u.Fy)(r.mockUserToken,null===(d=e._app)||void 0===d?void 0:d.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new B(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new E(i)}e._authCredentials=new q(new L(t,n))}}(i,...e)}return i}function cl(e){if(e._terminated)throw new B(j.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||dl(e),e._firestoreClient}function dl(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new It(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ys(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Os(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class hl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hl(wt.fromBase64String(e))}catch(e){throw new B(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new hl(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:hl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(me(e,hl._jsonSchema))return hl.fromBase64String(e.bytes)}}hl._jsonSchemaVersion="firestore/bytes/1.0",hl._jsonSchema={type:pe("string",hl._jsonSchemaVersion),bytes:pe("string")};class pl{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new B(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oe(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ml{constructor(e){this._methodName=e}}class fl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new B(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new B(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Q(this._lat,e._lat)||Q(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fl._jsonSchemaVersion}}static fromJSON(e){if(me(e,fl._jsonSchema))return new fl(e.latitude,e.longitude)}}fl._jsonSchemaVersion="firestore/geoPoint/1.0",fl._jsonSchema={type:pe("string",fl._jsonSchemaVersion),latitude:pe("number"),longitude:pe("number")};class gl{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(me(e,gl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new gl(e.vectorValues);throw new B(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gl._jsonSchemaVersion="firestore/vectorValue/1.0",gl._jsonSchema={type:pe("string",gl._jsonSchemaVersion),vectorValues:pe("object")};const yl=/^__.*__$/;class vl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Or(e,this.data,this.fieldMask,t,this.fieldTransforms):new Br(e,this.data,t,this.fieldTransforms)}}class bl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Or(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw I(40011,{Ac:e})}}class Dl{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Dl((0,o.A)((0,o.A)({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ll(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(wl(this.Ac)&&yl.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class kl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ta(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Dl({Ac:e,methodName:t,Dc:n,path:oe.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xl(e){const t=e._freezeSettings(),n=ta(e._databaseId);return new kl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function El(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(o.merge||o.mergeFields?2:0,t,n,i);Nl("Data must be an object, but it was:",a,r);const s=Pl(r,a);let l,u;if(o.merge)l=new vt(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=jl(t,r,n);if(!a.contains(i))throw new B(j.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Wl(e,i)||e.push(i)}l=new vt(e),u=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,u=a.fieldTransforms;return new vl(new on(s),l,u)}class Sl extends ml{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sl}}function Cl(e,t,n){return new Dl({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Al extends ml{_toFieldTransform(e){return new Ar(e.path,new br)}isEqual(e){return e instanceof Al}}class Tl extends ml{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Cl(this,e,!0),n=this.vc.map(e=>Il(e,t)),r=new wr(n);return new Ar(e.path,r)}isEqual(e){return e instanceof Tl&&(0,u.bD)(this.vc,e.vc)}}function Fl(e,t,n,r){const i=e.Cc(1,t,n);Nl("Data must be an object, but it was:",i,r);const o=[],a=on.empty();dt(r,(e,r)=>{const s=Ol(t,e,n);r=(0,u.Ku)(r);const l=i.yc(s);if(r instanceof Sl)o.push(s);else{const e=Il(r,l);null!=e&&(o.push(s),a.set(s,e))}});const s=new vt(o);return new bl(a,s,i.fieldTransforms)}function Rl(e,t,n,r,i,o){const a=e.Cc(1,t,n),s=[jl(t,r,n)],l=[i];if(o.length%2!=0)throw new B(j.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let u=0;u<o.length;u+=2)s.push(jl(t,o[u])),l.push(o[u+1]);const c=[],d=on.empty();for(let p=s.length-1;p>=0;--p)if(!Wl(c,s[p])){const e=s[p];let t=l[p];t=(0,u.Ku)(t);const n=a.yc(e);if(t instanceof Sl)c.push(e);else{const r=Il(t,n);null!=r&&(c.push(e),d.set(e,r))}}const h=new vt(c);return new bl(d,h,a.fieldTransforms)}function _l(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Il(n,e.Cc(r?4:3,t))}function Il(e,t){if(Ml(e=(0,u.Ku)(e)))return Nl("Unsupported field value:",t,e),Pl(e,t);if(e instanceof ml)return function(e,t){if(!wl(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Il(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,u.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return mr(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ye.fromDate(e);return{timestampValue:bi(t.serializer,n)}}if(e instanceof ye){const n=new ye(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:bi(t.serializer,n)}}if(e instanceof fl)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof hl)return{bytesValue:wi(t.serializer,e._byteString)};if(e instanceof el){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:xi(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof gl)return function(e,t){return{mapValue:{fields:{[Nt]:{stringValue:Ot},[Lt]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return hr(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(de(e)))}(e,t)}function Pl(e,t){const n={};return ht(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):dt(e,(e,r)=>{const i=Il(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Ml(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ye||e instanceof fl||e instanceof hl||e instanceof el||e instanceof ml||e instanceof gl)}function Nl(e,t,n){if(!Ml(n)||!ce(n)){const r=de(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function jl(e,t,n){if((t=(0,u.Ku)(t))instanceof pl)return t._internalPath;if("string"==typeof t)return Ol(e,t);throw Ll("Field path arguments must be of type string or ",e,!1,void 0,n)}const Bl=new RegExp("[~\\*/\\[\\]]");function Ol(e,t,n){if(t.search(Bl)>=0)throw Ll("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new pl(...t.split("."))._internalPath}catch(Ge){throw Ll("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ll(e,t,n,r,i){const o=r&&!r.isEmpty(),a=void 0!==i;let s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new B(j.INVALID_ARGUMENT,s+e+l)}function Wl(e,t){return e.some(e=>e.isEqual(t))}class ql{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new el(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ul(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zl("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ul extends ql{data(){return super.data()}}function zl(e,t){return"string"==typeof t?Ol(e,t):t instanceof pl?t._internalPath:t._delegate._internalPath}function Hl(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new B(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vl{}class Kl extends Vl{}function Yl(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof Vl&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Zl).length,n=e.filter(e=>e instanceof Gl).length;if(t>1||t>0&&n>0)throw new B(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Gl extends Kl{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Gl(e,t,n)}_apply(e){const t=this._parse(e);return $l(e._query,t),new $s(e.firestore,e.converter,zn(e._query,t))}_parse(e){const t=xl(e.firestore),n=function(e,t,n,r,i,o,a){let s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new B(j.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){Jl(a,o);const t=[];for(const n of a)t.push(Xl(r,e,n));s={arrayValue:{values:t}}}else s=Xl(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Jl(a,o),s=_l(n,t,a,"in"===o||"not-in"===o);return mn.create(i,o,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Ql(e,t,n){const r=t,i=zl("where",e);return Gl._create(i,r,n)}class Zl extends Vl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Zl(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)$l(n,i),n=zn(n,i)}(e._query,t),new $s(e.firestore,e.converter,zn(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Xl(e,t,n){if("string"==typeof(n=(0,u.Ku)(n))){if(""===n)throw new B(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ln(t)&&-1!==n.indexOf("/"))throw new B(j.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(re.fromString(n));if(!ae.isDocumentKey(r))throw new B(j.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Qt(e,new ae(r))}if(n instanceof el)return Qt(e,n._key);throw new B(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(de(n),"."))}function Jl(e,t){if(!Array.isArray(e)||0===e.length)throw new B(j.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function $l(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new B(j.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new B(j.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class eu{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Wt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Et(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw I(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return dt(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Lt].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>xt(e.doubleValue));return new gl(n)}convertGeoPoint(e){return new fl(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Rt(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(_t(e));default:return null}}convertTimestamp(e){const t=kt(e);return new ye(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=re.fromString(e);M(Vi(n),9688,{name:e});const r=new Mt(n.get(1),n.get(3)),i=new ae(n.popFirst(5));return r.isEqual(t)||F("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function tu(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class nu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ru extends ql{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(zl("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ru._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}ru._jsonSchemaVersion="firestore/documentSnapshot/1.0",ru._jsonSchema={type:pe("string",ru._jsonSchemaVersion),bundleSource:pe("string","DocumentSnapshot"),bundleName:pe("string"),bundle:pe("string")};class iu extends ru{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class ou{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new nu(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new iu(this._firestore,this._userDataWriter,n.key,n,new nu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new B(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new iu(e._firestore,e._userDataWriter,n.doc.key,n.doc,new nu(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new iu(e._firestore,e._userDataWriter,t.doc.key,t.doc,new nu(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:au(t.type),doc:r,oldIndex:i,newIndex:o}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ou._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=G.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function au(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return I(61501,{type:e})}}function su(e){e=he(e,el);const t=he(e.firestore,ll);return Vs(cl(t),e._key).then(n=>fu(t,e,n))}ou._jsonSchemaVersion="firestore/querySnapshot/1.0",ou._jsonSchema={type:pe("string",ou._jsonSchemaVersion),bundleSource:pe("string","QuerySnapshot"),bundleName:pe("string"),bundle:pe("string")};class lu extends eu{constructor(e){super(),this.firestore=e}convertBytes(e){return new hl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new el(this.firestore,null,t)}}function uu(e){e=he(e,$s);const t=he(e.firestore,ll),n=cl(t),r=new lu(t);return Hl(e._query),Ks(n,e._query).then(n=>new ou(t,r,e,n))}function cu(e,t,n){e=he(e,el);const r=he(e.firestore,ll),i=tu(e.converter,t,n);return mu(r,[El(xl(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Fr.none())])}function du(e,t,n){e=he(e,el);const r=he(e.firestore,ll),i=xl(r);let o;for(var a=arguments.length,s=new Array(a>3?a-3:0),l=3;l<a;l++)s[l-3]=arguments[l];return o="string"==typeof(t=(0,u.Ku)(t))||t instanceof pl?Rl(i,"updateDoc",e._key,t,n,s):Fl(i,"updateDoc",e._key,t),mu(r,[o.toMutation(e._key,Fr.exists(!0))])}function hu(e){return mu(he(e.firestore,ll),[new Ur(e._key,Fr.none())])}function pu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=(0,u.Ku)(e);let i={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof n[o]||sl(n[o])||(i=n[o++]);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(sl(n[o])){var s,l,c;const e=n[o];n[o]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[o+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[o+2]=null===(c=e.complete)||void 0===c?void 0:c.bind(e)}let d,h,p;if(e instanceof el)h=he(e.firestore,ll),p=Bn(e._key.path),d={next:t=>{n[o]&&n[o](fu(h,e,t))},error:n[o+1],complete:n[o+2]};else{const t=he(e,$s);h=he(t.firestore,ll),p=t._query;const r=new lu(h);d={next:e=>{n[o]&&n[o](new ou(h,r,t,e))},error:n[o+1],complete:n[o+2]},Hl(e._query)}return function(e,t,n,r){const i=new js(r),o=new ns(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>Qa(await Hs(e),o)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>Za(await Hs(e),o))}}(cl(h),p,a,d)}function mu(e,t){return function(e,t){const n=new O;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Is(e);try{const e=await function(e,t){const n=N(e),r=ye.now(),i=t.reduce((e,t)=>e.add(t.key),ur());let o,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let s=er(),l=ur();return n.Ns.getEntries(e,i).next(e=>{s=e,s.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,s)).next(i=>{o=i;const a=[];for(const e of t){const t=Nr(e,o.get(e.key).overlayedDocument);null!=t&&a.push(new Or(e.key,t,an(t.value.mapValue),Fr.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:rr(o)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new pt(Q)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Ts(r,e.changes),await Ta(r.remoteStore)}catch(e){const t=Ua(e,"Failed to persist write");n.reject(t)}}(await zs(e),t,n)),n.promise}(cl(e),t)}function fu(e,t,n){const r=n.docs.get(t._key),i=new lu(e);return new ru(e,i,t._key,r,new nu(n.hasPendingWrites,n.fromCache),t.converter)}function gu(){return new Al("serverTimestamp")}function yu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Tl("arrayUnion",t)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){S=e}(a.MF),(0,a.om)(new s.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const a=e.getProvider("app").getImmediate(),s=new ll(new U(e.getProvider("auth-internal")),new K(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new B(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mt(e.options.projectId,t)}(a,r),a);return i=(0,o.A)({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),(0,a.KO)(k,x,e),(0,a.KO)(k,x,"esm2020")}()},672:(e,t,n)=>{var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var a={d:{f:o,r:function(){throw Error(i(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},s=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=u(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,o="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:o}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:o,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=u(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=u(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=u(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},705:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function o(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{A:()=>o})},776:(e,t,n)=>{n.d(t,{cY:()=>f,FA:()=>N,g:()=>M,dM:()=>P,u:()=>l,Uj:()=>s,p9:()=>Z,Fy:()=>v,tD:()=>z,bD:()=>O,hp:()=>U,T9:()=>p,Tj:()=>d,yU:()=>h,XA:()=>m,mS:()=>u,Ku:()=>X,ZQ:()=>k,sr:()=>C,zJ:()=>g,c1:()=>S,Im:()=>B,lT:()=>T,zW:()=>_,jZ:()=>x,lV:()=>A,nr:()=>F,Ov:()=>R,gE:()=>y,Am:()=>W,I9:()=>q,P1:()=>D,eX:()=>I});var r=n(379);const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,a=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,u=t>>2,c=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;s||(h=64,o||(d=64)),r.push(n[u],n[c],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==l)throw new a;const u=t<<2|o>>4;if(r.push(u),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==l){const e=s<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s=function(e){return function(e){const t=i(e);return o.encodeByteArray(t,!0)}(e).replace(/\./g,"")},l=function(e){try{return o.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function u(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const c=()=>{try{return u().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&l(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},d=e=>{var t;return null===(t=c())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},h=e=>{const t=d(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},p=()=>{var e;return null===(e=c())||void 0===e?void 0:e.config},m=e=>{var t;return null===(t=c())||void 0===t?void 0:t["_".concat(e)]};class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function g(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function y(e){return(await fetch(e,{credentials:"include"})).ok}function v(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=(0,r.A)({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[s(JSON.stringify({alg:"none",type:"JWT"})),s(JSON.stringify(a)),""].join(".")}const b={};let w=!1;function D(e,t){if("undefined"===typeof window||"undefined"===typeof document||!g(window.location.host)||b[e]===t||b[e]||w)return;function n(e){return"__firebase__banner__".concat(e)}b[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(b))b[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function o(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{w=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),s=n("learnmore"),l=document.getElementById(s)||document.createElement("a"),u=n("preprendIcon"),c=document.getElementById(u)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,s);const n=o();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(c,u),t.append(c,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",c.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(c.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function k(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function x(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(k())}function E(){var e;const t=null===(e=c())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function S(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function C(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function A(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function T(){const e=k();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function F(){return!E()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R(){return!E()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function _(){try{return"object"===typeof indexedDB}catch(e){return!1}}function I(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function P(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class M extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,M.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,N.prototype.create)}}class N{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(j,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new M(n,o,t)}}const j=/\{\$([^}]+)}/g;function B(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function O(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(L(n)&&L(o)){if(!O(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function L(e){return null!==e&&"object"===typeof e}function W(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function q(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function U(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function z(e,t){const n=new H(e,t);return n.subscribe.bind(n)}class H{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V(){}const K=1e3,Y=2,G=144e5,Q=.5;function Z(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:K)*Math.pow(t,e),r=Math.round(Q*n*(Math.random()-.5)*2);return Math.min(G,n+r)}function X(e){return e&&e._delegate?e._delegate:e}},799:(e,t,n)=>{n.d(t,{P2:()=>y});var r=n(379);const i=(e,t)=>t.some(t=>e instanceof t);let o,a;const s=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap;let h={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return l.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return f(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(g(this),n),f(s.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(e.apply(g(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(g(this),t,...r);return u.set(o,t.sort?t.sort():[t]),f(o)}}function m(e){return"function"===typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(l.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});l.set(e,t)}(e),i(e,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,h):e)}function f(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(f(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&s.set(t,e)}).catch(()=>{}),d.set(t,e),t}(e);if(c.has(e))return c.get(e);const t=m(e);return t!==e&&(c.set(e,t),d.set(t,e)),t}const g=e=>d.get(e);function y(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=f(a);return r&&a.addEventListener("upgradeneeded",e=>{r(f(a.result),e.oldVersion,e.newVersion,f(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}const v=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],w=new Map;function D(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!v.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),i&&t.done]))[0]};return w.set(t,o),o}h=(e=>(0,r.A)((0,r.A)({},e),{},{get:(t,n,r)=>D(t,n)||e.get(t,n,r),has:(t,n)=>!!D(t,n)||e.has(t,n)}))(h)},853:(e,t,n)=>{e.exports=n(896)},889:(e,t,n)=>{n.d(t,{Uz:()=>A,Qg:()=>T});var r=n(150),i=n(776),o=n(606);const a="type.googleapis.com/google.protobuf.Int64Value",s="type.googleapis.com/google.protobuf.UInt64Value";function l(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function u(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(e=>u(e));if("function"===typeof e||"object"===typeof e)return l(e,e=>u(e));throw new Error("Data cannot be encoded in JSON: "+e)}function c(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case a:case s:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(e=>c(e)):"function"===typeof e||"object"===typeof e?l(e,e=>c(e)):e}const d="functions",h={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class p extends i.g{constructor(e,t,n){super("".concat(d,"/").concat(e),t||""),this.details=n,Object.setPrototypeOf(this,p.prototype)}}function m(e,t){let n,r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r;try{const e=t&&t.error;if(e){const t=e.status;if("string"===typeof t){if(!h[t])return new p("internal","internal");r=h[t],i=t}const o=e.message;"string"===typeof o&&(i=o),n=e.details,void 0!==n&&(n=c(n))}}catch(o){}return"ok"===r?null:new p(r,i,n)}class f{constructor(e,t,n,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,(0,r.xZ)(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(e=>this.auth=e,()=>{}),this.messaging||n.get().then(e=>this.messaging=e,()=>{}),this.appCheck||null===i||void 0===i||i.get().then(e=>this.appCheck=e,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null===e||void 0===e?void 0:e.accessToken}catch(e){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(e){return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const g="us-central1",y=/^data: (.*?)(?:\n|$)/;class v{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return fetch(...arguments)};this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new f(e,t,n,r),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{const e=new URL(i);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=g}catch(a){this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){const n=this.emulatorOrigin;return"".concat(n,"/").concat(t,"/").concat(this.region,"/").concat(e)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}function b(e,t,n){const r=r=>function(e,t,n,r){const i=e._url(t);return x(e,i,n,r)}(e,t,r,n||{});return r.stream=(n,r)=>function(e,t,n,r){const i=e._url(t);return E(e,i,n,r||{})}(e,t,n,r),r}function w(e){return e.emulatorOrigin&&(0,i.zJ)(e.emulatorOrigin)?"include":void 0}async function D(e,t,n,r,i){let o;n["Content-Type"]="application/json";try{o=await r(e,{method:"POST",body:JSON.stringify(t),headers:n,credentials:w(i)})}catch(s){return{status:0,json:null}}let a=null;try{a=await o.json()}catch(s){}return{status:o.status,json:a}}async function k(e,t){const n={},r=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),null!==r.appCheckToken&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}async function x(e,t,n,r){const i={data:n=u(n)},o=await k(e,r),a=function(e){let t=null;return{promise:new Promise((n,r)=>{t=setTimeout(()=>{r(new p("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}(r.timeout||7e4),s=await Promise.race([D(t,i,o,e.fetchImpl,e),a.promise,e.cancelAllRequests]);if(a.cancel(),!s)throw new p("cancelled","Firebase Functions instance was deleted.");const l=m(s.status,s.json);if(l)throw l;if(!s.json)throw new p("internal","Response is not valid JSON object.");let d=s.json.data;if("undefined"===typeof d&&(d=s.json.result),"undefined"===typeof d)throw new p("internal","Response is missing data field.");return{data:c(d)}}async function E(e,t,n,r){var i;const o={data:n=u(n)},a=await k(e,r);let s,l,d;a["Content-Type"]="application/json",a.Accept="text/event-stream";try{s=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(o),headers:a,signal:null===r||void 0===r?void 0:r.signal,credentials:w(e)})}catch(g){if(g instanceof Error&&"AbortError"===g.name){const e=new p("cancelled","Request was cancelled.");return{data:Promise.reject(e),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(e)})}}}const e=m(0,null);return{data:Promise.reject(e),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(e)})}}}const h=new Promise((e,t)=>{l=e,d=t});null===r||void 0===r||null===(i=r.signal)||void 0===i||i.addEventListener("abort",()=>{const e=new p("cancelled","Request was cancelled.");d(e)});const f=function(e,t,n,r){const i=(e,r)=>{const i=e.match(y);if(!i)return;const o=i[1];try{const e=JSON.parse(o);if("result"in e)return void t(c(e.result));if("message"in e)return void r.enqueue(c(e.message));if("error"in e){const t=m(0,e);return r.error(t),void n(t)}}catch(a){if(a instanceof p)return r.error(a),void n(a)}},o=new TextDecoder;return new ReadableStream({start(t){let a="";return s();async function s(){if(null!==r&&void 0!==r&&r.aborted){const e=new p("cancelled","Request was cancelled");return t.error(e),n(e),Promise.resolve()}try{const{value:l,done:u}=await e.read();if(u)return a.trim()&&i(a.trim(),t),void t.close();if(null!==r&&void 0!==r&&r.aborted){const r=new p("cancelled","Request was cancelled");return t.error(r),n(r),void await e.cancel()}a+=o.decode(l,{stream:!0});const c=a.split("\n");a=c.pop()||"";for(const e of c)e.trim()&&i(e.trim(),t);return s()}catch(l){const e=l instanceof p?l:m(0,null);t.error(e),n(e)}}},cancel:()=>e.cancel()})}(s.body.getReader(),l,d,null===r||void 0===r?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const e=f.getReader();return{async next(){const{value:t,done:n}=await e.read();return{value:t,done:n}},return:async()=>(await e.cancel(),{done:!0,value:void 0})}}},data:h}}const S="@firebase/functions",C="0.13.1";function A(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;const n=(0,r.j6)((0,i.Ku)(e),d).getImmediate({identifier:t}),o=(0,i.yU)("functions");return o&&function(e,t,n){!function(e,t,n){const r=(0,i.zJ)(t);e.emulatorOrigin="http".concat(r?"s":"","://").concat(t,":").concat(n),r&&((0,i.gE)(e.emulatorOrigin+"/backends"),(0,i.P1)("Functions",!0))}((0,i.Ku)(e),t,n)}(n,...o),n}function T(e,t,n){return b((0,i.Ku)(e),t,n)}var F;(0,r.om)(new o.uA(d,(e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("messaging-internal"),a=e.getProvider("app-check-internal");return new v(r,i,o,a,n)},"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(S,C,F),(0,r.KO)(S,C,"esm2020")},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>o(l,n))u<i&&0>o(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,h=null,p=3,m=!1,f=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function D(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function k(e){if(g=!1,D(e),!f)if(null!==r(u))f=!0,E||(E=!0,x());else{var t=r(c);null!==t&&I(k,t.startTime-e)}}var x,E=!1,S=-1,C=5,A=-1;function T(){return!!y||!(t.unstable_now()-A<C)}function F(){if(y=!1,E){var e=t.unstable_now();A=e;var n=!0;try{e:{f=!1,g&&(g=!1,b(S),S=-1),m=!0;var o=p;try{t:{for(D(e),h=r(u);null!==h&&!(h.expirationTime>e&&T());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var s=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){h.callback=s,D(e),n=!0;break t}h===r(u)&&i(u),D(e)}else i(u);h=r(u)}if(null!==h)n=!0;else{var l=r(c);null!==l&&I(k,l.startTime-e),n=!1}}break e}finally{h=null,p=o,m=!1}n=void 0}}finally{n?x():E=!1}}}if("function"===typeof w)x=function(){w(F)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,_=R.port2;R.port1.onmessage=F,x=function(){_.postMessage(null)}}else x=function(){v(F,0)};function I(e,n){S=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(c,e),null===r(u)&&e===r(c)&&(g?(b(S),S=-1):g=!0,I(k,o-a))):(e.sortIndex=s,n(u,e),f||m||(f=!0,E||(E=!0,x()))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},965:(e,t,n)=>{n.d(t,{$b:()=>i,Vy:()=>u});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const o={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},a=i.INFO,s={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=s[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class u{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?o[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}},986:(e,t,n)=>{function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,{A:()=>r})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".6069e135.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="run-plus-plans:";n.l=(r,i,o,a)=>{if(e[r])e[r].push(i);else{var s,l;if(void 0!==o)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach(e=>e(n)),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,o,a=r[0],s=r[1],l=r[2],u=0;if(a.some(t=>0!==e[t])){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);u<a.length;u++)o=a[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkrun_plus_plans=self.webpackChunkrun_plus_plans||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r={};n.r(r),n.d(r,{boolean:()=>xl,booleanish:()=>El,commaOrSpaceSeparated:()=>Fl,commaSeparated:()=>Tl,number:()=>Cl,overloadedBoolean:()=>Sl,spaceSeparated:()=>Al});var i={};n.r(i),n.d(i,{attentionMarkers:()=>rd,contentInitial:()=>Xc,disable:()=>id,document:()=>Zc,flow:()=>$c,flowInitial:()=>Jc,insideSpan:()=>nd,string:()=>ed,text:()=>td});var o,a=n(43),s=n.t(a,2),l=n(391),u=n(379);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(o||(o={}));const d="popstate";function h(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function p(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function m(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?y(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function g(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function y(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function v(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,l=o.Pop,u=null,p=y();function y(){return(s.state||{idx:null}).idx}function v(){l=o.Pop;let e=y(),t=null==e?null:e-p;p=e,u&&u({action:l,location:w.location,delta:t})}function b(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:g(e);return n=n.replace(/ $/,"%20"),h(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==p&&(p=0,s.replaceState(c({},s.state,{idx:p}),""));let w={get action(){return l},get location(){return e(i,s)},listen(e){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(d,v),u=e,()=>{i.removeEventListener(d,v),u=null}},createHref:e=>t(i,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=o.Push;let r=f(w.location,e,t);n&&n(r,e),p=y()+1;let c=m(r,p),d=w.createHref(r);try{s.pushState(c,"",d)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;i.location.assign(d)}a&&u&&u({action:l,location:w.location,delta:1})},replace:function(e,t){l=o.Replace;let r=f(w.location,e,t);n&&n(r,e),p=y();let i=m(r,p),c=w.createHref(r);s.replaceState(i,"",c),a&&u&&u({action:l,location:w.location,delta:0})},go:e=>s.go(e)};return w}var b;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(b||(b={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function w(e,t,n){return void 0===n&&(n="/"),D(e,t,n,!1)}function D(e,t,n,r){let i=N(("string"===typeof t?y(t):t).pathname||"/",n);if(null==i)return null;let o=k(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let a=null;for(let s=0;null==a&&s<o.length;++s){let e=M(i);a=I(o[s],e,r)}return a}function k(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(h(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=W([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(h(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),k(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:_(s,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of x(e.path))i(e,t,r);else i(e,t)}),t}function x(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=x(r.join("/")),s=[];return s.push(...a.map(e=>""===e?o:[o,e].join("/"))),i&&s.push(...a),s.map(t=>e.startsWith("/")&&""===t?"/":t)}const E=/^:[\w-]+$/,S=3,C=2,A=1,T=10,F=-2,R=e=>"*"===e;function _(e,t){let n=e.split("/"),r=n.length;return n.some(R)&&(r+=F),t&&(r+=C),n.filter(e=>!R(e)).reduce((e,t)=>e+(E.test(t)?S:""===t?A:T),r)}function I(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,u="/"===o?t:t.slice(o.length)||"/",c=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),d=e.route;if(!c&&l&&n&&!r[r.length-1].route.index&&(c=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!c)return null;Object.assign(i,c.params),a.push({params:i,pathname:W([o,c.pathname]),pathnameBase:q(W([o,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(o=W([o,c.pathnameBase]))}return a}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);p("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:o,pathnameBase:a,pattern:e}}function M(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return p(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function N(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function j(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function B(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function O(e,t){let n=B(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=y(e):(i=c({},e),h(!i.pathname||!i.pathname.includes("?"),j("?","pathname","search",i)),h(!i.pathname||!i.pathname.includes("#"),j("#","pathname","hash",i)),h(!i.search||!i.search.includes("#"),j("#","search","hash",i)));let o,a=""===e||""===i.pathname,s=a?"/":i.pathname;if(null==s)o=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?y(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:U(r),hash:z(i)}}(i,o),u=s&&"/"!==s&&s.endsWith("/"),d=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}const W=e=>e.join("/").replace(/\/\/+/g,"/"),q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function H(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const V=["post","put","patch","delete"],K=(new Set(V),["get",...V]);new Set(K),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y.apply(this,arguments)}const G=a.createContext(null);const Q=a.createContext(null);const Z=a.createContext(null);const X=a.createContext(null);const J=a.createContext({outlet:null,matches:[],isDataRoute:!1});const $=a.createContext(null);function ee(){return null!=a.useContext(X)}function te(){return ee()||h(!1),a.useContext(X).location}function ne(e){a.useContext(Z).static||a.useLayoutEffect(e)}function re(){let{isDataRoute:e}=a.useContext(J);return e?function(){let{router:e}=he(ce.UseNavigateStable),t=me(de.UseNavigateStable),n=a.useRef(!1);return ne(()=>{n.current=!0}),a.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,Y({fromRouteId:t},i)))},[e,t])}():function(){ee()||h(!1);let e=a.useContext(G),{basename:t,future:n,navigator:r}=a.useContext(Z),{matches:i}=a.useContext(J),{pathname:o}=te(),s=JSON.stringify(O(i,n.v7_relativeSplatPath)),l=a.useRef(!1);ne(()=>{l.current=!0});let u=a.useCallback(function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let a=L(n,JSON.parse(s),o,"path"===i.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:W([t,a.pathname])),(i.replace?r.replace:r.push)(a,i.state,i)},[t,r,s,o,e]);return u}()}function ie(e,t,n,r){ee()||h(!1);let{navigator:i}=a.useContext(Z),{matches:s}=a.useContext(J),l=s[s.length-1],u=l?l.params:{},c=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,p=te();if(t){var m;let e="string"===typeof t?y(t):t;"/"===c||(null==(m=e.pathname)?void 0:m.startsWith(c))||h(!1),d=e}else d=p;let f=d.pathname||"/",g=f;if("/"!==c){let e=c.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=w(e,{pathname:g});let b=ue(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:W([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:W([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,n,r);return t&&b?a.createElement(X.Provider,{value:{location:Y({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:o.Pop}},b):b}function oe(){let e=function(){var e;let t=a.useContext($),n=pe(de.UseRouteError),r=me(de.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=H(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),n?a.createElement("pre",{style:i},n):null,null)}const ae=a.createElement(oe,null);class se extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?a.createElement(J.Provider,{value:this.props.routeContext},a.createElement($.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:t,match:n,children:r}=e,i=a.useContext(G);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),a.createElement(J.Provider,{value:t},r)}function ue(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let s=e,l=null==(i=n)?void 0:i.errors;if(null!=l){let e=s.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||h(!1),s=s.slice(0,Math.min(s.length,e+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let a=0;a<s.length;a++){let e=s[a];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=a),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){u=!0,s=c>=0?s.slice(0,c+1):[s[0]];break}}}return s.reduceRight((e,r,i)=>{let o,d=!1,h=null,p=null;var m;n&&(o=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||ae,u&&(c<0&&0===i?(m="route-fallback",!1||fe[m]||(fe[m]=!0),d=!0,p=null):c===i&&(d=!0,p=r.route.hydrateFallbackElement||null)));let f=t.concat(s.slice(0,i+1)),g=()=>{let t;return t=o?h:d?p:r.route.Component?a.createElement(r.route.Component,null):r.route.element?r.route.element:e,a.createElement(le,{match:r,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?a.createElement(se,{location:n.location,revalidation:n.revalidation,component:h,error:o,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function he(e){let t=a.useContext(G);return t||h(!1),t}function pe(e){let t=a.useContext(Q);return t||h(!1),t}function me(e){let t=function(){let e=a.useContext(J);return e||h(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||h(!1),n.route.id}const fe={};function ge(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function ye(e){let{to:t,replace:n,state:r,relative:i}=e;ee()||h(!1);let{future:o,static:s}=a.useContext(Z),{matches:l}=a.useContext(J),{pathname:u}=te(),c=re(),d=L(t,O(l,o.v7_relativeSplatPath),u,"path"===i),p=JSON.stringify(d);return a.useEffect(()=>c(JSON.parse(p),{replace:n,state:r,relative:i}),[c,p,i,n,r]),null}function ve(e){h(!1)}function be(e){let{basename:t="/",children:n=null,location:r,navigationType:i=o.Pop,navigator:s,static:l=!1,future:u}=e;ee()&&h(!1);let c=t.replace(/^\/*/,"/"),d=a.useMemo(()=>({basename:c,navigator:s,static:l,future:Y({v7_relativeSplatPath:!1},u)}),[c,u,s,l]);"string"===typeof r&&(r=y(r));let{pathname:p="/",search:m="",hash:f="",state:g=null,key:v="default"}=r,b=a.useMemo(()=>{let e=N(p,c);return null==e?null:{location:{pathname:e,search:m,hash:f,state:g,key:v},navigationType:i}},[c,p,m,f,g,v,i]);return null==b?null:a.createElement(Z.Provider,{value:d},a.createElement(X.Provider,{children:n,value:b}))}function we(e){let{children:t,location:n}=e;return ie(De(t),n)}new Promise(()=>{});a.Component;function De(e,t){void 0===t&&(t=[]);let n=[];return a.Children.forEach(e,(e,r)=>{if(!a.isValidElement(e))return;let i=[...t,r];if(e.type===a.Fragment)return void n.push.apply(n,De(e.props.children,i));e.type!==ve&&h(!1),e.props.index&&e.props.children&&h(!1);let o={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=De(e.props.children,i)),n.push(o)}),n}var ke=n(950),xe=n.t(ke,2);function Ee(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(wy){}new Map;const Se=s.startTransition;xe.flushSync,s.useId;function Ce(e){let{basename:t,children:n,future:r,window:i}=e,o=a.useRef();var s;null==o.current&&(o.current=(void 0===(s={window:i,v5Compat:!0})&&(s={}),v(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:g(t)},null,s)));let l=o.current,[u,c]=a.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},h=a.useCallback(e=>{d&&Se?Se(()=>c(e)):c(e)},[c,d]);return a.useLayoutEffect(()=>l.listen(h),[l,h]),a.useEffect(()=>ge(r),[r]),a.createElement(be,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:l,future:r})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Ae,Te;function Fe(e){let t=a.useRef(Ee(e)),n=a.useRef(!1),r=te(),i=a.useMemo(()=>function(e,t){let n=Ee(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(r.search,n.current?null:t.current),[r.search]),o=re(),s=a.useCallback((e,t)=>{const r=Ee("function"===typeof e?e(i):e);n.current=!0,o("?"+r,t)},[o,i]);return[i,s]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ae||(Ae={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Te||(Te={}));var Re=n(144),_e=n(667),Ie=n(121);function Pe(e){if(null===e||void 0===e)return null;if(Array.isArray(e))return e.map(e=>Pe(e));if("object"===typeof e){const t={};for(const[n,r]of Object.entries(e))void 0!==r&&(t[n]=Pe(r));return t}return e}const Me=new class{async saveUserProfile(e,t){try{const n=(0,_e.doc)(Ie.db,"users",e),r=Pe(t);return await(0,_e.setDoc)(n,{profile:(0,u.A)((0,u.A)({},r),{},{createdAt:(0,_e.serverTimestamp)(),updatedAt:(0,_e.serverTimestamp)()})},{merge:!0}),console.log("\u2705 User profile saved to Firestore"),{success:!0}}catch(n){return console.error("\u274c Error saving user profile:",n),{success:!1,error:n.message}}}async saveTrainingPlan(e,t){try{const n=(0,_e.doc)(Ie.db,"users",e),r=Pe(t);return await(0,_e.setDoc)(n,{trainingPlan:(0,u.A)((0,u.A)({},r),{},{savedAt:(0,_e.serverTimestamp)()}),updatedAt:(0,_e.serverTimestamp)()},{merge:!0}),console.log("\u2705 Training plan saved to Firestore"),{success:!0}}catch(n){return console.error("\u274c Error saving training plan:",n),{success:!1,error:n.message}}}async getUserData(e){try{const t=(0,_e.doc)(Ie.db,"users",e),n=await(0,_e.getDoc)(t);return n.exists()?(console.log("\u2705 User data loaded from Firestore"),{success:!0,data:n.data()}):(console.log("\u2139\ufe0f No user data found (new user)"),{success:!0,data:null})}catch(t){return console.error("\u274c Error loading user data:",t),{success:!1,error:t.message}}}async markWorkoutComplete(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{var a;(0,_e.doc)(Ie.db,"users",e);const s=await this.getUserData(e);if(!s.success||null===(a=s.data)||void 0===a||!a.trainingPlan)throw new Error("No training plan found");const l=s.data.trainingPlan,u=l.weeks.find(e=>e.week===t);if(u){const e=u.workouts.find(e=>e.day===n);e&&(e.completed=r,e.completedAt=r?(new Date).toISOString():null,r?(null!==i&&(e.actualDistance=i),null!==o&&(e.notes=o)):(delete e.actualDistance,delete e.notes))}return await this.saveTrainingPlan(e,l),console.log("\u2705 Workout marked as ".concat(r?"complete":"incomplete").concat(i?" (".concat(i," miles)"):"")),{success:!0}}catch(s){return console.error("\u274c Error updating workout:",s),{success:!1,error:s.message}}}async saveModifiedWorkout(e,t,n,r){try{const i=(0,_e.doc)(Ie.db,"users",e);return await(0,_e.updateDoc)(i,{["modifiedWorkouts.".concat(t,"-").concat(n)]:(0,u.A)((0,u.A)({},r),{},{modifiedAt:(0,_e.serverTimestamp)()}),updatedAt:(0,_e.serverTimestamp)()}),console.log("\u2705 Modified workout saved"),{success:!0}}catch(i){return console.error("\u274c Error saving modified workout:",i),{success:!1,error:i.message}}}async getModifiedWorkouts(e){try{var t;const n=await this.getUserData(e);return n.success&&null!==(t=n.data)&&void 0!==t&&t.modifiedWorkouts?{success:!0,data:n.data.modifiedWorkouts}:{success:!0,data:{}}}catch(n){return console.error("\u274c Error loading modified workouts:",n),{success:!1,error:n.message}}}async clearUserData(e){try{const t=(0,_e.doc)(Ie.db,"users",e);return await(0,_e.kd)(t),console.log("\u2705 User data cleared (document deleted)"),{success:!0}}catch(t){return console.error("\u274c Error clearing user data:",t),{success:!1,error:t.message}}}},Ne={log:function(){0},info:function(){0},warn:function(){console.warn(...arguments)},error:function(){console.error(...arguments)}};var je=n(579);const Be=function(){const[e,t]=(0,a.useState)(!0),[n,r]=(0,a.useState)(""),[i,o]=(0,a.useState)(""),[s,l]=(0,a.useState)(""),[u,c]=(0,a.useState)(""),[d,h]=(0,a.useState)(!1),[p,m]=(0,a.useState)(!1);return(0,je.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"20px"},children:(0,je.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"40px",maxWidth:"400px",width:"100%",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,je.jsxs)("div",{style:{textAlign:"center",marginBottom:"32px"},children:[(0,je.jsx)("img",{src:"/logo.png",alt:"Run+ Plans",style:{maxWidth:"200px",height:"auto",marginBottom:"16px"}}),(0,je.jsx)("p",{style:{color:"#AAAAAA",fontSize:"0.95rem",lineHeight:"1.4"},children:"Smart training that adapts to injuries, equipment, and real life"})]}),p?(0,je.jsxs)("div",{style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:"8px",padding:"16px",color:"#00D4FF",textAlign:"center",marginBottom:"20px"},children:[(0,je.jsx)("p",{style:{margin:0},children:"\u2705 Password reset email sent! Check your inbox."}),(0,je.jsx)("button",{onClick:()=>m(!1),style:{background:"transparent",border:"none",color:"#00D4FF",textDecoration:"underline",cursor:"pointer",marginTop:"12px"},children:"Back to login"})]}):(0,je.jsxs)(je.Fragment,{children:[(0,je.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),c(""),h(!0);try{if(e)await(0,Re.x9)(Ie.j2,n,i),console.log("\u2705 Logged in successfully");else{const e=await(0,Re.eJ)(Ie.j2,n,i);s&&await(0,Re.r7)(e.user,{displayName:s}),await(0,_e.setDoc)((0,_e.doc)(Ie.db,"users",e.user.uid),{email:n,displayName:s||"",approvalStatus:"pending",createdAt:(0,_e.serverTimestamp)(),approvedAt:null,approvedBy:null}),console.log("\u2705 Account created successfully - pending approval")}}catch(r){switch(console.error("\u274c Auth error:",r),r.code){case"auth/email-already-in-use":c("This email is already registered. Please login instead.");break;case"auth/weak-password":c("Password must be at least 8 characters with 1 uppercase, 1 lowercase, and 1 special character.");break;case"auth/invalid-email":c("Please enter a valid email address.");break;case"auth/user-not-found":case"auth/wrong-password":c("Invalid email or password.");break;case"auth/too-many-requests":c("Too many failed attempts. Please try again later.");break;default:r.message?c(r.message):c("An error occurred. Please try again.")}}finally{h(!1)}},children:[!e&&(0,je.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#CCCCCC",marginBottom:"8px"},children:"Name"}),(0,je.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),autoComplete:"name",placeholder:"Your name",style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#FFFFFF",fontSize:"1rem"}})]}),(0,je.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#CCCCCC",marginBottom:"8px"},children:"Email"}),(0,je.jsx)("input",{type:"email",value:n,onChange:e=>r(e.target.value),required:!0,autoComplete:"email",placeholder:"you@example.com",style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#FFFFFF",fontSize:"1rem"}})]}),(0,je.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#CCCCCC",marginBottom:"8px"},children:"Password"}),(0,je.jsx)("input",{type:"password",value:i,onChange:e=>o(e.target.value),required:!0,autoComplete:e?"current-password":"new-password",placeholder:e?"Enter your password":"Create a strong password",style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#FFFFFF",fontSize:"1rem"}}),!e&&(0,je.jsxs)("div",{style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:"6px",padding:"12px",marginTop:"8px"},children:[(0,je.jsx)("p",{style:{fontSize:"0.875rem",color:"#00D4FF",fontWeight:"600",marginBottom:"6px"},children:"Password Requirements:"}),(0,je.jsxs)("ul",{style:{fontSize:"0.8rem",color:"#CCCCCC",margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[(0,je.jsx)("li",{children:"At least 8 characters"}),(0,je.jsx)("li",{children:"1 uppercase letter (A-Z)"}),(0,je.jsx)("li",{children:"1 lowercase letter (a-z)"}),(0,je.jsx)("li",{children:"1 special character (!@#$%^&*)"})]})]})]}),u&&(0,je.jsx)("div",{style:{background:"rgba(229, 62, 62, 0.1)",border:"1px solid rgba(229, 62, 62, 0.3)",borderRadius:"6px",padding:"12px",color:"#FC8181",marginBottom:"16px",fontSize:"0.9rem"},children:u}),(0,je.jsx)("button",{type:"submit",disabled:d,style:{width:"100%",padding:"14px",background:d?"#666666":"#00D4FF",border:"none",borderRadius:"6px",color:"#000000",fontSize:"1rem",fontWeight:"bold",cursor:d?"not-allowed":"pointer",marginBottom:"16px"},children:d?"Loading...":e?"Login":"Create Account"}),e&&(0,je.jsx)("button",{type:"button",onClick:async()=>{if(n){c(""),h(!0);try{await(0,Re.J1)(Ie.j2,n),m(!0),console.log("\u2705 Password reset email sent")}catch(e){console.error("\u274c Password reset error:",e),c("Could not send reset email. Please check your email address.")}finally{h(!1)}}else c("Please enter your email address first.")},disabled:d,style:{background:"transparent",border:"none",color:"#00D4FF",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem",display:"block",margin:"0 auto 16px"},children:"Forgot password?"})]}),(0,je.jsx)("div",{style:{textAlign:"center",paddingTop:"16px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,je.jsx)("button",{onClick:()=>{t(!e),c("")},style:{background:"transparent",border:"none",color:"#AAAAAA",cursor:"pointer",fontSize:"0.9rem"},children:e?(0,je.jsxs)(je.Fragment,{children:["Don't have an account? ",(0,je.jsx)("span",{style:{color:"#00D4FF"},children:"Sign up"})]}):(0,je.jsxs)(je.Fragment,{children:["Already have an account? ",(0,je.jsx)("span",{style:{color:"#00D4FF"},children:"Login"})]})})})]})]})})};const Oe=function(){const e=re(),[t,n]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{const e=localStorage.getItem("runeq_userProfile"),t=localStorage.getItem("runeq_trainingPlan");n(!!e&&!!t)},[]),(0,je.jsxs)("div",{className:"fade-in",style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[(0,je.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:(0,je.jsx)("div",{className:"container",children:(0,je.jsxs)("div",{style:{textAlign:"center",padding:"60px 0"},children:[(0,je.jsx)("img",{src:"/logo.png",alt:"Run+ Plans",style:{maxWidth:"300px",height:"auto",marginBottom:"24px"}}),(0,je.jsxs)("p",{style:{fontSize:"1.35rem",color:"#AAAAAA",marginBottom:"32px",maxWidth:"700px",margin:"0 auto 32px",lineHeight:"1.6"},children:["Smart training that adapts to injuries, equipment, and real life.",(0,je.jsx)("br",{}),"Built for runners who refuse to stop, even when the plan needs to change."]}),(0,je.jsxs)("div",{className:"card-grid",style:{marginBottom:"40px",textAlign:"left"},children:[(0,je.jsxs)("div",{className:"card slide-up",style:{animationDelay:"0.1s"},children:[(0,je.jsx)("div",{className:"equipment-icon",children:"\ud83d\udeb4\u200d\u2642\ufe0f"}),(0,je.jsx)("h3",{style:{color:"#AAAAAA",marginBottom:"8px"},children:"Equipment Specific"}),(0,je.jsx)("p",{style:{fontSize:"0.9rem",margin:0},children:'Cyclete and ElliptiGO workouts with motion-specific training. No more generic "bike conversion" - real equipment intelligence.'})]}),(0,je.jsxs)("div",{className:"card slide-up",style:{animationDelay:"0.2s"},children:[(0,je.jsx)("div",{className:"equipment-icon",children:"\ud83c\udf21\ufe0f"}),(0,je.jsx)("h3",{style:{color:"#AAAAAA",marginBottom:"8px"},children:"Climate Smart"}),(0,je.jsx)("p",{style:{fontSize:"0.9rem",margin:0},children:"Automatic pace adjustments for heat, humidity, and altitude. No more impossible paces in tropical climates."})]}),(0,je.jsxs)("div",{className:"card slide-up",style:{animationDelay:"0.3s"},children:[(0,je.jsx)("div",{className:"equipment-icon",children:"\ud83d\udd04"}),(0,je.jsx)("h3",{style:{color:"#AAAAAA",marginBottom:"8px"},children:"Life Flexible"}),(0,je.jsx)("p",{style:{fontSize:"0.9rem",margin:0},children:"Miss a workout? Change your mind? We adapt without penalty. Real training for real life."})]})]}),(0,je.jsxs)("div",{className:"card",style:{marginBottom:"32px",textAlign:"left"},children:[(0,je.jsx)("h3",{style:{textAlign:"center",marginBottom:"20px"},children:"Why Run+ Plans vs Others?"}),(0,je.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"12px"},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,je.jsxs)("span",{children:[(0,je.jsx)("strong",{children:"80+ workout varieties"})," vs repetitive formats"]})]}),(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,je.jsxs)("span",{children:[(0,je.jsx)("strong",{children:"Cross-platform access"})," - phone, tablet, and web"]})]}),(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,je.jsxs)("span",{children:[(0,je.jsx)("strong",{children:"Equipment-specific training"})," nobody else offers"]})]}),(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,je.jsxs)("span",{children:[(0,je.jsx)("strong",{children:"Smart workout substitution"})," that counts properly"]})]}),(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,je.jsxs)("span",{children:[(0,je.jsx)("strong",{children:"Future Garmin integration"})," - instant workout sync"]})]})]})]}),(0,je.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"16px",maxWidth:"400px",margin:"0 auto"},children:t?(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("button",{className:"btn btn-success btn-full-width",onClick:()=>e("/dashboard"),style:{fontSize:"1.1rem",padding:"20px"},children:"\ud83d\udcc5 Continue Your Training Plan"}),(0,je.jsx)("button",{className:"btn btn-secondary btn-full-width",onClick:()=>e("/onboarding"),style:{fontSize:"1rem",padding:"16px"},children:"\ud83d\ude80 Start New Training Plan"}),(0,je.jsx)("button",{className:"btn",onClick:()=>{localStorage.clear(),window.location.reload()},style:{fontSize:"0.9rem",padding:"12px",background:"transparent",border:"1px solid #666",color:"#999"},children:"\ud83d\uddd1\ufe0f Clear All Data & Start Fresh"}),(0,je.jsx)("p",{style:{fontSize:"0.9rem",color:"#888888",margin:"8px 0"},children:"Welcome back! Continue where you left off or create a new plan."})]}):(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("button",{className:"btn btn-success btn-full-width",onClick:()=>e("/onboarding"),style:{fontSize:"1.1rem",padding:"20px"},children:"\ud83d\ude80 Start Your Training Plan"}),(0,je.jsx)("p",{style:{fontSize:"0.9rem",color:"#888888",margin:"8px 0"},children:"Create a personalized training plan tailored to your goals, experience, and equipment."}),(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",fontSize:"0.8rem",color:"#666666"},children:[(0,je.jsx)("span",{children:"\u2713 No credit card"}),(0,je.jsx)("span",{children:"\u2713 Full preview"}),(0,je.jsx)("span",{children:"\u2713 All features"})]})]})})]})})}),(0,je.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderTop:"1px solid rgba(255, 255, 255, 0.1)",color:"#AAAAAA",padding:"20px 0",textAlign:"center"},children:(0,je.jsx)("div",{className:"container",children:(0,je.jsx)("p",{style:{margin:"0",fontSize:"0.9rem",color:"#888888"},children:"Built by runners, for runners. Research-based workouts from McMillan, Hal Higdon, Ben Parkes, and more."})})})]})};var Le=n(889);function We(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e||"string"!==typeof e)return e;let r=e;const i=(e,t,n,r)=>{if(n&&r){const i=Math.min(1,n/(.75*r));return Math.round(e+i*(t-e))}return Math.round((e+t)/2)},o=r.match(/(\d+)-(\d+)\s*x\s*(\d+)-(\d+)\s*min/);if(o){const e=parseInt(o[1],10),a=parseInt(o[2],10),s=parseInt(o[3],10),l=parseInt(o[4],10),u=i(e,a,t,n),c=i(s,l,t,n);r=r.replace(/(\d+)-(\d+)\s*x\s*(\d+)-(\d+)\s*min/,"".concat(u," x ").concat(c," min"))}const a=r.match(/(\d+)-(\d+)\s*x\s*\(/);if(a){const e=i(parseInt(a[1],10),parseInt(a[2],10),t,n);r=r.replace(/(\d+)-(\d+)\s*x\s*\(/,"".concat(e," x ("))}const s=r.match(/x\s*(\d+)-(\d+)(?:\s|$|\)|,)/);if(s&&!r.includes("x (")){const e=i(parseInt(s[1],10),parseInt(s[2],10),t,n);r=r.replace(/x\s*(\d+)-(\d+)(?:\s|$|\)|,)/,"x ".concat(e," "))}const l=r.match(/(\d+)\s*x\s*(\d+)-(\d+)\s*min/);if(l){const e=parseInt(l[1],10),o=i(parseInt(l[2],10),parseInt(l[3],10),t,n);r=r.replace(/(\d+)\s*x\s*(\d+)-(\d+)\s*min/,"".concat(e," x ").concat(o," min"))}const u=r.match(/(\d+)-(\d+)\s*min\s*recovery/);if(u){const e=parseInt(u[1],10),t=parseInt(u[2],10),n=Math.round((e+t)/2);if(n<=2){const e=60*n;r=r.replace(/(\d+)-(\d+)\s*min\s*recovery/,"".concat(e," sec recovery"))}else r=r.replace(/(\d+)-(\d+)\s*min\s*recovery/,"".concat(n," min recovery"))}const c=r.match(/(\d+)-(\d+)\s*min\s+(?:easy|warmup|cooldown|tempo|steady)/);if(c){const e=i(parseInt(c[1],10),parseInt(c[2],10),t,n);r=r.replace(/(\d+)-(\d+)\s*min\s+(?:easy|warmup|cooldown|tempo|steady)/,"".concat(e," min $2"))}const d=r.match(/(\d+)-(\d+)\s*x\s*(\d+)\s*min/);if(d){const e=parseInt(d[1],10),o=parseInt(d[2],10),a=d[3],s=i(e,o,t,n);r=r.replace(/(\d+)-(\d+)\s*x\s*(\d+)\s*min/,"".concat(s," x ").concat(a," min"))}const h=r.match(/(\d+)-(\d+)\s*x\s*(\d+)\s*min(?!\s*@)/);if(h&&!r.match(/(\d+)-(\d+)\s*x\s*(\d+)-(\d+)\s*min/)){const e=parseInt(h[1],10),o=parseInt(h[2],10),a=h[3],s=i(e,o,t,n);r=r.replace(/(\d+)-(\d+)\s*x\s*(\d+)\s*min(?!\s*@)/,"".concat(s," x ").concat(a," min"))}const p=r.match(/(\d+)-(\d+)\s*miles?\s*(?:@|at|easy|pace)/);if(p){const e=i(parseInt(p[1],10),parseInt(p[2],10),t,n);r=r.replace(/(\d+)-(\d+)\s*miles?\s*(?:@|at|easy|pace)/,"".concat(e," miles "))}const m=r.match(/(\d+)-(\d+)\s*(?:sec|seconds?|min|minutes?)/);if(m&&!r.match(/\d+-\d+\s*x\s*\d+/)){const e=parseInt(m[1],10),o=parseInt(m[2],10),a=m[0].includes("sec")?"sec":"min",s=i(e,o,t,n);r=r.replace(/(\d+)-(\d+)\s*(?:sec|seconds?|min|minutes?)/,"".concat(s," ").concat(a))}return r}class qe{constructor(){this.hillGradeGuidelines={gentle:{min:2,max:4,description:"2-4% grade - sustainable for longer efforts"},moderate:{min:4,max:7,description:"4-7% grade - challenging but manageable"},steep:{min:7,max:12,description:"7-12% grade - short, intense efforts"},very_steep:{min:12,max:20,description:"12-20% grade - power/strength focus"}},this.workoutLibrary=this.buildWorkoutLibrary()}buildWorkoutLibrary(){return{short_power:[{name:"Hill Strides",duration:"10-15 seconds",hillRequirement:{grade:"moderate",distance:"50-100 meters",description:"Find a 4-7% grade hill, at least 50m long"},workout:{warmup:"15 min easy + 4x20sec strides on flat",main:"6-8 x 12sec hill strides @ 90% effort",recovery:"Walk/jog down + 1 min easy",cooldown:"10-15 min easy"},focus:"Neuromuscular power, running form, leg turnover",intensity:"Very High (TE 4.0+)",runEqOptions:{optionA:"Full running workout as prescribed",optionB:"Warmup riding (Cyclete/Elliptigo), hill reps running, cooldown riding",optionC:"Hill power intervals on Cyclete/Elliptigo (same RunEQ miles)",optionD:"Full Cyclete/Elliptigo ride (use Garmin RunEQ data field)"}},{name:"Stadium Steps Simulation",duration:"20-30 seconds",hillRequirement:{grade:"steep",distance:"75-150 meters",description:"Find a 7-12% grade hill, stadium steps, or parking garage ramp"},workout:{warmup:"20 min easy + dynamic drills",main:"5-8 x 25sec explosive hill climbs @ 95% effort",recovery:"Walk down + 2 min easy jog",cooldown:"15 min easy"},focus:"Explosive power, anaerobic capacity, mental toughness",intensity:"Maximum (TE 4.5+)"}],medium_vo2:[{name:"Classic Hill Repeats",duration:"2-3 minutes",hillRequirement:{grade:"moderate",distance:"400-800 meters",description:"Find a steady 4-7% grade, like your 0.75-mile hill"},workout:{warmup:"20 min easy + 3x30sec pickups",main:"4-6 x 2.5 min uphill @ threshold effort",recovery:"Jog/walk down + 90sec easy",cooldown:"15 min easy"},focus:"VO2 max, lactate threshold, hill running economy",intensity:"Hard (TE 3.5-4.0)",progression:{week1:"4 x 2 min",week2:"5 x 2 min",week3:"4 x 2.5 min",week4:"5 x 2.5 min"}},{name:"Hill Pyramid",duration:"Variable (1-4 min)",hillRequirement:{grade:"moderate",distance:"600+ meters",description:"Long steady hill - your 0.75-mile hill is perfect"},workout:{warmup:"20 min easy",main:"1-2-3-4-3-2-1 min uphill @ building effort",recovery:"Equal time easy jog/walk down between reps",cooldown:"15 min easy"},focus:"Progressive effort, mental strength, pacing discipline",intensity:"Progressive (TE 3.0-4.0)"}],long_strength:[{name:"Tempo Hills",duration:"6-12 minutes",hillRequirement:{grade:"gentle",distance:"1+ miles",description:"Find a long 2-4% grade - perfect for your 0.75-mile hill!"},workout:{warmup:"15-20 min easy",main:"2-3 x 8-10 min uphill @ tempo effort",recovery:"5 min easy (jog down + flat)",cooldown:"15 min easy"},focus:"Sustained power, aerobic strength, mental endurance",intensity:"Moderately Hard (TE 3.0-3.5)",runEqOptions:{optionA:"Full running workout",optionB:"First rep running, second rep riding (Cyclete/Elliptigo)",optionC:"Alternate running/riding every 2-3 minutes",optionD:"Full Cyclete/Elliptigo ride (use Garmin RunEQ data field)"}},{name:"Long Hill Progression",duration:"8-15 minutes",hillRequirement:{grade:"gentle_to_moderate",distance:"1.5+ miles",description:"Long gradual climb - multiple loops of your hill work great"},workout:{warmup:"20 min easy",main:"12 min continuous uphill: 4min easy\u21924min moderate\u21924min hard",recovery:"Walk/easy jog down",repeat:"1-2 more times depending on fitness",cooldown:"15-20 min easy"},focus:"Progressive effort, race simulation, mental toughness"}],hill_circuits:[{name:"Hill Circuit Training",duration:"30-45 minutes",hillRequirement:{grade:"moderate",distance:"Circuit of 1-2 miles",description:"Perfect for your 2-mile loop with 0.75-mile climb!"},workout:{warmup:"15 min easy + dynamic drills",main:"4-6 complete loops:\n\u2022 0.75mi climb @ steady effort\n\u2022 Downhill recovery @ controlled pace\n\u2022 0.25mi flat @ easy pace",effort:"Build effort each loop (start 70%, finish 85%)",cooldown:"10-15 min easy"},focus:"Hill-specific endurance, downhill control, circuit training",intensity:"Moderate-Hard (TE 3.0-3.5)",seasonal:"Great for base building and hill marathon prep"},{name:"Hill Fartlek",duration:"25-35 minutes",hillRequirement:{grade:"rolling_terrain",distance:"Varied",description:"Rolling hills or repeated loops with varied efforts"},workout:{warmup:"15 min easy",main:"20 min continuous fartlek on hills:\n\u2022 Up hills: surge to moderate-hard\n\u2022 Down hills: controlled but not easy\n\u2022 Flats: settle to steady tempo",style:"Unstructured - respond to terrain",cooldown:"15 min easy"},focus:"Terrain adaptation, variable pacing, race preparation"}],downhill_specific:[{name:"Controlled Downhill Repeats",duration:"1-3 minutes",hillRequirement:{grade:"moderate",distance:"400-800 meters downhill",description:"The downhill section of your 2-mile loop is ideal"},workout:{warmup:"20 min easy + leg swings",main:"5-8 x 90sec controlled fast downhill",technique:"Quick cadence, lean slightly forward, land on forefoot",recovery:"Walk/jog up hill + 1 min easy",cooldown:"15 min easy + stretching"},focus:"Eccentric strength, downhill speed, injury prevention",intensity:"Moderate (TE 2.5-3.0)",caution:"Start conservative - high injury risk if overdone"}],specialty:[{name:"Hill Progression Run",duration:"45-60 minutes",hillRequirement:{grade:"rolling_or_repeatable",distance:"Multiple miles",description:"Your 2-mile loop repeated, or rolling terrain course"},workout:{warmup:"15 min easy",main:"30-40 min progression:\n\u2022 First 10 min: easy on hills\n\u2022 Middle 15-20 min: moderate effort on climbs\n\u2022 Final 10-15 min: strong effort on all uphills",approach:"Gradual effort increase, maintain form",cooldown:"10-15 min easy"},focus:"Progressive loading, race preparation, mental preparation"},{name:"Over-Under Hills",duration:"Variable",hillRequirement:{grade:"moderate",distance:"Long steady climb",description:"Single long hill or multiple loops of your 0.75-mile climb"},workout:{warmup:"20 min easy",main:"3-4 x 6 min on hill: 3min @ threshold, 3min @ slightly above threshold",pattern:"Switch effort every 3 minutes without stopping",recovery:"4-5 min easy between sets",cooldown:"15 min easy"},focus:"Lactate clearance, threshold power, race-pace variability"}]}}getWorkoutsForTerrain(e){"loop_with_climb"===e&&[].push(...this.workoutLibrary.long_strength.filter(e=>e.name.includes("Tempo")),...this.workoutLibrary.hill_circuits,...this.workoutLibrary.medium_vo2.filter(e=>e.name.includes("Pyramid")));return{short_steep:[...this.workoutLibrary.short_power],medium_steady:[...this.workoutLibrary.medium_vo2],long_gentle:[...this.workoutLibrary.long_strength],rolling_terrain:[...this.workoutLibrary.specialty,...this.workoutLibrary.hill_circuits]}[e]||[]}prescribeHillWorkout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{runEqPreference:n=0,paces:r=null}=t;let i=null,o=null;for(const[l,u]of Object.entries(this.workoutLibrary)){const t=u.find(t=>t.name.toLowerCase().includes(e.toLowerCase()));if(t){i=t,o=l;break}}if(!i)return null;const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return e;const r=(0,u.A)({},e);return r.structure&&"string"===typeof r.structure&&(r.structure=We(r.structure,t,n)),r.workout&&(r.workout=(0,u.A)({},r.workout),["warmup","main","recovery","cooldown","repeat"].forEach(e=>{r.workout[e]&&"string"===typeof r.workout[e]&&(r.workout[e]=We(r.workout[e],t,n))})),r}(i,null,null),s=(0,u.A)((0,u.A)({},a),{},{terrainInstructions:this.generateTerrainInstructions(a.hillRequirement),runEqAdaptation:this.adaptForRunEq(a,n),safetyNotes:this.generateSafetyNotes(o,a),alternatives:this.suggestAlternatives(a.hillRequirement)});return r&&(s.paces=r,s.name=this.injectPacesIntoName(a.name,r,a.intensity)),s}injectPacesIntoName(e,t,n){let r=e;return n&&n.toLowerCase().includes("short")&&t.interval?r="".concat(e," (").concat(t.interval.pace,"/mi)"):t.threshold?r="".concat(e," (").concat(t.threshold.pace,"/mi)"):t.interval&&(r="".concat(e," (").concat(t.interval.pace,"/mi)")),r}generateTerrainInstructions(e){if(!e||!e.grade)return{findHill:"Look for a moderate hill with 4-7% grade",measurement:"Use your phone's inclinometer app or estimate: you should feel challenged but able to maintain form",distance:"Hill should be at least 100 meters long",examples:["Neighborhood hills","Park paths","Treadmill incline"],backup:"If no ideal hill available, use treadmill at appropriate incline or find closest available grade"};const t=this.hillGradeGuidelines[e.grade];return t?{findHill:"Look for a hill with ".concat(t.description),measurement:"Use your phone's inclinometer app or estimate: you should feel challenged but able to maintain form",distance:"Hill should be at least ".concat(e.distance),examples:this.getTerrainExamples(e.grade),backup:"If no ideal hill available, use treadmill at appropriate incline or find closest available grade"}:this.generateTerrainInstructions(null)}getTerrainExamples(e){return{gentle:["Long highway on-ramps","Gradual neighborhood streets","Park paths with slight incline","Treadmill at 2-4% incline"],moderate:["Typical neighborhood hills","Multi-story parking garage ramps","Bridge approaches","Treadmill at 4-7% incline"],steep:["Short neighborhood climbs","Stadium stairs","Steep parking garage ramps","Treadmill at 7-12% incline"],very_steep:["Stadium steps","Ski slope access roads","Short power line hills","Treadmill at 12%+ incline"]}[e]||[]}adaptForRunEq(e,t){return 0===t?{note:"Full running workout as prescribed"}:e.runEqOptions?t<=25?{recommendation:e.runEqOptions.optionA}:t<=50?{recommendation:e.runEqOptions.optionB}:t<=75?{recommendation:e.runEqOptions.optionC}:{recommendation:e.runEqOptions.optionD}:{lowPreference:"Consider doing warmup/cooldown on Cyclete/Elliptigo",mediumPreference:"Alternate running and Cyclete/Elliptigo intervals",highPreference:"Full Cyclete/Elliptigo ride (use Garmin RunEQ data field to track equivalent miles)"}}generateSafetyNotes(e,t){return["Start conservatively and build intensity gradually","Focus on form - don't let hills break down your running mechanics","Stay hydrated and fuel appropriately for longer hill sessions",...{short_power:["Very high intensity - ensure adequate recovery","Perfect form is critical at high speeds"],medium_vo2:["Monitor effort level - hills amplify perceived exertion","Don't start too fast on first rep"],long_strength:["Pace should feel sustainable for the full duration","Mental focus is as important as physical strength"],downhill_specific:["HIGH INJURY RISK - start very conservatively","Focus on quick cadence, not long strides","Stop if you feel excessive quad/knee stress"],hill_circuits:["Monitor cumulative fatigue across multiple loops","Adjust effort based on conditions and fatigue"]}[e]||[]]}suggestAlternatives(e){return{noHill:"Use treadmill with appropriate incline setting",hillTooShort:"Repeat shorter hill multiple times with brief recovery",hillTooLong:"Use only portion of longer hill, mark turnaround point",wrongGrade:"Adjust effort level to compensate - easier on steeper hills, harder on gentler grades",indoorOption:"StairMaster, stadium stairs, or parking garage ramps can substitute"}}getWorkoutsByCategory(e){return this.workoutLibrary[e]||[]}getCategories(){return Object.keys(this.workoutLibrary)}getRandomWorkout(e){const t=this.getWorkoutsByCategory(e);if(0===t.length)throw new Error("No workouts found in category: ".concat(e));return t[Math.floor(Math.random()*t.length)]}searchWorkouts(e){const t=[],n=e.toLowerCase();for(const[r,i]of Object.entries(this.workoutLibrary))for(const e of i)(e.name.toLowerCase().includes(n)||e.focus.toLowerCase().includes(n))&&t.push((0,u.A)((0,u.A)({},e),{},{category:r}));return t}}class Ue{constructor(){this.intervalIntensityGuidelines={shortSpeed:{description:"All-out sprint efforts, neuromuscular power",pace:"800m to mile race pace",heartRate:"105%+ max HR",effort:"Maximum sustainable for 15-90 seconds",recovery:"Complete recovery between reps (walk/jog)"},vo2Max:{description:"VO2 max development, aerobic power",pace:"3K to 5K race pace",heartRate:"90-100% max HR",effort:"Hard but sustainable for 2-8 minutes",recovery:"Equal time recovery (light jog)"},longIntervals:{description:"Sustained speed, race-specific preparation",pace:"5K to 10K race pace",heartRate:"85-95% max HR",effort:"Controlled hard effort for 4+ minutes",recovery:"50-75% of work interval (easy jog)"}},this.workoutLibrary={SHORT_SPEED:[{name:"Classic 200m Repeats",distance:"200m",repetitions:"6-12 x 200m",intensity:"shortSpeed",recovery:"200m walk/jog (2-3 minutes)",source:"Hal Higdon",description:"Short speed bursts for neuromuscular development",pace:"800m race pace",benefits:"Leg turnover, running economy, speed development",progression:"Start 6 reps, add 1-2 per week to 12 reps"},{name:"400m Speed Intervals",distance:"400m",repetitions:"5-10 x 400m",intensity:"shortSpeed",recovery:"400m jog (3-4 minutes)",source:"Hal Higdon / Track training",description:"Classic one-lap speed intervals",pace:"Mile to 5K race pace",benefits:"Speed endurance, lactate tolerance, mental toughness",progression:"Start 5 reps, build by 1 every 2 weeks to 10"},{name:"Flying 100s",distance:"100m",repetitions:"6-10 x 100m",intensity:"shortSpeed",recovery:"Full recovery (3-5 minutes walk)",source:"Speed development training",description:"Accelerate 30m, sprint 100m, decelerate 30m",pace:"Faster than mile race pace",benefits:"Top-end speed, form at speed, confidence"},{name:"30-Second Strides",distance:"30 seconds",repetitions:"8-12 x 30 seconds",intensity:"shortSpeed",recovery:"90 seconds easy walk/jog",source:"General speed development",description:"Time-based speed intervals",pace:"5K pace or slightly faster",benefits:"Speed without track access, time-efficient"}],VO2_MAX:[{name:"1000m VO2 Max Intervals",distance:"1000m",repetitions:"3-6 x 1000m",intensity:"vo2Max",recovery:"Equal time recovery (3-4 minutes jog)",source:"Runner's World",description:"Classic VO2 max development intervals",pace:"5K race pace",benefits:"Aerobic power, VO2 max improvement, race preparation"},{name:"2-Minute VO2 Intervals",distance:"2 minutes",repetitions:"4-8 x 2 minutes",intensity:"vo2Max",recovery:"2 minutes easy jog",source:"Runner's World",description:"Time-based VO2 max intervals",pace:"5K effort",benefits:"VO2 max development without track access"},{name:"800m Track Intervals",distance:"800m",repetitions:"4-8 x 800m",intensity:"vo2Max",recovery:"400m jog (2-3 minutes)",source:"Classic track training",description:"Two-lap intervals at VO2 max intensity",pace:"3K to 5K race pace",benefits:"Speed endurance, lactate processing, mental strength"},{name:"1200m Extended VO2",distance:"1200m",repetitions:"3-5 x 1200m",intensity:"vo2Max",recovery:"400m jog (3-4 minutes)",source:"Extended VO2 max training",description:"Longer VO2 max intervals for advanced athletes",pace:"5K race pace",benefits:"Extended time at VO2 max, mental toughness"},{name:"Ladder Intervals",distance:"Variable",repetitions:"400-800-1200-800-400m",intensity:"vo2Max",recovery:"Half distance jog between reps",source:"Pyramid training",description:"Ascending and descending interval distances",pace:"5K race pace throughout",benefits:"Variety, mental engagement, comprehensive VO2 stimulus"}],LONG_INTERVALS:[{name:"Mile Repeats",distance:"1 mile",repetitions:"2-5 x 1 mile",intensity:"longIntervals",recovery:"3-4 minutes easy jog",source:"Distance training classic",description:"Sustained speed over longer distance",pace:"5K to 10K race pace",benefits:"Race-specific speed, sustained effort, pacing practice"},{name:"2K Intervals",distance:"2000m",repetitions:"3-4 x 2K",intensity:"longIntervals",recovery:"800m jog (4-5 minutes)",source:"International distance training",description:"Extended intervals for 5K/10K preparation",pace:"10K race pace",benefits:"Race-specific endurance, sustained speed"},{name:"6-Minute Intervals",distance:"6 minutes",repetitions:"3-5 x 6 minutes",intensity:"longIntervals",recovery:"3 minutes easy jog",source:"Time-based distance training",description:"Extended time-based intervals",pace:"10K effort",benefits:"Sustained speed without distance pressure"},{name:"1K-2K-1K Sandwich",distance:"Variable",repetitions:"1K + 2K + 1K",intensity:"longIntervals",recovery:"600m jog between reps",source:"Varied distance training",description:"Build to longer effort, then recover with shorter",pace:"5K-10K race pace",benefits:"Mental challenge, varied stimulus, race simulation"}],MIXED_INTERVALS:[{name:"Progressive Pyramid",distance:"Variable",repetitions:"2:30-3:30-4:30 @ 10K, then repeat @ 5K pace",intensity:"vo2Max to longIntervals",recovery:"Same time recovery as work interval",source:"Runner's World",description:"Build effort, then repeat at higher intensity",pace:"10K pace, then 5K pace",benefits:"Progressive overload, mental toughness, pace variety"},{name:"Fartlek Intervals",distance:"Variable",repetitions:"20-30 minutes of varied surges",intensity:"shortSpeed to longIntervals",recovery:"Easy running between surges",source:"Swedish training method",description:"Unstructured speed play based on feel",pace:"Varies from 5K to 10K effort",benefits:"Mental flexibility, fun factor, natural terrain adaptation"},{name:"Mona Fartlek",distance:"Variable",repetitions:"90s-3min-90s-60s-30s-30s hard efforts",intensity:"vo2Max",recovery:"90 seconds easy between all efforts",source:"Steve Moneghetti training",description:"Structured fartlek with specific time intervals",pace:"5K effort for all intervals",benefits:"Structured variety, comprehensive speed stimulus"}],RACE_SIMULATION:[{name:"5K Simulation Intervals",distance:"1K",repetitions:"5 x 1K",intensity:"longIntervals",recovery:"200m jog (90 seconds)",source:"Race-specific training",description:"Simulate 5K race with brief recoveries",pace:"Goal 5K race pace",benefits:"Race pacing, confidence, mental preparation"},{name:"10K Tempo-Speed Mix",distance:"Variable",repetitions:"2K @ 10K pace, then 4 x 400m @ 5K pace (repeat twice)",intensity:"longIntervals to vo2Max",recovery:"90s jog between 400s, 2 min between sets",source:"10K race preparation",description:"Combine race pace with speed finish",pace:"10K pace + 5K pace",benefits:"Race-specific fitness, finishing kick practice"},{name:"Cut-Down Intervals",distance:"Variable",repetitions:"1200m-1000m-800m-600m-400m",intensity:"longIntervals to shortSpeed",recovery:"400m jog between reps",source:"Descending interval training",description:"Get faster as intervals get shorter",pace:"Start at 10K pace, end at 3K pace",benefits:"Finishing kick, mental toughness, speed development"}]}}calculateRepsFromDistance(e,t,n){if(!t||t<=0)return n;const r={"100m":.062,"200m":.124,"300m":.186,"400m":.249,"600m":.373,"800m":.497,"1000m":.621,"1200m":.746,"1600m":.994,mile:1}[e]||.5,i=t-3.5;if(i<=0){const t=n.match(/(\d+)/);return t?"".concat(t[1]," x ").concat(e):n}const o=1.75*r,a=Math.floor(i/o),s=n.match(/(\d+)-(\d+)/);if(s){const t=parseInt(s[1],10),n=parseInt(s[2],10),r=Math.max(t,Math.min(n,a));return"".concat(r," x ").concat(e)}return"".concat(a," x ").concat(e)}prescribeIntervalWorkout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{runEqPreference:n=0,paces:r=null,trackIntervals:i=null,specificReps:o=null,totalDistance:a=null}=t;let s=null,l=null;for(const[u,p]of Object.entries(this.workoutLibrary)){const t=p.find(t=>t.name.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(t.name.toLowerCase()));if(t){s=t,l=u;break}}if(!s)throw new Error('Workout "'.concat(e,'" not found'));const c=this.intervalIntensityGuidelines[s.intensity];let d;o?d=o:a&&a>0&&s.distance?(d=this.calculateRepsFromDistance(s.distance,a,s.repetitions),console.log("\ud83d\udcca Calculated reps: ".concat(d," from ").concat(a," miles total"))):d=s.repetitions;const h=(0,u.A)((0,u.A)({},s),{},{repetitions:d,category:l,intensityGuidance:c,totalWorkout:this.calculateTotalWorkout(s,r,d,t.weekNumber,t.totalWeeks),runEqOptions:this.generateRunEqOptions(s,n),safetyNotes:this.getIntervalSafetyNotes(s),alternatives:this.getIntervalAlternatives(s),warmupCooldown:this.getWarmupCooldown(s.intensity,r,t.weekNumber,t.totalWeeks)});return r&&(h.paces=r,h.trackIntervals=i,h.name=this.injectPacesIntoName(s.name,d,r,i),h.repetitions=this.injectPacesIntoReps(d,r,i),h.description=this.injectPacesIntoDescription(s.description,s.pace,r)),h}convertToMilePace(e,t){const n=e.split(":"),r=(60*parseInt(n[0],10)+parseInt(n[1],10))/t*1609.34,i=Math.floor(r/60),o=Math.round(r%60);return"".concat(i,":").concat(o.toString().padStart(2,"0"),"/mi")}injectPacesIntoName(e,t,n,r){let i=e;if(n.interval&&r&&r.interval)if(t.includes("400m")&&r.interval["400m"]){const t=this.convertToMilePace(r.interval["400m"],400);i="".concat(e," (").concat(r.interval["400m"],"/400m = ").concat(t,")")}else if(t.includes("800m")&&r.threshold&&r.threshold["800m"]){const t=this.convertToMilePace(r.threshold["800m"],800);i="".concat(e," (").concat(r.threshold["800m"],"/800m = ").concat(t,")")}else if(t.includes("1200m")&&r.threshold&&r.threshold["1200m"]){const t=this.convertToMilePace(r.threshold["1200m"],1200);i="".concat(e," (").concat(r.threshold["1200m"],"/1200m = ").concat(t,")")}else if(t.includes("200m")&&r.interval["200m"]){const t=this.convertToMilePace(r.interval["200m"],200);i="".concat(e," (").concat(r.interval["200m"],"/200m = ").concat(t,")")}else i="".concat(e," (").concat(n.interval.pace,"/mi)");else n.interval&&(i="".concat(e," (").concat(n.interval.pace,"/mi)"));return i}injectPacesIntoReps(e,t,n){let r=e;var i;(n&&n.interval&&(r.includes("400m")&&n.interval["400m"]&&(r=r.replace(/(\d+)\s*x\s*400m/g,"$1 x 400m (".concat(n.interval["400m"]," each)"))),r.includes("800m")&&n.threshold&&n.threshold["800m"]&&(r=r.replace(/(\d+)\s*x\s*800m/g,"$1 x 800m (".concat(n.threshold["800m"]," each)"))),r.includes("1200m")&&n.threshold&&n.threshold["1200m"]&&(r=r.replace(/(\d+)\s*x\s*1200m/g,"$1 x 1200m (".concat(n.threshold["1200m"]," each)"))),r.includes("200m")&&n.interval["200m"]&&(r=r.replace(/(\d+)\s*x\s*200m/g,"$1 x 200m (".concat(n.interval["200m"]," each)")))),n&&n.threshold)&&(r.includes("2K")&&(r=r.replace(/2K\s*@\s*10K pace/g,"2K @ ".concat((null===(i=t.threshold)||void 0===i?void 0:i.pace)||"10K pace","/mile"))));return t.interval&&(r=r.replace(/@\s*5K pace/g,"@ ".concat(t.interval.pace,"/mile"))),t.threshold&&(r=r.replace(/@\s*10K pace/g,"@ ".concat(t.threshold.pace,"/mile"))),t.interval&&(r=r.replace(/(\d+)\s*x\s*1\s*mile/g,"$1 x 1 mile @ ".concat(t.interval.pace,"/mile")),r=r.replace(/(\d+)\s*x\s*2\s*mile/g,"$1 x 2 miles @ ".concat(t.interval.pace,"/mile"))),r}injectPacesIntoDescription(e,t,n){let r=e;return n.interval&&(t.includes("5K")||t.includes("VO2"))&&(r=r.replace(/5K race pace/g,"".concat(n.interval.pace,"/mile (5K race pace)")),r=r.replace(/5K pace/g,"".concat(n.interval.pace,"/mile"))),n.threshold&&(t.includes("10K")||t.includes("threshold"))&&(r=r.replace(/10K race pace/g,"".concat(n.threshold.pace,"/mile (10K/threshold pace)")),r=r.replace(/10K pace/g,"".concat(n.threshold.pace,"/mile"))),r}calculateTotalWorkout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o="15-20 minutes easy + dynamic warmup + 3-4 strides",a="15-20 minutes easy";if(o=We(o,r,i),a=We(a,r,i),t&&t.easy){var s,l;const e=(null===(s=o.match(/\d+ minutes/))||void 0===s?void 0:s[0])||"15 minutes",n=(null===(l=a.match(/\d+ minutes/))||void 0===l?void 0:l[0])||"15 minutes";o="".concat(e," easy (").concat(t.easy.min,"-").concat(t.easy.max,"/mile) + dynamic warmup + 3-4 strides"),a="".concat(n," easy (").concat(t.easy.min,"-").concat(t.easy.max,"/mile)")}const u=n||e.repetitions;let c="50-70 minutes total";return"shortSpeed"===e.intensity?c="45-60 minutes total":(u.includes("x 6")||u.includes("x 8"))&&(c="60-75 minutes total"),{structure:"".concat(o," + ").concat(u," + ").concat(a),estimatedTime:c,focusPhase:"Main interval set should take 15-30 minutes"}}generateRunEqOptions(e,t){const n={optionA:"Full running workout",optionB:"First half of intervals running, second half riding (Cyclete/Elliptigo)",optionC:"Alternate each interval between running and riding",optionD:"Full Cyclete/Elliptigo ride (use Garmin RunEQ data field to track equivalent miles)"};return n.recommendation=t>=70?"Full Cyclete/Elliptigo ride":t>=40?"Split intervals - some running, some riding":t>=20?"Alternate every other interval":"Full running workout",n}getIntervalSafetyNotes(e){const t=["Proper warmup is CRUCIAL - never skip the full warmup routine","Start conservatively - first interval should feel controlled","Recovery should be truly easy - avoid rushing between intervals","Stop workout if form breaks down significantly"];return"shortSpeed"===e.intensity?(t.push("Complete recovery between reps - walk or very easy jog only"),t.push("Focus on form and efficiency over pure speed")):"vo2Max"===e.intensity?(t.push("Should reach breathing heavily but not gasping"),t.push("Equal time recovery allows partial recovery while maintaining stimulus")):(t.push("Maintain consistent pace across all intervals"),t.push("These should feel 'comfortably hard' not all-out")),t}getWarmupCooldown(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const i={warmup:"15-20 minutes easy running + 5 minutes dynamic exercises + 3-4 x 20-second strides",cooldown:"15-20 minutes easy running + stretching"};var o,a;(i.warmup=We(i.warmup,n,r),i.cooldown=We(i.cooldown,n,r),t&&t.easy)&&(i.warmup="".concat(i.warmup.replace(/15-20 minutes|20-25 minutes/,(null===(o=i.warmup.match(/\d+ minutes/))||void 0===o?void 0:o[0])||"15 minutes")," (").concat(t.easy.min,"-").concat(t.easy.max,"/mile) + 5 minutes dynamic exercises + 3-4 x 20-second strides"),i.cooldown="".concat(i.cooldown.replace(/15-20 minutes/,(null===(a=i.cooldown.match(/\d+ minutes/))||void 0===a?void 0:a[0])||"15 minutes")," (").concat(t.easy.min,"-").concat(t.easy.max,"/mile) + stretching"));if("shortSpeed"===e){var s;const e=(null===(s=i.warmup.match(/\d+ minutes/))||void 0===s?void 0:s[0])||"20 minutes";t&&t.easy?i.warmup="".concat(e," easy running (").concat(t.easy.min,"-").concat(t.easy.max,"/mile) + 10 minutes dynamic warmup + 4-6 progressive strides"):i.warmup="".concat(e," easy running + 10 minutes dynamic warmup + 4-6 progressive strides"),i.notes="Extra warmup time crucial for speed work"}return i}getIntervalAlternatives(e){return{noTrack:{"200m":"20-30 second hard efforts on any surface","400m":"60-90 second hard efforts","800m":"2.5-3 minute hard efforts","1000m":"3-4 minute hard efforts","1 mile":"5-7 minute hard efforts"},badWeather:"Treadmill (use 1% incline), indoor track, or covered parking garage",injury:"Pool running, elliptical, or Cyclete/Elliptigo ride maintaining same effort level",altitude:"Reduce pace by 15-30 seconds per mile, extend recovery time",heat:"Run early morning, extend recovery, focus on effort over pace",beginners:"Start with fewer reps, longer recovery, slightly easier pace"}}getWorkoutsByCategory(e){return this.workoutLibrary[e]||[]}getCategories(){return Object.keys(this.workoutLibrary)}getRandomWorkout(e){const t=this.getWorkoutsByCategory(e);if(0===t.length)throw new Error("No workouts found in category: ".concat(e));return t[Math.floor(Math.random()*t.length)]}searchWorkouts(e){const t=[],n=e.toLowerCase();for(const[r,i]of Object.entries(this.workoutLibrary))for(const e of i)(e.name.toLowerCase().includes(n)||e.description.toLowerCase().includes(n)||e.source.toLowerCase().includes(n))&&t.push((0,u.A)((0,u.A)({},e),{},{category:r}));return t}}class ze{constructor(){this.tempoIntensityGuidelines={comfortablyHard:{description:"Controlled breathing, can speak in short sentences",heartRate:"86-90% max HR",effort:"Medium-hard effort, sustainable for 20-60 minutes"},thresholdPace:{description:"Lactate threshold pace - usually around 1-hour race pace",heartRate:"88-92% max HR",effort:"Controlled discomfort, rhythmic breathing"},tempoPlus:{description:"Slightly faster than threshold - 10K to 15K pace",heartRate:"90-94% max HR",effort:"Harder breathing, shorter sustainable durations"}},this.workoutLibrary={TRADITIONAL_TEMPO:[{name:"Classic Tempo Run",duration:"20-40 minutes",structure:"15-20 min easy warmup + 20-40 min tempo + 10-15 min easy cooldown",intensity:"comfortablyHard",source:"Hal Higdon / McMillan",description:"Continuous run at lactate threshold pace",benefits:"Improves lactate clearance, race pacing, mental toughness",progression:{beginner:"Start with 15-20 min tempo, build by 3-5 min weekly",intermediate:"20-30 min tempo, focus on consistent pacing",advanced:"30-40 min tempo, practice race-specific scenarios"}},{name:"Sandwich Tempo",duration:"30-45 minutes total",structure:"10-15 min easy + 15-20 min tempo + 5-10 min easy",intensity:"comfortablyHard",source:"Hal Higdon adaptation",description:"Tempo effort sandwiched between easy running",benefits:"Teaches body to settle into tempo rhythm, race simulation"}],TEMPO_INTERVALS:[{name:"McMillan 2x2 Miles",duration:"45-50 minutes total",structure:"Warmup + 2x2 miles @ tempo with 3 min recovery + Cooldown",intensity:"thresholdPace",source:"McMillan Running",description:"Two 2-mile repeats at threshold pace",benefits:"Mental preparation for longer races, pacing practice",variations:["2x3 miles for marathon training","3x2 miles for advanced athletes","2x1.5 miles for beginners"]},{name:"Cruise Intervals",duration:"30-40 minutes total",structure:"Warmup + 4-6 x 3-8 min @ tempo with 1-2 min recovery + Cooldown",intensity:"thresholdPace",source:"Jack Daniels / McMillan",description:"Multiple medium-length intervals at threshold pace",benefits:"Accumulates time at threshold, teaches recovery between efforts",examples:["4 x 5 min with 90 sec recovery","5 x 4 min with 2 min recovery","6 x 3 min with 60 sec recovery"]},{name:"Cutdown Tempo Intervals",duration:"40-45 minutes total",structure:"Warmup + 5 min + 4 min + 3 min + 2 min @ tempo (2 min recovery) + Cooldown",intensity:"thresholdPace",source:"Advanced coaching adaptation",description:"Descending interval lengths at consistent tempo pace",benefits:"Mental strength, teaches pace discipline under fatigue"}],ALTERNATING_TEMPO:[{name:"McMillan Minutes Workout",duration:"20-60 minutes total",structure:"Warmup + Alternate 1 min tempo / 1 min easy x 10-30 + Cooldown",intensity:"comfortablyHard",source:"McMillan Running",description:"Alternate tempo and easy minutes without stopping",benefits:"Avoids going too fast, accumulates threshold time",progression:{week1:"10 x (1 min on / 1 min easy)",week4:"20 x (1 min on / 1 min easy)",week8:"25-30 x (1 min on / 1 min easy)"},notes:"Easy minutes naturally get faster as workout progresses"},{name:"2 Minutes On/Off",duration:"32-48 minutes total",structure:"Warmup + 8-12 x (2 min tempo / 2 min easy) + Cooldown",intensity:"comfortablyHard",source:"Tempo progression adaptation",description:"Longer alternating segments for advanced athletes",benefits:"Extended time in tempo zone, teaches rhythm"},{name:"Tempo Fartlek",duration:"25-35 minutes total",structure:"Warmup + 15-20 min of varied tempo surges (30sec-3min) + Cooldown",intensity:"comfortablyHard to tempoPlus",source:"Swedish fartlek adaptation",description:"Unstructured tempo efforts based on feel and terrain",benefits:"Teaches pace variety, mental flexibility, fun factor"}],PROGRESSIVE_TEMPO:[{name:"Build-Up Tempo",duration:"25-35 minutes",structure:"Warmup + 20 min building from easy to tempo + Cooldown",intensity:"easy to comfortablyHard",source:"Progressive training philosophy",description:"Gradually build from easy pace to tempo over 20 minutes",benefits:"Smooth transition to tempo, teaches pacing, less jarring"},{name:"Negative Split Tempo",duration:"30-40 minutes",structure:"Warmup + 2 x 10-15 min (first @ easy-moderate, second @ tempo) + Cooldown",intensity:"moderate to comfortablyHard",source:"Race pacing strategy",description:"Two equal segments with second half at tempo pace",benefits:"Race strategy practice, controlled progression"},{name:"Tempo Ladder",duration:"35-45 minutes",structure:"Warmup + 3-5-7-5-3 min @ tempo (2 min recovery) + Cooldown",intensity:"thresholdPace",source:"Pyramid training adaptation",description:"Ladder format building to longer tempo effort",benefits:"Mental preparation, variety in interval lengths"}],RACE_SPECIFIC:[{name:"Marathon Pace Tempo",duration:"40-70 minutes",structure:"Warmup + 6-13 miles @ marathon pace + Cooldown",intensity:"Slightly easier than comfortablyHard",source:"Ben Parkes / Marathon specific",description:"Extended runs at goal marathon pace",benefits:"Marathon pace practice, aerobic development",progression:"Start at 6 miles, build by 1-2 miles every 2-3 weeks"},{name:"10K Tempo Simulation",duration:"35-45 minutes",structure:"Warmup + 2 miles easy + 4 miles @ 10K pace + 1-2 miles easy",intensity:"tempoPlus",source:"Race pace training",description:"Simulate 10K race effort within longer run",benefits:"10K pacing, mental preparation, race confidence"}]}}prescribeTempoWorkout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{runEqPreference:n=0,paces:r=null,weekNumber:i=null,totalWeeks:o=null}=t;let a=null,s=null;for(const[u,d]of Object.entries(this.workoutLibrary)){const t=d.find(t=>t.name.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(t.name.toLowerCase()));if(t){a=t,s=u;break}}if(!a)throw new Error('Workout "'.concat(e,'" not found'));const l=this.tempoIntensityGuidelines[a.intensity],c=(0,u.A)((0,u.A)({},a),{},{category:s,intensityGuidance:l,runEqOptions:this.generateRunEqOptions(a,n),safetyNotes:this.getTempoSafetyNotes(a),paceGuidance:this.getPaceGuidance(a.intensity),alternatives:this.getTempoAlternatives(a)});return r?(c.paces=r,c.name=this.injectPacesIntoName(a.name,r),c.structure=this.injectPacesIntoStructure(a.structure,r,i,o),c.description=this.injectPacesIntoDescription(a.description,r)):c.structure=We(a.structure,i,o),c}injectPacesIntoName(e,t){let n=e;return t.threshold&&(n="".concat(e," (").concat(t.threshold.pace,"/mi)")),n}injectPacesIntoStructure(e,t){let n=We(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null);return t.threshold&&(n=n.replace(/@ tempo/g,"@ ".concat(t.threshold.pace,"/mile")),n=n.replace(/\bmin tempo\b/g,"min @ ".concat(t.threshold.pace,"/mile")),n=n.replace(/tempo pace/g,"".concat(t.threshold.pace,"/mile"))),t.easy&&(n=n.replace(/\beasy warmup\b/g,"easy (".concat(t.easy.min,"-").concat(t.easy.max,"/mile) warmup")),n=n.replace(/\beasy cooldown\b/g,"easy (".concat(t.easy.min,"-").concat(t.easy.max,"/mile) cooldown")),n=n.replace(/(\d+)(-\d+)? min easy\b/g,"$1$2 min easy (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)"))),t.marathon&&(n=n.replace(/@ marathon pace/g,"@ ".concat(t.marathon.pace,"/mile")),n=n.replace(/@ half pace/g,"@ ".concat(t.marathon.pace,"/mile")),n=n.replace(/@ MP/g,"@ ".concat(t.marathon.pace,"/mile"))),n}injectPacesIntoDescription(e,t){return e}generateRunEqOptions(e,t){const n={optionA:"Full running workout",optionB:"First half running, second half riding (Cyclete/Elliptigo)",optionC:"Alternate running/riding every interval or segment",optionD:"Full Cyclete/Elliptigo ride (use Garmin RunEQ data field to track equivalent miles)"};return n.recommendation=t>=70?"Full Cyclete/Elliptigo ride":t>=40?"Split workout - start running, finish riding":t>=20?"Alternate segments between running and riding":"Full running workout",n}getTempoSafetyNotes(e){const t=["Start conservatively - tempo should feel 'controlled discomfort'","If breathing becomes labored, slow down slightly","Better to run slightly too easy than too hard","Recovery between intervals should be easy jogging or walking"];return(e.name.includes("Minutes")||e.name.includes("Alternating"))&&t.push("Let easy segments naturally speed up as workout progresses"),(e.duration.includes("40")||e.duration.includes("50"))&&(t.push("Fuel appropriately for longer tempo sessions"),t.push("Stay hydrated throughout the workout")),t}getPaceGuidance(e){const t={comfortablyHard:{description:"Half marathon to 10-mile race pace",breathingTest:"Can speak 3-5 words at a time",effortLevel:"7-8 out of 10",commonMistake:"Running too fast - this should feel controlled"},thresholdPace:{description:"15K to 1-hour race pace",breathingTest:"Can speak 2-3 words with some difficulty",effortLevel:"8 out of 10",commonMistake:"Going anaerobic - keep it at threshold level"},tempoPlus:{description:"10K to 8K race pace",breathingTest:"Difficult to speak in sentences",effortLevel:"8-9 out of 10",commonMistake:"Unsustainable pace - should feel hard but controlled"}};return t[e]||t.comfortablyHard}getTempoAlternatives(e){return{treadmill:"Use slight incline (1-2%) to simulate outdoor effort",track:"4-6 laps for every mile of tempo running",badWeather:"Indoor track, treadmill, or covered area like parking garage",injury:"Pool running, elliptical, or Cyclete/Elliptigo ride maintaining same effort level",noTime:"Shorten warmup/cooldown, focus on quality tempo portion",tooHard:"Reduce intensity to comfortable-moderate effort, build gradually",tooEasy:"Slightly increase pace, but avoid going anaerobic"}}getWorkoutsByCategory(e){return this.workoutLibrary[e]||[]}getCategories(){return Object.keys(this.workoutLibrary)}getRandomWorkout(e){const t=this.getWorkoutsByCategory(e);if(0===t.length)throw new Error("No workouts found in category: ".concat(e));return t[Math.floor(Math.random()*t.length)]}searchWorkouts(e){const t=[],n=e.toLowerCase();for(const[r,i]of Object.entries(this.workoutLibrary))for(const e of i)(e.name.toLowerCase().includes(n)||e.description.toLowerCase().includes(n)||e.source.toLowerCase().includes(n))&&t.push((0,u.A)((0,u.A)({},e),{},{category:r}));return t}}class He{constructor(){this.longRunIntensityGuidelines={easy:{description:"Conversational pace, can speak in full sentences",pace:"30-90 seconds slower than marathon pace",heartRate:"65-78% max HR",effort:"Comfortable, sustainable for hours"},steadyState:{description:"Sustained aerobic effort, controlled breathing",pace:"1:15:00 to 2:30:00 race pace (usually 15-45 sec slower than marathon pace)",heartRate:"83-87% max HR",effort:"Moderate effort, what you can sustain for 2-2.5 hours"},marathonPace:{description:"Goal marathon race pace",pace:"Marathon race pace",heartRate:"80-85% max HR",effort:"Controlled hard effort, race-specific"},fastFinish:{description:"Faster than marathon pace for finishing segments",pace:"Half marathon to 10K pace",heartRate:"85-90% max HR",effort:"Strong finish, practice racing on tired legs"}},this.workoutLibrary={TRADITIONAL_EASY:[{name:"Classic Easy Long Run",duration:"60-150 minutes",structure:"Entire run at easy, conversational pace",intensity:"easy",source:"Hal Higdon foundation",description:"Traditional base-building long run",benefits:"Aerobic development, time on feet, mental endurance",progression:"Increase by 1-2 miles per week, stepback every 3rd week",notes:"30-90 seconds slower than marathon pace, finish refreshed"},{name:"Conversational Long Run",duration:"75-120 minutes",structure:"Run with partner/group, maintain conversation throughout",intensity:"easy",source:"Social running philosophy",description:"Easy long run emphasizing conversational pace",benefits:"Aerobic base, social aspect, pace discipline",notes:"If you can't hold a conversation, you're going too fast"}],PROGRESSIVE_RUNS:[{name:"Thirds Progression",duration:"45-90 minutes",structure:"First 1/3 easy, middle 1/3 moderate, final 1/3 strong",intensity:"easy to fastFinish",source:"McMillan Running",description:"Equal time segments with increasing intensity",benefits:"Teaches finishing speed, energy conservation",example:"60 min run: 20 min easy + 20 min moderate + 20 min strong",notes:"Final third at steady state or tempo pace, not all-out"},{name:"DUSA Progression",duration:"50-90 minutes",structure:"75-90% easy pace, final 10-25% strong pace",intensity:"easy to fastFinish",source:"McMillan Running (Discovery USA)",description:"Majority easy with extended fast finish",benefits:"Teaches racing on fatigued legs, builds confidence",example:"60 min run: 45 min easy + 15 min strong pace",notes:"Used by elite marathoners, builds race-specific fitness"},{name:"Super Fast Finish",duration:"50-90 minutes",structure:"Normal easy run + final 3-6 minutes at 5K race effort",intensity:"easy to fastFinish",source:"McMillan (Paul Tergat method)",description:"Easy run with explosive final minutes",benefits:"Finishing kick practice, confidence, speed on tired legs",notes:"Used by Paul Tergat for world record marathon buildup"},{name:"10-Second Dropdowns",duration:"45-75 minutes",structure:"Drop pace by 10 seconds every mile (or every 10 minutes)",intensity:"easy to marathonPace",source:"Runner's World progression method",description:"Gradual, systematic pace progression",benefits:"Smooth pace control, negative split practice",example:"Start 8:30 pace, drop to 8:20, 8:10, 8:00, etc."}],STEADY_STATE_LONG:[{name:"Marathon Pace Long Run",duration:"60-120 minutes",structure:"15-20 min easy warmup + 20-60 min @ marathon pace + 10-15 min easy",intensity:"marathonPace",source:"Marathon-specific training",description:"Extended time at goal marathon pace",benefits:"Race pace practice, aerobic power, confidence",progression:"Start with 20 min MP, build by 5-10 min weekly",notes:"Practice fueling and pacing strategies"},{name:"Steady State Long Run",duration:"50-95 minutes",structure:"15 min easy warmup + 25-75 min steady state + 10 min easy",intensity:"steadyState",source:"McMillan Running",description:"Extended aerobic effort at steady state pace",benefits:"Aerobic power, endurance, lactate clearance",notes:"Pace between 1:15:00 and 2:30:00 race pace"},{name:"Half Marathon Pace Long Run",duration:"60-90 minutes",structure:"15 min easy + 30-60 min @ half marathon pace + 15 min easy",intensity:"steadyState",source:"Half marathon training",description:"Extended half marathon pace practice",benefits:"Race-specific fitness, sustained speed"}],MIXED_PACE_LONG:[{name:"Fast-Slow Long Run",duration:"60-120 minutes",structure:"Alternate fast and easy segments (e.g., 2 min fast / 3 min easy)",intensity:"easy to marathonPace",source:"Varied pace training",description:"Alternating pace segments throughout long run",benefits:"Pace variety, teaches recovery while running, mental engagement",variations:["2 min fast / 3 min easy for entire run","5 min fast / 5 min easy x 6-12 sets","1 mile fast / 2 miles easy pattern"]},{name:"Surge Long Run",duration:"60-120 minutes",structure:"Easy base pace with 30-60 second surges every 5-10 minutes",intensity:"easy to fastFinish",source:"Fartlek adaptation for long runs",description:"Easy long run with regular speed surges",benefits:"Simulates race surges, mental toughness, speed on tired legs",notes:"Surges should be strong but controlled, return to easy pace"},{name:"Out-and-Back Negative Split",duration:"60-120 minutes",structure:"Run out easy, return faster (aim for 30-60 sec negative split)",intensity:"easy to marathonPace",source:"Negative split training",description:"Practice negative splitting over long distance",benefits:"Pacing discipline, finishing strength, race strategy",notes:"Turn around at halfway point, aim to return 30-60 sec faster"}],RACE_SIMULATION:[{name:"Marathon Dress Rehearsal",duration:"120-180 minutes",structure:"20-26 mile run at planned marathon paces with race fueling",intensity:"easy to marathonPace",source:"Marathon preparation",description:"Full marathon simulation 3-4 weeks before race",benefits:"Race day practice, fueling test, confidence",structure_example:"6 easy + 13-16 @ MP + 1-3 easy cooldown",notes:"Practice everything: clothing, fueling, pacing, mindset"},{name:"Half Marathon Simulation",duration:"90-120 minutes",structure:"15 min easy + 8-10 miles @ half pace + 15 min easy",intensity:"easy to marathonPace",source:"Half marathon preparation",description:"Simulate middle miles of half marathon",benefits:"Race pace confidence, fueling practice",notes:"Practice race day routine and mindset"},{name:"Goal Pace Sandwich",duration:"75-120 minutes",structure:"Easy miles + goal pace block + easy miles (mimic race splits)",intensity:"easy to marathonPace",source:"Race-specific training",description:"Practice goal pace within context of longer run",benefits:"Race pacing, mental preparation, confidence",example:"3 easy + 6 @ goal pace + 3 easy for 12-mile long run"}],TERRAIN_SPECIFIC:[{name:"Rolling Hills Long Run",duration:"60-120 minutes",structure:"Long run on rolling terrain, maintain effort (not pace)",intensity:"easy to steadyState",source:"Terrain-specific training",description:"Long run emphasizing varied terrain",benefits:"Hill strength, effort-based pacing, race preparation",notes:"Focus on consistent effort, let pace vary with terrain"},{name:"Trail Long Run",duration:"75-150 minutes",structure:"Long run on trails, emphasis on time not distance",intensity:"easy",source:"Trail running adaptation",description:"Time-based long run on trail terrain",benefits:"Mental break, varied muscle recruitment, adventure",notes:"Time-based rather than distance-based due to terrain"}],RECOVERY_LONG:[{name:"Aerobic Base Long Run",duration:"90-150 minutes",structure:"Very easy pace, focus on time on feet not speed",intensity:"easy",source:"Base building philosophy",description:"Ultra-easy long run for aerobic development",benefits:"Aerobic base, active recovery, mental endurance",notes:"Should feel refreshed after, not fatigued"},{name:"Social Long Run",duration:"75-120 minutes",structure:"Group long run with conversation throughout",intensity:"easy",source:"Social running",description:"Easy long run with group, emphasizing social aspect",benefits:"Mental break, social connection, pace discipline"}]}}prescribeLongRunWorkout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{runEqPreference:n=0,distance:r=null,duration:i=null,paces:o=null}=t;let a=null,s=null;for(const[u,c]of Object.entries(this.workoutLibrary)){const t=c.find(t=>t.name.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(t.name.toLowerCase()));if(t){a=t,s=u;break}}if(!a)throw new Error('Workout "'.concat(e,'" not found'));const l=(0,u.A)((0,u.A)({},a),{},{category:s,intensityGuidance:this.getIntensityGuidance(a),runEqOptions:this.generateRunEqOptions(a,n),customization:this.getCustomizationOptions(a,r,i,o),safetyNotes:this.getLongRunSafetyNotes(a),fuelingGuidance:this.getFuelingGuidance(a),alternatives:this.getLongRunAlternatives(a)});if(o){l.paces=o,l.name=this.injectPacesIntoName(a.name,r,o,a.intensity);const e=We(a.structure,null,null);if(l.structure=this.injectPacesIntoStructure(e,o),l.description=this.injectPacesIntoDescription(a.description,o),r&&"PROGRESSIVE_RUNS"===s){const e=this.generateProgressionPacing(a.name,r,o);e&&(l.mileByMilePacing=e,l.structure=e)}if(r&&"RACE_SIMULATION"===s){const e=this.generateSandwichPacing(a.name,r,o);e&&(l.mileByMilePacing=e,l.structure=e)}}return r&&null!==o&&void 0!==o&&o.easy&&(l.duration=this.calculateDurationFromDistance(r,o.easy)),r&&(l.distance=r),l}injectPacesIntoName(e,t,n,r){let i=e,o=null;const a=e.toLowerCase(),s=a.includes("dropdown")||a.includes("10-second")||a.includes("thirds")||a.includes("dusa")||a.includes("fast finish")||a.includes("progressive"),l=a.includes("sandwich")||a.includes("simulation")||a.includes("dress rehearsal")||a.includes("marathon pace long")||a.includes("goal pace");if((a.includes("fast finish")||a.includes("super fast"))&&n.easy&&n.interval)o="".concat(n.easy.min,"-").concat(n.easy.max,"/mi \u2192 ").concat(n.interval.pace,"/mi");else if(s&&n.easy)o="".concat(n.easy.max,"/mi start");else if(l&&(n.racePace||n.marathon)){var u,c;const e=(null===(u=n.racePace)||void 0===u?void 0:u.pace)||(null===(c=n.marathon)||void 0===c?void 0:c.pace);o="".concat(e,"/mi goal")}else r&&"marathonPace"===r&&n.marathon?o="".concat(n.marathon.pace,"/mi"):r&&r.includes("threshold")&&n.threshold?o="".concat(n.threshold.pace,"/mi"):n.easy&&(o="".concat(n.easy.min,"-").concat(n.easy.max,"/mi"));return t&&o?i="".concat(t,"-Mile ").concat(e," (").concat(o,")"):t?i="".concat(t,"-Mile ").concat(e):o&&(i="".concat(e," (").concat(o,")")),i}injectPacesIntoStructure(e,t){let n=e;return t.easy&&(n=n.replace(/easy pace/g,"easy pace (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)")),n=n.replace(/easy warmup/g,"easy warmup (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)")),n=n.replace(/\bmin easy/g,"min easy (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)")),n=n.replace(/easy cooldown/g,"easy cooldown (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)")),n=n.replace(/\bmiles easy/g,"miles easy (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)"))),t.marathon&&(n=n.replace(/@ marathon pace/g,"@ ".concat(t.marathon.pace,"/mile marathon pace")),n=n.replace(/@ MP/g,"@ ".concat(t.marathon.pace,"/mile")),n=n.replace(/@ half pace/g,"@ ".concat(t.marathon.pace,"/mile pace"))),t.threshold&&(n=n.replace(/steady state/g,"steady state (".concat(t.threshold.pace,"/mile)")),n=n.replace(/strong pace/g,"strong pace (".concat(t.threshold.pace,"/mile)"))),n}injectPacesIntoDescription(e,t){let n=e;return t.easy&&(n=n.replace(/easy pace/g,"easy pace (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)")),n=n.replace(/conversational pace/g,"conversational pace (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)"))),t.marathon&&(n=n.replace(/marathon pace/g,"marathon pace (".concat(t.marathon.pace,"/mile)")),n=n.replace(/goal pace/g,"goal pace (".concat(t.marathon.pace,"/mile)"))),n}calculateDurationFromDistance(e,t){if(!e||!t)return null;const n=t.min||t,r=t.max||t,i=e=>{if("string"!==typeof e)return 10;const t=e.split(":");return 2!==t.length?10:parseInt(t[0])+parseInt(t[1])/60},o=i(n),a=i(r),s=Math.round(e*o),l=Math.round(e*a),u=e=>{if(e>=120){const t=Math.floor(e/60),n=e%60;return n>0?"".concat(t,"h ").concat(n,"min"):"".concat(t," hours")}return"".concat(e," minutes")};return l-s>=5?"".concat(u(s)," - ").concat(u(l)):u(Math.round((s+l)/2))}generateProgressionPacing(e,t,n){var r,i;if(!t||null===n||void 0===n||!n.easy)return null;const o=e.toLowerCase(),a=n.easy.max,s=n.easy.min,l=(null===(r=n.marathon)||void 0===r?void 0:r.pace)||(null===(i=n.threshold)||void 0===i?void 0:i.pace)||s,u=(e,t,n)=>e===t?"Mile ".concat(e,": ").concat(n,"/mile"):"Miles ".concat(e,"-").concat(t,": ").concat(n,"/mile");if(o.includes("thirds")){const e=Math.floor(t/3),n=e,r=2*e,i=[];return i.push(u(1,n,a)),i.push(u(n+1,r,s)),i.push(u(r+1,t,l)),i.join("\n")}if(o.includes("dropdown")||o.includes("10-second")){const e=e=>{const[t,n]=e.split(":").map(Number);return 60*t+n},n=e=>{const t=Math.floor(e/60),n=Math.round(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))},r=e(a),i=[];for(let o=1;o<=t;o++){const t=10*(o-1),a=n(Math.max(r-t,e(l)));i.push("Mile ".concat(o,": ").concat(a,"/mile"))}return i.join("\n")}if(o.includes("dusa")){const e=Math.ceil(.8*t),n=t-e,r=[];return r.push(u(1,e,a)),n>0&&r.push(u(e+1,t,l)),r.join("\n")}if(o.includes("fast finish")||o.includes("super fast")){var c;const e=t-1,r=(null===(c=n.interval)||void 0===c?void 0:c.pace)||l,i=[];return i.push(u(1,e,a)),i.push("Mile ".concat(t,": ").concat(r,"/mile (5K effort)")),i.join("\n")}return"Miles 1-".concat(t,": ").concat(a,"/mile")}generateSandwichPacing(e,t,n){var r,i;if(!t||null===n||void 0===n||!n.easy)return null;const o=(null===(r=n.racePace)||void 0===r?void 0:r.pace)||(null===(i=n.marathon)||void 0===i?void 0:i.pace);if(!o)return null;e.toLowerCase();const a=n.easy.max,s=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";const i=r?" (".concat(r,")"):"";return e===t?"Mile ".concat(e,": ").concat(n,"/mile").concat(i):"Miles ".concat(e,"-").concat(t,": ").concat(n,"/mile").concat(i)},l=Math.max(2,Math.floor(.25*t)),u=Math.max(1,Math.floor(.2*t)),c=t-l-u,d=Math.max(4,c),h=[];return h.push(s(1,l,a,"warmup")),h.push(s(l+1,l+d,o,"goal pace")),u>0&&h.push(s(l+d+1,t,a,"cooldown")),h.join("\n")}getIntensityGuidance(e){let t=e.intensity;return"string"===typeof e.intensity&&e.intensity.includes(" to ")&&(t=e.intensity.split(" to ")[0]),this.longRunIntensityGuidelines[t]||this.longRunIntensityGuidelines.easy}generateRunEqOptions(e,t){const n={optionA:"Full running workout",optionB:"First half running, second half on stand-up bike",optionC:"Alternate segments between running and biking (if structured workout)",optionD:"Full stand-up bike workout (".concat(2,"x time conversion for easy pace)"),conversionFactor:2};return(e.intensity.includes("marathonPace")||e.intensity.includes("steadyState"))&&(n.optionD="Full stand-up bike workout (2x easy pace, 2.5x marathon pace)",n.conversionNotes="Use 2.5x conversion for marathon pace segments, 2x for easy segments"),n.recommendation=t>=70?"Full stand-up bike workout":t>=40?"Split workout - first half running, second half biking":t>=20?"Alternate major segments if structured workout":"Full running workout",n}getCustomizationOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const i={distanceOptions:{short:"45-75 minutes or 6-10 miles",medium:"75-120 minutes or 10-16 miles",long:"120-180 minutes or 16-26 miles"},adaptForDistance:{},adaptForTime:{}};return(e.name.includes("Progression")||e.name.includes("Progressive"))&&(r&&r.easy&&r.threshold?i.adaptForDistance={"6-8 miles":"2-3 miles easy (".concat(r.easy.min,"-").concat(r.easy.max,"/mile), 2-3 miles moderate, 2 miles strong (").concat(r.threshold.pace,"/mile)"),"10-12 miles":"4 miles easy (".concat(r.easy.min,"-").concat(r.easy.max,"/mile), 4 miles moderate, 4 miles strong (").concat(r.threshold.pace,"/mile)"),"16-18 miles":"6 miles easy (".concat(r.easy.min,"-").concat(r.easy.max,"/mile), 6 miles moderate, 6 miles strong (").concat(r.threshold.pace,"/mile)")}:i.adaptForDistance={"6-8 miles":"2-3 miles easy, 2-3 miles moderate, 2 miles strong","10-12 miles":"4 miles easy, 4 miles moderate, 4 miles strong","16-18 miles":"6 miles easy, 6 miles moderate, 6 miles strong"}),e.name.includes("Marathon Pace")&&(r&&r.easy&&r.marathon?i.adaptForDistance={"10-12 miles":"3 miles easy (".concat(r.easy.min,"-").concat(r.easy.max,"/mile) + 6 miles @ ").concat(r.marathon.pace,"/mile + 2 miles easy"),"14-16 miles":"3 miles easy (".concat(r.easy.min,"-").concat(r.easy.max,"/mile) + 10 miles @ ").concat(r.marathon.pace,"/mile + 3 miles easy"),"18-20 miles":"3 miles easy (".concat(r.easy.min,"-").concat(r.easy.max,"/mile) + 13 miles @ ").concat(r.marathon.pace,"/mile + 4 miles easy")}:i.adaptForDistance={"10-12 miles":"3 miles easy + 6 miles MP + 2 miles easy","14-16 miles":"3 miles easy + 10 miles MP + 3 miles easy","18-20 miles":"3 miles easy + 13 miles MP + 4 miles easy"}),i}getLongRunSafetyNotes(e){const t=["Start conservatively - long runs should feel sustainable","Focus on effort over pace, especially in varying weather/terrain","Plan hydration strategy for runs over 90 minutes","Carry identification and emergency contact information","Know your route and have bailout options"];return(e.intensity.includes("marathonPace")||e.intensity.includes("fastFinish"))&&(t.push("Save faster segments for when you're warmed up (after 15+ minutes)"),t.push("If pace becomes unsustainable, dial back to easy effort")),(e.duration.includes("120")||e.duration.includes("150"))&&(t.push("Practice race-day fueling for runs over 2 hours"),t.push("Consider electrolyte replacement for extended efforts")),(e.name.includes("Progression")||e.name.includes("Progressive"))&&(t.push("Build pace gradually - avoid sudden speed changes"),t.push("Final segments should feel strong but controlled, not all-out")),t}getFuelingGuidance(e){const t=[];return(e.duration.includes("120")||e.duration.includes("150")||e.duration.includes("180"))&&(t.push("This is a key fueling practice opportunity"),t.push("Test gels, sports drinks, or real food you plan to use in races"),t.push("Practice taking fuel while maintaining pace/effort")),{baseFueling:{under60min:"Generally no fueling needed, just hydration","60-90min":"Consider sports drink or small fuel if hot weather","90-120min":"Practice race fueling - 30-60g carbs per hour after first hour",over120min:"Definitely fuel - practice exact race day strategy"},notes:t}}getLongRunAlternatives(e){return{badWeather:{treadmill:"Use 1% incline, break into segments if needed for mental engagement",indoor:"Mall walking, indoor track (expect many laps)",postpone:"Better to move day than compromise safety"},timeConstraints:{shortenDistance:"Maintain workout structure but reduce total time/distance",focusOnQuality:"Keep key pace segments, reduce easy portions",splitAcrossDays:"Not ideal, but could split very long runs across 2 days"},injury:{pool:"Aqua jogging maintaining same effort and time",bike:"Stand-up bike or regular bike with appropriate time conversion",elliptical:"Good alternative maintaining effort level"},terrain:{noHills:"Use treadmill incline or find bridges/overpasses",onlyTrack:"Long run on track requires mental strategies, audiobooks/podcasts help",onlyTreadmill:"Break into segments, vary incline/pace for mental engagement"}}}getWorkoutsByCategory(e){return this.workoutLibrary[e]||[]}getCategories(){return Object.keys(this.workoutLibrary)}getRandomWorkout(e){const t=this.getWorkoutsByCategory(e);if(0===t.length)throw new Error("No workouts found in category: ".concat(e));return t[Math.floor(Math.random()*t.length)]}searchWorkouts(e){const t=[],n=e.toLowerCase();for(const[r,i]of Object.entries(this.workoutLibrary))for(const e of i)(e.name.toLowerCase().includes(n)||e.description.toLowerCase().includes(n)||e.source.toLowerCase().includes(n))&&t.push((0,u.A)((0,u.A)({},e),{},{category:r}));return t}}var Ve=n(224),Ke=n(166);const Ye=new class{constructor(){this.callAnthropicAPI=(0,Le.Qg)(Ie.Cn,"callAnthropicAPI"),this.hillLibrary=new qe,this.intervalLibrary=new Ue,this.tempoLibrary=new ze,this.longRunLibrary=new He,this.paceCalculator=new Ke.O,this.raceDistanceMiles={"5K":3.1,"10K":6.2,Half:13.1,"Half Marathon":13.1,Marathon:26.2},this.distanceToVdotKey={"5K":"10K","10K":"10K",Half:"halfMarathon","Half Marathon":"halfMarathon",Marathon:"marathon"},this.buildVdotEquivalencyTable(),this.coachingSystemPrompt='You are a USATF-certified running coach who practices practical periodization. Your coaching style is conversational, data-driven, and actionable - like you\'re coaching someone you know personally.\n\nCRITICAL: You have access to a curated workout library. SELECT workouts from the library - DO NOT invent new ones.\n\nJASON FITZGERALD COACHING VOICE - KEY CHARACTERISTICS:\n- **Direct and honest**: "Let\'s be real" - no sugarcoating, but always encouraging\n- **Data-driven**: Use specific paces, times, and metrics - show the math\n- **Practical periodization**: "Run less, run faster" philosophy - quality over quantity\n- **Injury prevention focus**: Emphasize recovery, rest days, and smart progression\n- **Mental toughness**: Acknowledge the challenge, build confidence through checkpoints\n- **Conversational but professional**: Like talking to a friend who happens to be an expert\n- **Actionable specifics**: Not just "run tempo" but "run tempo at 9:35-9:50/mile for 20 minutes"\n- **Reality checks**: Set clear checkpoints with specific metrics (e.g., "10K under 65:00 by Week 8")\n- **Explain the "why"**: Don\'t just say what to do - explain why it matters\n- **Encouraging but realistic**: "This is ambitious, but here\'s why it can work..."\n- **Personal connection**: Use the runner\'s name naturally, reference their specific situation\n\nCOACHING VOICE GUIDELINES:\n- Start with honest assessment: "Let\'s be real about this goal..."\n- Use specific data: paces, times, distances, checkpoints with clear metrics\n- Be direct about challenges: "This is ambitious" or "This is very achievable"\n- Emphasize injury prevention: "Rest days are non-negotiable" or "Cyclete keeps you fresh"\n- Include mental coaching: "Trust the process" or "You\'ve put in the work"\n- Provide race strategy: Specific pacing plans, fueling, terrain tactics\n- Set clear checkpoints: "Week 8 tune-up: 10K under 65:00 or we adjust goal"\n- Explain workout purpose: "Hill repeats build strength without track pounding"\n- Be conversational: Use contractions, natural phrasing, "you" not "the runner"\n- End with encouragement: "Let\'s do this" or "You\'ve got this"\n- DO NOT use any real coach names in your response\n- Be concise and insightful, not flowery or generic\n\nWhen building training plans:\n1. SELECT workouts from library using [WORKOUT_ID: type_category_index] format\n2. SEQUENCE according to periodization principles\n3. PROGRESS intensity/volume appropriately\n4. VARY workout types to prevent monotony\n5. Consider recovery needs between workouts\n6. Workouts will be automatically enriched with user-specific paces\n\nOUTPUT FORMAT FOR WORKOUTS:\n- Tue: [WORKOUT_ID: hill_medium_vo2_0] Classic Hill Repeats\n- Thu: [WORKOUT_ID: interval_VO2_MAX_2] 800m Track Intervals\n- Fri: [WORKOUT_ID: tempo_THRESHOLD_1] Tempo Run\n- Sun: [WORKOUT_ID: longrun_MARATHON_PACE_3] Long Run with MP Finish\n\nThe WORKOUT_ID allows the system to retrieve full workout details (warmup/cooldown, safety notes, terrain requirements, RunEQ cross-training options).\n\nYour role: COACHING (periodization, goal assessment, progression, recovery guidance) NOT workout design.\n\nAssessment & Periodization:\n- Assess fitness realistically based on current performance data\n- Apply 4-phase periodization (base \u2192 build \u2192 peak \u2192 taper)\n- Create progressive training that builds from current fitness level\n- Include strategic recovery weeks every 4th week\n- Recommend assessment checkpoints to validate goal feasibility\n- Be conversational and encouraging while being honest about realistic expectations\n\nSTAND-UP BIKE INTELLIGENCE (if user has Cyclete or ElliptiGO):\n\nCYCLETE (if available):\n- Motion: Patented teardrop with acceleration through back stroke (mimics running push-off)\n- Muscle Loading: QUAD-DOMINANT - same muscles as running\n- Running Specificity: HIGH - closest cross-training to actual running\n- Best For: Replacing easy runs, maintaining running fitness, leg turnover\n- AVOID scheduling after: Hill repeats, speed work, quad-heavy days (compounds fatigue)\n- Schedule after: Tempo runs, glute-focused strength, upper body days\n\nELLIPTIGO (if available):\n- Motion: Elliptical (smooth, constant speed)\n- Muscle Loading: GLUTE + FULL-BODY (hip extension emphasis)\n- Running Specificity: MODERATE - different muscle pattern than running\n- Best For: Active recovery, cross-training variety, full-body conditioning\n- EXCELLENT after: Hill repeats, speed work (works different muscles = recovery)\n- Burns 33% more calories than cycling\n\nSEQUENCING RULES:\n- After quad-heavy running (hills, speed) \u2192 prefer ElliptiGO (glutes, recovery)\n- To replace an easy run \u2192 prefer Cyclete (running-specific)\n- User has both? Alternate based on previous day\'s muscle loading\n- Never schedule Cyclete day after hill repeats (quad overload)'}buildVdotEquivalencyTable(){this.vdotTable=[];const e=Ve.i0["10K"]||[],t=Ve.i0.halfMarathon||[],n=Ve.i0.marathon||[];e.forEach(e=>{const r=e.paces.threshold.pace,i=t.find(e=>Math.abs(this.timeToSeconds(e.paces.threshold.pace)-this.timeToSeconds(r))<10),o=n.find(e=>Math.abs(this.timeToSeconds(e.paces.threshold.pace)-this.timeToSeconds(r))<10);(i||o)&&this.vdotTable.push({tenK:e.goalTime,tenKSeconds:this.timeToSeconds(e.goalTime),half:(null===i||void 0===i?void 0:i.goalTime)||null,halfSeconds:i?this.timeToSeconds(i.goalTime):null,marathon:(null===o||void 0===o?void 0:o.goalTime)||null,marathonSeconds:o?this.timeToSeconds(o.goalTime):null,thresholdPace:r})}),console.log("Built VDOT equivalency table with",this.vdotTable.length,"entries")}timeToSeconds(e){if(!e)return 0;const t=e.split(":").map(Number);return 2===t.length?60*t[0]+t[1]:3===t.length?3600*t[0]+60*t[1]+t[2]:0}secondsToPace(e){const t=Math.floor(e/60),n=Math.round(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))}secondsToTime(e){const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.round(e%60);return t>0?"".concat(t,":").concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0")):"".concat(n,":").concat(r.toString().padStart(2,"0"))}calculatePacePerMile(e,t){const n=this.raceDistanceMiles[t];if(!n)return null;const r=this.timeToSeconds(e);if(0===r)return null;const i=r/n;return this.secondsToPace(i)}predictRaceTimes(e,t){const n=this.timeToSeconds(e);if(!n)return null;const r="Half Marathon"===t?"Half":t;let i;if("10K"===r)i=n;else if("Half"===r)i=this.interpolateFrom10K(n,"halfSeconds","tenKSeconds");else if("Marathon"===r)i=this.interpolateFrom10K(n,"marathonSeconds","tenKSeconds");else{if("5K"!==r)return null;i=n/.47}if(!i)return null;const o={"5K":this.secondsToTime(.47*i),"10K":this.secondsToTime(i)},a=this.interpolateFrom10K(i,"tenKSeconds","halfSeconds"),s=this.interpolateFrom10K(i,"tenKSeconds","marathonSeconds");return o.Half=a?this.secondsToTime(a):this.secondsToTime(2.1*i),o["Half Marathon"]=o.Half,o.Marathon=s?this.secondsToTime(s):this.secondsToTime(4.6*i),o}interpolateFrom10K(e,t,n){if(!this.vdotTable||0===this.vdotTable.length)return null;const r=this.vdotTable.filter(e=>e[t]&&e[n]);if(0===r.length)return null;r.sort((e,n)=>e[t]-n[t]);let i=null,o=null;for(let s=0;s<r.length;s++)if(r[s][t]<=e&&(i=r[s]),r[s][t]>=e&&!o){o=r[s];break}if(!i&&!o)return null;if(!i)return o[n];if(!o)return i[n];if(i===o)return i[n];const a=(e-i[t])/(o[t]-i[t]);return i[n]+a*(o[n]-i[n])}buildFitnessAssessmentContext(e){if(!e.recentRaceTime||!e.recentRaceDistance)return null;const t=this.calculatePacePerMile(e.recentRaceTime,e.recentRaceDistance),n=this.predictRaceTimes(e.recentRaceTime,e.recentRaceDistance);if(!t||!n)return null;let r="\n**CALCULATED FITNESS DATA (from recent ".concat(e.recentRaceDistance,"):**\n");r+="- Recent ".concat(e.recentRaceDistance," Pace: ").concat(t,"/mile\n"),r+="- Predicted Race Times (based on VDOT equivalency):\n",r+="  - 5K: ".concat(n["5K"],"\n"),r+="  - 10K: ".concat(n["10K"],"\n"),r+="  - Half Marathon: ".concat(n.Half,"\n"),r+="  - Marathon: ".concat(n.Marathon,"\n");const i=e.raceDistance,o=e.raceTime;if(o&&i){const e=o.includes("-")?o.split("-")[1]:o,t=this.timeToSeconds(e),a=n[i]||n.Half,s=this.timeToSeconds(a);if(t&&s){const n=t-s,o=Math.abs(Math.round(n/60));r+="\n**CURRENT vs GOAL ANALYSIS:**\n",r+="- Current predicted ".concat(i,": ").concat(a,"\n"),r+="- Goal ".concat(i,": ").concat(e,"\n"),r+="- Gap to close: ".concat(o," minutes ").concat(n<0?"faster":"slower","\n"),n>300?(r+="\nThis runner is ALREADY faster than their goal. They could target a more ambitious time, ",r+="or use this as a comfortable training cycle. Consider suggesting they reassess after a tune-up race.\n"):n<-1800?(r+="\nThis is a VERY aggressive goal (".concat(o," min improvement needed). "),r+="With dedicated training this improvement IS possible over a full training cycle, but be realistic: ",r+="typical improvement is 1-3 minutes per month of focused training. ",r+="Build the plan progressively and use checkpoints to assess if the goal needs adjustment.\n"):n<-300?(r+="\nThis is an ambitious but potentially achievable goal with focused training. ",r+="The runner needs to improve by ~".concat(o," minutes from current fitness. "),r+="Build progressive training and include checkpoint assessments to track improvement.\n"):r+="\nThis goal aligns well with current fitness - very achievable with consistent training.\n"}}return r}buildWorkoutLibraryContext(){let e="**WORKOUT LIBRARY - Use [WORKOUT_ID: ...] format**\n\n";e+="**HILL:** ";const t=this.hillLibrary.getCategories(),n=[];t.forEach(e=>{this.hillLibrary.getWorkoutsByCategory(e).forEach((t,r)=>{n.push("[hill_".concat(e,"_").concat(r,"] ").concat(t.name))})}),e+=n.join(", ")+"\n",e+="**INTERVALS:** ";const r=this.intervalLibrary.getCategories(),i=[];r.forEach(e=>{this.intervalLibrary.getWorkoutsByCategory(e).forEach((t,n)=>{i.push("[interval_".concat(e,"_").concat(n,"] ").concat(t.name))})}),e+=i.join(", ")+"\n",e+="**TEMPO:** ";const o=this.tempoLibrary.getCategories(),a=[];o.forEach(e=>{this.tempoLibrary.getWorkoutsByCategory(e).forEach((t,n)=>{a.push("[tempo_".concat(e,"_").concat(n,"] ").concat(t.name))})}),e+=a.join(", ")+"\n",e+="**LONG RUNS:** ";const s=this.longRunLibrary.getCategories(),l=[];return s.forEach(e=>{this.longRunLibrary.getWorkoutsByCategory(e).forEach((t,n)=>{l.push("[longrun_".concat(e,"_").concat(n,"] ").concat(t.name))})}),e+=l.join(", ")+"\n",e}async generateTrainingPlan(e){try{const t=this.buildCoachingAnalysisPrompt(e),n=await this.callWithTimeout(this.callAnthropicAPI({model:"claude-sonnet-4-5-20250929",max_tokens:2e3,system:this.coachingSystemPrompt,messages:[{role:"user",content:t}]}),18e4);if(!n.data.success)throw new Error(n.data.error||"Failed to generate coaching analysis");const r=n.data.content[0].text;Ne.log("\u2705 Step 1 complete: Coaching analysis generated");const i=this.buildWorkoutLibraryContext(),o=this.buildPlanStructurePrompt(e,r),a="".concat(i,"\n\n---\n\n").concat(o),s=await this.callWithTimeout(this.callAnthropicAPI({model:"claude-sonnet-4-5-20250929",max_tokens:4e3,system:this.coachingSystemPrompt,messages:[{role:"user",content:a}]}),18e4);if(!s.data.success)throw new Error(s.data.error||"Failed to generate plan structure");const l=s.data.content[0].text;Ne.log("\u2705 Step 2 complete: Plan structure generated");const u="".concat(r,"\n\n---\n\n").concat(l),c=this.parseAIPlanToStructure(u,e),d=this.enrichPlanWithWorkouts(c);return{success:!0,plan:this.transformToDashboardFormat(d,e),rawResponse:u,metadata:{generatedAt:(new Date).toISOString(),model:"claude-sonnet-4-5",userProfile:e}}}catch(t){return console.error("AI Coach Error:",t),{success:!1,error:t.message}}}async callWithTimeout(e,t){const n=new Promise((e,n)=>{setTimeout(()=>n(new Error("Request timeout: Function call exceeded 180 seconds")),t)});return Promise.race([e,n])}buildCoachingAnalysisPrompt(e){const t="metric"===(e.units||"imperial")?"kilometers":"miles",n=e.name||e.displayName,r=n?n.split(" ")[0]:null;let i="**COACHING ANALYSIS REQUEST**\n\n";if(r&&(i+="Runner: ".concat(r,"\n\n")),i+="**Goal Race:**\n",i+="- Distance: ".concat(e.raceDistance,"\n"),i+="- Goal Time: ".concat(e.raceTime,"\n"),i+="- Race Date: ".concat(e.raceDate,"\n\n"),i+="**Current Fitness:**\n",i+="- Weekly Mileage: ".concat(e.currentWeeklyMileage," ").concat(t,"\n"),i+="- Current Long Run: ".concat(e.currentLongRun," ").concat(t,"\n"),e.recentRaceTime&&e.recentRaceDistance){i+="- Recent Race: ".concat(e.recentRaceTime," for ").concat(e.recentRaceDistance,"\n");const t=this.buildFitnessAssessmentContext(e);t&&(i+=t)}return i+="\n",i+="**OUTPUT REQUIRED (Jason Fitzgerald voice):**\n",i+='1. Honest assessment with data (e.g., "39 min improvement = 3 min/week")\n',i+="2. Key training paces with specific ranges\n",i+="3. Race day strategy: pacing plan, fueling, terrain tactics\n",i+='4. Checkpoints with metrics (e.g., "Week 8: 10K under 65:00")\n',i+="5. Final notes: why plan works, what to watch, encouragement\n\n",i+="**DO NOT include week-by-week plan yet - that comes in a separate request.**\n",i+="Keep response focused and concise (150-200 words for assessment, then paces and strategy).\n",i}buildPlanStructurePrompt(e,t){const n=(new Date).getDay(),r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][n],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][n],o=0===n?7:7-n+1,a="metric"===(e.units||"imperial")?"kilometers":"miles",s=e.restDays||[];let l=[],u=null;e.standUpBikeType&&"none"!==e.standUpBikeType&&e.preferredBikeDays&&e.preferredBikeDays.length>0&&(u="cyclete"===e.standUpBikeType?"Cyclete":"ElliptiGO",l=e.preferredBikeDays);let c="**WEEK-BY-WEEK PLAN STRUCTURE REQUEST**\n\n";return c+="Based on the coaching analysis above, generate ONLY the week-by-week training schedule.\n\n",c+="**CRITICAL FORMAT:**\n",c+="- Week 1: Only ".concat(i,"-Sun (").concat(o," days, starts ").concat(r,")\n"),c+="- Week 2+: Full Mon-Sun (7 days)\n",c+="- Use [WORKOUT_ID: type_category_index] for quality workouts\n",c+="- Include distance in ".concat(a," for EVERY workout\n"),s.length>0&&(c+="- **REST DAYS: ".concat(s.join(", "),' = "Rest" ONLY**\n')),l.length>0&&u&&(c+="- **IMPORTANT: ".concat(l.join(" and ")," should be ").concat(u," rides, NOT runs**\n"),c+='  Format: "Tue: Ride 4 RunEQ miles on your '.concat(u,'" (NOT "Easy 4 mile run")\n')),c+="\n",c+="**EXAMPLE FORMAT:**\n",c+="### Week 1 (".concat(i,"-Sun) - XX ").concat(a,"\n"),l.includes(r)&&u?c+="- ".concat(i,": Ride 3 RunEQ miles on your ").concat(u,"\n"):c+="- ".concat(i,": [WORKOUT_ID: tempo_THRESHOLD_0] Tempo Run 6 ").concat(a,"\n"),c+="- Sun: [WORKOUT_ID: longrun_CONVERSATIONAL_0] Long Run 5 ".concat(a,"\n\n"),c+="### Week 2 - XX ".concat(a,"\n"),c+="- Mon: Rest\n",c+="- Wed: [WORKOUT_ID: interval_VO2_MAX_2] 800m Intervals 6 ".concat(a,"\n"),l.includes("Thursday")&&u?c+="- Thu: Ride 3 RunEQ miles on your ".concat(u,"\n"):c+="- Thu: Easy 3 ".concat(a,"\n"),c+="- Sun: [WORKOUT_ID: longrun_CONVERSATIONAL_0] Long Run 7 ".concat(a,"\n\n"),c+="**REQUIREMENTS:**\n",c+="- Start conservatively (Week 1 long run \u2264 ".concat(e.currentLongRun," ").concat(a,")\n"),c+="- Progressive overload (increase 1-2 ".concat(a,"/week)\n"),c+="- Recovery weeks every 3-4 weeks\n",c+="- Include week header with mileage for each week\n",c+='- Brief "Notes" for each week explaining focus\n\n',c+="**OUTPUT:** Week-by-week schedule ONLY. No coaching analysis (already provided above).\n",c}async regeneratePlanStructureFromCurrentWeek(e,t,n){var r,i,o;Ne.log("\ud83e\udd16 AI Regenerating plan structure from week",n),Ne.log("  New settings:",{runsPerWeek:t.runsPerWeek,availableDays:t.availableDays,hardSessionDays:t.hardSessionDays,longRunDay:t.longRunDay,preferredBikeDays:t.preferredBikeDays});const a=(null===e||void 0===e?void 0:e.weeks)||(null===e||void 0===e?void 0:e.weeklyPlans);if(!a)throw new Error("Training plan structure is invalid - missing weeks array");const s=a.slice(0,n-1);Ne.log("  Preserved",s.length,"completed weeks");const l=a.length,u=l-n+1,c=(null===(r=e.planOverview)||void 0===r?void 0:r.raceDate)||t.raceDate;let d="";if(s.length>0){const e=s.slice(-3);d="\n**COMPLETED WEEKS CONTEXT (for reference only - do not regenerate these):**\n",e.forEach(e=>{const t=e.weekNumber||e.week,n=e.totalMileage||0;d+="- Week ".concat(t,": ").concat(n," miles\n")}),d+="\n**IMPORTANT:** You are regenerating weeks ".concat(n,"-").concat(l," only. Weeks 1-").concat(n-1," are already completed and will be preserved.\n\n")}(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});const h=new Date(c),p=6048e5,m=new Date(h.getTime()-l*p),f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(m.getTime()+(n-1)*p).getDay()],g=t.units;if(!g)throw new Error("Missing required field: units");const y="metric"===g?"kilometers":"miles",v=t.name||t.displayName,b=v?v.split(" ")[0]:null,w=this.buildWorkoutLibraryContext();let D="**PLAN REGENERATION REQUEST**\n\n";if(D+="You are regenerating a training plan starting from Week ".concat(n," of ").concat(l," weeks.\n\n"),D+=d,D+="**UPDATED SETTINGS (use these, not the original settings):**\n",D+="- Training Days Per Week: ".concat(t.runsPerWeek,"\n"),D+="- Available Training Days: ".concat((t.availableDays||[]).join(", "),"\n"),D+="- Hard Workout Days: ".concat((t.hardSessionDays||[]).join(", "),"\n"),D+="- Long Run Day: ".concat(t.longRunDay,"\n"),t.preferredBikeDays&&t.preferredBikeDays.length>0){const e="cyclete"===t.standUpBikeType?"Cyclete":"ElliptiGO";D+="- ".concat(e," Days: ").concat(t.preferredBikeDays.join(", "),"\n")}D+="\n",D+="**ORIGINAL PLAN CONTEXT:**\n",D+="- Race Goal: ".concat((null===(i=e.planOverview)||void 0===i?void 0:i.raceDistance)||t.raceDistance," in ").concat((null===(o=e.planOverview)||void 0===o?void 0:o.goalTime)||t.raceTime,"\n"),D+="- Race Date: ".concat(c,"\n"),D+="- Current Weekly Mileage: ".concat(t.currentWeeklyMileage," ").concat(y,"\n"),D+="- Current Long Run: ".concat(t.currentLongRun," ").concat(y,"\n"),D+="- Experience Level: ".concat(t.experienceLevel,"\n"),D+="\n",D+="**CRITICAL REQUIREMENTS:**\n",D+="1. Generate ONLY weeks ".concat(n,"-").concat(l," (").concat(u," weeks)\n"),D+="2. Use the UPDATED SETTINGS above (not original settings)\n",D+="3. Maintain progressive periodization from where the plan left off\n",D+="4. Week ".concat(n," starts on ").concat(f,"\n"),D+="5. All distances in ".concat(y,"\n"),D+="6. Use [WORKOUT_ID: ...] format for quality workouts\n",D+="7. Include distance for EVERY workout\n",D+="\n",b&&(D+="**PERSONALIZATION: The runner's name is ".concat(b,".**\n\n")),D+="**OUTPUT FORMAT:**\n",D+="For each week from ".concat(n," to ").concat(l,", output:\n"),D+="### Week ".concat(n," - [mileage] ").concat(y,"\n"),D+="- Mon: [workout]\n",D+="- Tue: [workout]\n",D+="... (all 7 days)\n",D+="\n";const k="".concat(w,"\n\n---\n\n").concat(D);try{const e=await this.callWithTimeout(this.callAnthropicAPI({model:"claude-sonnet-4-5-20250929",max_tokens:6e3,system:this.coachingSystemPrompt,messages:[{role:"user",content:k}]}),18e4);if(!e.data.success)throw new Error(e.data.error||"Failed to regenerate plan");const r=e.data.content[0].text;Ne.log("  \u2705 AI generated plan structure");const i=this.parseAIPlanToStructure(r,t,n),o=this.enrichPlanWithWorkouts(i),a=this.transformToDashboardFormat(o,t),s=(a.weeks||[]).filter(e=>(e.weekNumber||e.week)>=n);return Ne.log("  Generated",s.length,"new weeks (from week",n,"forward)"),{success:!0,newWeeks:s,rawResponse:r,metadata:{regeneratedAt:(new Date).toISOString(),fromWeek:n,model:"claude-sonnet-4-5"}}}catch(x){return console.error("AI Coach Error (Plan Regeneration):",x),{success:!1,error:x.message}}}buildCoachingPrompt(e){if(!e.raceDistance)throw new Error("Missing required field: raceDistance");if(!e.raceTime)throw new Error("Missing required field: raceTime");if(!e.raceDate)throw new Error("Missing required field: raceDate");if(!e.currentWeeklyMileage)throw new Error("Missing required field: currentWeeklyMileage");if(!e.currentLongRun)throw new Error("Missing required field: currentLongRun");if(!e.runsPerWeek)throw new Error("Missing required field: runsPerWeek");if(!e.longRunDay)throw new Error("Missing required field: longRunDay");if(!e.experienceLevel)throw new Error("Missing required field: experienceLevel");const t=new Date,n=t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],o=t.getDay(),a=r[o],s=i[o],l=0===o?7:7-o+1,u=[];for(let T=o;T<=6;T++)u.push(i[T]);u.push("Sun");new Set(u);if(!e.units)throw console.error("\u274c Missing units in user profile - cannot generate plan"),new Error("User profile missing required field: units");const c=e.units,d="metric"===c?"kilometers":"miles",h=e.name||e.displayName,p=h?h.split(" ")[0]:null;let m="Today is ".concat(n," (").concat(a,"). Please create a training plan for me:\n\n");if(m+="**IMPORTANT: All distances should be in ".concat(d,". The user is using ").concat(c," units.**\n\n"),p&&(m+="**PERSONALIZATION: The runner's name is ".concat(p,'. Use their name naturally 2-3 times throughout your coaching analysis to make it feel personal and engaging. For example: "Hey, ').concat(p,'!" at the start, and "Here\'s the thing, ').concat(p,'..." when being honest about challenges.**\n\n')),m+="**Goal Race:**\n",m+="- Distance: ".concat(e.raceDistance,"\n"),m+="- Goal Time: ".concat(e.raceTime,"\n"),m+="- Race Date: ".concat(e.raceDate,"\n"),e.raceElevationProfile){m+="- Course Terrain: ".concat({flat:"Flat course (minimal elevation change)",rolling:"Rolling hills (moderate elevation changes)",hilly:"Hilly course (significant elevation gain)"}[e.raceElevationProfile]||e.raceElevationProfile,"\n")}if(m+="\n",m+="**Current Fitness:**\n",m+="- Weekly Mileage: ".concat(e.currentWeeklyMileage," ").concat(d,"\n"),m+="- Current Long Run: ".concat(e.currentLongRun," ").concat(d,"\n"),e.recentRaceTime&&e.recentRaceDistance){let t=e.recentRaceDistance;"5K"===e.recentRaceDistance?t="metric"===c?"5K (5 kilometers)":"5K (5 kilometers = 3.1 miles)":"10K"===e.recentRaceDistance?t="metric"===c?"10K (10 kilometers)":"10K (10 kilometers = 6.2 miles)":"Half Marathon"===e.recentRaceDistance?t="metric"===c?"Half Marathon (21.1 kilometers)":"Half Marathon (13.1 miles)":"Marathon"===e.recentRaceDistance&&(t="metric"===c?"Marathon (42.2 kilometers)":"Marathon (26.2 miles)"),m+="- Recent Race: ".concat(e.recentRaceTime," for ").concat(t,"\n");const n=this.buildFitnessAssessmentContext(e);n&&(m+=n)}m+="\n**Training Preferences:**\n",m+="- Training Days Per Week: ".concat(e.runsPerWeek,"\n"),m+="- Long Run Day: ".concat(e.longRunDay,"\n"),console.log("\ud83d\uded1 REST DAYS from profile:",e.restDays),e.restDays&&e.restDays.length>0&&(m+="- **REST DAYS: ".concat(e.restDays.join(", "),"** - These days MUST be complete rest (no running, no cross-training)\n")),e.qualityDays&&e.qualityDays.length>0&&(m+="- **QUALITY/HARD WORKOUT DAYS: ".concat(e.qualityDays.join(" and "),"**\n"),m+="  \u26a0\ufe0f CRITICAL: The user specifically requested hard workouts on ".concat(e.qualityDays.join(" AND "),".\n"),m+="  - ".concat(e.qualityDays[0]," MUST have a hard workout (tempo, intervals, or hills)\n"),e.qualityDays[1]&&(m+="  - ".concat(e.qualityDays[1]," MUST have a hard workout (tempo, intervals, or hills)\n")),m+="  - DO NOT schedule hard workouts on other days\n",m+="  - DO NOT make these days easy runs - they MUST be quality sessions\n");let f=[];if(e.standUpBikeType&&"none"!==e.standUpBikeType&&e.preferredBikeDays&&e.preferredBikeDays.length>0){const t="cyclete"===e.standUpBikeType?"Cyclete":"ElliptiGO";f=e.preferredBikeDays,m+="- Cross-Training Equipment: ".concat(t,"\n"),m+="- **IMPORTANT: ".concat(f.join(" and ")," should be ").concat(t," rides, NOT runs**\n"),m+='  Format: "Tue: Ride 4 RunEQ miles on your '.concat(t,'" (NOT "Easy 4 mile run")\n'),m+="  These replace what would normally be easy run days with cross-training\n"}const g=e.crossTrainingEquipment,y=[];if(g&&(g.pool&&y.push("pool running"),g.elliptical&&y.push("elliptical"),g.stationaryBike&&y.push("stationary bike"),g.swimming&&y.push("swimming"),g.rowing&&y.push("rowing machine")),y.length>0){m+="- Cross-Training Options: ".concat(y.join(", "),"\n");const t=e.restDays?e.restDays.length:0;t>=2?(m+="  **IMPORTANT: Since the user has ".concat(t," rest days and cross-training equipment:**\n"),m+='  - Keep ONE day as complete "Rest" (for true recovery)\n',m+='  - Make the OTHER rest day(s) "Rest / XT" - this gives flexibility to cross-train or rest\n',m+='  - Format: "Wed: Rest / XT" (user chooses between rest or cross-training that day)\n'):1===t&&(m+='  With only 1 rest day, keep it as complete "Rest" for recovery.\n')}m+="- Experience Level: ".concat(e.experienceLevel,"\n\n"),m+="**CRITICAL OUTPUT FORMAT REQUIREMENTS:**\n\n",m+="For EVERY week, you MUST output the daily schedule using this EXACT format:\n\n";const v=e.qualityDays||[],b="cyclete"===e.standUpBikeType?"Cyclete":"ElliptiGO",w=["[WORKOUT_ID: tempo_THRESHOLD_0] Tempo Run 6 miles","[WORKOUT_ID: interval_VO2_MAX_2] 800m Track Intervals"],D=e.restDays||[];let k=0;const x=y.length>0,E=(t,n,r)=>D.includes(n)?(k++,x&&D.length>=2&&k>1?"- ".concat(t,": Rest / XT\n"):"- ".concat(t,": Rest\n")):e.longRunDay===n?"- ".concat(t,": [WORKOUT_ID: longrun_CONVERSATIONAL_0] Long Run 5 miles\n"):f.includes(n)?"- ".concat(t,": Ride 3 RunEQ miles on your ").concat(b,"\n"):v.includes(n)?"- ".concat(t,": ").concat(w[r%w.length],"\n"):"- ".concat(t,": Easy 3 miles\n");let S="### Week 1 (".concat(n.split(",")[0],") - ").concat(3*l," miles (PARTIAL WEEK - starts ").concat(a,")\n"),C=0;for(let T=o;T<=6;T++)S+=E(i[T],r[T],C),v.includes(r[T])&&C++;S+=E("Sun","Sunday",C),S+="\n";let A="### Week 2 - 20 miles (FULL WEEK Mon-Sun)\n";C=0;return[["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"],["Sun","Sunday"]].forEach(e=>{let[t,n]=e;A+=E(t,n,C),v.includes(n)&&C++}),A+="\n",m+="**EXAMPLE FORMAT:**\n",m+="Week 1 (".concat(s,"-Sun):\n"),m+="- ".concat(s,": [WORKOUT_ID: tempo_THRESHOLD_0] Tempo Run 6 ").concat(d,"\n"),m+="- Sun: [WORKOUT_ID: longrun_CONVERSATIONAL_0] Long Run 5 ".concat(d,"\n\n"),m+="Week 2 (Mon-Sun):\n",m+="- Mon: Rest\n",m+="- Wed: [WORKOUT_ID: interval_VO2_MAX_2] 800m Intervals 6 ".concat(d,"\n"),m+="- Sun: [WORKOUT_ID: longrun_CONVERSATIONAL_0] Long Run 7 ".concat(d,"\n\n"),m+="**CRITICAL:** Week 1 starts ".concat(a," (partial). Week 2+ are full Mon-Sun.\n\n"),D.length>0&&(m+="**\ud83d\udea8 MANDATORY REST DAYS - DO NOT IGNORE:**\n",m+="The following days are COMPLETE REST DAYS. The user has ".concat(7-D.length," training days per week.\n"),m+="**REST DAYS: ".concat(D.join(", "),"**\n"),m+='For each rest day, output EXACTLY: "'.concat(D[0].substring(0,3),': Rest"\n'),m+="DO NOT assign ANY workout (no running, no cross-training, no easy runs) on: ".concat(D.join(", "),"\n\n")),m+="EVERY week MUST include:\n",m+="1. Week header with week number, date range, and total mileage\n",m+="2. Week 1: Only ".concat(s,"-Sun (").concat(l," days). Week 2+: Full Mon-Sun (7 days)\n"),m+="3. [WORKOUT_ID: ...] format for quality workouts from the library\n",m+="4. **CRITICAL: Include distance in ".concat(d,' for EVERY workout** (e.g., "Long Run 10 miles", "Tempo Run 6 miles")\n'),m+="5. Simple descriptions for easy runs and rest days (must include distance)\n",D.length>0&&(m+="6. **".concat(D.join(", "),' = "Rest" ONLY** (the user picked ').concat(7-D.length," training days, not 7)\n")),m+="\n",m+="**PROGRESSIVE TRAINING PRINCIPLES:**\n",m+="1. **Week 1 MUST start conservatively:** First long run should be AT OR BELOW current long run distance (".concat(e.currentLongRun," ").concat(d,")\n"),m+="2. Increase long run by 1-2 ".concat(d," per week, with recovery weeks every 3-4 weeks\n"),m+="3. Build from current fitness level (".concat(e.currentWeeklyMileage," ").concat(d,"/week) - don't jump more than 10% weekly\n\n"),m+="**OUTPUT REQUIREMENTS (Jason Fitzgerald voice):**\n",m+='1. Honest assessment with data (e.g., "39 min improvement = 3 min/week")\n',m+="2. Key training paces with ranges\n",m+="3. Week-by-week plan: header, all days, brief notes\n",m+="4. Race day strategy: pacing, fueling, terrain\n",m+='5. Checkpoints with metrics (e.g., "Week 8: 10K under 65:00")\n',m+="6. Final notes: why plan works, what to watch, encouragement\n\n",m}async generateInjuryRecoveryCoaching(e,t,n){var r,i,o,a;const{weeksOffRunning:s,selectedEquipment:l,reduceTrainingDays:u,currentWeek:c,returnToRunningWeek:d}=e,h=t.name||t.displayName,p=h?h.split(" ")[0]:null,m=[];if(l.pool&&m.push("pool/aqua running"),l.elliptical&&m.push("elliptical"),l.stationaryBike&&m.push("stationary bike"),l.swimming&&m.push("swimming"),l.rowing&&m.push("rowing machine"),l.standUpBike){const e="cyclete"===t.standUpBikeType?"Cyclete":"ElliptiGO";m.push(e)}const f=(null===n||void 0===n||null===(r=n.planOverview)||void 0===r?void 0:r.raceDistance)||t.raceDistance,g=(null===n||void 0===n||null===(i=n.planOverview)||void 0===i?void 0:i.goalTime)||t.raceTime,y=(null===n||void 0===n||null===(o=n.planOverview)||void 0===o?void 0:o.raceDate)||t.raceDate,v=(null===n||void 0===n||null===(a=n.weeks)||void 0===a?void 0:a.length)||0,b=v-c+1,w="You are a USATF-certified running coach providing injury recovery guidance. Your coaching style is direct, honest, and encouraging - like Jason Fitzgerald.\n\nINJURY RECOVERY SITUATION:\n- Runner: ".concat(p||"The runner","\n- Current Week: Week ").concat(c," of ").concat(v,"-week training plan\n- Weeks Off Running: ").concat(s," weeks\n- Return to Running: Week ").concat(d,"\n- Race Goal: ").concat(f," in ").concat(g,"\n- Race Date: ").concat(y,"\n- Weeks Remaining After Recovery: ").concat(b-s," weeks\n\nAVAILABLE CROSS-TRAINING EQUIPMENT:\n").concat(m.map(e=>"- ".concat(e)).join("\n"),"\n\nTRAINING ADJUSTMENTS:\n- Training days reduced by: ").concat(u," day").concat(1!==u?"s":""," during recovery\n\nCOACHING REQUIREMENTS (Jason Fitzgerald voice):\n1. **Start with honest assessment**: \"Let's be real - injuries happen, but here's how we'll handle this...\"\n2. **Explain the strategy**: Why cross-training maintains fitness, what each equipment type does\n3. **Address mental aspect**: Staying motivated during injury, trust in the process\n4. **Set expectations**: What to expect when returning to running, how fitness may have changed\n5. **Provide specific guidance**: \n   - Which equipment is best for maintaining running fitness\n   - How to structure cross-training workouts\n   - What to watch for when returning to running\n6. **Race goal reality check**: How this affects the race goal, whether adjustments are needed\n7. **Encouragement**: End with confidence-building message\n\nKeep response to 200-250 words. Be conversational, direct, and actionable. Use the runner's name naturally if provided.");try{const e=await this.callWithTimeout(this.callAnthropicAPI({model:"claude-sonnet-4-5-20250929",max_tokens:600,system:this.coachingSystemPrompt,messages:[{role:"user",content:w}]}),18e4);if(!e.data.success)throw new Error(e.data.error||"Failed to generate injury recovery coaching");return e.data.content[0].text}catch(D){return console.error("AI Coach Error (Injury Recovery):",D),"Injury recovery plan created. Focus on healing and maintaining fitness through cross-training. We'll gradually return to running in Week ".concat(d,".")}}async generatePlanAdjustmentCoaching(e,t,n){var r,i,o,a,s,l,u,c,d,h,p;const{oldSettings:m,newSettings:f,currentWeek:g,reason:y}=e,v=t.name||t.displayName,b=v?v.split(" ")[0]:null,w=f.runsPerWeek-m.runsPerWeek,D=f.hardSessionDays.length-m.hardSessionDays.length,k=((null===(r=f.preferredBikeDays)||void 0===r?void 0:r.length)||0)-((null===(i=m.preferredBikeDays)||void 0===i?void 0:i.length)||0),x=f.longRunDay!==m.longRunDay,E=(null===n||void 0===n||null===(o=n.planOverview)||void 0===o?void 0:o.raceDistance)||t.raceDistance,S=(null===n||void 0===n||null===(a=n.planOverview)||void 0===a?void 0:a.goalTime)||t.raceTime,C=(null===n||void 0===n||null===(s=n.weeks)||void 0===s?void 0:s.length)||0,A=C-g+1,T=[];if(0!==w&&T.push("".concat(w>0?"Increased":"Reduced"," from ").concat(m.runsPerWeek," to ").concat(f.runsPerWeek," runs per week")),0!==D&&T.push("".concat(D>0?"Added":"Reduced"," ").concat(Math.abs(D)," hard workout day").concat(1!==Math.abs(D)?"s":"")),0!==k&&t.standUpBikeType){const e="cyclete"===t.standUpBikeType?"Cyclete":"ElliptiGO";T.push("".concat(k>0?"Added":"Reduced"," ").concat(Math.abs(k)," ").concat(e," day").concat(1!==Math.abs(k)?"s":""))}x&&T.push("Moved long run from ".concat(m.longRunDay," to ").concat(f.longRunDay));const F="You are a USATF-certified running coach providing guidance on training plan adjustments. Your coaching style is direct, honest, and encouraging - like Jason Fitzgerald.\n\nPLAN ADJUSTMENT SITUATION:\n- Runner: ".concat(b||"The runner","\n- Current Week: Week ").concat(g," of ").concat(C,"-week training plan\n- Weeks Remaining: ").concat(A," weeks until race\n- Race Goal: ").concat(E," in ").concat(S,"\n").concat(y?"- Reason for adjustment: ".concat(y):"","\n\nCHANGES MADE:\n").concat(T.length>0?T.map(e=>"- ".concat(e)).join("\n"):"- No significant changes","\n\nOLD SETTINGS:\n- Runs per week: ").concat(m.runsPerWeek,"\n- Training days: ").concat((null===(l=m.availableDays)||void 0===l?void 0:l.join(", "))||"N/A","\n- Hard workout days: ").concat((null===(u=m.hardSessionDays)||void 0===u?void 0:u.join(", "))||"None","\n- Long run day: ").concat(m.longRunDay,"\n").concat(null!==(c=m.preferredBikeDays)&&void 0!==c&&c.length?"- Bike days: ".concat(m.preferredBikeDays.join(", ")):"","\n\nNEW SETTINGS:\n- Runs per week: ").concat(f.runsPerWeek,"\n- Training days: ").concat((null===(d=f.availableDays)||void 0===d?void 0:d.join(", "))||"N/A","\n- Hard workout days: ").concat((null===(h=f.hardSessionDays)||void 0===h?void 0:h.join(", "))||"None","\n- Long run day: ").concat(f.longRunDay,"\n").concat(null!==(p=f.preferredBikeDays)&&void 0!==p&&p.length?"- Bike days: ".concat(f.preferredBikeDays.join(", ")):"",'\n\nCOACHING REQUIREMENTS (Jason Fitzgerald voice):\n1. **Assess the changes**: Are these adjustments smart? Do they make sense for the race goal?\n2. **Address the reason**: If reason provided (too hard/easy/few bike days), explain if the adjustment addresses it correctly\n3. **Training load impact**: How does this affect weekly volume and intensity?\n4. **Recovery implications**: Are there enough rest days? Too many?\n5. **Race goal impact**: How do these changes affect the race goal? Positive or negative?\n6. **Specific guidance**: \n   - If reducing runs: "This gives you more recovery, which is smart if you were feeling beat up..."\n   - If increasing runs: "Adding a day increases volume - make sure you\'re ready for this..."\n   - If changing hard days: "Moving hard workouts affects recovery patterns..."\n   - If changing bike days: "More/fewer Cyclete days means more/less running-specific training..."\n7. **Encouragement**: End with confidence-building message\n\nKeep response to 200-250 words. Be conversational, direct, and actionable. Use the runner\'s name naturally if provided.');try{const e=await this.callWithTimeout(this.callAnthropicAPI({model:"claude-sonnet-4-5-20250929",max_tokens:600,system:this.coachingSystemPrompt,messages:[{role:"user",content:F}]}),18e4);if(!e.data.success)throw new Error(e.data.error||"Failed to generate plan adjustment coaching");return e.data.content[0].text}catch(R){return console.error("AI Coach Error (Plan Adjustment):",R),"Plan adjustments saved. The changes will help you stay on track toward your ".concat(E," goal. Listen to your body and adjust as needed.")}}parseAIPlanToStructure(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=e.split("\n"),i=[];let o=null,a={};const s=new Set;console.log("\n=== PARSING AI PLAN (".concat(r.length," lines) ===")),r.forEach((e,t)=>{e.toLowerCase().includes("week")&&console.log("Line ".concat(t,' contains "week": "').concat(e,'"'));const r=e.match(/^[\s#*]*Week\s+(\d+).*?[-\u2013\u2014]\s*(\d+)\s*(miles|kilometers|km|mi)/i);if(r){const a=parseInt(r[1]);if(console.log("\u2705 REGEX MATCHED Week ".concat(a,"!")),null!==n&&a<n)return void console.log("Skipping Week ".concat(a," (before starting week ").concat(n,")"));if(s.has(a))return void console.log("Skipping duplicate Week ".concat(a," at line ").concat(t));o&&i.push(o),s.add(a),o={weekNumber:a,totalMileage:parseInt(r[2]),workouts:[]},console.log("Found Week ".concat(a," at line ").concat(t,": ").concat(e.substring(0,80)))}const l=e.match(/^\s*[-*]*\s*(Mon|Tue|Wed|Thu|Fri|Sat|Sun):\s*(.+)/i);if(l&&o){const e=l[2].trim(),t=e.match(/\[WORKOUT_ID:\s*(tempo|interval|longrun|hill)_(.+?)_(\d+)\]/),n=t?e.replace(/\[WORKOUT_ID:\s*(?:tempo|interval|longrun|hill)_.+?_\d+\]\s*/,"").trim():e;let r=null;const i=n.toLowerCase();"rest"===i||i.match(/^rest\s*$/)?r="rest":i.match(/rest\s*\/\s*xt|rest\/xt|rest or xt|rest or cross/i)?r="rest_or_xt":(i.includes("ride")||i.includes("runeq"))&&(r="bike"),o.workouts.push({day:l[1],description:n,workoutId:t?t[0]:null,workoutType:t?t[1]:r,workoutCategory:t?t[2]:null,workoutIndex:t?parseInt(t[3]):null}),console.log("  Added workout: ".concat(l[1]," - ").concat(n.substring(0,50)))}if(e.match(/Easy.*?:/i)){const t=e.match(/(\d+:\d+(?:-\d+:\d+)?)/);t&&(a.easy=t[0],console.log("Found Easy pace: ".concat(t[0])))}if(e.match(/Tempo|Threshold/i)&&e.includes(":")){const t=e.match(/(\d+:\d+(?:-\d+:\d+)?)/);t&&(a.tempo=t[0],console.log("Found Tempo pace: ".concat(t[0])))}if(e.match(/Marathon Pace|MP:/i)){const t=e.match(/(\d+:\d+(?:-\d+:\d+)?)/);t&&(a.marathonPace=t[0],console.log("Found Marathon pace: ".concat(t[0])))}if(e.match(/Half.*?Marathon.*?Pace|HMP|Goal Pace/i)&&e.includes(":")){const t=e.match(/(\d+:\d+(?:-\d+:\d+)?)/);t&&(a.halfMarathonPace=t[0],console.log("Found Half Marathon pace: ".concat(t[0])))}if(e.match(/10K Pace|10-K/i)&&e.includes(":")){const t=e.match(/(\d+:\d+(?:-\d+:\d+)?)/);t&&(a.tenKPace=t[0],console.log("Found 10K pace: ".concat(t[0])))}if(e.match(/5K Pace|5-K/i)&&e.includes(":")){const t=e.match(/(\d+:\d+(?:-\d+:\d+)?)/);t&&(a.fiveKPace=t[0],console.log("Found 5K pace: ".concat(t[0])))}if(e.match(/VO2|Interval/i)&&e.includes(":")&&!e.match(/Cruise|Tempo/i)){const t=e.match(/(\d+:\d+(?:-\d+:\d+)?)/);t&&(a.interval=t[0],console.log("Found Interval pace: ".concat(t[0])))}}),o&&i.push(o),console.log("\n=== PARSING COMPLETE ==="),console.log("Parsed ".concat(i.length," weeks:"),i.map(e=>"Week ".concat(e.weekNumber," (").concat(e.totalMileage,"mi, ").concat(e.workouts.length," workouts)"))),console.log("Paces from AI text:",a);let l=null,u=null;if(t.raceTime&&t.raceDistance)try{let e=t.raceTime;e.includes("-")&&(e=e.split("-")[1]),console.log("\ud83d\udcca Calculating VDOT paces for ".concat(t.raceDistance," @ ").concat(e));const n=this.paceCalculator.calculateFromGoal(t.raceDistance,e);n&&n.paces&&(l=n.paces,u=n.trackIntervals,console.log("\u2705 VDOT Paces calculated:",{easy:"".concat(l.easy.min,"-").concat(l.easy.max,"/mi"),marathon:"".concat(l.marathon.pace,"/mi"),threshold:"".concat(l.threshold.pace,"/mi"),interval:"".concat(l.interval.pace,"/mi")}))}catch(c){console.warn("\u26a0\ufe0f Could not calculate VDOT paces:",c.message)}return console.log("===================\n"),{userProfile:t,paces:l||a,trackIntervals:u,weeks:i,fullPlanText:e}}enrichPlanWithWorkouts(e){console.log("\n\ud83d\udd0d ENRICHING WORKOUTS WITH LIBRARY DETAILS");const t=e.weeks.length,n=e.weeks.map(n=>{const r=n.weekNumber||1,i=n.workouts.map(n=>{var i;if(!n.workoutId)return(0,u.A)((0,u.A)({},n),{},{hasStructuredWorkout:!1});console.log("\n  Enriching: ".concat(n.workoutId),{type:n.workoutType,category:n.workoutCategory,index:n.workoutIndex});let o=null;const a=null===(i=n.description)||void 0===i?void 0:i.match(/(\d+(?:\.\d+)?)\s*(?:miles?|mi)\b/i),s=a?parseFloat(a[1]):null;s&&console.log("    \ud83d\udccf Extracted distance: ".concat(s,' miles from "').concat(n.description,'"'));try{if("hill"===n.workoutType){const t=this.hillLibrary.getWorkoutsByCategory(n.workoutCategory);console.log("    Hill library returned ".concat((null===t||void 0===t?void 0:t.length)||0,' workouts for category "').concat(n.workoutCategory,'"'));const r=t[n.workoutIndex];r&&(o=this.hillLibrary.prescribeHillWorkout(r.name,{paces:e.paces}))}else if("interval"===n.workoutType){const i=this.intervalLibrary.getWorkoutsByCategory(n.workoutCategory);console.log("    Interval library returned ".concat((null===i||void 0===i?void 0:i.length)||0,' workouts for category "').concat(n.workoutCategory,'"'));const a=i[n.workoutIndex];a&&(o=this.intervalLibrary.prescribeIntervalWorkout(a.name,{paces:e.paces,trackIntervals:e.trackIntervals,totalDistance:s,weekNumber:r,totalWeeks:t}))}else if("tempo"===n.workoutType){const i=this.tempoLibrary.getWorkoutsByCategory(n.workoutCategory);console.log("    Tempo library returned ".concat((null===i||void 0===i?void 0:i.length)||0,' workouts for category "').concat(n.workoutCategory,'"'));const a=i[n.workoutIndex];a&&(o=this.tempoLibrary.prescribeTempoWorkout(a.name,{paces:e.paces,weekNumber:r,totalWeeks:t}))}else if("longrun"===n.workoutType){const t=this.longRunLibrary.getWorkoutsByCategory(n.workoutCategory);console.log("    LongRun library returned ".concat((null===t||void 0===t?void 0:t.length)||0,' workouts for category "').concat(n.workoutCategory,'"'));const r=t[n.workoutIndex];r&&(o=this.longRunLibrary.prescribeLongRunWorkout(r.name,{paces:e.paces,distance:s}))}if(o){console.log("    \u2705 Found workout: ".concat(o.name));const t=this.injectUserPaces(o,e.paces);return(0,u.A)((0,u.A)({},n),{},{fullWorkoutDetails:t,hasStructuredWorkout:!0})}console.log("    \u274c No workout found at index ".concat(n.workoutIndex))}catch(l){console.warn("    \u26a0\ufe0f Error enriching workout: ".concat(n.workoutId),l)}return(0,u.A)((0,u.A)({},n),{},{hasStructuredWorkout:!1})});return(0,u.A)((0,u.A)({},n),{},{workouts:i})});return(0,u.A)((0,u.A)({},e),{},{weeks:n})}injectUserPaces(e,t){if(!t)return e;const n=JSON.parse(JSON.stringify(e));return n.workout&&["warmup","main","recovery","cooldown"].forEach(e=>{n.workout[e]&&(n.workout[e]=this.replaceGenericPaces(n.workout[e],t))}),n.repetitions&&Array.isArray(n.repetitions)&&(n.repetitions=n.repetitions.map(e=>this.replaceGenericPaces(e,t))),n}replaceGenericPaces(e,t){var n,r,i,o,a;if(!e||"string"!==typeof e)return e;let s=e;const l=null===(n=t.threshold)||void 0===n?void 0:n.pace;l&&(s=s.replace(/threshold effort|tempo effort|tempo pace/gi,"@ ".concat(l,"/mi")));const u=null===(r=t.interval)||void 0===r?void 0:r.pace;u&&"string"===typeof u&&(s=s.replace(/VO2 max effort|interval pace/gi,"@ ".concat(u,"/mi")));const c=null===(i=t.marathon)||void 0===i?void 0:i.pace;c&&(s=s.replace(/marathon pace|MP/gi,"@ ".concat(c,"/mi")));const d=null!==(o=t.easy)&&void 0!==o&&o.min&&null!==(a=t.easy)&&void 0!==a&&a.max?"".concat(t.easy.min,"-").concat(t.easy.max):t.easy;return d&&"string"===typeof d&&(s=s.replace(/easy pace|easy effort/gi,"@ ".concat(d,"/mi"))),s}transformToDashboardFormat(e,t){console.log("\n\ud83d\udd27 TRANSFORMING TO DASHBOARD FORMAT");const n=e.weeks.map(e=>{console.log("\n\ud83d\udcc5 Week ".concat(e.weekNumber," - ").concat(e.workouts.length," workouts"));const t=e.workouts.map(e=>{if(console.log("\n  Processing workout:",{day:e.day,description:e.description,hasWorkoutId:!!e.workoutId,hasFullDetails:!!e.fullWorkoutDetails,workoutType:e.workoutType}),e.fullWorkoutDetails){const t=e.fullWorkoutDetails;console.log("  \u2705 Using fullWorkoutDetails:",{name:t.name,category:t.category,hasNestedWorkout:!!t.workout});let n=t.distance||0;if(!n){const t=e.description.match(/(\d+(?:\.\d+)?)\s*(mile|miles|mi|km)/i);t&&(n=parseFloat(t[1]),console.log("  \ud83d\udccf Extracted distance from description: ".concat(n," ").concat(t[2])))}const r=t.workout?(0,u.A)((0,u.A)({},t.workout),{},{name:t.name,description:t.description}):{name:t.name,description:t.description,warmup:t.warmup,main:t.main,cooldown:t.cooldown,repetitions:t.repetitions,structure:t.structure,duration:t.duration,pace:t.pace,intensity:t.intensity},i=((e,t)=>{const n=(e||"").toLowerCase(),r=(t||"").toLowerCase();return"interval"===n||r.includes("vo2")||r.includes("speed")||r.includes("interval")||r.includes("short_speed")||r.includes("long_interval")?"intervals":"hill"===n||r.includes("hill")||r.includes("power")||r.includes("strength")?"hills":"tempo"===n||r.includes("tempo")||r.includes("threshold")?"tempo":"longrun"===n||r.includes("long")||r.includes("progressive")||r.includes("mixed_pace")?"longRun":n||"easy"})(e.workoutType,t.category),o={tempo:"Lactate Threshold",intervals:"Speed & VO2 Max",hills:"Strength & Power",longRun:"Endurance",easy:"Aerobic Base",bike:"Cross-Training",rest:"Recovery",rest_or_xt:"Recovery / XT"};let a=t.name||e.description;a=a.replace(/\[WORKOUT_ID:\s*(?:tempo|interval|longrun|hill)_.+?_\d+\]\s*/g,"").trim();let s=t.description||e.description;return s=s.replace(/\[WORKOUT_ID:\s*(?:tempo|interval|longrun|hill)_.+?_\d+\]\s*/g,"").trim(),{day:e.day,type:i,name:a,description:s,distance:n,focus:o[i]||t.focus||"Training",workout:r,terrain:t.terrain,safety:t.safety,runeq_options:t.runeq_options||t.runEqOptions,warmup:r.warmup,cooldown:r.cooldown,repetitions:r.repetitions||t.repetitions,metadata:{workoutId:e.workoutId,aiGenerated:!0,libraryCategory:t.category}}}console.log('  \u26a0\ufe0f Using FALLBACK - description: "'.concat(e.description,'"'));let t=0;const n=e.description.match(/(\d+(?:\.\d+)?)\s*(mile|miles|mi|km|RunEQ)/i);n&&(t=parseFloat(n[1]),console.log("  \ud83d\udccf Extracted distance: ".concat(t," ").concat(n[2])));let r="easy";const i=e.description.toLowerCase();i.includes("rest")||"rest"===i?r="rest":i.includes("ride")||i.includes("runeq")||i.includes("bike")?r="bike":i.includes("easy")?r="easy":i.includes("tempo")?r="tempo":i.includes("interval")?r="intervals":i.includes("hill")?r="hills":i.includes("long")&&(r="longRun");let o=e.description;o=o.replace(/\[WORKOUT_ID:\s*(?:tempo|interval|longrun|hill)_.+?_\d+\]\s*/g,"").trim();const a={day:e.day,type:r,name:o,description:o,distance:t,focus:{tempo:"Lactate Threshold",intervals:"Speed & VO2 Max",hills:"Strength & Power",longRun:"Endurance",easy:"Aerobic Base",bike:"Cross-Training",rest:"Recovery",rest_or_xt:"Recovery / XT"}[r]||"Training",workout:{name:e.description,description:e.description},metadata:{aiGenerated:!0,fallback:!0}};return console.log("  Created fallback workout:",a),a});return{weekNumber:e.weekNumber,totalMileage:e.totalMileage,workouts:t}}),r=e.fullPlanText?e.fullPlanText.replace(/\[WORKOUT_ID:\s*(?:tempo|interval|longrun|hill)_.+?_\d+\]\s*/g,""):e.fullPlanText,i=e.weeks.length,o=new Date,a=new Date(o),s=new Date(t.raceDate),l=a.toISOString().split("T")[0],c=s.toISOString().split("T")[0];return{userProfile:e.userProfile,paces:e.paces,trackIntervals:e.trackIntervals,weeks:n,fullPlanText:e.fullPlanText,aiCoachingAnalysis:r,planOverview:{startDate:l,raceDate:c,totalWeeks:i,raceDistance:t.raceDistance,goalTime:t.raceTime}}}};function Ge(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Ge(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Qe(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Ge(e))&&(r&&(r+=" "),r+=t);return r}Math.pow(10,8);const Ze=6048e5,Xe=6e4,Je=36e5,$e=Symbol.for("constructDateFrom");function et(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&$e in e?e[$e](t):e instanceof Date?new e.constructor(t):new Date(t)}function tt(e,t){return et(t||e,e)}function nt(e,t){var n;const r=()=>et(null===t||void 0===t?void 0:t.in,NaN),i=null!==(n=null===t||void 0===t?void 0:t.additionalDigits)&&void 0!==n?n:2,o=function(e){const t={},n=e.split(rt.dateTimeDelimiter);let r;if(n.length>2)return t;/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],rt.timeZoneDelimiter.test(t.date)&&(t.date=e.split(rt.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length)));if(r){const e=rt.timezone.exec(r);e?(t.time=r.replace(e[1],""),t.timezone=e[1]):t.time=r}return t}(e);let a;if(o.date){const e=function(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:null===o?i:100*o,restDateString:e.slice((r[1]||r[2]).length)}}(o.date,i);a=function(e,t){if(null===t)return new Date(NaN);const n=e.match(it);if(!n)return new Date(NaN);const r=!!n[4],i=st(n[1]),o=st(n[2])-1,a=st(n[3]),s=st(n[4]),l=st(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,s,l)?function(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,o=7*(t-1)+n+1-i;return r.setUTCDate(r.getUTCDate()+o),r}(t,s,l):new Date(NaN);{const e=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(ut[t]||(ct(e)?29:28))}(t,o,a)&&function(e,t){return t>=1&&t<=(ct(e)?366:365)}(t,i)?(e.setUTCFullYear(t,o,Math.max(i,a)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!a||isNaN(+a))return r();const s=+a;let l,u=0;if(o.time&&(u=function(e){const t=e.match(ot);if(!t)return NaN;const n=lt(t[1]),r=lt(t[2]),i=lt(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,i))return NaN;return n*Je+r*Xe+1e3*i}(o.time),isNaN(u)))return r();if(!o.timezone){const e=new Date(s+u),n=tt(0,null===t||void 0===t?void 0:t.in);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}return l=function(e){if("Z"===e)return 0;const t=e.match(at);if(!t)return 0;const n="+"===t[1]?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,i))return NaN;return n*(r*Je+i*Xe)}(o.timezone),isNaN(l)?r():tt(s+u+l,null===t||void 0===t?void 0:t.in)}const rt={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},it=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ot=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,at=/^([+-])(\d{2})(?::?(\d{2}))?$/;function st(e){return e?parseInt(e):1}function lt(e){return e&&parseFloat(e.replace(",","."))||0}const ut=[31,null,31,30,31,30,31,31,30,31,30,31];function ct(e){return e%400===0||e%4===0&&e%100!==0}const dt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function ht(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const pt={date:ht({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:ht({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:ht({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},mt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function ft(e){return(t,n)=>{let r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=null!==n&&void 0!==n&&n.width?String(n.width):t;r=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[i]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const gt={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:ft({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:ft({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:ft({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:ft({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:ft({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function yt(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;const a=o[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(s)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(s,e=>e.test(a)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(s,e=>e.test(a));let u;u=e.valueCallback?e.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;return{value:u,rest:t.slice(a.length)}}}const vt={ordinalNumber:(bt={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(bt.matchPattern);if(!n)return null;const r=n[0],i=e.match(bt.parsePattern);if(!i)return null;let o=bt.valueCallback?bt.valueCallback(i[0]):i[0];return o=t.valueCallback?t.valueCallback(o):o,{value:o,rest:e.slice(r.length)}}),era:yt({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:yt({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:yt({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:yt({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:yt({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var bt;const wt={code:"en-US",formatDistance:(e,t,n)=>{let r;const i=dt[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:pt,formatRelative:(e,t,n,r)=>mt[e],localize:gt,match:vt,options:{weekStartsOn:0,firstWeekContainsDate:1}},Dt=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},kt=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},xt={p:kt,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return Dt(e,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;default:o=t.dateTime({width:"full"})}return o.replace("{{date}}",Dt(r,t)).replace("{{time}}",kt(i,t))}},Et=/^D+$/,St=/^Y+$/,Ct=["D","DD","YY","YYYY"];function At(e){return Et.test(e)}function Tt(e){return St.test(e)}function Ft(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(r),Ct.includes(e))throw new RangeError(r)}let Rt={};function _t(){return Rt}function It(){return Object.assign({},_t())}var Pt=n(705);function Mt(e,t){const n=function(e){var t;return"function"===typeof e&&(null===(t=e.prototype)||void 0===t?void 0:t.constructor)===e}(t)?new t(0):et(t,0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}class Nt{constructor(){(0,Pt.A)(this,"subPriority",0)}validate(e,t){return!0}}class jt extends Nt{constructor(e,t,n,r,i){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=r,i&&(this.subPriority=i)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class Bt extends Nt{constructor(e,t){super(),(0,Pt.A)(this,"priority",10),(0,Pt.A)(this,"subPriority",-1),this.context=e||(e=>et(t,e))}set(e,t){return t.timestampIsSet?e:et(e,Mt(e,this.context))}}class Ot{run(e,t,n,r){const i=this.parse(e,t,n,r);return i?{setter:new jt(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,t,n){return!0}}const Lt=/^(1[0-2]|0?\d)/,Wt=/^(3[0-1]|[0-2]?\d)/,qt=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Ut=/^(5[0-3]|[0-4]?\d)/,zt=/^(2[0-3]|[0-1]?\d)/,Ht=/^(2[0-4]|[0-1]?\d)/,Vt=/^(1[0-1]|0?\d)/,Kt=/^(1[0-2]|0?\d)/,Yt=/^[0-5]?\d/,Gt=/^[0-5]?\d/,Qt=/^\d/,Zt=/^\d{1,2}/,Xt=/^\d{1,3}/,Jt=/^\d{1,4}/,$t=/^-?\d+/,en=/^-?\d/,tn=/^-?\d{1,2}/,nn=/^-?\d{1,3}/,rn=/^-?\d{1,4}/,on=/^([+-])(\d{2})(\d{2})?|Z/,an=/^([+-])(\d{2})(\d{2})|Z/,sn=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,ln=/^([+-])(\d{2}):(\d{2})|Z/,un=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function cn(e,t){return e?{value:t(e.value),rest:e.rest}:e}function dn(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function hn(e,t){const n=t.match(e);if(!n)return null;if("Z"===n[0])return{value:0,rest:t.slice(1)};const r="+"===n[1]?1:-1,i=n[2]?parseInt(n[2],10):0,o=n[3]?parseInt(n[3],10):0,a=n[5]?parseInt(n[5],10):0;return{value:r*(i*Je+o*Xe+1e3*a),rest:t.slice(n[0].length)}}function pn(e){return dn($t,e)}function mn(e,t){switch(e){case 1:return dn(Qt,t);case 2:return dn(Zt,t);case 3:return dn(Xt,t);case 4:return dn(Jt,t);default:return dn(new RegExp("^\\d{1,"+e+"}"),t)}}function fn(e,t){switch(e){case 1:return dn(en,t);case 2:return dn(tn,t);case 3:return dn(nn,t);case 4:return dn(rn,t);default:return dn(new RegExp("^-?\\d{1,"+e+"}"),t)}}function gn(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function yn(e,t){const n=t>0,r=n?t:1-t;let i;if(r<=50)i=e||100;else{const t=r+50;i=e+100*Math.trunc(t/100)-(e>=t%100?100:0)}return n?i:1-i}function vn(e){return e%400===0||e%4===0&&e%100!==0}function bn(e,t){var n,r,i,o,a,s;const l=_t(),u=null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:l.weekStartsOn)&&void 0!==r?r:null===(s=l.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==n?n:0,c=tt(e,null===t||void 0===t?void 0:t.in),d=c.getDay(),h=(d<u?7:0)+d-u;return c.setDate(c.getDate()-h),c.setHours(0,0,0,0),c}function wn(e,t){var n,r,i,o,a,s;const l=tt(e,null===t||void 0===t?void 0:t.in),u=l.getFullYear(),c=_t(),d=null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:c.firstWeekContainsDate)&&void 0!==r?r:null===(s=c.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==n?n:1,h=et((null===t||void 0===t?void 0:t.in)||e,0);h.setFullYear(u+1,0,d),h.setHours(0,0,0,0);const p=bn(h,t),m=et((null===t||void 0===t?void 0:t.in)||e,0);m.setFullYear(u,0,d),m.setHours(0,0,0,0);const f=bn(m,t);return+l>=+p?u+1:+l>=+f?u:u-1}function Dn(e,t){return bn(e,(0,u.A)((0,u.A)({},t),{},{weekStartsOn:1}))}function kn(e,t){var n,r,i,o,a,s;const l=_t(),u=null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:l.firstWeekContainsDate)&&void 0!==r?r:null===(s=l.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==n?n:1,c=wn(e,t),d=et((null===t||void 0===t?void 0:t.in)||e,0);d.setFullYear(c,0,u),d.setHours(0,0,0,0);return bn(d,t)}function xn(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in),r=+bn(n,t)-+kn(n,t);return Math.round(r/Ze)+1}function En(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in),i=xn(r,n)-t;return r.setDate(r.getDate()-7*i),tt(r,null===n||void 0===n?void 0:n.in)}function Sn(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in),r=n.getFullYear(),i=et(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const o=Dn(i),a=et(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const s=Dn(a);return n.getTime()>=o.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function Cn(e,t){const n=Sn(e,t),r=et((null===t||void 0===t?void 0:t.in)||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Dn(r)}function An(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in),r=+Dn(n)-+Cn(n);return Math.round(r/Ze)+1}function Tn(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in),i=An(r,n)-t;return r.setDate(r.getDate()-7*i),r}const Fn=[31,28,31,30,31,30,31,31,30,31,30,31],Rn=[31,29,31,30,31,30,31,31,30,31,30,31];function _n(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in);return isNaN(t)?et((null===n||void 0===n?void 0:n.in)||e,NaN):t?(r.setDate(r.getDate()+t),r):r}function In(e,t,n){var r,i,o,a,s,l;const u=_t(),c=null!==(r=null!==(i=null!==(o=null!==(a=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==a?a:null===n||void 0===n||null===(s=n.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==o?o:u.weekStartsOn)&&void 0!==i?i:null===(l=u.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==r?r:0,d=tt(e,null===n||void 0===n?void 0:n.in),h=d.getDay(),p=7-c;return _n(d,t<0||t>6?t-(h+p)%7:((t%7+7)%7+p)%7-(h+p)%7,n)}function Pn(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in).getDay();return 0===n?7:n}function Mn(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in);return _n(r,t-Pn(r,n),n)}function Nn(e){const t=tt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}const jn={G:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",140),(0,Pt.A)(this,"incompatibleTokens",["R","u","t","T"])}parse(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,t,n){return t.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}},y:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",130),(0,Pt.A)(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,t,n){const r=e=>({year:e,isTwoDigitYear:"yy"===t});switch(t){case"y":return cn(mn(4,e),r);case"yo":return cn(n.ordinalNumber(e,{unit:"year"}),r);default:return cn(mn(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n){const r=e.getFullYear();if(n.isTwoDigitYear){const t=yn(n.year,r);return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}const i="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}},Y:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",130),(0,Pt.A)(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,t,n){const r=e=>({year:e,isTwoDigitYear:"YY"===t});switch(t){case"Y":return cn(mn(4,e),r);case"Yo":return cn(n.ordinalNumber(e,{unit:"year"}),r);default:return cn(mn(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n,r){const i=wn(e,r);if(n.isTwoDigitYear){const t=yn(n.year,i);return e.setFullYear(t,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),bn(e,r)}const o="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(o,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),bn(e,r)}},R:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",130),(0,Pt.A)(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,t){return fn("R"===t?4:t.length,e)}set(e,t,n){const r=et(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Dn(r)}},u:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",130),(0,Pt.A)(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,t){return fn("u"===t?4:t.length,e)}set(e,t,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}},Q:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",120),(0,Pt.A)(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"Q":case"QQ":return mn(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}},q:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",120),(0,Pt.A)(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"q":case"qq":return mn(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}},M:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),(0,Pt.A)(this,"priority",110)}parse(e,t,n){const r=e=>e-1;switch(t){case"M":return cn(dn(Lt,e),r);case"MM":return cn(mn(2,e),r);case"Mo":return cn(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}},L:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",110),(0,Pt.A)(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,t,n){const r=e=>e-1;switch(t){case"L":return cn(dn(Lt,e),r);case"LL":return cn(mn(2,e),r);case"Lo":return cn(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}},w:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",100),(0,Pt.A)(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,t,n){switch(t){case"w":return dn(Ut,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return mn(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n,r){return bn(En(e,n,r),r)}},I:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",100),(0,Pt.A)(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,t,n){switch(t){case"I":return dn(Ut,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return mn(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n){return Dn(Tn(e,n))}},d:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",90),(0,Pt.A)(this,"subPriority",1),(0,Pt.A)(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"d":return dn(Wt,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return mn(t.length,e)}}validate(e,t){const n=vn(e.getFullYear()),r=e.getMonth();return n?t>=1&&t<=Rn[r]:t>=1&&t<=Fn[r]}set(e,t,n){return e.setDate(n),e.setHours(0,0,0,0),e}},D:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",90),(0,Pt.A)(this,"subpriority",1),(0,Pt.A)(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,t,n){switch(t){case"D":case"DD":return dn(qt,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return mn(t.length,e)}}validate(e,t){return vn(e.getFullYear())?t>=1&&t<=366:t>=1&&t<=365}set(e,t,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}},E:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",90),(0,Pt.A)(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=In(e,n,r)).setHours(0,0,0,0),e}},e:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",90),(0,Pt.A)(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,t,n,r){const i=e=>{const t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return cn(mn(t.length,e),i);case"eo":return cn(n.ordinalNumber(e,{unit:"day"}),i);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=In(e,n,r)).setHours(0,0,0,0),e}},c:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",90),(0,Pt.A)(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,t,n,r){const i=e=>{const t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return cn(mn(t.length,e),i);case"co":return cn(n.ordinalNumber(e,{unit:"day"}),i);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=In(e,n,r)).setHours(0,0,0,0),e}},i:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",90),(0,Pt.A)(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,t,n){const r=e=>0===e?7:e;switch(t){case"i":case"ii":return mn(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return cn(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return cn(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return cn(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return cn(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,t){return t>=1&&t<=7}set(e,t,n){return(e=Mn(e,n)).setHours(0,0,0,0),e}},a:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",80),(0,Pt.A)(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(gn(n),0,0,0),e}},b:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",80),(0,Pt.A)(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(gn(n),0,0,0),e}},B:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",80),(0,Pt.A)(this,"incompatibleTokens",["a","b","t","T"])}parse(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(gn(n),0,0,0),e}},h:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",70),(0,Pt.A)(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,t,n){switch(t){case"h":return dn(Kt,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return mn(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,n){const r=e.getHours()>=12;return r&&n<12?e.setHours(n+12,0,0,0):r||12!==n?e.setHours(n,0,0,0):e.setHours(0,0,0,0),e}},H:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",70),(0,Pt.A)(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,t,n){switch(t){case"H":return dn(zt,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return mn(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,n){return e.setHours(n,0,0,0),e}},K:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",70),(0,Pt.A)(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,t,n){switch(t){case"K":return dn(Vt,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return mn(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}},k:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",70),(0,Pt.A)(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,t,n){switch(t){case"k":return dn(Ht,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return mn(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,n){const r=n<=24?n%24:n;return e.setHours(r,0,0,0),e}},m:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",60),(0,Pt.A)(this,"incompatibleTokens",["t","T"])}parse(e,t,n){switch(t){case"m":return dn(Yt,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return mn(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setMinutes(n,0,0),e}},s:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",50),(0,Pt.A)(this,"incompatibleTokens",["t","T"])}parse(e,t,n){switch(t){case"s":return dn(Gt,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return mn(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setSeconds(n,0),e}},S:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",30),(0,Pt.A)(this,"incompatibleTokens",["t","T"])}parse(e,t){return cn(mn(t.length,e),e=>Math.trunc(e*Math.pow(10,3-t.length)))}set(e,t,n){return e.setMilliseconds(n),e}},X:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",10),(0,Pt.A)(this,"incompatibleTokens",["t","T","x"])}parse(e,t){switch(t){case"X":return hn(on,e);case"XX":return hn(an,e);case"XXXX":return hn(sn,e);case"XXXXX":return hn(un,e);default:return hn(ln,e)}}set(e,t,n){return t.timestampIsSet?e:et(e,e.getTime()-Nn(e)-n)}},x:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",10),(0,Pt.A)(this,"incompatibleTokens",["t","T","X"])}parse(e,t){switch(t){case"x":return hn(on,e);case"xx":return hn(an,e);case"xxxx":return hn(sn,e);case"xxxxx":return hn(un,e);default:return hn(ln,e)}}set(e,t,n){return t.timestampIsSet?e:et(e,e.getTime()-Nn(e)-n)}},t:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",40),(0,Pt.A)(this,"incompatibleTokens","*")}parse(e){return pn(e)}set(e,t,n){return[et(e,1e3*n),{timestampIsSet:!0}]}},T:new class extends Ot{constructor(){super(...arguments),(0,Pt.A)(this,"priority",20),(0,Pt.A)(this,"incompatibleTokens","*")}parse(e){return pn(e)}set(e,t,n){return[et(e,n),{timestampIsSet:!0}]}}},Bn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,On=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ln=/^'([^]*?)'?$/,Wn=/''/g,qn=/\S/,Un=/[a-zA-Z]/;function zn(e,t,n,r){var i,o,a,s,l,u,c,d,h,p,m,f,g,y;const v=()=>et((null===r||void 0===r?void 0:r.in)||n,NaN),b=It(),w=null!==(i=null!==(o=null===r||void 0===r?void 0:r.locale)&&void 0!==o?o:b.locale)&&void 0!==i?i:wt,D=null!==(a=null!==(s=null!==(l=null!==(u=null===r||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==u?u:null===r||void 0===r||null===(c=r.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==l?l:b.firstWeekContainsDate)&&void 0!==s?s:null===(d=b.locale)||void 0===d||null===(d=d.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==a?a:1,k=null!==(h=null!==(p=null!==(m=null!==(f=null===r||void 0===r?void 0:r.weekStartsOn)&&void 0!==f?f:null===r||void 0===r||null===(g=r.locale)||void 0===g||null===(g=g.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==m?m:b.weekStartsOn)&&void 0!==p?p:null===(y=b.locale)||void 0===y||null===(y=y.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==h?h:0;if(!t)return e?v():tt(n,null===r||void 0===r?void 0:r.in);const x={firstWeekContainsDate:D,weekStartsOn:k,locale:w},E=[new Bt(null===r||void 0===r?void 0:r.in,n)],S=t.match(On).map(e=>{const t=e[0];if(t in xt){return(0,xt[t])(e,w.formatLong)}return e}).join("").match(Bn),C=[];for(let R of S){null!==r&&void 0!==r&&r.useAdditionalWeekYearTokens||!Tt(R)||Ft(R,t,e),null!==r&&void 0!==r&&r.useAdditionalDayOfYearTokens||!At(R)||Ft(R,t,e);const n=R[0],i=jn[n];if(i){const{incompatibleTokens:t}=i;if(Array.isArray(t)){const e=C.find(e=>t.includes(e.token)||e.token===n);if(e)throw new RangeError("The format string mustn't contain `".concat(e.fullToken,"` and `").concat(R,"` at the same time"))}else if("*"===i.incompatibleTokens&&C.length>0)throw new RangeError("The format string mustn't contain `".concat(R,"` and any other token at the same time"));C.push({token:n,fullToken:R});const r=i.run(e,R,w.match,x);if(!r)return v();E.push(r.setter),e=r.rest}else{if(n.match(Un))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===R?R="'":"'"===n&&(R=Hn(R)),0!==e.indexOf(R))return v();e=e.slice(R.length)}}if(e.length>0&&qn.test(e))return v();const A=E.map(e=>e.priority).sort((e,t)=>t-e).filter((e,t,n)=>n.indexOf(e)===t).map(e=>E.filter(t=>t.priority===e).sort((e,t)=>t.subPriority-e.subPriority)).map(e=>e[0]);let T=tt(n,null===r||void 0===r?void 0:r.in);if(isNaN(+T))return v();const F={};for(const R of A){if(!R.validate(T,x))return v();const e=R.set(T,F,x);Array.isArray(e)?(T=e[0],Object.assign(F,e[1])):T=e}return T}function Hn(e){return e.match(Ln)[1].replace(Wn,"'")}function Vn(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function Kn(e){return!(!Vn(e)&&"number"!==typeof e||isNaN(+tt(e)))}function Yn(e,t){return+tt(e)<+tt(t)}function Gn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=et.bind(null,e||n.find(e=>"object"===typeof e));return n.map(i)}function Qn(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in);return n.setHours(0,0,0,0),n}function Zn(e,t,n){const[r,i]=Gn(null===n||void 0===n?void 0:n.in,e,t),o=Qn(r),a=Qn(i),s=+o-Nn(o),l=+a-Nn(a);return Math.round((s-l)/864e5)}function Xn(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Jn(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in);return Zn(n,Xn(n))+1}function $n(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const er={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return $n("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):$n(n+1,2)},d:(e,t)=>$n(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>$n(e.getHours()%12||12,t.length),H:(e,t)=>$n(e.getHours(),t.length),m:(e,t)=>$n(e.getMinutes(),t.length),s:(e,t)=>$n(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return $n(Math.trunc(r*Math.pow(10,n-3)),t.length)}},tr="midnight",nr="noon",rr="morning",ir="afternoon",or="evening",ar="night",sr={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return er.y(e,t)},Y:function(e,t,n,r){const i=wn(e,r),o=i>0?i:1-i;if("YY"===t){return $n(o%100,2)}return"Yo"===t?n.ordinalNumber(o,{unit:"year"}):$n(o,t.length)},R:function(e,t){return $n(Sn(e),t.length)},u:function(e,t){return $n(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return $n(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return $n(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return er.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return $n(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=xn(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):$n(i,t.length)},I:function(e,t,n){const r=An(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):$n(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):er.d(e,t)},D:function(e,t,n){const r=Jn(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):$n(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return $n(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return $n(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return $n(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(i=12===r?nr:0===r?tr:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(i=r>=17?or:r>=12?ir:r>=4?rr:ar,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return er.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):er.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):$n(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):$n(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):er.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):er.s(e,t)},S:function(e,t){return er.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return ur(r);case"XXXX":case"XX":return cr(r);default:return cr(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return ur(r);case"xxxx":case"xx":return cr(r);default:return cr(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+lr(r,":");default:return"GMT"+cr(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+lr(r,":");default:return"GMT"+cr(r,":")}},t:function(e,t,n){return $n(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return $n(+e,t.length)}};function lr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),o=r%60;return 0===o?n+String(i):n+String(i)+t+$n(o,2)}function ur(e,t){if(e%60===0){return(e>0?"-":"+")+$n(Math.abs(e)/60,2)}return cr(e,t)}function cr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e);return n+$n(Math.trunc(r/60),2)+t+$n(r%60,2)}const dr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,pr=/^'([^]*?)'?$/,mr=/''/g,fr=/[a-zA-Z]/;function gr(e,t,n){var r,i,o,a,s,l,u,c,d,h,p,m,f,g;const y=_t(),v=null!==(r=null!==(i=null===n||void 0===n?void 0:n.locale)&&void 0!==i?i:y.locale)&&void 0!==r?r:wt,b=null!==(o=null!==(a=null!==(s=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(u=n.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==s?s:y.firstWeekContainsDate)&&void 0!==a?a:null===(c=y.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==o?o:1,w=null!==(d=null!==(h=null!==(p=null!==(m=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==m?m:null===n||void 0===n||null===(f=n.locale)||void 0===f||null===(f=f.options)||void 0===f?void 0:f.weekStartsOn)&&void 0!==p?p:y.weekStartsOn)&&void 0!==h?h:null===(g=y.locale)||void 0===g||null===(g=g.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==d?d:0,D=tt(e,null===n||void 0===n?void 0:n.in);if(!Kn(D))throw new RangeError("Invalid time value");let k=t.match(hr).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,xt[t])(e,v.formatLong)}return e}).join("").match(dr).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:yr(e)};if(sr[t])return{isToken:!0,value:e};if(t.match(fr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});v.localize.preprocessor&&(k=v.localize.preprocessor(D,k));const x={firstWeekContainsDate:b,weekStartsOn:w,locale:v};return k.map(r=>{if(!r.isToken)return r.value;const i=r.value;(null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!Tt(i))&&(null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!At(i))||Ft(i,t,String(e));return(0,sr[i[0]])(D,i,v.localize,x)}).join("")}function yr(e){const t=e.match(pr);return t?t[1].replace(mr,"'"):e}function vr(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in);return r.setHours(t),r}function br(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in);return r.setMinutes(t),r}function wr(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in);return r.setSeconds(t),r}function Dr(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function kr(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in),r=n.getMonth(),i=r-r%3;return n.setMonth(i,1),n.setHours(0,0,0,0),n}function xr(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in);return n.setHours(23,59,59,999),n}function Er(e,t){var n,r,i,o,a,s;const l=_t(),u=null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:l.weekStartsOn)&&void 0!==r?r:null===(s=l.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==n?n:0,c=tt(e,null===t||void 0===t?void 0:t.in),d=c.getDay(),h=6+(d<u?-7:0)-(d-u);return c.setDate(c.getDate()+h),c.setHours(23,59,59,999),c}function Sr(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Cr(e,t,n){const[r,i]=Gn(null===n||void 0===n?void 0:n.in,e,t);return r.getFullYear()===i.getFullYear()}function Ar(e,t,n){const[r,i]=Gn(null===n||void 0===n?void 0:n.in,e,t);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function Tr(e,t,n){const[r,i]=Gn(null===n||void 0===n?void 0:n.in,e,t);return+kr(r)===+kr(i)}function Fr(e,t,n){const[r,i]=Gn(null===n||void 0===n?void 0:n.in,e,t);return+Qn(r)===+Qn(i)}function Rr(e,t){return+tt(e)===+tt(t)}function _r(e,t,n){const r=+tt(e,null===n||void 0===n?void 0:n.in),[i,o]=[+tt(t.start,null===n||void 0===n?void 0:n.in),+tt(t.end,null===n||void 0===n?void 0:n.in)].sort((e,t)=>e-t);return r>=i&&r<=o}function Ir(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in),r=n.getFullYear(),i=n.getMonth(),o=et(n,0);return o.setFullYear(r,i+1,0),o.setHours(0,0,0,0),o.getDate()}function Pr(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in),i=r.getFullYear(),o=r.getDate(),a=et((null===n||void 0===n?void 0:n.in)||e,0);a.setFullYear(i,t,15),a.setHours(0,0,0,0);const s=Ir(a);return r.setMonth(t,Math.min(o,s)),r}function Mr(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in),i=t-(Math.trunc(r.getMonth()/3)+1);return Pr(r,r.getMonth()+3*i)}function Nr(e,t){return tt(e,null===t||void 0===t?void 0:t.in).getFullYear()}function jr(e,t){return tt(e,null===t||void 0===t?void 0:t.in).getMonth()}function Br(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function Or(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in);return Math.trunc(n.getMonth()/3)+1}function Lr(e,t){return tt(e,null===t||void 0===t?void 0:t.in).getHours()}function Wr(e,t){return tt(e,null===t||void 0===t?void 0:t.in).getMinutes()}function qr(e){return tt(e).getSeconds()}function Ur(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in);if(isNaN(t))return et((null===n||void 0===n?void 0:n.in)||e,NaN);if(!t)return r;const i=r.getDate(),o=et((null===n||void 0===n?void 0:n.in)||e,r.getTime());o.setMonth(r.getMonth()+t+1,0);return i>=o.getDate()?o:(r.setFullYear(o.getFullYear(),o.getMonth(),i),r)}function zr(e,t,n){return Ur(e,-t,n)}function Hr(e,t,n){const[r,i]=Gn(null===n||void 0===n?void 0:n.in,e,t);return 12*(r.getFullYear()-i.getFullYear())+(r.getMonth()-i.getMonth())}function Vr(e,t,n){return Ur(e,3*t,n)}function Kr(e,t,n){return Vr(e,-t,n)}function Yr(e,t,n){const[r,i]=Gn(null===n||void 0===n?void 0:n.in,e,t);return 4*(r.getFullYear()-i.getFullYear())+(Or(r)-Or(i))}function Gr(e,t,n){return Ur(e,12*t,n)}function Qr(e,t,n){return Gr(e,-t,n)}function Zr(e,t,n){const[r,i]=Gn(null===n||void 0===n?void 0:n.in,e,t);return r.getFullYear()-i.getFullYear()}function Xr(e,t){let n,r=null===t||void 0===t?void 0:t.in;return e.forEach(e=>{r||"object"!==typeof e||(r=et.bind(null,e));const t=tt(e,r);(!n||n>t||isNaN(+t))&&(n=t)}),et(r,n||NaN)}function Jr(e,t){let n,r=null===t||void 0===t?void 0:t.in;return e.forEach(e=>{r||"object"!==typeof e||(r=et.bind(null,e));const t=tt(e,r);(!n||n<t||isNaN(+t))&&(n=t)}),et(r,n||NaN)}function $r(e,t,n){return et((null===n||void 0===n?void 0:n.in)||e,+tt(e)+t)}function ei(e,t,n){return $r(e,t*Je,n)}function ti(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in);return r.setTime(r.getTime()+t*Xe),r}function ni(e,t,n){return $r(e,1e3*t,n)}function ri(e,t){return+tt(e)>+tt(t)}function ii(e,t){return tt(e,null===t||void 0===t?void 0:t.in).getDay()}function oi(e,t){return tt(e,null===t||void 0===t?void 0:t.in).getDate()}function ai(e,t,n){return _n(e,7*t,n)}function si(e){return+tt(e)}function li(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in);return isNaN(+r)?et((null===n||void 0===n?void 0:n.in)||e,NaN):(r.setFullYear(t),r)}function ui(e,t,n){const[r,i]=Gn(null===n||void 0===n?void 0:n.in,e,t),o=ci(r,i),a=Math.abs(Zn(r,i));r.setDate(r.getDate()-o*a);const s=o*(a-Number(ci(r,i)===-o));return 0===s?0:s}function ci(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function di(e,t,n){return ai(e,-t,n)}function hi(e,t,n){return _n(e,-t,n)}var pi=n(986);var mi="undefined"!==typeof document?a.useLayoutEffect:function(){};const fi=(0,u.A)({},s).useInsertionEffect||(e=>e());function gi(){return"undefined"!==typeof window}function yi(e){return wi(e)?(e.nodeName||"").toLowerCase():"#document"}function vi(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function bi(e){var t;return null==(t=(wi(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function wi(e){return!!gi()&&(e instanceof Node||e instanceof vi(e).Node)}function Di(e){return!!gi()&&(e instanceof Element||e instanceof vi(e).Element)}function ki(e){return!!gi()&&(e instanceof HTMLElement||e instanceof vi(e).HTMLElement)}function xi(e){return!(!gi()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof vi(e).ShadowRoot)}const Ei=new Set(["inline","contents"]);function Si(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Bi(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Ei.has(i)}const Ci=new Set(["table","td","th"]);function Ai(e){return Ci.has(yi(e))}const Ti=[":popover-open",":modal"];function Fi(e){return Ti.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const Ri=["transform","translate","scale","rotate","perspective"],_i=["transform","translate","scale","rotate","perspective","filter"],Ii=["paint","layout","strict","content"];function Pi(e){const t=Mi(),n=Di(e)?Bi(e):e;return Ri.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||_i.some(e=>(n.willChange||"").includes(e))||Ii.some(e=>(n.contain||"").includes(e))}function Mi(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const Ni=new Set(["html","body","#document"]);function ji(e){return Ni.has(yi(e))}function Bi(e){return vi(e).getComputedStyle(e)}function Oi(e){return Di(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Li(e){if("html"===yi(e))return e;const t=e.assignedSlot||e.parentNode||xi(e)&&e.host||bi(e);return xi(t)?t.host:t}function Wi(e){const t=Li(e);return ji(t)?e.ownerDocument?e.ownerDocument.body:e.body:ki(t)&&Si(t)?t:Wi(t)}function qi(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=Wi(e),o=i===(null==(r=e.ownerDocument)?void 0:r.body),a=vi(i);if(o){const e=Ui(a);return t.concat(a,a.visualViewport||[],Si(i)?i:[],e&&n?qi(e):[])}return t.concat(i,qi(i,[],n))}function Ui(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const zi=Math.min,Hi=Math.max,Vi=Math.round,Ki=Math.floor,Yi=e=>({x:e,y:e}),Gi={left:"right",right:"left",bottom:"top",top:"bottom"},Qi={start:"end",end:"start"};function Zi(e,t){return"function"===typeof e?e(t):e}function Xi(e){return e.split("-")[0]}function Ji(e){return e.split("-")[1]}function $i(e){return"y"===e?"height":"width"}const eo=new Set(["top","bottom"]);function to(e){return eo.has(Xi(e))?"y":"x"}function no(e){return"x"===to(e)?"y":"x"}function ro(e){return e.replace(/start|end/g,e=>Qi[e])}const io=["left","right"],oo=["right","left"],ao=["top","bottom"],so=["bottom","top"];function lo(e,t,n,r){const i=Ji(e);let o=function(e,t,n){switch(e){case"top":case"bottom":return n?t?oo:io:t?io:oo;case"left":case"right":return t?ao:so;default:return[]}}(Xi(e),"start"===n,r);return i&&(o=o.map(e=>e+"-"+i),t&&(o=o.concat(o.map(ro)))),o}function uo(e){return e.replace(/left|right|bottom|top/g,e=>Gi[e])}function co(e){return"number"!==typeof e?function(e){return(0,u.A)({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function ho(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}const po=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"];function mo(e,t,n){let{reference:r,floating:i}=e;const o=to(t),a=no(t),s=$i(a),l=Xi(t),u="y"===o,c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[s]/2-i[s]/2;let p;switch(l){case"top":p={x:c,y:r.y-i.height};break;case"bottom":p={x:c,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(Ji(t)){case"start":p[a]-=h*(n&&u?-1:1);break;case"end":p[a]+=h*(n&&u?-1:1)}return p}async function fo(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:o,rects:a,elements:s,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=Zi(t,e),m=co(p),f=s[h?"floating"===d?"reference":"floating":d],g=ho(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(f)))||n?f:f.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(s.floating)),boundary:u,rootBoundary:c,strategy:l})),y="floating"===d?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,v=await(null==o.getOffsetParent?void 0:o.getOffsetParent(s.floating)),b=await(null==o.isElement?void 0:o.isElement(v))&&await(null==o.getScale?void 0:o.getScale(v))||{x:1,y:1},w=ho(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:y,offsetParent:v,strategy:l}):y);return{top:(g.top-w.top+m.top)/b.y,bottom:(w.bottom-g.bottom+m.bottom)/b.y,left:(g.left-w.left+m.left)/b.x,right:(w.right-g.right+m.right)/b.x}}const go=new Set(["left","top"]);function yo(e){const t=Bi(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=ki(e),o=i?e.offsetWidth:n,a=i?e.offsetHeight:r,s=Vi(n)!==o||Vi(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}function vo(e){return Di(e)?e:e.contextElement}function bo(e){const t=vo(e);if(!ki(t))return Yi(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=yo(t);let a=(o?Vi(n.width):n.width)/r,s=(o?Vi(n.height):n.height)/i;return a&&Number.isFinite(a)||(a=1),s&&Number.isFinite(s)||(s=1),{x:a,y:s}}const wo=Yi(0);function Do(e){const t=vi(e);return Mi()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:wo}function ko(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),o=vo(e);let a=Yi(1);t&&(r?Di(r)&&(a=bo(r)):a=bo(e));const s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==vi(e))&&t}(o,n,r)?Do(o):Yi(0);let l=(i.left+s.x)/a.x,u=(i.top+s.y)/a.y,c=i.width/a.x,d=i.height/a.y;if(o){const e=vi(o),t=r&&Di(r)?vi(r):r;let n=e,i=Ui(n);for(;i&&r&&t!==n;){const e=bo(i),t=i.getBoundingClientRect(),r=Bi(i),o=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,a=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,u*=e.y,c*=e.x,d*=e.y,l+=o,u+=a,n=vi(i),i=Ui(n)}}return ho({width:c,height:d,x:l,y:u})}function xo(e,t){const n=Oi(e).scrollLeft;return t?t.left+n:ko(bi(e)).left+n}function Eo(e,t){const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-xo(e,n),y:n.top+t.scrollTop}}const So=new Set(["absolute","fixed"]);function Co(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=vi(e),r=bi(e),i=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;const e=Mi();(!e||e&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}const u=xo(r);if(u<=0){const e=r.ownerDocument,t=e.body,n=getComputedStyle(t),i="CSS1Compat"===e.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,a=Math.abs(r.clientWidth-t.clientWidth-i);a<=25&&(o-=a)}else u<=25&&(o+=u);return{width:o,height:a,x:s,y:l}}(e,n);else if("document"===t)r=function(e){const t=bi(e),n=Oi(e),r=e.ownerDocument.body,i=Hi(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Hi(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+xo(e);const s=-n.scrollTop;return"rtl"===Bi(r).direction&&(a+=Hi(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:s}}(bi(e));else if(Di(t))r=function(e,t){const n=ko(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=ki(e)?bo(e):Yi(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:i*o.x,y:r*o.y}}(t,n);else{const n=Do(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return ho(r)}function Ao(e,t){const n=Li(e);return!(n===t||!Di(n)||ji(n))&&("fixed"===Bi(n).position||Ao(n,t))}function To(e,t,n){const r=ki(t),i=bi(t),o="fixed"===n,a=ko(e,!0,o,t);let s={scrollLeft:0,scrollTop:0};const l=Yi(0);function u(){l.x=xo(i)}if(r||!r&&!o)if(("body"!==yi(t)||Si(i))&&(s=Oi(t)),r){const e=ko(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&u();o&&!r&&i&&u();const c=!i||r||o?Yi(0):Eo(i,s);return{x:a.left+s.scrollLeft-l.x-c.x,y:a.top+s.scrollTop-l.y-c.y,width:a.width,height:a.height}}function Fo(e){return"static"===Bi(e).position}function Ro(e,t){if(!ki(e)||"fixed"===Bi(e).position)return null;if(t)return t(e);let n=e.offsetParent;return bi(e)===n&&(n=n.ownerDocument.body),n}function _o(e,t){const n=vi(e);if(Fi(e))return n;if(!ki(e)){let t=Li(e);for(;t&&!ji(t);){if(Di(t)&&!Fo(t))return t;t=Li(t)}return n}let r=Ro(e,t);for(;r&&Ai(r)&&Fo(r);)r=Ro(r,t);return r&&ji(r)&&Fo(r)&&!Pi(r)?n:r||function(e){let t=Li(e);for(;ki(t)&&!ji(t);){if(Pi(t))return t;if(Fi(t))return null;t=Li(t)}return null}(e)||n}const Io={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o="fixed"===i,a=bi(r),s=!!t&&Fi(t.floating);if(r===a||s&&o)return n;let l={scrollLeft:0,scrollTop:0},u=Yi(1);const c=Yi(0),d=ki(r);if((d||!d&&!o)&&(("body"!==yi(r)||Si(a))&&(l=Oi(r)),ki(r))){const e=ko(r);u=bo(r),c.x=e.x+r.clientLeft,c.y=e.y+r.clientTop}const h=!a||d||o?Yi(0):Eo(a,l);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+h.x,y:n.y*u.y-l.scrollTop*u.y+c.y+h.y}},getDocumentElement:bi,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[..."clippingAncestors"===n?Fi(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=qi(e,[],!1).filter(e=>Di(e)&&"body"!==yi(e)),i=null;const o="fixed"===Bi(e).position;let a=o?Li(e):e;for(;Di(a)&&!ji(a);){const t=Bi(a),n=Pi(a);n||"fixed"!==t.position||(i=null),(o?!n&&!i:!n&&"static"===t.position&&i&&So.has(i.position)||Si(a)&&!n&&Ao(e,a))?r=r.filter(e=>e!==a):i=t,a=Li(a)}return t.set(e,r),r}(t,this._c):[].concat(n),r],a=o[0],s=o.reduce((e,n)=>{const r=Co(t,n,i);return e.top=Hi(r.top,e.top),e.right=zi(r.right,e.right),e.bottom=zi(r.bottom,e.bottom),e.left=Hi(r.left,e.left),e},Co(t,a,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:_o,getElementRects:async function(e){const t=this.getOffsetParent||_o,n=this.getDimensions,r=await n(e.floating);return{reference:To(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=yo(e);return{width:t,height:n}},getScale:bo,isElement:Di,isRTL:function(e){return"rtl"===Bi(e).direction}};function Po(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Mo(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a="function"===typeof ResizeObserver,layoutShift:s="function"===typeof IntersectionObserver,animationFrame:l=!1}=r,c=vo(e),d=i||o?[...c?qi(c):[],...qi(t)]:[];d.forEach(e=>{i&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)});const h=c&&s?function(e,t){let n,r=null;const i=bi(e);function o(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function a(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),o();const c=e.getBoundingClientRect(),{left:d,top:h,width:p,height:m}=c;if(s||t(),!p||!m)return;const f={rootMargin:-Ki(h)+"px "+-Ki(i.clientWidth-(d+p))+"px "+-Ki(i.clientHeight-(h+m))+"px "+-Ki(d)+"px",threshold:Hi(0,zi(1,l))||1};let g=!0;function y(t){const r=t[0].intersectionRatio;if(r!==l){if(!g)return a();r?a(!1,r):n=setTimeout(()=>{a(!1,1e-7)},1e3)}1!==r||Po(c,e.getBoundingClientRect())||a(),g=!1}try{r=new IntersectionObserver(y,(0,u.A)((0,u.A)({},f),{},{root:i.ownerDocument}))}catch(v){r=new IntersectionObserver(y,f)}r.observe(e)}(!0),o}(c,n):null;let p,m=-1,f=null;a&&(f=new ResizeObserver(e=>{let[r]=e;r&&r.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var e;null==(e=f)||e.observe(t)})),n()}),c&&!l&&f.observe(c),f.observe(t));let g=l?ko(e):null;return l&&function t(){const r=ko(e);g&&!Po(g,r)&&n();g=r,p=requestAnimationFrame(t)}(),n(),()=>{var e;d.forEach(e=>{i&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)}),null==h||h(),null==(e=f)||e.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const No=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:a,middlewareData:s}=t,l=await async function(e,t){const{placement:n,platform:r,elements:i}=e,o=await(null==r.isRTL?void 0:r.isRTL(i.floating)),a=Xi(n),s=Ji(n),l="y"===to(n),u=go.has(a)?-1:1,c=o&&l?-1:1,d=Zi(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:m}="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&"number"===typeof m&&(p="end"===s?-1*m:m),l?{x:p*c,y:h*u}:{x:h*u,y:p*c}}(t,e);return a===(null==(n=s.offset)?void 0:n.placement)&&null!=(r=s.arrow)&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:(0,u.A)((0,u.A)({},l),{},{placement:a})}}}},jo=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:l,elements:u}=t,c=Zi(e,t),{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:g=!0}=c,y=(0,pi.A)(c,po);if(null!=(n=o.arrow)&&n.alignmentOffset)return{};const v=Xi(i),b=to(s),w=Xi(s)===s,D=await(null==l.isRTL?void 0:l.isRTL(u.floating)),k=p||(w||!g?[uo(s)]:function(e){const t=uo(e);return[ro(e),t,ro(t)]}(s)),x="none"!==f;!p&&x&&k.push(...lo(s,g,f,D));const E=[s,...k],S=await fo(t,y),C=[];let A=(null==(r=o.flip)?void 0:r.overflows)||[];if(d&&C.push(S[v]),h){const e=function(e,t,n){void 0===n&&(n=!1);const r=Ji(e),i=no(e),o=$i(i);let a="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=uo(a)),[a,uo(a)]}(i,a,D);C.push(S[e[0]],S[e[1]])}if(A=[...A,{placement:i,overflows:C}],!C.every(e=>e<=0)){var T,F;const e=((null==(T=o.flip)?void 0:T.index)||0)+1,t=E[e];if(t){if(!("alignment"===h&&b!==to(t))||A.every(e=>to(e.placement)!==b||e.overflows[0]>0))return{data:{index:e,overflows:A},reset:{placement:t}}}let n=null==(F=A.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:F.placement;if(!n)switch(m){case"bestFit":{var R;const e=null==(R=A.filter(e=>{if(x){const t=to(e.placement);return t===b||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:R[0];e&&(n=e);break}case"initialPlacement":n=s}if(i!==n)return{reset:{placement:n}}}return{}}}},Bo=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:a,elements:s,middlewareData:l}=t,{element:c,padding:d=0}=Zi(e,t)||{};if(null==c)return{};const h=co(d),p={x:n,y:r},m=no(i),f=$i(m),g=await a.getDimensions(c),y="y"===m,v=y?"top":"left",b=y?"bottom":"right",w=y?"clientHeight":"clientWidth",D=o.reference[f]+o.reference[m]-p[m]-o.floating[f],k=p[m]-o.reference[m],x=await(null==a.getOffsetParent?void 0:a.getOffsetParent(c));let E=x?x[w]:0;E&&await(null==a.isElement?void 0:a.isElement(x))||(E=s.floating[w]||o.floating[f]);const S=D/2-k/2,C=E/2-g[f]/2-1,A=zi(h[v],C),T=zi(h[b],C),F=A,R=E-g[f]-T,_=E/2-g[f]/2+S,I=function(e,t,n){return Hi(e,zi(t,n))}(F,_,R),P=!l.arrow&&null!=Ji(i)&&_!==I&&o.reference[f]/2-(_<F?A:T)-g[f]/2<0,M=P?_<F?_-F:_-R:0;return{[m]:p[m]+M,data:(0,u.A)({[m]:I,centerOffset:_-I-M},P&&{alignmentOffset:M}),reset:P}}}),Oo=(e,t,n)=>{const r=new Map,i=(0,u.A)({platform:Io},n),o=(0,u.A)((0,u.A)({},i.platform),{},{_c:r});return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,s=o.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(t));let c=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:h}=mo(c,r,l),p=r,m={},f=0;for(let g=0;g<s.length;g++){const{name:n,fn:o}=s[g],{x:y,y:v,data:b,reset:w}=await o({x:d,y:h,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:c,platform:a,elements:{reference:e,floating:t}});d=null!=y?y:d,h=null!=v?v:h,m=(0,u.A)((0,u.A)({},m),{},{[n]:(0,u.A)((0,u.A)({},m[n]),b)}),w&&f<=50&&(f++,"object"===typeof w&&(w.placement&&(p=w.placement),w.rects&&(c=!0===w.rects?await a.getElementRects({reference:e,floating:t,strategy:i}):w.rects),({x:d,y:h}=mo(c,p,l))),g=-1)}return{x:d,y:h,placement:p,strategy:i,middlewareData:m}})(e,t,(0,u.A)((0,u.A)({},i),{},{platform:o}))};var Lo="undefined"!==typeof document?a.useLayoutEffect:function(){};function Wo(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!Wo(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){const n=i[r];if(("_owner"!==n||!e.$$typeof)&&!Wo(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function qo(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Uo(e,t){const n=qo(e);return Math.round(t*n)/n}function zo(e){const t=a.useRef(e);return Lo(()=>{t.current=e}),t}const Ho=(e,t)=>(0,u.A)((0,u.A)({},No(e)),{},{options:[e,t]}),Vo=(e,t)=>(0,u.A)((0,u.A)({},(e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"===typeof e?e(t):e;return n&&(i=n,{}.hasOwnProperty.call(i,"current"))?null!=n.current?Bo({element:n.current,padding:r}).fn(t):{}:n?Bo({element:n,padding:r}).fn(t):{};var i}}))(e)),{},{options:[e,t]}),Ko=["transform"],Yo=["context","width","height","tipRadius","strokeWidth","staticOffset","stroke","d","style"];const Go="ArrowLeft",Qo="ArrowRight",Zo="ArrowUp",Xo="ArrowDown";const Jo=[Go,Qo],$o=[Zo,Xo],ea=(0,u.A)({},s);let ta=!1,na=0;const ra=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+na++;const ia=ea.useId||function(){const[e,t]=a.useState(()=>ta?ra():void 0);return mi(()=>{null==e&&t(ra())},[]),a.useEffect(()=>{ta=!0},[]),e};const oa=a.forwardRef(function(e,t){const{context:{placement:n,elements:{floating:r},middlewareData:{arrow:i,shift:o}},width:s=14,height:l=7,tipRadius:c=0,strokeWidth:d=0,staticOffset:h,stroke:p,d:m,style:{transform:f}={}}=e,g=(0,pi.A)(e.style,Ko),y=(0,pi.A)(e,Yo);const v=ia(),[b,w]=a.useState(!1);if(mi(()=>{if(!r)return;"rtl"===Bi(r).direction&&w(!0)},[r]),!r)return null;const[D,k]=n.split("-"),x="top"===D||"bottom"===D;let E=h;(x&&null!=o&&o.x||!x&&null!=o&&o.y)&&(E=null);const S=2*d,C=S/2,A=s/2*(c/-8+1),T=l/2*c/4,F=!!m,R=E&&"end"===k?"bottom":"top";let _=E&&"end"===k?"right":"left";E&&b&&(_="end"===k?"left":"right");const I=null!=(null==i?void 0:i.x)?E||i.x:"",P=null!=(null==i?void 0:i.y)?E||i.y:"",M=m||"M0,0 H"+s+" L"+(s-A)+","+(l-T)+" Q"+s/2+","+l+" "+A+","+(l-T)+" Z",N={top:F?"rotate(180deg)":"",left:F?"rotate(90deg)":"rotate(-90deg)",bottom:F?"":"rotate(180deg)",right:F?"rotate(-90deg)":"rotate(90deg)"}[D];return(0,je.jsxs)("svg",(0,u.A)((0,u.A)({},y),{},{"aria-hidden":!0,ref:t,width:F?s:s+S,height:s,viewBox:"0 0 "+s+" "+(l>s?l:s),style:(0,u.A)({position:"absolute",pointerEvents:"none",[_]:I,[R]:P,[D]:x||F?"100%":"calc(100% - "+S/2+"px)",transform:[N,f].filter(e=>!!e).join(" ")},g),children:[S>0&&(0,je.jsx)("path",{clipPath:"url(#"+v+")",fill:"none",stroke:p,strokeWidth:S+(m?0:1),d:M}),(0,je.jsx)("path",{stroke:S&&!m?y.fill:"none",d:M}),(0,je.jsx)("clipPath",{id:v,children:(0,je.jsx)("rect",{x:-C,y:C*(F?-1:1),width:s+S,height:s})})]}))});function aa(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach(e=>e(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;null==(r=e.get(t))||r.delete(n)}}}const sa=a.createContext(null),la=a.createContext(null),ua=()=>{var e;return(null==(e=a.useContext(sa))?void 0:e.id)||null},ca=()=>a.useContext(la);function da(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=ia(),o=a.useRef({}),[s]=a.useState(()=>aa()),l=null!=ua();const[u,c]=a.useState(r.reference),d=function(e){const t=a.useRef(()=>{});return fi(()=>{t.current=e}),a.useCallback(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}((e,t,r)=>{o.current.openEvent=e?t:void 0,s.emit("openchange",{open:e,event:t,reason:r,nested:l}),null==n||n(e,t,r)}),h=a.useMemo(()=>({setPositionReference:c}),[]),p=a.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return a.useMemo(()=>({dataRef:o,open:t,onOpenChange:d,elements:p,events:s,floatingId:i,refs:h}),[t,d,p,s,i,h])}function ha(e){void 0===e&&(e={});const{nodeId:t}=e,n=da((0,u.A)((0,u.A)({},e),{},{elements:(0,u.A)({reference:null,floating:null},e.elements)})),r=e.rootContext||n,i=r.elements,[o,s]=a.useState(null),[l,c]=a.useState(null),d=(null==i?void 0:i.domReference)||o,h=a.useRef(null),p=ca();mi(()=>{d&&(h.current=d)},[d]);const m=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[h,p]=a.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,f]=a.useState(r);Wo(m,r)||f(r);const[g,y]=a.useState(null),[v,b]=a.useState(null),w=a.useCallback(e=>{e!==E.current&&(E.current=e,y(e))},[]),D=a.useCallback(e=>{e!==S.current&&(S.current=e,b(e))},[]),k=o||g,x=s||v,E=a.useRef(null),S=a.useRef(null),C=a.useRef(h),A=null!=c,T=zo(c),F=zo(i),R=zo(d),_=a.useCallback(()=>{if(!E.current||!S.current)return;const e={placement:t,strategy:n,middleware:m};F.current&&(e.platform=F.current),Oo(E.current,S.current,e).then(e=>{const t=(0,u.A)((0,u.A)({},e),{},{isPositioned:!1!==R.current});I.current&&!Wo(C.current,t)&&(C.current=t,ke.flushSync(()=>{p(t)}))})},[m,t,n,F,R]);Lo(()=>{!1===d&&C.current.isPositioned&&(C.current.isPositioned=!1,p(e=>(0,u.A)((0,u.A)({},e),{},{isPositioned:!1})))},[d]);const I=a.useRef(!1);Lo(()=>(I.current=!0,()=>{I.current=!1}),[]),Lo(()=>{if(k&&(E.current=k),x&&(S.current=x),k&&x){if(T.current)return T.current(k,x,_);_()}},[k,x,_,T,A]);const P=a.useMemo(()=>({reference:E,floating:S,setReference:w,setFloating:D}),[w,D]),M=a.useMemo(()=>({reference:k,floating:x}),[k,x]),N=a.useMemo(()=>{const e={position:n,left:0,top:0};if(!M.floating)return e;const t=Uo(M.floating,h.x),r=Uo(M.floating,h.y);return l?(0,u.A)((0,u.A)({},e),{},{transform:"translate("+t+"px, "+r+"px)"},qo(M.floating)>=1.5&&{willChange:"transform"}):{position:n,left:t,top:r}},[n,l,M.floating,h.x,h.y]);return a.useMemo(()=>(0,u.A)((0,u.A)({},h),{},{update:_,refs:P,elements:M,floatingStyles:N}),[h,_,P,M,N])}((0,u.A)((0,u.A)({},e),{},{elements:(0,u.A)((0,u.A)({},i),l&&{reference:l})})),f=a.useCallback(e=>{const t=Di(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),getClientRects:()=>e.getClientRects(),contextElement:e}:e;c(t),m.refs.setReference(t)},[m.refs]),g=a.useCallback(e=>{(Di(e)||null===e)&&(h.current=e,s(e)),(Di(m.refs.reference.current)||null===m.refs.reference.current||null!==e&&!Di(e))&&m.refs.setReference(e)},[m.refs]),y=a.useMemo(()=>(0,u.A)((0,u.A)({},m.refs),{},{setReference:g,setPositionReference:f,domReference:h}),[m.refs,g,f]),v=a.useMemo(()=>(0,u.A)((0,u.A)({},m.elements),{},{domReference:d}),[m.elements,d]),b=a.useMemo(()=>(0,u.A)((0,u.A)((0,u.A)({},m),r),{},{refs:y,elements:v,nodeId:t}),[m,y,v,t,r]);return mi(()=>{r.dataRef.current.floatingContext=b;const e=null==p?void 0:p.nodesRef.current.find(e=>e.id===t);e&&(e.context=b)}),a.useMemo(()=>(0,u.A)((0,u.A)({},m),{},{context:b,refs:y,elements:v}),[m,y,v,b])}var pa=function(e,t){return pa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},pa(e,t)};function ma(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}pa(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var fa=function(){return fa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},fa.apply(this,arguments)};function ga(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}"function"===typeof SuppressedError&&SuppressedError;var ya,va=function(e){var t=e.showTimeSelectOnly,n=void 0!==t&&t,r=e.showTime,i=void 0!==r&&r,o=e.className,s=e.children,l=n?"Choose Time":"Choose Date".concat(i?" and Time":"");return a.createElement("div",{className:o,role:"dialog","aria-label":l,"aria-modal":"true"},s)},ba=function(e){var t=e.children,n=e.onClickOutside,r=e.className,i=e.containerRef,o=e.style,s=function(e,t){var n=(0,a.useRef)(null),r=(0,a.useRef)(e);r.current=e;var i=(0,a.useCallback)(function(e){var i,o=e.composed&&e.composedPath&&e.composedPath().find(function(e){return e instanceof Node})||e.target;n.current&&!n.current.contains(o)&&(t&&o instanceof HTMLElement&&o.classList.contains(t)||null===(i=r.current)||void 0===i||i.call(r,e))},[t]);return(0,a.useEffect)(function(){return document.addEventListener("mousedown",i),function(){document.removeEventListener("mousedown",i)}},[i]),n}(n,e.ignoreClass);return a.createElement("div",{className:r,style:o,ref:function(e){s.current=e,i&&(i.current=e)}},t)};function wa(){return"undefined"!==typeof window?window:globalThis}!function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"}(ya||(ya={}));function Da(e){if(null==e)return new Date;var t="string"===typeof e?nt(e):tt(e);return xa(t)?t:new Date}function ka(e,t,n,r,i){void 0===i&&(i=Da());for(var o=Ua(n)||Ua(qa()),a=0,s=Array.isArray(t)?t:[t];a<s.length;a++){var l=s[a],u=zn(e,l,i,{locale:o,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});if(xa(u)&&(!r||e===Ea(u,l,n)))return u}return null}function xa(e,t){return Kn(e)&&!Yn(e,new Date("1/1/1800"))}function Ea(e,t,n){if("en"===n)return gr(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=n?Ua(n):void 0;return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),gr(e,t,{locale:r=r||Ua(qa()),useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Sa(e,t){var n=t.dateFormat,r=t.locale,i=Array.isArray(n)&&n.length>0?n[0]:n;return e&&Ea(e,i,r)||""}function Ca(e,t){var n=t.hour,r=void 0===n?0:n,i=t.minute,o=void 0===i?0:i,a=t.second;return vr(br(wr(e,void 0===a?0:a),o),r)}function Aa(e){return Qn(e)}function Ta(e,t,n){return bn(e,{locale:Ua(t||qa()),weekStartsOn:n})}function Fa(e){return Dr(e)}function Ra(e){return Xn(e)}function _a(e){return kr(e)}function Ia(){return Qn(Da())}function Pa(e){return xr(e)}function Ma(e){return Sr(e)}function Na(e,t){return e&&t?Cr(e,t):!e&&!t}function ja(e,t){return e&&t?Ar(e,t):!e&&!t}function Ba(e,t){return e&&t?Tr(e,t):!e&&!t}function Oa(e,t){return e&&t?Fr(e,t):!e&&!t}function La(e,t){return e&&t?Rr(e,t):!e&&!t}function Wa(e,t,n){var r,i=Qn(t),o=xr(n);try{r=_r(e,{start:i,end:o})}catch(a){r=!1}return r}function qa(){return wa().__localeId__}function Ua(e){if("string"===typeof e){var t=wa();return t.__localeData__?t.__localeData__[e]:void 0}return e}function za(e,t){return Ea(Pr(Da(),e),"LLLL",t)}function Ha(e,t){return Ea(Pr(Da(),e),"LLL",t)}function Va(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.maxDate,o=n.excludeDates,a=n.excludeDateIntervals,s=n.includeDates,l=n.includeDateIntervals,u=n.filterDate;return es(e,{minDate:r,maxDate:i})||o&&o.some(function(t){return t instanceof Date?Oa(e,t):Oa(e,t.date)})||a&&a.some(function(t){var n=t.start,r=t.end;return _r(e,{start:n,end:r})})||s&&!s.some(function(t){return Oa(e,t)})||l&&!l.some(function(t){var n=t.start,r=t.end;return _r(e,{start:n,end:r})})||u&&!u(Da(e))||!1}function Ka(e,t){var n=void 0===t?{}:t,r=n.excludeDates,i=n.excludeDateIntervals;return i&&i.length>0?i.some(function(t){var n=t.start,r=t.end;return _r(e,{start:n,end:r})}):r&&r.some(function(t){var n;return t instanceof Date?Oa(e,t):Oa(e,null!==(n=t.date)&&void 0!==n?n:new Date)})||!1}function Ya(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.maxDate,o=n.excludeDates,a=n.includeDates,s=n.filterDate;return es(e,{minDate:r?Dr(r):void 0,maxDate:i?Sr(i):void 0})||(null===o||void 0===o?void 0:o.some(function(t){return ja(e,t instanceof Date?t:t.date)}))||a&&!a.some(function(t){return ja(e,t)})||s&&!s(Da(e))||!1}function Ga(e,t,n,r){var i=Nr(e),o=jr(e),a=Nr(t),s=jr(t),l=Nr(r);return i===a&&i===l?o<=n&&n<=s:i<a&&(l===i&&o<=n||l===a&&s>=n||l<a&&l>i)}function Qa(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.maxDate,o=n.excludeDates,a=n.includeDates;return es(e,{minDate:r,maxDate:i})||o&&o.some(function(t){return ja(t instanceof Date?t:t.date,e)})||a&&!a.some(function(t){return ja(t,e)})||!1}function Za(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.maxDate,o=n.excludeDates,a=n.includeDates,s=n.filterDate;return es(e,{minDate:r,maxDate:i})||(null===o||void 0===o?void 0:o.some(function(t){return Ba(e,t instanceof Date?t:t.date)}))||a&&!a.some(function(t){return Ba(e,t)})||s&&!s(Da(e))||!1}function Xa(e,t,n){if(!t||!n)return!1;if(!Kn(t)||!Kn(n))return!1;var r=Nr(t),i=Nr(n);return r<=e&&i>=e}function Ja(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.maxDate,o=n.excludeDates,a=n.includeDates,s=n.filterDate,l=new Date(e,0,1);return es(l,{minDate:r?Xn(r):void 0,maxDate:i?Br(i):void 0})||(null===o||void 0===o?void 0:o.some(function(e){return Na(l,e instanceof Date?e:e.date)}))||a&&!a.some(function(e){return Na(l,e)})||s&&!s(Da(l))||!1}function $a(e,t,n,r){var i=Nr(e),o=Or(e),a=Nr(t),s=Or(t),l=Nr(r);return i===a&&i===l?o<=n&&n<=s:i<a&&(l===i&&o<=n||l===a&&s>=n||l<a&&l>i)}function es(e,t){var n,r=void 0===t?{}:t,i=r.minDate,o=r.maxDate;return null!==(n=i&&Zn(e,i)<0||o&&Zn(e,o)>0)&&void 0!==n&&n}function ts(e,t){return t.some(function(t){return Lr(t)===Lr(e)&&Wr(t)===Wr(e)&&qr(t)===qr(e)})}function ns(e,t){var n=void 0===t?{}:t,r=n.excludeTimes,i=n.includeTimes,o=n.filterTime;return r&&ts(e,r)||i&&!ts(e,i)||o&&!o(e)||!1}function rs(e,t){var n=t.minTime,r=t.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var i=Da();i=wr(i=br(i=vr(i,Lr(e)),Wr(e)),qr(e));var o=Da();o=wr(o=br(o=vr(o,Lr(n)),Wr(n)),qr(n));var a,s=Da();s=wr(s=br(s=vr(s,Lr(r)),Wr(r)),qr(r));try{a=!_r(i,{start:o,end:s})}catch(l){a=!1}return a}function is(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.includeDates,o=zr(e,1);return r&&Hr(r,o)>0||i&&i.every(function(e){return Hr(e,o)>0})||!1}function os(e,t){var n=void 0===t?{}:t,r=n.maxDate,i=n.includeDates,o=Ur(e,1);return r&&Hr(o,r)>0||i&&i.every(function(e){return Hr(o,e)>0})||!1}function as(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.includeDates,o=Qr(e,1);return r&&Zr(r,o)>0||i&&i.every(function(e){return Zr(e,o)>0})||!1}function ss(e,t){var n=void 0===t?{}:t,r=n.maxDate,i=n.includeDates,o=Gr(e,1);return r&&Zr(o,r)>0||i&&i.every(function(e){return Zr(o,e)>0})||!1}function ls(e){var t=e.minDate,n=e.includeDates;return n&&t?Xr(n.filter(function(e){return Zn(e,t)>=0})):n?Xr(n):t}function us(e){var t=e.maxDate,n=e.includeDates;return n&&t?Jr(n.filter(function(e){return Zn(e,t)<=0})):n?Jr(n):t}function cs(e,t){var n;void 0===e&&(e=[]),void 0===t&&(t="react-datepicker__day--highlighted");for(var r=new Map,i=0,o=e.length;i<o;i++){var a=e[i];if(Vn(a)){var s=Ea(a,"MM.dd.yyyy");(p=r.get(s)||[]).includes(t)||(p.push(t),r.set(s,p))}else if("object"===typeof a){var l=null!==(n=Object.keys(a)[0])&&void 0!==n?n:"",u=a[l];if("string"===typeof l&&Array.isArray(u))for(var c=0,d=u.length;c<d;c++){var h=u[c];if(h){var p;s=Ea(h,"MM.dd.yyyy");(p=r.get(s)||[]).includes(l)||(p.push(l),r.set(s,p))}}}}return r}function ds(e,t){void 0===e&&(e=[]),void 0===t&&(t="react-datepicker__day--holidays");var n=new Map;return e.forEach(function(e){var r=e.date,i=e.holidayName;if(Vn(r)){var o=Ea(r,"MM.dd.yyyy"),a=n.get(o)||{className:"",holidayNames:[]};if(!("className"in a)||a.className!==t||(s=a.holidayNames,l=[i],s.length!==l.length||!s.every(function(e,t){return e===l[t]}))){var s,l;a.className=t;var u=a.holidayNames;a.holidayNames=u?ga(ga([],u,!0),[i],!1):[i],n.set(o,a)}}}),n}function hs(e,t,n,r,i){for(var o=i.length,a=[],s=0;s<o;s++){var l=e,u=i[s];u&&(l=ni(l=ti(l=ei(l,Lr(u)),Wr(u)),qr(u)));var c=ti(e,(n+1)*r);ri(l,t)&&Yn(l,c)&&void 0!=u&&a.push(u)}return a}function ps(e){return e<10?"0".concat(e):"".concat(e)}function ms(e,t){void 0===t&&(t=12);var n=Math.ceil(Nr(e)/t)*t;return{startPeriod:n-(t-1),endPeriod:n}}function fs(e){var t=e.getSeconds(),n=e.getMilliseconds();return tt(e.getTime()-1e3*t-n)}function gs(e){if(!Vn(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function ys(e,t){if(!Vn(e)||!Vn(t))throw new Error("Invalid date received");return Yn(gs(e),gs(t))}function vs(e){return e.key===ya.Space}var bs,ws=function(e){function t(t){var n=e.call(this,t)||this;return n.inputRef=a.createRef(),n.onTimeChange=function(e){var t,r;n.setState({time:e});var i=n.props.date,o=i instanceof Date&&!isNaN(+i)?i:new Date;if(null===e||void 0===e?void 0:e.includes(":")){var a=e.split(":"),s=a[0],l=a[1];o.setHours(Number(s)),o.setMinutes(Number(l))}null===(r=(t=n.props).onChange)||void 0===r||r.call(t,o)},n.renderTimeInput=function(){var e=n.state.time,t=n.props,r=t.date,i=t.timeString,o=t.customTimeInput;return o?(0,a.cloneElement)(o,{date:r,value:e,onChange:n.onTimeChange}):a.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var e;null===(e=n.inputRef.current)||void 0===e||e.focus()},required:!0,value:e,onChange:function(e){n.onTimeChange(e.target.value||i)}})},n.state={time:n.props.timeString},n}return ma(t,e),t.getDerivedStateFromProps=function(e,t){return e.timeString!==t.time?{time:e.timeString}:null},t.prototype.render=function(){return a.createElement("div",{className:"react-datepicker__input-time-container"},a.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),a.createElement("div",{className:"react-datepicker-time__input-container"},a.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(a.Component),Ds=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dayEl=(0,a.createRef)(),t.handleClick=function(e){!t.isDisabled()&&t.props.onClick&&t.props.onClick(e)},t.handleMouseEnter=function(e){!t.isDisabled()&&t.props.onMouseEnter&&t.props.onMouseEnter(e)},t.handleOnKeyDown=function(e){var n,r;e.key===ya.Space&&(e.preventDefault(),e.key=ya.Enter),null===(r=(n=t.props).handleOnKeyDown)||void 0===r||r.call(n,e)},t.isSameDay=function(e){return Oa(t.props.day,e)},t.isKeyboardSelected=function(){var e;if(t.props.disabledKeyboardNavigation)return!1;var n=t.props.selectsMultiple?null===(e=t.props.selectedDates)||void 0===e?void 0:e.some(function(e){return t.isSameDayOrWeek(e)}):t.isSameDayOrWeek(t.props.selected),r=t.props.preSelection&&t.isDisabled(t.props.preSelection);return!n&&t.isSameDayOrWeek(t.props.preSelection)&&!r},t.isDisabled=function(e){return void 0===e&&(e=t.props.day),Va(e,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.isExcluded=function(){return Ka(t.props.day,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.isStartOfWeek=function(){return Oa(t.props.day,Ta(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameWeek=function(e){return t.props.showWeekPicker&&Oa(e,Ta(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameDayOrWeek=function(e){return t.isSameDay(e)||t.isSameWeek(e)},t.getHighLightedClass=function(){var e=t.props,n=e.day,r=e.highlightDates;if(!r)return!1;var i=Ea(n,"MM.dd.yyyy");return r.get(i)},t.getHolidaysClass=function(){var e,n=t.props,r=n.day,i=n.holidays;if(!i)return[void 0];var o=Ea(r,"MM.dd.yyyy");return i.has(o)?[null===(e=i.get(o))||void 0===e?void 0:e.className]:[void 0]},t.isInRange=function(){var e=t.props,n=e.day,r=e.startDate,i=e.endDate;return!(!r||!i)&&Wa(n,r,i)},t.isInSelectingRange=function(){var e,n=t.props,r=n.day,i=n.selectsStart,o=n.selectsEnd,a=n.selectsRange,s=n.selectsDisabledDaysInRange,l=n.startDate,u=n.swapRange,c=n.endDate,d=null!==(e=t.props.selectingDate)&&void 0!==e?e:t.props.preSelection;if(!(i||o||a)||!d||!s&&t.isDisabled())return!1;if(i&&c&&(Yn(d,c)||La(d,c)))return Wa(r,d,c);if(o&&l&&(ri(d,l)||La(d,l)))return Wa(r,l,d);if(a&&l&&!c){if(La(d,l))return Wa(r,l,d);if(ri(d,l))return Wa(r,l,d);if(u&&Yn(d,l))return Wa(r,d,l)}return!1},t.isSelectingRangeStart=function(){var e;if(!t.isInSelectingRange())return!1;var n=t.props,r=n.day,i=n.startDate,o=n.selectsStart,a=n.swapRange,s=n.selectsRange,l=null!==(e=t.props.selectingDate)&&void 0!==e?e:t.props.preSelection;return Oa(r,o||s&&a&&i&&l&&Yn(l,i)?l:i)},t.isSelectingRangeEnd=function(){var e;if(!t.isInSelectingRange())return!1;var n=t.props,r=n.day,i=n.endDate,o=n.selectsEnd,a=n.selectsRange,s=n.swapRange,l=n.startDate,u=null!==(e=t.props.selectingDate)&&void 0!==e?e:t.props.preSelection;return Oa(r,o?u:a&&s&&l&&u?Yn(u,l)?l:u:a?u:i)},t.isRangeStart=function(){var e=t.props,n=e.day,r=e.startDate,i=e.endDate;return!(!r||!i)&&Oa(r,n)},t.isRangeEnd=function(){var e=t.props,n=e.day,r=e.startDate,i=e.endDate;return!(!r||!i)&&Oa(i,n)},t.isWeekend=function(){var e=ii(t.props.day);return 0===e||6===e},t.isAfterMonth=function(){return void 0!==t.props.month&&(t.props.month+1)%12===jr(t.props.day)},t.isBeforeMonth=function(){return void 0!==t.props.month&&(jr(t.props.day)+1)%12===t.props.month},t.isCurrentDay=function(){return t.isSameDay(Da())},t.isSelected=function(){var e;return t.props.selectsMultiple?null===(e=t.props.selectedDates)||void 0===e?void 0:e.some(function(e){return t.isSameDayOrWeek(e)}):t.isSameDayOrWeek(t.props.selected)},t.getClassNames=function(e){var n;return Qe("react-datepicker__day",t.props.dayClassName?t.props.dayClassName(e):void 0,"react-datepicker__day--"+Ea(t.props.day,"ddd",n),{"react-datepicker__day--disabled":t.isDisabled(),"react-datepicker__day--excluded":t.isExcluded(),"react-datepicker__day--selected":t.isSelected(),"react-datepicker__day--keyboard-selected":t.isKeyboardSelected(),"react-datepicker__day--range-start":t.isRangeStart(),"react-datepicker__day--range-end":t.isRangeEnd(),"react-datepicker__day--in-range":t.isInRange(),"react-datepicker__day--in-selecting-range":t.isInSelectingRange(),"react-datepicker__day--selecting-range-start":t.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":t.isSelectingRangeEnd(),"react-datepicker__day--today":t.isCurrentDay(),"react-datepicker__day--weekend":t.isWeekend(),"react-datepicker__day--outside-month":t.isAfterMonth()||t.isBeforeMonth()},t.getHighLightedClass(),t.getHolidaysClass())},t.getAriaLabel=function(){var e=t.props,n=e.day,r=e.ariaLabelPrefixWhenEnabled,i=void 0===r?"Choose":r,o=e.ariaLabelPrefixWhenDisabled,a=void 0===o?"Not available":o,s=t.isDisabled()||t.isExcluded()?a:i;return"".concat(s," ").concat(Ea(n,"PPPP",t.props.locale))},t.getTitle=function(){var e=t.props,n=e.day,r=e.holidays,i=void 0===r?new Map:r,o=e.excludeDates,a=Ea(n,"MM.dd.yyyy"),s=[];return i.has(a)&&s.push.apply(s,i.get(a).holidayNames),t.isExcluded()&&s.push(null===o||void 0===o?void 0:o.filter(function(e){return e instanceof Date?Oa(e,n):Oa(null===e||void 0===e?void 0:e.date,n)}).map(function(e){if(!(e instanceof Date))return null===e||void 0===e?void 0:e.message})),s.join(", ")},t.getTabIndex=function(){var e=t.props.selected,n=t.props.preSelection;return(!t.props.showWeekPicker||!t.props.showWeekNumber&&t.isStartOfWeek())&&(t.isKeyboardSelected()||t.isSameDay(e)&&Oa(n,e))?0:-1},t.handleFocusDay=function(){var e;t.shouldFocusDay()&&(null===(e=t.dayEl.current)||void 0===e||e.focus({preventScroll:!0}))},t.renderDayContents=function(){return t.props.monthShowsDuplicateDaysEnd&&t.isAfterMonth()||t.props.monthShowsDuplicateDaysStart&&t.isBeforeMonth()?null:t.props.renderDayContents?t.props.renderDayContents(oi(t.props.day),t.props.day):oi(t.props.day)},t.render=function(){return a.createElement("div",{ref:t.dayEl,className:t.getClassNames(t.props.day),onKeyDown:t.handleOnKeyDown,onClick:t.handleClick,onMouseEnter:t.props.usePointerEvent?void 0:t.handleMouseEnter,onPointerEnter:t.props.usePointerEvent?t.handleMouseEnter:void 0,tabIndex:t.getTabIndex(),"aria-label":t.getAriaLabel(),role:"gridcell",title:t.getTitle(),"aria-disabled":t.isDisabled(),"aria-current":t.isCurrentDay()?"date":void 0,"aria-selected":t.isSelected()||t.isInRange()},t.renderDayContents(),""!==t.getTitle()&&a.createElement("span",{className:"overlay"},t.getTitle()))},t}return ma(t,e),t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var e=!1;return 0===this.getTabIndex()&&this.isSameDay(this.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(e=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(e=!1),this.isDayActiveElement()&&(e=!0),this.isDuplicateDay()&&(e=!1)),e},t.prototype.isDayActiveElement=function(){var e,t,n;return(null===(t=null===(e=this.props.containerRef)||void 0===e?void 0:e.current)||void 0===t?void 0:t.contains(document.activeElement))&&(null===(n=document.activeElement)||void 0===n?void 0:n.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(a.Component),ks=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.weekNumberEl=(0,a.createRef)(),t.handleClick=function(e){t.props.onClick&&t.props.onClick(e)},t.handleOnKeyDown=function(e){var n,r;e.key===ya.Space&&(e.preventDefault(),e.key=ya.Enter),null===(r=(n=t.props).handleOnKeyDown)||void 0===r||r.call(n,e)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!Oa(t.props.date,t.props.selected)&&Oa(t.props.date,t.props.preSelection)},t.getTabIndex=function(){return t.props.showWeekPicker&&t.props.showWeekNumber&&(t.isKeyboardSelected()||Oa(t.props.date,t.props.selected)&&Oa(t.props.preSelection,t.props.selected))?0:-1},t.handleFocusWeekNumber=function(e){var n=!1;0===t.getTabIndex()&&!(null===e||void 0===e?void 0:e.isInputFocused)&&Oa(t.props.date,t.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(n=!0),t.props.inline&&!t.props.shouldFocusDayInline&&(n=!1),t.props.containerRef&&t.props.containerRef.current&&t.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(n=!0)),n&&t.weekNumberEl.current&&t.weekNumberEl.current.focus({preventScroll:!0})},t}return ma(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(e){this.handleFocusWeekNumber(e)},t.prototype.render=function(){var e=this.props,n=e.weekNumber,r=e.isWeekDisabled,i=e.ariaLabelPrefix,o=void 0===i?t.defaultProps.ariaLabelPrefix:i,s=e.onClick,l={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!s&&!r,"react-datepicker__week-number--selected":!!s&&Oa(this.props.date,this.props.selected)};return a.createElement("div",{ref:this.weekNumberEl,className:Qe(l),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex(),role:"gridcell"},n)},t}(a.Component),xs=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.isDisabled=function(e){return Va(e,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.handleDayClick=function(e,t){n.props.onDayClick&&n.props.onDayClick(e,t)},n.handleDayMouseEnter=function(e){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(e)},n.handleWeekClick=function(e,r,i){for(var o,a,s,l=new Date(e),u=0;u<7;u++){var c=new Date(e);if(c.setDate(c.getDate()+u),!n.isDisabled(c)){l=c;break}}"function"===typeof n.props.onWeekSelect&&n.props.onWeekSelect(l,r,i),n.props.showWeekPicker&&n.handleDayClick(l,i),(null!==(o=n.props.shouldCloseOnSelect)&&void 0!==o?o:t.defaultProps.shouldCloseOnSelect)&&(null===(s=(a=n.props).setOpen)||void 0===s||s.call(a,!1))},n.formatWeekNumber=function(e){return n.props.formatWeekNumber?n.props.formatWeekNumber(e):function(e){return An(e)}(e)},n.isWeekDisabled=function(){for(var e=n.startOfWeek(),t=_n(e,6),r=new Date(e);r<=t;){if(!n.isDisabled(r))return!1;r=_n(r,1)}return!0},n.renderDays=function(){var e=n.startOfWeek(),r=[],i=n.formatWeekNumber(e);if(n.props.showWeekNumber){var o=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,e,i):void 0;r.push(a.createElement(ks,fa({key:"W"},t.defaultProps,n.props,{weekNumber:i,isWeekDisabled:n.isWeekDisabled(),date:e,onClick:o})))}return r.concat([0,1,2,3,4,5,6].map(function(r){var i=_n(e,r);return a.createElement(Ds,fa({},t.defaultProps,n.props,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:i.valueOf(),day:i,onClick:n.handleDayClick.bind(n,i),onMouseEnter:n.handleDayMouseEnter.bind(n,i)}))}))},n.startOfWeek=function(){return Ta(n.props.day,n.props.locale,n.props.calendarStartDay)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!Oa(n.startOfWeek(),n.props.selected)&&Oa(n.startOfWeek(),n.props.preSelection)},n}return ma(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e={"react-datepicker__week":!0,"react-datepicker__week--selected":Oa(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()},t=this.props.weekClassName?this.props.weekClassName(this.startOfWeek()):void 0;return a.createElement("div",{className:Qe(e,t),role:"row"},this.renderDays())},t}(a.Component),Es="two_columns",Ss="three_columns",Cs="four_columns",As=((bs={})[Es]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},bs[Ss]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},bs[Cs]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},bs);function Ts(e,t){return e?Cs:t?Es:Ss}var Fs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MONTH_REFS=ga([],Array(12),!0).map(function(){return(0,a.createRef)()}),t.QUARTER_REFS=ga([],Array(4),!0).map(function(){return(0,a.createRef)()}),t.isDisabled=function(e){return Va(e,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.isExcluded=function(e){return Ka(e,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.handleDayClick=function(e,n){var r,i;null===(i=(r=t.props).onDayClick)||void 0===i||i.call(r,e,n,t.props.orderInDisplay)},t.handleDayMouseEnter=function(e){var n,r;null===(r=(n=t.props).onDayMouseEnter)||void 0===r||r.call(n,e)},t.handleMouseLeave=function(){var e,n;null===(n=(e=t.props).onMouseLeave)||void 0===n||n.call(e)},t.isRangeStartMonth=function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&ja(Pr(r,e),i)},t.isRangeStartQuarter=function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&Ba(Mr(r,e),i)},t.isRangeEndMonth=function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&ja(Pr(r,e),o)},t.isRangeEndQuarter=function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&Ba(Mr(r,e),o)},t.isInSelectingRangeMonth=function(e){var n,r=t.props,i=r.day,o=r.selectsStart,a=r.selectsEnd,s=r.selectsRange,l=r.startDate,u=r.endDate,c=null!==(n=t.props.selectingDate)&&void 0!==n?n:t.props.preSelection;return!(!(o||a||s)||!c)&&(o&&u?Ga(c,u,e,i):(a&&l||!(!s||!l||u))&&Ga(l,c,e,i))},t.isSelectingMonthRangeStart=function(e){var n;if(!t.isInSelectingRangeMonth(e))return!1;var r=t.props,i=r.day,o=r.startDate,a=r.selectsStart,s=Pr(i,e),l=null!==(n=t.props.selectingDate)&&void 0!==n?n:t.props.preSelection;return ja(s,a?l:o)},t.isSelectingMonthRangeEnd=function(e){var n;if(!t.isInSelectingRangeMonth(e))return!1;var r=t.props,i=r.day,o=r.endDate,a=r.selectsEnd,s=r.selectsRange,l=Pr(i,e),u=null!==(n=t.props.selectingDate)&&void 0!==n?n:t.props.preSelection;return ja(l,a||s?u:o)},t.isInSelectingRangeQuarter=function(e){var n,r=t.props,i=r.day,o=r.selectsStart,a=r.selectsEnd,s=r.selectsRange,l=r.startDate,u=r.endDate,c=null!==(n=t.props.selectingDate)&&void 0!==n?n:t.props.preSelection;return!(!(o||a||s)||!c)&&(o&&u?$a(c,u,e,i):(a&&l||!(!s||!l||u))&&$a(l,c,e,i))},t.isWeekInMonth=function(e){var n=t.props.day,r=_n(e,6);return ja(e,n)||ja(r,n)},t.isCurrentMonth=function(e,t){return Nr(e)===Nr(Da())&&t===jr(Da())},t.isCurrentQuarter=function(e,t){return Nr(e)===Nr(Da())&&t===Or(Da())},t.isSelectedMonth=function(e,t,n){return jr(n)===t&&Nr(e)===Nr(n)},t.isSelectMonthInList=function(e,n,r){return r.some(function(r){return t.isSelectedMonth(e,n,r)})},t.isSelectedQuarter=function(e,t,n){return Or(e)===t&&Nr(e)===Nr(n)},t.isMonthSelected=function(){var e=t.props,n=e.day,r=e.selected,i=e.selectedDates,o=e.selectsMultiple,a=jr(n);return o?null===i||void 0===i?void 0:i.some(function(e){return t.isSelectedMonth(n,a,e)}):!!r&&t.isSelectedMonth(n,a,r)},t.renderWeeks=function(){for(var e=[],n=t.props.fixedHeight,r=0,i=!1,o=Ta(Fa(t.props.day),t.props.locale,t.props.calendarStartDay),s=t.props.selected?function(e){return t.props.showWeekPicker?Ta(e,t.props.locale,t.props.calendarStartDay):t.props.selected}(t.props.selected):void 0,l=t.props.preSelection?function(e){return t.props.showWeekPicker?Ta(e,t.props.locale,t.props.calendarStartDay):t.props.preSelection}(t.props.preSelection):void 0;e.push(a.createElement(xs,fa({},t.props,{ariaLabelPrefix:t.props.weekAriaLabelPrefix,key:r,day:o,month:jr(t.props.day),onDayClick:t.handleDayClick,onDayMouseEnter:t.handleDayMouseEnter,selected:s,preSelection:l,showWeekNumber:t.props.showWeekNumbers}))),!i;){r++,o=ai(o,1);var u=n&&r>=6,c=!n&&!t.isWeekInMonth(o);if(u||c){if(!t.props.peekNextMonth)break;i=!0}}return e},t.onMonthClick=function(e,n){var r=t.isMonthDisabledForLabelDate(n),i=r.isDisabled,o=r.labelDate;i||t.handleDayClick(Fa(o),e)},t.onMonthMouseEnter=function(e){var n=t.isMonthDisabledForLabelDate(e),r=n.isDisabled,i=n.labelDate;r||t.handleDayMouseEnter(Fa(i))},t.handleMonthNavigation=function(e,n){var r,i,o,a;null===(i=(r=t.props).setPreSelection)||void 0===i||i.call(r,n),null===(a=null===(o=t.MONTH_REFS[e])||void 0===o?void 0:o.current)||void 0===a||a.focus()},t.handleKeyboardNavigation=function(e,n,r){var i,o=t.props,a=o.selected,s=o.preSelection,l=o.setPreSelection,u=o.minDate,c=o.maxDate,d=o.showFourColumnMonthYearPicker,h=o.showTwoColumnMonthYearPicker;if(s){var p=Ts(d,h),m=t.getVerticalOffset(p),f=null===(i=As[p])||void 0===i?void 0:i.grid,g=function(e,t,n){var r,i,o=t,a=n;switch(e){case ya.ArrowRight:o=Ur(t,1),a=11===n?0:n+1;break;case ya.ArrowLeft:o=zr(t,1),a=0===n?11:n-1;break;case ya.ArrowUp:o=zr(t,m),a=(null===(r=null===f||void 0===f?void 0:f[0])||void 0===r?void 0:r.includes(n))?n+12-m:n-m;break;case ya.ArrowDown:o=Ur(t,m),a=(null===(i=null===f||void 0===f?void 0:f[f.length-1])||void 0===i?void 0:i.includes(n))?n-12+m:n+m}return{newCalculatedDate:o,newCalculatedMonth:a}};if(n!==ya.Enter){var y=function(e,n,r){for(var i=e,o=!1,a=0,s=g(i,n,r),l=s.newCalculatedDate,d=s.newCalculatedMonth;!o;){if(a>=40){l=n,d=r;break}var h;if(u&&l<u)i=ya.ArrowRight,l=(h=g(i,l,d)).newCalculatedDate,d=h.newCalculatedMonth;if(c&&l>c)i=ya.ArrowLeft,l=(h=g(i,l,d)).newCalculatedDate,d=h.newCalculatedMonth;if(Qa(l,t.props))l=(h=g(i,l,d)).newCalculatedDate,d=h.newCalculatedMonth;else o=!0;a++}return{newCalculatedDate:l,newCalculatedMonth:d}}(n,s,r),v=y.newCalculatedDate,b=y.newCalculatedMonth;switch(n){case ya.ArrowRight:case ya.ArrowLeft:case ya.ArrowUp:case ya.ArrowDown:t.handleMonthNavigation(b,v)}}else t.isMonthDisabled(r)||(t.onMonthClick(e,r),null===l||void 0===l||l(a))}},t.getVerticalOffset=function(e){var t,n;return null!==(n=null===(t=As[e])||void 0===t?void 0:t.verticalNavigationOffset)&&void 0!==n?n:0},t.onMonthKeyDown=function(e,n){var r=t.props,i=r.disabledKeyboardNavigation,o=r.handleOnMonthKeyDown,a=e.key;a!==ya.Tab&&e.preventDefault(),i||t.handleKeyboardNavigation(e,a,n),o&&o(e)},t.onQuarterClick=function(e,n){var r=Mr(t.props.day,n);Za(r,t.props)||t.handleDayClick(_a(r),e)},t.onQuarterMouseEnter=function(e){var n=Mr(t.props.day,e);Za(n,t.props)||t.handleDayMouseEnter(_a(n))},t.handleQuarterNavigation=function(e,n){var r,i,o,a;t.isDisabled(n)||t.isExcluded(n)||(null===(i=(r=t.props).setPreSelection)||void 0===i||i.call(r,n),null===(a=null===(o=t.QUARTER_REFS[e-1])||void 0===o?void 0:o.current)||void 0===a||a.focus())},t.onQuarterKeyDown=function(e,n){var r,i,o=e.key;if(!t.props.disabledKeyboardNavigation)switch(o){case ya.Enter:t.onQuarterClick(e,n),null===(i=(r=t.props).setPreSelection)||void 0===i||i.call(r,t.props.selected);break;case ya.ArrowRight:if(!t.props.preSelection)break;t.handleQuarterNavigation(4===n?1:n+1,Vr(t.props.preSelection,1));break;case ya.ArrowLeft:if(!t.props.preSelection)break;t.handleQuarterNavigation(1===n?4:n-1,Kr(t.props.preSelection,1))}},t.isMonthDisabledForLabelDate=function(e){var n,r=t.props,i=r.day,o=r.minDate,a=r.maxDate,s=r.excludeDates,l=r.includeDates,u=Pr(i,e);return{isDisabled:null!==(n=(o||a||s||l)&&Ya(u,t.props))&&void 0!==n&&n,labelDate:u}},t.isMonthDisabled=function(e){return t.isMonthDisabledForLabelDate(e).isDisabled},t.getMonthClassNames=function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate,a=n.preSelection,s=n.monthClassName,l=s?s(Pr(r,e)):void 0,u=t.getSelection();return Qe("react-datepicker__month-text","react-datepicker__month-".concat(e),l,{"react-datepicker__month-text--disabled":t.isMonthDisabled(e),"react-datepicker__month-text--selected":u?t.isSelectMonthInList(r,e,u):void 0,"react-datepicker__month-text--keyboard-selected":!t.props.disabledKeyboardNavigation&&a&&t.isSelectedMonth(r,e,a)&&!t.isMonthSelected()&&!t.isMonthDisabled(e),"react-datepicker__month-text--in-selecting-range":t.isInSelectingRangeMonth(e),"react-datepicker__month-text--in-range":i&&o?Ga(i,o,e,r):void 0,"react-datepicker__month-text--range-start":t.isRangeStartMonth(e),"react-datepicker__month-text--range-end":t.isRangeEndMonth(e),"react-datepicker__month-text--selecting-range-start":t.isSelectingMonthRangeStart(e),"react-datepicker__month-text--selecting-range-end":t.isSelectingMonthRangeEnd(e),"react-datepicker__month-text--today":t.isCurrentMonth(r,e)})},t.getTabIndex=function(e){if(null==t.props.preSelection)return"-1";var n=jr(t.props.preSelection),r=t.isMonthDisabledForLabelDate(n).isDisabled;return e!==n||r||t.props.disabledKeyboardNavigation?"-1":"0"},t.getQuarterTabIndex=function(e){if(null==t.props.preSelection)return"-1";var n=Or(t.props.preSelection),r=Za(t.props.day,t.props);return e!==n||r||t.props.disabledKeyboardNavigation?"-1":"0"},t.getAriaLabel=function(e){var n=t.props,r=n.chooseDayAriaLabelPrefix,i=void 0===r?"Choose":r,o=n.disabledDayAriaLabelPrefix,a=void 0===o?"Not available":o,s=n.day,l=n.locale,u=Pr(s,e),c=t.isDisabled(u)||t.isExcluded(u)?a:i;return"".concat(c," ").concat(Ea(u,"MMMM yyyy",l))},t.getQuarterClassNames=function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate,a=n.selected,s=n.minDate,l=n.maxDate,u=n.excludeDates,c=n.includeDates,d=n.filterDate,h=n.preSelection,p=n.disabledKeyboardNavigation,m=(s||l||u||c||d)&&Za(Mr(r,e),t.props);return Qe("react-datepicker__quarter-text","react-datepicker__quarter-".concat(e),{"react-datepicker__quarter-text--disabled":m,"react-datepicker__quarter-text--selected":a?t.isSelectedQuarter(r,e,a):void 0,"react-datepicker__quarter-text--keyboard-selected":!p&&h&&t.isSelectedQuarter(r,e,h)&&!m,"react-datepicker__quarter-text--in-selecting-range":t.isInSelectingRangeQuarter(e),"react-datepicker__quarter-text--in-range":i&&o?$a(i,o,e,r):void 0,"react-datepicker__quarter-text--range-start":t.isRangeStartQuarter(e),"react-datepicker__quarter-text--range-end":t.isRangeEndQuarter(e),"react-datepicker__quarter-text--today":t.isCurrentQuarter(r,e)})},t.getMonthContent=function(e){var n=t.props,r=n.showFullMonthYearPicker,i=n.renderMonthContent,o=n.locale,a=n.day,s=Ha(e,o),l=za(e,o);return i?i(e,s,l,a):r?l:s},t.getQuarterContent=function(e){var n,r=t.props,i=r.renderQuarterContent,o=function(e,t){return Ea(Mr(Da(),e),"QQQ",t)}(e,r.locale);return null!==(n=null===i||void 0===i?void 0:i(e,o))&&void 0!==n?n:o},t.renderMonths=function(){var e,n=t.props,r=n.showTwoColumnMonthYearPicker,i=n.showFourColumnMonthYearPicker,o=n.day,s=n.selected,l=null===(e=As[Ts(i,r)])||void 0===e?void 0:e.grid;return null===l||void 0===l?void 0:l.map(function(e,n){return a.createElement("div",{className:"react-datepicker__month-wrapper",key:n},e.map(function(e,n){return a.createElement("div",{ref:t.MONTH_REFS[e],key:n,onClick:function(n){t.onMonthClick(n,e)},onKeyDown:function(n){vs(n)&&(n.preventDefault(),n.key=ya.Enter),t.onMonthKeyDown(n,e)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onMonthMouseEnter(e)},onPointerEnter:t.props.usePointerEvent?function(){return t.onMonthMouseEnter(e)}:void 0,tabIndex:Number(t.getTabIndex(e)),className:t.getMonthClassNames(e),"aria-disabled":t.isMonthDisabled(e),role:"option","aria-label":t.getAriaLabel(e),"aria-current":t.isCurrentMonth(o,e)?"date":void 0,"aria-selected":s?t.isSelectedMonth(o,e,s):void 0},t.getMonthContent(e))}))})},t.renderQuarters=function(){var e=t.props,n=e.day,r=e.selected;return a.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map(function(e,i){return a.createElement("div",{key:i,ref:t.QUARTER_REFS[i],role:"option",onClick:function(n){t.onQuarterClick(n,e)},onKeyDown:function(n){t.onQuarterKeyDown(n,e)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onQuarterMouseEnter(e)},onPointerEnter:t.props.usePointerEvent?function(){return t.onQuarterMouseEnter(e)}:void 0,className:t.getQuarterClassNames(e),"aria-selected":r?t.isSelectedQuarter(n,e,r):void 0,tabIndex:Number(t.getQuarterTabIndex(e)),"aria-current":t.isCurrentQuarter(n,e)?"date":void 0},t.getQuarterContent(e))}))},t.getClassNames=function(){var e=t.props,n=e.selectingDate,r=e.selectsStart,i=e.selectsEnd;return Qe("react-datepicker__month",{"react-datepicker__month--selecting-range":n&&(r||i)},{"react-datepicker__monthPicker":e.showMonthYearPicker},{"react-datepicker__quarterPicker":e.showQuarterYearPicker},{"react-datepicker__weekPicker":e.showWeekPicker})},t}return ma(t,e),t.prototype.getSelection=function(){var e=this.props,t=e.selected,n=e.selectedDates;return e.selectsMultiple?n:t?[t]:void 0},t.prototype.render=function(){var e=this.props,t=e.showMonthYearPicker,n=e.showQuarterYearPicker,r=e.day,i=e.ariaLabelPrefix,o=void 0===i?"Month ":i,s=o?o.trim()+" ":"";return t||n?a.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(s).concat(Ea(r,"MMMM, yyyy",this.props.locale)),role:"listbox"},t?this.renderMonths():this.renderQuarters()):a.createElement("div",{role:"table"},this.props.dayNamesHeader&&a.createElement("div",{role:"rowgroup"},this.props.dayNamesHeader),a.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(s).concat(Ea(r,"MMMM, yyyy",this.props.locale)),role:"rowgroup"},this.renderWeeks()))},t}(a.Component),Rs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.monthOptionButtonsRef={},t.isSelectedMonth=function(e){return t.props.month===e},t.handleOptionKeyDown=function(e,n){var r;switch(n.key){case"Enter":n.preventDefault(),t.onChange(e);break;case"Escape":n.preventDefault(),t.props.onCancel();break;case"ArrowUp":case"ArrowDown":n.preventDefault();var i=(e+("ArrowUp"===n.key?-1:1)+t.props.monthNames.length)%t.props.monthNames.length;null===(r=t.monthOptionButtonsRef[i])||void 0===r||r.focus()}},t.renderOptions=function(){return t.monthOptionButtonsRef={},t.props.monthNames.map(function(e,n){return a.createElement("div",{ref:function(e){t.monthOptionButtonsRef[n]=e,t.isSelectedMonth(n)&&(null===e||void 0===e||e.focus())},role:"button",tabIndex:0,className:t.isSelectedMonth(n)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:e,onClick:t.onChange.bind(t,n),onKeyDown:t.handleOptionKeyDown.bind(t,n),"aria-selected":t.isSelectedMonth(n)?"true":void 0},t.isSelectedMonth(n)?a.createElement("span",{className:"react-datepicker__month-option--selected"},"\u2713"):"",e)})},t.onChange=function(e){return t.props.onChange(e)},t.handleClickOutside=function(){return t.props.onCancel()},t}return ma(t,e),t.prototype.render=function(){return a.createElement(ba,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(a.Component),_s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(e){return e.map(function(e,t){return a.createElement("option",{key:e,value:t},e)})},t.renderSelectMode=function(e){return a.createElement("select",{value:t.props.month,className:"react-datepicker__month-select",onChange:function(e){return t.onChange(parseInt(e.target.value))}},t.renderSelectOptions(e))},t.renderReadView=function(e,n){return a.createElement("button",{key:"read",type:"button",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:t.toggleDropdown},a.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),a.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},n[t.props.month]))},t.renderDropdown=function(e){return a.createElement(Rs,fa({key:"dropdown"},t.props,{monthNames:e,onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(e){var n=t.state.dropdownVisible,r=[t.renderReadView(!n,e)];return n&&r.unshift(t.renderDropdown(e)),r},t.onChange=function(e){t.toggleDropdown(),e!==t.props.month&&t.props.onChange(e)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return ma(t,e),t.prototype.render=function(){var e,t=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(e){return Ha(e,t.props.locale)}:function(e){return za(e,t.props.locale)});switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode(n);break;case"select":e=this.renderSelectMode(n)}return a.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},e)},t}(a.Component);function Is(e,t){for(var n=[],r=Fa(e),i=Fa(t);!ri(r,i);)n.push(Da(r)),r=Ur(r,1);return n}var Ps=function(e){function t(t){var n=e.call(this,t)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(e){var t=si(e),r=Na(n.props.date,e)&&ja(n.props.date,e);return a.createElement("div",{className:r?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:t,onClick:n.onChange.bind(n,t),"aria-selected":r?"true":void 0},r?a.createElement("span",{className:"react-datepicker__month-year-option--selected"},"\u2713"):"",Ea(e,n.props.dateFormat,n.props.locale))})},n.onChange=function(e){return n.props.onChange(e)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:Is(n.props.minDate,n.props.maxDate)},n}return ma(t,e),t.prototype.render=function(){var e=Qe({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return a.createElement(ba,{className:e,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(a.Component),Ms=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var e=Fa(t.props.minDate),n=Fa(t.props.maxDate),r=[];!ri(e,n);){var i=si(e);r.push(a.createElement("option",{key:i,value:i},Ea(e,t.props.dateFormat,t.props.locale))),e=Ur(e,1)}return r},t.onSelectChange=function(e){t.onChange(parseInt(e.target.value))},t.renderSelectMode=function(){return a.createElement("select",{value:si(Fa(t.props.date)),className:"react-datepicker__month-year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(e){var n=Ea(t.props.date,t.props.dateFormat,t.props.locale);return a.createElement("div",{key:"read",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:t.toggleDropdown},a.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),a.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},n))},t.renderDropdown=function(){return a.createElement(Ps,fa({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var e=t.state.dropdownVisible,n=[t.renderReadView(!e)];return e&&n.unshift(t.renderDropdown()),n},t.onChange=function(e){t.toggleDropdown();var n=Da(e);Na(t.props.date,n)&&ja(t.props.date,n)||t.props.onChange(n)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return ma(t,e),t.prototype.render=function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return a.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},e)},t}(a.Component),Ns=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var e,r,i;n.list&&(n.list.scrollTop=null!==(i=n.centerLi&&t.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-(null!==(r=null===(e=n.header)||void 0===e?void 0:e.clientHeight)&&void 0!==r?r:0):n.list.clientHeight,n.centerLi))&&void 0!==i?i:0)})},n.handleClick=function(e){var t,r;(n.props.minTime||n.props.maxTime)&&rs(e,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&ns(e,n.props)||null===(r=(t=n.props).onChange)||void 0===r||r.call(t,e)},n.isSelectedTime=function(e){return n.props.selected&&(t=n.props.selected,r=e,fs(t).getTime()===fs(r).getTime());var t,r},n.isDisabledTime=function(e){return(n.props.minTime||n.props.maxTime)&&rs(e,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&ns(e,n.props)},n.liClasses=function(e){var r,i=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(e):void 0];return n.isSelectedTime(e)&&i.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(e)&&i.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(3600*Lr(e)+60*Wr(e)+qr(e))%(60*(null!==(r=n.props.intervals)&&void 0!==r?r:t.defaultProps.intervals))!==0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")},n.handleOnKeyDown=function(e,t){var r,i;e.key===ya.Space&&(e.preventDefault(),e.key=ya.Enter),(e.key===ya.ArrowUp||e.key===ya.ArrowLeft)&&e.target instanceof HTMLElement&&e.target.previousSibling&&(e.preventDefault(),e.target.previousSibling instanceof HTMLElement&&e.target.previousSibling.focus()),(e.key===ya.ArrowDown||e.key===ya.ArrowRight)&&e.target instanceof HTMLElement&&e.target.nextSibling&&(e.preventDefault(),e.target.nextSibling instanceof HTMLElement&&e.target.nextSibling.focus()),e.key===ya.Enter&&n.handleClick(t),null===(i=(r=n.props).handleOnKeyDown)||void 0===i||i.call(r,e)},n.renderTimes=function(){for(var e,r=[],i="string"===typeof n.props.format?n.props.format:"p",o=null!==(e=n.props.intervals)&&void 0!==e?e:t.defaultProps.intervals,s=n.props.selected||n.props.openToDate||Da(),l=Aa(s),u=n.props.injectTimes&&n.props.injectTimes.sort(function(e,t){return e.getTime()-t.getTime()}),c=60*function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+n-+t)/36e5)}(s),d=c/o,h=0;h<d;h++){var p=ti(l,h*o);if(r.push(p),u){var m=hs(l,p,h,o,u);r=r.concat(m)}}var f=r.reduce(function(e,t){return t.getTime()<=s.getTime()?t:e},r[0]);return r.map(function(e){return a.createElement("li",{key:e.valueOf(),onClick:n.handleClick.bind(n,e),className:n.liClasses(e),ref:function(t){e===f&&(n.centerLi=t)},onKeyDown:function(t){n.handleOnKeyDown(t,e)},tabIndex:e===f?0:-1,role:"option","aria-selected":n.isSelectedTime(e)?"true":void 0,"aria-disabled":n.isDisabledTime(e)?"true":void 0},Ea(e,i,n.props.locale))})},n.renderTimeCaption=function(){return!1===n.props.showTimeCaption?a.createElement(a.Fragment,null):a.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(n.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(e){n.header=e}},a.createElement("div",{className:"react-datepicker-time__header"},n.props.timeCaption))},n}return ma(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var e;null===(e=this.resizeObserver)||void 0===e||e.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var e=this,t=this.props.monthRef;this.updateContainerHeight(),t&&(this.resizeObserver=new ResizeObserver(function(){e.updateContainerHeight()}),this.resizeObserver.observe(t))},t.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var e,n=this,r=this.state.height;return a.createElement("div",{className:"react-datepicker__time-container ".concat((null!==(e=this.props.todayButton)&&void 0!==e?e:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),a.createElement("div",{className:"react-datepicker__time"},a.createElement("div",{className:"react-datepicker__time-box"},a.createElement("ul",{className:"react-datepicker__time-list",ref:function(e){n.list=e},style:r?{height:r}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(e,t){return t.offsetTop-(e/2-t.clientHeight/2)},t}(a.Component),js=function(e){function t(t){var n=e.call(this,t)||this;return n.YEAR_REFS=ga([],Array(n.props.yearItemNumber),!0).map(function(){return(0,a.createRef)()}),n.isDisabled=function(e){return Va(e,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(e){return Ka(e,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var e;return null!==(e=n.props.selectingDate)&&void 0!==e?e:n.props.preSelection},n.updateFocusOnPaginate=function(e){window.requestAnimationFrame(function(){var t,r;null===(r=null===(t=n.YEAR_REFS[e])||void 0===t?void 0:t.current)||void 0===r||r.focus()})},n.handleYearClick=function(e,t){n.props.onDayClick&&n.props.onDayClick(e,t)},n.handleYearNavigation=function(e,t){var r,i,o,a,s=n.props,l=s.date,u=s.yearItemNumber;if(void 0!==l&&void 0!==u){var c=ms(l,u).startPeriod;n.isDisabled(t)||n.isExcluded(t)||(null===(i=(r=n.props).setPreSelection)||void 0===i||i.call(r,t),e-c<0?n.updateFocusOnPaginate(u-(c-e)):e-c>=u?n.updateFocusOnPaginate(Math.abs(u-(e-c))):null===(a=null===(o=n.YEAR_REFS[e-c])||void 0===o?void 0:o.current)||void 0===a||a.focus())}},n.isSameDay=function(e,t){return Oa(e,t)},n.isCurrentYear=function(e){return e===Nr(Da())},n.isRangeStart=function(e){return n.props.startDate&&n.props.endDate&&Na(li(Da(),e),n.props.startDate)},n.isRangeEnd=function(e){return n.props.startDate&&n.props.endDate&&Na(li(Da(),e),n.props.endDate)},n.isInRange=function(e){return Xa(e,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(e){var t=n.props,r=t.selectsStart,i=t.selectsEnd,o=t.selectsRange,a=t.startDate,s=t.endDate;return!(!(r||i||o)||!n.selectingDate())&&(r&&s?Xa(e,n.selectingDate(),s):(i&&a||!(!o||!a||s))&&Xa(e,a,n.selectingDate()))},n.isSelectingRangeStart=function(e){var t;if(!n.isInSelectingRange(e))return!1;var r=n.props,i=r.startDate,o=r.selectsStart,a=li(Da(),e);return Na(a,o?null!==(t=n.selectingDate())&&void 0!==t?t:null:null!==i&&void 0!==i?i:null)},n.isSelectingRangeEnd=function(e){var t;if(!n.isInSelectingRange(e))return!1;var r=n.props,i=r.endDate,o=r.selectsEnd,a=r.selectsRange,s=li(Da(),e);return Na(s,o||a?null!==(t=n.selectingDate())&&void 0!==t?t:null:null!==i&&void 0!==i?i:null)},n.isKeyboardSelected=function(e){if(!n.props.disabledKeyboardNavigation&&void 0!==n.props.date&&null!=n.props.preSelection){var t=n.props,r=t.minDate,i=t.maxDate,o=t.excludeDates,a=t.includeDates,s=t.filterDate,l=t.selected,u=Ra(li(n.props.date,e)),c=(r||i||o||a||s)&&Ja(e,n.props),d=!!l&&Oa(u,Ra(l)),h=Oa(u,Ra(n.props.preSelection));return!n.props.inline&&!d&&h&&!c}},n.isSelectedYear=function(e){var t=n.props,r=t.selectsMultiple,i=t.selected,o=t.selectedDates;return r?null===o||void 0===o?void 0:o.some(function(t){return e===Nr(t)}):!!i&&e===Nr(i)},n.onYearClick=function(e,t){var r=n.props.date;void 0!==r&&n.handleYearClick(Ra(li(r,t)),e)},n.onYearKeyDown=function(e,t){var r,i,o=e.key,a=n.props,s=a.date,l=a.yearItemNumber,u=a.handleOnKeyDown;if(o!==ya.Tab&&e.preventDefault(),!n.props.disabledKeyboardNavigation)switch(o){case ya.Enter:if(null==n.props.selected)break;n.onYearClick(e,t),null===(i=(r=n.props).setPreSelection)||void 0===i||i.call(r,n.props.selected);break;case ya.ArrowRight:if(null==n.props.preSelection)break;n.handleYearNavigation(t+1,Gr(n.props.preSelection,1));break;case ya.ArrowLeft:if(null==n.props.preSelection)break;n.handleYearNavigation(t-1,Qr(n.props.preSelection,1));break;case ya.ArrowUp:if(void 0===s||void 0===l||null==n.props.preSelection)break;var c=ms(s,l).startPeriod;if((p=t-(h=3))<c){var d=l%h;t>=c&&t<c+d?h=d:h+=d,p=t-h}n.handleYearNavigation(p,Qr(n.props.preSelection,h));break;case ya.ArrowDown:if(void 0===s||void 0===l||null==n.props.preSelection)break;var h,p,m=ms(s,l).endPeriod;if((p=t+(h=3))>m){d=l%h;t<=m&&t>m-d?h=d:h+=d,p=t+h}n.handleYearNavigation(p,Gr(n.props.preSelection,h))}u&&u(e)},n.getYearClassNames=function(e){var t=n.props,r=t.date,i=t.minDate,o=t.maxDate,a=t.excludeDates,s=t.includeDates,l=t.filterDate,u=t.yearClassName;return Qe("react-datepicker__year-text","react-datepicker__year-".concat(e),r?null===u||void 0===u?void 0:u(li(r,e)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(e),"react-datepicker__year-text--disabled":(i||o||a||s||l)&&Ja(e,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(e),"react-datepicker__year-text--range-start":n.isRangeStart(e),"react-datepicker__year-text--range-end":n.isRangeEnd(e),"react-datepicker__year-text--in-range":n.isInRange(e),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(e),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(e),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(e),"react-datepicker__year-text--today":n.isCurrentYear(e)})},n.getYearTabIndex=function(e){if(n.props.disabledKeyboardNavigation||null==n.props.preSelection)return"-1";var t=Nr(n.props.preSelection),r=Ja(e,n.props);return e!==t||r?"-1":"0"},n.getYearContent=function(e){return n.props.renderYearContent?n.props.renderYearContent(e):e},n}return ma(t,e),t.prototype.render=function(){var e=this,t=[],n=this.props,r=n.date,i=n.yearItemNumber,o=n.onYearMouseEnter,s=n.onYearMouseLeave;if(void 0===r)return null;for(var l=ms(r,i),u=l.startPeriod,c=l.endPeriod,d=function(n){t.push(a.createElement("div",{ref:h.YEAR_REFS[n-u],onClick:function(t){e.onYearClick(t,n)},onKeyDown:function(t){vs(t)&&(t.preventDefault(),t.key=ya.Enter),e.onYearKeyDown(t,n)},tabIndex:Number(h.getYearTabIndex(n)),className:h.getYearClassNames(n),onMouseEnter:h.props.usePointerEvent?void 0:function(e){return o(e,n)},onPointerEnter:h.props.usePointerEvent?function(e){return o(e,n)}:void 0,onMouseLeave:h.props.usePointerEvent?void 0:function(e){return s(e,n)},onPointerLeave:h.props.usePointerEvent?function(e){return s(e,n)}:void 0,key:n,"aria-current":h.isCurrentYear(n)?"date":void 0},h.getYearContent(n)))},h=this,p=u;p<=c;p++)d(p);return a.createElement("div",{className:"react-datepicker__year"},a.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},t))},t}(a.Component);function Bs(e,t,n,r){for(var i=[],o=0;o<2*t+1;o++){var a=e+t-o,s=!0;n&&(s=Nr(n)<=a),r&&s&&(s=Nr(r)>=a),s&&i.push(a)}return i}var Os=function(e){function t(t){var n=e.call(this,t)||this;n.yearOptionButtonsRef={},n.handleOptionKeyDown=function(e,t){var r;switch(t.key){case"Enter":t.preventDefault(),n.onChange(e);break;case"Escape":t.preventDefault(),n.props.onCancel();break;case"ArrowUp":case"ArrowDown":t.preventDefault();var i=e+("ArrowUp"===t.key?1:-1);n.yearOptionButtonsRef[i]&&(null===(r=n.yearOptionButtonsRef[i])||void 0===r||r.focus())}},n.renderOptions=function(){n.yearOptionButtonsRef={};var e=n.props.year,t=n.state.yearsList.map(function(t){return a.createElement("div",{ref:function(r){n.yearOptionButtonsRef[t]=r,t===e&&(null===r||void 0===r||r.focus())},role:"button",tabIndex:0,className:e===t?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:t,onClick:n.onChange.bind(n,t),onKeyDown:n.handleOptionKeyDown.bind(n,t),"aria-selected":e===t?"true":void 0},e===t?a.createElement("span",{className:"react-datepicker__year-option--selected"},"\u2713"):"",t)}),r=n.props.minDate?Nr(n.props.minDate):null,i=n.props.maxDate?Nr(n.props.maxDate):null;return i&&n.state.yearsList.find(function(e){return e===i})||t.unshift(a.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},a.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),r&&n.state.yearsList.find(function(e){return e===r})||t.push(a.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},a.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),t},n.onChange=function(e){n.props.onChange(e)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(e){var t=n.state.yearsList.map(function(t){return t+e});n.setState({yearsList:t})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var r=t.yearDropdownItemNumber,i=t.scrollableYearDropdown,o=r||(i?10:5);return n.state={yearsList:Bs(n.props.year,o,n.props.minDate,n.props.maxDate)},n.dropdownRef=(0,a.createRef)(),n}return ma(t,e),t.prototype.componentDidMount=function(){var e=this.dropdownRef.current;if(e){var t=e.children?Array.from(e.children):null,n=t?t.find(function(e){return e.ariaSelected}):null;e.scrollTop=n&&n instanceof HTMLElement?n.offsetTop+(n.clientHeight-e.clientHeight)/2:(e.scrollHeight-e.clientHeight)/2}},t.prototype.render=function(){var e=Qe({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return a.createElement(ba,{className:e,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(a.Component),Ls=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var e=t.props.minDate?Nr(t.props.minDate):1900,n=t.props.maxDate?Nr(t.props.maxDate):2100,r=[],i=e;i<=n;i++)r.push(a.createElement("option",{key:i,value:i},i));return r},t.onSelectChange=function(e){t.onChange(parseInt(e.target.value))},t.renderSelectMode=function(){return a.createElement("select",{value:t.props.year,className:"react-datepicker__year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(e){return a.createElement("button",{key:"read",type:"button",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:t.toggleDropdown},a.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),a.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},t.props.year))},t.renderDropdown=function(){return a.createElement(Os,fa({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var e=t.state.dropdownVisible,n=[t.renderReadView(!e)];return e&&n.unshift(t.renderDropdown()),n},t.onChange=function(e){t.toggleDropdown(),e!==t.props.year&&t.props.onChange(e)},t.toggleDropdown=function(e){t.setState({dropdownVisible:!t.state.dropdownVisible},function(){t.props.adjustDateOnChange&&t.handleYearChange(t.props.date,e)})},t.handleYearChange=function(e,n){var r;null===(r=t.onSelect)||void 0===r||r.call(t,e,n),t.setOpen()},t.onSelect=function(e,n){var r,i;null===(i=(r=t.props).onSelect)||void 0===i||i.call(r,e,n)},t.setOpen=function(){var e,n;null===(n=(e=t.props).setOpen)||void 0===n||n.call(e,!0)},t}return ma(t,e),t.prototype.render=function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return a.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},e)},t}(a.Component),Ws=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],qs="react-datepicker-ignore-onclickoutside",Us=function(e){function t(n){var r=e.call(this,n)||this;return r.monthContainer=void 0,r.handleClickOutside=function(e){r.props.onClickOutside(e)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(e){var t,n;(function(e){var t=(e.className||"").split(/\s+/);return Ws.some(function(e){return t.indexOf(e)>=0})})(e.target)&&(null===(n=(t=r.props).onDropdownFocus)||void 0===n||n.call(t,e))},r.getDateInView=function(){var e=r.props,t=e.preSelection,n=e.selected,i=e.openToDate,o=ls(r.props),a=us(r.props),s=Da(),l=i||n||t;return l||(o&&Yn(s,o)?o:a&&ri(s,a)?a:s)},r.increaseMonth=function(){r.setState(function(e){return{date:Ur(e.date,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(e){return{date:zr(e.date,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(e,t,n){r.props.onSelect(e,t,n),r.props.setPreSelection&&r.props.setPreSelection(e)},r.handleDayMouseEnter=function(e){r.setState({selectingDate:e}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(e)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(e,t){r.setState({selectingDate:li(Da(),t)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(e,t)},r.handleYearMouseLeave=function(e,t){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(e,t)},r.handleYearChange=function(e){var t,n,i,o;null===(n=(t=r.props).onYearChange)||void 0===n||n.call(t,e),r.setState({isRenderAriaLiveMessage:!0}),r.props.adjustDateOnChange&&(r.props.onSelect(e),null===(o=(i=r.props).setOpen)||void 0===o||o.call(i,!0)),r.props.setPreSelection&&r.props.setPreSelection(e)},r.getEnabledPreSelectionDateForMonth=function(e){if(!Va(e,r.props))return e;for(var t=Fa(e),n=ui(Ma(e),t),i=null,o=0;o<=n;o++){var a=_n(t,o);if(!Va(a,r.props)){i=a;break}}return i},r.handleMonthChange=function(e){var t,n,i,o=null!==(t=r.getEnabledPreSelectionDateForMonth(e))&&void 0!==t?t:e;r.handleCustomMonthChange(o),r.props.adjustDateOnChange&&(r.props.onSelect(o),null===(i=(n=r.props).setOpen)||void 0===i||i.call(n,!0)),r.props.setPreSelection&&r.props.setPreSelection(o)},r.handleCustomMonthChange=function(e){var t,n;null===(n=(t=r.props).onMonthChange)||void 0===n||n.call(t,e),r.setState({isRenderAriaLiveMessage:!0})},r.handleMonthYearChange=function(e){r.handleYearChange(e),r.handleMonthChange(e)},r.changeYear=function(e){r.setState(function(t){return{date:li(t.date,Number(e))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(e){r.setState(function(t){return{date:Pr(t.date,Number(e))}},function(){return r.handleMonthChange(r.state.date)})},r.changeMonthYear=function(e){r.setState(function(t){return{date:li(Pr(t.date,jr(e)),Nr(e))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(e){void 0===e&&(e=r.state.date);var t=Ta(e,r.props.locale,r.props.calendarStartDay),n=[];return r.props.showWeekNumbers&&n.push(a.createElement("div",{key:"W",className:"react-datepicker__day-name",role:"columnheader"},a.createElement("span",{className:"react-datepicker__sr-only"},"Week number"),a.createElement("span",{"aria-hidden":"true"},r.props.weekLabel||"#"))),n.concat([0,1,2,3,4,5,6].map(function(e){var n=_n(t,e),i=r.formatWeekday(n,r.props.locale),o=r.props.weekDayClassName?r.props.weekDayClassName(n):void 0;return a.createElement("div",{key:e,role:"columnheader",className:Qe("react-datepicker__day-name",o)},a.createElement("span",{className:"react-datepicker__sr-only"},Ea(n,"EEEE",r.props.locale)),a.createElement("span",{"aria-hidden":"true"},i))}))},r.formatWeekday=function(e,t){return r.props.formatWeekDay?function(e,t,n){return t(Ea(e,"EEEE",n))}(e,r.props.formatWeekDay,t):r.props.useWeekdaysShort?function(e,t){return Ea(e,"EEE",t)}(e,t):function(e,t){return Ea(e,"EEEEEE",t)}(e,t)},r.decreaseYear=function(){r.setState(function(e){var n;return{date:Qr(e.date,r.props.showYearPicker?null!==(n=r.props.yearItemNumber)&&void 0!==n?n:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var e,n,i;if(!r.props.renderCustomHeader){var o,s=null!==(e=r.props.monthsShown)&&void 0!==e?e:t.defaultProps.monthsShown,l=r.props.showPreviousMonths?s-1:0,u=null!==(n=r.props.monthSelectedIn)&&void 0!==n?n:l,c=zr(r.state.date,u);switch(!0){case r.props.showMonthYearPicker:o=as(r.state.date,r.props);break;case r.props.showYearPicker:o=function(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.yearItemNumber,o=void 0===i?12:i,a=ms(Ra(Qr(e,o)),o).endPeriod,s=r&&Nr(r);return s&&s>a||!1}(r.state.date,r.props);break;case r.props.showQuarterYearPicker:o=function(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.includeDates,o=Kr(Xn(e),1);return r&&Yr(r,o)>0||i&&i.every(function(e){return Yr(e,o)>0})||!1}(r.state.date,r.props);break;default:o=is(c,r.props)}if(((null!==(i=r.props.forceShowMonthNavigation)&&void 0!==i?i:t.defaultProps.forceShowMonthNavigation)||r.props.showDisabledMonthNavigation||!o)&&!r.props.showTimeSelectOnly){var d=["react-datepicker__navigation","react-datepicker__navigation--previous"],h=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(h=r.decreaseYear),o&&r.props.showDisabledMonthNavigation&&(d.push("react-datepicker__navigation--previous--disabled"),h=void 0);var p=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,m=r.props,f=m.previousMonthButtonLabel,g=void 0===f?t.defaultProps.previousMonthButtonLabel:f,y=m.previousYearButtonLabel,v=void 0===y?t.defaultProps.previousYearButtonLabel:y,b=r.props,w=b.previousMonthAriaLabel,D=void 0===w?"string"===typeof g?g:"Previous Month":w,k=b.previousYearAriaLabel,x=void 0===k?"string"===typeof v?v:"Previous Year":k;return a.createElement("button",{type:"button",className:d.join(" "),onClick:h,onKeyDown:r.props.handleOnKeyDown,"aria-label":p?x:D},a.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},p?v:g))}}},r.increaseYear=function(){r.setState(function(e){var n;return{date:Gr(e.date,r.props.showYearPicker?null!==(n=r.props.yearItemNumber)&&void 0!==n?n:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var e;if(!r.props.renderCustomHeader){var n;switch(!0){case r.props.showMonthYearPicker:n=ss(r.state.date,r.props);break;case r.props.showYearPicker:n=function(e,t){var n=void 0===t?{}:t,r=n.maxDate,i=n.yearItemNumber,o=void 0===i?12:i,a=ms(Gr(e,o),o).startPeriod,s=r&&Nr(r);return s&&s<a||!1}(r.state.date,r.props);break;case r.props.showQuarterYearPicker:n=function(e,t){var n=void 0===t?{}:t,r=n.maxDate,i=n.includeDates,o=Vr(Br(e),1);return r&&Yr(o,r)>0||i&&i.every(function(e){return Yr(o,e)>0})||!1}(r.state.date,r.props);break;default:n=os(r.state.date,r.props)}if(((null!==(e=r.props.forceShowMonthNavigation)&&void 0!==e?e:t.defaultProps.forceShowMonthNavigation)||r.props.showDisabledMonthNavigation||!n)&&!r.props.showTimeSelectOnly){var i=["react-datepicker__navigation","react-datepicker__navigation--next"];r.props.showTimeSelect&&i.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&i.push("react-datepicker__navigation--next--with-today-button");var o=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(o=r.increaseYear),n&&r.props.showDisabledMonthNavigation&&(i.push("react-datepicker__navigation--next--disabled"),o=void 0);var s=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,l=r.props,u=l.nextMonthButtonLabel,c=void 0===u?t.defaultProps.nextMonthButtonLabel:u,d=l.nextYearButtonLabel,h=void 0===d?t.defaultProps.nextYearButtonLabel:d,p=r.props,m=p.nextMonthAriaLabel,f=void 0===m?"string"===typeof c?c:"Next Month":m,g=p.nextYearAriaLabel,y=void 0===g?"string"===typeof h?h:"Next Year":g;return a.createElement("button",{type:"button",className:i.join(" "),onClick:o,onKeyDown:r.props.handleOnKeyDown,"aria-label":s?y:f},a.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},s?h:c))}}},r.renderCurrentMonth=function(e){void 0===e&&(e=r.state.date);var t=["react-datepicker__current-month"];return r.props.showYearDropdown&&t.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&t.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&t.push("react-datepicker__current-month--hasMonthYearDropdown"),a.createElement("h2",{className:t.join(" ")},Ea(e,r.props.dateFormat,r.props.locale))},r.renderYearDropdown=function(e){if(void 0===e&&(e=!1),r.props.showYearDropdown&&!e)return a.createElement(Ls,fa({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:Nr(r.state.date)}))},r.renderMonthDropdown=function(e){if(void 0===e&&(e=!1),r.props.showMonthDropdown&&!e)return a.createElement(_s,fa({},t.defaultProps,r.props,{month:jr(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(e){if(void 0===e&&(e=!1),r.props.showMonthYearDropdown&&!e)return a.createElement(Ms,fa({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(e){r.props.onSelect(Ia(),e),r.props.setPreSelection&&r.props.setPreSelection(Ia())},r.renderTodayButton=function(){if(r.props.todayButton&&!r.props.showTimeSelectOnly)return a.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDayNamesHeader=function(e){return a.createElement("div",{className:"react-datepicker__day-names",role:"row"},r.header(e))},r.renderDefaultHeader=function(e){var t=e.monthDate,n=e.i;return a.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(t),a.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(0!==n),r.renderMonthYearDropdown(0!==n),r.renderYearDropdown(0!==n)))},r.renderCustomHeader=function(e){var t,n,i=e.monthDate,o=e.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var s,l=r.props,u=l.showYearPicker,c=l.yearItemNumber;if(u){var d=ms(i,c);s={startYear:d.startPeriod,endYear:d.endPeriod}}var h=is(r.state.date,r.props),p=os(r.state.date,r.props),m=as(r.state.date,r.props),f=ss(r.state.date,r.props);return a.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},null===(n=(t=r.props).renderCustomHeader)||void 0===n?void 0:n.call(t,fa(fa(fa({},r.state),u&&{visibleYearsRange:s}),{customHeaderCount:o,monthDate:i,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:h,nextMonthButtonDisabled:p,prevYearButtonDisabled:m,nextYearButtonDisabled:f})))},r.renderYearHeader=function(e){var n=e.monthDate,i=r.props,o=i.showYearPicker,s=i.yearItemNumber,l=ms(n,void 0===s?t.defaultProps.yearItemNumber:s),u=l.startPeriod,c=l.endPeriod;return a.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},o?"".concat(u," - ").concat(c):Nr(n))},r.renderHeader=function(e){var t=e.monthDate,n=e.i,i={monthDate:t,i:void 0===n?0:n};switch(!0){case void 0!==r.props.renderCustomHeader:return r.renderCustomHeader(i);case r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker:return r.renderYearHeader(i);default:return r.renderDefaultHeader(i)}},r.renderMonths=function(){var e,n;if(!r.props.showTimeSelectOnly&&!r.props.showYearPicker){for(var i=[],o=null!==(e=r.props.monthsShown)&&void 0!==e?e:t.defaultProps.monthsShown,s=r.props.showPreviousMonths?o-1:0,l=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Gr(r.state.date,s):zr(r.state.date,s),u=null!==(n=r.props.monthSelectedIn)&&void 0!==n?n:s,c=0;c<o;++c){var d=c-u+s,h=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Gr(l,d):Ur(l,d),p="month-".concat(c),m=c<o-1,f=c>0;i.push(a.createElement("div",{key:p,ref:function(e){r.monthContainer=null!==e&&void 0!==e?e:void 0},className:"react-datepicker__month-container"},r.renderHeader({monthDate:h,i:c}),a.createElement(Fs,fa({},t.defaultProps,r.props,{containerRef:r.containerRef,ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:h,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:c,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:m,monthShowsDuplicateDaysStart:f,dayNamesHeader:r.renderDayNamesHeader(h)}))))}return i}},r.renderYears=function(){if(!r.props.showTimeSelectOnly)return r.props.showYearPicker?a.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),a.createElement(js,fa({},t.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave}))):void 0},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return a.createElement(Ns,fa({},t.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var e=r.props.selected?new Date(r.props.selected):void 0,n=e&&xa(e)&&Boolean(r.props.selected)?"".concat(ps(e.getHours()),":").concat(ps(e.getMinutes())):"";if(r.props.showTimeInput)return a.createElement(ws,fa({},t.defaultProps,r.props,{date:e,timeString:n,onChange:r.props.onTimeChange}))},r.renderAriaLiveRegion=function(){var e,n,i=ms(r.state.date,null!==(e=r.props.yearItemNumber)&&void 0!==e?e:t.defaultProps.yearItemNumber),o=i.startPeriod,s=i.endPeriod;return n=r.props.showYearPicker?"".concat(o," - ").concat(s):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Nr(r.state.date):"".concat(za(jr(r.state.date),r.props.locale)," ").concat(Nr(r.state.date)),a.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&n)},r.renderChildren=function(){if(r.props.children)return a.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=(0,a.createRef)(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return ma(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,outsideClickIgnoreClass:qs,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:12}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var e=this;this.props.showTimeSelect&&(this.assignMonthContainer=void e.setState({monthContainer:e.monthContainer}))},t.prototype.componentDidUpdate=function(e){var t=this;if(!this.props.preSelection||Oa(this.props.preSelection,e.preSelection)&&this.props.monthSelectedIn===e.monthSelectedIn)this.props.openToDate&&!Oa(this.props.openToDate,e.openToDate)&&this.setState({date:this.props.openToDate});else{var n=!ja(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return n&&t.handleCustomMonthChange(t.state.date)})}},t.prototype.render=function(){var e=this.props.container||va;return a.createElement(ba,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},a.createElement("div",{style:{display:"contents"},ref:this.containerRef},a.createElement(e,{className:Qe("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t}(a.Component),zs=function(e){var t=e.icon,n=e.className,r=void 0===n?"":n,i=e.onClick,o="react-datepicker__calendar-icon";if("string"===typeof t)return a.createElement("i",{className:"".concat(o," ").concat(t," ").concat(r),"aria-hidden":"true",onClick:i});if(a.isValidElement(t)){var s=t;return a.cloneElement(s,{className:"".concat(s.props.className||""," ").concat(o," ").concat(r),onClick:function(e){"function"===typeof s.props.onClick&&s.props.onClick(e),"function"===typeof i&&i(e)}})}return a.createElement("svg",{className:"".concat(o," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:i},a.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},Hs=function(e){function t(t){var n=e.call(this,t)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return ma(t,e),t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return ke.createPortal(this.props.children,this.el)},t}(a.Component),Vs=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&-1!==e.tabIndex},Ks=function(e){function t(t){var n=e.call(this,t)||this;return n.getTabChildren=function(){var e;return Array.prototype.slice.call(null===(e=n.tabLoopRef.current)||void 0===e?void 0:e.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(Vs)},n.handleFocusStart=function(){var e=n.getTabChildren();e&&e.length>1&&e[e.length-1].focus()},n.handleFocusEnd=function(){var e=n.getTabChildren();e&&e.length>1&&e[0].focus()},n.tabLoopRef=(0,a.createRef)(),n}return ma(t,e),t.prototype.render=function(){var e;return(null!==(e=this.props.enableTabLoop)&&void 0!==e?e:t.defaultProps.enableTabLoop)?a.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},a.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,a.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(a.Component);var Ys=function(e){function t(t){var n,r,i,o="boolean"!==typeof t.hidePopper||t.hidePopper,s=(0,a.useRef)(null),l=ha(fa({open:!o,whileElementsMounted:Mo,placement:t.popperPlacement,middleware:ga([(r={padding:15},(0,u.A)((0,u.A)({},jo(r)),{},{options:[r,i]})),Ho(10),Vo({element:s})],null!==(n=t.popperModifiers)&&void 0!==n?n:[],!0)},t.popperProps)),c=fa(fa({},t),{hidePopper:o,popperProps:fa(fa({},l),{arrowRef:s})});return a.createElement(e,fa({},c))}return t.displayName="withFloating(".concat(e.displayName||e.name||"Component",")"),t}(function(e){var t=e.className,n=e.wrapperClassName,r=e.hidePopper,i=void 0===r||r,o=e.popperComponent,s=e.targetComponent,l=e.enableTabLoop,u=e.popperOnKeyDown,c=e.portalId,d=e.portalHost,h=e.popperProps,p=e.showArrow,m=void 0;if(!i){var f=Qe("react-datepicker-popper",t);m=a.createElement(Ks,{enableTabLoop:l},a.createElement("div",{ref:h.refs.setFloating,style:h.floatingStyles,className:f,"data-placement":h.placement,onKeyDown:u},o,p&&a.createElement(oa,{ref:h.arrowRef,context:h.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}e.popperContainer&&(m=(0,a.createElement)(e.popperContainer,{},m)),c&&!i&&(m=a.createElement(Hs,{portalId:c,portalHost:d},m));var g=Qe("react-datepicker-wrapper",n);return a.createElement(a.Fragment,null,a.createElement("div",{ref:h.refs.setReference,className:g},s),m)});var Gs="Date input not valid.",Qs=function(e){function t(n){var r=e.call(this,n)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:Da()},r.modifyHolidays=function(){var e;return null===(e=r.props.holidays)||void 0===e?void 0:e.reduce(function(e,t){var n=new Date(t.date);return xa(n)?ga(ga([],e,!0),[fa(fa({},t),{date:n})],!1):e},[])},r.calcInitialState=function(){var e,t=r.getPreSelection(),n=ls(r.props),i=us(r.props),o=n&&Yn(t,Aa(n))?n:i&&ri(t,Pa(i))?i:t;return{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:null!==(e=r.props.selectsRange?r.props.startDate:r.props.selected)&&void 0!==e?e:o,highlightDates:cs(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.getInputValue=function(){var e,n=r.props,i=n.locale,o=n.startDate,a=n.endDate,s=n.rangeSeparator,l=n.selected,u=n.selectedDates,c=n.selectsMultiple,d=n.selectsRange,h=n.value,p=null!==(e=r.props.dateFormat)&&void 0!==e?e:t.defaultProps.dateFormat,m=r.state.inputValue;return"string"===typeof h?h:"string"===typeof m?m:d?function(e,t,n){if(!e&&!t)return"";var r=e?Sa(e,n):"",i=t?Sa(t,n):"",o=n.rangeSeparator||" - ";return"".concat(r).concat(o).concat(i)}(o,a,{dateFormat:p,locale:i,rangeSeparator:s}):c?function(e,t){if(!(null===e||void 0===e?void 0:e.length))return"";var n=e[0]?Sa(e[0],t):"";if(1===e.length)return n;if(2===e.length&&e[1]){var r=Sa(e[1],t);return"".concat(n,", ").concat(r)}var i=e.length-1;return"".concat(n," (+").concat(i,")")}(null!==u&&void 0!==u?u:[],{dateFormat:p,locale:i}):Sa(l,{dateFormat:p,locale:i})},r.resetHiddenStatus=function(){r.setState(fa(fa({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(fa(fa({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){"hidden"===document.visibilityState&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.setFocus=function(){var e,t;null===(t=null===(e=r.input)||void 0===e?void 0:e.focus)||void 0===t||t.call(e,{preventScroll:!0})},r.setBlur=function(){var e,t;null===(t=null===(e=r.input)||void 0===e?void 0:e.blur)||void 0===t||t.call(e),r.cancelFocusInput()},r.deferBlur=function(){requestAnimationFrame(function(){r.setBlur()})},r.setOpen=function(e,t){void 0===t&&(t=!1),r.setState({open:e,preSelection:e&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:Xs},function(){e||r.setState(function(e){return{focused:!!t&&e.focused}},function(){!t&&r.deferBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return Vn(r.state.preSelection)},r.isCalendarOpen=function(){return void 0===r.props.open?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(e){var t,n,i=r.state.wasHidden,o=!i||r.state.open;i&&r.resetHiddenStatus(),r.state.preventFocus||(null===(n=(t=r.props).onFocus)||void 0===n||n.call(t,e),!o||r.props.preventOpenOnFocus||r.props.readOnly||r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.resetInputValue=function(){r.setState(fa(fa({},r.state),{inputValue:null}))},r.handleBlur=function(e){var t,n;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&(null===(n=(t=r.props).onBlur)||void 0===n||n.call(t,e)),r.resetInputValue(),r.state.open&&!1===r.props.open&&r.setOpen(!1),r.setState({focused:!1})},r.handleCalendarClickOutside=function(e){var t,n;r.props.inline||r.setOpen(!1),null===(n=(t=r.props).onClickOutside)||void 0===n||n.call(t,e),r.props.withPortal&&e.preventDefault()},r.handleChange=function(){for(var e,n,i,o,a,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var u=s[0];if(!r.props.onChangeRaw||(r.props.onChangeRaw.apply(r,s),u&&"function"===typeof u.isDefaultPrevented&&!u.isDefaultPrevented())){r.setState({inputValue:(null===u||void 0===u?void 0:u.target)instanceof HTMLInputElement?u.target.value:null,lastPreSelectChange:Zs});var c=r.props,d=c.selectsRange,h=c.startDate,p=c.endDate,m=null!==(e=r.props.dateFormat)&&void 0!==e?e:t.defaultProps.dateFormat,f=null!==(n=r.props.strictParsing)&&void 0!==n?n:t.defaultProps.strictParsing,g=(null===u||void 0===u?void 0:u.target)instanceof HTMLInputElement?u.target.value:"";if(d){var y=r.props.rangeSeparator,v=y.trim(),b=g.split(m.includes(v)?y:v,2).map(function(e){return e.trim()}),w=b[0],D=b[1],k=ka(null!==w&&void 0!==w?w:"",m,r.props.locale,f),x=k?ka(null!==D&&void 0!==D?D:"",m,r.props.locale,f):null,E=(null===h||void 0===h?void 0:h.getTime())!==(null===k||void 0===k?void 0:k.getTime()),S=(null===p||void 0===p?void 0:p.getTime())!==(null===x||void 0===x?void 0:x.getTime());if(!E&&!S)return;if(k&&Va(k,r.props))return;if(x&&Va(x,r.props))return;null===(o=(i=r.props).onChange)||void 0===o||o.call(i,[k,x],u)}else{var C=ka(g,m,r.props.locale,f,null!==(a=r.props.selected)&&void 0!==a?a:void 0);!C&&g||r.setSelected(C,u,!0)}}},r.handleSelect=function(e,t,n){if(!r.props.readOnly){var i=r.props,o=i.selectsRange,a=i.startDate,s=i.endDate,l=i.swapRange,u=!o||a&&!s&&(l||!ys(e,a));r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&u&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(t),r.setSelected(e,t,!1,n),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect?r.setPreSelection(e):u&&r.setOpen(!1)}},r.setSelected=function(e,t,n,i){var o,a,s=e;if(r.props.showYearPicker){if(null!==s&&Ja(Nr(s),r.props))return}else if(r.props.showMonthYearPicker){if(null!==s&&Ya(s,r.props))return}else if(null!==s&&Va(s,r.props))return;var l=r.props,u=l.onChange,c=l.selectsRange,d=l.startDate,h=l.endDate,p=l.selectsMultiple,m=l.selectedDates,f=l.minTime,g=l.swapRange;if(!La(r.props.selected,s)||r.props.allowSameDay||c||p)if(null!==s&&(!r.props.selected||n&&(r.props.showTimeSelect||r.props.showTimeSelectOnly||r.props.showTimeInput)||(s=Ca(s,{hour:Lr(r.props.selected),minute:Wr(r.props.selected),second:qr(r.props.selected)})),n||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly||f&&(s=Ca(s,{hour:f.getHours(),minute:f.getMinutes(),second:f.getSeconds()})),r.props.inline||r.setState({preSelection:s}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:i})),c){var y=d&&!h,v=!d&&!!h,b=d&&h;!d&&!h?null===u||void 0===u||u([s,null],t):y?null===s?null===u||void 0===u||u([null,null],t):ys(s,d)?g?null===u||void 0===u||u([s,d],t):null===u||void 0===u||u([s,null],t):null===u||void 0===u||u([d,s],t):v&&(s&&ys(s,h)?null===u||void 0===u||u([s,h],t):null===u||void 0===u||u([s,null],t)),b&&(null===u||void 0===u||u([s,null],t))}else if(p){if(null!==s)if(null===m||void 0===m?void 0:m.length)if(m.some(function(e){return Oa(e,s)})){var w=m.filter(function(e){return!Oa(e,s)});null===u||void 0===u||u(w,t)}else null===u||void 0===u||u(ga(ga([],m,!0),[s],!1),t);else null===u||void 0===u||u([s],t)}else null===u||void 0===u||u(s,t);n||(null===(a=(o=r.props).onSelect)||void 0===a||a.call(o,s,t),r.setState({inputValue:null}))},r.setPreSelection=function(e){if(!r.props.readOnly){var t=Vn(r.props.minDate),n=Vn(r.props.maxDate),i=!0;if(e){var o=Aa(e);if(t&&n)i=Wa(e,r.props.minDate,r.props.maxDate);else if(t){var a=Aa(r.props.minDate);i=ri(e,a)||La(o,a)}else if(n){var s=Pa(r.props.maxDate);i=Yn(e,s)||La(o,s)}}i&&r.setState({preSelection:e})}},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(e){var t,n;if(!r.props.selectsRange&&!r.props.selectsMultiple){var i=r.props.selected?r.props.selected:r.getPreSelection(),o=r.props.selected?e:Ca(i,{hour:Lr(e),minute:Wr(e)});r.setState({preSelection:o}),null===(n=(t=r.props).onChange)||void 0===n||n.call(t,o),r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var e,t;r.props.disabled||r.props.readOnly||r.setOpen(!0),null===(t=(e=r.props).onInputClick)||void 0===t||t.call(e)},r.onInputKeyDown=function(e){var t,n,i,o,a,s;null===(n=(t=r.props).onKeyDown)||void 0===n||n.call(t,e);var l=e.key;if(r.state.open||r.props.inline||r.props.preventOpenOnFocus){if(r.state.open){if(l===ya.ArrowDown||l===ya.ArrowUp){e.preventDefault();var u=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',c=(null===(o=r.calendar)||void 0===o?void 0:o.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(u);return void(c instanceof HTMLElement&&c.focus({preventScroll:!0}))}var d=Da(r.state.preSelection);l===ya.Enter?(e.preventDefault(),e.target.blur(),r.inputOk()&&r.state.lastPreSelectChange===Xs?(r.handleSelect(d,e),!r.props.shouldCloseOnSelect&&r.setPreSelection(d)):r.setOpen(!1)):l===ya.Escape?(e.preventDefault(),e.target.blur(),r.sendFocusBackToInput(),r.setOpen(!1)):l===ya.Tab&&r.setOpen(!1),r.inputOk()||null===(s=(a=r.props).onInputError)||void 0===s||s.call(a,{code:1,msg:Gs})}}else l!==ya.ArrowDown&&l!==ya.ArrowUp&&l!==ya.Enter||null===(i=r.onInputClick)||void 0===i||i.call(r)},r.onPortalKeyDown=function(e){e.key===ya.Escape&&(e.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(e){var t,n,i,o,a,s,l=r.props,u=l.minDate,c=l.maxDate,d=l.disabledKeyboardNavigation,h=l.showWeekPicker,p=l.shouldCloseOnSelect,m=l.locale,f=l.calendarStartDay,g=l.adjustDateOnChange,y=l.inline;if(null===(n=(t=r.props).onKeyDown)||void 0===n||n.call(t,e),!d){var v=e.key,b=e.shiftKey,w=Da(r.state.preSelection),D=function(e,t){var n=t;switch(e){case ya.ArrowRight:n=h?ai(t,1):_n(t,1);break;case ya.ArrowLeft:n=h?di(t,1):hi(t,1);break;case ya.ArrowUp:n=di(t,1);break;case ya.ArrowDown:n=ai(t,1);break;case ya.PageUp:n=b?Qr(t,1):zr(t,1);break;case ya.PageDown:n=b?Gr(t,1):Ur(t,1);break;case ya.Home:n=Ta(t,m,f);break;case ya.End:n=function(e){return Er(e)}(t)}return n};if(v===ya.Enter)return e.preventDefault(),r.handleSelect(w,e),void(!p&&r.setPreSelection(w));if(v===ya.Escape)return e.preventDefault(),r.setOpen(!1),void(r.inputOk()||null===(o=(i=r.props).onInputError)||void 0===o||o.call(i,{code:1,msg:Gs}));var k=null;switch(v){case ya.ArrowLeft:case ya.ArrowRight:case ya.ArrowUp:case ya.ArrowDown:case ya.PageUp:case ya.PageDown:case ya.Home:case ya.End:k=function(e,t){for(var n=e,i=!1,o=0,a=D(e,t);!i;){if(o>=40){a=t;break}u&&a<u&&(n=ya.ArrowRight,a=Va(u,r.props)?D(n,a):u),c&&a>c&&(n=ya.ArrowLeft,a=Va(c,r.props)?D(n,a):c),Va(a,r.props)?(n!==ya.PageUp&&n!==ya.Home||(n=ya.ArrowRight),n!==ya.PageDown&&n!==ya.End||(n=ya.ArrowLeft),a=D(n,a)):i=!0,o++}return a}(v,w)}if(k){if(e.preventDefault(),r.setState({lastPreSelectChange:Xs}),g&&r.setSelected(k),r.setPreSelection(k),y){var x=jr(w),E=jr(k),S=Nr(w),C=Nr(k);x!==E||S!==C?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}else null===(s=(a=r.props).onInputError)||void 0===s||s.call(a,{code:1,msg:Gs})}},r.onPopperKeyDown=function(e){e.key===ya.Escape&&(e.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1))},r.onClearClick=function(e){e&&e.preventDefault&&e.preventDefault(),r.sendFocusBackToInput();var t=r.props,n=t.selectsRange,i=t.onChange;n?null===i||void 0===i||i([null,null],e):null===i||void 0===i||i(null,e),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(e){"boolean"===typeof r.props.closeOnScroll&&r.props.closeOnScroll?e.target!==document&&e.target!==document.documentElement&&e.target!==document.body||r.setOpen(!1):"function"===typeof r.props.closeOnScroll&&r.props.closeOnScroll(e)&&r.setOpen(!1)},r.renderCalendar=function(){var e,n;return r.props.inline||r.isCalendarOpen()?a.createElement(Us,fa({showMonthYearDropdown:void 0,ref:function(e){r.calendar=e}},r.props,r.state,{setOpen:r.setOpen,dateFormat:null!==(e=r.props.dateFormatCalendar)&&void 0!==e?e:t.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:ds(r.modifyHolidays()),outsideClickIgnoreClass:r.props.outsideClickIgnoreClass,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:null!==(n=r.props.dropdownMode)&&void 0!==n?n:t.defaultProps.dropdownMode}),r.props.children):null},r.renderAriaLiveRegion=function(){var e,n,i=r.props.locale,o=null!==(e=r.props.dateFormat)&&void 0!==e?e:t.defaultProps.dateFormat,s=r.props.showTimeInput||r.props.showTimeSelect?"PPPPp":"PPPP";return n=r.props.selectsRange?"Selected start date: ".concat(Sa(r.props.startDate,{dateFormat:s,locale:i}),". ").concat(r.props.endDate?"End date: "+Sa(r.props.endDate,{dateFormat:s,locale:i}):""):r.props.showTimeSelectOnly?"Selected time: ".concat(Sa(r.props.selected,{dateFormat:o,locale:i})):r.props.showYearPicker?"Selected year: ".concat(Sa(r.props.selected,{dateFormat:"yyyy",locale:i})):r.props.showMonthYearPicker?"Selected month: ".concat(Sa(r.props.selected,{dateFormat:"MMMM yyyy",locale:i})):r.props.showQuarterYearPicker?"Selected quarter: ".concat(Sa(r.props.selected,{dateFormat:"yyyy, QQQ",locale:i})):"Selected date: ".concat(Sa(r.props.selected,{dateFormat:s,locale:i})),a.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n)},r.renderDateInput=function(){var e,n,i=Qe(r.props.className,((e={})[r.props.outsideClickIgnoreClass||t.defaultProps.outsideClickIgnoreClass]=r.state.open,e)),o=r.props.customInput||a.createElement("input",{type:"text"}),s=r.props.customInputRef||"ref";return(0,a.cloneElement)(o,((n={})[s]=function(e){r.input=e},n.value=r.getInputValue(),n.onBlur=r.handleBlur,n.onChange=r.handleChange,n.onClick=r.onInputClick,n.onFocus=r.handleFocus,n.onKeyDown=r.onInputKeyDown,n.id=r.props.id,n.name=r.props.name,n.form=r.props.form,n.autoFocus=r.props.autoFocus,n.placeholder=r.props.placeholderText,n.disabled=r.props.disabled,n.autoComplete=r.props.autoComplete,n.className=Qe(o.props.className,i),n.title=r.props.title,n.readOnly=r.props.readOnly,n.required=r.props.required,n.tabIndex=r.props.tabIndex,n["aria-describedby"]=r.props.ariaDescribedBy,n["aria-invalid"]=r.props.ariaInvalid,n["aria-labelledby"]=r.props.ariaLabelledBy,n["aria-required"]=r.props.ariaRequired,n))},r.renderClearButton=function(){var e=r.props,t=e.isClearable,n=e.disabled,i=e.selected,o=e.startDate,s=e.endDate,l=e.clearButtonTitle,u=e.clearButtonClassName,c=void 0===u?"":u,d=e.ariaLabelClose,h=void 0===d?"Close":d,p=e.selectedDates,m=e.readOnly;return!t||m||null==i&&null==o&&null==s&&!(null===p||void 0===p?void 0:p.length)?null:a.createElement("button",{type:"button",className:Qe("react-datepicker__close-icon",c,{"react-datepicker__close-icon--disabled":n}),disabled:n,"aria-label":h,onClick:r.onClearClick,title:l,tabIndex:-1})},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return ma(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,outsideClickIgnoreClass:qs,readOnly:!1,rangeSeparator:" - ",withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:12,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(e,t){var n,r,i,o,a,s;e.inline&&(a=e.selected,s=this.props.selected,a&&s?jr(a)!==jr(s)||Nr(a)!==Nr(s):a!==s)&&this.setPreSelection(this.props.selected),void 0!==this.state.monthSelectedIn&&e.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),e.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:cs(this.props.highlightDates)}),t.focused||La(e.selected,this.props.selected)||this.setState({inputValue:null}),t.open!==this.state.open&&(!1===t.open&&!0===this.state.open&&(null===(r=(n=this.props).onCalendarOpen)||void 0===r||r.call(n)),!0===t.open&&!1===this.state.open&&(null===(o=(i=this.props).onCalendarClose)||void 0===o||o.call(i)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var e=this.props,t=e.showIcon,n=e.icon,r=e.calendarIconClassname,i=e.calendarIconClassName,o=e.toggleCalendarOnIconClick,s=this.state.open;return r&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),a.createElement("div",{className:"react-datepicker__input-container".concat(t?" react-datepicker__view-calendar-icon":"")},t&&a.createElement(zs,fa({icon:n,className:Qe(i,!i&&r,s&&"react-datepicker-ignore-onclickoutside")},o?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var e=this.renderCalendar();if(this.props.inline)return e;if(this.props.withPortal){var t=this.state.open?a.createElement(Ks,{enableTabLoop:this.props.enableTabLoop},a.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},e)):null;return this.state.open&&this.props.portalId&&(t=a.createElement(Hs,fa({portalId:this.props.portalId},this.props),t)),a.createElement("div",null,this.renderInputContainer(),t)}return a.createElement(Ys,fa({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:e,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t}(a.Component),Zs="input",Xs="navigate";const Js={TRAINING_SYSTEMS:{practical_periodization:"Practical Periodization",high_volume:"High Volume Training",polarized:"Polarized Training",base_building:"Base Building",competitive:"Competitive Training"},EQUIPMENT:{cyclete:"Cyclete",elliptigo:"ElliptiGO",runeq:"RunEQ",running:"Running",bike:"Bike",standup_bike:"Stand-up Bike"},PHASES:{base:"Base Phase",build:"Build Phase",peak:"Peak Phase",taper:"Taper Phase",recovery:"Recovery Phase"},WORKOUT_TYPES:{easy:"Easy Run",tempo:"Tempo Run",intervals:"Intervals",long_run:"Long Run",hills:"Hill Workout",recovery:"Recovery",brick:"Brick Workout",bike:"Bike Workout"},INTENSITY_LABELS:{easy:"Easy",moderate:"Moderate",comfortablyHard:"Comfortably Hard",comfortably_hard:"Comfortably Hard",thresholdPace:"Threshold Pace",threshold_pace:"Threshold Pace",tempoPlus:"Tempo Plus",tempo_plus:"Tempo Plus",hard:"Hard",very_hard:"Very Hard",veryHard:"Very Hard",max_effort:"Maximum Effort",maxEffort:"Maximum Effort"}};function $s(e){if(!e)return"";const t=e.toLowerCase();return Js.EQUIPMENT[t]||nl(e)}function el(e){return e?Js.PHASES[e.toLowerCase()]||nl(e):""}function tl(e){if(!e)return"";if(Js.INTENSITY_LABELS[e])return Js.INTENSITY_LABELS[e];let t=e.replace(/([a-z])([A-Z])/g,"$1 $2");return t=t.replace(/_/g," "),t===e&&e.includes(" ")&&e.charAt(0)===e.charAt(0).toUpperCase()?e:nl(t)}function nl(e){if(!e)return"";const t=["a","an","and","as","at","but","by","for","in","of","on","or","the","to","with"];return e.toLowerCase().split(" ").map((e,n)=>0===n?e.charAt(0).toUpperCase()+e.slice(1):t.includes(e)?e:e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}const rl=a.createContext();function il(e){let{children:t}=e;const[n,r]=(0,a.useState)([]),i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;const i=Date.now()+Math.random(),a={id:i,message:e,type:t,duration:n};return r(e=>[...e,a]),n>0&&setTimeout(()=>{o(i)},n),i},o=e=>{r(t=>t.filter(t=>t.id!==e))};return(0,je.jsxs)(rl.Provider,{value:{showToast:i,success:(e,t)=>i(e,"success",t),error:(e,t)=>i(e,"error",t),warning:(e,t)=>i(e,"warning",t),info:(e,t)=>i(e,"info",t)},children:[t,(0,je.jsx)("div",{className:"toast-container",children:n.map(e=>(0,je.jsx)(ol,{message:e.message,type:e.type,onClose:()=>o(e.id)},e.id))})]})}function ol(e){let{message:t,type:n,onClose:r}=e;const[i,o]=(0,a.useState)(!1);(0,a.useEffect)(()=>{setTimeout(()=>o(!0),10)},[]);const s=()=>{o(!1),setTimeout(r,300)};return(0,je.jsx)("div",{className:"toast toast-".concat(n," ").concat(i?"toast-visible":""),onClick:s,children:(0,je.jsxs)("div",{className:"toast-content",children:[(0,je.jsxs)("span",{className:"toast-icon",children:["success"===n&&"\u2713","error"===n&&"\u2715","warning"===n&&"\u26a0","info"===n&&"\u2139"]}),(0,je.jsx)("span",{className:"toast-message",children:t}),(0,je.jsx)("button",{className:"toast-close",onClick:s,"aria-label":"Close",children:"\xd7"})]})})}function al(){const e=a.useContext(rl);if(!e)throw new Error("useToast must be used within ToastProvider");return e}function sl(e){let{selected:t,onChange:n,minDate:r,maxDate:i,placeholder:o}=e;return(0,je.jsx)(Qs,{selected:t,onChange:n,minDate:r,maxDate:i,placeholderText:o,className:"modern-date-input",wrapperClassName:"modern-date-wrapper",calendarClassName:"modern-calendar",popperClassName:"modern-popper",showPopperArrow:!1,dateFormat:"MMMM d, yyyy",popperPlacement:"bottom-start",style:{fontSize:"1.1rem",padding:"14px 16px",minWidth:"220px",border:"2px solid rgba(0, 212, 255, 0.3)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.05)",color:"#fff",cursor:"pointer"}})}function ll(e){let{value:t,onChange:n,maxValue:r,unit:i,zones:o}=e;const[s,l]=(0,a.useState)(!1),u=a.useRef(null),c=225,d=(c+t/r*270)*Math.PI/180,h=150,p=150,m=120,f=h+m*Math.cos(d),g=p+m*Math.sin(d),y=o.find(e=>t>=e.min&&t<=e.max)||o[0],v=e=>{l(!0),e.preventDefault()},b=a.useCallback(e=>{if(!s||!u.current)return;e.preventDefault();const t=u.current.getBoundingClientRect(),i=e.clientX||e.touches&&e.touches[0].clientX,o=e.clientY||e.touches&&e.touches[0].clientY,a=i-t.left-h,l=o-t.top-p;let c,d=180*Math.atan2(l,a)/Math.PI;if(d<0&&(d+=360),d>=225||d<=135){c=d>=225?d-225:d+135;const e=Math.round(c/270*r);n(Math.max(0,Math.min(r,e)))}},[s,h,p,r,n]),w=a.useCallback(()=>{l(!1)},[]);return a.useEffect(()=>{if(s)return document.addEventListener("mousemove",b),document.addEventListener("mouseup",w),document.addEventListener("touchmove",b,{passive:!1}),document.addEventListener("touchend",w),()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",w),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",w)}},[s,b,w]),(0,je.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"20px 0",userSelect:"none"},children:[(0,je.jsxs)("div",{ref:u,style:{position:"relative",width:"300px",height:"300px",cursor:s?"grabbing":"grab",touchAction:"none"},onMouseDown:v,onTouchStart:v,children:[(0,je.jsxs)("svg",{width:"300",height:"300",style:{position:"absolute"},children:[o.map((e,t)=>{const n=c+e.min/r*270,i=c+e.max/r*270,o=n*Math.PI/180,a=i*Math.PI/180,s=h+m*Math.cos(o),l=p+m*Math.sin(o),u=h+m*Math.cos(a),d=p+m*Math.sin(a),f=i-n>180?1:0;return(0,je.jsx)("path",{d:"M ".concat(s," ").concat(l," A ").concat(m," ").concat(m," 0 ").concat(f," 1 ").concat(u," ").concat(d),stroke:e.color,strokeWidth:"20",fill:"none",opacity:.3},t)}),t>0&&(0,je.jsx)("path",{d:"M ".concat(h+m*Math.cos(c*Math.PI/180)," ").concat(p+m*Math.sin(c*Math.PI/180)," A ").concat(m," ").concat(m," 0 ").concat(t/r*270>180?1:0," 1 ").concat(f," ").concat(g),stroke:y.color,strokeWidth:"8",fill:"none"})]}),(0,je.jsx)("div",{style:{position:"absolute",left:f-15,top:g-15,width:"30px",height:"30px",borderRadius:"50%",backgroundColor:y.color,border:"3px solid white",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",cursor:"grab",zIndex:10}}),(0,je.jsxs)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",textAlign:"center",pointerEvents:"none"},children:[(0,je.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:y.color},children:t}),(0,je.jsx)("div",{style:{fontSize:"0.9rem",color:"#D1D5DB",marginTop:"4px"},children:i}),(0,je.jsx)("div",{style:{fontSize:"0.8rem",color:y.color,marginTop:"8px",fontWeight:"500"},children:y.label})]})]}),(0,je.jsx)("div",{style:{display:"flex",gap:"8px",marginTop:"16px",flexWrap:"wrap",justifyContent:"center"},children:o.map((e,r)=>(0,je.jsx)("button",{onClick:()=>n(Math.floor((e.min+e.max)/2)),style:{padding:"6px 12px",borderRadius:"20px",border:"2px solid ".concat(e.color),backgroundColor:t>=e.min&&t<=e.max?e.color:"transparent",color:t>=e.min&&t<=e.max?"white":e.color,fontSize:"0.8rem",cursor:"pointer",transition:"all 0.2s ease"},children:e.label},r))})]})}const ul=function(e){let{onComplete:t}=e;const n=re(),r=al(),[i,o]=(0,a.useState)(1),[s,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)({goal:"",raceDistance:"",raceElevationProfile:"",experienceLevel:"",currentRaceTime:"",currentWeeklyMileage:"",currentLongRunDistance:"",recentRaceDistance:"",recentRaceTime:"",runsPerWeek:"",availableDays:[],preferredBikeDays:[],longRunDay:"",hardSessionsPerWeek:"",hardSessionDays:[],startDate:"",raceDate:"",missedWorkoutPreference:"modify",standUpBikeType:null,runningStatus:"active",crossTrainingEquipment:{pool:!1,elliptical:!1,stationaryBike:!1,swimming:!1,rowing:!1},location:"",climate:"",trainingStyle:"adventure",trainingPhilosophy:"practical_periodization",hasGarmin:null}),h=(e,t)=>{d(n=>(0,u.A)((0,u.A)({},n),{},{[e]:t}))},p=e=>5!==e,m=async()=>{try{if(!c.currentRaceTime)return void r.warning("Goal race time is required to calculate your training paces. Please select your target race time.");const e=((e,t)=>{if(!e||!t||0===t.length)return{adjustedDate:e,wasAdjusted:!1};const n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r=new Date(e+"T00:00:00"),i=new Date(r);let o=0;for(;o<7;){const a=n[r.getDay()];if(t.includes(a)){const t=r.getFullYear(),o=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0"),l="".concat(t,"-").concat(o,"-").concat(s),u=r.getTime()!==i.getTime();return u&&Ne.log("\ud83d\udcc5 Start date adjusted from ".concat(e," (").concat(n[i.getDay()],") to ").concat(l," (").concat(a,") - original date was a rest day")),{adjustedDate:l,wasAdjusted:u,originalDayName:n[i.getDay()],newDayName:a}}r.setDate(r.getDate()+1),o++}return{adjustedDate:e,wasAdjusted:!1}})(c.startDate,c.availableDays);if(e.wasAdjusted){c.startDate=e.adjustedDate;const t="Your start date has been automatically adjusted from ".concat(e.originalDayName," to ").concat(e.newDayName," because ").concat(e.originalDayName," is marked as a rest day in your schedule.");Ne.log("\u26a0\ufe0f ".concat(t)),r.info(t,8e3)}l(!0),Ne.log("\ud83e\udd16 Generating AI training plan...");const i=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].filter(e=>!c.availableDays.includes(e)),o={raceDistance:c.raceDistance,raceTime:c.currentRaceTime,raceDate:c.raceDate?new Date(c.raceDate).toISOString():(new Date).toISOString(),raceElevationProfile:c.raceElevationProfile||"",currentWeeklyMileage:c.currentWeeklyMileage,currentLongRun:c.currentLongRunDistance,recentRaceTime:c.recentRaceTime||c.currentRaceTime,recentRaceDistance:c.recentRaceDistance||c.raceDistance,runsPerWeek:c.availableDays.length,availableDays:c.availableDays,restDays:i,longRunDay:c.longRunDay,qualityDays:c.hardSessionDays,standUpBikeType:c.standUpBikeType,preferredBikeDays:c.preferredBikeDays,crossTrainingEquipment:c.crossTrainingEquipment,experienceLevel:c.experienceLevel,climate:c.climate,location:c.location,runningStatus:c.runningStatus,units:"imperial"};Ne.log("\ud83d\udc64 User profile:",o);const a=await Ye.generateTrainingPlan(o);if(!a.success)throw new Error("Failed to generate plan");Ne.log("\u2705 AI training plan created successfully"),await t(c,a.plan),n("/welcome")}catch(e){console.error("Error in plan generation or saving:",e),r.error("There was a problem creating or saving your plan. Please try again. Error: "+e.message,1e4)}finally{l(!1)}};return s?(0,je.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 20px",textAlign:"center"},children:[(0,je.jsx)("div",{style:{width:"60px",height:"60px",border:"4px solid rgba(0, 212, 255, 0.2)",borderTop:"4px solid #00d4ff",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"24px"}}),(0,je.jsx)("h2",{style:{color:"#fff",marginBottom:"12px"},children:"Generating Your Personalized Training Plan..."}),(0,je.jsx)("p",{style:{color:"#9CA3AF",maxWidth:"400px"},children:"Our AI coach is analyzing your goals, fitness level, and schedule to create a custom plan just for you."}),(0,je.jsx)("p",{style:{color:"#6B7280",fontSize:"0.9rem",marginTop:"8px"},children:"This may take 10-15 seconds..."}),(0,je.jsx)("style",{children:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        "})]}):(0,je.jsx)("div",{style:{minHeight:"100vh",padding:"20px 0"},children:(0,je.jsxs)("div",{className:"container",children:[(0,je.jsx)("div",{className:"progress-bar",style:{marginBottom:"20px"},children:(0,je.jsx)("div",{className:"progress-fill",style:{width:"".concat(i/7*100,"%")}})}),(0,je.jsx)("div",{style:{textAlign:"center",marginBottom:"20px"},children:(0,je.jsxs)("p",{style:{color:"#E5E7EB",margin:0},children:["Step ",i," of ",7]})}),(0,je.jsxs)("div",{className:"card fade-in",children:[function(){switch(i){case 1:return(0,je.jsxs)("div",{children:[(0,je.jsx)("h2",{style:{color:"#FFFFFF",fontWeight:"700",fontSize:"1.75rem",marginBottom:"16px"},children:"Training Goals & Background"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Let's understand your running journey!"})," We'll collect your basic info to create the perfect plan."]}),(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"What's your main training goal?"}),(0,je.jsx)("div",{className:"card-grid",children:[{id:"race",name:"Train for a race",icon:"\ud83c\udfc6"},{id:"distance",name:"Run a specific distance",icon:"\ud83d\udccf"},{id:"fitness",name:"General fitness",icon:"\ud83d\udcaa"},{id:"return",name:"Return to running",icon:"\ud83d\udd04"}].map(e=>(0,je.jsxs)("div",{className:"equipment-card ".concat(c.goal===e.id?"selected":""),onClick:()=>h("goal",e.id),children:[(0,je.jsx)("div",{className:"equipment-icon",children:e.icon}),(0,je.jsx)("p",{className:"equipment-name",children:e.name})]},e.id))})]}),(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"What distance are you training for?"}),(0,je.jsx)("div",{className:"card-grid",children:[{id:"5K",name:"5K",popular:!0},{id:"10K",name:"10K",popular:!0},{id:"Half",name:"Half Marathon",popular:!0},{id:"Marathon",name:"Marathon",popular:!0},{id:"Ultra",name:"Ultra Marathon",badge:"We support 50K+!"},{id:"Custom",name:"Custom Distance",badge:"Any distance!"}].map(e=>(0,je.jsxs)("div",{className:"equipment-card ".concat(c.raceDistance===e.id?"selected":""),onClick:()=>h("raceDistance",e.id),children:[(0,je.jsx)("p",{className:"equipment-name",children:e.name}),e.popular&&(0,je.jsx)("div",{className:"badge badge-success",children:"Popular"}),e.badge&&(0,je.jsx)("div",{className:"badge badge-info",children:e.badge})]},e.id))})]}),(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"What's the elevation profile of your race?"}),(0,je.jsx)("p",{children:"This helps us customize your hill training for your specific race demands!"}),(0,je.jsx)("div",{className:"card-grid",children:[{id:"flat",name:"\ud83c\udfd9\ufe0f Flat",desc:"Minimal elevation change",badge:"Speed Focus"},{id:"rolling",name:"\ud83c\udf0a Rolling",desc:"Gentle hills throughout",badge:"Balanced"},{id:"moderate",name:"\u26f0\ufe0f Moderate",desc:"Some significant hills",badge:"Hill Training"},{id:"hilly",name:"\ud83c\udfd4\ufe0f Hilly",desc:"Major elevation challenges",badge:"Power Focus"}].map(e=>(0,je.jsxs)("div",{className:"card ".concat(c.raceElevationProfile===e.id?"selected":""),onClick:()=>h("raceElevationProfile",e.id),style:{cursor:"pointer",padding:"16px",textAlign:"center"},children:[(0,je.jsx)("h4",{style:{margin:"0 0 8px 0",fontSize:"1.1rem"},children:e.name}),(0,je.jsx)("p",{style:{margin:"0 0 8px 0",fontSize:"0.85rem",color:"#ccc"},children:e.desc}),(0,je.jsx)("div",{className:"badge badge-info",style:{fontSize:"0.75rem"},children:e.badge})]},e.id))}),(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Smart Training:"})," We'll adjust your hill workout frequency based on your race profile. Flat races get speed focus, hilly races get power development!"]})})]}),(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"How would you rate your running ability?"}),(0,je.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"16px"},children:[{id:"beginner",name:"Beginner",desc:"New to running or returning after a break"},{id:"intermediate",name:"Intermediate",desc:"Running regularly, some race experience"},{id:"advanced",name:"Advanced",desc:"Experienced with structured training"},{id:"elite",name:"Elite",desc:"Competitive athlete with advanced training needs"}].map(e=>(0,je.jsxs)("div",{className:"card ".concat(c.experienceLevel===e.id?"selected":""),onClick:()=>h("experienceLevel",e.id),style:{cursor:"pointer",padding:"20px"},children:[(0,je.jsx)("h4",{style:{margin:"0 0 8px 0"},children:e.name}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem"},children:e.desc})]},e.id))})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"What's your GOAL race time?"}),(0,je.jsx)("p",{style:{fontSize:"0.95rem",color:"#D1D5DB",marginBottom:"16px"},children:"\ud83d\udcaa Be ambitious! We'll build your training paces around your target finish time."}),(0,je.jsx)("div",{style:{marginBottom:"20px"},children:(0,je.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[(0,je.jsx)("button",{className:"btn ".concat(c.customTimeEntry?"btn-secondary":"btn-primary"),onClick:()=>{h("customTimeEntry",!1),h("currentRaceTime","")},type:"button",children:"\ud83d\udccb Quick Pick"}),(0,je.jsx)("button",{className:"btn ".concat(c.customTimeEntry?"btn-primary":"btn-secondary"),onClick:()=>{h("customTimeEntry",!0),h("currentRaceTime",""),h("customRaceDistance",c.raceDistance)},type:"button",children:"\u2328\ufe0f Enter My Goal"})]})}),c.customTimeEntry?(0,je.jsxs)("div",{children:[(0,je.jsxs)("div",{className:"form-group",children:[(0,je.jsx)("label",{className:"form-label",children:"Race Distance"}),(0,je.jsx)("div",{className:"form-input",style:{background:"rgba(99, 102, 241, 0.1)",border:"1px solid rgba(99, 102, 241, 0.3)",padding:"12px",cursor:"not-allowed"},children:c.raceDistance||"Not selected"}),(0,je.jsx)("p",{style:{fontSize:"0.85rem",color:"#D1D5DB",marginTop:"4px"},children:"Distance selected in Step 2"})]}),(0,je.jsxs)("div",{className:"form-group",children:[(0,je.jsx)("label",{className:"form-label",children:"Your Goal Time (HH:MM:SS or MM:SS)"}),(0,je.jsx)("input",{type:"text",className:"form-input",placeholder:"e.g., 1:45:30 or 25:45",value:c.customRaceTime||"",onChange:e=>{h("customRaceTime",e.target.value),c.raceDistance&&e.target.value&&h("currentRaceTime","".concat(c.raceDistance,"-").concat(e.target.value))}})]})]}):(0,je.jsxs)("div",{className:"form-group",children:[(0,je.jsxs)("label",{className:"form-label",children:["Select Your Goal ",c.raceDistance||"Race"," Time"]}),(0,je.jsxs)("select",{className:"form-input form-select",value:c.currentRaceTime,onChange:e=>h("currentRaceTime",e.target.value),required:!0,disabled:!c.raceDistance,children:[(0,je.jsx)("option",{value:"",children:c.raceDistance?"Select your ".concat(c.raceDistance," goal time"):"Select race distance first"}),"5K"===c.raceDistance&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("option",{value:"5K-15:00",children:"15:00 (Elite)"}),(0,je.jsx)("option",{value:"5K-18:00",children:"18:00 (Fast)"}),(0,je.jsx)("option",{value:"5K-20:00",children:"20:00 (Strong)"}),(0,je.jsx)("option",{value:"5K-22:00",children:"22:00 (Solid)"}),(0,je.jsx)("option",{value:"5K-25:00",children:"25:00 (Good)"}),(0,je.jsx)("option",{value:"5K-28:00",children:"28:00 (Steady)"}),(0,je.jsx)("option",{value:"5K-30:00",children:"30:00 (Building)"}),(0,je.jsx)("option",{value:"5K-35:00",children:"35:00 (Developing)"}),(0,je.jsx)("option",{value:"5K-40:00",children:"40:00 (Starting)"})]}),"10K"===c.raceDistance&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("option",{value:"10K-32:00",children:"32:00 (Elite)"}),(0,je.jsx)("option",{value:"10K-38:00",children:"38:00 (Fast)"}),(0,je.jsx)("option",{value:"10K-42:00",children:"42:00 (Strong)"}),(0,je.jsx)("option",{value:"10K-45:00",children:"45:00 (Solid)"}),(0,je.jsx)("option",{value:"10K-50:00",children:"50:00 (Good)"}),(0,je.jsx)("option",{value:"10K-55:00",children:"55:00 (Steady)"}),(0,je.jsx)("option",{value:"10K-60:00",children:"60:00 (Building)"}),(0,je.jsx)("option",{value:"10K-70:00",children:"70:00 (Developing)"}),(0,je.jsx)("option",{value:"10K-80:00",children:"80:00 (Starting)"})]}),"Half"===c.raceDistance&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("option",{value:"Half-1:10:00",children:"1:10:00 (Elite)"}),(0,je.jsx)("option",{value:"Half-1:25:00",children:"1:25:00 (Fast)"}),(0,je.jsx)("option",{value:"Half-1:35:00",children:"1:35:00 (Strong)"}),(0,je.jsx)("option",{value:"Half-1:45:00",children:"1:45:00 (Solid)"}),(0,je.jsx)("option",{value:"Half-2:00:00",children:"2:00:00 (Good)"}),(0,je.jsx)("option",{value:"Half-2:15:00",children:"2:15:00 (Steady)"}),(0,je.jsx)("option",{value:"Half-2:30:00",children:"2:30:00 (Building)"}),(0,je.jsx)("option",{value:"Half-2:45:00",children:"2:45:00 (Developing)"}),(0,je.jsx)("option",{value:"Half-3:00:00",children:"3:00:00 (Starting)"})]}),"Marathon"===c.raceDistance&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("option",{value:"Marathon-2:30:00",children:"2:30:00 (Elite)"}),(0,je.jsx)("option",{value:"Marathon-3:00:00",children:"3:00:00 (Very Fast)"}),(0,je.jsx)("option",{value:"Marathon-3:20:00",children:"3:20:00 (Fast)"}),(0,je.jsx)("option",{value:"Marathon-3:30:00",children:"3:30:00 (Strong)"}),(0,je.jsx)("option",{value:"Marathon-4:00:00",children:"4:00:00 (Solid)"}),(0,je.jsx)("option",{value:"Marathon-4:30:00",children:"4:30:00 (Good)"}),(0,je.jsx)("option",{value:"Marathon-5:00:00",children:"5:00:00 (Steady)"}),(0,je.jsx)("option",{value:"Marathon-5:30:00",children:"5:30:00 (Building)"}),(0,je.jsx)("option",{value:"Marathon-6:00:00",children:"6:00:00 (Developing)"}),(0,je.jsx)("option",{value:"Marathon-6:30:00",children:"6:30:00 (Starting)"})]})]}),!c.raceDistance&&(0,je.jsx)("p",{style:{fontSize:"0.85rem",color:"#FFB366",marginTop:"8px"},children:"\u2b06\ufe0f Please select your race distance first"})]}),c.currentRaceTime&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Goal set!"})," All your training paces will be calculated to help you achieve this time.",(0,je.jsx)("br",{}),(0,je.jsx)("span",{style:{fontSize:"0.85rem",color:"#D1D5DB"},children:"\ud83d\udca1 Workouts feeling too hard? You can always adjust your goal later!"})]})})]}),(0,je.jsxs)("div",{style:{marginBottom:"32px",marginTop:"40px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Recent Race Result (Recommended)"}),(0,je.jsxs)("p",{style:{marginBottom:"16px"},children:[(0,je.jsx)("strong",{children:"\ud83d\udcca Help us assess your current fitness!"})," A recent race time helps us set realistic training paces."]}),(0,je.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[(0,je.jsxs)("div",{children:[(0,je.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"#E5E7EB"},children:"Race Distance"}),(0,je.jsxs)("select",{className:"form-input form-select",value:c.recentRaceDistance,onChange:e=>h("recentRaceDistance",e.target.value),style:{width:"100%"},children:[(0,je.jsx)("option",{value:"",children:"Select distance"}),(0,je.jsx)("option",{value:"5K",children:"5K"}),(0,je.jsx)("option",{value:"10K",children:"10K"}),(0,je.jsx)("option",{value:"Half",children:"Half Marathon"}),(0,je.jsx)("option",{value:"Marathon",children:"Marathon"})]})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"#E5E7EB"},children:"Finish Time"}),(0,je.jsx)("input",{type:"text",className:"form-input",placeholder:"e.g., 1:07:35 or 25:30",value:c.recentRaceTime,onChange:e=>h("recentRaceTime",e.target.value),style:{width:"100%"}})]})]}),c.recentRaceDistance&&c.recentRaceTime&&(0,je.jsx)("div",{style:{marginTop:"16px",padding:"12px 16px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(5, 150, 105, 0.1) 100%)",borderRadius:"8px",border:"1px solid rgba(16, 185, 129, 0.3)"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\u2705 Got it!"})," Your ",c.recentRaceDistance," time of ",c.recentRaceTime," will help us calculate your VDOT and set appropriate training paces."]})}),!c.recentRaceDistance&&!c.recentRaceTime&&(0,je.jsx)("p",{style:{marginTop:"12px",fontSize:"0.85rem",color:"#9CA3AF",fontStyle:"italic"},children:"\ud83d\udca1 No recent race? No problem! We'll use your goal time to estimate training paces."})]}),(0,je.jsxs)("div",{style:{marginBottom:"32px",marginTop:"40px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Current Training Assessment"}),(0,je.jsx)("p",{children:"Tell us about your current training so we can create a safe, progressive plan."}),(0,je.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,je.jsx)("h4",{style:{color:"#F8F9FA",fontWeight:"600",fontSize:"1.1rem",marginBottom:"10px"},children:"What's your current weekly mileage?"}),(0,je.jsx)("p",{style:{fontSize:"0.9rem",margin:"0 0 24px 0",color:"#ccc"},children:"Include all running and running-equivalent activities (cycling at 3:1 ratio, elliptical at 2:1)"}),(0,je.jsx)(ll,{value:parseInt(c.currentWeeklyMileage)||0,onChange:e=>h("currentWeeklyMileage",e.toString()),maxValue:80,unit:"miles/week",zones:[{min:0,max:10,label:"Building Base",color:"#4CAF50"},{min:11,max:25,label:"Light Base",color:"#2196F3"},{min:26,max:40,label:"Solid Base",color:"#FF9800"},{min:41,max:60,label:"High Volume",color:"#F44336"},{min:61,max:80,label:"Elite Volume",color:"#9C27B0"}]})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("h4",{style:{color:"#F8F9FA",fontWeight:"600",fontSize:"1.1rem",marginBottom:"10px"},children:"What's your current long run distance?"}),(0,je.jsx)("p",{style:{fontSize:"0.9rem",margin:"0 0 24px 0",color:"#ccc"},children:"Your longest single run in the past 4 weeks"}),(0,je.jsx)(ll,{value:parseInt(c.currentLongRunDistance)||0,onChange:e=>h("currentLongRunDistance",e.toString()),maxValue:26,unit:"miles",zones:[{min:0,max:3,label:"Building Base",color:"#4CAF50"},{min:4,max:8,label:"5K-10K Ready",color:"#2196F3"},{min:9,max:13,label:"Half Base",color:"#FF9800"},{min:14,max:18,label:"Strong Endurance",color:"#F44336"},{min:19,max:26,label:"Marathon Ready",color:"#9C27B0"}]})]})]})]});case 2:return(0,je.jsxs)("div",{children:[(0,je.jsx)("h2",{style:{color:"#FFFFFF",fontWeight:"700",fontSize:"1.75rem",marginBottom:"16px"},children:"Training Schedule & Frequency"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83d\uddd3\ufe0f Let's plan your training week!"})," Tell us about your schedule and preferences."]}),(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"How many days per week would you like to train?"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83d\ude80 Unlike other apps, we don't restrict your choices!"})," Pick what works for your schedule."]}),(0,je.jsx)("div",{className:"card-grid",children:[{days:3,desc:"Minimal time commitment",good:"Busy schedules, recovery focus",recommended:"beginner"===c.experienceLevel},{days:4,desc:"Balanced approach",good:"Most popular, sustainable",recommended:"intermediate"===c.experienceLevel},{days:5,desc:"Serious training",good:"Race goals, fitness gains",recommended:"advanced"===c.experienceLevel},{days:6,desc:"High volume",good:"Perfect for stand-up bike integration",recommended:!1},{days:7,desc:"Maximum frequency",good:"Elite athletes, varied intensities",recommended:"elite"===c.experienceLevel}].map(e=>(0,je.jsxs)("div",{className:"card ".concat(c.runsPerWeek===e.days?"selected":""),onClick:()=>h("runsPerWeek",e.days),style:{cursor:"pointer",textAlign:"center"},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",marginBottom:"6px"},children:[(0,je.jsx)("h4",{style:{fontSize:"1.4rem",margin:0,color:"#00D4FF"},children:e.days}),e.recommended&&(0,je.jsx)("span",{style:{fontSize:"0.8rem"},children:"\u2b50"})]}),(0,je.jsx)("p",{style:{margin:"0 0 8px 0",fontWeight:"600"},children:e.desc}),(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.8rem",color:"#D1D5DB"},children:["Good for: ",e.good]}),e.recommended&&(0,je.jsxs)("div",{className:"badge badge-success",style:{marginTop:"8px"},children:["Recommended for ","advanced"===c.experienceLevel?"advanced runners":"".concat(c.experienceLevel," runners")]})]},e.days))})]}),c.runsPerWeek&&(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Which days are you available to train?"}),(0,je.jsxs)("p",{children:["Select ",c.runsPerWeek," days that work best for your schedule."]}),(0,je.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"10px",maxWidth:"500px",margin:"0 auto"},children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(e=>{const t=c.availableDays.includes(e),n=c.availableDays.length>=c.runsPerWeek,r=!t&&n;return(0,je.jsxs)("div",{className:"equipment-card ".concat(t?"selected":""," ").concat(r?"disabled":""),onClick:()=>{if(c.availableDays.includes(e)){const t=c.availableDays.filter(t=>t!==e);h("availableDays",t)}else if(c.availableDays.length<c.runsPerWeek){const t=[...c.availableDays,e];h("availableDays",t)}},style:{opacity:r?.4:1,cursor:r?"not-allowed":"pointer"},children:[(0,je.jsx)("p",{className:"equipment-name",children:e}),r&&(0,je.jsx)("span",{style:{fontSize:"0.7rem",color:"#D1D5DB"},children:"Limit reached"})]},e)})}),(0,je.jsx)("div",{className:"card",style:{background:c.availableDays.length===c.runsPerWeek?"rgba(0, 255, 136, 0.1)":"rgba(255, 184, 0, 0.1)",border:c.availableDays.length===c.runsPerWeek?"1px solid rgba(0, 255, 136, 0.3)":"1px solid rgba(255, 184, 0, 0.3)",marginTop:"16px"},children:(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem"},children:c.availableDays.length===c.runsPerWeek?"\u2705 Perfect! Selected all ".concat(c.runsPerWeek," training days."):"Selected: ".concat(c.availableDays.length,"/").concat(c.runsPerWeek," days ").concat(c.availableDays.length<c.runsPerWeek?"(select more)":"")})})]}),c.availableDays.length===c.runsPerWeek&&(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Which day do you prefer for your long run?"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83c\udfc3\u200d\u2642\ufe0f Personal preference matters!"})," Pick the day that works best for your schedule."]}),(0,je.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"10px",maxWidth:"500px",margin:"0 auto"},children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].filter(e=>c.availableDays.includes(e)).map(e=>(0,je.jsxs)("div",{className:"equipment-card ".concat(c.longRunDay===e?"selected":""),onClick:()=>h("longRunDay",e),children:[(0,je.jsx)("p",{className:"equipment-name",children:e}),("Saturday"===e||"Sunday"===e)&&(0,je.jsx)("div",{className:"badge badge-success",style:{marginTop:"4px",fontSize:"0.7rem"},children:"Popular choice"})]},e))}),c.longRunDay&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Great choice!"})," Your long runs will be scheduled on ",c.longRunDay,"s."]})})]}),c.longRunDay&&(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Let's talk about your hard sessions!"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83c\udfc3\u200d\u2642\ufe0f Coach's question:"})," In addition to your long run, how many hard sessions (speed, tempo, hills) would you like per week?"]}),(0,je.jsx)("div",{style:{display:"flex",gap:"16px",justifyContent:"center"},children:[1,2].map(e=>(0,je.jsxs)("div",{className:"card ".concat(c.hardSessionsPerWeek===e?"selected":""),onClick:()=>h("hardSessionsPerWeek",e),style:{cursor:"pointer",textAlign:"center",minWidth:"120px"},children:[(0,je.jsx)("h4",{style:{fontSize:"2rem",margin:"0 0 8px 0",color:"#00D4FF"},children:e}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem"},children:1===e?"One hard session":"Two hard sessions"}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#D1D5DB"},children:1===e?"Focus & recovery":"Balanced training"})]},e))}),c.hardSessionsPerWeek&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Perfect!"})," You'll get ",c.hardSessionsPerWeek," quality ",1===c.hardSessionsPerWeek?"session":"sessions"," per week, plus your long run for a total of ",c.hardSessionsPerWeek+1," focused training days."]})})]}),c.hardSessionsPerWeek&&(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"What days do you want your hard sessions?"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83d\udcaa Your preference matters!"})," Pick the days that work best for your energy and schedule."]}),(0,je.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"10px",maxWidth:"500px",margin:"0 auto"},children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].filter(e=>c.availableDays.includes(e)&&e!==c.longRunDay).map(e=>{const t=c.hardSessionDays.includes(e),n=c.hardSessionDays.length>=c.hardSessionsPerWeek,r=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].indexOf(e),i=c.hardSessionDays.some(e=>{const t=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].indexOf(e);return 1===Math.abs(r-t)}),o=!t&&n||!t&&i,a=!t&&i?"Hard sessions need recovery days between them":null;return(0,je.jsxs)("div",{className:"equipment-card ".concat(t?"selected":""," ").concat(o?"disabled":""),onClick:()=>{if(c.hardSessionDays.includes(e)){const t=c.hardSessionDays.filter(t=>t!==e);h("hardSessionDays",t)}else if(c.hardSessionDays.length<c.hardSessionsPerWeek&&!i){const t=[...c.hardSessionDays,e];h("hardSessionDays",t)}},style:{opacity:o?.4:1,cursor:o?"not-allowed":"pointer",position:"relative"},title:a||"",children:[(0,je.jsx)("p",{className:"equipment-name",children:e}),a&&(0,je.jsx)("div",{style:{position:"absolute",bottom:"2px",left:"50%",transform:"translateX(-50%)",fontSize:"0.65rem",color:"#FF6B6B",textAlign:"center",lineHeight:"1.1",whiteSpace:"nowrap"},children:"\u26a0\ufe0f Need recovery"}),o&&!a&&(0,je.jsx)("span",{style:{fontSize:"0.7rem",color:"#D1D5DB"},children:"Limit reached"})]},e)})}),(0,je.jsx)("div",{className:"card",style:{background:c.hardSessionDays.length===c.hardSessionsPerWeek?"rgba(0, 255, 136, 0.1)":"rgba(255, 184, 0, 0.1)",border:c.hardSessionDays.length===c.hardSessionsPerWeek?"1px solid rgba(0, 255, 136, 0.3)":"1px solid rgba(255, 184, 0, 0.3)",marginTop:"16px"},children:(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem"},children:c.hardSessionDays.length===c.hardSessionsPerWeek?"\u2705 Excellent! Your hard sessions will be on ".concat(c.hardSessionDays.join(" and "),", with your long run on ").concat(c.longRunDay,"."):"Selected: ".concat(c.hardSessionDays.length,"/").concat(c.hardSessionsPerWeek," hard session days ").concat(c.hardSessionDays.length<c.hardSessionsPerWeek?"(select more)":"")})}),c.hardSessionDays.length===c.hardSessionsPerWeek&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)",marginTop:"8px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Smart scheduling!"})," This gives you proper recovery between hard efforts and sets you up for training success."]})})]})]});case 3:return(0,je.jsxs)("div",{children:[(0,je.jsx)("h2",{style:{color:"#FFFFFF",fontWeight:"700",fontSize:"1.75rem",marginBottom:"16px"},children:"Training Dates"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83d\udcc5 Real dates, real planning!"})," Unlike other apps, we give you actual calendar dates."]}),(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"When would you like to start training?"}),(0,je.jsxs)("div",{className:"form-group",children:[(0,je.jsx)("label",{className:"form-label",children:"Start Date"}),(0,je.jsx)(sl,{selected:c.startDate?new Date(c.startDate+"T00:00:00"):null,onChange:e=>{if(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");h("startDate","".concat(t,"-").concat(n,"-").concat(r))}else h("startDate","")},minDate:new Date,placeholder:"Select your training start date"})]}),c.startDate&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Perfect!"})," Your training will begin on ",new Date(c.startDate+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),".",(0,je.jsx)("br",{}),"We'll schedule workouts on your selected days starting from this date."]})})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"When is your race?"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83c\udfc1 Goal-oriented training!"})," We'll work backwards from your race date to optimize your preparation."]}),(0,je.jsxs)("div",{className:"form-group",style:{marginBottom:"24px"},children:[(0,je.jsx)("label",{className:"form-label",children:"Race Date"}),(0,je.jsx)(sl,{selected:c.raceDate?new Date(c.raceDate+"T00:00:00"):null,onChange:e=>{if(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");h("raceDate","".concat(t,"-").concat(n,"-").concat(r))}else h("raceDate","")},minDate:c.startDate?new Date(c.startDate+"T00:00:00"):new Date,placeholder:"Select your race date"})]}),(0,je.jsx)("div",{style:{minHeight:"120px",marginTop:"16px"},children:c.raceDate&&c.startDate&&(()=>{const e=Math.ceil((new Date(c.raceDate)-new Date(c.startDate))/6048e5),t=c.raceDistance,n={"5K":6,"10K":8,Half:10,Marathon:12}[t]||12,r={"5K":8,"10K":10,Half:12,Marathon:16}[t]||16;let i,o;return e<n?(i={background:"rgba(255, 107, 107, 0.1)",border:"1px solid rgba(255, 107, 107, 0.5)"},o=(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("strong",{children:"\u26a0\ufe0f That's quite ambitious!"})," Your race is on ",new Date(c.raceDate+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),".",(0,je.jsx)("br",{}),"With only ",e," weeks, you'll need an aggressive plan. Most coaches recommend at least ",n," weeks for a ",t,".",(0,je.jsx)("br",{}),(0,je.jsx)("em",{style:{color:"#FFB366"},children:"\ud83d\udca1 Consider moving your start date earlier or choosing a later race for safer preparation."})]})):e<r?(i={background:"rgba(255, 179, 102, 0.1)",border:"1px solid rgba(255, 179, 102, 0.5)"},o=(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("strong",{children:"\ud83d\udcaa Challenging timeline!"})," Your race is on ",new Date(c.raceDate+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),".",(0,je.jsx)("br",{}),"With ",e," weeks, it's doable but you'll need to stay consistent. Most coaches prefer ",r," weeks for optimal ",t," preparation."]})):(i={background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)"},o=(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Perfect timeline!"})," Your race is on ",new Date(c.raceDate+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),".",(0,je.jsx)("br",{}),"With ",e," weeks to prepare, you'll have time for proper base building and peak training!"]})),(0,je.jsx)("div",{className:"card",style:i,children:(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem"},children:o})})})()}),(0,je.jsx)("div",{className:"card",style:{background:"rgba(255, 165, 0, 0.1)",border:"1px solid rgba(255, 165, 0, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83d\udca1 Pro tip:"})," Don't have a specific race yet? Pick a target date 12-16 weeks out - you can always adjust later!"]})})]})]});case 4:return(0,je.jsxs)("div",{children:[(0,je.jsx)("h2",{style:{color:"#FFFFFF",fontWeight:"700",fontSize:"1.75rem",marginBottom:"16px"},children:"Equipment & Training Preferences"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83d\ude80 Unique to Run+ Plans!"})," We're the only app with equipment-specific training."]}),(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Do you have a Garmin device?"}),(0,je.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",maxWidth:"400px",margin:"0 auto"},children:[(0,je.jsxs)("div",{className:"card ".concat(!0===c.hasGarmin?"selected":""),onClick:()=>h("hasGarmin",!0),style:{cursor:"pointer",textAlign:"center",padding:"24px"},children:[(0,je.jsx)("h4",{style:{margin:"0 0 8px 0",fontSize:"1.2rem"},children:"Yes"}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#D1D5DB"},children:"I have a Garmin"})]}),(0,je.jsxs)("div",{className:"card ".concat(!1===c.hasGarmin?"selected":""),onClick:()=>h("hasGarmin",!1),style:{cursor:"pointer",textAlign:"center",padding:"24px"},children:[(0,je.jsx)("h4",{style:{margin:"0 0 8px 0",fontSize:"1.2rem"},children:"No"}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#D1D5DB"},children:"I don't have one"})]})]}),!0===c.hasGarmin&&(0,je.jsxs)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:[(0,je.jsx)("h4",{style:{margin:"0 0 12px 0",color:"#FFFFFF",fontWeight:"600",fontSize:"1.1rem"},children:"Download the RunEQ Data Field"}),(0,je.jsx)("p",{style:{margin:"0 0 16px 0",fontSize:"0.95rem",color:"#E5E7EB"},children:"Track your bike workouts with RunEQ miles on your Garmin device."}),(0,je.jsx)("a",{href:"https://apps.garmin.com/apps/2327f1b2-a481-4c9e-b529-852e9989cf55",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"12px 24px",background:"rgba(0, 212, 255, 0.2)",border:"2px solid #00D4FF",borderRadius:"8px",color:"#00D4FF",textDecoration:"none",fontWeight:"600",fontSize:"1rem",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.background="rgba(0, 212, 255, 0.3)"},onMouseLeave:e=>{e.target.style.background="rgba(0, 212, 255, 0.2)"},children:"Get RunEQ Data Field"}),(0,je.jsx)("p",{style:{margin:"12px 0 0 0",fontSize:"0.85rem",color:"#D1D5DB"},children:"Your bike workouts will show RunEQ miles in the training plan"})]}),!1===c.hasGarmin&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"No problem!"})," Your bike workouts will show time and distance instead."]})})]}),(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Do you have any stand-up bikes?"}),(0,je.jsx)("div",{className:"equipment-grid",children:[{id:"cyclete",name:"Cyclete",desc:"Teardrop motion, excellent for distance training",badge:"Running-like motion"},{id:"elliptigo",name:"ElliptiGO",desc:"Elliptical motion, great for full-body workouts",badge:"Full body engagement"},{id:null,name:"Neither",desc:"Pure running training with basic cross-training options",badge:"Traditional approach"}].map(e=>(0,je.jsxs)("div",{className:"card ".concat(c.standUpBikeType===e.id?"selected":""),onClick:()=>h("standUpBikeType",e.id),style:{cursor:"pointer",textAlign:"center",display:"flex",flexDirection:"column",minHeight:"140px"},children:[(0,je.jsx)("h4",{style:{margin:"0 0 12px 0",color:"var(--runeq-primary)",fontSize:"1.2rem",minHeight:"28px"},children:e.name}),(0,je.jsx)("p",{style:{margin:"0 0 12px 0",fontSize:"0.9rem",flex:"1",minHeight:"40px"},children:e.desc}),(0,je.jsx)("div",{className:"badge badge-info",style:{alignSelf:"center"},children:e.badge})]},e.id||"none"))}),c.standUpBikeType&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Great choice!"})," You'll get ",$s(c.standUpBikeType),"-specific workouts with motion-optimized training and equipment-specific conversion factors."]})})]}),c.standUpBikeType&&(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Can you run right now?"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83c\udfe5 We support injured runners too!"})," Tell us about your current running status."]}),(0,je.jsx)("div",{style:{display:"grid",gap:"16px"},children:[{id:"active",name:"Yes - I can run",icon:"\ud83c\udfc3",desc:"Mix running with stand-up bike cross-training"},{id:"bikeOnly",name:"No - Bike only for now",icon:"\ud83d\udeb4",desc:"Injured or transitioning - bike workouts only until ready to run"},{id:"transitioning",name:"Transitioning back",icon:"\ud83d\udd04",desc:"Returning from injury - gradually add running to bike base"}].map(e=>(0,je.jsxs)("div",{className:"card ".concat(c.runningStatus===e.id?"selected":""),onClick:()=>h("runningStatus",e.id),style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"16px",padding:"16px"},children:[(0,je.jsx)("div",{style:{fontSize:"1.5rem"},children:e.icon}),(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsx)("h4",{style:{margin:"0 0 4px 0"},children:e.name}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#D1D5DB"},children:e.desc})]})]},e.id))}),"bikeOnly"===c.runningStatus&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83d\udcaa Perfect for injury recovery!"})," You'll get a complete ",$s(c.standUpBikeType)," training plan with tempo rides, intervals, long rides, and recovery days - all the training stimulus without the impact stress. When you're ready to run again, just update your profile!"]})}),"transitioning"===c.runningStatus&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(255, 179, 102, 0.1)",border:"1px solid rgba(255, 179, 102, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83d\udd04 Smart transition approach!"})," We'll start with mostly ",$s(c.standUpBikeType)," training and gradually reintroduce running over the first 4 weeks. This gives your body time to adapt safely."]})}),"active"===c.runningStatus&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Best of both worlds!"})," You'll get a mix of running and ",$s(c.standUpBikeType)," training for maximum aerobic development with reduced impact stress."]})})]}),c.standUpBikeType&&"bikeOnly"!==c.runningStatus&&c.availableDays.length>0&&(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsxs)("h3",{children:["Which days do you prefer for ",$s(c.standUpBikeType)," rides?"]}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83d\udeb4\u200d\u2642\ufe0f Smart scheduling!"})," Perfect for road closures, traffic patterns, or personal preference."]}),(0,je.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"10px",maxWidth:"500px",margin:"0 auto"},children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(e=>(0,je.jsx)("div",{className:"equipment-card ".concat(c.preferredBikeDays.includes(e)?"selected":""," ").concat(c.availableDays.includes(e)?"":"disabled"),onClick:()=>{if(!c.availableDays.includes(e))return;const t=c.preferredBikeDays.includes(e)?c.preferredBikeDays.filter(t=>t!==e):[...c.preferredBikeDays,e];h("preferredBikeDays",t)},style:{opacity:c.availableDays.includes(e)?1:.3,cursor:c.availableDays.includes(e)?"pointer":"not-allowed"},children:(0,je.jsxs)("p",{className:"equipment-name",children:[e,!c.availableDays.includes(e)&&(0,je.jsx)("span",{style:{fontSize:"0.7rem",display:"block"},children:"(Not available)"})]})},e))}),c.preferredBikeDays.length>0&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Perfect!"})," Selected ",c.preferredBikeDays.length," ",$s(c.standUpBikeType)," days: ",c.preferredBikeDays.join(", ")]})})]}),(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"What other cross-training equipment do you have access to?"}),(0,je.jsxs)("p",{style:{marginBottom:"16px"},children:[(0,je.jsx)("strong",{children:"\ud83c\udfca Expand your options!"})," Select any equipment you can use for cross-training when needed."]}),(0,je.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[{id:"pool",name:"Pool / Aqua Running",emoji:"\ud83c\udfca",description:"Deep water running with flotation belt"},{id:"elliptical",name:"Elliptical Machine",emoji:"\ud83c\udfc3",description:"Gym elliptical or home machine"},{id:"stationaryBike",name:"Stationary Bike",emoji:"\ud83d\udeb4",description:"Spin bike, Peloton, or indoor trainer"},{id:"swimming",name:"Swimming",emoji:"\ud83c\udfca",description:"Lap swimming (technique required)"},{id:"rowing",name:"Rowing Machine",emoji:"\ud83d\udea3",description:"Concept2 or similar rowing erg"}].map(e=>(0,je.jsxs)("button",{type:"button",onClick:()=>{const t=(0,u.A)((0,u.A)({},c.crossTrainingEquipment),{},{[e.id]:!c.crossTrainingEquipment[e.id]});h("crossTrainingEquipment",t)},style:{padding:"12px 16px",fontSize:"0.9rem",border:c.crossTrainingEquipment[e.id]?"2px solid #22c55e":"1px solid #333",background:c.crossTrainingEquipment[e.id]?"rgba(34, 197, 94, 0.1)":"#1a1a1a",color:c.crossTrainingEquipment[e.id]?"#22c55e":"#999",borderRadius:"6px",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.5rem"},children:e.emoji}),(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsxs)("div",{style:{fontWeight:"500"},children:[c.crossTrainingEquipment[e.id]?"\u2713 ":"",e.name]}),(0,je.jsx)("div",{style:{fontSize:"0.8rem",color:c.crossTrainingEquipment[e.id]?"#86efac":"#666",marginTop:"2px"},children:e.description})]})]},e.id))}),Object.values(c.crossTrainingEquipment).some(Boolean)&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",marginTop:"16px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83d\udcaa Great!"})," You'll have these options available when you need to adapt your training."]})}),!Object.values(c.crossTrainingEquipment).some(Boolean)&&(0,je.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#666"},children:"No equipment? No problem! You can always skip this section."})]})]});case 5:return(0,je.jsxs)("div",{children:[(0,je.jsx)("h2",{children:"Training Philosophy & Missed Workout Handling"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83c\udfaf Let's customize your training approach!"})," We'll adapt to your philosophy and real life."]}),(0,je.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,je.jsx)("h3",{children:"What happens when you miss a workout?"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83d\udd25 This is where other apps fail!"})," We adapt to your real life."]}),(0,je.jsx)("div",{style:{display:"grid",gap:"16px"},children:[{id:"reschedule",name:"Reschedule it",desc:"Move the workout to another day this week",icon:"\ud83d\udd04"},{id:"modify",name:"Modify the plan",desc:"Adjust upcoming workouts to keep me on track",icon:"\u26a1"},{id:"skip",name:"Skip and continue",desc:"Move on with the original schedule",icon:"\u23ed\ufe0f"}].map(e=>(0,je.jsxs)("div",{className:"card ".concat(c.missedWorkoutPreference===e.id?"selected":""),onClick:()=>h("missedWorkoutPreference",e.id),style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"16px"},children:[(0,je.jsx)("div",{style:{fontSize:"1.5rem"},children:e.icon}),(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsx)("h4",{style:{margin:"0 0 4px 0"},children:e.name}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem"},children:e.desc})]})]},e.id))})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.5rem",marginBottom:"12px"},children:"Choose Your Training System"}),(0,je.jsxs)("p",{style:{color:"#E5E7EB",fontSize:"1rem"},children:[(0,je.jsx)("strong",{style:{color:"#F8F9FA"},children:"\ud83c\udfaf Run+ Plans Advantage:"})," Multiple proven methodologies coming soon!"]}),(0,je.jsx)("div",{style:{display:"grid",gap:"16px"},children:[{id:"practical_periodization",name:"Real World Training",desc:"Life-first approach with clear phases and injury prevention focus",good:"Perfect for busy runners, proven results, real-world flexibility",icon:"\ud83c\udfe0",available:!0},{id:"80_20",name:"80/20 Training",desc:"80% easy running, 20% hard - sustainable approach",good:"Injury prevention, long-term development, elite-proven",icon:"\ud83d\udee1\ufe0f",available:!1},{id:"zone_based",name:"Zone-Based Training",desc:"Scientific approach using 5 intensity zones and pace targets",good:"Precise, data-driven, works for all distances",icon:"\ud83d\udd2c",available:!1},{id:"high_mileage",name:"High Mileage System",desc:"Build endurance through volume and strength runs",good:"Marathon-focused, builds durability and speed",icon:"\ud83d\udcaa",available:!1},{id:"time_trial",name:"Fitness Test Driven",desc:"Monthly time trials guide all your training paces",good:"Real-time fitness tracking, highly responsive",icon:"\ud83c\udfaf",available:!1}].map(e=>(0,je.jsxs)("div",{className:"card ".concat(c.trainingPhilosophy===e.id?"selected":""),onClick:()=>e.available&&h("trainingPhilosophy",e.id),style:{cursor:e.available?"pointer":"not-allowed",padding:"20px",opacity:e.available?1:.6,position:"relative"},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.5rem"},children:e.icon}),(0,je.jsx)("h4",{style:{margin:0,color:"#FFFFFF",fontWeight:"600"},children:e.name}),!e.available&&(0,je.jsx)("div",{style:{marginLeft:"auto",padding:"4px 8px",background:"rgba(255, 179, 102, 0.2)",border:"1px solid rgba(255, 179, 102, 0.4)",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"600",color:"#FFB366"},children:"\ud83d\ude80 Coming Soon"})]}),(0,je.jsx)("p",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"#E5E7EB"},children:e.desc}),(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.8rem",color:"#D1D5DB"},children:[(0,je.jsx)("strong",{style:{color:"#F8F9FA"},children:"Good for:"})," ",e.good]})]},e.id))})]})]});case 6:return(0,je.jsxs)("div",{children:[(0,je.jsx)("h2",{children:"Location & Climate"}),(0,je.jsxs)("p",{children:[(0,je.jsx)("strong",{children:"\ud83c\udf21\ufe0f Climate-smart training!"})," We adjust paces for your local conditions."]}),(0,je.jsxs)("div",{className:"form-group",children:[(0,je.jsxs)("label",{className:"form-label",children:["City, State/Country ",(0,je.jsx)("span",{style:{color:"#D1D5DB",fontWeight:"400"},children:"(optional)"})]}),(0,je.jsx)("input",{type:"text",className:"form-input",placeholder:"e.g., Darwin, Australia or Phoenix, Arizona",value:c.location,onChange:e=>h("location",e.target.value)})]}),(0,je.jsxs)("div",{className:"form-group",children:[(0,je.jsx)("label",{className:"form-label",children:"Climate Type"}),(0,je.jsxs)("select",{className:"form-input form-select",value:c.climate,onChange:e=>h("climate",e.target.value),children:[(0,je.jsx)("option",{value:"",children:"Select your climate"}),(0,je.jsx)("option",{value:"temperate",children:"Temperate (mild seasons)"}),(0,je.jsx)("option",{value:"hot_dry",children:"Hot & Dry (desert-like)"}),(0,je.jsx)("option",{value:"hot_humid",children:"Hot & Humid (tropical/subtropical)"}),(0,je.jsx)("option",{value:"cold",children:"Cold (long winters)"}),(0,je.jsx)("option",{value:"variable",children:"Variable (extreme seasons)"})]})]}),c.climate&&(0,je.jsxs)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:[(0,je.jsxs)("h4",{style:{margin:"0 0 8px 0",color:"#FFFFFF",fontWeight:"600"},children:["temperate"===c.climate&&"\ud83c\udf24\ufe0f Temperate Climate Adjustments","hot_dry"===c.climate&&"\ud83c\udfdc\ufe0f Hot & Dry Climate Adjustments","hot_humid"===c.climate&&"\ud83c\udf34 Hot & Humid Climate Adjustments","cold"===c.climate&&"\u2744\ufe0f Cold Climate Adjustments","variable"===c.climate&&"\ud83c\udf26\ufe0f Variable Climate Adjustments"]}),(0,je.jsxs)("div",{style:{fontSize:"0.9rem",color:"#E5E7EB"},children:["temperate"===c.climate&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,je.jsx)("strong",{children:"Seasonal pace adjustments"})," for spring/summer heat and winter cold"]}),(0,je.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,je.jsx)("strong",{children:"Moderate hydration guidance"})," during warmer months"]}),(0,je.jsxs)("p",{style:{margin:0},children:["\u2713 ",(0,je.jsx)("strong",{children:"Gear recommendations"})," for changing conditions"]})]}),"hot_dry"===c.climate&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,je.jsx)("strong",{children:"Aggressive pace reductions"})," during peak heat hours (10am-4pm)"]}),(0,je.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,je.jsx)("strong",{children:"Enhanced hydration protocols"})," with electrolyte guidance"]}),(0,je.jsxs)("p",{style:{margin:0},children:["\u2713 ",(0,je.jsx)("strong",{children:"Early morning scheduling"})," to avoid dangerous temperatures"]})]}),"hot_humid"===c.climate&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,je.jsx)("strong",{children:"Heat index calculations"})," - humidity makes 80\xb0F feel like 95\xb0F"]}),(0,je.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,je.jsx)("strong",{children:"Sweat rate adjustments"})," for reduced cooling efficiency"]}),(0,je.jsxs)("p",{style:{margin:0},children:["\u2713 ",(0,je.jsx)("strong",{children:"Recovery-focused pacing"})," to prevent heat exhaustion"]})]}),"cold"===c.climate&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,je.jsx)("strong",{children:"Extended warm-up protocols"})," for muscle activation"]}),(0,je.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,je.jsx)("strong",{children:"Layering strategies"})," for temperature regulation"]}),(0,je.jsxs)("p",{style:{margin:0},children:["\u2713 ",(0,je.jsx)("strong",{children:"Ice/snow safety"})," adjustments for footing and pace"]})]}),"variable"===c.climate&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,je.jsx)("strong",{children:"Adaptive training plans"})," that flex with seasonal extremes"]}),(0,je.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,je.jsx)("strong",{children:"Multi-season gear guidance"})," for year-round training"]}),(0,je.jsxs)("p",{style:{margin:0},children:["\u2713 ",(0,je.jsx)("strong",{children:"Weather-based workout swaps"})," when conditions are unsafe"]})]})]})]}),!c.climate&&(0,je.jsx)("div",{className:"card",style:{background:"rgba(255, 184, 0, 0.1)",border:"1px solid rgba(255, 184, 0, 0.3)"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem",color:"#E5E7EB"},children:[(0,je.jsx)("strong",{children:"\ud83d\udca1 Why this matters:"}),' A runner in Darwin, Australia complained that other apps gave "ridiculous paces" for tropical heat. We automatically adjust for your climate!']})})]});case 7:return(0,je.jsxs)("div",{children:[(0,je.jsx)("h2",{children:"\ud83c\udf89 Your Personalized Plan is Ready!"}),(0,je.jsx)("p",{children:"Based on your preferences, here's what makes your plan unique:"}),(0,je.jsxs)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)"},children:[(0,je.jsx)("h3",{children:"Your Run+ Plans Profile"}),(0,je.jsxs)("div",{style:{display:"grid",gap:"12px",textAlign:"left"},children:[(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Goal:"})," ",c.raceDistance," race training"]}),c.raceElevationProfile&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Race Profile:"})," ",c.raceElevationProfile.charAt(0).toUpperCase()+c.raceElevationProfile.slice(1)," course"]}),c.raceDate&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Race Date:"})," ",new Date(c.raceDate+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),c.startDate&&c.raceDate&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Training Duration:"})," ",Math.ceil((new Date(c.raceDate)-new Date(c.startDate))/6048e5)," weeks"]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Experience:"})," ",c.experienceLevel]}),c.currentWeeklyMileage&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Current weekly mileage:"})," ",c.currentWeeklyMileage," miles"]}),c.currentLongRunDistance&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Current long run:"})," ",c.currentLongRunDistance," miles"]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Schedule:"})," ",c.runsPerWeek," days/week"]}),c.hardSessionsPerWeek&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Hard Sessions:"})," ",c.hardSessionsPerWeek," per week",c.hardSessionDays.length>0?" (".concat(c.hardSessionDays.join(", "),")"):""]}),c.standUpBikeType&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Equipment:"})," ",$s(c.standUpBikeType)," specific workouts"]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{children:"Climate:"})," ",c.climate," adapted paces"]})]})]}),(0,je.jsxs)("div",{className:"card",style:{background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)"},children:[(0,je.jsx)("h3",{children:"\ud83d\ude80 What You Get"}),(0,je.jsxs)("div",{style:{display:"grid",gap:"8px",textAlign:"left"},children:[(0,je.jsxs)("div",{children:["\u2713 ",(0,je.jsx)("strong",{children:"80+ workout varieties"})," vs repetitive formats"]}),(0,je.jsxs)("div",{children:["\u2713 ",(0,je.jsx)("strong",{children:"Climate-adjusted paces"})," for your location"]}),(0,je.jsxs)("div",{children:["\u2713 ",(0,je.jsx)("strong",{children:"Equipment-specific training"})," for your gear"]}),(0,je.jsxs)("div",{children:["\u2713 ",(0,je.jsx)("strong",{children:"Flexible schedule"})," that adapts to missed workouts"]}),(0,je.jsxs)("div",{children:["\u2713 ",(0,je.jsx)("strong",{children:"Cross-platform access"})," - phone, tablet, web"]}),(0,je.jsxs)("div",{children:["\u2713 ",(0,je.jsx)("strong",{children:"Smart workout substitution"})," that counts properly"]})]})]}),(0,je.jsx)("p",{style:{fontSize:"0.9rem",color:"#E5E7EB"},children:'Click "Create My Plan" to see your complete training plan preview - no payment required!'})]});default:return(0,je.jsx)("div",{children:"Step not found"})}}(),(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"32px",gap:"16px"},children:[i>1&&(0,je.jsx)("button",{className:"btn btn-secondary",onClick:()=>{const e=(e=>{let t=e-1;for(;t>=1&&!p(t);)t--;return t})(i);e>=1&&(o(e),window.scrollTo({top:0,behavior:"smooth"}))},children:"\u2190 Back"}),(0,je.jsx)("button",{className:"btn btn-primary",onClick:()=>{const e=(e=>{let t=e+1;for(;t<=7&&!p(t);)t++;return t})(i);e<=7?(o(e),window.scrollTo({top:0,behavior:"smooth"})):m()},style:{marginLeft:"auto"},children:7===i?"\ud83c\udf89 Create My Plan":"Continue \u2192"})]})]})]})})};function cl(){}function dl(){}const hl=/^(?:[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088F\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5C\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDC-\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7DC\uA7F1-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD40-\uDD59\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC7\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDB0-\uDDDB\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDEA0-\uDEB8\uDEBB-\uDED3\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3\uDFF2-\uDFF6]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDEC0-\uDEDE\uDEE0-\uDEE2\uDEE4\uDEE5\uDEE7-\uDEED\uDEF0-\uDEF4\uDEFE\uDEFF\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79])(?:[\$0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088F\u0897-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5C\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDC-\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1ABF-\u1ADD\u1AE0-\u1AEB\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7DC\uA7F1-\uA827\uA82C\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF65-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD40-\uDD59\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDD40-\uDD65\uDD69-\uDD6D\uDD6F-\uDD85\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEC2-\uDEC7\uDEFA-\uDF1C\uDF27\uDF30-\uDF50\uDF70-\uDF85\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC-\uDFD3\uDFE1\uDFE2]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDED0-\uDEE3\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8\uDF60-\uDF67\uDFC0-\uDFE0\uDFF0-\uDFF9]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDDB0-\uDDDB\uDDE0-\uDDE9\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF42\uDF50-\uDF5A\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC40-\uDC55\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD39]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDD70-\uDD79\uDE40-\uDE7F\uDEA0-\uDEB8\uDEBB-\uDED3\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0-\uDFF6]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDCF0-\uDCF9\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDCD0-\uDCF9\uDDD0-\uDDFA\uDEC0-\uDEDE\uDEE0-\uDEF5\uDEFE\uDEFF\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]|\uDB40[\uDD00-\uDDEF])*$/,pl=/^(?:[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088F\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5C\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDC-\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7DC\uA7F1-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD40-\uDD59\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC7\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDB0-\uDDDB\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDEA0-\uDEB8\uDEBB-\uDED3\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3\uDFF2-\uDFF6]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDEC0-\uDEDE\uDEE0-\uDEE2\uDEE4\uDEE5\uDEE7-\uDEED\uDEF0-\uDEF4\uDEFE\uDEFF\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79])(?:[\$\x2D0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088F\u0897-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5C\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDC-\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1ABF-\u1ADD\u1AE0-\u1AEB\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7DC\uA7F1-\uA827\uA82C\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF65-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD40-\uDD59\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDD40-\uDD65\uDD69-\uDD6D\uDD6F-\uDD85\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEC2-\uDEC7\uDEFA-\uDF1C\uDF27\uDF30-\uDF50\uDF70-\uDF85\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC-\uDFD3\uDFE1\uDFE2]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDED0-\uDEE3\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8\uDF60-\uDF67\uDFC0-\uDFE0\uDFF0-\uDFF9]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDDB0-\uDDDB\uDDE0-\uDDE9\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF42\uDF50-\uDF5A\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC40-\uDC55\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD39]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDD70-\uDD79\uDE40-\uDE7F\uDEA0-\uDEB8\uDEBB-\uDED3\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0-\uDFF6]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDCF0-\uDCF9\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDCD0-\uDCF9\uDDD0-\uDDFA\uDEC0-\uDEDE\uDEE0-\uDEF5\uDEFE\uDEFF\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]|\uDB40[\uDD00-\uDDEF])*$/,ml={};function fl(e,t){return((t||ml).jsx?pl:hl).test(e)}const gl=/[ \t\n\f\r]/g;function yl(e){return""===e.replace(gl,"")}class vl{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}}function bl(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new vl(n,r,t)}function wl(e){return e.toLowerCase()}vl.prototype.normal={},vl.prototype.property={},vl.prototype.space=void 0;class Dl{constructor(e,t){this.attribute=t,this.property=e}}Dl.prototype.attribute="",Dl.prototype.booleanish=!1,Dl.prototype.boolean=!1,Dl.prototype.commaOrSpaceSeparated=!1,Dl.prototype.commaSeparated=!1,Dl.prototype.defined=!1,Dl.prototype.mustUseProperty=!1,Dl.prototype.number=!1,Dl.prototype.overloadedBoolean=!1,Dl.prototype.property="",Dl.prototype.spaceSeparated=!1,Dl.prototype.space=void 0;let kl=0;const xl=Rl(),El=Rl(),Sl=Rl(),Cl=Rl(),Al=Rl(),Tl=Rl(),Fl=Rl();function Rl(){return 2**++kl}const _l=Object.keys(r);class Il extends Dl{constructor(e,t,n,i){let o=-1;if(super(e,t),Pl(this,"space",i),"number"===typeof n)for(;++o<_l.length;){const e=_l[o];Pl(this,_l[o],(n&r[e])===r[e])}}}function Pl(e,t,n){n&&(e[t]=n)}function Ml(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const o=new Il(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[wl(r)]=r,n[wl(o.attribute)]=r}return new vl(t,n,e.space)}Il.prototype.defined=!0;const Nl=Ml({properties:{ariaActiveDescendant:null,ariaAtomic:El,ariaAutoComplete:null,ariaBusy:El,ariaChecked:El,ariaColCount:Cl,ariaColIndex:Cl,ariaColSpan:Cl,ariaControls:Al,ariaCurrent:null,ariaDescribedBy:Al,ariaDetails:null,ariaDisabled:El,ariaDropEffect:Al,ariaErrorMessage:null,ariaExpanded:El,ariaFlowTo:Al,ariaGrabbed:El,ariaHasPopup:null,ariaHidden:El,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Al,ariaLevel:Cl,ariaLive:null,ariaModal:El,ariaMultiLine:El,ariaMultiSelectable:El,ariaOrientation:null,ariaOwns:Al,ariaPlaceholder:null,ariaPosInSet:Cl,ariaPressed:El,ariaReadOnly:El,ariaRelevant:null,ariaRequired:El,ariaRoleDescription:Al,ariaRowCount:Cl,ariaRowIndex:Cl,ariaRowSpan:Cl,ariaSelected:El,ariaSetSize:Cl,ariaSort:null,ariaValueMax:Cl,ariaValueMin:Cl,ariaValueNow:Cl,ariaValueText:null,role:null},transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase()});function jl(e,t){return t in e?e[t]:t}function Bl(e,t){return jl(e,t.toLowerCase())}const Ol=Ml({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Tl,acceptCharset:Al,accessKey:Al,action:null,allow:null,allowFullScreen:xl,allowPaymentRequest:xl,allowUserMedia:xl,alt:null,as:null,async:xl,autoCapitalize:null,autoComplete:Al,autoFocus:xl,autoPlay:xl,blocking:Al,capture:null,charSet:null,checked:xl,cite:null,className:Al,cols:Cl,colSpan:null,content:null,contentEditable:El,controls:xl,controlsList:Al,coords:Cl|Tl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:xl,defer:xl,dir:null,dirName:null,disabled:xl,download:Sl,draggable:El,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:xl,formTarget:null,headers:Al,height:Cl,hidden:Sl,high:Cl,href:null,hrefLang:null,htmlFor:Al,httpEquiv:Al,id:null,imageSizes:null,imageSrcSet:null,inert:xl,inputMode:null,integrity:null,is:null,isMap:xl,itemId:null,itemProp:Al,itemRef:Al,itemScope:xl,itemType:Al,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:xl,low:Cl,manifest:null,max:null,maxLength:Cl,media:null,method:null,min:null,minLength:Cl,multiple:xl,muted:xl,name:null,nonce:null,noModule:xl,noValidate:xl,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:xl,optimum:Cl,pattern:null,ping:Al,placeholder:null,playsInline:xl,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:xl,referrerPolicy:null,rel:Al,required:xl,reversed:xl,rows:Cl,rowSpan:Cl,sandbox:Al,scope:null,scoped:xl,seamless:xl,selected:xl,shadowRootClonable:xl,shadowRootDelegatesFocus:xl,shadowRootMode:null,shape:null,size:Cl,sizes:null,slot:null,span:Cl,spellCheck:El,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Cl,step:null,style:null,tabIndex:Cl,target:null,title:null,translate:null,type:null,typeMustMatch:xl,useMap:null,value:El,width:Cl,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Al,axis:null,background:null,bgColor:null,border:Cl,borderColor:null,bottomMargin:Cl,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:xl,declare:xl,event:null,face:null,frame:null,frameBorder:null,hSpace:Cl,leftMargin:Cl,link:null,longDesc:null,lowSrc:null,marginHeight:Cl,marginWidth:Cl,noResize:xl,noHref:xl,noShade:xl,noWrap:xl,object:null,profile:null,prompt:null,rev:null,rightMargin:Cl,rules:null,scheme:null,scrolling:El,standby:null,summary:null,text:null,topMargin:Cl,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Cl,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:xl,disableRemotePlayback:xl,prefix:null,property:null,results:Cl,security:null,unselectable:null},space:"html",transform:Bl}),Ll=Ml({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Fl,accentHeight:Cl,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Cl,amplitude:Cl,arabicForm:null,ascent:Cl,attributeName:null,attributeType:null,azimuth:Cl,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Cl,by:null,calcMode:null,capHeight:Cl,className:Al,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Cl,diffuseConstant:Cl,direction:null,display:null,dur:null,divisor:Cl,dominantBaseline:null,download:xl,dx:null,dy:null,edgeMode:null,editable:null,elevation:Cl,enableBackground:null,end:null,event:null,exponent:Cl,externalResourcesRequired:null,fill:null,fillOpacity:Cl,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Tl,g2:Tl,glyphName:Tl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Cl,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Cl,horizOriginX:Cl,horizOriginY:Cl,id:null,ideographic:Cl,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Cl,k:Cl,k1:Cl,k2:Cl,k3:Cl,k4:Cl,kernelMatrix:Fl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Cl,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Cl,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Cl,overlineThickness:Cl,paintOrder:null,panose1:null,path:null,pathLength:Cl,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Al,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Cl,pointsAtY:Cl,pointsAtZ:Cl,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Fl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Fl,rev:Fl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Fl,requiredFeatures:Fl,requiredFonts:Fl,requiredFormats:Fl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Cl,specularExponent:Cl,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Cl,strikethroughThickness:Cl,string:null,stroke:null,strokeDashArray:Fl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Cl,strokeOpacity:Cl,strokeWidth:null,style:null,surfaceScale:Cl,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Fl,tabIndex:Cl,tableValues:null,target:null,targetX:Cl,targetY:Cl,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Fl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Cl,underlineThickness:Cl,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Cl,values:null,vAlphabetic:Cl,vMathematical:Cl,vectorEffect:null,vHanging:Cl,vIdeographic:Cl,version:null,vertAdvY:Cl,vertOriginX:Cl,vertOriginY:Cl,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Cl,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:jl}),Wl=Ml({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase()}),ql=Ml({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Bl}),Ul=Ml({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase()}),zl=bl([Nl,Ol,Wl,ql,Ul],"html"),Hl=bl([Nl,Ll,Wl,ql,Ul],"svg"),Vl=/[A-Z]/g,Kl=/-[a-z]/g,Yl=/^data[-\w.:]+$/i;function Gl(e){return"-"+e.toLowerCase()}function Ql(e){return e.charAt(1).toUpperCase()}const Zl={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};var Xl=n(294);const Jl=eu("end"),$l=eu("start");function eu(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"===typeof n.line&&n.line>0&&"number"===typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"===typeof n.offset&&n.offset>-1?n.offset:void 0}}}function tu(e){return e&&"object"===typeof e?"position"in e||"type"in e?ru(e.position):"start"in e||"end"in e?ru(e):"line"in e||"column"in e?nu(e):"":""}function nu(e){return iu(e&&e.line)+":"+iu(e&&e.column)}function ru(e){return nu(e&&e.start)+"-"+nu(e&&e.end)}function iu(e){return e&&"number"===typeof e?e:1}class ou extends Error{constructor(e,t,n){super(),"string"===typeof t&&(n=t,t=void 0);let r="",i={},o=!1;if(t&&(i="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:(0,u.A)({},t)),"string"===typeof e?r=e:!i.cause&&e&&(o=!0,r=e.message,i.cause=e),!i.ruleId&&!i.source&&"string"===typeof n){const e=n.indexOf(":");-1===e?i.ruleId=n:(i.source=n.slice(0,e),i.ruleId=n.slice(e+1))}if(!i.place&&i.ancestors&&i.ancestors){const e=i.ancestors[i.ancestors.length-1];e&&(i.place=e.position)}const a=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=a?a.line:void 0,this.name=tu(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&"string"===typeof i.cause.stack?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ou.prototype.file="",ou.prototype.name="",ou.prototype.reason="",ou.prototype.message="",ou.prototype.stack="",ou.prototype.column=void 0,ou.prototype.line=void 0,ou.prototype.ancestors=void 0,ou.prototype.cause=void 0,ou.prototype.fatal=void 0,ou.prototype.place=void 0,ou.prototype.ruleId=void 0,ou.prototype.source=void 0;const au={}.hasOwnProperty,su=new Map,lu=/[A-Z]/g,uu=new Set(["table","tbody","thead","tfoot","tr"]),cu=new Set(["td","th"]),du="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function hu(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if("function"!==typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=function(e,t){return n;function n(n,r,i,o){const a=Array.isArray(i.children),s=$l(n);return t(r,i,o,a,{columnNumber:s?s.column-1:void 0,fileName:e,lineNumber:s?s.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!==typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!==typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");r=function(e,t,n){return r;function r(e,r,i,o){const a=Array.isArray(i.children)?n:t;return o?a(r,i,o):a(r,i)}}(0,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?Hl:zl,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},o=pu(i,e,void 0);return o&&"string"!==typeof o?o:i.create(e,i.Fragment,{children:o||void 0},void 0)}function pu(e,t,n){return"element"===t.type?function(e,t,n){const r=e.schema;let i=r;"svg"===t.tagName.toLowerCase()&&"html"===r.space&&(i=Hl,e.schema=i);e.ancestors.push(t);const o=vu(e,t.tagName,!1),a=function(e,t){const n={};let r,i;for(i in t.properties)if("children"!==i&&au.call(t.properties,i)){const o=yu(e,i,t.properties[i]);if(o){const[i,a]=o;e.tableCellAlignToStyle&&"align"===i&&"string"===typeof a&&cu.has(t.tagName)?r=a:n[i]=a}}if(r){(n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=r}return n}(e,t);let s=gu(e,t);uu.has(t.tagName)&&(s=s.filter(function(e){return"string"!==typeof e||!("object"===typeof(t=e)?"text"===t.type&&yl(t.value):yl(t));var t}));return mu(e,a,o,t),fu(a,s),e.ancestors.pop(),e.schema=r,e.create(t,o,a,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}bu(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const r=e.schema;let i=r;"svg"===t.name&&"html"===r.space&&(i=Hl,e.schema=i);e.ancestors.push(t);const o=null===t.name?e.Fragment:vu(e,t.name,!0),a=function(e,t){const n={};for(const r of t.attributes)if("mdxJsxExpressionAttribute"===r.type)if(r.data&&r.data.estree&&e.evaluater){const t=r.data.estree.body[0];cl(t.type);const i=t.expression;cl(i.type);const o=i.properties[0];cl(o.type),Object.assign(n,e.evaluater.evaluateExpression(o.argument))}else bu(e,t.position);else{const i=r.name;let o;if(r.value&&"object"===typeof r.value)if(r.value.data&&r.value.data.estree&&e.evaluater){const t=r.value.data.estree.body[0];cl(t.type),o=e.evaluater.evaluateExpression(t.expression)}else bu(e,t.position);else o=null===r.value||r.value;n[i]=o}return n}(e,t),s=gu(e,t);return mu(e,a,o,t),fu(a,s),e.ancestors.pop(),e.schema=r,e.create(t,o,a,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);bu(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const r={};return fu(r,gu(e,t)),e.create(t,e.Fragment,r,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function mu(e,t,n,r){"string"!==typeof n&&n!==e.Fragment&&e.passNode&&(t.node=r)}function fu(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function gu(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:su;for(;++r<t.children.length;){const o=t.children[r];let a;if(e.passKeys){const e="element"===o.type?o.tagName:"mdxJsxFlowElement"===o.type||"mdxJsxTextElement"===o.type?o.name:void 0;if(e){const t=i.get(e)||0;a=e+"-"+t,i.set(e,t+1)}}const s=pu(e,o,a);void 0!==s&&n.push(s)}return n}function yu(e,t,n){const r=function(e,t){const n=wl(t);let r=t,i=Dl;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&Yl.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(Kl,Ql);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!Kl.test(e)){let n=e.replace(Vl,Gl);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}i=Il}return new i(r,t)}(e.schema,t);if(!(null===n||void 0===n||"number"===typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?function(e,t){const n=t||{};return(""===e[e.length-1]?[...e,""]:e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===r.property){let t="object"===typeof n?n:function(e,t){try{return Xl(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const t=n,r=new ou("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=du+"#cannot-parse-style-attribute",r}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)au.call(e,n)&&(t[wu(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&r.space?Zl[r.property]||r.property:r.attribute,n]}}function vu(e,t,n){let r;if(n)if(t.includes(".")){const e=t.split(".");let n,i=-1;for(;++i<e.length;){const t=fl(e[i])?{type:"Identifier",name:e[i]}:{type:"Literal",value:e[i]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(i&&"Literal"===t.type),optional:!1}:t}r=n}else r=fl(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else r={type:"Literal",value:t};if("Literal"===r.type){const t=r.value;return au.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(r);bu(e)}function bu(e,t){const n=new ou("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=du+"#cannot-handle-mdx-estrees-without-createevaluater",n}function wu(e){let t=e.replace(lu,Du);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function Du(e){return"-"+e.toLowerCase()}const ku={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},xu={};function Eu(e,t,n){if(function(e){return Boolean(e&&"object"===typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Su(e.children,t,n)}return Array.isArray(e)?Su(e,t,n):""}function Su(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Eu(e[i],t,n);return r.join("")}function Cu(e,t,n,r){const i=e.length;let o,a=0;if(t=t<0?-t>i?0:i+t:t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);a<r.length;)o=r.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function Au(e,t){return e.length>0?(Cu(e,e.length,0,t),e):t}class Tu{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null===t||void 0===t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const r=t||0;this.setCursor(Math.trunc(e));const i=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return n&&Fu(this.left,n),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Fu(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Fu(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);Fu(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Fu(this.left,t.reverse())}}}function Fu(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Ru(e){const t={};let n,r,i,o,a,s,l,c=-1;const d=new Tu(e);for(;++c<d.length;){for(;c in t;)c=t[c];if(n=d.get(c),c&&"chunkFlow"===n[1].type&&"listItemPrefix"===d.get(c-1)[1].type&&(s=n[1]._tokenizer.events,i=0,i<s.length&&"lineEndingBlank"===s[i][1].type&&(i+=2),i<s.length&&"content"===s[i][1].type))for(;++i<s.length&&"content"!==s[i][1].type;)"chunkText"===s[i][1].type&&(s[i][1]._isInFirstContentOfListItem=!0,i++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,_u(d,c)),c=t[c],l=!0);else if(n[1]._container){for(i=c,r=void 0;i--;)if(o=d.get(i),"lineEnding"===o[1].type||"lineEndingBlank"===o[1].type)"enter"===o[0]&&(r&&(d.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=i);else if("linePrefix"!==o[1].type&&"listItemIndent"!==o[1].type)break;r&&(n[1].end=(0,u.A)({},d.get(r)[1].start),a=d.slice(r,c),a.unshift(n),d.splice(r,c-r+1,a))}}return Cu(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!l}function _u(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const o=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const s=a.events,l=[],u={};let c,d,h=-1,p=n,m=0,f=0;const g=[f];for(;p;){for(;e.get(++i)[1]!==p;);o.push(i),p._tokenizer||(c=r.sliceStream(p),p.next||c.push(null),d&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(c),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),d=p,p=p.next}for(p=n;++h<s.length;)"exit"===s[h][0]&&"enter"===s[h-1][0]&&s[h][1].type===s[h-1][1].type&&s[h][1].start.line!==s[h][1].end.line&&(f=h+1,g.push(f),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):g.pop(),h=g.length;h--;){const t=s.slice(g[h],g[h+1]),n=o.pop();l.push([n,n+t.length-1]),e.splice(n,2,t)}for(l.reverse(),h=-1;++h<l.length;)u[m+l[h][0]]=m+l[h][1],m+=l[h][1]-l[h][0]-1;return u}const Iu={}.hasOwnProperty;function Pu(e,t){let n;for(n in t){const r=(Iu.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let o;if(i)for(o in i){Iu.call(r,o)||(r[o]=[]);const e=i[o];Mu(r[o],Array.isArray(e)?e:e?[e]:[])}}}function Mu(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);Cu(e,0,0,r)}const Nu=Yu(/[A-Za-z]/),ju=Yu(/[\dA-Za-z]/),Bu=Yu(/[#-'*+\--9=?A-Z^-~]/);function Ou(e){return null!==e&&(e<32||127===e)}const Lu=Yu(/\d/),Wu=Yu(/[\dA-Fa-f]/),qu=Yu(/[!-/:-@[-`{-~]/);function Uu(e){return null!==e&&e<-2}function zu(e){return null!==e&&(e<0||32===e)}function Hu(e){return-2===e||-1===e||32===e}const Vu=Yu(/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDED0\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C1\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F\uDED1-\uDED8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDCFA-\uDCFC\uDD00-\uDEB3\uDEBA-\uDED0\uDEE0-\uDEF0\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED8\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDCD0-\uDCD8\uDD00-\uDE57\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE8A\uDE8E-\uDEC6\uDEC8\uDECD-\uDEDC\uDEDF-\uDEEA\uDEEF-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF\uDFFA])/),Ku=Yu(/\s/);function Yu(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function Gu(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return function(r){if(Hu(r))return e.enter(n),a(r);return t(r)};function a(r){return Hu(r)&&o++<i?(e.consume(r),a):(e.exit(n),t(r))}}const Qu={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Gu(e,t,"linePrefix")},function(t){return e.enter("paragraph"),r(t)});let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,i(t)}function i(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):Uu(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),i)}}};const Zu={tokenize:function(e){const t=this,n=[];let r,i,o,a=0;return s;function s(r){if(a<n.length){const i=n[a];return t.containerState=i[1],e.attempt(i[0].continuation,l,c)(r)}return c(r)}function l(e){if(a++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&b();const n=t.events.length;let i,o=n;for(;o--;)if("exit"===t.events[o][0]&&"chunkFlow"===t.events[o][1].type){i=t.events[o][1].end;break}v(a);let s=n;for(;s<t.events.length;)t.events[s][1].end=(0,u.A)({},i),s++;return Cu(t.events,o+1,0,t.events.slice(n)),t.events.length=s,c(e)}return s(e)}function c(i){if(a===n.length){if(!r)return p(i);if(r.currentConstruct&&r.currentConstruct.concrete)return f(i);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Xu,d,h)(i)}function d(e){return r&&b(),v(a),p(e)}function h(e){return t.parser.lazy[t.now().line]=a!==n.length,o=t.now().offset,f(e)}function p(n){return t.containerState={},e.attempt(Xu,m,f)(n)}function m(e){return a++,n.push([t.currentConstruct,t.containerState]),p(e)}function f(n){return null===n?(r&&b(),v(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:i}),g(n))}function g(n){return null===n?(y(e.exit("chunkFlow"),!0),v(0),void e.consume(n)):Uu(n)?(e.consume(n),y(e.exit("chunkFlow")),a=0,t.interrupt=void 0,s):(e.consume(n),g)}function y(e,n){const s=t.sliceStream(e);if(n&&s.push(null),e.previous=i,i&&(i.next=e),i=e,r.defineSkip(e.start),r.write(s),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<o&&(!r.events[e][1].end||r.events[e][1].end.offset>o))return;const n=t.events.length;let i,s,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(i){s=t.events[l][1].end;break}i=!0}for(v(a),e=n;e<t.events.length;)t.events[e][1].end=(0,u.A)({},s),e++;Cu(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function v(r){let i=n.length;for(;i-- >r;){const r=n[i];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function b(){r.write([null]),i=void 0,r=void 0,t.containerState._closeFlow=void 0}}},Xu={tokenize:function(e,t,n){return Gu(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};const Ju={partial:!0,tokenize:function(e,t,n){return function(t){return Hu(t)?Gu(e,r,"linePrefix")(t):r(t)};function r(e){return null===e||Uu(e)?t(e):n(e)}}};const $u={resolve:function(e){return Ru(e),e},tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?i(t):Uu(t)?e.check(ec,o,i)(t):(e.consume(t),r)}function i(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function o(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}},ec={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Gu(e,i,"linePrefix")};function i(i){if(null===i||Uu(i))return n(i);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}}};const tc={tokenize:function(e){const t=this,n=e.attempt(Ju,function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n},e.attempt(this.parser.constructs.flowInitial,r,Gu(e,e.attempt(this.parser.constructs.flow,r,e.attempt($u,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const nc={resolveAll:ac()},rc=oc("string"),ic=oc("text");function oc(e){return{resolveAll:ac("text"===e?sc:void 0),tokenize:function(t){const n=this,r=this.parser.constructs[e],i=t.attempt(r,o,a);return o;function o(e){return l(e)?i(e):a(e)}function a(e){if(null!==e)return t.enter("data"),t.consume(e),s;t.consume(e)}function s(e){return l(e)?(t.exit("data"),i(e)):(t.consume(e),s)}function l(e){if(null===e)return!0;const t=r[e];let i=-1;if(t)for(;++i<t.length;){const e=t[i];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}}function ac(e){return function(t,n){let r,i=-1;for(;++i<=t.length;)void 0===r?t[i]&&"data"===t[i][1].type&&(r=i,i++):t[i]&&"data"===t[i][1].type||(i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),i=r+2),r=void 0);return e?e(t,n):t}}function sc(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],i=t.sliceStream(r);let o,a=i.length,s=-1,l=0;for(;a--;){const e=i[a];if("string"===typeof e){for(s=e.length;32===e.charCodeAt(s-1);)l++,s--;if(s)break;s=-1}else if(-2===e)o=!0,l++;else if(-1!==e){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const i={type:n===e.length||o||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?s:r.start._bufferIndex+s,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:(0,u.A)({},r.end)};r.end=(0,u.A)({},i.start),r.start.offset===r.end.offset?Object.assign(r,i):(e.splice(n,0,["enter",i,t],["exit",i,t]),n+=2)}n++}return e}const lc={name:"thematicBreak",tokenize:function(e,t,n){let r,i=0;return function(t){return e.enter("thematicBreak"),function(e){return r=e,o(e)}(t)};function o(o){return o===r?(e.enter("thematicBreakSequence"),a(o)):i>=3&&(null===o||Uu(o))?(e.exit("thematicBreak"),t(o)):n(o)}function a(t){return t===r?(e.consume(t),i++,a):(e.exit("thematicBreakSequence"),Hu(t)?Gu(e,o,"whitespace")(t):o(t))}}};const uc={continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Ju,i,o);function i(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Gu(e,t,"listItemIndent",r.containerState.size+1)(n)}function o(n){return r.containerState.furtherBlankLines||!Hu(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(dc,t,a)(n))}function a(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,Gu(e,e.attempt(uc,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,a=0;return function(t){const i=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!r.containerState.marker||t===r.containerState.marker:Lu(t)){if(r.containerState.type||(r.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(lc,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(t)}return n(t)};function s(t){return Lu(t)&&++a<10?(e.consume(t),s):(!r.interrupt||a<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(Ju,r.interrupt?n:u,e.attempt(cc,d,c))}function u(e){return r.containerState.initialBlankLine=!0,o++,d(e)}function c(t){return Hu(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),d):n(t)}function d(n){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}},cc={partial:!0,tokenize:function(e,t,n){const r=this;return Gu(e,function(e){const i=r.events[r.events.length-1];return!Hu(e)&&i&&"listItemPrefixWhitespace"===i[1].type?t(e):n(e)},"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},dc={partial:!0,tokenize:function(e,t,n){const r=this;return Gu(e,function(e){const i=r.events[r.events.length-1];return i&&"listItemIndent"===i[1].type&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(e):n(e)},"listItemIndent",r.containerState.size+1)}};const hc={continuation:{tokenize:function(e,t,n){const r=this;return function(t){if(Hu(t))return Gu(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return i(t)};function i(r){return e.attempt(hc,t,n)(r)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),i}return n(t)};function i(n){return Hu(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}};function pc(e,t,n,r,i,o,a,s,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return function(t){if(60===t)return e.enter(r),e.enter(i),e.enter(o),e.consume(t),e.exit(o),d;if(null===t||32===t||41===t||Ou(t))return n(t);return e.enter(r),e.enter(a),e.enter(s),e.enter("chunkString",{contentType:"string"}),m(t)};function d(n){return 62===n?(e.enter(o),e.consume(n),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(s),d(t)):null===t||60===t||Uu(t)?n(t):(e.consume(t),92===t?p:h)}function p(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function m(i){return c||null!==i&&41!==i&&!zu(i)?c<u&&40===i?(e.consume(i),c++,m):41===i?(e.consume(i),c--,m):null===i||32===i||40===i||Ou(i)?n(i):(e.consume(i),92===i?f:m):(e.exit("chunkString"),e.exit(s),e.exit(a),e.exit(r),t(i))}function f(t){return 40===t||41===t||92===t?(e.consume(t),m):m(t)}}function mc(e,t,n,r,i,o){const a=this;let s,l=0;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),e.enter(o),u};function u(d){return l>999||null===d||91===d||93===d&&!s||94===d&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(d):93===d?(e.exit(o),e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):Uu(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(t){return null===t||91===t||93===t||Uu(t)||l++>999?(e.exit("chunkString"),u(t)):(e.consume(t),s||(s=!Hu(t)),92===t?d:c)}function d(t){return 91===t||92===t||93===t?(e.consume(t),l++,c):c(t)}}function fc(e,t,n,r,i,o){let a;return function(t){if(34===t||39===t||40===t)return e.enter(r),e.enter(i),e.consume(t),e.exit(i),a=40===t?41:t,s;return n(t)};function s(n){return n===a?(e.enter(i),e.consume(n),e.exit(i),e.exit(r),t):(e.enter(o),l(n))}function l(t){return t===a?(e.exit(o),s(a)):null===t?n(t):Uu(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Gu(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(t))}function u(t){return t===a||null===t||Uu(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?c:u)}function c(t){return t===a||92===t?(e.consume(t),u):u(t)}}function gc(e,t){let n;return function r(i){if(Uu(i))return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r;if(Hu(i))return Gu(e,r,n?"linePrefix":"lineSuffix")(i);return t(i)}}function yc(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const vc={name:"definition",tokenize:function(e,t,n){const r=this;let i;return function(t){return e.enter("definition"),function(t){return mc.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function o(t){return i=yc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),a):n(t)}function a(t){return zu(t)?gc(e,s)(t):s(t)}function s(t){return pc(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(bc,u,u)(t)}function u(t){return Hu(t)?Gu(e,c,"whitespace")(t):c(t)}function c(o){return null===o||Uu(o)?(e.exit("definition"),r.parser.defined.push(i),t(o)):n(o)}}},bc={partial:!0,tokenize:function(e,t,n){return function(t){return zu(t)?gc(e,r)(t):n(t)};function r(t){return fc(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function i(t){return Hu(t)?Gu(e,o,"whitespace")(t):o(t)}function o(e){return null===e||Uu(e)?t(e):n(e)}}};const wc={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),Gu(e,i,"linePrefix",5)(t)};function i(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?o(e):n(e)}function o(t){return null===t?s(t):Uu(t)?e.attempt(Dc,o,s)(t):(e.enter("codeFlowValue"),a(t))}function a(t){return null===t||Uu(t)?(e.exit("codeFlowValue"),o(t)):(e.consume(t),a)}function s(n){return e.exit("codeIndented"),t(n)}}},Dc={partial:!0,tokenize:function(e,t,n){const r=this;return i;function i(t){return r.parser.lazy[r.now().line]?n(t):Uu(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):Gu(e,o,"linePrefix",5)(t)}function o(e){const o=r.events[r.events.length-1];return o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?t(e):Uu(e)?i(e):n(e)}}};const kc={name:"headingAtx",resolve:function(e,t){let n,r,i=e.length-2,o=3;"whitespace"===e[o][1].type&&(o+=2);i-2>o&&"whitespace"===e[i][1].type&&(i-=2);"atxHeadingSequence"===e[i][1].type&&(o===i-1||i-4>o&&"whitespace"===e[i-2][1].type)&&(i-=o+1===i?2:4);i>o&&(n={type:"atxHeadingText",start:e[o][1].start,end:e[i][1].end},r={type:"chunkText",start:e[o][1].start,end:e[i][1].end,contentType:"text"},Cu(e,o,i-o+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e},tokenize:function(e,t,n){let r=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),i(t)}(t)};function i(t){return 35===t&&r++<6?(e.consume(t),i):null===t||zu(t)?(e.exit("atxHeadingSequence"),o(t)):n(t)}function o(n){return 35===n?(e.enter("atxHeadingSequence"),a(n)):null===n||Uu(n)?(e.exit("atxHeading"),t(n)):Hu(n)?Gu(e,o,"whitespace")(n):(e.enter("atxHeadingText"),s(n))}function a(t){return 35===t?(e.consume(t),a):(e.exit("atxHeadingSequence"),o(t))}function s(t){return null===t||35===t||zu(t)?(e.exit("atxHeadingText"),o(t)):(e.consume(t),s)}}};const xc={name:"setextUnderline",resolveTo:function(e,t){let n,r,i,o=e.length;for(;o--;)if("enter"===e[o][0]){if("content"===e[o][1].type){n=o;break}"paragraph"===e[o][1].type&&(r=o)}else"content"===e[o][1].type&&e.splice(o,1),i||"definition"!==e[o][1].type||(i=o);const a={type:"setextHeading",start:(0,u.A)({},e[n][1].start),end:(0,u.A)({},e[e.length-1][1].end)};e[r][1].type="setextHeadingText",i?(e.splice(r,0,["enter",a,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end=(0,u.A)({},e[i][1].end)):e[n][1]=a;return e.push(["exit",a,t]),e},tokenize:function(e,t,n){const r=this;let i;return function(t){let a,s=r.events.length;for(;s--;)if("lineEnding"!==r.events[s][1].type&&"linePrefix"!==r.events[s][1].type&&"content"!==r.events[s][1].type){a="paragraph"===r.events[s][1].type;break}if(!r.parser.lazy[r.now().line]&&(r.interrupt||a))return e.enter("setextHeadingLine"),i=t,function(t){return e.enter("setextHeadingLineSequence"),o(t)}(t);return n(t)};function o(t){return t===i?(e.consume(t),o):(e.exit("setextHeadingLineSequence"),Hu(t)?Gu(e,a,"lineSuffix")(t):a(t))}function a(r){return null===r||Uu(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}}};const Ec=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Sc=["pre","script","style","textarea"],Cc={concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},tokenize:function(e,t,n){const r=this;let i,o,a,s,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),u}(t)};function u(s){return 33===s?(e.consume(s),c):47===s?(e.consume(s),o=!0,p):63===s?(e.consume(s),i=3,r.interrupt?t:M):Nu(s)?(e.consume(s),a=String.fromCharCode(s),m):n(s)}function c(o){return 45===o?(e.consume(o),i=2,d):91===o?(e.consume(o),i=5,s=0,h):Nu(o)?(e.consume(o),i=4,r.interrupt?t:M):n(o)}function d(i){return 45===i?(e.consume(i),r.interrupt?t:M):n(i)}function h(i){const o="CDATA[";return i===o.charCodeAt(s++)?(e.consume(i),6===s?r.interrupt?t:C:h):n(i)}function p(t){return Nu(t)?(e.consume(t),a=String.fromCharCode(t),m):n(t)}function m(s){if(null===s||47===s||62===s||zu(s)){const l=47===s,u=a.toLowerCase();return l||o||!Sc.includes(u)?Ec.includes(a.toLowerCase())?(i=6,l?(e.consume(s),f):r.interrupt?t(s):C(s)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(s):o?g(s):y(s)):(i=1,r.interrupt?t(s):C(s))}return 45===s||ju(s)?(e.consume(s),a+=String.fromCharCode(s),m):n(s)}function f(i){return 62===i?(e.consume(i),r.interrupt?t:C):n(i)}function g(t){return Hu(t)?(e.consume(t),g):E(t)}function y(t){return 47===t?(e.consume(t),E):58===t||95===t||Nu(t)?(e.consume(t),v):Hu(t)?(e.consume(t),y):E(t)}function v(t){return 45===t||46===t||58===t||95===t||ju(t)?(e.consume(t),v):b(t)}function b(t){return 61===t?(e.consume(t),w):Hu(t)?(e.consume(t),b):y(t)}function w(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,D):Hu(t)?(e.consume(t),w):k(t)}function D(t){return t===l?(e.consume(t),l=null,x):null===t||Uu(t)?n(t):(e.consume(t),D)}function k(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||zu(t)?b(t):(e.consume(t),k)}function x(e){return 47===e||62===e||Hu(e)?y(e):n(e)}function E(t){return 62===t?(e.consume(t),S):n(t)}function S(t){return null===t||Uu(t)?C(t):Hu(t)?(e.consume(t),S):n(t)}function C(t){return 45===t&&2===i?(e.consume(t),R):60===t&&1===i?(e.consume(t),_):62===t&&4===i?(e.consume(t),N):63===t&&3===i?(e.consume(t),M):93===t&&5===i?(e.consume(t),P):!Uu(t)||6!==i&&7!==i?null===t||Uu(t)?(e.exit("htmlFlowData"),A(t)):(e.consume(t),C):(e.exit("htmlFlowData"),e.check(Ac,j,A)(t))}function A(t){return e.check(Tc,T,j)(t)}function T(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),F}function F(t){return null===t||Uu(t)?A(t):(e.enter("htmlFlowData"),C(t))}function R(t){return 45===t?(e.consume(t),M):C(t)}function _(t){return 47===t?(e.consume(t),a="",I):C(t)}function I(t){if(62===t){const n=a.toLowerCase();return Sc.includes(n)?(e.consume(t),N):C(t)}return Nu(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),I):C(t)}function P(t){return 93===t?(e.consume(t),M):C(t)}function M(t){return 62===t?(e.consume(t),N):45===t&&2===i?(e.consume(t),M):C(t)}function N(t){return null===t||Uu(t)?(e.exit("htmlFlowData"),j(t)):(e.consume(t),N)}function j(n){return e.exit("htmlFlow"),t(n)}}},Ac={partial:!0,tokenize:function(e,t,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(Ju,t,n)}}},Tc={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(Uu(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i;return n(t)};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}};const Fc={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}},Rc={concrete:!0,name:"codeFenced",tokenize:function(e,t,n){const r=this,i={partial:!0,tokenize:function(e,t,n){let i=0;return a;function a(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),Hu(t)?Gu(e,u,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):u(t)}function u(t){return t===o?(e.enter("codeFencedFenceSequence"),c(t)):n(t)}function c(t){return t===o?(i++,e.consume(t),c):i>=s?(e.exit("codeFencedFenceSequence"),Hu(t)?Gu(e,d,"whitespace")(t):d(t)):n(t)}function d(r){return null===r||Uu(r)?(e.exit("codeFencedFence"),t(r)):n(r)}}};let o,a=0,s=0;return function(t){return function(t){const n=r.events[r.events.length-1];return a=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,o=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===o?(s++,e.consume(t),l):s<3?n(t):(e.exit("codeFencedFenceSequence"),Hu(t)?Gu(e,u,"whitespace")(t):u(t))}function u(n){return null===n||Uu(n)?(e.exit("codeFencedFence"),r.interrupt?t(n):e.check(Fc,p,v)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),c(n))}function c(t){return null===t||Uu(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),u(t)):Hu(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Gu(e,d,"whitespace")(t)):96===t&&t===o?n(t):(e.consume(t),c)}function d(t){return null===t||Uu(t)?u(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||Uu(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),u(t)):96===t&&t===o?n(t):(e.consume(t),h)}function p(t){return e.attempt(i,v,m)(t)}function m(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),f}function f(t){return a>0&&Hu(t)?Gu(e,g,"linePrefix",a+1)(t):g(t)}function g(t){return null===t||Uu(t)?e.check(Fc,p,v)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||Uu(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),y)}function v(n){return e.exit("codeFenced"),t(n)}}};const _c=document.createElement("i");function Ic(e){const t="&"+e+";";_c.innerHTML=t;const n=_c.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}const Pc={name:"characterReference",tokenize:function(e,t,n){const r=this;let i,o,a=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),s};function s(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),i=31,o=ju,u(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,o=Wu,u):(e.enter("characterReferenceValue"),i=7,o=Lu,u(t))}function u(s){if(59===s&&a){const i=e.exit("characterReferenceValue");return o!==ju||Ic(r.sliceSerialize(i))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)}return o(s)&&a++<i?(e.consume(s),u):n(s)}}};const Mc={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return qu(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const Nc={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Gu(e,t,"linePrefix")}}};function jc(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const Bc={name:"labelEnd",resolveAll:function(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),"labelImage"===r.type||"labelLink"===r.type||"labelEnd"===r.type){const e="labelImage"===r.type?4:2;r.type="data",t+=e}}e.length!==n.length&&Cu(e,0,e.length,n);return e},resolveTo:function(e,t){let n,r,i,o,a=e.length,s=0;for(;a--;)if(n=e[a][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[a][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(i){if("enter"===e[a][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=a,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(i=a);const l={type:"labelLink"===e[r][1].type?"link":"image",start:(0,u.A)({},e[r][1].start),end:(0,u.A)({},e[e.length-1][1].end)},c={type:"label",start:(0,u.A)({},e[r][1].start),end:(0,u.A)({},e[i][1].end)},d={type:"labelText",start:(0,u.A)({},e[r+s+2][1].end),end:(0,u.A)({},e[i-2][1].start)};return o=[["enter",l,t],["enter",c,t]],o=Au(o,e.slice(r+1,r+s+3)),o=Au(o,[["enter",d,t]]),o=Au(o,jc(t.parser.constructs.insideSpan.null,e.slice(r+s+4,i-3),t)),o=Au(o,[["exit",d,t],e[i-2],e[i-1],["exit",c,t]]),o=Au(o,e.slice(i+1)),o=Au(o,[["exit",l,t]]),Cu(e,r,e.length,o),e},tokenize:function(e,t,n){const r=this;let i,o,a=r.events.length;for(;a--;)if(("labelImage"===r.events[a][1].type||"labelLink"===r.events[a][1].type)&&!r.events[a][1]._balanced){i=r.events[a][1];break}return function(t){if(!i)return n(t);if(i._inactive)return c(t);return o=r.parser.defined.includes(yc(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),s};function s(t){return 40===t?e.attempt(Oc,u,o?u:c)(t):91===t?e.attempt(Lc,u,o?l:c)(t):o?u(t):c(t)}function l(t){return e.attempt(Wc,u,c)(t)}function u(e){return t(e)}function c(e){return i._balanced=!0,n(e)}}},Oc={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),r};function r(t){return zu(t)?gc(e,i)(t):i(t)}function i(t){return 41===t?u(t):pc(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function o(t){return zu(t)?gc(e,s)(t):u(t)}function a(e){return n(e)}function s(t){return 34===t||39===t||40===t?fc(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):u(t)}function l(t){return zu(t)?gc(e,u)(t):u(t)}function u(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},Lc={tokenize:function(e,t,n){const r=this;return function(t){return mc.call(r,e,i,o,"reference","referenceMarker","referenceString")(t)};function i(e){return r.parser.defined.includes(yc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function o(e){return n(e)}}},Wc={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const qc={name:"labelStartImage",resolveAll:Bc.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),o):n(t)}function o(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};function Uc(e){return null===e||zu(e)||Ku(e)?1:Vu(e)?2:void 0}const zc={name:"attention",resolveAll:function(e,t){let n,r,i,o,a,s,l,c,d=-1;for(;++d<e.length;)if("enter"===e[d][0]&&"attentionSequence"===e[d][1].type&&e[d][1]._close)for(n=d;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[d][1]).charCodeAt(0)){if((e[n][1]._close||e[d][1]._open)&&(e[d][1].end.offset-e[d][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[d][1].end.offset-e[d][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[d][1].end.offset-e[d][1].start.offset>1?2:1;const h=(0,u.A)({},e[n][1].end),p=(0,u.A)({},e[d][1].start);Hc(h,-s),Hc(p,s),o={type:s>1?"strongSequence":"emphasisSequence",start:h,end:(0,u.A)({},e[n][1].end)},a={type:s>1?"strongSequence":"emphasisSequence",start:(0,u.A)({},e[d][1].start),end:p},i={type:s>1?"strongText":"emphasisText",start:(0,u.A)({},e[n][1].end),end:(0,u.A)({},e[d][1].start)},r={type:s>1?"strong":"emphasis",start:(0,u.A)({},o.start),end:(0,u.A)({},a.end)},e[n][1].end=(0,u.A)({},o.start),e[d][1].start=(0,u.A)({},a.end),l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=Au(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=Au(l,[["enter",r,t],["enter",o,t],["exit",o,t],["enter",i,t]]),l=Au(l,jc(t.parser.constructs.insideSpan.null,e.slice(n+1,d),t)),l=Au(l,[["exit",i,t],["enter",a,t],["exit",a,t],["exit",r,t]]),e[d][1].end.offset-e[d][1].start.offset?(c=2,l=Au(l,[["enter",e[d][1],t],["exit",e[d][1],t]])):c=0,Cu(e,n-1,d-n+3,l),d=n+l.length-c-2;break}d=-1;for(;++d<e.length;)"attentionSequence"===e[d][1].type&&(e[d][1].type="data");return e},tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Uc(r);let o;return function(t){return o=t,e.enter("attentionSequence"),a(t)};function a(s){if(s===o)return e.consume(s),a;const l=e.exit("attentionSequence"),u=Uc(s),c=!u||2===u&&i||n.includes(s),d=!i||2===i&&u||n.includes(r);return l._open=Boolean(42===o?c:c&&(i||!d)),l._close=Boolean(42===o?d:d&&(u||!c)),t(s)}}};function Hc(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Vc={name:"autolink",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i};function i(t){return Nu(t)?(e.consume(t),o):64===t?n(t):l(t)}function o(e){return 43===e||45===e||46===e||ju(e)?(r=1,a(e)):l(e)}function a(t){return 58===t?(e.consume(t),r=0,s):(43===t||45===t||46===t||ju(t))&&r++<32?(e.consume(t),a):(r=0,l(t))}function s(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||Ou(r)?n(r):(e.consume(r),s)}function l(t){return 64===t?(e.consume(t),u):Bu(t)?(e.consume(t),l):n(t)}function u(e){return ju(e)?c(e):n(e)}function c(n){return 46===n?(e.consume(n),r=0,u):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):d(n)}function d(t){if((45===t||ju(t))&&r++<63){const n=45===t?d:c;return e.consume(t),n}return n(t)}}};const Kc={name:"htmlText",tokenize:function(e,t,n){const r=this;let i,o,a;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),s};function s(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),w):63===t?(e.consume(t),v):Nu(t)?(e.consume(t),x):n(t)}function l(t){return 45===t?(e.consume(t),u):91===t?(e.consume(t),o=0,p):Nu(t)?(e.consume(t),y):n(t)}function u(t){return 45===t?(e.consume(t),h):n(t)}function c(t){return null===t?n(t):45===t?(e.consume(t),d):Uu(t)?(a=c,I(t)):(e.consume(t),c)}function d(t){return 45===t?(e.consume(t),h):c(t)}function h(e){return 62===e?_(e):45===e?d(e):c(e)}function p(t){const r="CDATA[";return t===r.charCodeAt(o++)?(e.consume(t),6===o?m:p):n(t)}function m(t){return null===t?n(t):93===t?(e.consume(t),f):Uu(t)?(a=m,I(t)):(e.consume(t),m)}function f(t){return 93===t?(e.consume(t),g):m(t)}function g(t){return 62===t?_(t):93===t?(e.consume(t),g):m(t)}function y(t){return null===t||62===t?_(t):Uu(t)?(a=y,I(t)):(e.consume(t),y)}function v(t){return null===t?n(t):63===t?(e.consume(t),b):Uu(t)?(a=v,I(t)):(e.consume(t),v)}function b(e){return 62===e?_(e):v(e)}function w(t){return Nu(t)?(e.consume(t),D):n(t)}function D(t){return 45===t||ju(t)?(e.consume(t),D):k(t)}function k(t){return Uu(t)?(a=k,I(t)):Hu(t)?(e.consume(t),k):_(t)}function x(t){return 45===t||ju(t)?(e.consume(t),x):47===t||62===t||zu(t)?E(t):n(t)}function E(t){return 47===t?(e.consume(t),_):58===t||95===t||Nu(t)?(e.consume(t),S):Uu(t)?(a=E,I(t)):Hu(t)?(e.consume(t),E):_(t)}function S(t){return 45===t||46===t||58===t||95===t||ju(t)?(e.consume(t),S):C(t)}function C(t){return 61===t?(e.consume(t),A):Uu(t)?(a=C,I(t)):Hu(t)?(e.consume(t),C):E(t)}function A(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),i=t,T):Uu(t)?(a=A,I(t)):Hu(t)?(e.consume(t),A):(e.consume(t),F)}function T(t){return t===i?(e.consume(t),i=void 0,R):null===t?n(t):Uu(t)?(a=T,I(t)):(e.consume(t),T)}function F(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||zu(t)?E(t):(e.consume(t),F)}function R(e){return 47===e||62===e||zu(e)?E(e):n(e)}function _(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function I(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),P}function P(t){return Hu(t)?Gu(e,M,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):M(t)}function M(t){return e.enter("htmlTextData"),a(t)}}};const Yc={name:"labelStartLink",resolveAll:Bc.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};const Gc={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),r};function r(r){return Uu(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}};const Qc={name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,n,r=e.length-4,i=3;if(("lineEnding"===e[i][1].type||"space"===e[i][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type))for(t=i;++t<r;)if("codeTextData"===e[t][1].type){e[i][1].type="codeTextPadding",e[r][1].type="codeTextPadding",i+=2,r-=2;break}t=i-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},tokenize:function(e,t,n){let r,i,o=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)};function a(t){return 96===t?(e.consume(t),o++,a):(e.exit("codeTextSequence"),s(t))}function s(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),s):96===t?(i=e.enter("codeTextSequence"),r=0,u(t)):Uu(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||Uu(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),l)}function u(n){return 96===n?(e.consume(n),r++,u):r===o?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(i.type="codeTextData",l(n))}}};const Zc={42:uc,43:uc,45:uc,48:uc,49:uc,50:uc,51:uc,52:uc,53:uc,54:uc,55:uc,56:uc,57:uc,62:hc},Xc={91:vc},Jc={[-2]:wc,[-1]:wc,32:wc},$c={35:kc,42:lc,45:[xc,lc],60:Cc,61:xc,95:lc,96:Rc,126:Rc},ed={38:Pc,92:Mc},td={[-5]:Nc,[-4]:Nc,[-3]:Nc,33:qc,38:Pc,42:zc,60:[Vc,Kc],91:Yc,92:[Gc,Mc],93:Bc,95:zc,96:Qc},nd={null:[zc,nc]},rd={null:[42,95]},id={null:[]};function od(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let a=[],s=[],l=!0;const u={attempt:v(function(e,t){b(e,t.from)}),check:v(y),consume:function(e){Uu(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,w()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++));c.previous=e,l=!0},enter:function(e,t){const n=t||{};return n.type=e,n.start=m(),c.events.push(["enter",n,c]),s.push(n),n},exit:function(e){const t=s.pop();return t.end=m(),c.events.push(["exit",t,c]),t},interrupt:v(y,{interrupt:!0})},c={code:null,containerState:{},defineSkip:function(e){i[e.line]=e.column,w()},events:[],now:m,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let a;if("string"===typeof o)a=o;else switch(o){case-5:a="\r";break;case-4:a="\n";break;case-3:a="\r\n";break;case-2:a=t?" ":"\t";break;case-1:if(!t&&i)continue;a=" ";break;default:a=String.fromCharCode(o)}i=-2===o,r.push(a)}return r.join("")}(p(e),t)},sliceStream:p,write:function(e){if(a=Au(a,e),f(),null!==a[a.length-1])return[];return b(t,0),c.events=jc(o,c.events,c),c.events}};let d,h=t.tokenize.call(c,u);return t.resolveAll&&o.push(t),c;function p(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let a;if(n===i)a=[e[n].slice(r,o)];else{if(a=e.slice(n,i),r>-1){const e=a[0];"string"===typeof e?a[0]=e.slice(r):a.shift()}o>0&&a.push(e[i].slice(0,o))}return a}(a,e)}function m(){const{_bufferIndex:e,_index:t,line:n,column:i,offset:o}=r;return{_bufferIndex:e,_index:t,line:n,column:i,offset:o}}function f(){let e;for(;r._index<a.length;){const t=a[r._index];if("string"===typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)g(t.charCodeAt(r._bufferIndex));else g(t)}}function g(e){l=void 0,d=e,h=h(e)}function y(e,t){t.restore()}function v(e,t){return function(n,i,o){let a,d,h,p;return Array.isArray(n)?f(n):"tokenize"in n?f([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return f([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function f(e){return a=e,d=0,0===e.length?o:g(e[d])}function g(e){return function(n){p=function(){const e=m(),t=c.previous,n=c.currentConstruct,i=c.events.length,o=Array.from(s);return{from:i,restore:a};function a(){r=e,c.previous=t,c.currentConstruct=n,c.events.length=i,s=o,w()}}(),h=e,e.partial||(c.currentConstruct=e);if(e.name&&c.parser.constructs.disable.null.includes(e.name))return v(n);return e.tokenize.call(t?Object.assign(Object.create(c),t):c,u,y,v)(n)}}function y(t){return l=!0,e(h,p),i}function v(e){return l=!0,p.restore(),++d<a.length?g(a[d]):o}}}function b(e,t){e.resolveAll&&!o.includes(e)&&o.push(e),e.resolve&&Cu(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function w(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function ad(e){const t=function(e){const t={};let n=-1;for(;++n<e.length;)Pu(t,e[n]);return t}([i,...(e||{}).extensions||[]]),n={constructs:t,content:r(Qu),defined:[],document:r(Zu),flow:r(tc),lazy:{},string:r(rc),text:r(ic)};return n;function r(e){return function(t){return od(n,e,t)}}}const sd=/[\0\t\n\r]/g;function ld(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535===(65535&n)||65534===(65535&n)||n>1114111?"\ufffd":String.fromCodePoint(n)}const ud=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function cd(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return ld(n.slice(t?2:1),t?16:10)}return Ic(n)||e}const dd={}.hasOwnProperty;function hd(e,t,n){return"string"!==typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(te),autolinkProtocol:S,autolinkEmail:S,atxHeading:o(X),blockQuote:o(K),characterEscape:S,characterReference:S,codeFenced:o(Y),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:o(Y,a),codeText:o(G,a),codeTextData:S,data:S,codeFlowValue:S,definition:o(Q),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:o(Z),hardBreakEscape:o(J),hardBreakTrailing:o(J),htmlFlow:o($,a),htmlFlowData:S,htmlText:o($,a),htmlTextData:S,image:o(ee),label:a,link:o(te),listItem:o(re),listItemValue:h,listOrdered:o(ne,d),listUnordered:o(ne),paragraph:o(ie),reference:L,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:o(X),strong:o(oe),thematicBreak:o(se)},exit:{atxHeading:l(),atxHeadingSequence:D,autolink:l(),autolinkEmail:V,autolinkProtocol:H,blockQuote:l(),characterEscapeValue:C,characterReferenceMarkerHexadecimal:q,characterReferenceMarkerNumeric:q,characterReferenceValue:U,characterReference:z,codeFenced:l(g),codeFencedFence:f,codeFencedFenceInfo:p,codeFencedFenceMeta:m,codeFlowValue:C,codeIndented:l(y),codeText:l(_),codeTextData:C,data:C,definition:l(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:l(),hardBreakEscape:l(T),hardBreakTrailing:l(T),htmlFlow:l(F),htmlFlowData:C,htmlText:l(R),htmlTextData:C,image:l(P),label:N,labelText:M,lineEnding:A,link:l(I),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:W,resourceDestinationString:j,resourceTitleString:B,resource:O,setextHeading:l(E),setextHeadingLineSequence:x,setextHeadingText:k,strong:l(),thematicBreak:l()}};md(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(e){let r={type:"root",children:[]};const o={stack:[r],tokenStack:[],config:t,enter:s,exit:u,buffer:a,resume:c,data:n},l=[];let d=-1;for(;++d<e.length;)if("listOrdered"===e[d][1].type||"listUnordered"===e[d][1].type)if("enter"===e[d][0])l.push(d);else{d=i(e,l.pop(),d)}for(d=-1;++d<e.length;){const n=t[e[d][0]];dd.call(n,e[d][1].type)&&n[e[d][1].type].call(Object.assign({sliceSerialize:e[d][2].sliceSerialize},o),e[d][1])}if(o.tokenStack.length>0){const e=o.tokenStack[o.tokenStack.length-1];(e[1]||gd).call(o,void 0,e[0])}for(r.position={start:pd(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:pd(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},d=-1;++d<t.transforms.length;)r=t.transforms[d](r)||r;return r}function i(e,t,n){let r,i,o,a,s=t-1,l=-1,u=!1;for(;++s<=n;){const t=e[s];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,a=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!r||a||l||o||(o=s),a=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:a=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let a=s;for(i=void 0;a--;){const t=e[a];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;i&&(e[i][1].type="lineEndingBlank",u=!0),t[1].type="lineEnding",i=a}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}o&&(!i||o<i)&&(r._spread=!0),r.end=Object.assign({},i?e[i][1].start:t[1].end),e.splice(i||s,0,["exit",r,t[2]]),s++,n++}if("listItemPrefix"===t[1].type){const i={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};r=i,e.splice(s,0,["enter",i,t[2]]),s++,n++,o=void 0,a=!0}}}return e[t][1]._spread=u,n}function o(e,t){return n;function n(n){s.call(this,e(n),n),t&&t.call(this,n)}}function a(){this.stack.push({type:"fragment",children:[]})}function s(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:pd(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),u.call(this,t)}}function u(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+tu({start:e.start,end:e.end})+"): it\u2019s not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{(r[1]||gd).call(this,e,r[0])}n.position.end=pd(e.end)}function c(){return function(e,t){const n=t||xu;return Eu(e,"boolean"!==typeof n.includeImageAlt||n.includeImageAlt,"boolean"!==typeof n.includeHtml||n.includeHtml)}(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function p(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function m(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function f(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function v(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=yc(this.sliceSerialize(e)).toLowerCase()}function b(){const e=this.resume();this.stack[this.stack.length-1].title=e}function w(){const e=this.resume();this.stack[this.stack.length-1].url=e}function D(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function k(){this.data.setextHeadingSlurpLineEnding=!0}function x(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function E(){this.data.setextHeadingSlurpLineEnding=void 0}function S(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=ae(),n.position={start:pd(e.start),end:void 0},t.push(n)),this.stack.push(n)}function C(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=pd(e.end)}function A(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=pd(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(S.call(this,e),C.call(this,e))}function T(){this.data.atHardBreak=!0}function F(){const e=this.resume();this.stack[this.stack.length-1].value=e}function R(){const e=this.resume();this.stack[this.stack.length-1].value=e}function _(){const e=this.resume();this.stack[this.stack.length-1].value=e}function I(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function P(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function M(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(ud,cd)}(t),n.identifier=yc(t).toLowerCase()}function N(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function j(){const e=this.resume();this.stack[this.stack.length-1].url=e}function B(){const e=this.resume();this.stack[this.stack.length-1].title=e}function O(){this.data.inReference=void 0}function L(){this.data.referenceType="collapsed"}function W(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=yc(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function q(e){this.data.characterReferenceType=e.type}function U(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let r;if(n)r=ld(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{r=Ic(t)}this.stack[this.stack.length-1].value+=r}function z(e){this.stack.pop().position.end=pd(e.end)}function H(e){C.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function V(e){C.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function K(){return{type:"blockquote",children:[]}}function Y(){return{type:"code",lang:null,meta:null,value:""}}function G(){return{type:"inlineCode",value:""}}function Q(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Z(){return{type:"emphasis",children:[]}}function X(){return{type:"heading",depth:0,children:[]}}function J(){return{type:"break"}}function $(){return{type:"html",value:""}}function ee(){return{type:"image",title:null,url:"",alt:null}}function te(){return{type:"link",title:null,url:"",children:[]}}function ne(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function re(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function ie(){return{type:"paragraph",children:[]}}function oe(){return{type:"strong",children:[]}}function ae(){return{type:"text",value:""}}function se(){return{type:"thematicBreak"}}}(n)(function(e){for(;!Ru(e););return e}(ad(n).document().write(function(){let e,t=1,n="",r=!0;return function(i,o,a){const s=[];let l,u,c,d,h;for(i=n+("string"===typeof i?i.toString():new TextDecoder(o||void 0).decode(i)),c=0,n="",r&&(65279===i.charCodeAt(0)&&c++,r=void 0);c<i.length;){if(sd.lastIndex=c,l=sd.exec(i),d=l&&void 0!==l.index?l.index:i.length,h=i.charCodeAt(d),!l){n=i.slice(c);break}if(10===h&&c===d&&e)s.push(-3),e=void 0;else switch(e&&(s.push(-5),e=void 0),c<d&&(s.push(i.slice(c,d)),t+=d-c),h){case 0:s.push(65533),t++;break;case 9:for(u=4*Math.ceil(t/4),s.push(-2);t++<u;)s.push(-1);break;case 10:s.push(-4),t=1;break;default:e=!0,t=1}c=d+1}return a&&(e&&s.push(-5),n&&s.push(n),s.push(null)),s}}()(e,t,!0))))}function pd(e){return{line:e.line,column:e.column,offset:e.offset}}function md(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?md(e,r):fd(e,r)}}function fd(e,t){let n;for(n in t)if(dd.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function gd(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+tu({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+tu({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+tu({start:t.start,end:t.end})+") is still open")}function yd(e){const t=this;t.parser=function(n){return hd(n,(0,u.A)((0,u.A)((0,u.A)({},t.data("settings")),e),{},{extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]}))}}const vd="object"===typeof self?self:globalThis,bd=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),r=i=>{if(e.has(i))return e.get(i);const[o,a]=t[i];switch(o){case 0:case-1:return n(a,i);case 1:{const e=n([],i);for(const t of a)e.push(r(t));return e}case 2:{const e=n({},i);for(const[t,n]of a)e[r(t)]=r(n);return e}case 3:return n(new Date(a),i);case 4:{const{source:e,flags:t}=a;return n(new RegExp(e,t),i)}case 5:{const e=n(new Map,i);for(const[t,n]of a)e.set(r(t),r(n));return e}case 6:{const e=n(new Set,i);for(const t of a)e.add(r(t));return e}case 7:{const{name:e,message:t}=a;return n(new vd[e](t),i)}case 8:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:e}=new Uint8Array(a);return n(new DataView(e),a)}}return n(new vd[o](a),i)};return r})(new Map,e)(0),wd="",{toString:Dd}={},{keys:kd}=Object,xd=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=Dd.call(e).slice(8,-1);switch(n){case"Array":return[1,wd];case"Object":return[2,wd];case"Date":return[3,wd];case"RegExp":return[4,wd];case"Map":return[5,wd];case"Set":return[6,wd];case"DataView":return[1,n]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},Ed=e=>{let[t,n]=e;return 0===t&&("function"===n||"symbol"===n)},Sd=function(e){let{json:t,lossy:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];return((e,t,n,r)=>{const i=(e,t)=>{const i=r.push(e)-1;return n.set(t,i),i},o=r=>{if(n.has(r))return n.get(r);let[a,s]=xd(r);switch(a){case 0:{let t=r;switch(s){case"bigint":a=8,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+s);t=null;break;case"undefined":return i([-1],r)}return i([a,t],r)}case 1:{if(s){let e=r;return"DataView"===s?e=new Uint8Array(r.buffer):"ArrayBuffer"===s&&(e=new Uint8Array(r)),i([s,[...e]],r)}const e=[],t=i([a,e],r);for(const n of r)e.push(o(n));return t}case 2:{if(s)switch(s){case"BigInt":return i([s,r.toString()],r);case"Boolean":case"Number":case"String":return i([s,r.valueOf()],r)}if(t&&"toJSON"in r)return o(r.toJSON());const n=[],l=i([a,n],r);for(const t of kd(r))!e&&Ed(xd(r[t]))||n.push([o(t),o(r[t])]);return l}case 3:return i([a,r.toISOString()],r);case 4:{const{source:e,flags:t}=r;return i([a,{source:e,flags:t}],r)}case 5:{const t=[],n=i([a,t],r);for(const[i,a]of r)(e||!Ed(xd(i))&&!Ed(xd(a)))&&t.push([o(i),o(a)]);return n}case 6:{const t=[],n=i([a,t],r);for(const i of r)!e&&Ed(xd(i))||t.push(o(i));return n}}const{message:l}=r;return i([a,{name:s,message:l}],r)};return o})(!(t||n),!!t,new Map,r)(e),r},Cd="function"===typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?bd(Sd(e,t)):structuredClone(e):(e,t)=>bd(Sd(e,t));function Ad(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let a="";if(37===o&&ju(e.charCodeAt(n+1))&&ju(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(a=String.fromCharCode(o));else if(o>55295&&o<57344){const t=e.charCodeAt(n+1);o<56320&&t>56319&&t<57344?(a=String.fromCharCode(o,t),i=1):a="\ufffd"}else a=String.fromCharCode(o);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Td(e,t){const n=[{type:"text",value:"\u21a9"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Fd(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const Rd=function(e){if(null===e||void 0===e)return Id;if("function"===typeof e)return _d(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Rd(e[n]);return _d(r);function r(){let e=-1;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(;++e<t.length;)if(t[e].apply(this,r))return!0;return!1}}(e):function(e){const t=e;return _d(n);function n(n){const r=n;let i;for(i in e)if(r[i]!==t[i])return!1;return!0}}(e);if("string"===typeof e)return function(e){return _d(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function _d(e){return function(t,n,r){return Boolean(Pd(t)&&e.call(this,t,"number"===typeof n?n:void 0,r||void 0))}}function Id(){return!0}function Pd(e){return null!==e&&"object"===typeof e&&"type"in e}const Md=[],Nd=!0,jd=!1;function Bd(e,t,n,r){let i;"function"===typeof t&&"function"!==typeof n?(r=n,n=t):i=t;const o=Rd(i),a=r?-1:1;!function e(i,s,l){const u=i&&"object"===typeof i?i:{};if("string"===typeof u.type){const e="string"===typeof u.tagName?u.tagName:"string"===typeof u.name?u.name:void 0;Object.defineProperty(c,"name",{value:"node ("+i.type+(e?"<"+e+">":"")+")"})}return c;function c(){let u,c,d,h=Md;if((!t||o(i,s,l[l.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[Nd,e];return null===e||void 0===e?Md:[e]}(n(i,l)),h[0]===jd))return h;if("children"in i&&i.children){const t=i;if(t.children&&"skip"!==h[0])for(c=(r?t.children.length:-1)+a,d=l.concat(t);c>-1&&c<t.children.length;){const n=t.children[c];if(u=e(n,c,d)(),u[0]===jd)return u;c="number"===typeof u[1]?u[1]:c+a}}return h}}(e,void 0,[])()}function Od(e,t,n,r){let i,o,a;"function"===typeof t&&"function"!==typeof n?(o=void 0,a=t,i=n):(o=t,a=n,i=r),Bd(e,o,function(e,t){const n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return a(e,r,n)},i)}function Ld(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),o=i[0];o&&"text"===o.type?o.value="["+o.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&"text"===a.type?a.value+=r:i.push({type:"text",value:r}),i}function Wd(e){const t=e.spread;return null===t||void 0===t?e.children.length>1:t}function qd(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const o=[];for(;r;)o.push(Ud(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(Ud(t.slice(i),i>0,!1)),o.join("")}function Ud(e,t,n){let r=0,i=e.length;if(t){let t=e.codePointAt(r);for(;9===t||32===t;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(i-1);for(;9===t||32===t;)i--,t=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}const zd={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Ad(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let a,s=e.footnoteCounts.get(r);void 0===s?(s=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=o+1,s+=1,e.footnoteCounts.set(r,s);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,u),e.applyData(t,u)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Ld(e,t);const i={src:Ad(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)},image:function(e,t){const n={src:Ad(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Ld(e,t);const i={href:Ad(r.url||"")};null!==r.title&&void 0!==r.title&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)},link:function(e,t){const n={href:Ad(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){const r=e.all(t),i=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Wd(n[r])}return t}(n):Wd(t),o={},a=[];if("boolean"===typeof t.checked){const e=r[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},r.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let s=-1;for(;++s<r.length;){const e=r[s];(i||0!==s||"element"!==e.type||"p"!==e.tagName)&&a.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||i?a.push(e):a.push(...e.children)}const l=r[r.length-1];l&&(i||"element"!==l.type||"p"!==l.tagName)&&a.push({type:"text",value:"\n"});const u={type:"element",tagName:"li",properties:o,children:a};return e.patch(t,u),e.applyData(t,u)},list:function(e,t){const n={},r=e.all(t);let i=-1;for("number"===typeof t.start&&1!==t.start&&(n.start=t.start);++i<r.length;){const e=r[i];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),i.push(n)}if(n.length>0){const r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},o=$l(t.children[1]),a=Jl(t.children[t.children.length-1]);o&&a&&(r.position={start:o,end:a}),i.push(r)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const r=n?n.children:void 0,i=0===(r?r.indexOf(t):1)?"th":"td",o=n&&"table"===n.type?n.align:void 0,a=o?o.length:t.children.length;let s=-1;const l=[];for(;++s<a;){const n=t.children[s],r={},a=o?o[s]:void 0;a&&(r.align=a);let u={type:"element",tagName:i,properties:r,children:[]};n&&(u.children=e.all(n),e.patch(n,u),u=e.applyData(n,u)),l.push(u)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,u),e.applyData(t,u)},text:function(e,t){const n={type:"text",value:qd(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:Hd,yaml:Hd,definition:Hd,footnoteDefinition:Hd};function Hd(){}const Vd=["children"],Kd={}.hasOwnProperty,Yd={};function Gd(e,t){e.position&&(t.position=function(e){const t=$l(e),n=Jl(e);if(t&&n)return{start:t,end:n}}(e))}function Qd(e,t){let n=t;if(e&&e.data){const t=e.data.hName,r=e.data.hChildren,i=e.data.hProperties;if("string"===typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&i&&Object.assign(n.properties,Cd(i)),"children"in n&&n.children&&null!==r&&void 0!==r&&(n.children=r)}return n}function Zd(e,t){const n=t.data||{},r=!("value"in t)||Kd.call(n,"hProperties")||Kd.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,r),e.applyData(t,r)}function Xd(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function Jd(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function $d(e,t){const n=function(e,t){const n=t||Yd,r=new Map,i=new Map,o=new Map,a=(0,u.A)((0,u.A)({},zd),n.handlers),s={all:function(e){const t=[];if("children"in e){const n=e.children;let r=-1;for(;++r<n.length;){const i=s.one(n[r],e);if(i){if(r&&"break"===n[r-1].type&&(Array.isArray(i)||"text"!==i.type||(i.value=Jd(i.value)),!Array.isArray(i)&&"element"===i.type)){const e=i.children[0];e&&"text"===e.type&&(e.value=Jd(e.value))}Array.isArray(i)?t.push(...i):t.push(i)}}}return t},applyData:Qd,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:a,one:function(e,t){const n=e.type,r=s.handlers[n];if(Kd.call(s.handlers,n)&&r)return r(s,e,t);if(s.options.passThrough&&s.options.passThrough.includes(n)){if("children"in e){const{children:t}=e,n=(0,pi.A)(e,Vd),r=Cd(n);return r.children=s.all(e),r}return Cd(e)}return(s.options.unknownHandler||Zd)(s,e,t)},options:n,patch:Gd,wrap:Xd};return Od(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?r:i,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}}),s}(e,t),r=n.one(e,void 0),i=function(e){const t="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Td,r=e.options.footnoteBackLabel||Fd,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let l=-1;for(;++l<e.footnoteOrder.length;){const i=e.footnoteById.get(e.footnoteOrder[l]);if(!i)continue;const o=e.all(i),a=String(i.identifier).toUpperCase(),u=Ad(a.toLowerCase());let c=0;const d=[],h=e.footnoteCounts.get(a);for(;void 0!==h&&++c<=h;){d.length>0&&d.push({type:"text",value:" "});let e="string"===typeof n?n:n(l,c);"string"===typeof e&&(e={type:"text",value:e}),d.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+u+(c>1?"-"+c:""),dataFootnoteBackref:"",ariaLabel:"string"===typeof r?r:r(l,c),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const p=o[o.length-1];if(p&&"element"===p.type&&"p"===p.tagName){const e=p.children[p.children.length-1];e&&"text"===e.type?e.value+=" ":p.children.push({type:"text",value:" "}),p.children.push(...d)}else o.push(...d);const m={type:"element",tagName:"li",properties:{id:t+"fn-"+u},children:e.wrap(o,!0)};e.patch(i,m),s.push(m)}if(0!==s.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:(0,u.A)((0,u.A)({},Cd(a)),{},{id:"footnote-label"}),children:[{type:"text",value:i}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(s,!0)},{type:"text",value:"\n"}]}}(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:"\n"},i),o}function eh(e,t){return e&&"run"in e?async function(n,r){const i=$d(n,(0,u.A)({file:r},t));await e.run(i,r)}:function(n,r){return $d(n,(0,u.A)({file:r},e||t))}}function th(e){if(e)throw e}var nh=n(240);function rh(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function ih(){const e=[],t={run:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let i=-1;const o=n.pop();if("function"!==typeof o)throw new TypeError("Expected function as last argument, not "+o);!function t(r){const a=e[++i];let s=-1;if(r)o(r);else{for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];for(;++s<n.length;)null!==u[s]&&void 0!==u[s]||(u[s]=n[s]);n=u,a?function(e,t){let n;return i;function i(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];const l=e.length>i.length;let u;l&&i.push(o);try{u=e.apply(this,i)}catch(r){if(l&&n)throw r;return o(r)}l||(u&&u.then&&"function"===typeof u.then?u.then(a,o):u instanceof Error?o(u):a(u))}function o(e){if(!n){n=!0;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t(e,...i)}}function a(e){o(null,e)}}(a,t)(...u):o(null,...u)}}(null,...n)},use:function(n){if("function"!==typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const oh={basename:function(e,t){if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');ah(e);let n,r=0,i=-1,o=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;o--;)if(47===e.codePointAt(o)){if(n){r=o+1;break}}else i<0&&(n=!0,i=o+1);return i<0?"":e.slice(r,i)}if(t===e)return"";let a=-1,s=t.length-1;for(;o--;)if(47===e.codePointAt(o)){if(n){r=o+1;break}}else a<0&&(n=!0,a=o+1),s>-1&&(e.codePointAt(o)===t.codePointAt(s--)?s<0&&(i=o):(s=-1,i=a));r===i?i=a:i<0&&(i=e.length);return e.slice(r,i)},dirname:function(e){if(ah(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.codePointAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){ah(e);let t,n=e.length,r=-1,i=0,o=-1,a=0;for(;n--;){const s=e.codePointAt(n);if(47!==s)r<0&&(t=!0,r=n+1),46===s?o<0?o=n:1!==a&&(a=1):o>-1&&(a=-1);else if(t){i=n+1;break}}if(o<0||r<0||0===a||1===a&&o===r-1&&o===i+1)return"";return e.slice(o,r)},join:function(){let e,t=-1;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(;++t<r.length;)ah(r[t]),r[t]&&(e=void 0===e?r[t]:e+"/"+r[t]);return void 0===e?".":function(e){ah(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,r,i="",o=0,a=-1,s=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(a===l-1||1===s);else if(a!==l-1&&2===s){if(i.length<2||2!==o||46!==i.codePointAt(i.length-1)||46!==i.codePointAt(i.length-2))if(i.length>2){if(r=i.lastIndexOf("/"),r!==i.length-1){r<0?(i="",o=0):(i=i.slice(0,r),o=i.length-1-i.lastIndexOf("/")),a=l,s=0;continue}}else if(i.length>0){i="",o=0,a=l,s=0;continue}t&&(i=i.length>0?i+"/..":"..",o=2)}else i.length>0?i+="/"+e.slice(a+1,l):i=e.slice(a+1,l),o=l-a-1;a=l,s=0}else 46===n&&s>-1?s++:s=-1}return i}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(e)},sep:"/"};function ah(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const sh={cwd:function(){return"/"}};function lh(e){return Boolean(null!==e&&"object"===typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function uh(e){if("string"===typeof e)e=new URL(e);else if(!lh(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const ch=["history","path","basename","stem","extname","dirname"];class dh{constructor(e){let t;t=e?lh(e)?{path:e}:"string"===typeof e||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":sh.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,r=-1;for(;++r<ch.length;){const e=ch[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)ch.includes(n)||(this[n]=t[n])}get basename(){return"string"===typeof this.path?oh.basename(this.path):void 0}set basename(e){ph(e,"basename"),hh(e,"basename"),this.path=oh.join(this.dirname||"",e)}get dirname(){return"string"===typeof this.path?oh.dirname(this.path):void 0}set dirname(e){mh(this.basename,"dirname"),this.path=oh.join(e||"",this.basename)}get extname(){return"string"===typeof this.path?oh.extname(this.path):void 0}set extname(e){if(hh(e,"extname"),mh(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=oh.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){lh(e)&&(e=uh(e)),ph(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"===typeof this.path?oh.basename(this.path,this.extname):void 0}set stem(e){ph(e,"stem"),hh(e,"stem"),this.path=oh.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){const r=new ou(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){if(void 0===this.value)return"";if("string"===typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function hh(e,t){if(e&&e.includes(oh.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+oh.sep+"`")}function ph(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function mh(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const fh=function(e){const t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};return Object.setPrototypeOf(r,t),r},gh={}.hasOwnProperty;class yh extends fh{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=ih()}copy(){const e=new yh;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(nh(!0,{},this.namespace)),e}data(e,t){return"string"===typeof e?2===arguments.length?(Dh("data",this.frozen),this.namespace[e]=t,this):gh.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Dh("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const r=t.call(e,...n);"function"===typeof r&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=Eh(e),n=this.parser||this.Parser;return bh("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),bh("process",this.parser||this.Parser),wh("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,i){const o=Eh(e),a=n.parse(o);function s(e,n){e||!n?i(e):r?r(n):t(void 0,n)}n.run(a,o,function(e,t,r){if(e||!t||!r)return s(e);const i=t,o=n.stringify(i,r);var a;"string"===typeof(a=o)||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(a)?r.value=o:r.result=o,s(e,r)})}}processSync(e){let t,n=!1;return this.freeze(),bh("processSync",this.parser||this.Parser),wh("processSync",this.compiler||this.Compiler),this.process(e,function(e,r){n=!0,th(e),t=r}),xh("processSync","process",n),t}run(e,t,n){kh(e),this.freeze();const r=this.transformers;return n||"function"!==typeof t||(n=t,t=void 0),n?i(void 0,n):new Promise(i);function i(i,o){const a=Eh(t);r.run(e,a,function(t,r,a){const s=r||e;t?o(t):i?i(s):n(void 0,s,a)})}}runSync(e,t){let n,r=!1;return this.run(e,t,function(e,t){th(e),n=t,r=!0}),xh("runSync","run",r),n}stringify(e,t){this.freeze();const n=Eh(t),r=this.compiler||this.Compiler;return wh("stringify",r),kh(e),r(e,n)}use(e){const t=this.attachers,n=this.namespace;if(Dh("use",this.frozen),null===e||void 0===e);else if("function"===typeof e){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];u(e,i)}else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?l(e):s(e)}return this;function a(e){if("function"===typeof e)u(e,[]);else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;u(t,n)}else s(e)}}function s(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(e.plugins),e.settings&&(n.settings=nh(!0,n.settings,e.settings))}function l(e){let t=-1;if(null===e||void 0===e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){a(e[t])}}}function u(e,n){let r=-1,i=-1;for(;++r<t.length;)if(t[r][0]===e){i=r;break}if(-1===i)t.push([e,...n]);else if(n.length>0){let[r,...o]=n;const a=t[i][1];rh(a)&&rh(r)&&(r=nh(!0,a,r)),t[i]=[e,r,...o]}}}}const vh=(new yh).freeze();function bh(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function wh(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function Dh(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function kh(e){if(!rh(e)||"string"!==typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function xh(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Eh(e){return function(e){return Boolean(e&&"object"===typeof e&&"message"in e&&"messages"in e)}(e)?e:new dh(e)}const Sh=[],Ch={allowDangerousHtml:!0},Ah=/^(https?|ircs?|mailto|xmpp)$/i,Th=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Fh(e){const t=Rh(e),n=_h(e);return Ih(t.runSync(t.parse(n),n),e)}function Rh(e){const t=e.rehypePlugins||Sh,n=e.remarkPlugins||Sh,r=e.remarkRehypeOptions?(0,u.A)((0,u.A)({},e.remarkRehypeOptions),Ch):Ch;return vh().use(yd).use(n).use(eh,r).use(t)}function _h(e){const t=e.children||"",n=new dh;return"string"===typeof t&&(n.value=t),n}function Ih(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,o=t.disallowedElements,a=t.skipHtml,s=t.unwrapDisallowed,l=t.urlTransform||Ph;for(const u of Th)Object.hasOwn(t,u.from)&&dl((u.from,u.to&&u.to,u.id));return Od(e,function(e,t,i){if("raw"===e.type&&i&&"number"===typeof t)return a?i.children.splice(t,1):i.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in ku)if(Object.hasOwn(ku,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],r=ku[t];(null===r||r.includes(e.tagName))&&(e.properties[t]=l(String(n||""),t,e))}}if("element"===e.type){let a=n?!n.includes(e.tagName):!!o&&o.includes(e.tagName);if(!a&&r&&"number"===typeof t&&(a=!r(e,t,i)),a&&i&&"number"===typeof t)return s&&e.children?i.children.splice(t,1,...e.children):i.children.splice(t,1),t}}),hu(e,{Fragment:je.Fragment,components:i,ignoreInvalidStyle:!0,jsx:je.jsx,jsxs:je.jsxs,passKeys:!0,passNode:!0})}function Ph(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return-1===t||-1!==i&&t>i||-1!==n&&t>n||-1!==r&&t>r||Ah.test(e.slice(0,t))?e:""}const Mh=function(e){let{rawResponse:t}=e;return t?(0,je.jsxs)("div",{className:"coaching-analysis-wrapper",children:[(0,je.jsx)("div",{className:"coaching-header",children:(0,je.jsx)("h2",{children:"\ud83d\udcca Coach's Analysis"})}),(0,je.jsx)("div",{className:"coaching-content",children:(0,je.jsx)(Fh,{components:{blockquote:e=>{let{children:t}=e;return(0,je.jsx)("div",{className:"info-box",children:t})},p:e=>{let{children:t}=e;return(0,je.jsx)("p",{className:"coaching-p",children:t})},h1:e=>{let{children:t}=e;return(0,je.jsx)("h1",{className:"coaching-h1",children:t})},h2:e=>{let{children:t}=e;return(0,je.jsx)("h2",{className:"coaching-h2",children:t})},h3:e=>{let{children:t}=e;return(0,je.jsx)("h3",{className:"coaching-h3",children:t})},ul:e=>{let{children:t}=e;return(0,je.jsx)("ul",{className:"coaching-ul",children:t})},ol:e=>{let{children:t}=e;return(0,je.jsx)("ol",{className:"coaching-ol",children:t})},strong:e=>{let{children:t}=e;return(0,je.jsx)("strong",{className:"coaching-strong",children:t})}},children:t})})]}):null};function Nh(e){let{trainingPlan:t}=e;const n=re();return null!==t&&void 0!==t&&t.aiCoachingAnalysis?(0,je.jsx)("div",{className:"plan-welcome-screen",children:(0,je.jsxs)("div",{className:"welcome-container",children:[(0,je.jsxs)("div",{className:"welcome-header",children:[(0,je.jsx)("h1",{children:"\ud83c\udf89 Your Training Plan is Ready!"}),(0,je.jsx)("p",{children:"Here's what your AI coach has to say about your journey ahead"})]}),(0,je.jsx)(Mh,{rawResponse:t.aiCoachingAnalysis}),(0,je.jsx)("div",{className:"welcome-actions",children:(0,je.jsx)("button",{className:"btn-continue",onClick:()=>n("/dashboard"),children:"Continue to My Training Plan \u2192"})})]})}):(n("/dashboard"),null)}const jh=new class{calculateRunningCalories(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=e*(t?.63*t:100);return{estimate:Math.round(n),min:Math.round(.85*n),max:Math.round(1.15*n),range:"".concat(Math.round(.85*n),"-").concat(Math.round(1.15*n))}}calculateBikeCalories(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.calculateRunningCalories(e,t)}calculateWorkoutCalories(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&e.distance&&0!==e.distance&&("bike"===e.type||e.equipmentSpecific)?this.calculateBikeCalories(e.distance,t):null}};const Bh=function(e){let{userProfile:t,trainingPlan:n}=e;const r=re(),i=(0,u.A)((0,u.A)({},n),{},{weeks:[{week:1,phase:"base",totalMileage:15,isRestWeek:!1,workouts:[{day:"Monday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Tuesday",type:"tempo",workout:{name:"Sandwich Tempo",description:"Tempo effort sandwiched between easy running"},focus:"Lactate Threshold",equipmentSpecific:!1},{day:"Wednesday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Thursday",type:"easy",workout:{name:"Easy Run",description:"Conversational pace, aerobic base building"},focus:"Recovery"},{day:"Friday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Saturday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Sunday",type:"longRun",workout:{name:"Conversational Long Run",description:"Easy long run emphasizing conversational pace"},focus:"Endurance"}]},{week:2,phase:"base",totalMileage:18,isRestWeek:!1,workouts:[{day:"Monday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Tuesday",type:"hills",workout:{name:"Long Hill Progression",description:"Build power on sustained grades"},focus:"Power & Strength"},{day:"Wednesday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Thursday",type:"tempo",workout:{name:"Classic Tempo Run",description:"Continuous run at lactate threshold pace"},focus:"Lactate Threshold"},{day:"Friday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Saturday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Sunday",type:"longRun",workout:{name:"Thirds Progression",description:"Equal time segments with increasing intensity"},focus:"Endurance"}]},{week:5,phase:"build",totalMileage:25,isRestWeek:!1,workouts:[{day:"Monday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Tuesday",type:"intervals",workout:{name:"1000m VO2 Max Intervals",description:"Classic VO2 max development intervals"},focus:"VO2 Max & Speed"},{day:"Wednesday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Thursday",type:"tempo",workout:{name:"McMillan 2x2 Miles",description:"Two 2-mile repeats at threshold pace"},focus:"Lactate Threshold"},{day:"Friday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Saturday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Sunday",type:"longRun",workout:{name:"Marathon Pace Long Run",description:"Extended time at goal marathon pace"},focus:"Endurance"}]}],varietyShowcase:["Sandwich Tempo","Long Hill Progression","Classic Tempo Run","Conversational Long Run","Thirds Progression","1000m VO2 Max Intervals","McMillan 2x2 Miles","Marathon Pace Long Run","Hill Strides","Cruise Intervals","Super Fast Finish","Tempo Hills","Ladder Intervals","DUSA Progression","Cut-Down Intervals","Progressive Build Session"]});t.standUpBikeType&&(i.weeks[0].workouts[1]=(0,u.A)((0,u.A)({},i.weeks[0].workouts[1]),{},{type:"bike",workout:{name:"Progressive Build Session",description:"".concat(t.standUpBikeType,"-specific teardrop/elliptical motion workout")},equipmentSpecific:!0,distance:4}),i.weeks[1].workouts[1]=(0,u.A)((0,u.A)({},i.weeks[1].workouts[1]),{},{type:"bike",equipmentSpecific:!0,distance:5}),i.weeks[2].workouts[1]=(0,u.A)((0,u.A)({},i.weeks[2].workouts[1]),{},{type:"bike",equipmentSpecific:!0,distance:6}));const o=e=>({tempo:"#4299e1",intervals:"#e53e3e",hills:"#38a169",longRun:"#805ad5",easy:"#718096",rest:"#a0aec0",bike:"#FF9500"}[e]||"#718096");return(0,je.jsxs)("div",{style:{minHeight:"100vh",paddingBottom:"40px"},children:[(0,je.jsx)("div",{style:{color:"#AAAAAA",padding:"30px 0"},children:(0,je.jsxs)("div",{className:"container",children:[(0,je.jsx)("h1",{style:{margin:"0 0 16px 0"},children:"\ud83c\udf89 Your RunEQ Plan Preview"}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1.1rem",opacity:.9},children:"See how we've personalized training for your goals and equipment"})]})}),(0,je.jsxs)("div",{className:"container",style:{padding:"20px 16px"},children:[(0,je.jsxs)("div",{className:"card",style:{marginBottom:"20px"},children:[(0,je.jsx)("div",{className:"card-header",children:(0,je.jsx)("h2",{style:{margin:0},children:"Your Personalized Plan"})}),(0,je.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{color:"#AAAAAA",margin:"0 0 8px 0"},children:"Goal"}),(0,je.jsxs)("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600"},children:[n.planOverview.raceDistance," Training"]})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{color:"#AAAAAA",margin:"0 0 8px 0"},children:"Duration"}),(0,je.jsxs)("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600"},children:[n.planOverview.totalWeeks," weeks"]})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{color:"#AAAAAA",margin:"0 0 8px 0"},children:"Training Days"}),(0,je.jsxs)("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600"},children:[n.planOverview.runsPerWeek," days/week"]})]}),t.standUpBikeType&&(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{color:"#AAAAAA",margin:"0 0 8px 0"},children:"Equipment"}),(0,je.jsxs)("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600"},children:[t.standUpBikeType," optimized",(0,je.jsx)("span",{className:"badge badge-success",style:{marginLeft:"8px"},children:"Unique!"})]})]})]})]}),(0,je.jsxs)("div",{className:"card",style:{marginBottom:"20px",background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"#00FF88"},children:"\ud83d\ude80 Why Your Plan is Superior"}),(0,je.jsxs)("div",{style:{display:"grid",gap:"12px"},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,je.jsxs)("span",{children:[(0,je.jsx)("strong",{children:"Climate adapted:"})," Paces adjusted for ",t.climate," conditions"]})]}),(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,je.jsxs)("span",{children:[(0,je.jsx)("strong",{children:"Workout variety:"})," ",i.varietyShowcase.length,"+ different workouts vs repetitive formats"]})]}),(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,je.jsxs)("span",{children:[(0,je.jsx)("strong",{children:"Life flexible:"})," ",t.missedWorkoutPreference," approach to missed workouts"]})]}),t.standUpBikeType&&(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,je.jsxs)("span",{children:[(0,je.jsx)("strong",{children:"Equipment specific:"})," ",t.standUpBikeType," motion-optimized workouts"]})]}),(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,je.jsxs)("span",{children:[(0,je.jsx)("strong",{children:"Philosophy aligned:"})," ",t.trainingPhilosophy.replace("_","/")," training approach"]})]})]})]}),(0,je.jsxs)("div",{className:"card",style:{marginBottom:"20px"},children:[(0,je.jsxs)("div",{className:"card-header",children:[(0,je.jsx)("h2",{style:{margin:0},children:"Sample Training Weeks"}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",color:"#666"},children:"See how varied and intelligent your workouts are"})]}),i.weeks.map((e,n)=>{const{totalCalories:r,bikeWorkoutCount:a}=(e=>{var t;let n={min:0,max:0};const r=(null===(t=e.workouts)||void 0===t?void 0:t.filter(e=>("bike"===e.type||e.equipmentSpecific)&&e.distance&&e.distance>0))||[];return r.forEach(e=>{const t=jh.calculateWorkoutCalories(e);t&&(n.min+=t.min,n.max+=t.max)}),{totalCalories:n,bikeWorkoutCount:r.length}})(e);return(0,je.jsxs)("div",{style:{marginBottom:n<i.weeks.length-1?"32px":0},children:[(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",flexWrap:"wrap",gap:"12px"},children:[(0,je.jsxs)("h3",{style:{margin:0,color:"#AAAAAA"},children:["Week ",e.week," - ",e.phase.toUpperCase()," Phase"]}),(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[(0,je.jsxs)("span",{className:"badge badge-info",children:[e.totalMileage," miles"]}),a>0&&(0,je.jsxs)("span",{className:"badge",style:{background:"rgba(255, 149, 0, 0.15)",color:"#FF9500",border:"1px solid rgba(255, 149, 0, 0.3)",padding:"6px 12px",fontWeight:"600"},children:["\ud83d\udd25 ",Math.round(r.min),"-",Math.round(r.max)," cal"]}),e.isRestWeek&&(0,je.jsx)("span",{className:"badge badge-warning",children:"Recovery Week"})]})]}),(0,je.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"12px"},children:e.workouts.filter(e=>"rest"!==e.type).map(e=>(0,je.jsxs)("div",{className:"card",style:{background:e.equipmentSpecific?"rgba(0, 212, 255, 0.1)":"rgba(255, 255, 255, 0.05)",border:"2px solid ".concat(o(e.type),"20"),borderLeft:"4px solid ".concat(o(e.type)),padding:"16px"},children:[(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[(0,je.jsx)("h4",{style:{margin:0,color:"#AAAAAA"},children:e.day}),(0,je.jsxs)("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:[(0,je.jsx)("span",{className:"badge",style:{background:"".concat(o(e.type),"20"),color:o(e.type),fontSize:"0.7rem"},children:e.focus}),e.equipmentSpecific&&(0,je.jsx)("span",{className:"badge badge-warning",style:{fontSize:"0.7rem"},children:t.standUpBikeType})]})]}),(0,je.jsx)("h4",{style:{margin:"0 0 4px 0",fontSize:"1rem"},children:e.workout.name}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.85rem",color:"#666",lineHeight:1.4},children:e.workout.description})]},e.day))})]},e.week)})]}),(0,je.jsxs)("div",{className:"card",style:{marginBottom:"20px"},children:[(0,je.jsxs)("div",{className:"card-header",children:[(0,je.jsx)("h2",{style:{margin:0},children:"\ud83c\udfa8 Workout Variety Showcase"}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",color:"#666"},children:"No more boring, repetitive training!"})]}),(0,je.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,je.jsx)("h3",{style:{color:"#AAAAAA",marginBottom:"12px"},children:"Your Plan Includes:"}),(0,je.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:i.varietyShowcase.map((e,t)=>(0,je.jsx)("span",{className:"badge",style:{background:"#ebf8ff",color:"#00D4FF",padding:"6px 12px",fontSize:"0.8rem"},children:e},t))})]}),(0,je.jsx)("div",{className:"card",style:{background:"rgba(255, 184, 0, 0.1)",border:"1px solid rgba(255, 184, 0, 0.3)"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,je.jsx)("strong",{children:"\ud83d\udd25 Compare to Other Apps:"})," Most training apps repeat the same 5-10 workouts endlessly. Your RunEQ plan includes research-based workouts from McMillan Running, Hal Higdon, Ben Parkes, and Runner's World."]})})]}),(0,je.jsxs)("div",{className:"card",style:{marginBottom:"20px",background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"#c05621"},children:'\ud83d\udd04 "Something Else" Button'}),(0,je.jsxs)("p",{style:{marginBottom:"16px",color:"#744210"},children:[(0,je.jsx)("strong",{children:"Tired of rigid apps?"}),' Every workout has our signature "Something Else" button:']}),(0,je.jsxs)("div",{className:"card",style:{background:"rgba(255, 255, 255, 0.05)",padding:"16px",margin:"0 0 16px 0"},children:[(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[(0,je.jsx)("span",{style:{fontWeight:"600"},children:"Today: Tempo Run - 6 miles"}),(0,je.jsx)("button",{className:"btn btn-secondary",style:{fontSize:"0.8rem",padding:"8px 16px"},children:"Something Else"})]}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.8rem",color:"#666"},children:"Click to see alternatives based on weather, energy level, time, or just wanting variety!"})]}),(0,je.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#744210"},children:"Feeling Tired:"}),(0,je.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"0.8rem"},children:"Easy recovery options"})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#744210"},children:"Too Hot:"}),(0,je.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"0.8rem"},children:"Indoor or easier alternatives"})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#744210"},children:"Want Variety:"}),(0,je.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"0.8rem"},children:"Different workout types"})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#744210"},children:"Time Crunch:"}),(0,je.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"0.8rem"},children:"Shorter, efficient options"})]})]}),(0,je.jsx)("p",{style:{margin:"12px 0 0 0",fontSize:"0.8rem",fontStyle:"italic",color:"#744210"},children:"And unlike other apps, we COUNT IT PROPERLY in your weekly training load!"})]}),(0,je.jsxs)("div",{className:"card",style:{textAlign:"center",background:"rgba(0, 212, 255, 0.1)",color:"#AAAAAA",border:"1px solid rgba(0, 212, 255, 0.3)"},children:[(0,je.jsx)("h2",{style:{margin:"0 0 16px 0"},children:"Ready to Start Training Smarter?"}),(0,je.jsx)("p",{style:{margin:"0 0 24px 0",opacity:.9},children:"You've seen how RunEQ adapts to YOUR equipment, climate, and lifestyle. No more rigid, one-size-fits-all training!"}),(0,je.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px",maxWidth:"400px",margin:"0 auto"},children:[(0,je.jsx)("button",{className:"btn btn-success btn-full-width",onClick:()=>r("/dashboard"),style:{background:"rgba(255, 255, 255, 0.05)",color:"#AAAAAA",fontSize:"1.1rem"},children:"\ud83c\udfaf Start My Training Plan"}),(0,je.jsx)("p",{style:{fontSize:"0.9rem",margin:"8px 0 0 0",opacity:.8},children:"Free preview \u2022 Try all features \u2022 Subscribe when ready"})]})]})]})]})};const Oh=class{getSpeedOptions(e,t){return[{id:"classic-track",name:"\ud83c\udfc3\u200d\u2642\ufe0f Classic Track Session",shortName:"Track Intervals",description:"6x800m @ 5K pace (2min rest)",duration:"45-55 minutes",intensity:"Hard",structure:"2mi warmup + 6x800m @ 5K pace (2min rest) + 2mi cooldown",focus:"VO2 Max Development",location:"Track preferred",equipment:"None",difficulty:"High",timeRequired:"45-55 minutes",benefits:"Improves oxygen uptake, running economy, speed endurance"},{id:"hill-sprints",name:"\ud83c\udfd4\ufe0f Hill Sprint Power",shortName:"Hill Sprints",description:"8x30sec uphill @ max effort (jog down recovery)",duration:"35-45 minutes",intensity:"Very Hard",structure:"2mi warmup + 8x30sec uphill sprints (jog down) + 2mi cooldown",focus:"Neuromuscular Power",location:"Hills required",equipment:"None",difficulty:"Very High",timeRequired:"35-45 minutes",benefits:"Builds power, strength, running economy, mental toughness"},{id:"fartlek-fun",name:"\u26a1 Fartlek Freedom",shortName:"Fartlek",description:"20min fartlek: fast when you feel it, easy when you need it",duration:"40-50 minutes",intensity:"Variable",structure:"2mi easy + 20min fartlek (surge when you feel good, recover when you need) + 2mi easy",focus:"Speed Endurance",location:"Anywhere",equipment:"None",difficulty:"Moderate-High",timeRequired:"40-50 minutes",benefits:"Improves speed, teaches pacing, mentally engaging"},{id:"pyramid-power",name:"\ud83d\udd04 Pyramid Progression",shortName:"Pyramid",description:"400-800-1200-800-400m @ 5K pace (90sec rest)",duration:"50-60 minutes",intensity:"Hard",structure:"2mi warmup + 400-800-1200-800-400m @ 5K pace (90sec rest) + 2mi cooldown",focus:"Progressive Speed",location:"Track or measured route",equipment:"None",difficulty:"High",timeRequired:"50-60 minutes",benefits:"Progressive challenge, mental focus, speed development"}]}getTempoOptions(e,t){return[{id:"classic-tempo",name:"\ud83c\udfaf Classic Tempo Run",shortName:"Tempo Run",description:"4 miles @ comfortably hard pace",duration:"45-55 minutes",intensity:"Medium-Hard",structure:"2mi easy warmup + 4mi @ tempo pace + 1mi easy cooldown",focus:"Lactate Threshold",location:"Flat, measured route",equipment:"None",difficulty:"Moderate-High",timeRequired:"45-55 minutes",benefits:"Improves lactate clearance, race pace fitness"},{id:"cruise-intervals",name:"\ud83d\udd00 Cruise Intervals",shortName:"Cruise Intervals",description:"3x1 mile @ tempo pace (90sec rest)",duration:"45-50 minutes",intensity:"Medium-Hard",structure:"2mi warmup + 3x1mi @ tempo pace (90sec jog) + 2mi cooldown",focus:"Threshold Power",location:"Any measured route",equipment:"None",difficulty:"Moderate-High",timeRequired:"45-50 minutes",benefits:"Mental break during rest, maintains pace discipline"},{id:"progressive-build",name:"\ud83d\udcc8 Progressive Tempo Build",shortName:"Progressive",description:"5 miles: start easy, finish at tempo pace",duration:"50-55 minutes",intensity:"Progressive",structure:"1mi easy + 5mi progressive (easy to tempo) + 1mi easy cooldown",focus:"Progressive Effort",location:"Any route",equipment:"None",difficulty:"Moderate",timeRequired:"50-55 minutes",benefits:"Teaches effort progression, confidence building"},{id:"tempo-sandwich",name:"\ud83e\udd6a Tempo Sandwich",shortName:"Sandwich",description:"2mi easy + 3mi tempo + 2mi easy",duration:"50-60 minutes",intensity:"Medium-Hard",structure:"2mi easy + 3mi @ tempo pace + 2mi easy",focus:"Sustained Threshold",location:"Any route",equipment:"None",difficulty:"Moderate-High",timeRequired:"50-60 minutes",benefits:"Practices running fast when tired, mental toughness"}]}getLongRunOptions(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return[{id:"conversational-long",name:"\ud83c\udfc3\u200d\u2642\ufe0f Classic Conversational",shortName:"Easy Long Run",description:"".concat(n," miles @ easy, conversational pace"),duration:"".concat(Math.round(9*n),"-").concat(Math.round(10.5*n)," minutes"),intensity:"Easy",structure:"".concat(n," miles @ conversational pace throughout"),focus:"Aerobic Base",location:"Any route",equipment:"None",difficulty:"Low-Moderate",timeRequired:"".concat(Math.round(9*n),"-").concat(Math.round(10.5*n)," minutes"),benefits:"Builds aerobic capacity, fat burning, mental endurance"},{id:"negative-split-long",name:"\ud83d\udcc8 Negative Split Challenge",shortName:"Negative Split",description:"".concat(n," miles: second half faster than first"),duration:"".concat(Math.round(8.5*n),"-").concat(Math.round(10*n)," minutes"),intensity:"Easy-Moderate",structure:"".concat(n/2,"mi easy + ").concat(n/2,"mi moderate (30-45sec/mi faster)"),focus:"Pacing Discipline",location:"Measured route preferred",equipment:"None",difficulty:"Moderate",timeRequired:"".concat(Math.round(8.5*n),"-").concat(Math.round(10*n)," minutes"),benefits:"Teaches pacing control, finishes strong, race simulation"},{id:"long-with-pickups",name:"\u26a1 Long Run + Pickups",shortName:"Long + Pickups",description:"".concat(n-1," miles easy + 4x30sec pickups in final mile"),duration:"".concat(Math.round(9*n),"-").concat(Math.round(10*n)," minutes"),intensity:"Easy with surges",structure:"".concat(n-1,"mi easy + 4x30sec @ 5K pace (30sec recovery) + easy finish"),focus:"Neuromuscular Readiness",location:"Any route",equipment:"None",difficulty:"Moderate",timeRequired:"".concat(Math.round(9*n),"-").concat(Math.round(10*n)," minutes"),benefits:"Keeps legs sharp, practices running fast when tired"},{id:"progressive-long",name:"\ud83c\udfaf Marathon Pace Progression",shortName:"Progressive",description:"".concat(Math.round(.6*n),"mi easy + ").concat(Math.round(.4*n),"mi @ marathon pace"),duration:"".concat(Math.round(8.5*n),"-").concat(Math.round(9.5*n)," minutes"),intensity:"Easy-Moderate",structure:"".concat(Math.round(.6*n),"mi easy + ").concat(Math.round(.4*n),"mi @ marathon pace"),focus:"Race Pace Practice",location:"Flat, measured route",equipment:"None",difficulty:"Moderate-High",timeRequired:"".concat(Math.round(8.5*n),"-").concat(Math.round(9.5*n)," minutes"),benefits:"Practices goal race pace, builds confidence"}]}getHillOptions(e,t){return[{id:"classic-hills",name:"\ud83c\udfd4\ufe0f Classic Hill Repeats",shortName:"Hill Repeats",description:"6x90sec uphill @ hard effort (jog down recovery)",duration:"40-50 minutes",intensity:"Hard",structure:"2mi warmup + 6x90sec uphill @ 5K effort (jog down) + 2mi cooldown",focus:"Hill Strength",location:"Steady 4-6% grade hill",equipment:"None",difficulty:"High",timeRequired:"40-50 minutes",benefits:"Builds leg strength, power, running economy"},{id:"variable-hills",name:"\ud83c\udfa2 Variable Hill Circuit",shortName:"Variable Hills",description:"4x(30sec hard + 60sec moderate + 30sec hard) uphill",duration:"45-50 minutes",intensity:"Variable Hard",structure:"2mi warmup + 4x(30sec hard + 60sec moderate + 30sec hard) + jog down + 2mi cooldown",focus:"Power Endurance",location:"Long hill or multiple hills",equipment:"None",difficulty:"Very High",timeRequired:"45-50 minutes",benefits:"Varied stimulus, mental toughness, power development"},{id:"rolling-hills",name:"\ud83c\udf0a Rolling Hill Tempo",shortName:"Rolling Tempo",description:"25min tempo effort on rolling hills",duration:"45-55 minutes",intensity:"Medium-Hard",structure:"2mi easy + 25min @ tempo effort on rolling terrain + 2mi easy",focus:"Hill Endurance",location:"Rolling hills course",equipment:"None",difficulty:"Moderate-High",timeRequired:"45-55 minutes",benefits:"Teaches effort management on varied terrain"}]}getEasyOptions(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;return[{id:"classic-easy",name:"\ud83d\ude0c Classic Recovery Run",shortName:"Easy Run",description:"".concat(n," miles @ easy, conversational pace"),duration:"".concat(Math.round(9.5*n),"-").concat(Math.round(11*n)," minutes"),intensity:"Very Easy",structure:"".concat(n," miles @ recovery pace throughout"),focus:"Active Recovery",location:"Any route",equipment:"None",difficulty:"Low",timeRequired:"".concat(Math.round(9.5*n),"-").concat(Math.round(11*n)," minutes"),benefits:"Promotes recovery, maintains aerobic fitness"},{id:"easy-with-strides",name:"\u26a1 Easy + Strides",shortName:"Easy + Strides",description:"".concat(n," miles easy + 4x20sec strides"),duration:"".concat(Math.round(9.5*n),"-").concat(Math.round(10.5*n)," minutes"),intensity:"Easy with pickups",structure:"".concat(n-.5,"mi easy + 4x20sec strides (40sec recovery) + 0.5mi easy"),focus:"Neuromuscular Activation",location:"Any route with straight section",equipment:"None",difficulty:"Low-Moderate",timeRequired:"".concat(Math.round(9.5*n),"-").concat(Math.round(10.5*n)," minutes"),benefits:"Maintains speed while recovering, improves running form"}]}};class Lh{constructor(){this.equipmentSpecs={cyclete:{name:"Cyclete",motion:"Teardrop with acceleration through back stroke (patent pending)",description:"Dual crank system - short crank front (low knee impact) + long crank back (kick/push-off)",muscleLoading:"Quad-dominant (mimics running push-off mechanics)",runningSpecificity:"HIGH - closest to actual running gait pattern",strengths:["Easy run replacement","Running simulation","Maintaining leg turnover","Endurance training"],optimalDurations:"Extended sessions (60+ minutes)",resistanceType:"Variable terrain simulation",bestFor:["Replacing easy runs","Running-specific fitness","Quad maintenance"],avoidAfter:["Hill repeats","Quad-heavy speed work","Heavy leg strength days"],pairsWellWith:["Glute-focused strength days","Upper body days","After tempo runs"]},elliptigo:{name:"ElliptiGO",motion:"Elliptical (smooth, constant speed throughout stroke)",description:"Outdoor elliptical with up to 11-speed gearing, adjustable stride up to 26 inches",muscleLoading:"Glute + full-body (hip extension emphasis, engages core and upper body)",runningSpecificity:"MODERATE - different muscle pattern than running",strengths:["Full body workout","Active recovery","Interval training","Calorie burn (+33% vs bike)"],optimalDurations:"Varied (20-120 minutes)",resistanceType:"Gear-based resistance (11 speeds)",bestFor:["Active recovery","Cross-training variety","After quad-heavy days","Full-body conditioning"],avoidAfter:["Glute-heavy strength days","Deadlift days"],pairsWellWith:["After hill repeats","After speed work","Quad-heavy running days"]}},this.workoutLibrary={TEMPO_BIKE:[{name:"Sustained Threshold Effort",duration:"50-70 minutes",equipment:"both",description:"Continuous steady hard effort at lactate threshold",structure:"10 min easy warmup + 20-40 min @ threshold effort + 10 min easy cooldown",intensity:"tempo",benefits:"Lactate threshold development, sustained power, mental toughness",cycleteNotes:"Excellent for building race-pace endurance on natural motion",elliptigoNotes:"Use moderate-long stride, maintain steady resistance throughout",effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard, can speak in short sentences"},roadConsiderations:"Find a flat, uninterrupted stretch of bike path or quiet road for sustained effort"},{name:"Tempo Intervals",duration:"60-75 minutes",equipment:"both",description:"Repeated threshold efforts with short recovery",structure:"10 min warmup + 3-4 x 8 min @ threshold with 3 min easy recovery + 10 min cooldown",intensity:"tempo",benefits:"Threshold power, recovery management, pacing practice",cycleteNotes:"Perfect for building powerful sustained efforts",elliptigoNotes:"Maintain consistent stride pattern across intervals",effort:{heartRate:"Zone 3-4 during intervals (80-90% max HR)",perceived:"Hard but sustainable, recovery is truly easy"},roadConsiderations:"Out-and-back route or loop works well, recovery is active (keep moving)"},{name:"Progressive Tempo Build",duration:"55-70 minutes",equipment:"both",description:"Gradually building effort to threshold and beyond",structure:"15 min easy + 10 min moderate + 10 min threshold + 5 min hard + 15 min easy cooldown",intensity:"tempo",benefits:"Graduated effort adaptation, race simulation, finishing strength",cycleteNotes:"Natural motion allows smooth power progression",elliptigoNotes:"Increase resistance and/or cadence to build effort",effort:{heartRate:"Building from Zone 2 \u2192 Zone 4 \u2192 Zone 5",perceived:"Starting comfortable, finishing hard"},roadConsiderations:"Slight uphill finish helps with progressive build"},{name:"Cruise Intervals",duration:"60-80 minutes",equipment:"both",description:"Classic lactate threshold intervals with short recovery",structure:"15 min warmup + 5-6 x 5 min @ threshold with 2 min easy + 10 min cooldown",intensity:"tempo",benefits:"Threshold efficiency, power sustainability, mental resilience",cycleteNotes:"Maintain smooth natural rhythm throughout efforts",elliptigoNotes:"Focus on consistent resistance and stride pattern",effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard, short recovery keeps you honest"},roadConsiderations:"Timer-based intervals work anywhere, don't need specific landmarks"},{name:"Tempo Sandwich",duration:"60-75 minutes",equipment:"both",description:"Two threshold blocks separated by easy riding",structure:"10 min warmup + 15 min @ threshold + 10 min easy + 15 min @ threshold + 10 min cooldown",intensity:"tempo",benefits:"Threshold endurance, mid-ride recovery practice, race pacing",cycleteNotes:"Second effort teaches pacing discipline",elliptigoNotes:"Maintain form quality into second block",effort:{heartRate:"Zone 3-4 during blocks",perceived:"First block strong, second block requires focus"},roadConsiderations:"Out-and-back route ideal (turnaround during easy section)"},{name:"Fast Finish Tempo",duration:"50-65 minutes",equipment:"both",description:"Steady effort with strong closing surge",structure:"10 min warmup + 25 min @ steady moderate + 10 min @ threshold + 5 min hard + 10 min cooldown",intensity:"tempo",benefits:"Finishing strength, race simulation, mental toughness",cycleteNotes:"Teaches finishing power when fatigued",elliptigoNotes:"Final surge requires full body engagement",effort:{heartRate:"Building to Zone 4-5 at finish",perceived:"Start controlled, finish strong"},roadConsiderations:"Plan route so final hard section is on good road surface"},{name:"Threshold Pyramid",duration:"70-85 minutes",equipment:"both",description:"Ascending and descending threshold intervals",structure:"15 min warmup + 5-7-10-7-5 min @ threshold with 3 min easy recovery + 10 min cooldown",intensity:"tempo",benefits:"Variable effort management, mental engagement, threshold development",cycleteNotes:"Varied interval lengths prevent mental monotony",elliptigoNotes:"Practice pacing across different interval durations",effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Maintain same effort despite changing durations"},roadConsiderations:"Timer-based, works on any reasonable road"},{name:"Cutdown Tempo",duration:"55-70 minutes",equipment:"both",description:"Progressively faster tempo intervals",structure:"10 min warmup + 10 min @ moderate + 8 min @ threshold + 6 min @ hard + 4 min @ very hard with 3 min recovery between + 10 min cooldown",intensity:"tempo",benefits:"Pace judgment, variable effort training, finishing power",cycleteNotes:"Progressive resistance or cadence increase",elliptigoNotes:"Combine resistance and stride adjustments",effort:{heartRate:"Building from Zone 3 \u2192 Zone 5",perceived:"Each interval harder than previous"},roadConsiderations:"Descending intervals keep mental engagement high"},{name:"Steady State Tempo",duration:"60-80 minutes",equipment:"both",description:"Extended time at threshold for endurance adaptation",structure:"15 min warmup + 30-40 min @ steady threshold + 15 min cooldown",intensity:"tempo",benefits:"Threshold endurance, mental training, race-specific work",cycleteNotes:"Long sustained natural motion builds race fitness",elliptigoNotes:"Maintain consistent form over extended effort",effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard for extended duration"},roadConsiderations:"Need long uninterrupted stretch, bike path or quiet country road ideal"},{name:"Tempo with Surges",duration:"55-70 minutes",equipment:"both",description:"Threshold effort with periodic hard surges",structure:"10 min warmup + 20 min @ threshold with 6 x 30 sec surges every 3 min + 10 min cooldown",intensity:"tempo",benefits:"Race simulation, surge recovery, variable pace training",cycleteNotes:"Surges mimic race attacks or traffic situations",elliptigoNotes:"Quick resistance/cadence changes develop responsiveness",effort:{heartRate:"Zone 3-4 baseline, Zone 5 during surges",perceived:"Hard base with brief very hard surges"},roadConsiderations:"Surges work well at intersections or road features"}],INTERVAL_BIKE:[{name:"Short Power Repeats",duration:"50-65 minutes",equipment:"both",description:"High-intensity short intervals for power development",structure:"15 min warmup + 10-12 x 2 min hard with 2 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"VO2max development, neuromuscular power, aerobic capacity",cycleteNotes:"Explosive power in natural motion pattern",elliptigoNotes:"Quick stride and resistance changes",effort:{heartRate:"Zone 4-5 during intervals (90-100% max HR)",perceived:"Hard effort, breathing heavy, full recovery needed"},roadConsiderations:"Timer-based, any safe road works, recovery is active (keep moving)"},{name:"Classic 5-Minute Repeats",duration:"65-80 minutes",equipment:"both",description:"VO2max intervals at hard sustainable effort",structure:"15 min warmup + 4-6 x 5 min @ VO2max with 3-4 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"Aerobic power, VO2max improvement, sustained speed work",cycleteNotes:"5 minutes allows rhythm development at high power",elliptigoNotes:"Find sustainable high resistance for full duration",effort:{heartRate:"Zone 5 (95-100% max HR)",perceived:"Very hard but sustainable for 5 minutes"},roadConsiderations:"Flat section preferred to maintain consistent power output"},{name:"Ladder Intervals",duration:"70-90 minutes",equipment:"both",description:"Variable duration intervals ascending and descending",structure:"15 min warmup + 2-3-4-5-4-3-2 min hard with equal recovery + 10 min cooldown",intensity:"intervals",benefits:"Variable effort training, mental engagement, comprehensive stimulus",cycleteNotes:"Varied durations prevent monotony",elliptigoNotes:"Adjust pacing for different interval lengths",effort:{heartRate:"Zone 4-5 during intervals",perceived:"Hard throughout, adjust effort for interval duration"},roadConsiderations:"Timer-based pyramid keeps mental focus high"},{name:"Tabata-Style Power Blasts",duration:"40-55 minutes",equipment:"both",description:"Ultra-short maximal efforts for neuromuscular power",structure:"15 min warmup + 2-3 sets of 8 x 20 sec maximal with 10 sec easy (4 min recovery between sets) + 10 min cooldown",intensity:"intervals",benefits:"Explosive power, anaerobic capacity, neuromuscular recruitment",cycleteNotes:"Explosive natural motion develops race finishing speed",elliptigoNotes:"Maximum resistance and cadence for 20 seconds",effort:{heartRate:"Zone 5+ (maximal)",perceived:"All-out effort, 10 seconds barely enough recovery"},roadConsiderations:"Need very safe road/path, minimal traffic, good surface"},{name:"Long Intervals",duration:"75-95 minutes",equipment:"both",description:"Extended hard efforts for sustained power",structure:"15 min warmup + 4-5 x 8 min hard with 4 min recovery + 15 min cooldown",intensity:"intervals",benefits:"Sustained VO2max work, mental toughness, race-specific power",cycleteNotes:"Long intervals build race-day sustained power",elliptigoNotes:"Form maintenance critical over 8-minute efforts",effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard, requires pacing discipline"},roadConsiderations:"8 minutes is long enough to use out-and-back landmarks"},{name:"Pyramid Power",duration:"60-75 minutes",equipment:"both",description:"Ascending and descending power intervals",structure:"15 min warmup + 1-2-3-4-3-2-1 min hard with 1 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"Variable power training, mental focus, comprehensive development",cycleteNotes:"Varied efforts keep engagement high",elliptigoNotes:"Manage effort across different durations",effort:{heartRate:"Zone 4-5",perceived:"Hard throughout, short recoveries"},roadConsiderations:"Timer-based, works anywhere safe"},{name:"Over-Under Intervals",duration:"60-75 minutes",equipment:"both",description:"Alternating just below and just above threshold",structure:"15 min warmup + 4 x 8 min (alternating 2 min @ threshold, 1 min @ VO2max) with 4 min recovery + 10 min cooldown",intensity:"intervals",benefits:"Lactate tolerance, recovery under duress, race simulation",cycleteNotes:"Teaches power management and recovery while working",elliptigoNotes:"Quick resistance changes between under/over efforts",effort:{heartRate:"Zone 3-4 during under, Zone 5 during over",perceived:"Alternating hard and very hard within same interval"},roadConsiderations:"No true recovery during 8-min blocks, need good road surface"},{name:"Fartlek Intervals",duration:"50-70 minutes",equipment:"both",description:"Unstructured speed play using landmarks and feel",structure:"15 min warmup + 20-30 min continuous riding with surges of varying duration (30 sec to 5 min) + 10 min cooldown",intensity:"intervals",benefits:"Variable pace training, mental freedom, responsive power",cycleteNotes:"Natural motion allows spontaneous surges",elliptigoNotes:"Use road features as surge cues",effort:{heartRate:"Variable Zone 2-5",perceived:"Playful hard efforts based on feel"},roadConsiderations:"Use mailboxes, signs, hills, etc. as surge markers"},{name:"30-30 Repeats",duration:"50-65 minutes",equipment:"both",description:"Equal hard and recovery for sustained intensity",structure:"15 min warmup + 3-4 sets of 10 x 30 sec hard / 30 sec easy (5 min recovery between sets) + 10 min cooldown",intensity:"intervals",benefits:"VO2max development, anaerobic capacity, efficient recovery",cycleteNotes:"Short recoveries develop resilience",elliptigoNotes:"Quick rhythm changes improve responsiveness",effort:{heartRate:"Zone 5 during hard sections",perceived:"Hard but repeatable, 30 sec recovery is enough"},roadConsiderations:"Timer-based, any safe stretch works"},{name:"Descending Intervals",duration:"65-80 minutes",equipment:"both",description:"Progressively shorter intervals at increasing intensity",structure:"15 min warmup + 5-4-3-2-1 min with effort increasing each interval (3 min recovery) x 2 sets + 10 min cooldown",intensity:"intervals",benefits:"Progressive intensity training, mental toughness, finishing power",cycleteNotes:"Teaches finishing speed when fatigued",elliptigoNotes:"Max power on final 1-minute effort",effort:{heartRate:"Building from Zone 4 \u2192 Zone 5+",perceived:"Each interval harder than previous"},roadConsiderations:"Final 1-minute effort is near-maximal"},{name:"400m Repeats",duration:"60-80 minutes",equipment:"both",description:"Short, fast intervals for speed and lactic tolerance",structure:"15 min warmup + 20 x 400m at target HR with 0:45-1:30 recovery + 10 min cooldown",intensity:"intervals",benefits:"Speed endurance, lactic tolerance, VO2max development",cycleteNotes:"Quick turnover mimics running stride frequency",elliptigoNotes:"Maintain high cadence and moderate resistance",effort:{heartRate:"Zone 4-5 (87-92% max HR)",perceived:"Hard but repeatable, recovery should feel brief"},roadConsiderations:"Can be done on track outer lanes or measured road segments"},{name:"800m Repeats",duration:"60-85 minutes",equipment:"both",description:"Classic VO2max intervals at sustained hard effort",structure:"15 min warmup + 10 x 800m at target HR with 1:00-2:00 recovery + 10 min cooldown",intensity:"intervals",benefits:"VO2max development, sustained speed, aerobic power",cycleteNotes:"Longer intervals allow rhythm and power development",elliptigoNotes:"Balance resistance and cadence for sustainable effort",effort:{heartRate:"Zone 4-5 (87-92% max HR)",perceived:"Hard sustainable effort, need full recovery between"},roadConsiderations:"Track outer lanes or 2-3 minute road segments work well"}],POWER_RESISTANCE:[{name:"Hill Power Repeats",duration:"55-70 minutes",equipment:"both",description:"Short explosive hill repeats for power development",structure:"15 min warmup + 8-10 x 2 min hard uphill with easy coast down + 10 min cooldown",intensity:"power",benefits:"Power development, muscular strength, explosive capacity",cycleteNotes:"Powerful natural motion up sustained grades",elliptigoNotes:"High resistance, explosive stride pattern",effort:{heartRate:"Zone 4-5 (90-100% max HR)",perceived:"Very hard uphill effort, easy coast down recovery"},roadConsiderations:"Need actual hill or sustained grade - 4-6% grade ideal, safe descent"},{name:"Resistance Strength Intervals",duration:"60-75 minutes",equipment:"both",description:"High resistance intervals on flat terrain",structure:"15 min warmup + 6-8 x 3 min @ high resistance with 3 min easy + 10 min cooldown",intensity:"power",benefits:"Muscular strength, grinding power, force production",cycleteNotes:"High resistance develops grinding strength",elliptigoNotes:"Maximum resistance, controlled cadence",effort:{heartRate:"Zone 4 (muscular not cardiovascular limiter)",perceived:"Legs burning, powerful effort"},roadConsiderations:"Works on flat roads - resistance creates difficulty"},{name:"Long Strength Climbs",duration:"70-90 minutes",equipment:"both",description:"Extended hill climbs for sustained power",structure:"15 min warmup + 4-6 x 5 min sustained climb with full recovery down + 10 min cooldown",intensity:"power",benefits:"Sustained climbing power, mental toughness, muscular endurance",cycleteNotes:"Extended natural motion on grades",elliptigoNotes:"Maintain form quality through long climbs",effort:{heartRate:"Zone 4 (80-90% max HR)",perceived:"Hard sustained uphill effort"},roadConsiderations:"Need sustained grade of 3-5%, safe descent for recovery"},{name:"Resistance Pyramid",duration:"65-80 minutes",equipment:"both",description:"Variable duration high-resistance intervals",structure:"15 min warmup + 2-3-4-5-4-3-2 min @ high resistance with 2 min easy + 10 min cooldown",intensity:"power",benefits:"Variable strength training, muscular endurance, mental engagement",cycleteNotes:"Varied durations with high resistance",elliptigoNotes:"Maximum resistance, controlled cadence throughout",effort:{heartRate:"Zone 3-4 (muscular effort)",perceived:"Powerful grinding effort"},roadConsiderations:"Resistance-based, works on any safe road"},{name:"Mixed Terrain Circuit",duration:"60-80 minutes",equipment:"both",description:"Repeated circuit with varied terrain challenges",structure:"15 min warmup + 4-5 laps of circuit with hills, flats, descents + 10 min cooldown",intensity:"power",benefits:"Variable terrain adaptation, comprehensive power development",cycleteNotes:"Natural motion adapts to terrain changes",elliptigoNotes:"Resistance and stride adjustments for terrain",effort:{heartRate:"Variable Zones 3-5",perceived:"Hard on climbs, recovery on descents"},roadConsiderations:"Find 2-3 mile circuit with varied terrain, good for repeats"},{name:"Hill Blasts",duration:"50-65 minutes",equipment:"both",description:"Short explosive hill repeats for power",structure:"15 min warmup + 12-15 x 1 min maximal uphill with easy recovery down + 10 min cooldown",intensity:"power",benefits:"Explosive power, anaerobic capacity, neuromuscular training",cycleteNotes:"Maximum power in natural motion",elliptigoNotes:"Explosive stride, maximum resistance",effort:{heartRate:"Zone 5 (95-100% max HR)",perceived:"Near-maximal effort, full recovery needed"},roadConsiderations:"Short steep hill ideal (6-8% grade), safe descent"},{name:"Tempo Climb",duration:"65-85 minutes",equipment:"both",description:"Sustained threshold effort on extended climb",structure:"15 min warmup + 2-3 x 15 min sustained climb @ threshold with recovery descent + 10 min cooldown",intensity:"power",benefits:"Climbing endurance, sustained power, race-specific strength",cycleteNotes:"Extended climbing in natural motion",elliptigoNotes:"Maintain consistent rhythm on long climbs",effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Hard sustained climbing effort"},roadConsiderations:"Need long gradual climb (3-5% grade for 15 minutes)"},{name:"Resistance Fartlek",duration:"55-70 minutes",equipment:"both",description:"Playful variable resistance efforts",structure:"15 min warmup + 25-35 min continuous with surges at varying resistance levels + 10 min cooldown",intensity:"power",benefits:"Variable power training, responsive strength, mental engagement",cycleteNotes:"Quick resistance changes develop versatility",elliptigoNotes:"Play with resistance and stride combinations",effort:{heartRate:"Variable Zones 2-5",perceived:"Playful hard efforts with varying resistance"},roadConsiderations:"Use terrain features to vary resistance naturally"},{name:"Hill Sprint Repeats",duration:"50-65 minutes",equipment:"both",description:"Short explosive sprints up moderate hill for power and lactic tolerance",structure:"15 min warmup + 8-12 x 0:30 sprint up 4-6% grade with 1:30 coast down recovery + 10 min cooldown",intensity:"power",benefits:"Explosive power, motor recruitment, lactic acid tolerance, posterior chain strength",cycleteNotes:"Maximum power output in natural running motion up hill",elliptigoNotes:"High resistance, explosive stride, full body engagement",effort:{heartRate:"Zone 5+ (100% max HR)",perceived:"Maximum effort, fighting lactic acid by end of session"},roadConsiderations:"Need consistent 4-6% grade hill with safe descent for recovery"},{name:"Power Sprint Buildups",duration:"55-70 minutes",equipment:"both",description:"High-end lactate workout with buildup into maximum sprint",structure:"15 min warmup + 3-5 x (200m buildup into 400m max sprint) with full recovery + 10 min cooldown",intensity:"power",benefits:"Maximum power development, lactic tolerance, sprint speed",cycleteNotes:"Progressive acceleration into all-out sprint effort",elliptigoNotes:"Build through gears, max resistance and cadence on sprint",effort:{heartRate:"Zone 5+ on sprint (100% max HR)",perceived:"Maximum sprint effort, stop when 400m time drops 3+ seconds"},roadConsiderations:"Need flat safe stretch, full recovery between efforts (3-5 min)"},{name:"Steady State Hill Climb",duration:"60-90 minutes",equipment:"both",description:"Continuous climb for sustained threshold and mental toughness",structure:"10 min easy warmup on flat + 60-90 min continuous climb @ steady effort (no coasting)",intensity:"power",benefits:"Aerobic threshold development, muscular endurance, mental toughness, climbing strength",cycleteNotes:"Extended natural motion climb builds race-specific fitness",elliptigoNotes:"Focus on high turnover in lower gears (3-5), maintain rhythm",effort:{heartRate:"Zone 3-4 (80-90% max HR sustained)",perceived:"Steady hard effort, forced to stay engaged throughout"},roadConsiderations:"Need long consistent 5-10% grade climb - canyon roads or mountain climbs ideal"}],LONG_ENDURANCE_RIDES:[{name:"Progressive Long Ride",duration:"90-180 minutes",equipment:"both",description:"Start easy, gradually build to moderate-hard finish",structure:"First 70% @ easy conversational pace, final 30% @ moderate-hard effort",intensity:"long",benefits:"Progressive endurance, finishing strength, aerobic development",cycleteNotes:"Natural motion allows smooth effort progression",elliptigoNotes:"Gradually increase resistance through ride",effort:{heartRate:"Starting Zone 2, finishing Zone 3-4",perceived:"Starting easy, finishing strong"},roadConsiderations:"Plan route with good roads for harder finish"},{name:"Steady State Long Ride",duration:"90-180 minutes",equipment:"both",description:"Maintain consistent aerobic pace throughout",structure:"After warmup, maintain steady moderate effort for full duration",intensity:"long",benefits:"Aerobic endurance, consistent pacing, mental discipline",cycleteNotes:"Excellent for building aerobic base",elliptigoNotes:"Find sustainable rhythm and maintain it",effort:{heartRate:"Zone 2-3 (70-80% max HR)",perceived:"Steady, sustainable, conversational"},roadConsiderations:"Longer rides need route planning, hydration, nutrition"},{name:"Fast Finish Long Ride",duration:"90-150 minutes",equipment:"both",description:"Easy-moderate ride with strong final portion",structure:"First 80% @ easy-moderate, final 20% @ threshold effort",intensity:"long",benefits:"Finishing strength when fatigued, race simulation, mental toughness",cycleteNotes:"Teaches racing speed when tired",elliptigoNotes:"Strong finish requires full body engagement",effort:{heartRate:"Zone 2-3, finishing Zone 4",perceived:"Comfortable becoming hard at finish"},roadConsiderations:"Plan route so final hard section is on good road"},{name:"Negative Split Long Ride",duration:"90-150 minutes",equipment:"both",description:"Second half faster than first half",structure:"Ride out easy-moderate, return moderate-hard (same route out/back)",intensity:"long",benefits:"Pacing discipline, progressive endurance, race strategy practice",cycleteNotes:"Natural motion allows controlled pace progression",elliptigoNotes:"Monitor effort - start conservative",effort:{heartRate:"Zone 2-3 out, Zone 3-4 back",perceived:"Starting controlled, finishing strong"},roadConsiderations:"Out-and-back route ideal for comparison"},{name:"Variable Terrain Long Ride",duration:"100-180 minutes",equipment:"both",description:"Extended ride over varied terrain",structure:"Mix of flats, rollers, climbs at moderate overall effort",intensity:"long",benefits:"Terrain adaptation, comprehensive fitness, real-world preparation",cycleteNotes:"Natural motion handles terrain changes well",elliptigoNotes:"Adjust resistance and stride for terrain",effort:{heartRate:"Variable Zone 2-4 depending on terrain",perceived:"Moderate overall with terrain-driven variations"},roadConsiderations:"Choose hilly or rolling route for natural variation"},{name:"Out-and-Back Endurance",duration:"90-180 minutes",equipment:"both",description:"Simple out-and-back at steady aerobic pace",structure:"Ride to turnaround point, return at same effort level",intensity:"long",benefits:"Aerobic base, simple execution, mental simplicity",cycleteNotes:"Straightforward endurance building",elliptigoNotes:"Maintain consistent effort regardless of wind",effort:{heartRate:"Zone 2-3 (70-80% max HR)",perceived:"Steady, sustainable throughout"},roadConsiderations:"Single good road with turnaround point, watch for wind direction"},{name:"Long Ride with Tempo Finish",duration:"100-180 minutes",equipment:"both",description:"Aerobic ride with sustained threshold finish",structure:"Long easy-moderate ride + final 20-30 min @ threshold effort",intensity:"long",benefits:"Race-specific endurance, finishing power, mental toughness",cycleteNotes:"Builds race-day finishing strength",elliptigoNotes:"Strong finish after long aerobic work",effort:{heartRate:"Zone 2-3, finishing Zone 4",perceived:"Comfortable becoming hard"},roadConsiderations:"Plan route for good finish roads"},{name:"Exploration Ride",duration:"90-180 minutes",equipment:"both",description:"Easy-moderate exploration of new routes",structure:"Relaxed pace, enjoy scenery, build time on equipment",intensity:"long",benefits:"Aerobic base, mental freshness, route discovery",cycleteNotes:"Great way to find new training routes",elliptigoNotes:"Enjoy the ride quality and scenery",effort:{heartRate:"Zone 1-2 (60-75% max HR)",perceived:"Easy, conversational, enjoyable"},roadConsiderations:"Explore new roads/paths, have phone/GPS for navigation"}],AEROBIC_BASE:[{name:"Conversational Pace Cruise",duration:"45-120 minutes",equipment:"both",description:"Long steady effort at conversational intensity",structure:"Maintain steady effort throughout, should be able to hold conversation",intensity:"easy",benefits:"Aerobic base building, fat adaptation, endurance",cycleteNotes:"Excellent for long distance preparation, very running-like feel",elliptigoNotes:"Use moderate stride length, focus on smooth rhythm",effort:{heartRate:"Zone 1-2 (65-75% max HR)",perceived:"Easy, conversational effort"}},{name:"Recovery Ride",duration:"30-60 minutes",equipment:"both",description:"Very easy effort for active recovery",structure:"Easy riding, minimal resistance, focus on movement quality",intensity:"recovery",benefits:"Active recovery, blood flow, movement practice",cycleteNotes:"Perfect for recovery days, gentle fluid motion",elliptigoNotes:"Ideal for joint mobility and muscle activation",effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Very easy, relaxed effort"}}],TECHNIQUE_SPECIFIC:[{name:"Movement Development",duration:"35-50 minutes",equipment:"both",description:"Focus on optimal movement pattern and efficiency",structure:"15 min warmup + 4-6 x 5 min varied effort focus + 10 min cooldown",intensity:"easy to moderate",benefits:"Movement efficiency, technique improvement, neuromuscular training",cycleteNotes:"Perfect natural motion at all efforts",elliptigoNotes:"Practice stride length adjustments with effort changes",effort:{heartRate:"Zone 1-3 varied (65-85% max HR)",perceived:"Easy to moderate varied efforts"}},{name:"Form Focus Session",duration:"40-60 minutes",equipment:"both",description:"Technical session emphasizing movement quality",structure:"Extended warmup + form drills + easy-moderate effort with technique focus",intensity:"easy to moderate",benefits:"Movement quality, efficiency, injury prevention",cycleteNotes:"Focus on smooth natural pattern, avoid bouncing",elliptigoNotes:"Emphasize full stride extension and smooth upper body motion",techniques:{cyclete:["Smooth natural motion","Avoid upper body tension","Focus on forward drive"],elliptigo:["Full stride extension","Coordinated arm swing","Stable core engagement"]}}],RECOVERY_SPECIFIC:[{name:"Active Recovery Flow",duration:"30-45 minutes",equipment:"both",description:"Gentle movement for recovery days",structure:"Very easy effort throughout, focus on movement quality",intensity:"recovery",benefits:"Blood flow, active recovery, movement maintenance",cycleteNotes:"Gentle natural motion perfect for recovery",elliptigoNotes:"Low-impact full body movement aids recovery",effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Very easy, relaxed recovery effort"}},{name:"Injury Prevention Session",duration:"25-40 minutes",equipment:"both",description:"Low-intensity session for injury-prone periods",structure:"Extended warmup + very easy effort + extended cooldown",intensity:"recovery",benefits:"Maintains fitness while allowing healing, joint mobility",cycleteNotes:"Zero-impact alternative when running not possible",elliptigoNotes:"Gentle full-body movement without ground impact"}]}}prescribeStandUpBikeWorkout(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{duration:r=null,experience:i="intermediate",targetDistance:o=null,hasGarmin:a=!0}=n;let s=null,l=null;for(const[u,f]of Object.entries(this.workoutLibrary)){const n=f.find(n=>(n.name.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(n.name.toLowerCase()))&&(n.equipment===t||"both"===n.equipment));if(n){s=n,l=u;break}}if(!s)throw new Error('Workout "'.concat(e,'" not found for ').concat(t));const c=this.equipmentSpecs[t];let d=s.name,h=s.description,p=null;if(o)if(p=o,a)d="".concat(p," RunEQ Miles - ").concat(s.name),h="Ride until your Garmin shows ".concat(p," RunEQ miles - ").concat(s.description);else{const e=Math.round(3*p),t=Math.round(9*p);d="".concat(t," min / ~").concat(e," mi - ").concat(s.name),h="Ride for approximately ".concat(t," minutes or ").concat(e," miles - ").concat(s.description)}const m=s.structure?We(s.structure,null,null):s.structure;return(0,u.A)((0,u.A)({},s),{},{name:d,description:h,structure:m,category:l,equipmentSpec:c,prescribedRunEqMiles:p,garminNote:"Ride until your Garmin RunEQ data field shows the prescribed RunEQ miles. Your actual bike distance will vary based on your riding intensity.",equipmentSpecificNotes:this.getEquipmentNotes(s,t),safetyGuidance:this.getSafetyGuidance(t,s),alternatives:this.getAlternatives(t,s),progressions:this.getProgressions(s,i)})}getGarminDataFieldNote(){return{title:"RunEQ Garmin Data Field",description:"Install the companion Garmin data field to see your RunEQ miles in real-time while riding",how_it_works:"The data field automatically converts your riding distance to running equivalency based on YOUR riding intensity",why_it_matters:"Everyone rides differently - prescribing actual bike miles would be inaccurate. RunEQ miles ensure equivalent training stimulus regardless of how hard you ride.",example:"If prescribed 5 RunEQ miles: A harder rider might complete it in 12 actual bike miles. An easier rider might need 14 actual bike miles. Both get the same training effect."}}getEquipmentNotes(e,t){var n,r;return"cyclete"===t?{motion:"Focus on smooth natural motion pattern",strengths:e.cycleteNotes||"Excellent running simulation",effort:(null===(n=e.effort)||void 0===n?void 0:n.heartRate)||"Monitor by heart rate or perceived effort"}:{motion:"Utilize full stride length and upper body engagement",strengths:e.elliptigoNotes||"Full-body workout with adjustable stride",effort:(null===(r=e.effort)||void 0===r?void 0:r.heartRate)||"Monitor by heart rate or perceived effort"}}getSafetyGuidance(e,t){const n=["Start with proper warmup to prepare for stand-up motion","Focus on smooth, controlled movement throughout","Stay hydrated, especially during longer sessions"];return"cyclete"===e?n.push("Maintain natural natural motion, avoid forcing the pattern","Keep upper body relaxed to allow efficient power transfer"):n.push("Adjust stride length appropriately for intensity level","Coordinate upper and lower body movement smoothly","Use handles for balance, not to pull yourself forward"),"interval"!==t.intensity&&"tempo"!==t.intensity||n.push("Monitor effort level - equipment amplifies intensity compared to running"),n}getAlternatives(e,t){return{weatherOptions:{indoor:"elliptigo"===e?"elliptiGO can be used on indoor trainer":"cyclete is outdoor-specific",outdoor:"Both excellent for outdoor training in various conditions"},intensityAdjustments:{tooHard:"Reduce resistance or effort level, maintain smooth motion",tooEasy:"Increase resistance or effort level, extend duration",injury:"Both are excellent low-impact alternatives to running"},durationMods:{timeConstraint:"Focus on quality intervals, maintain warmup/cooldown",extended:"Both platforms excel at longer endurance sessions"}}}getProgressions(e,t){const n={beginner:"Start conservative, focus on movement quality over intensity",intermediate:"Standard prescription as written",advanced:"Can extend duration or add complexity to intervals"};return"interval"===e.intensity&&(n.weeklyProgression="Week 1: Shorter intervals, Week 2-3: Build, Week 4: Recovery"),n[t]}getWorkoutsForEquipment(e){const t=[];for(const[n,r]of Object.entries(this.workoutLibrary))for(const i of r)i.equipment!==e&&"both"!==i.equipment||t.push((0,u.A)((0,u.A)({},i),{},{category:n}));return t}getCategories(){return Object.keys(this.workoutLibrary)}searchWorkouts(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[],r=e.toLowerCase();for(const[i,o]of Object.entries(this.workoutLibrary))for(const e of o)t&&e.equipment!==t&&"both"!==e.equipment||(e.name.toLowerCase().includes(r)||e.description.toLowerCase().includes(r)||e.benefits.toLowerCase().includes(r))&&n.push((0,u.A)((0,u.A)({},e),{},{category:i}));return n}getWorkoutByDuration(e,t){const n={EASY:"AEROBIC_BASE",TEMPO:"TEMPO_BIKE",INTERVALS:"INTERVAL_BIKE",LONG:"LONG_ENDURANCE_RIDES",HILLS:"POWER_RESISTANCE",RECOVERY:"RECOVERY_SPECIFIC"}[e]||"AEROBIC_BASE",r=this.workoutLibrary[n];if(!r||0===r.length)return null;const i=t/6;let o=r[0],a=Math.abs(this.parseDistance(r[0].distance)-i);for(const s of r){const e=this.parseDistance(s.distance),t=Math.abs(e-i);t<a&&(a=t,o=s)}return o}parseDistance(e){if(!e)return 5;const t=e.match(/(\d+)(?:-(\d+))?\s*miles?/i);if(t){const e=parseInt(t[1]);return(e+(t[2]?parseInt(t[2]):e))/2}return 5}}class Wh{constructor(){this.equipmentSpecs={required:["Deep water pool","Flotation belt"],optional:["Waterproof timer/watch","Visor (outdoor pools)"],description:"Deep end pool running with flotation belt - zero impact, running-specific motion",benefits:["Maintains cardiovascular fitness during injury","Strengthens backup muscles","Smooths running gait through resistance","Zero impact on joints","Can replicate any running workout"]},this.beginnerProgression={session1:{name:"Introduction to Aqua Running",description:"First aqua running session - learn technique and build adaptation",structure:"2 sets x (3-5 min easy aqua running + 10 min rest/practice technique)",totalTime:"20-25 minutes",notes:"Focus on upright posture, smooth leg motion identical to land running. Take breaks as needed."},session2:{name:"Building Duration",description:"Second session (3-4 days after first)",structure:"2 sets x (7-9 min easy aqua running + 5 min rest)",totalTime:"25-30 minutes",notes:"Increase continuous time, maintain good form throughout"},session3:{name:"Extended Efforts",description:"Third session - approaching normal workout duration",structure:"2 sets x (12-15 min easy aqua running + 3 min rest)",totalTime:"30-35 minutes",notes:"Nearly ready for full continuous sessions"},session4:{name:"Full Duration",description:"Ready for continuous sessions matching land running time",structure:"Single continuous session matching prescribed workout duration",notes:"You're now adapted! Can match any land running workout duration in the pool"}},this.workoutLibrary={EASY:[{name:"Easy Recovery Run",duration:"30-45 minutes",description:"Gentle aerobic effort for recovery and base building",structure:"30-45 min continuous easy aqua running",intensity:"easy",benefits:"Active recovery, maintains aerobic base, zero impact healing",technique:"Smooth, relaxed leg motion. Upright posture. Arms move naturally like land running.",effort:{heartRate:"Zone 1-2 (60-75% max HR)",perceived:"Conversational pace, could maintain for hours",legTurnover:"Moderate, natural rhythm"},coachingTips:"Focus on smooth, efficient motion. The water resistance will automatically improve your running form."},{name:"Moderate Easy Run",duration:"45-60 minutes",description:"Sustained easy aerobic work",structure:"45-60 min continuous easy aqua running",intensity:"easy",benefits:"Aerobic development, endurance maintenance, mental refreshment",technique:"Maintain upright position, feet directly underneath hips. Consistent smooth rhythm.",effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Comfortable, steady effort",legTurnover:"Natural running cadence in water"},coachingTips:"Time passes quickly in the pool. Focus on maintaining good form rather than pushing effort."},{name:"Extended Easy Run",duration:"60-75 minutes",description:"Long easy aerobic session",structure:"60-75 min continuous easy aqua running",intensity:"easy",benefits:"Extended aerobic stimulus, mental toughness, significant calorie burn",technique:"Stay relaxed. Break into mental chunks (15min segments) if needed.",effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Steady, sustainable effort",legTurnover:"Consistent throughout"},coachingTips:"Longer than an hour in the pool builds serious mental fortitude. Stay patient and focused."}],TEMPO:[{name:"Sustained Tempo Effort",duration:"50-65 minutes",description:"Continuous tempo effort at lactate threshold",structure:"10 min easy warmup + 30-40 min @ tempo effort + 10 min easy cooldown",intensity:"tempo",benefits:"Lactate threshold development, sustained effort tolerance, race-specific fitness",technique:"Increase leg turnover noticeably. You should feel your heart rate climb. Maintain smooth form even when breathing harder.",effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard - you'll 'huff and puff' but can speak short sentences",legTurnover:"Noticeably faster than easy pace, crisp leg motion"},coachingTips:"The tempo portion should feel challenging but sustainable. If you can't maintain effort, you started too hard."},{name:"Tempo Intervals",duration:"55-70 minutes",description:"Repeated tempo efforts with active recovery",structure:"10 min easy warmup + 3-4 x 8 min @ tempo with 3 min easy recovery + 10 min cooldown",intensity:"tempo",benefits:"Threshold power development, recovery management, pacing practice",technique:"During intervals: crisp leg turnover, strong core engagement. During recovery: truly easy, let HR drop.",effort:{heartRate:"Zone 3-4 during efforts (80-90% max HR), Zone 1-2 during recovery",perceived:"Hard but repeatable, recovery feels genuinely easy",legTurnover:"Fast during efforts, relaxed during recovery"},coachingTips:"The recovery jogs are crucial. Don't skip them - they teach your body to process lactate."},{name:"Progressive Tempo Build",duration:"50-65 minutes",description:"Gradually increasing effort to simulate race finish",structure:"10 min easy + 10 min moderate + 15 min tempo + 5 min hard + 10 min easy cooldown",intensity:"tempo",benefits:"Graduated effort adaptation, race simulation, finishing strength",technique:"Smoothly increase leg speed and core tension. Final 5min should feel legitimately hard.",effort:{heartRate:"Building from Zone 2 \u2192 Zone 3 \u2192 Zone 4 \u2192 Zone 5",perceived:"Starting comfortable, finishing hard like final mile of race",legTurnover:"Progressive increase in cadence"},coachingTips:"This simulates racing when fatigued. The mental toughness gained here transfers directly to race day."},{name:"Cruise Intervals",duration:"55-70 minutes",description:"Classic lactate threshold intervals",structure:"10 min warmup + 5-6 x 5 min @ tempo with 2 min easy recovery + 10 min cooldown",intensity:"tempo",benefits:"Threshold efficiency, mental resilience, pacing consistency",technique:"Each interval should feel identical in effort. Monitor turnover consistency.",effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard, short recovery keeps you honest",legTurnover:"Fast, controlled, repeatable"},coachingTips:"Short recovery means you never fully recover. This is threshold work at its finest."}],INTERVALS:[{name:"Classic 400m Repeats",duration:"50-65 minutes",description:"Short, fast intervals simulating track 400m repeats",structure:"15 min easy warmup + 8-12 x 90 sec hard with 90 sec easy recovery + 10 min cooldown",intensity:"intervals",benefits:"VO2max development, speed endurance, running economy",technique:"Maximum leg turnover while maintaining control. Arms pump hard. You'll be breathing very hard.",effort:{heartRate:"Zone 4-5 (90-95%+ max HR)",perceived:"Hard - can't speak during efforts, breathing heavily",legTurnover:"Very fast, approaching maximum controlled speed"},coachingTips:"These are hard! The 90sec recovery is short by design - teaches recovery under duress. Equal work:rest ratio.",landEquivalent:"Simulates 8-12 x 400m on track"},{name:"800m Repeats",duration:"55-70 minutes",description:"Medium intervals simulating track 800m repeats",structure:"15 min easy warmup + 6-8 x 3 min hard with 2 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"VO2max, lactate tolerance, mental toughness",technique:"Fast sustained leg speed. Control your breathing rhythm. Stay upright even when fatigued.",effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard, last 30 seconds of each interval hurts",legTurnover:"Fast and sustained throughout 3 minutes"},coachingTips:"The 3min duration is long enough to really build lactate. Fight through the discomfort.",landEquivalent:"Simulates 6-8 x 800m on track"},{name:"Pyramid Intervals",duration:"60-75 minutes",description:"Varied interval lengths building mental adaptability",structure:"15 min warmup + [1min, 2min, 3min, 4min, 3min, 2min, 1min] hard with equal recovery + 10 min cooldown",intensity:"intervals",benefits:"Mental engagement, varied pace practice, comprehensive speed work",technique:"Adjust effort slightly for each interval length. Shorter = faster turnover, longer = controlled hard effort.",effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Hard throughout, but manageable with varying durations",legTurnover:"Varies with interval length"},coachingTips:"The pyramid keeps your mind engaged. Equal recovery keeps it challenging.",landEquivalent:"Simulates track pyramid workout (200m-400m-600m-800m-600m-400m-200m)"},{name:"Short Speed Bursts",duration:"45-60 minutes",description:"Very short, very fast intervals for speed development",structure:"15 min easy warmup + 12-16 x 45 sec @ max effort with 90 sec easy recovery + 10 min cooldown",intensity:"intervals",benefits:"Top-end speed, neuromuscular power, running economy",technique:"Explosive leg turnover. Maximum controllable speed. Form breaks down = stop interval.",effort:{heartRate:"Zone 5 (95%+ max HR)",perceived:"Very hard, nearly all-out, can't maintain conversation",legTurnover:"Maximum controlled turnover"},coachingTips:"These are about leg speed and power, not endurance. Quality over quantity - stop if form deteriorates.",landEquivalent:"Simulates 12-16 x 200m on track"},{name:"1000m Repeats",duration:"60-75 minutes",description:"Longer intervals building VO2max endurance",structure:"15 min warmup + 5-6 x 4 min hard with 3 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"VO2max endurance, mental toughness, race-pace specificity",technique:"Controlled hard effort. The 4min duration requires pacing discipline - don't go out too fast.",effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Hard and sustained, requires mental focus",legTurnover:"Fast but controlled, sustainable for 4 minutes"},coachingTips:"Longer intervals teach you to manage discomfort. The final minute of each is pure mental training.",landEquivalent:"Simulates 5-6 x 1000m on track"}],LONG:[{name:"Steady Long Run",duration:"75-90 minutes",description:"Extended aerobic endurance session",structure:"75-90 min continuous easy-moderate effort",intensity:"long",benefits:"Aerobic capacity, mental endurance, fat burning adaptation",technique:"Stay relaxed. Break into mental segments (every 15-20 minutes). Focus on smooth, efficient form.",effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Conversational but sustained, should feel moderately challenging by the end",legTurnover:"Steady, natural rhythm throughout"},coachingTips:"Long runs in the pool build incredible mental toughness. The monotony is part of the training.",landEquivalent:"Simulates 10-12 mile long run"},{name:"Extended Long Run",duration:"90-120 minutes",description:"Marathon-specific endurance work",structure:"90-120 min continuous easy-moderate effort",intensity:"long",benefits:"Maximum aerobic development, glycogen depletion training, mental fortitude",technique:"Mental breaks every 20 minutes. Stay patient. Maintain form even when fatigued.",effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Comfortable early, becomes work in final 30 minutes",legTurnover:"Consistent, don't slow down when tired"},coachingTips:"Two hours in the pool is serious training. Bring water. Mental game is everything here.",landEquivalent:"Simulates 13-16 mile long run"},{name:"Progressive Long Run",duration:"75-105 minutes",description:"Long run with building effort in final portion",structure:"60 min easy + 15-30 min @ moderate-tempo effort + 10 min easy cooldown",intensity:"long",benefits:"Endurance + race-specific fatigue resistance, teaches finishing strong",technique:"Start relaxed. Gradually increase leg speed in final portion. Simulate racing tired.",effort:{heartRate:"Zone 2 early, building to Zone 3-4 in final portion",perceived:"Easy early, hard finish simulates race fatigue",legTurnover:"Natural early, picking up noticeably in final portion"},coachingTips:"This teaches you to run hard when tired - critical for race day. The mental aspect is huge.",landEquivalent:"Simulates long run with marathon pace finish"},{name:"Long Run with Surges",duration:"75-90 minutes",description:"Long run with periodic hard efforts",structure:"75-90 min with 6-8 x 2 min @ tempo effort scattered throughout (every 10-12 min), remainder easy",intensity:"long",benefits:"Endurance + speed endurance, race simulation, mental engagement",technique:"Easy running between surges. Surges are controlled hard - not all-out sprints.",effort:{heartRate:"Zone 2 baseline, Zone 3-4 during surges",perceived:"Mostly comfortable with periodic challenging efforts",legTurnover:"Natural rhythm, faster during surges"},coachingTips:"Surges break up the monotony and teach you to change pace mid-workout. Very race-specific.",landEquivalent:"Simulates long run with fartlek surges"}],HILLS:[{name:"Pool Hill Repeats",duration:"50-65 minutes",description:"Simulated hill running using increased resistance and exaggerated leg drive",structure:"15 min easy warmup + 8-10 x 90 sec @ hill effort (high knee drive, powerful push) with 2 min easy recovery + 10 min cooldown",intensity:"hills",benefits:"Leg strength, power development, running economy, glute/hamstring activation",technique:"Exaggerate knee lift. Drive feet down powerfully. Engage glutes strongly. Lean slightly forward from ankles.",effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Hard, muscular effort with elevated breathing",legTurnover:"Powerful, deliberate, high knee drive"},coachingTips:"Focus on power and strength. The water resistance simulates uphill running perfectly. Feel the glutes working.",landEquivalent:"Simulates 8-10 x 90-second hill repeats"},{name:"Long Hill Intervals",duration:"55-70 minutes",description:"Extended hill efforts building strength endurance",structure:"15 min warmup + 5-6 x 3 min @ hill effort with 3 min easy recovery + 10 min cooldown",intensity:"hills",benefits:"Sustained power, muscular endurance, mental toughness",technique:"Maintain powerful knee drive for full 3 minutes. Don't let form deteriorate.",effort:{heartRate:"Zone 4 (85-90% max HR)",perceived:"Hard and sustained, muscular fatigue is primary limiter",legTurnover:"Controlled powerful motion, resist urge to speed up"},coachingTips:"These are long enough to build serious strength endurance. Last minute of each is pure grit.",landEquivalent:"Simulates 5-6 x 3-minute hill repeats"},{name:"Short Explosive Hills",duration:"45-60 minutes",description:"Short, powerful hill bursts for explosive strength",structure:"15 min warmup + 12-15 x 45 sec @ maximum hill effort with 90 sec easy recovery + 10 min cooldown",intensity:"hills",benefits:"Explosive power, fast-twitch recruitment, neuromuscular development",technique:"Explosive knee drive, maximum power output. Quality over quantity - stop if power drops.",effort:{heartRate:"Zone 5 (95%+ max HR)",perceived:"Very hard, nearly maximum effort",legTurnover:"Explosive, powerful, exaggerated knee lift"},coachingTips:"These are about maximum power production. If you can't maintain explosiveness, end the workout.",landEquivalent:"Simulates 12-15 x 45-second steep hill sprints"}],RECOVERY:[{name:"Short Recovery Session",duration:"20-30 minutes",description:"Gentle active recovery to promote blood flow and healing",structure:"20-30 min very easy aqua running",intensity:"recovery",benefits:"Active recovery, blood flow to damaged tissues, mental refreshment without impact stress",technique:"Minimal effort. Focus on smooth, relaxed motion. This should feel easy.",effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Very easy, restorative, could maintain indefinitely",legTurnover:"Slow, relaxed, natural"},coachingTips:"The goal is recovery, not fitness. If this feels hard, you're going too fast or need complete rest instead."},{name:"Extended Recovery Float",duration:"30-40 minutes",description:"Longer gentle session for deep recovery",structure:"30-40 min very easy aqua running with ultra-relaxed form",intensity:"recovery",benefits:"Extended active recovery, mental reset, maintains movement patterns without stress",technique:"Barely moving. Think 'floating run.' Let the water do the work.",effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Extremely easy, almost meditative",legTurnover:"Minimal, smooth, effortless"},coachingTips:"This is recovery disguised as training. The zero impact makes it perfect for day-after-hard-workout sessions."}]}}getWorkoutByDuration(e,t){const n=e.toUpperCase(),r=this.workoutLibrary[n];if(!r||0===r.length)return null;let i=r[0],o=Math.abs(this.parseDuration(r[0].duration)-t);return r.forEach(e=>{const n=this.parseDuration(e.duration),r=Math.abs(n-t);r<o&&(o=r,i=e)}),i}parseDuration(e){const t=e.match(/(\d+)(?:-(\d+))?/);if(!t)return 60;const n=parseInt(t[1]);return(n+(t[2]?parseInt(t[2]):n))/2}getWorkoutsByType(e){const t=e.toUpperCase();return this.workoutLibrary[t]||[]}getBeginnerProgression(){return this.beginnerProgression}}const qh=Wh;class Uh{constructor(){this.equipmentSpecs={name:"Elliptical Machine",description:"Low-impact cardio with running-like motion, adjustable resistance and incline",accessibility:"Highly accessible - found in virtually every gym, common home equipment",benefits:["Low impact alternative to running","Similar movement pattern to running","Adjustable resistance and incline for varied intensity","Can match running heart rate zones","Works similar muscle groups with less joint stress"],keyMetrics:{cadence:"Target 90 RPM (revolutions per minute) - matches 180 spm running cadence",heartRate:"87-92% max for tempo, 95-100% max for intervals",resistance:"Increase for harder efforts, combined with incline changes",incline:"Higher incline = more glute/hamstring activation, simulates hills"}},this.workoutLibrary={EASY:[{name:"Easy Recovery Session",duration:"30-45 minutes",description:"Low-intensity active recovery to promote blood flow and healing",structure:"30-45 min continuous easy effort at low resistance and moderate incline",intensity:"easy",benefits:"Active recovery, maintains aerobic base without impact stress, promotes healing",settings:{resistance:"Low (3-5 out of 20)",incline:"Moderate (5-8)",cadence:"85-90 RPM",heartRate:"Zone 1-2 (60-75% max HR)"},technique:"Smooth, relaxed motion. Full foot contact on pedals. Upright posture. Let the machine do the work.",coachingTips:"This should feel easy. If you're breathing hard, reduce resistance. The goal is recovery, not fitness."},{name:"Moderate Easy Workout",duration:"45-60 minutes",description:"Sustained easy aerobic work for base building",structure:"45-60 min continuous steady effort",intensity:"easy",benefits:"Aerobic base development, maintains endurance without running impact",settings:{resistance:"Moderate (5-8 out of 20)",incline:"Moderate (6-10)",cadence:"90 RPM",heartRate:"Zone 2 (65-75% max HR)"},technique:"Consistent rhythm throughout. Focus on smooth circular motion. Engage core.",coachingTips:"Should feel comfortable and sustainable. You're building aerobic foundation."},{name:"Extended Easy Session",duration:"60-75 minutes",description:"Long easy aerobic session",structure:"60-75 min continuous steady effort with occasional resistance/incline variations",intensity:"easy",benefits:"Extended aerobic stimulus, mental endurance, significant calorie burn",settings:{resistance:"Moderate (6-9 out of 20)",incline:"Varies (6-12)",cadence:"90 RPM",heartRate:"Zone 2 (65-75% max HR)"},technique:"Vary incline every 10-15 minutes to work different muscle groups. Maintain consistent effort.",coachingTips:"Long sessions on the elliptical require mental toughness. Break it into chunks. Stay patient."}],TEMPO:[{name:"Sustained Tempo Effort",duration:"50-65 minutes",description:"Continuous tempo effort at lactate threshold",structure:"10 min easy warmup + 30-40 min @ tempo effort (high resistance, moderate incline) + 10 min easy cooldown",intensity:"tempo",benefits:"Lactate threshold development, sustained hard effort tolerance, race-specific fitness",settings:{warmup:{resistance:4,incline:6,cadence:85},tempo:{resistance:"12-14",incline:"8-10",cadence:"90-92 RPM"},cooldown:{resistance:3,incline:5,cadence:85}},effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard - can speak in short sentences, breathing elevated",cadence:"90-92 RPM during tempo portion"},technique:"Increase resistance to elevate heart rate. Maintain 90+ RPM. Strong leg drive. Upright posture.",coachingTips:"The tempo should feel challenging but sustainable for the full duration. Don't start too hard."},{name:"Tempo Intervals",duration:"55-70 minutes",description:"Repeated tempo blocks with active recovery",structure:"10 min warmup + 3-4 x 8 min @ tempo (high resistance) with 3 min easy recovery + 10 min cooldown",intensity:"tempo",benefits:"Threshold power, recovery management under fatigue, pacing discipline",settings:{intervals:{resistance:"13-15",incline:"8-10",cadence:"90-92 RPM"},recovery:{resistance:4,incline:5,cadence:85}},effort:{heartRate:"Zone 3-4 during efforts (80-90% max HR)",perceived:"Hard but repeatable, recovery feels easy",cadence:"90-92 RPM during efforts"},technique:"Sharp contrast between effort and recovery. Recovery is truly easy - let HR drop.",coachingTips:"Each interval should feel the same. If you're dying on the last one, you went too hard early."},{name:"Progressive Tempo Build",duration:"50-65 minutes",description:"Gradually increasing resistance to simulate race finish",structure:"10 min easy + 10 min moderate + 15 min tempo + 5 min hard + 10 min easy cooldown",intensity:"tempo",benefits:"Graduated effort adaptation, finishing strength, race simulation",settings:{easy:{resistance:4,incline:6},moderate:{resistance:9,incline:8},tempo:{resistance:13,incline:9},hard:{resistance:16,incline:10},cooldown:{resistance:3,incline:5}},effort:{heartRate:"Building from Zone 2 \u2192 Zone 5",perceived:"Starting comfortable, finishing very hard",cadence:"85 RPM building to 92+ RPM"},technique:"Progressive resistance increases. Final 5min should feel like racing the final mile.",coachingTips:"This teaches you to push when tired. The mental aspect is crucial for race day."},{name:"Cruise Intervals",duration:"55-70 minutes",description:"Classic lactate threshold intervals with short recovery",structure:"10 min warmup + 5-6 x 5 min @ tempo with 2 min easy recovery + 10 min cooldown",intensity:"tempo",benefits:"Threshold efficiency, mental resilience, consistent pacing",settings:{intervals:{resistance:"13-14",incline:"8-9",cadence:"90 RPM"},recovery:{resistance:4,incline:5,cadence:85}},effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard, short recovery keeps it honest",cadence:"Consistent 90 RPM"},technique:"Consistent effort and cadence across all intervals. Monitor RPM closely.",coachingTips:"Short recovery = never fully recovered. Classic threshold training."}],INTERVALS:[{name:"1-Minute On/Off Intervals",duration:"45-60 minutes",description:"Short, intense intervals with equal recovery",structure:"10-15 min easy warmup + 15 x 1 min fast (high resistance + incline) / 1 min easy float + 10-15 min cooldown",intensity:"intervals",benefits:"VO2max development, speed endurance, mental toughness",settings:{intervals:{resistance:"15-17",incline:"10-12",cadence:"95-100 RPM"},recovery:{resistance:3,incline:4,cadence:80}},effort:{heartRate:"Zone 4-5 (90-95%+ max HR)",perceived:"Hard - breathing heavily, can't speak during efforts",cadence:"95-100 RPM during efforts"},technique:"Maximum sustainable resistance and cadence. Drive hard through legs. Recover completely during floats.",coachingTips:"Equal work:rest teaches your body to recover under duress. These are hard!",landEquivalent:"Simulates 15 x 400m track repeats"},{name:"Pyramid Intervals",duration:"55-70 minutes",description:"Varied interval lengths for mental engagement",structure:"15 min warmup + [1min, 2min, 3min, 4min, 3min, 2min, 1min] hard with equal recovery + 10 min cooldown",intensity:"intervals",benefits:"Mental adaptability, varied pace practice, comprehensive speed work",settings:{intervals:{resistance:"14-16",incline:"9-11",cadence:"92-98 RPM"},recovery:{resistance:4,incline:5,cadence:85}},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Hard throughout, varying with interval length",cadence:"Adjust slightly for each length"},technique:"Shorter intervals = higher cadence, longer = controlled hard effort with moderate cadence.",coachingTips:"Pyramid keeps your mind engaged. Adjust resistance for each interval duration.",landEquivalent:"Simulates 200m-400m-600m-800m-600m-400m-200m pyramid"},{name:"3-Minute Hard Repeats",duration:"55-70 minutes",description:"Medium-length intervals building VO2max",structure:"15 min warmup + 6-8 x 3 min hard with 2 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"VO2max, lactate tolerance, sustained hard effort",settings:{intervals:{resistance:"15-16",incline:10,cadence:"92-95 RPM"},recovery:{resistance:4,incline:5,cadence:85}},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard, last 30 seconds hurts",cadence:"92-95 RPM"},technique:"Control your effort - 3 minutes is long enough to blow up if you start too hard.",coachingTips:"The 3-min duration builds serious lactate. Fight through the discomfort.",landEquivalent:"Simulates 6-8 x 800m track repeats"},{name:"Tabata-Style Sprint Intervals",duration:"40-55 minutes",description:"Very short, very intense efforts",structure:"15 min warmup + 8 rounds x (20 sec all-out / 10 sec rest) + 3 min recovery, repeat 2-3 sets + 10 min cooldown",intensity:"intervals",benefits:"Anaerobic capacity, explosive power, mental toughness",settings:{sprints:{resistance:"12-14",incline:8,cadence:"110-120 RPM"},rest:{resistance:4,incline:4,cadence:70}},effort:{heartRate:"Zone 5 (95%+ max HR)",perceived:"Maximum effort, gasping for air",cadence:"110-120 RPM - as fast as controllable"},technique:"Explosive leg speed. Maximum RPM while maintaining control. 10 seconds goes fast!",coachingTips:"These are brutal. Quality over quantity - if form breaks, stop the set.",landEquivalent:"Simulates all-out sprint intervals"},{name:"4-Minute VO2max Intervals",duration:"60-75 minutes",description:"Longer intervals at VO2max intensity",structure:"15 min warmup + 5-6 x 4 min hard with 3 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"VO2max endurance, mental toughness, race-pace specificity",settings:{intervals:{resistance:"14-15",incline:9,cadence:"92-95 RPM"},recovery:{resistance:4,incline:5,cadence:85}},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Hard and sustained, requires focus",cadence:"92-95 RPM consistently"},technique:"Pacing is critical - don't blow up early. Final minute is pure mental training.",coachingTips:"4 minutes is long enough to teach you to manage suffering. This is race prep.",landEquivalent:"Simulates 5-6 x 1000m track repeats"}],LONG:[{name:"Steady Long Session",duration:"75-90 minutes",description:"Extended moderate effort for aerobic development",structure:"75-90 min continuous moderate effort, vary incline every 10-15 min for muscle variety",intensity:"long",benefits:"Aerobic capacity, fat burning adaptation, mental endurance",settings:{resistance:"Moderate (7-9)",incline:"Varies (6-12)",cadence:"88-92 RPM"},effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Conversational but sustained",cadence:"Steady 88-92 RPM"},technique:"Vary incline to work different muscle angles. Stay patient and consistent.",coachingTips:"Long elliptical sessions build serious mental fortitude. Stay engaged by varying incline.",landEquivalent:"Simulates 10-12 mile long run"},{name:"Extended Long Session",duration:"90-120 minutes",description:"Marathon-specific endurance work",structure:"90-120 min continuous effort, systematic incline changes every 15 min",intensity:"long",benefits:"Maximum aerobic development, glycogen depletion training, mental toughness",settings:{resistance:"Moderate (7-10)",incline:"Cycles through 6-8-10-12 every 15 min",cadence:"88-92 RPM"},effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Comfortable early, becomes work in final 30 min",cadence:"Consistent throughout"},technique:"Systematic incline changes prevent boredom and work multiple muscle angles.",coachingTips:"Two hours on the elliptical is serious training. Bring water and entertainment.",landEquivalent:"Simulates 13-16 mile long run"},{name:"Progressive Long Session",duration:"75-105 minutes",description:"Long session with building effort in final portion",structure:"60 min easy-moderate + 15-30 min @ increased resistance/tempo effort + 10 min easy",intensity:"long",benefits:"Endurance + race-specific fatigue resistance",settings:{base:{resistance:7,incline:8,cadence:90},finish:{resistance:"12-13",incline:9,cadence:92},cooldown:{resistance:4,incline:5,cadence:85}},effort:{heartRate:"Zone 2 early, building to Zone 3-4",perceived:"Easy early, hard finish",cadence:"Building from 90 to 92+ RPM"},technique:"Simulate running hard when tired. This is race-day practice.",coachingTips:"The hard finish teaches you to push when fatigued - critical for racing.",landEquivalent:"Simulates long run with marathon pace finish"}],HILLS:[{name:"Hill Repeats",duration:"50-65 minutes",description:"Simulated hill running using maximum incline",structure:"15 min easy warmup + 8-10 x 90 sec @ max incline (high resistance) with 2 min easy recovery + 10 min cooldown",intensity:"hills",benefits:"Leg strength, power development, glute/hamstring activation",settings:{hills:{resistance:"13-15",incline:"15-20 (max)",cadence:"85-90 RPM"},recovery:{resistance:3,incline:2,cadence:80}},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Hard, muscular effort",cadence:"85-90 RPM - power over speed"},technique:"Maximum incline. Focus on driving through glutes and hamstrings. Strong core engagement.",coachingTips:"High incline + resistance = serious strength work. Feel the glutes burn.",landEquivalent:"Simulates 8-10 x 90-second hill repeats"},{name:"Long Hill Intervals",duration:"55-70 minutes",description:"Extended hill efforts for strength endurance",structure:"15 min warmup + 5-6 x 3 min @ high incline with 3 min easy recovery + 10 min cooldown",intensity:"hills",benefits:"Sustained power, muscular endurance, mental toughness",settings:{hills:{resistance:"12-14",incline:"12-15",cadence:"85-88 RPM"},recovery:{resistance:3,incline:2,cadence:80}},effort:{heartRate:"Zone 4 (85-90% max HR)",perceived:"Hard and sustained, muscular fatigue",cadence:"85-88 RPM"},technique:"Maintain form for full 3 minutes despite fatigue. Don't let cadence drop.",coachingTips:"3 minutes at high incline builds serious strength endurance. Last minute is grit.",landEquivalent:"Simulates 5-6 x 3-minute hill repeats"},{name:"Rolling Hills Session",duration:"60-75 minutes",description:"Varied incline simulating hilly terrain",structure:"Continuous 60-75 min with incline varying every 2-3 minutes between 4-16",intensity:"hills",benefits:"Variable terrain adaptation, mental engagement, comprehensive leg strength",settings:{resistance:"Moderate (8-10)",incline:"Cycles: 4-8-12-16-12-8-4 every 2-3 min",cadence:"90 RPM on flats, 85 RPM on steep sections"},effort:{heartRate:"Zone 2-4 (varies with incline)",perceived:"Moderate to hard depending on current incline",cadence:"Adjust with terrain"},technique:"Adjust cadence and effort with incline changes. Simulate real trail running.",coachingTips:"This simulates hilly race courses. Mental engagement is high with constant changes.",landEquivalent:"Simulates hilly long run or trail run"}],RECOVERY:[{name:"Short Recovery Session",duration:"20-30 minutes",description:"Gentle movement for active recovery",structure:"20-30 min very easy, minimal resistance and incline",intensity:"recovery",benefits:"Blood flow without stress, active recovery, movement pattern maintenance",settings:{resistance:"Very low (2-3)",incline:"Low (3-5)",cadence:"80-85 RPM"},effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Very easy, restorative",cadence:"Slow and relaxed"},technique:"Minimal effort. Focus on smooth motion. This should feel easy.",coachingTips:"If this feels hard, you need complete rest instead. Goal is recovery, not fitness."},{name:"Extended Recovery Session",duration:"30-45 minutes",description:"Longer gentle session for deep recovery",structure:"30-45 min very easy with minimal resistance",intensity:"recovery",benefits:"Extended active recovery without impact stress",settings:{resistance:"Very low (2-4)",incline:"Low (4-6)",cadence:"82-87 RPM"},effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Extremely easy, almost meditative",cadence:"Relaxed and natural"},technique:"Let the machine do the work. Focus on smooth, effortless motion.",coachingTips:"Perfect for day-after-hard-workout. Zero impact makes it ideal for recovery."}]}}getWorkoutByDuration(e,t){const n=e.toUpperCase(),r=this.workoutLibrary[n];if(!r||0===r.length)return null;let i=r[0],o=Math.abs(this.parseDuration(r[0].duration)-t);return r.forEach(e=>{const n=this.parseDuration(e.duration),r=Math.abs(n-t);r<o&&(o=r,i=e)}),i}parseDuration(e){const t=e.match(/(\d+)(?:-(\d+))?/);if(!t)return 60;const n=parseInt(t[1]);return(n+(t[2]?parseInt(t[2]):n))/2}getWorkoutsByType(e){const t=e.toUpperCase();return this.workoutLibrary[t]||[]}}const zh=Uh;class Hh{constructor(){this.equipmentSpecs={name:"Stationary Bike",types:["Spin bike","Upright bike","Peloton","Indoor trainer with road bike","Recumbent bike"],description:"Traditional seated cycling for running-specific cross-training",accessibility:"Highly accessible - gyms, home Pelotons, Zwift setups, spin studios",benefits:["Low impact cardiovascular training","Maintains aerobic fitness during injury","Builds leg strength and power","Can match running heart rate zones","Accessible almost anywhere"],runningConversion:{time:"10-15 min cycling \u2248 1 mile running",distance:"3x distance (5 mile run \u2248 15 mile ride)",effort:"1 hour cycling \u2248 30-40 min running"},keyMetrics:{cadence:"Target 90 RPM (matches 180 spm running), up to 125 RPM for sprints",heartRate:"~8-10 bpm lower than running initially (sport-specific fitness improves this)",power:"If available: FTP-based zones similar to running pace zones",resistance:"Adjust to match running effort levels"}},this.workoutLibrary={EASY:[{name:"Recovery Spin",duration:"30-45 minutes",description:"Gentle spinning for active recovery",structure:"30-45 min continuous easy spinning at low resistance",intensity:"easy",benefits:"Active recovery, blood flow to legs, maintains aerobic base without impact",settings:{resistance:"Low (easy to spin)",cadence:"85-95 RPM",heartRate:"Zone 1-2 (60-75% max HR)",power:"< 60% FTP if using power meter"},technique:"Smooth, relaxed pedal stroke. Seated position. Light grip on handlebars. Let legs spin freely.",coachingTips:"This should feel easy. If you're breathing hard, reduce resistance. Recovery is the goal.",runningEquivalent:"30-45 min easy recovery run"},{name:"Moderate Easy Ride",duration:"45-75 minutes",description:"Sustained easy aerobic ride",structure:"45-75 min continuous steady effort",intensity:"easy",benefits:"Aerobic base building, endurance maintenance without running impact",settings:{resistance:"Moderate (conversational effort)",cadence:"88-95 RPM",heartRate:"Zone 2 (65-75% max HR)",power:"60-70% FTP"},technique:"Consistent cadence throughout. Vary seated/standing every 10-15 min for variety.",coachingTips:"Should feel comfortable and sustainable. You're building aerobic foundation.",runningEquivalent:"45-60 min easy run"},{name:"Extended Easy Ride",duration:"75-120 minutes",description:"Long easy aerobic session",structure:"75-120 min continuous steady effort, vary position occasionally",intensity:"easy",benefits:"Extended aerobic stimulus, fat burning adaptation, mental endurance",settings:{resistance:"Moderate",cadence:"88-92 RPM",heartRate:"Zone 2 (65-75% max HR)",power:"60-70% FTP"},technique:"Alternate seated and standing climbs every 15-20 min. Stay patient and consistent.",coachingTips:"Long rides build serious endurance. Bring water and fuel if over 90 minutes.",runningEquivalent:"60-75 min easy run"}],TEMPO:[{name:"Sustained Tempo Ride",duration:"60-90 minutes",description:"Continuous tempo effort at lactate threshold",structure:"15 min easy warmup + 30-60 min @ tempo effort (high resistance, 85-90 RPM) + 15 min easy cooldown",intensity:"tempo",benefits:"Lactate threshold development, sustained power, mental toughness",settings:{warmup:{resistance:"low",cadence:90},tempo:{resistance:"moderate-high",cadence:"85-90 RPM"},heartRate:"Zone 3-4 (80-90% max HR)",power:"85-95% FTP"},effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard - can speak short sentences, breathing elevated",cadence:"85-90 RPM consistently"},technique:"Seated mostly. Increase resistance to hit effort, not just higher cadence. Strong steady pedal stroke.",coachingTips:"Tempo should feel challenging but sustainable. Don't start too hard.",runningEquivalent:"45-60 min tempo run"},{name:"Tempo Intervals",duration:"75-105 minutes",description:"Repeated tempo efforts with active recovery",structure:"15 min warmup + 4 x 15 min @ tempo (moderate-high resistance) with 8 min easy spinning + 15 min cooldown",intensity:"tempo",benefits:"Threshold power, recovery management, pacing practice",settings:{intervals:{resistance:"moderate-high",cadence:"85-90 RPM"},recovery:{resistance:"low",cadence:"90-95 RPM"},heartRate:"Zone 3-4 during efforts",power:"85-95% FTP during efforts"},effort:{heartRate:"Zone 3-4 during efforts (80-90% max HR)",perceived:"Hard but repeatable, recovery truly easy",cadence:"85-90 RPM during efforts, faster during recovery"},technique:"Strong resistance during efforts. Truly easy spinning during recovery - let HR drop.",coachingTips:"This is classic threshold work. Each interval should feel the same.",runningEquivalent:"Tempo interval workout"},{name:"Progressive Power Build",duration:"60-90 minutes",description:"Gradually increasing resistance simulating race finish",structure:"15 min easy + 15 min moderate + 20 min tempo + 10 min hard + 15 min easy cooldown",intensity:"tempo",benefits:"Graduated effort adaptation, finishing strength, race simulation",settings:{progressive:{resistance:"increasing each segment",cadence:"88-92 RPM"},heartRate:"Building from Zone 2 \u2192 Zone 5",power:"Building from 65% \u2192 100% FTP"},effort:{heartRate:"Building from Zone 2 to Zone 5",perceived:"Starting comfortable, finishing very hard",cadence:"Steady throughout"},technique:"Gradually increase resistance each segment. Final 10min should feel like racing.",coachingTips:"This teaches you to push when tired. Mental training for race day.",runningEquivalent:"Progressive tempo run"},{name:"Sweet Spot Intervals",duration:"60-90 minutes",description:"Sustained efforts just below threshold",structure:"15 min warmup + 3 x 20 min @ sweet spot (88-93% FTP) with 5 min easy + 15 min cooldown",intensity:"tempo",benefits:"Threshold development with more volume, sustainable power",settings:{intervals:{resistance:"moderate-high",cadence:"85-90 RPM"},recovery:{resistance:"low",cadence:"95 RPM"},heartRate:"Zone 3 (75-85% max HR)",power:"88-93% FTP"},effort:{heartRate:"Zone 3 (75-85% max HR)",perceived:"Moderately hard, sustainable for longer durations",cadence:"Steady 85-90 RPM"},technique:"Just below threshold = can sustain longer. Focus on smooth power delivery.",coachingTips:"Sweet spot is hard enough to build fitness, sustainable enough for volume.",runningEquivalent:"Tempo run or marathon pace work"}],INTERVALS:[{name:"1-Minute Sprint Intervals",duration:"60-75 minutes",description:"Short, intense sprints with recovery",structure:"15 min warmup + 10 x 1 min all-out sprint (out of saddle) with 2 min easy recovery + 15 min cooldown",intensity:"intervals",benefits:"VO2max, explosive power, neuromuscular development",settings:{sprints:{resistance:"high",cadence:"100-125 RPM",position:"out of saddle"},recovery:{resistance:"low",cadence:"80-90 RPM"},heartRate:"Zone 5 (95%+ max HR)",power:"120-150% FTP"},effort:{heartRate:"Zone 5 (95%+ max HR)",perceived:"All-out effort, gasping for air",cadence:"100-125 RPM during sprints"},technique:"Out of saddle. Maximum power output. Control your bike. Recovery is truly easy.",coachingTips:"These are hard! Quality over quantity. If power drops significantly, stop the workout.",runningEquivalent:"10 x 400m track repeats",landEquivalent:"Simulates 10 x 400m on track"},{name:"90-Second Power Intervals",duration:"60-75 minutes",description:"Medium intervals building VO2max",structure:"15 min warmup + 6 x 90 sec @ RPE 9-10 with 3 min easy pedaling + 15 min cooldown",intensity:"intervals",benefits:"VO2max development, lactate tolerance, mental toughness",settings:{intervals:{resistance:"very high",cadence:"95-105 RPM"},recovery:{resistance:"low",cadence:"85 RPM"},heartRate:"Zone 4-5 (90-95% max HR)",power:"110-130% FTP"},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard, last 30 seconds hurts",cadence:"95-105 RPM"},technique:"Seated or standing - your choice. Maximum sustainable power for 90 seconds.",coachingTips:"90 seconds is long enough to hurt. Push through the final 30 seconds.",runningEquivalent:"6-8 x 800m repeats",landEquivalent:"Simulates 6 x 800m on track"},{name:"3-Minute Hard Repeats",duration:"60-90 minutes",description:"Longer intervals at high intensity",structure:"15 min warmup + 8 x 3 min hard with 2 min easy recovery + 15 min cooldown",intensity:"intervals",benefits:"VO2max endurance, sustained high power, mental resilience",settings:{intervals:{resistance:"high",cadence:"90-95 RPM"},recovery:{resistance:"low",cadence:"90 RPM"},heartRate:"Zone 4-5 (90-95% max HR)",power:"100-115% FTP"},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Hard and sustained, requires focus",cadence:"90-95 RPM"},technique:"Control your effort - 3 minutes is long enough to blow up early. Pace yourself.",coachingTips:"These are threshold-plus efforts. Final minute of each is mental training.",runningEquivalent:"8 x 1000m repeats",landEquivalent:"Simulates 8 x 1000m on track"},{name:"Tabata Sprints",duration:"45-60 minutes",description:"Ultra-short maximum efforts",structure:"15 min warmup + 8 rounds x (20 sec max sprint / 10 sec rest) + 3 min recovery, repeat 2-3 sets + 15 min cooldown",intensity:"intervals",benefits:"Anaerobic capacity, explosive power, maximum RPM development",settings:{sprints:{resistance:"moderate",cadence:"maximum sustainable RPM (120-140)"},rest:{resistance:"low",cadence:"slow pedal"},heartRate:"Zone 5 (95%+ max HR)",power:"150%+ FTP"},effort:{heartRate:"Zone 5 (95%+ max HR)",perceived:"Maximum effort, explosive",cadence:"Maximum controllable RPM"},technique:"Explosive leg speed. 20 seconds goes fast - go all out immediately. 10 sec rest = barely recover.",coachingTips:"These are brutal. Classic Tabata protocol. If form breaks, stop.",runningEquivalent:"Sprint intervals",landEquivalent:"Simulates all-out sprint training"},{name:"5-Minute Power Intervals",duration:"75-90 minutes",description:"Long VO2max efforts proven to improve running",structure:"15 min warmup + 4-5 x 5 min hard with 5 min easy recovery + 15 min cooldown",intensity:"intervals",benefits:"VO2max endurance, research-proven to improve 5K run times",settings:{intervals:{resistance:"high",cadence:"88-92 RPM"},recovery:{resistance:"low",cadence:"90-95 RPM"},heartRate:"Zone 4-5 (90-95% max HR)",power:"95-105% FTP"},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard and sustained",cadence:"88-92 RPM"},technique:"Seated position. Control your pacing - 5 minutes is long. Equal work:rest ratio allows quality.",coachingTips:"Research shows 5-min bike intervals improve running performance. These are gold.",runningEquivalent:"Mile repeats",landEquivalent:"Simulates 4-5 x mile repeats",researchNote:"Longer bike intervals (5 min) shown to improve running 5K times by over 1 minute in triathletes"},{name:"10-Second Max Sprints",duration:"45-60 minutes",description:"Ultra-short maximal sprints for running performance",structure:"15 min warmup + 6 x 10 sec maximal sprint with 5 min easy recovery + 15 min cooldown",intensity:"intervals",benefits:"Neuromuscular power, running economy, 3K performance improvement",settings:{sprints:{resistance:"moderate",cadence:"absolute maximum RPM"},recovery:{resistance:"very low",cadence:"easy spinning"},heartRate:"Zone 5 briefly",power:"Maximum wattage output"},effort:{heartRate:"Spikes to Zone 5",perceived:"Absolute maximum effort for 10 seconds",cadence:"Maximum possible RPM"},technique:"Explosive from first second. All-out maximum power for full 10 seconds. Long recovery allows quality.",coachingTips:"Research-backed for 3K running improvement. Maximum quality, full recovery between efforts.",runningEquivalent:"Sprint drills",researchNote:"6 x 10-second maximal sprints shown to improve 3K running performance"}],LONG:[{name:"Steady Endurance Ride",duration:"90-150 minutes",description:"Long steady effort for aerobic development",structure:"90-150 min continuous moderate effort, vary seated/standing every 15-20 min",intensity:"long",benefits:"Aerobic capacity, fat burning, endurance without running impact",settings:{resistance:"Moderate",cadence:"88-92 RPM",heartRate:"Zone 2 (65-75% max HR)",power:"65-75% FTP"},effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Conversational but sustained",cadence:"Steady 88-92 RPM"},technique:"Vary position to prevent fatigue. Stay patient. Fuel properly if over 90 minutes.",coachingTips:"Long rides build massive aerobic base. Time in Zone 2 is gold for endurance.",runningEquivalent:"Long run (1.5-2 hours)"},{name:"Extended Endurance Ride",duration:"150-240 minutes",description:"Ultra-long ride for maximum endurance",structure:"2.5-4 hours continuous moderate effort with nutrition strategy",intensity:"long",benefits:"Maximum aerobic development, glycogen management, mental fortitude",settings:{resistance:"Moderate",cadence:"88-92 RPM",heartRate:"Zone 2 (65-75% max HR)",power:"60-70% FTP"},effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Easy-moderate, becomes work in final hour",cadence:"Consistent throughout"},technique:"Nutrition is critical - fuel every 45-60 min. Stay hydrated. Mental breaks every 30 min.",coachingTips:"This is serious endurance training. Bring food, water, entertainment. Plan your fueling strategy.",runningEquivalent:"16-20 mile long run"},{name:"Progressive Endurance Ride",duration:"90-135 minutes",description:"Long ride with building effort finish",structure:"75 min easy-moderate + 15-45 min @ increased resistance/tempo + 15 min easy cooldown",intensity:"long",benefits:"Endurance + fatigue resistance, teaches pushing when tired",settings:{base:{resistance:"moderate",cadence:90,power:"70% FTP"},finish:{resistance:"moderate-high",cadence:88,power:"85-90% FTP"}},effort:{heartRate:"Zone 2 early, building to Zone 3-4",perceived:"Easy early, hard finish",cadence:"Steady throughout"},technique:"Simulate racing tired. Hard finish after endurance work is race-specific.",coachingTips:"The hard finish when fatigued is key race training. This is mental strength work.",runningEquivalent:"Long run with marathon pace finish"}],HILLS:[{name:"Seated Climbing Intervals",duration:"60-75 minutes",description:"High resistance climbs for leg strength",structure:"15 min warmup + 8-10 x 2 min @ very high resistance (seated) with 3 min easy recovery + 15 min cooldown",intensity:"hills",benefits:"Leg strength, sustained power, glute/quad development",settings:{climbs:{resistance:"very high",cadence:"60-75 RPM",position:"seated"},recovery:{resistance:"low",cadence:"90-95 RPM"}},effort:{heartRate:"Zone 4 (85-90% max HR)",perceived:"Very hard, muscular effort",cadence:"60-75 RPM - power over speed"},technique:"Seated position. Grind through high resistance. Feel the leg muscles working hard.",coachingTips:"Low cadence + high resistance = serious strength work. Builds running power.",runningEquivalent:"Hill repeats"},{name:"Standing Power Climbs",duration:"60-75 minutes",description:"Out-of-saddle climbing for explosive power",structure:"15 min warmup + 6-8 x 90 sec standing climb @ high resistance with 3 min easy recovery + 15 min cooldown",intensity:"hills",benefits:"Explosive power, full-body strength, running-specific power development",settings:{climbs:{resistance:"very high",cadence:"70-80 RPM",position:"standing"},recovery:{resistance:"low",cadence:"90 RPM",position:"seated"}},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard, explosive effort",cadence:"70-80 RPM out of saddle"},technique:"Standing position. Drive through legs. Rock bike side to side slightly. Core engaged.",coachingTips:"Standing climbs build explosive power that transfers to running. Feel the burn!",runningEquivalent:"Steep hill repeats"},{name:"Mixed Climbing Session",duration:"60-90 minutes",description:"Alternating seated and standing climbs",structure:"15 min warmup + 5 x (3 min seated climb + 2 min standing climb) with 4 min recovery + 15 min cooldown",intensity:"hills",benefits:"Comprehensive power development, muscular endurance, mental toughness",settings:{seated:{resistance:"very high",cadence:"65-75 RPM"},standing:{resistance:"very high",cadence:"75-85 RPM"}},effort:{heartRate:"Zone 4 (85-90% max HR)",perceived:"Hard throughout, muscular fatigue builds",cadence:"Varies between seated and standing"},technique:"Seated: grind through resistance. Standing: drive explosively. Transition smoothly.",coachingTips:"This builds both sustained and explosive power. Comprehensive strength session.",runningEquivalent:"Long hill workout"}],RECOVERY:[{name:"Active Recovery Spin",duration:"20-30 minutes",description:"Very easy spinning for recovery",structure:"20-30 min very easy, minimal resistance",intensity:"recovery",benefits:"Blood flow without stress, active recovery",settings:{resistance:"Very low",cadence:"85-95 RPM",heartRate:"Zone 1 (60-70% max HR)",power:"< 55% FTP"},effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Very easy, restorative",cadence:"Free spinning"},technique:"Let legs spin freely. Minimal resistance. This should feel easy.",coachingTips:"If this feels hard, you need complete rest. Recovery is the goal, not fitness."},{name:"Extended Recovery Ride",duration:"30-45 minutes",description:"Longer gentle ride for deep recovery",structure:"30-45 min very easy spinning",intensity:"recovery",benefits:"Extended active recovery, maintains movement patterns",settings:{resistance:"Very low",cadence:"88-95 RPM",heartRate:"Zone 1 (60-70% max HR)",power:"< 60% FTP"},effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Extremely easy",cadence:"Natural, relaxed"},technique:"Effortless pedaling. Focus on smooth circular motion.",coachingTips:"Perfect day-after-hard-workout session. Promotes recovery without stress."}]}}getWorkoutByDuration(e,t){const n=e.toUpperCase(),r=this.workoutLibrary[n];if(!r||0===r.length)return null;let i=r[0],o=Math.abs(this.parseDuration(r[0].duration)-t);return r.forEach(e=>{const n=this.parseDuration(e.duration),r=Math.abs(n-t);r<o&&(o=r,i=e)}),i}parseDuration(e){const t=e.match(/(\d+)(?:-(\d+))?/);if(!t)return 60;const n=parseInt(t[1]);return(n+(t[2]?parseInt(t[2]):n))/2}getWorkoutsByType(e){const t=e.toUpperCase();return this.workoutLibrary[t]||[]}}const Vh=Hh;class Kh{constructor(){this.equipmentSpecs={name:"Swimming",poolTypes:["25-yard pool","25-meter pool","50-meter pool","Open water"],description:"Full-body cardiovascular workout, different movement pattern from running",accessibility:"Widely accessible - community pools, gyms, lakes, ocean",benefits:["Low-impact full-body cardio","Works different muscle groups than running","Improves lung capacity and breathing control","Excellent for injury recovery","Can maintain aerobic fitness","Active recovery for tired legs"],swimStrokes:{freestyle:"Primary stroke for continuous swimming and aerobic work",backstroke:"Good for shoulder balance and variety",breaststroke:"Lower intensity, good for recovery",butterfly:"High intensity, brief use only unless experienced swimmer"},keyMetrics:{effort:"Use RPE (perceived exertion) rather than pace",heartRate:"Typically 10-15 bpm lower than running at same effort",breathing:"Controlled breathing improves lung capacity",technique:"Focus on efficiency over speed - poor technique = exhaustion"}},this.beginnerGuidance={important:"Swimming technique matters more than other modalities. Poor technique = quick exhaustion.",recommendation:"If new to swimming, take 2-3 lessons to learn proper freestyle form",alternatives:"If not comfortable swimming laps, use aqua running instead",progression:"Start with easier strokes (freestyle, backstroke, breaststroke) before attempting butterfly"},this.workoutLibrary={EASY:[{name:"Easy Aerobic Swim",duration:"20-40 minutes",description:"Continuous easy swimming for aerobic base",structure:"10 min drills/warmup + 20-30 min continuous easy swimming (vary strokes) + 5-10 min easy cooldown",intensity:"easy",benefits:"Aerobic base, active recovery for running, improves breathing and lung capacity",technique:{focus:"Smooth, efficient stroke. Don't fight the water.",breathing:"Controlled, rhythmic breathing",effort:"Should feel easy, sustainable indefinitely"},workout:{warmup:"200-400 yards easy mixed strokes",main:"800-1200 yards freestyle at conversational effort",cooldown:"200 yards easy backstroke or breaststroke"},effort:{heartRate:"Zone 1-2 (60-75% max HR)",perceived:"Easy, could maintain conversation if able to speak",breathing:"Relaxed and controlled"},coachingTips:"Focus on technique. If you're exhausted, you're swimming too hard or need technique work.",runningEquivalent:"30-40 min easy recovery run"},{name:"Moderate Aerobic Swim",duration:"30-45 minutes",description:"Sustained aerobic work with varied strokes",structure:"10 min drills + 30-40 min steady swimming (mostly freestyle, mix in other strokes) + 5-10 min cooldown",intensity:"easy",benefits:"Cardiovascular endurance, full-body conditioning, breathing development",technique:{focus:"Efficient stroke mechanics, bilateral breathing",breathing:"Every 3 or 5 strokes for balance",effort:"Moderate, sustainable"},workout:{warmup:"400 yards (200 free, 100 back, 100 breast)",main:"1200-1600 yards (1000 freestyle, mix in 200-400 other strokes for variety)",cooldown:"200-300 yards easy choice of stroke"},effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Comfortable but sustained effort",breathing:"Controlled, rhythmic"},coachingTips:"Varying strokes gives different muscles a break. Don't skip warmup - prevents shoulder issues.",runningEquivalent:"40-45 min easy run"},{name:"Extended Aerobic Swim",duration:"40-60 minutes",description:"Long aerobic swim for endurance",structure:"10 min drills + 45-50 min continuous varied swimming + 5-10 min cooldown",intensity:"easy",benefits:"Extended aerobic stimulus, mental endurance in water, active recovery",technique:{focus:"Maintain efficiency even when fatigued",breathing:"Consistent pattern throughout",effort:"Easy-moderate, mentally engaging"},workout:{warmup:"400-600 yards mixed strokes with drills",main:"2000-2500 yards (alternate 400 free, 200 back/breast, repeat)",cooldown:"300-400 yards easy"},effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Sustainable, becomes mentally challenging in final portion",breathing:"Steady throughout"},coachingTips:"Long swims build mental toughness. Break into chunks mentally. Vary strokes to stay engaged.",runningEquivalent:"60 min easy run"}],TEMPO:[{name:"Tempo Swim",duration:"35-50 minutes",description:"Sustained harder effort for threshold development",structure:"10 min warmup + 15-20 min @ tempo effort (80% effort) + 10 min easy cooldown",intensity:"tempo",benefits:"Lactate threshold, sustained effort tolerance, cardiovascular fitness",technique:{focus:"Maintain stroke efficiency despite elevated effort",breathing:"More frequent than easy pace",effort:"Comfortably hard, breathing elevated"},workout:{warmup:"400 yards (200 free, 100 back, 100 drills)",tempo:"800-1000 yards freestyle @ tempo effort (or 4 x 200 with 20 sec rest)",cooldown:"400 yards easy mixed"},effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard, breathing elevated but controlled",breathing:"Every 2-3 strokes"},coachingTips:"Tempo swimming teaches breathing control under duress. Don't let stroke fall apart.",runningEquivalent:"30 min tempo run"},{name:"Threshold Intervals",duration:"40-55 minutes",description:"Repeated threshold efforts with brief recovery",structure:"10 min warmup + 6 x 100 yards @ threshold with 15-20 sec rest + 10 min cooldown",intensity:"tempo",benefits:"Threshold efficiency, recovery management, pacing practice",technique:{focus:"Consistent stroke count per length across all intervals",breathing:"Controlled despite effort",effort:"Hard but repeatable"},workout:{warmup:"400-600 yards easy mixed with drills",main:"6-8 x 100 yards @ 85% effort with 15-20 sec rest between",cooldown:"300-400 yards easy"},effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Hard, breathing elevated, short rest keeps it honest",breathing:"Every 2-3 strokes"},coachingTips:"Short rest = never fully recovered. Classic threshold work. Monitor stroke count to ensure form holds.",runningEquivalent:"Cruise intervals (6 x 5 min tempo)"}],INTERVALS:[{name:"Sprint Intervals - 25s",duration:"35-50 minutes",description:"Short fast efforts for speed and power",structure:"10 min warmup + 12-16 x 25 yards @ 90% effort with 20-30 sec rest + 10 min cooldown",intensity:"intervals",benefits:"VO2max, speed, explosive power, anaerobic capacity",technique:{focus:"Maximum sustainable speed while maintaining technique",breathing:"Minimal during sprint (breath control)",effort:"Very hard for 25 yards"},workout:{warmup:"400-600 yards easy with speed drills",sprints:"12-16 x 25 yards @ 90% with 20-30 sec rest",cooldown:"400 yards easy"},effort:{heartRate:"Zone 5 (95%+ max HR)",perceived:"Very hard, nearly all-out for 25 yards",breathing:"Controlled, minimal breaths during sprint"},coachingTips:"25 yards is short enough to go hard. Focus on explosive speed off walls. Technique matters!",runningEquivalent:"200m sprint repeats",landEquivalent:"Simulates 12-16 x 200m sprints"},{name:"Medium Intervals - 50s",duration:"40-55 minutes",description:"Classic interval training at 50-yard distance",structure:"10 min warmup + 10-15 x 50 yards fast (80% max) with 20-30 sec rest + 10 min cooldown",intensity:"intervals",benefits:"VO2max development, speed endurance, breathing control",technique:{focus:"Fast but controlled - technique holds throughout",breathing:"Every 2-3 strokes, controlled",effort:"Hard for full 50 yards"},workout:{warmup:"600 yards (400 easy, 200 drills/build)",intervals:"10-15 x 50 yards @ 80% effort with 20-30 sec rest",cooldown:"400 yards easy"},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Hard, breathing elevated, repeatable",breathing:"Every 2-3 strokes"},coachingTips:"50 yards is perfect interval distance. Long enough to work, short enough to maintain quality.",runningEquivalent:"400m interval repeats",landEquivalent:"Simulates 10-15 x 400m on track"},{name:"100-Yard Intervals",duration:"45-60 minutes",description:"Longer intervals building VO2max endurance",structure:"10 min warmup + 8-12 x 100 yards @ 80% with 30 sec rest + 10 min cooldown",intensity:"intervals",benefits:"VO2max endurance, lactate tolerance, mental toughness",technique:{focus:"Maintain stroke efficiency throughout 100 yards",breathing:"Consistent pattern, don't panic breathe",effort:"Controlled hard effort"},workout:{warmup:"600-800 yards easy mixed with drills",intervals:"8-12 x 100 yards @ 80% effort with 30 sec rest",cooldown:"400 yards easy"},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard, requires pacing discipline",breathing:"Every 2-3 strokes, controlled"},coachingTips:"100s require pacing. Don't blow up first 25 yards. Final 25 should hurt but technique holds.",runningEquivalent:"800m interval repeats",landEquivalent:"Simulates 8-12 x 800m on track"},{name:"Descending Ladder",duration:"45-60 minutes",description:"Pyramid intervals for mental engagement",structure:"10 min warmup + [200-150-100-50-100-150-200] yards hard with 30-45 sec rest + 10 min cooldown",intensity:"intervals",benefits:"Mental engagement, varied pace practice, comprehensive speed work",technique:{focus:"Adjust effort slightly for distance - shorter = faster",breathing:"Varies with distance",effort:"Hard throughout"},workout:{warmup:"600-800 yards easy with drills",pyramid:"200-150-100-50-100-150-200 @ 80-90% effort with 30-45 sec rest",cooldown:"400-600 yards easy"},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Varies with distance, all feel hard",breathing:"Adjust with distance"},coachingTips:"Pyramid keeps mind engaged. Shorter distances allow faster swimming. Challenge yourself on the 50!",runningEquivalent:"Track pyramid workout",landEquivalent:"Simulates 800m-600m-400m-200m-400m-600m-800m pyramid"}],LONG:[{name:"Continuous Distance Swim",duration:"45-60 minutes",description:"Long continuous swim for endurance",structure:"10 min warmup/drills + 2000-3000 yards continuous varied swimming + 10 min cooldown",intensity:"long",benefits:"Aerobic capacity, mental endurance, full-body conditioning",technique:{focus:"Efficiency and patience - long swim is mental",breathing:"Bilateral for balance, consistent pattern",effort:"Moderate, sustainable"},workout:{warmup:"400-600 yards mixed with drills",main:"2000-3000 yards (vary: 500 free, 200 back, 300 free, 200 breast, repeat)",cooldown:"400 yards easy"},effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Moderate, mentally challenging in final portion",breathing:"Steady, controlled"},coachingTips:"Long swims are as much mental as physical. Break into chunks. Vary strokes to stay fresh.",runningEquivalent:"60-75 min long run"},{name:"Extended Distance Swim",duration:"60-90 minutes",description:"Very long swim for maximum aerobic development",structure:"10-15 min warmup + 3500-5000 yards continuous + 10-15 min cooldown",intensity:"long",benefits:"Maximum aerobic development, mental fortitude, comprehensive conditioning",technique:{focus:"Maintain form even when tired - count strokes to ensure efficiency",breathing:"Consistent throughout, bilateral recommended",effort:"Moderate, patient"},workout:{warmup:"600-800 yards mixed with drills",main:"3500-5000 yards (create sets: 10 x 400 with varied strokes, or continuous)",cooldown:"500-600 yards easy"},effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Comfortable early, requires mental discipline late",breathing:"Controlled, rhythmic"},coachingTips:"This is serious aerobic training. Stay patient. Focus on efficiency over speed. Mental game is key.",runningEquivalent:"90-120 min long run"},{name:"Negative Split Distance",duration:"45-60 minutes",description:"Long swim with faster second half",structure:"10 min warmup + 2000-2500 yards (first half easy, second half moderate-hard) + 10 min cooldown",intensity:"long",benefits:"Pacing practice, finishing strength, mental toughness",technique:{focus:"Start conservatively, build effort gradually",breathing:"More frequent in second half as effort increases",effort:"Building from easy to moderate-hard"},workout:{warmup:"600 yards easy with drills",main:"2000-2500 yards (first 1000-1250 @ easy, second half @ moderate-hard)",cooldown:"400 yards easy"},effort:{heartRate:"Zone 2 building to Zone 3-4",perceived:"Easy early, hard finish",breathing:"Controlled early, faster late"},coachingTips:"Negative splits teach you to pace and finish strong. Resist urge to go hard early.",runningEquivalent:"Long run with progression"}],RECOVERY:[{name:"Recovery Swim",duration:"20-30 minutes",description:"Very easy swimming for active recovery",structure:"20-30 min continuous very easy mixed strokes",intensity:"recovery",benefits:"Active recovery for running, promotes blood flow, maintains feel for water",technique:{focus:"Minimal effort, maximum relaxation",breathing:"Relaxed, no breathlessness",effort:"Very easy"},workout:{main:"800-1200 yards ultra-easy (mix freestyle, backstroke, breaststroke)"},effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Very easy, restorative",breathing:"Relaxed and comfortable"},coachingTips:"Perfect day-after-hard-workout. Legs get a break, cardio system stays engaged. Should feel refreshing.",runningEquivalent:"20-30 min recovery jog"},{name:"Extended Recovery Swim",duration:"30-40 minutes",description:"Longer gentle swim for deep recovery",structure:"30-40 min continuous very easy varied swimming",intensity:"recovery",benefits:"Extended active recovery without running impact, mental reset",technique:{focus:"Smooth, effortless strokes",breathing:"Natural, comfortable",effort:"Minimal"},workout:{main:"1200-1600 yards ultra-easy mixed strokes with emphasis on drills and technique work"},effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Extremely easy, almost meditative",breathing:"Relaxed"},coachingTips:"Great for tired runners. Water supports body weight - zero impact. Focus on technique and relaxation.",runningEquivalent:"30-40 min easy recovery run"}],TECHNIQUE:[{name:"Drill-Focused Session",duration:"30-45 minutes",description:"Technique drills for stroke improvement",structure:"Continuous 30-45 min of mixed drills and easy swimming",intensity:"easy",benefits:"Improved stroke efficiency, better body position, injury prevention",drills:["Catch-up drill (one arm at a time)","Fingertip drag (high elbow recovery)","Side-kick drill (rotation practice)","Fist swimming (feel for water)","6-kick switch (body rotation)","Sculling drills (hand position awareness)"],workout:{structure:"Rotate through 6-8 different drills, 50-100 yards each, with easy swimming between"},coachingTips:"Drills improve efficiency more than just swimming hard. Better technique = easier swimming = more sustainable training.",runningEquivalent:"Running drills and form work"}]}}getWorkoutByDuration(e,t){const n=e.toUpperCase(),r=this.workoutLibrary[n];if(!r||0===r.length)return null;let i=r[0],o=Math.abs(this.parseDuration(r[0].duration)-t);return r.forEach(e=>{const n=this.parseDuration(e.duration),r=Math.abs(n-t);r<o&&(o=r,i=e)}),i}parseDuration(e){const t=e.match(/(\d+)(?:-(\d+))?/);if(!t)return 40;const n=parseInt(t[1]);return(n+(t[2]?parseInt(t[2]):n))/2}getWorkoutsByType(e){const t=e.toUpperCase();return this.workoutLibrary[t]||[]}}const Yh=Kh;class Gh{constructor(){this.equipmentSpecs={name:"Rowing Machine (Erg)",primaryEquipment:"Concept2 Rowing Erg",description:"Full-body power-based cardio using rowing motion",accessibility:"Common in gyms, CrossFit boxes, home Concept2 machines",benefits:["Full-body cardiovascular workout","Power-based training similar to running","Low impact on running-specific joints","Builds posterior chain strength (glutes, hamstrings, back)","Excellent for maintaining fitness during injury","Teaches explosive power application"],runningConversion:{distance:"500m row \u2248 400m run (track workout equivalent)",longDistance:"2000m row \u2248 1 mile run",time:"Use time-based matching for easy/tempo work",effort:"Match heart rate zones and RPE to running"},keyMetrics:{strokeRate:"24-32 spm for steady state, 28-36 spm for intervals",pace:"Measure in time per 500m (e.g., 2:00/500m)",power:"Watts output correlates to effort level",damper:"Setting 3-5 typical for cardio work (higher = more resistance per stroke)",splitPace:"Monitor split pace (time per 500m) to gauge effort"},technique:{important:"Proper rowing technique is critical - prevents injury and maximizes efficiency",sequence:"Legs \u2192 Core \u2192 Arms on drive; Arms \u2192 Core \u2192 Legs on recovery",ratio:"Drive:Recovery should be roughly 1:2 (explosive drive, controlled recovery)",power:"70% of power from legs, 20% core, 10% arms"}},this.techniqueGuidance={catchPosition:"Shins vertical, arms straight, shoulders relaxed, core engaged",drive:"Explosive leg push \u2192 lean back with core \u2192 pull arms to lower ribs",finish:"Legs extended, lean back ~11 o'clock, handle to lower ribs, elbows past body",recovery:"Arms away \u2192 lean forward from hips \u2192 slide forward, controlled",commonMistakes:["Arms before legs (should be legs first)","Hunched back (maintain neutral spine)","Too fast recovery (should be twice as slow as drive)","Jerky motion (should be smooth and powerful)"]},this.workoutLibrary={EASY:[{name:"Easy Steady State Row",duration:"30-45 minutes",description:"Low-intensity rowing for aerobic base",structure:"30-45 min continuous at easy effort",intensity:"easy",benefits:"Aerobic base building, active recovery, full-body conditioning without impact",settings:{strokeRate:"20-24 spm (slow and controlled)",pace:"2:15-2:30 per 500m (adjust for fitness)",damper:"3-4",heartRate:"Zone 1-2 (60-75% max HR)",power:"< 70% of max watts"},technique:"Focus on smooth, controlled strokes. Long recovery, powerful drive. Ratio 1:2 (drive:recovery).",coachingTips:"Easy rowing should feel sustainable indefinitely. If breathing hard, slow down stroke rate or reduce power.",runningEquivalent:"30-45 min easy recovery run"},{name:"Moderate Steady State",duration:"45-60 minutes",description:"Sustained aerobic work at moderate effort",structure:"45-60 min continuous at conversational pace",intensity:"easy",benefits:"Aerobic development, endurance building, fat burning",settings:{strokeRate:"22-26 spm",pace:"2:05-2:20 per 500m",damper:"4-5",heartRate:"Zone 2 (65-75% max HR)",power:"65-75% of max watts"},technique:"Maintain consistent stroke rate. Focus on powerful leg drive. Keep core engaged throughout.",coachingTips:"Should feel like you could maintain this for hours. Build aerobic foundation here.",runningEquivalent:"45-60 min easy run"},{name:"Extended Steady State",duration:"60-90 minutes",description:"Long aerobic session for endurance",structure:"60-90 min continuous at easy-moderate effort",intensity:"easy",benefits:"Maximum aerobic development, mental endurance, comprehensive conditioning",settings:{strokeRate:"20-24 spm",pace:"2:10-2:25 per 500m",damper:"3-5",heartRate:"Zone 2 (65-75% max HR)",power:"60-70% of max watts"},technique:"Patience is key. Maintain form even when tired. Break mentally into 15-20 min chunks.",coachingTips:"Long rows build serious aerobic capacity. Stay patient. Hydrate throughout.",runningEquivalent:"60-75 min easy run"}],TEMPO:[{name:"Sustained Tempo Row",duration:"45-60 minutes",description:"Continuous rowing at lactate threshold",structure:"10 min easy warmup + 20-40 min @ tempo pace (2:00-2:10/500m) + 10 min easy cooldown",intensity:"tempo",benefits:"Lactate threshold development, sustained power, mental toughness",settings:{warmup:{strokeRate:20,pace:"2:20/500m"},tempo:{strokeRate:-4,pace:"1:55-2:10/500m"},cooldown:{strokeRate:-2,pace:"2:30/500m"},heartRate:"Zone 3-4 (80-90% max HR)",power:"80-90% of max watts"},effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard - can speak short sentences",strokeRate:"24-28 spm"},technique:"Strong leg drive. Maintain stroke length even under fatigue. Controlled power application.",coachingTips:"Tempo pace should be sustainable for 20-40 min. Don't start too hard.",runningEquivalent:"30-40 min tempo run"},{name:"Tempo Intervals",duration:"50-70 minutes",description:"Repeated threshold efforts with recovery",structure:"10 min warmup + 4 x 8-10 min @ tempo with 3-4 min easy recovery + 10 min cooldown",intensity:"tempo",benefits:"Threshold power, recovery management under fatigue",settings:{intervals:{strokeRate:-2,pace:"1:55-2:05/500m"},recovery:{strokeRate:20,pace:"2:25/500m"},heartRate:"Zone 3-4 during efforts",power:"85-95% max watts"},effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Hard but repeatable",strokeRate:"26-28 spm during efforts"},technique:"Each interval should feel the same. Monitor pace consistency. Recover completely during rest.",coachingTips:"Classic threshold training. Each piece should match in pace and effort.",runningEquivalent:"4 x 8 min tempo intervals"},{name:"2K Tempo Repeats",duration:"45-65 minutes",description:"Race-distance tempo work",structure:"10 min warmup + 3-4 x 2000m @ tempo effort with 5 min easy recovery + 10 min cooldown",intensity:"tempo",benefits:"Sustained power at race pace, mental toughness, pacing practice",settings:{intervals:{strokeRate:-4,pace:"1:50-2:00/500m"},recovery:{strokeRate:-2,pace:"2:30/500m"},heartRate:"Zone 3-4",power:"85-95% max watts"},effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Hard and sustained, requires pacing",strokeRate:"26-30 spm"},technique:"2000m is the Olympic rowing race distance. Pace yourself - don't blow up early.",coachingTips:"2K repeats are classic rowing threshold work. Focus on even pacing.",runningEquivalent:"Mile repeats at threshold"}],INTERVALS:[{name:"500m Repeats",duration:"45-60 minutes",description:"Classic track-style intervals",structure:"10 min warmup + 8-12 x 500m @ hard effort with 2-3 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"VO2max development, power output, speed endurance",settings:{intervals:{strokeRate:-6,pace:"1:35-1:50/500m"},recovery:{strokeRate:20,pace:"2:30/500m"},heartRate:"Zone 4-5 (90-95%+ max HR)",power:"100-120% max watts"},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard, breathing heavily",strokeRate:"30-36 spm"},technique:"Explosive leg drive. Maximum power output. Maintain stroke length despite high rate.",coachingTips:"500m is rowing's version of 400m run. Hard but manageable. Focus on power and speed.",runningEquivalent:"8-12 x 400m track repeats",landEquivalent:"Simulates 8-12 x 400m on track"},{name:"1000m Repeats",duration:"50-70 minutes",description:"Longer intervals building VO2max endurance",structure:"10 min warmup + 5-6 x 1000m @ hard effort with 3-4 min recovery + 10 min cooldown",intensity:"intervals",benefits:"VO2max endurance, lactate tolerance, mental toughness",settings:{intervals:{strokeRate:-4,pace:"1:45-1:58/500m"},recovery:{strokeRate:-2,pace:"2:30/500m"},heartRate:"Zone 4-5 (90-95% max HR)",power:"95-110% max watts"},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard and sustained, requires pacing",strokeRate:"28-32 spm"},technique:"Pacing critical - don't blow up first 500m. Maintain powerful strokes throughout.",coachingTips:"1K repeats build serious power endurance. Last 250m is mental training.",runningEquivalent:"5-6 x 1000m track repeats",landEquivalent:"Simulates 5-6 x 1000m on track"},{name:"Pyramid Intervals",duration:"55-70 minutes",description:"Varied distance intervals for engagement",structure:"10 min warmup + [250m-500m-750m-1000m-750m-500m-250m] hard with 2-4 min recovery + 10 min cooldown",intensity:"intervals",benefits:"Mental engagement, varied power output, comprehensive speed work",settings:{intervals:{strokeRate:"30-36 for short, 28-32 for long",pace:"varies by distance"},recovery:{strokeRate:20,pace:"2:30/500m",time:"2-4 min based on distance"},heartRate:"Zone 4-5",power:"100-120% max watts"},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Varies with distance, all hard",strokeRate:"Adjust for distance"},technique:"Shorter pieces = higher stroke rate and power. Longer = controlled high power.",coachingTips:"Pyramid keeps mind engaged. Challenge yourself on the 250s!",runningEquivalent:"Track pyramid workout",landEquivalent:"Simulates 200m-400m-600m-800m-600m-400m-200m"},{name:"1-Minute Max Efforts",duration:"40-55 minutes",description:"Short explosive intervals",structure:"10 min warmup + 10 x 1 min @ maximum effort with 2 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"Explosive power, anaerobic capacity, maximum watt development",settings:{intervals:{strokeRate:-8,pace:"1:25-1:40/500m",power:"maximum"},recovery:{strokeRate:18,pace:"slow",power:"minimal"},heartRate:"Zone 5 (95%+ max HR)"},effort:{heartRate:"Zone 5 (95%+ max HR)",perceived:"All-out, gasping",strokeRate:"32-40 spm - as high as controllable"},technique:"Maximum power from start. Explosive leg drive. High stroke rate but maintain form.",coachingTips:"These are brutal. Quality over quantity. If power drops significantly, stop workout.",runningEquivalent:"10 x 400m hard",landEquivalent:"Simulates hard 400m repeats"},{name:"2-Minute Power Intervals",duration:"45-60 minutes",description:"Medium intervals at high power",structure:"10 min warmup + 8 x 2 min @ very hard effort with 2-3 min recovery + 10 min cooldown",intensity:"intervals",benefits:"Power endurance, VO2max, lactate tolerance",settings:{intervals:{strokeRate:-4,pace:"1:40-1:52/500m"},recovery:{strokeRate:20,pace:"2:30/500m"},heartRate:"Zone 4-5 (90-95% max HR)",power:"105-120% max watts"},effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard, final 30 sec hurts",strokeRate:"30-34 spm"},technique:"2 minutes is long enough to build serious lactate. Maintain power output throughout.",coachingTips:"Classic VO2max work. Don't fade in final 30 seconds - finish strong.",runningEquivalent:"8 x 800m intervals",landEquivalent:"Simulates 8 x 800m on track"}],LONG:[{name:"10K Row",duration:"45-55 minutes",description:"Classic long rowing distance",structure:"10K (10,000 meters) continuous at steady effort",intensity:"long",benefits:"Aerobic capacity, mental endurance, pacing practice",settings:{strokeRate:"22-26 spm",pace:"2:05-2:15/500m (adjust for fitness)",damper:"4-5",heartRate:"Zone 2 (65-75% max HR)",power:"70-80% max watts"},effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Moderate, sustainable",strokeRate:"Steady 22-26 spm"},technique:"Pacing is everything. Even splits. Stay patient. Final 2K can be slightly faster.",coachingTips:"10K is classic rowing endurance distance. Break into 2K chunks mentally. Monitor your split pace.",runningEquivalent:"10-12 mile long run"},{name:"Half Marathon Row",duration:"75-95 minutes",description:"Extended endurance row (21,097 meters)",structure:"Half marathon distance (21,097m) at steady moderate effort",intensity:"long",benefits:"Maximum aerobic development, mental fortitude, glycogen management",settings:{strokeRate:"20-24 spm",pace:"2:08-2:18/500m",damper:"3-5",heartRate:"Zone 2 (65-75% max HR)",power:"65-75% max watts"},effort:{heartRate:"Zone 2 (65-75% max HR)",perceived:"Moderate, becomes challenging late",strokeRate:"Consistent 20-24 spm"},technique:"Ultra-patient pacing. Fuel every 30-45 min. Stay mentally engaged by breaking into 5K segments.",coachingTips:"This is serious endurance work. Bring water and fuel. Mental game is critical.",runningEquivalent:"Half marathon distance run"},{name:"Progressive 8K",duration:"35-45 minutes",description:"8K row with building effort",structure:"8000m with progressive effort: first 4K easy, next 2K moderate, final 2K hard",intensity:"long",benefits:"Negative split practice, finishing power, race simulation",settings:{first4K:{strokeRate:22,pace:"2:15/500m"},middle2K:{strokeRate:24,pace:"2:05/500m"},final2K:{strokeRate:-2,pace:"1:55/500m"}},effort:{heartRate:"Zone 2 building to Zone 4",perceived:"Easy early, hard finish",strokeRate:"Building throughout"},technique:"Start conservatively. Build power and rate gradually. Final 2K should feel like racing.",coachingTips:"Teaches you to negative split and finish strong. Resist urge to go hard early.",runningEquivalent:"Long run with progression"}],POWER:[{name:"Power Strokes",duration:"40-55 minutes",description:"Maximum power output for brief periods",structure:"10 min warmup + 10-12 x 10 strokes @ maximum power with 2 min easy recovery + 10 min cooldown",intensity:"power",benefits:"Explosive power, neuromuscular development, maximum watt production",settings:{strokes:{strokeRate:"maximum controllable",pace:"sub-1:20/500m",power:"absolute max"},recovery:{strokeRate:18,pace:"easy",duration:"2 min"}},effort:{heartRate:"Spikes to Zone 5 briefly",perceived:"All-out maximum effort for 10 strokes",strokeRate:"Maximum while maintaining form"},technique:"Explosive from first stroke. Maximum leg drive. Form must hold - if technique breaks, stop.",coachingTips:"These build explosive power that transfers to running. Quality is everything - full recovery between sets.",runningEquivalent:"Sprint drills, explosive power work"},{name:"30-Second Power Bursts",duration:"40-55 minutes",description:"Short maximum efforts",structure:"10 min warmup + 8-10 x 30 sec @ max effort with 3 min recovery + 10 min cooldown",intensity:"power",benefits:"Anaerobic power, explosive strength, running-specific power transfer",settings:{bursts:{strokeRate:-8,pace:"1:15-1:30/500m",power:"maximum"},recovery:{strokeRate:-2,pace:"easy"}},effort:{heartRate:"Zone 5 (95%+ max HR)",perceived:"Maximum sustainable effort for 30 sec",strokeRate:"Very high, controlled"},technique:"All-out from start. Maximum power production. Long recovery allows quality.",coachingTips:"30 seconds is long enough to really work anaerobic system. Push through the burn.",runningEquivalent:"200m sprint repeats"}],RECOVERY:[{name:"Recovery Row",duration:"20-30 minutes",description:"Very easy rowing for active recovery",structure:"20-30 min continuous at minimal effort",intensity:"recovery",benefits:"Blood flow without stress, active recovery, maintains movement patterns",settings:{strokeRate:"16-20 spm (very slow)",pace:"2:30-2:45/500m",damper:"3",heartRate:"Zone 1 (60-70% max HR)",power:"< 60% max watts"},effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Very easy, restorative",strokeRate:"Slow and controlled"},technique:"Minimal effort. Focus on perfect form. This should feel easy.",coachingTips:"If this feels hard, you need complete rest. Goal is recovery, not fitness.",runningEquivalent:"20-30 min recovery jog"},{name:"Extended Recovery Row",duration:"30-40 minutes",description:"Longer gentle row for deep recovery",structure:"30-40 min continuous very easy rowing",intensity:"recovery",benefits:"Extended active recovery, full-body movement without impact",settings:{strokeRate:"18-22 spm",pace:"2:25-2:40/500m",damper:"3-4",heartRate:"Zone 1 (60-70% max HR)"},effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Extremely easy",strokeRate:"Relaxed and natural"},technique:"Smooth, effortless strokes. Focus on technique perfection.",coachingTips:"Perfect for day-after-hard-workout. Promotes recovery while maintaining fitness.",runningEquivalent:"30-40 min easy recovery run"}]}}getWorkoutByDuration(e,t){const n=e.toUpperCase(),r=this.workoutLibrary[n];if(!r||0===r.length)return null;let i=r[0],o=Math.abs(this.parseDuration(r[0].duration)-t);return r.forEach(e=>{const n=this.parseDuration(e.duration),r=Math.abs(n-t);r<o&&(o=r,i=e)}),i}parseDuration(e){const t=e.match(/(\d+)(?:-(\d+))?/);if(!t)return 50;const n=parseInt(t[1]);return(n+(t[2]?parseInt(t[2]):n))/2}getWorkoutsByType(e){const t=e.toUpperCase();return this.workoutLibrary[t]||[]}}const Qh=Gh;const Zh=class{constructor(){this.transitionGuidelines={quick:{time:"30-60 seconds",description:"Simulate race conditions"},standard:{time:"60-90 seconds",description:"Equipment change + brief recovery"},recovery:{time:"2-3 minutes",description:"Hydration + equipment adjustment"},full:{time:"5+ minutes",description:"Complete recovery between segments"}},this.equipmentTransitions={cyclete:{setup:"30-45 seconds",notes:"Quick height adjustment, similar running position",advantages:"Minimal setup, running-like feel"},elliptigo:{setup:"60-90 seconds",notes:"Stride adjustment, gear selection",advantages:"Full body engagement after running"}},this.brickWorkouts={aerobic:[{name:"Base Building Brick",totalDuration:"60-90 minutes",difficulty:"beginner",runeqRatio:"moderate",structure:[{type:"run",duration:"20 min",intensity:"easy",description:"Easy warm-up run"},{type:"transition",duration:"90 sec",activity:"equipment change"},{type:"bike",duration:"30 min",intensity:"easy",description:"Steady aerobic effort"},{type:"transition",duration:"90 sec",activity:"equipment change"},{type:"run",duration:"15 min",intensity:"easy",description:"Easy finish run"}],purpose:"Develop aerobic fitness with equipment familiarity"},{name:"Long Aerobic Brick",totalDuration:"90-120 minutes",difficulty:"intermediate",runeqRatio:"balanced",structure:[{type:"run",duration:"30 min",intensity:"easy",description:"Extended warm-up"},{type:"transition",duration:"2 min",activity:"hydration + equipment"},{type:"bike",duration:"45 min",intensity:"easy",description:"Sustained aerobic effort"},{type:"transition",duration:"2 min",activity:"hydration + equipment"},{type:"run",duration:"20 min",intensity:"easy",description:"Finish strong"}],purpose:"Extended aerobic development, mental toughness"}],tempo:[{name:"Alternating Tempo Brick",totalDuration:"45-60 minutes",difficulty:"intermediate",runeqRatio:"run-focused",structure:[{type:"run",duration:"15 min",intensity:"easy",description:"Warm-up"},{type:"run",duration:"10 min",intensity:"tempo",description:"Threshold effort"},{type:"transition",duration:"60 sec",activity:"quick change"},{type:"bike",duration:"15 min",intensity:"tempo",description:"Maintain threshold"},{type:"transition",duration:"60 sec",activity:"quick change"},{type:"run",duration:"8 min",intensity:"tempo",description:"Final threshold"},{type:"run",duration:"10 min",intensity:"easy",description:"Cool down"}],purpose:"Lactate threshold development with equipment variety"},{name:"Sandwich Tempo Brick",totalDuration:"50-65 minutes",difficulty:"advanced",runeqRatio:"balanced",structure:[{type:"run",duration:"12 min",intensity:"easy",description:"Warm-up"},{type:"bike",duration:"20 min",intensity:"tempo",description:"Strong tempo effort"},{type:"transition",duration:"90 sec",activity:"equipment change"},{type:"run",duration:"15 min",intensity:"tempo",description:"Run off the bike"},{type:"run",duration:"12 min",intensity:"easy",description:"Cool down"}],purpose:"Practice running after hard bike effort"}],speed:[{name:"Speed Transition Brick",totalDuration:"35-45 minutes",difficulty:"advanced",runeqRatio:"balanced",structure:[{type:"run",duration:"15 min",intensity:"easy",description:"Warm-up with strides"},{type:"intervals",description:"4x (2min run hard + 45sec transition + 2min bike hard + 45sec transition)",recovery:"2 min easy run between sets"},{type:"run",duration:"10 min",intensity:"easy",description:"Cool down"}],purpose:"Speed endurance, equipment mastery"}],recovery:[{name:"Active Recovery Brick",totalDuration:"30-45 minutes",difficulty:"recovery",runeqRatio:"balanced",structure:[{type:"run",duration:"10 min",intensity:"easy",description:"Gentle start"},{type:"transition",duration:"2 min",activity:"relaxed change"},{type:"bike",duration:"15 min",intensity:"recovery",description:"Very easy spinning"},{type:"transition",duration:"2 min",activity:"relaxed change"},{type:"run",duration:"10 min",intensity:"easy",description:"Easy finish"}],purpose:"Active recovery, movement variety"}]}}getBrickWorkoutTypes(){return Object.keys(this.brickWorkouts)}getBrickWorkoutsByType(e){return this.brickWorkouts[e]||[]}generateBrickWorkout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{type:t="aerobic",difficulty:n="intermediate",equipment:r="cyclete"}=e,i=this.brickWorkouts[t]||this.brickWorkouts.aerobic;let o=i;"any"!==n&&(o=i.filter(e=>e.difficulty===n||"any"===e.difficulty),0===o.length&&(o=i));const a=o[Math.floor(Math.random()*o.length)];return this.formatBrickWorkoutForUI(a,r)}formatBrickWorkoutForUI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cyclete";return(0,u.A)((0,u.A)({},e),{},{type:"brick",category:"Brick Workout",runeqFeatures:{equipmentUsed:t,transitionPractice:!0,uniqueFeature:"\ud83e\uddf1 Run+Bike Combination",alternatives:this.getBrickAlternatives(e)},equipmentNotes:this.equipmentTransitions[t]||this.equipmentTransitions.cyclete,safetyNotes:["Practice transitions in training before using in workouts","Stay hydrated during equipment changes","Start with longer transition times, speed up as you improve","Listen to your body - brick workouts are demanding"],paceGuidance:{easy:"Conversational pace, 65-75% max HR",tempo:"Comfortably hard, 85-90% max HR",hard:"Hard effort, 90-95% max HR",recovery:"Very easy, 60-70% max HR"}})}getBrickAlternatives(e){return[{category:"\ud83c\udf21\ufe0f Weather Alternatives",options:[{name:"Hot Weather Adaptation",description:"Extend transition times for hydration and cooling",intensity:e.difficulty},{name:"Cold Weather Adaptation",description:"Minimize transition time to maintain body temperature",intensity:e.difficulty}]},{category:"\u26a1 Equipment Alternatives",options:[{name:"No Bike Available",description:"Replace bike segments with hill running at equivalent effort",intensity:e.difficulty},{name:"No Transitions",description:"Combine segments into continuous workout",intensity:e.difficulty},{name:"Indoor Alternative",description:"Use treadmill incline to simulate bike resistance",intensity:e.difficulty}]},{category:"\u2b07\ufe0f Make It Easier",options:[{name:"Extended Recovery Brick",description:"Longer transition times, lower intensity",intensity:"recovery"},{name:"Single Transition Brick",description:"Just one run\u2192bike or bike\u2192run transition",intensity:"easy"}]},{category:"\u2b06\ufe0f Make It Harder",options:[{name:"Quick Transition Brick",description:"Minimize transition times, race-like pace",intensity:"hard"},{name:"Multi-Transition Brick",description:"Add more run\u2194bike switches throughout workout",intensity:"advanced"}]}]}getRandomBrickWorkout(){const e=this.getBrickWorkoutTypes(),t=e[Math.floor(Math.random()*e.length)];return this.generateBrickWorkout({type:t})}isBrickWorkout(e){var t;return"brick"===(null===e||void 0===e?void 0:e.type)||"Brick Workout"===(null===e||void 0===e?void 0:e.category)||(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes("brick"))}formatBrickStructure(e){return e.map((e,t)=>({step:t+1,type:e.type,duration:e.duration||e.description,intensity:e.intensity||"standard",description:e.description||e.activity,isTransition:"transition"===e.type}))}};const Xh=function(e){var t,n,r;let{isOpen:i,onClose:o,currentWorkout:s,userProfile:l,trainingPlan:c,onWorkoutSelect:d,weather:h=null,mode:p="replace"}=e;const[m,f]=(0,a.useState)(null),[g,y]=(0,a.useState)(null),v=new ze,b=new Ue,w=new qe,D=new He,k=new Lh,x=new Zh,E=new Wh,S=new Uh,C=new Hh,A=new Kh,T=new Gh,F=(null===c||void 0===c?void 0:c.trainingPaces)||null,R=(null===c||void 0===c?void 0:c.trackIntervals)||null,_=(null===c||void 0===c?void 0:c.currentWeek)||(null===c||void 0===c||null===(t=c.planOverview)||void 0===t?void 0:t.currentWeek)||null,I=(null===c||void 0===c||null===(n=c.planOverview)||void 0===n?void 0:n.totalWeeks)||(null===c||void 0===c||null===(r=c.weeks)||void 0===r?void 0:r.length)||null;if(!i||!s)return null;const P=()=>{const e=[];return e.push({id:"light-easy",title:"\ud83d\ude0c Light & Easy",subtitle:"Gentle movement that won't interfere with recovery",icon:"\ud83c\udf31",workouts:q()}),e.push({id:"active-recovery",title:"\ud83d\udd04 Active Recovery",subtitle:"Movement that actually helps recovery",icon:"\u267b\ufe0f",workouts:U()}),l.standUpBikeType&&e.push({id:"equipment-easy",title:"\ud83d\udeb4\u200d\u2642\ufe0f Easy ".concat($s(l.standUpBikeType)),subtitle:"Low-impact equipment workout",icon:"\u26a1",workouts:z()}),e.push({id:"cross-training",title:"\ud83c\udfca\u200d\u2642\ufe0f Cross-Training",subtitle:"Non-running activities for variety",icon:"\ud83c\udfaf",workouts:H()}),e.push({id:"short-sweet",title:"\u23f0 Short & Sweet",subtitle:"15-30 minutes max - just enough to move",icon:"\u26a1",workouts:V()}),e},M=()=>{const e=[],t=(null===l||void 0===l?void 0:l.crossTrainingEquipment)||{},n=Object.values(t).some(Boolean);return e.push({id:"just-rest",title:"\ud83d\udecc Just Rest",subtitle:"Take the day off completely - recovery is training too",icon:"\ud83d\ude34",workouts:[{name:"Complete Rest",description:"No activity today - let your body recover and adapt",duration:"Full day",intensity:"Rest",reason:"prioritize recovery",benefits:"Physical and mental recovery, injury prevention"}]}),t.pool&&e.push({id:"pool-xt",title:"\ud83c\udfca Pool Running",subtitle:"Zero impact, running-specific fitness",icon:"\ud83c\udf0a",workouts:N()}),t.elliptical&&e.push({id:"elliptical-xt",title:"\ud83c\udfc3 Elliptical",subtitle:"Low impact cardio machine",icon:"\u26a1",workouts:j()}),t.stationaryBike&&e.push({id:"stationary-bike-xt",title:"\ud83d\udeb4 Stationary Bike",subtitle:"Spin bike, Peloton, or indoor trainer",icon:"\ud83d\udd25",workouts:B()}),t.swimming&&e.push({id:"swimming-xt",title:"\ud83c\udfca Lap Swimming",subtitle:"Full body, zero impact workout",icon:"\ud83d\udca7",workouts:O()}),t.rowing&&e.push({id:"rowing-xt",title:"\ud83d\udea3 Rowing Machine",subtitle:"Full body power and cardio",icon:"\ud83d\udcaa",workouts:L()}),null!==l&&void 0!==l&&l.standUpBikeType&&e.push({id:"standup-bike-xt",title:"\ud83d\udeb4 ".concat($s(l.standUpBikeType)),subtitle:"Running-specific cross-training",icon:"\u26a1",workouts:W()}),n||null!==l&&void 0!==l&&l.standUpBikeType||e.push({id:"light-activity",title:"\ud83d\udeb6 Light Activity",subtitle:"No equipment needed",icon:"\ud83c\udf31",workouts:q()}),e},N=()=>{try{var e,t;const n=[],r=(null===(e=E.getWorkoutsByIntensity)||void 0===e?void 0:e.call(E,"easy"))||[],i=(null===(t=E.getWorkoutsByIntensity)||void 0===t?void 0:t.call(E,"moderate"))||[];return r.slice(0,2).forEach(e=>{n.push({name:e.name,description:e.description||e.structure||"Easy pool running",duration:e.duration||"30-40 minutes",intensity:"Easy",reason:"zero impact recovery",benefits:"Maintains running fitness without impact stress",equipmentType:"pool",sourceWorkout:e})}),i.slice(0,2).forEach(e=>{n.push({name:e.name,description:e.description||e.structure||"Moderate pool running",duration:e.duration||"35-45 minutes",intensity:"Moderate",reason:"aerobic maintenance",benefits:"Running-specific aerobic development",equipmentType:"pool",sourceWorkout:e})}),n.length>0?n:[{name:"Pool Running Session",description:"Deep water running with flotation belt - running motion without impact",duration:"30-45 minutes",intensity:"Easy to Moderate",reason:"zero impact",benefits:"Maintains running-specific fitness",equipmentType:"pool"}]}catch(wy){return[{name:"Pool Running Session",description:"Deep water running with flotation belt",duration:"30-45 minutes",intensity:"Easy to Moderate",reason:"zero impact",benefits:"Maintains running fitness",equipmentType:"pool"}]}},j=()=>{try{var e,t;const n=[],r=(null===(e=S.getWorkoutsByIntensity)||void 0===e?void 0:e.call(S,"easy"))||[],i=(null===(t=S.getWorkoutsByIntensity)||void 0===t?void 0:t.call(S,"moderate"))||[];return r.slice(0,2).forEach(e=>{n.push({name:e.name,description:e.description||e.structure||"Easy elliptical session",duration:e.duration||"30-40 minutes",intensity:"Easy",reason:"low impact cardio",benefits:"Cardio maintenance without joint stress",equipmentType:"elliptical",sourceWorkout:e})}),i.slice(0,2).forEach(e=>{n.push({name:e.name,description:e.description||e.structure||"Moderate elliptical workout",duration:e.duration||"35-45 minutes",intensity:"Moderate",reason:"aerobic development",benefits:"Aerobic fitness with minimal impact",equipmentType:"elliptical",sourceWorkout:e})}),n.length>0?n:[{name:"Elliptical Session",description:"Steady effort on elliptical - similar motion to running",duration:"30-45 minutes",intensity:"Easy to Moderate",reason:"gym alternative",benefits:"Low impact cardio maintenance",equipmentType:"elliptical"}]}catch(wy){return[{name:"Elliptical Session",description:"Steady effort on elliptical",duration:"30-45 minutes",intensity:"Easy to Moderate",reason:"gym alternative",benefits:"Low impact cardio",equipmentType:"elliptical"}]}},B=()=>{try{var e,t;const n=[],r=(null===(e=C.getWorkoutsByIntensity)||void 0===e?void 0:e.call(C,"easy"))||[],i=(null===(t=C.getWorkoutsByIntensity)||void 0===t?void 0:t.call(C,"moderate"))||[];return r.slice(0,2).forEach(e=>{n.push({name:e.name,description:e.description||e.structure||"Easy spin session",duration:e.duration||"30-40 minutes",intensity:"Easy",reason:"active recovery",benefits:"Leg turnover without running impact",equipmentType:"stationaryBike",sourceWorkout:e})}),i.slice(0,2).forEach(e=>{n.push({name:e.name,description:e.description||e.structure||"Moderate bike workout",duration:e.duration||"35-45 minutes",intensity:"Moderate",reason:"aerobic maintenance",benefits:"Aerobic development without impact",equipmentType:"stationaryBike",sourceWorkout:e})}),n.length>0?n:[{name:"Stationary Bike Session",description:"Spin session for aerobic development",duration:"30-45 minutes",intensity:"Easy to Moderate",reason:"cardio alternative",benefits:"Aerobic fitness maintenance",equipmentType:"stationaryBike"}]}catch(wy){return[{name:"Stationary Bike Session",description:"Spin session for aerobic development",duration:"30-45 minutes",intensity:"Easy to Moderate",reason:"cardio alternative",benefits:"Aerobic fitness maintenance",equipmentType:"stationaryBike"}]}},O=()=>{try{var e,t;const n=[],r=(null===(e=A.getWorkoutsByIntensity)||void 0===e?void 0:e.call(A,"easy"))||[],i=(null===(t=A.getWorkoutsByIntensity)||void 0===t?void 0:t.call(A,"moderate"))||[];return r.slice(0,2).forEach(e=>{n.push({name:e.name,description:e.description||e.structure||"Easy lap swimming",duration:e.duration||"30-40 minutes",intensity:"Easy",reason:"full body recovery",benefits:"Complete body workout with zero impact",equipmentType:"swimming",sourceWorkout:e})}),i.slice(0,2).forEach(e=>{n.push({name:e.name,description:e.description||e.structure||"Moderate swimming workout",duration:e.duration||"35-45 minutes",intensity:"Moderate",reason:"aerobic cross-training",benefits:"Full body cardio conditioning",equipmentType:"swimming",sourceWorkout:e})}),n.length>0?n:[{name:"Lap Swimming",description:"Continuous lap swimming for full body conditioning",duration:"30-45 minutes",intensity:"Easy to Moderate",reason:"full body workout",benefits:"Complete body conditioning",equipmentType:"swimming"}]}catch(wy){return[{name:"Lap Swimming",description:"Continuous lap swimming",duration:"30-45 minutes",intensity:"Easy to Moderate",reason:"full body workout",benefits:"Complete body conditioning",equipmentType:"swimming"}]}},L=()=>{try{var e,t;const n=[],r=(null===(e=T.getWorkoutsByIntensity)||void 0===e?void 0:e.call(T,"easy"))||[],i=(null===(t=T.getWorkoutsByIntensity)||void 0===t?void 0:t.call(T,"moderate"))||[];return r.slice(0,2).forEach(e=>{n.push({name:e.name,description:e.description||e.structure||"Easy rowing session",duration:e.duration||"25-35 minutes",intensity:"Easy",reason:"posterior chain focus",benefits:"Posterior chain development without impact",equipmentType:"rowing",sourceWorkout:e})}),i.slice(0,2).forEach(e=>{n.push({name:e.name,description:e.description||e.structure||"Moderate rowing workout",duration:e.duration||"30-40 minutes",intensity:"Moderate",reason:"full body power",benefits:"Full body power and cardio development",equipmentType:"rowing",sourceWorkout:e})}),n.length>0?n:[{name:"Rowing Session",description:"Rowing machine workout for full body conditioning",duration:"25-40 minutes",intensity:"Easy to Moderate",reason:"full body alternative",benefits:"Posterior chain and cardio development",equipmentType:"rowing"}]}catch(wy){return[{name:"Rowing Session",description:"Rowing machine workout",duration:"25-40 minutes",intensity:"Easy to Moderate",reason:"full body alternative",benefits:"Posterior chain and cardio",equipmentType:"rowing"}]}},W=()=>{const e=[],t=k.workoutLibrary.LONG_ENDURANCE_RIDES||[],n=k.workoutLibrary.TEMPO_BIKE||[];return t.slice(0,2).forEach(t=>{e.push((0,u.A)((0,u.A)({},t),{},{type:"bike",library:"bike",equipment:l.standUpBikeType,equipmentSpecific:!0,reason:"running-specific cross-training",benefits:"cyclete"===l.standUpBikeType?"Quad-dominant workout - high running specificity":"Glute + full-body workout - excellent for recovery"}))}),n.length>0&&e.push((0,u.A)((0,u.A)({},n[0]),{},{type:"bike",library:"bike",equipment:l.standUpBikeType,equipmentSpecific:!0,reason:"aerobic development",benefits:"Lactate threshold development without running impact"})),e.length>0?e:[{name:"Easy ".concat($s(l.standUpBikeType)," Ride"),description:"Light 30-minute ride at conversational effort",duration:"30 minutes",intensity:"Easy",equipment:$s(l.standUpBikeType),reason:"running-specific",benefits:"Aerobic maintenance with running-similar motion"}]},q=()=>[{name:"Easy 20-Minute Jog",description:"Very light conversational pace - just shake out the legs",duration:"20 minutes",intensity:"Very Easy",reason:"feeling energetic",benefits:"Promotes blood flow and maintains routine"},{name:"Walk-Run Intervals",description:"1 min easy jog, 2 min walk - perfect rest day movement",duration:"25-30 minutes",intensity:"Recovery",reason:"want light movement",benefits:"Active recovery without stress"},{name:"Easy Mile",description:"Just one easy mile to keep the legs moving",duration:"8-12 minutes",intensity:"Very Easy",reason:"minimal time commitment",benefits:"Maintains routine without fatigue"}],U=()=>[{name:"Dynamic Stretching Session",description:"20 minutes of movement-based stretches and mobility work",duration:"20 minutes",intensity:"Recovery",reason:"improve flexibility",benefits:"Enhances recovery and prevents injury"},{name:"Yoga Flow",description:"Gentle yoga focused on hip flexibility and core strength",duration:"25-30 minutes",intensity:"Recovery",reason:"mental relaxation",benefits:"Flexibility, balance, and mental clarity"},{name:"Foam Rolling + Light Movement",description:"15 min foam rolling + 10 min easy walking",duration:"25 minutes",intensity:"Recovery",reason:"muscle maintenance",benefits:"Improves tissue quality and circulation"}],z=()=>[{name:"Easy ".concat($s(l.standUpBikeType)," Spin"),description:"Light 30-minute ride at conversational effort",duration:"30 minutes",intensity:"Easy",equipment:$s(l.standUpBikeType),reason:"low impact variety",benefits:"Aerobic maintenance without running impact"},{name:"Recovery ".concat($s(l.standUpBikeType)," Ride"),description:"Very easy 20-minute ride focusing on leg turnover",duration:"20 minutes",intensity:"Recovery",equipment:$s(l.standUpBikeType),reason:"active recovery",benefits:"Promotes blood flow and recovery"}],H=()=>{const e=[],t=(null===l||void 0===l?void 0:l.crossTrainingEquipment)||{};return t.pool&&e.push({name:"Pool Running (Easy)",description:"25-30 minutes easy aqua jogging - zero impact recovery",duration:"25-30 minutes",intensity:"Easy",reason:"zero impact, running-specific",benefits:"Running fitness without impact stress"}),t.swimming&&e.push({name:"Swimming (Easy)",description:"20-30 minutes easy swimming - excellent for recovery",duration:"20-30 minutes",intensity:"Easy",reason:"full body, zero impact",benefits:"Complete body workout with minimal stress"}),t.elliptical&&e.push({name:"Elliptical Easy",description:"25 minutes easy effort on elliptical machine",duration:"25 minutes",intensity:"Easy",reason:"low impact cardio",benefits:"Cardio maintenance without impact"}),t.stationaryBike&&e.push({name:"Easy Spin",description:"25-30 minutes easy spinning - legs moving without stress",duration:"25-30 minutes",intensity:"Easy",reason:"active recovery",benefits:"Leg turnover without running impact"}),t.rowing&&e.push({name:"Easy Rowing",description:"20-25 minutes easy rowing - posterior chain focus",duration:"20-25 minutes",intensity:"Easy",reason:"full body, low impact",benefits:"Posterior chain development"}),e.push({name:"Strength Training (Light)",description:"Light strength work focusing on running-specific muscles",duration:"30-40 minutes",intensity:"Light",reason:"strength maintenance",benefits:"Maintains strength without fatigue"}),e},V=()=>[{name:"15-Minute Walk",description:"Brisk walk around the neighborhood - minimal time commitment",duration:"15 minutes",intensity:"Very Easy",reason:"time constraint",benefits:"Mental break and light movement"},{name:"10-Minute Core Work",description:"Quick core strengthening session - runner-specific exercises",duration:"10 minutes",intensity:"Light",reason:"minimal time",benefits:"Core strength for better running"},{name:"5-Minute Stretch",description:"Quick targeted stretching for tight spots",duration:"5 minutes",intensity:"Recovery",reason:"very minimal time",benefits:"Maintains flexibility"}],K=()=>{const e=[],t=(null===l||void 0===l?void 0:l.crossTrainingEquipment)||{},n=s.type;let r="EASY",i="Moderate";"tempo"===n?(r="TEMPO",i="Tempo"):"intervals"===n?(r="INTERVALS",i="Intervals"):"hills"===n?(r="TEMPO",i="Hard"):"longRun"===n?(r="EASY",i="Endurance"):"easy"===n&&(r="EASY",i="Easy");const o=(t,o,a,s)=>{try{const l=t.workoutLibrary||{};let c=l[r]||[];0===c.length&&(c=l.EASY||[]),0===c.length&&(c=l.TEMPO||[]),c.slice(0,2).forEach(t=>{const r=t.structure?We(t.structure,_,I):t.structure;e.push({name:"".concat(o," ").concat(t.name),description:t.description||r||"".concat(s," workout"),duration:t.duration||"30-45 minutes",intensity:t.intensity||i,reason:"matches ".concat(n," intensity"),benefits:t.benefits||"Same training stimulus without running impact",equipmentType:a,sourceWorkout:(0,u.A)((0,u.A)({},t),{},{structure:r})})})}catch(wy){e.push({name:"".concat(o," ").concat(s," ").concat(i),description:"".concat(i," effort ").concat(s.toLowerCase()," session"),duration:"30-45 minutes",intensity:i,reason:"matches ".concat(n," intensity"),benefits:"Cross-training at equivalent effort",equipmentType:a})}};return t.pool&&o(E,"\ud83c\udfca","pool","Pool Running"),t.elliptical&&o(S,"\ud83c\udfc3","elliptical","Elliptical"),t.stationaryBike&&o(C,"\ud83d\udeb4","stationaryBike","Stationary Bike"),t.swimming&&o(A,"\ud83c\udfca","swimming","Swimming"),t.rowing&&o(T,"\ud83d\udea3","rowing","Rowing"),0===e.length&&(o(E,"\ud83c\udfca","pool","Pool Running"),o(T,"\ud83d\udea3","rowing","Rowing"),o(S,"\ud83c\udfc3","elliptical","Elliptical")),e},Y=(e,t,n)=>{var r;const i=(null===(r={tempo:{TRADITIONAL_TEMPO:"Sustained lactate threshold effort - builds race pace endurance",ALTERNATING_TEMPO:"Varied tempo segments - teaches pace changes and mental toughness",PROGRESSIVE_TEMPO:"Building tempo effort - develops pacing skills and confidence"},interval:{SHORT_SPEED:"Quick speed bursts - develops neuromuscular power and turnover",VO2_MAX:"Hard aerobic intervals - builds maximum oxygen uptake and speed",LONG_INTERVALS:"Extended speed work - race pace practice with recovery"},hill:{short_power:"Power hill repeats - builds leg strength and running power",long_strength:"Endurance hill training - develops climbing stamina and mental toughness",hill_circuits:"Mixed hill workout - combines power, strength, and endurance"},longRun:{TRADITIONAL_EASY:"Steady aerobic run - builds endurance base and fat adaptation",PROGRESSIVE_RUNS:"Building effort long run - develops race-day pacing skills",MIXED_PACE_LONG:"Mixed pace long run - practices energy system transitions"},brick:{aerobic:"Run+bike endurance combo - builds aerobic fitness with variety",tempo:"Run+bike threshold workout - lactate threshold with equipment changes",speed:"Run+bike intervals - develops speed with transition practice",recovery:"Easy run+bike combo - active recovery with movement variety"}}[t])||void 0===r?void 0:r[n])||e.description;return(0,u.A)((0,u.A)({},e),{},{description:i,originalDescription:e.description,category:n,library:t})},G=()=>{var e;const t=[];switch(s.type){case"tempo":["TRADITIONAL_TEMPO","ALTERNATING_TEMPO","PROGRESSIVE_TEMPO"].forEach(e=>{try{var n;const r=v.getRandomWorkout(e);if(r&&r.name!==(null===(n=s.workout)||void 0===n?void 0:n.name)){const n=v.prescribeTempoWorkout(r.name,{runEqPreference:(null===l||void 0===l?void 0:l.runEqPreference)||0,paces:F,weekNumber:_,totalWeeks:I});t.push(Y(n,"tempo",e))}}catch(wy){console.warn("Failed to get tempo workout from ".concat(e,":"),wy.message)}});break;case"intervals":["SHORT_SPEED","VO2_MAX","LONG_INTERVALS"].forEach(e=>{try{var n;const r=b.getRandomWorkout(e);if(r&&r.name!==(null===(n=s.workout)||void 0===n?void 0:n.name)){const n=b.prescribeIntervalWorkout(r.name,{runEqPreference:(null===l||void 0===l?void 0:l.runEqPreference)||0,paces:F,trackIntervals:R});t.push(Y(n,"interval",e))}}catch(wy){console.warn("Failed to get interval workout from ".concat(e,":"),wy.message)}});break;case"hills":["short_power","long_strength","hill_circuits"].forEach(e=>{try{var n;const r=w.getRandomWorkout(e);if(r&&r.name!==(null===(n=s.workout)||void 0===n?void 0:n.name)){const n=w.prescribeHillWorkout(r.name,{runEqPreference:(null===l||void 0===l?void 0:l.runEqPreference)||0,paces:F});t.push(Y(n,"hill",e))}}catch(wy){console.warn("Failed to get hill workout from ".concat(e,":"),wy.message)}});break;case"longRun":const n=ee((null===(e=s.workout)||void 0===e?void 0:e.name)||"")||ee(s.name||"")||8;["TRADITIONAL_EASY","PROGRESSIVE_RUNS","MIXED_PACE_LONG"].forEach(e=>{try{var r;const i=D.getRandomWorkout(e);if(i&&i.name!==(null===(r=s.workout)||void 0===r?void 0:r.name)){const r=D.prescribeLongRunWorkout(i.name,{runEqPreference:(null===l||void 0===l?void 0:l.runEqPreference)||0,distance:n,paces:F});t.push(Y(r,"longRun",e))}}catch(wy){console.warn("Failed to get long run workout from ".concat(e,":"),wy.message)}});break;case"brick":["aerobic","tempo","speed","recovery"].forEach(e=>{var n;const r=x.generateBrickWorkout({type:e,equipment:l.standUpBikeType||"cyclete",difficulty:"intermediate"});r&&r.name!==(null===(n=s.workout)||void 0===n?void 0:n.name)&&t.push(Y(r,"brick",e))});break;default:t.push({name:"Conversational Run",description:"Easy pace, focus on breathing and form",duration:"30-45 minutes",library:"easy"})}return t.slice(0,6)},Q=()=>[{name:"Easy Recovery Run",description:"Very easy pace, active recovery focus",duration:"20-30 minutes",intensity:"Recovery"},{name:"Walk-Run Intervals",description:"2 min run, 1 min walk intervals",duration:"30 minutes",intensity:"Easy"},{name:"Yoga Flow",description:"Active recovery with stretching",duration:"20-30 minutes",intensity:"Recovery"}],Z=()=>{const e=[];if("easy"===s.type||"tempo"===s.type){const t=b.getRandomWorkout("SHORT_SPEED");if(t){const n=b.prescribeIntervalWorkout(t.name,{runEqPreference:(null===l||void 0===l?void 0:l.runEqPreference)||0,paces:F,trackIntervals:R});e.push(Y(n,"interval","SHORT_SPEED"))}}if("hills"!==s.type){const t=w.getRandomWorkout("short_power");if(t){const n=w.prescribeHillWorkout(t.name,{runEqPreference:(null===l||void 0===l?void 0:l.runEqPreference)||0,paces:F});e.push(Y(n,"hill","short_power"))}}return e.push({name:"Fartlek Run",description:"Playful speed play - develops speed and mental toughness with varied surges",duration:"30-40 minutes",intensity:"Moderate-Hard"}),e.push({name:"Progressive Run",description:"Building effort run - starts easy, finishes strong, develops pacing control",duration:"35-45 minutes",intensity:"Easy to Hard"}),e.filter(Boolean).slice(0,4)},X=()=>{const e=[],t=s.type;if("tempo"===t||"intervals"===t){(k.workoutLibrary.TEMPO_BIKE||[]).slice(0,3).forEach(t=>{e.push((0,u.A)((0,u.A)({},t),{},{type:"bike",library:"bike",equipment:l.standUpBikeType,equipmentSpecific:!0}))});(k.workoutLibrary.INTERVAL_BIKE||[]).slice(0,2).forEach(t=>{e.push((0,u.A)((0,u.A)({},t),{},{type:"bike",library:"bike",equipment:l.standUpBikeType,equipmentSpecific:!0}))})}else if("hills"===t){(k.workoutLibrary.POWER_RESISTANCE||[]).slice(0,3).forEach(t=>{e.push((0,u.A)((0,u.A)({},t),{},{type:"bike",library:"bike",equipment:l.standUpBikeType,equipmentSpecific:!0}))})}else if("longRun"===t){(k.workoutLibrary.LONG_ENDURANCE_RIDES||[]).slice(0,3).forEach(t=>{e.push((0,u.A)((0,u.A)({},t),{},{type:"bike",library:"bike",equipment:l.standUpBikeType,equipmentSpecific:!0}))})}else{const t=k.workoutLibrary.LONG_ENDURANCE_RIDES||[],n=k.workoutLibrary.TEMPO_BIKE||[];t.length>0&&e.push((0,u.A)((0,u.A)({},t[0]),{},{type:"bike",library:"bike",equipment:l.standUpBikeType,equipmentSpecific:!0})),n.length>0&&e.push((0,u.A)((0,u.A)({},n[n.length-1]),{},{type:"bike",library:"bike",equipment:l.standUpBikeType,equipmentSpecific:!0}))}return e.slice(0,6)},J=()=>{var e;const t=ee((null===(e=s.workout)||void 0===e?void 0:e.name)||"")||12,n=Math.round(t/3);return[{name:"".concat(n,"-Mile Easy Run"),description:"Equivalent running distance for today's bike workout - same aerobic benefit",duration:"".concat(8*n,"-").concat(10*n," minutes"),intensity:"Easy"},{name:"".concat(Math.max(3,n-2),"-Mile Tempo Run"),description:"Shorter but higher intensity - builds lactate threshold",duration:"".concat(7*Math.max(3,n-2),"-").concat(8*Math.max(3,n-2)," minutes"),intensity:"Moderate-Hard"},{name:"Fartlek Run",description:"Playful speed play - develops speed and mental toughness",duration:"30-40 minutes",intensity:"Variable"},{name:"".concat(Math.max(2,n-1)," Miles Progressive"),description:"Start easy, build to moderate-hard finish",duration:"".concat(7*Math.max(2,n-1),"-").concat(9*Math.max(2,n-1)," minutes"),intensity:"Easy to Moderate-Hard"}]},$=()=>{var e;const t=s.type,n=(null===(e=s.workout)||void 0===e?void 0:e.name)||"Workout",r=[];if("intervals"===t||n.toLowerCase().includes("interval")||n.toLowerCase().includes("speed")||n.toLowerCase().includes("track"))r.push({name:"Treadmill Speed Work",description:"Same intervals on treadmill - 6x800m @ 5K pace (2min rest)",duration:"45-50 minutes",reason:"no track available",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"},{name:"Hill Sprints Alternative",description:"8x30sec uphill @ max effort - builds same speed without track",duration:"35-40 minutes",reason:"no track available",icon:"\ud83c\udfd4\ufe0f"},{name:"Fartlek Speed Session",description:"20min fartlek: fast when you feel it, easy when you need it",duration:"40-45 minutes",reason:"too hot / no track",icon:"\u26a1"},{name:"Shortened Speed Work",description:"4x400m @ 5K pace instead of full session",duration:"30-35 minutes",reason:"time constraint",icon:"\u23f0"});else if("tempo"===t||n.toLowerCase().includes("tempo")||n.toLowerCase().includes("threshold"))r.push({name:"Treadmill Tempo",description:"3 miles @ comfortably hard pace on 1% incline",duration:"35-40 minutes",reason:"too hot / weather",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"},{name:"Cruise Intervals Indoor",description:"3x1 mile @ tempo pace (90sec rest) - easier to pace indoors",duration:"40-45 minutes",reason:"too hot / pacing issues",icon:"\ud83d\udd00"},{name:"Easy Tempo",description:"2 miles @ marathon pace instead of tempo - still builds endurance",duration:"25-30 minutes",reason:"too tired",icon:"\ud83d\ude0c"},{name:"Short Tempo Burst",description:"15min tempo run instead of full session",duration:"25-30 minutes",reason:"time constraint",icon:"\u23f0"});else if("longRun"===t||n.toLowerCase().includes("long")||n.toLowerCase().includes("endurance")){const e=ee(n)||10;r.push({name:"".concat(e," Miles on Treadmill"),description:"Complete long run indoors with A/C and entertainment - same endurance benefit",duration:"".concat(Math.round(8.5*e),"-").concat(Math.round(10*e)," minutes"),reason:"too hot / weather",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"},{name:"Split Long Run",description:"".concat(Math.round(e/2)," miles morning + ").concat(Math.round(e/2)," miles evening"),duration:"Split sessions",reason:"too hot / time constraint",icon:"\ud83d\udd04"},{name:"".concat(Math.round(.75*e)," Mile Moderate"),description:"Shorter distance but at marathon pace for last ".concat(Math.round(.25*e)," miles"),duration:"".concat(Math.round(6.5*e),"-").concat(Math.round(8*e)," minutes"),reason:"time constraint",icon:"\u23f0"},{name:"Easy Long Walk/Run",description:"".concat(e," miles with walk breaks every 2 miles - active recovery style"),duration:"".concat(Math.round(10*e),"-").concat(Math.round(12*e)," minutes"),reason:"too tired",icon:"\ud83d\udeb6\u200d\u2642\ufe0f"})}else"hills"===t||n.toLowerCase().includes("hill")||n.toLowerCase().includes("incline")?r.push({name:"Treadmill Hill Repeats",description:"6x90sec @ 6-8% incline, 5K effort (walk down recovery)",duration:"40-45 minutes",reason:"no hills available",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"},{name:"Parking Garage Hills",description:"8x30sec up parking garage ramps - urban hill alternative",duration:"35-40 minutes",reason:"no hills available",icon:"\ud83c\udfe2"},{name:"Stadium Stairs",description:"6x60sec stadium/building stairs @ hard effort",duration:"30-35 minutes",reason:"no hills available",icon:"\ud83c\udfdf\ufe0f"},{name:"Flat Tempo Instead",description:"20min tempo run - still builds lactate threshold without hills",duration:"35-40 minutes",reason:"no hills / too tired",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"}):("easy"===t||n.toLowerCase().includes("easy")||n.toLowerCase().includes("recovery"))&&r.push({name:"Indoor Easy Run",description:"Same easy pace on treadmill with entertainment",duration:s.duration||"30-40 minutes",reason:"weather",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"},{name:"Easy Walk",description:"Brisk walk for same duration - active recovery",duration:s.duration||"30-40 minutes",reason:"too tired",icon:"\ud83d\udeb6\u200d\u2642\ufe0f"},{name:"Short Easy Run",description:"20min easy jog - better than nothing",duration:"20 minutes",reason:"time constraint",icon:"\u23f0"});return 0===r.length&&r.push({name:"Rest Day",description:"Complete rest - sometimes the best choice for your body",duration:"0 minutes",reason:"too tired / injury risk",icon:"\ud83d\udecc"},{name:"Light Cross Training",description:"20-30min easy bike, elliptical, or swimming",duration:"20-30 minutes",reason:"need something different",icon:"\ud83d\udeb4\u200d\u2642\ufe0f"}),r},ee=e=>{const t=e.match(/(\d+)\s*(mile|miles|mi)/i);return t?parseInt(t[1]):null},te=()=>[{name:"Treadmill Version",description:"Climate-controlled indoor version - same workout, perfect conditions",location:"Indoor"},{name:"Mall/Parking Garage Run",description:"Weather-protected option - stay dry and maintain your schedule",location:"Covered"},{name:"Early Morning Run",description:"Beat the heat/weather - cooler temps and quieter roads",timing:"Pre-dawn"},{name:"Split Session",description:"Break into 2 shorter runs - work around weather windows",timing:"Flexible"}],ne=()=>{var e,t;const n=[],r=ee((null===(e=s.workout)||void 0===e?void 0:e.name)||"")||ee(s.name||"")||0,i=(null===(t=s.workout)||void 0===t?void 0:t.duration)||s.duration||0;let o=[];return o=r<5||"number"===typeof i&&i<30?["recovery"]:r<10||"number"===typeof i&&i<60?["recovery","aerobic"]:["recovery","aerobic","tempo","speed"],o.forEach(e=>{const t=x.generateBrickWorkout({type:e,equipment:l.standUpBikeType||"cyclete",difficulty:"intermediate"}),r=Y(t,"brick",e);n.push((0,u.A)((0,u.A)({},r),{},{type:"brick",library:"brick"}))}),n},re=e=>{return"tempo"===e.library?"Lactate Threshold":"interval"===e.library?"Speed & Power":"hill"===e.library?"Strength & Power":"longRun"===e.library?"Endurance":"bike"===e.library?null!==(t=e.effort)&&void 0!==t&&null!==(n=t.perceived)&&void 0!==n&&n.includes("threshold")||null!==(r=e.name)&&void 0!==r&&r.toLowerCase().includes("tempo")?"Lactate Threshold":null!==(i=e.effort)&&void 0!==i&&null!==(o=i.perceived)&&void 0!==o&&o.includes("hard")||null!==(a=e.name)&&void 0!==a&&a.toLowerCase().includes("interval")?"Speed & Power":null!==(s=e.name)&&void 0!==s&&s.toLowerCase().includes("endurance")||null!==(l=e.name)&&void 0!==l&&l.toLowerCase().includes("long")?"Endurance":"Aerobic Power":"Recovery"===e.intensity?"Recovery":"Easy"===e.intensity?"Aerobic Base":"Training Focus";var t,n,r,i,o,a,s,l},ie=(()=>{const e=[];if("rest"===s.type)return P();if("rest_or_xt"===s.type)return M();e.push({id:"same-intensity",title:"\ud83c\udfc3\u200d\u2642\ufe0f Keep Running - Same Intensity",subtitle:"Alternative ".concat(s.type," workouts"),icon:"\ud83d\udd04",workouts:G()}),e.push({id:"easier",title:"\ud83d\ude0c Make It Easier",subtitle:"Lower intensity alternatives",icon:"\u2b07\ufe0f",workouts:Q()}),e.push({id:"harder",title:"\ud83d\udcaa Make It Harder",subtitle:"Higher intensity challenges",icon:"\u2b06\ufe0f",workouts:Z()}),l.standUpBikeType&&("bike"===s.type?e.push({id:"run-instead",title:"\ud83c\udfc3\u200d\u2642\ufe0f Switch to Running",subtitle:"Run instead of bike",icon:"\ud83d\udc5f",workouts:J()}):e.push({id:"equipment",title:"\ud83d\udeb4\u200d\u2642\ufe0f Switch to ".concat($s(l.standUpBikeType)),subtitle:"Equipment-specific alternatives",icon:"\u26a1",workouts:X()})),e.push({id:"contextual",title:"\ud83d\udd04 Quick Adaptations",subtitle:"Situational alternatives for real life",icon:"\ud83d\udee0\ufe0f",workouts:$()}),null!==h&&void 0!==h&&h.isExtreme&&e.push({id:"weather",title:"\ud83c\udf21\ufe0f Weather Alternatives",subtitle:"Safe options for ".concat(h.condition),icon:"\ud83d\udee1\ufe0f",workouts:te()}),l.standUpBikeType&&e.push({id:"brick",title:"\ud83e\uddf1 Brick Workouts",subtitle:"Run + bike combinations",icon:"\ud83d\udd04",workouts:ne()});const t=K();return t.length>0&&e.push({id:"cross-training",title:"\ud83c\udfca Cross-Train Instead",subtitle:"Use your cross-training equipment",icon:"\ud83d\udd04",workouts:t}),e})();return(0,je.jsx)("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,je.jsxs)("div",{className:"modal-content card",style:{width:"90%",maxWidth:"800px",maxHeight:"90vh",overflow:"auto",margin:"var(--space-4)"},children:[(0,je.jsxs)("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-6)"},children:[(0,je.jsxs)("div",{children:[(0,je.jsx)("h2",{style:{margin:0,color:"var(--runeq-primary)"},children:"add"===p?"\u2795 Add Second Workout":"\ud83d\udd04 Life Adaptations"}),(0,je.jsx)("p",{style:{margin:"var(--space-2) 0 0 0",color:"#CCCCCC"},children:"add"===p?(0,je.jsxs)(je.Fragment,{children:["Add a second workout to ",(0,je.jsx)("strong",{children:s.day})]}):(0,je.jsxs)(je.Fragment,{children:["Your plan adapts when life happens \u2022 Scheduled: ",(0,je.jsx)("strong",{children:s.workout.name})," \u2022 ",s.day]})})]}),(0,je.jsx)("button",{onClick:o,className:"btn btn-secondary",style:{minWidth:"auto",padding:"var(--space-2)"},children:"\u2715"})]}),m?(0,je.jsxs)("div",{children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)",marginBottom:"var(--space-4)"},children:[(0,je.jsx)("button",{onClick:()=>f(null),className:"btn btn-secondary",children:"\u2190 Back"}),(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{margin:0,color:"#FFFFFF"},children:m.title}),(0,je.jsx)("p",{style:{margin:0,color:"#CCCCCC",fontSize:"0.9rem"},children:m.subtitle})]})]}),(0,je.jsx)("div",{className:"card-grid",children:m.workouts.map((e,t)=>(0,je.jsxs)("div",{className:"card card-interactive ".concat(g===e?"selected":""),onClick:()=>(e=>{y(e)})(e),style:{cursor:"pointer",background:g===e?"linear-gradient(135deg, rgba(0, 212, 255, 0.3) 0%, rgba(0, 255, 136, 0.2) 100%)":"linear-gradient(135deg, rgba(0, 212, 255, 0.12) 0%, rgba(0, 255, 136, 0.08) 100%)",border:g===e?"2px solid rgba(0, 212, 255, 0.8)":"2px solid rgba(0, 212, 255, 0.3)",transition:"all 0.3s ease"},onMouseEnter:t=>{g!==e&&(t.currentTarget.style.background="linear-gradient(135deg, rgba(0, 212, 255, 0.2) 0%, rgba(0, 255, 136, 0.15) 100%)",t.currentTarget.style.border="2px solid rgba(0, 212, 255, 0.5)",t.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:t=>{g!==e&&(t.currentTarget.style.background="linear-gradient(135deg, rgba(0, 212, 255, 0.12) 0%, rgba(0, 255, 136, 0.08) 100%)",t.currentTarget.style.border="2px solid rgba(0, 212, 255, 0.3)",t.currentTarget.style.transform="translateY(0)")},children:[(0,je.jsx)("h4",{style:{margin:"0 0 var(--space-2) 0",color:"#FFFFFF",fontSize:"1.05rem"},children:e.name}),(0,je.jsx)("p",{style:{margin:"0 0 var(--space-3) 0",fontSize:"0.9rem",color:"#CCCCCC"},children:"string"===typeof e.description?e.description:"object"===typeof e.description?JSON.stringify(e.description):"Workout description"}),(0,je.jsxs)("div",{style:{display:"flex",gap:"var(--space-2)",flexWrap:"wrap"},children:[e.duration&&(0,je.jsx)("div",{className:"badge badge-info",children:"string"===typeof e.duration?e.duration:"object"===typeof e.duration?JSON.stringify(e.duration):"Duration"}),e.intensity&&(0,je.jsx)("div",{className:"badge badge-warning",children:"string"===typeof e.intensity?e.intensity:"object"===typeof e.intensity?JSON.stringify(e.intensity):"Intensity"}),e.equipment&&(0,je.jsx)("div",{className:"badge badge-success",children:$s(e.equipment)}),e.location&&(0,je.jsx)("div",{className:"badge badge-info",children:e.location})]})]},t))}),g&&(0,je.jsxs)("div",{style:{marginTop:"var(--space-6)",padding:"var(--space-4)",background:"var(--gray-50)",borderRadius:"var(--radius-lg)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,je.jsxs)("div",{children:[(0,je.jsxs)("p",{style:{margin:0,fontWeight:600},children:["add"===p?"Add: ":"Replace with: ",(0,je.jsx)("strong",{children:g.name})]}),(0,je.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"0.9rem",color:"var(--gray-600)"},children:"add"===p?"This will add a second workout to ".concat(s.day," for a two-a-day training session."):"This will update your ".concat(s.day," workout and maintain your training load.")})]}),(0,je.jsx)("button",{onClick:()=>{if(g){const e=(0,u.A)((0,u.A)({},s),{},{workout:(0,u.A)((0,u.A)({},g),{},{name:g.name,description:g.description,duration:g.duration||g.repetitions||"Variable"}),type:g.library||g.type||s.type,focus:re(g),equipmentSpecific:g.equipmentSpecific||!!g.equipment,workoutDetails:g,replacementReason:null===m||void 0===m?void 0:m.title});d(e),o()}},className:"btn btn-primary",children:"add"===p?"\u2795 Add Workout":"\ud83d\udd04 Replace Workout"})]})]}):(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{marginBottom:"var(--space-4)",color:"#FFFFFF"},children:"Choose Your Adventure"}),(0,je.jsx)("div",{className:"card-grid",children:ie.map(e=>(0,je.jsxs)("div",{className:"card card-interactive",onClick:()=>(e=>{f(e),y(null)})(e),style:{textAlign:"center",cursor:"pointer",background:"linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(0, 255, 136, 0.1) 100%)",border:"2px solid rgba(0, 212, 255, 0.4)",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, rgba(0, 212, 255, 0.25) 0%, rgba(0, 255, 136, 0.2) 100%)",e.currentTarget.style.border="2px solid rgba(0, 212, 255, 0.6)",e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(0, 255, 136, 0.1) 100%)",e.currentTarget.style.border="2px solid rgba(0, 212, 255, 0.4)",e.currentTarget.style.transform="translateY(0)"},children:[(0,je.jsx)("div",{style:{fontSize:"2.5rem",marginBottom:"var(--space-2)"},children:e.icon}),(0,je.jsx)("h4",{style:{margin:"0 0 var(--space-2) 0",color:"#FFFFFF",fontSize:"1.1rem"},children:e.title}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#CCCCCC"},children:e.subtitle}),(0,je.jsxs)("div",{className:"badge",style:{marginTop:"var(--space-3)",background:"rgba(0, 255, 136, 0.2)",color:"#00FF88",border:"1px solid rgba(0, 255, 136, 0.4)",fontWeight:"600"},children:[e.workouts.length," options"]})]},e.id))})]})]})})};class Jh{constructor(){this.hillLibrary=new qe,this.tempoLibrary=new ze,this.intervalLibrary=new Ue,this.longRunLibrary=new He,this.standUpBikeLibrary=new Lh,this.paceCalculator=new Ke.O,this.planTemplates={"5K":{weeksRecommended:8,runsPerWeek:[3,4,5],focusAreas:["speed","vo2max","lactateThreshold"],workoutDistribution:{intervals:30,tempo:25,hills:20,longRuns:25},peakWeeklyMileage:[15,25,35],longRunMax:[8,10,12]},"10K":{weeksRecommended:10,runsPerWeek:[3,4,5,6],focusAreas:["vo2max","lactateThreshold","aerobicPower"],workoutDistribution:{intervals:25,tempo:30,hills:20,longRuns:25},peakWeeklyMileage:[20,30,40,50],longRunMax:[10,12,15,18]},Half:{weeksRecommended:12,runsPerWeek:[4,5,6,7],focusAreas:["lactateThreshold","aerobicPower","endurance"],workoutDistribution:{intervals:20,tempo:35,hills:20,longRuns:25},peakWeeklyMileage:[25,35,45,55],longRunMax:[13,15,18,20]},Marathon:{weeksRecommended:16,runsPerWeek:[4,5,6,7],focusAreas:["endurance","lactateThreshold","aerobicPower"],workoutDistribution:{intervals:15,tempo:30,hills:20,longRuns:35},peakWeeklyMileage:[35,45,60,70],longRunMax:[20,22,24,26]}},this.trainingPhases={base:{name:"Base Building",focus:"Aerobic development, easy miles",workoutIntensity:"low",longRunEmphasis:"easy",hillFocus:"long_strength"},build:{name:"Build Phase",focus:"Lactate threshold, tempo work",workoutIntensity:"moderate",longRunEmphasis:"progressive",hillFocus:"medium_vo2"},peak:{name:"Peak/Sharpening",focus:"Race-specific speed and power",workoutIntensity:"high",longRunEmphasis:"raceSimulation",hillFocus:"short_power"},taper:{name:"Taper",focus:"Maintain fitness, reduce volume",workoutIntensity:"moderate",longRunEmphasis:"traditional_easy",hillFocus:"short_power"}}}generateTrainingPlan(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{raceDistance:t="10K",raceTime:n=null,raceDate:r=null,currentPaces:i=null,runsPerWeek:o=4,runEqPreference:a=0,weeksAvailable:s=null,experienceLevel:l,standUpBikeType:c=null,runningStatus:d="active",currentWeeklyMileage:h=null,hasGarmin:p=!0,availableDays:m=null,hardSessionDays:f=null,longRunDay:g=null,preferredBikeDays:y=null,startDay:v=null}=e;Ne.log("\ud83c\udfc3 Training Plan Generator Options:"),Ne.log("  runningStatus:",d),Ne.log("  currentWeeklyMileage:",h),Ne.log("  availableDays:",m),Ne.log("  hardSessionDays:",f),Ne.log("  longRunDay:",g),Ne.log("  preferredBikeDays:",y);const b=this.planTemplates[t];if(!b)throw new Error("Race distance ".concat(t," not supported"));let w=null,D=null,k=null;if(i)k=i,Ne.log("\ud83d\udcca Using provided current paces");else{if(!n)throw new Error("Either currentPaces or raceTime must be provided");{const r=e.currentRaceDistance||t;if(Ne.log("\ud83c\udfaf Calculating GOAL paces: ".concat(r," in ").concat(n)),D=this.paceCalculator.calculateFromGoal(r,n),Ne.log("  Goal paces:",D.paces),h||e.currentLongRunDistance){const e=0,t=parseInt(h)||0;Ne.log("\ud83d\udcca Estimating CURRENT fitness from:"),Ne.log("   Long run: ".concat(e," miles")),Ne.log("   Weekly mileage: ".concat(t," miles")),w=this.paceCalculator.calculateFromCurrentFitness(e,t,r),Ne.log("  Current fitness paces:",w.paces),Ne.log("  \ud83d\udcc8 Progressive training: Week 1 at current fitness \u2192 Final week at goal pace"),k={current:w,goal:D,useProgression:!0}}else console.warn("\u26a0\ufe0f No current fitness data provided - using goal paces from Week 1"),console.warn("   This may prescribe paces that are too fast for current fitness level"),k=D}}const x=s||b.weeksRecommended,E=this.calculateWeeklyStructure(b,o,l,m,f,g,y,h,v),S=this.createPeriodization(x,t),C=[];for(let u=1;u<=x;u++){const e=this.generateWeekPlan(u,x,b,E,S,k,a,l,c,d,p);C.push(e)}if(r&&C.length>0){const e=C[C.length-1],n=E.longRunDay||"Saturday";Ne.log("\ud83c\udfc1 Race Day Feature:"),Ne.log("  Race Date:",r),Ne.log("  Long Run Day Name:",n),Ne.log("  Final Week Workouts:",e.workouts.map(e=>{var t;return{day:e.day,type:e.type,distance:e.distance,workoutName:null===(t=e.workout)||void 0===t?void 0:t.name}}));let i=e.workouts.findIndex(e=>"longRun"===e.type);if(Ne.log("  Strategy 1 (type=longRun): index =",i),-1===i&&(i=e.workouts.findIndex(e=>e.day===n),Ne.log("  Strategy 2 (day="+n+"): index =",i)),-1===i){let t=0;e.workouts.forEach((e,n)=>{"rest"!==e.type&&e.distance>t&&(t=e.distance,i=n)}),Ne.log("  Strategy 3 (longest distance): index =",i)}if(-1!==i){const n=this.generateRaceDayWorkout(t,r);Ne.log("  Replacing workout at index",i,"with Race Day"),Ne.log("  Old workout:",e.workouts[i]),e.workouts[i]={day:e.workouts[i].day,type:n.type,distance:n.distance,focus:n.focus,workout:{name:n.name,description:n.description,structure:n.structure,about:n.about,notes:n.notes,equipment:n.equipment}},Ne.log("  New workout:",e.workouts[i]),Ne.log("\u2705 Race Day workout added to final week on ".concat(e.workouts[i].day))}else console.error("\u274c Could not find suitable workout to replace with Race Day in final week!"),console.error("   This is a bug - please report this issue")}else r||Ne.log("\u2139\ufe0f No race date provided - skipping Race Day feature");return{planOverview:(0,u.A)({raceDistance:t,raceTime:n,runsPerWeek:o,totalWeeks:x,runEqPreference:a,experienceLevel:l,standUpBikeType:c},k.useProgression&&{paceProgression:{currentFitnessPaces:k.current.paces,goalPaces:k.goal.paces,strategy:"Progressive blending from current fitness to goal paces"}}),trainingPaces:k.useProgression?k.goal.paces:k.paces||k,currentFitnessPaces:k.useProgression?k.current.paces:null,trackIntervals:k.useProgression?k.goal.trackIntervals:k.trackIntervals||null,periodization:S,weeklyStructure:E,weeks:C,planSummary:this.generatePlanSummary(C,b)}}calculateWeeklyStructure(e,t,n,r,i,o,a,s,l){const u=e.runsPerWeek.indexOf(t);if(-1===u)throw new Error("".concat(t," runs per week not supported for this distance"));Ne.log("\ud83d\udcca calculateWeeklyStructure received:"),Ne.log("  hardSessionDays:",i),Ne.log("  availableDays:",r),Ne.log("  longRunDay:",o),Ne.log("  preferredBikeDays:",a),Ne.log("  currentWeeklyMileage:",s),Ne.log("\ud83d\udcca DIAGNOSTIC - Template values at structure creation:"),Ne.log("  template.peakWeeklyMileage array:",e.peakWeeklyMileage),Ne.log("  template.longRunMax array:",e.longRunMax),Ne.log("  runIndex:",u,"(for",t,"runs/week)"),Ne.log("  Selected peakMileage:",e.peakWeeklyMileage[u]),Ne.log("  Selected longRunMax:",e.longRunMax[u]);const c={runsPerWeek:t,peakMileage:e.peakWeeklyMileage[u],longRunMax:e.longRunMax[u],currentWeeklyMileage:s,currentLongRunDistance:0,availableDays:r||this.getDefaultAvailableDays(t),hardSessionDays:i||[],longRunDay:o||"Saturday",preferredBikeDays:a||[],restDays:7-t,startDay:l};return c.easyDays=c.availableDays.filter(e=>!c.hardSessionDays.includes(e)&&!c.preferredBikeDays.includes(e)&&e!==c.longRunDay),"beginner"===n?(c.peakMileage*=.8,c.longRunMax*=.9):"advanced"===n&&(c.peakMileage*=1.15,c.longRunMax*=1.1),c}getDefaultAvailableDays(e){const t={3:["Monday","Wednesday","Saturday"],4:["Monday","Wednesday","Friday","Saturday"],5:["Monday","Wednesday","Thursday","Friday","Saturday"],6:["Monday","Tuesday","Wednesday","Friday","Saturday","Sunday"],7:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]};return t[e]||t[4]}createPeriodization(e,t){const n=[],r=Math.max(2,Math.ceil(.1*e));if(e<=8){const t=e-r;n.push({phase:"base",weeks:Math.ceil(.5*t)}),n.push({phase:"build",weeks:Math.floor(.35*t)}),n.push({phase:"peak",weeks:Math.floor(.15*t)}),n.push({phase:"taper",weeks:r})}else if(e<=12){const t=e-r;n.push({phase:"base",weeks:Math.ceil(.45*t)}),n.push({phase:"build",weeks:Math.ceil(.35*t)}),n.push({phase:"peak",weeks:Math.floor(.2*t)}),n.push({phase:"taper",weeks:r})}else{const t=e-r;n.push({phase:"base",weeks:Math.ceil(.4*t)}),n.push({phase:"build",weeks:Math.ceil(.35*t)}),n.push({phase:"peak",weeks:Math.floor(.25*t)}),n.push({phase:"taper",weeks:r})}let i=0;return n.forEach(e=>{e.startWeek=i+1,e.endWeek=i+e.weeks,i+=e.weeks}),n}generateWeekPlan(e,t,n,r,i,o,a,s,l){let u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"active",c=!(arguments.length>10&&void 0!==arguments[10])||arguments[10];this.workoutHistory||(this.workoutHistory={intervals:[],tempo:[],hills:[]});const d=i.find(t=>e>=t.startWeek&&e<=t.endWeek);let h;d&&(d.weekInPhase=e-d.startWeek+1),o.useProgression?(h=this.paceCalculator.blendPaces(o.current,o.goal,e,t),Ne.log("\ud83c\udfaf Week ".concat(e," pace blend: ").concat(Math.round(100*h.progressionRatio),"% toward goal"))):h=o;const p=e%4===0&&e<t-2,m=r.currentWeeklyMileage||Math.round(.5*r.peakMileage),f=t-2;let g;if(Ne.log("\ud83d\udcd0 Week ".concat(e," mileage calculation:"),{weekNumber:e,weekNumberType:typeof e,startingMileage:m,peakMileage:r.peakMileage,buildWeeks:f,checkWeek1:1===e,currentWeeklyMileage:r.currentWeeklyMileage}),1===e)g=m,Ne.log("   \u2705 Week 1 detected - using startingMileage: ".concat(g));else if(e>=t-1)g=Math.round(r.peakMileage*(e===t?.6:.7));else if(p){const t=m+(r.peakMileage-m)*(e/f);g=Math.round(.75*t)}else g=Math.round(m+(r.peakMileage-m)*(e/f));Ne.log("\ud83d\udcc5 Week ".concat(e,": ").concat(g," miles (start: ").concat(m,", peak: ").concat(r.peakMileage,", isRest: ").concat(p,", phase: ").concat(d.phase,")"));const y=this.generateWeekWorkouts(r.runsPerWeek,g,d,n,h,a,s,e,t,l,r,u,c);return{week:e,phase:d.phase,isRestWeek:p,totalMileage:g,workouts:y,weekFocus:this.getWeekFocus(d.phase,n.focusAreas),notes:this.generateWeekNotes(d.phase,p,e,t)}}generateWeekWorkouts(e,t,n,r,i,o,a,s,l,u,c){let d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"active",h=!(arguments.length>12&&void 0!==arguments[12])||arguments[12];const p=[],m=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],{availableDays:f,hardSessionDays:g,longRunDay:y,preferredBikeDays:v,easyDays:b}=c;Ne.log("\n\ud83d\uddd3\ufe0f Week ".concat(s," Workout Generation:")),Ne.log("  runningStatus:",d),Ne.log("  availableDays:",f),Ne.log("  hardSessionDays:",g),Ne.log("  longRunDay:",y),Ne.log("  preferredBikeDays:",v),Ne.log("  easyDays:",b);const w=this.calculateLongRunDistance(t,e,s,l,c.currentLongRunDistance,c.longRunMax),D=t-w,k=Math.round(D/(e-1)),x=e=>{switch(e){case"tempo":return Math.round(1.4*k);case"intervals":return Math.round(1.25*k);case"hills":return Math.round(1.2*k);case"bike":case"recovery":return Math.round(.8*k);default:return k}};let E=0;const S=c.startDay,C=1===s&&S?m.slice(m.indexOf(S)):m;return Ne.log("\ud83d\udcc5 Week ".concat(s," - Generating workouts for:"),C.join(", ")),C.forEach(e=>{if(Ne.log("\n  \ud83d\udccd Processing ".concat(e,":")),Ne.log("     availableDays.includes('".concat(e,"'):"),f.includes(e)),Ne.log("     hardSessionDays.includes('".concat(e,"'):"),g.includes(e)),Ne.log("     preferredBikeDays.includes('".concat(e,"'):"),v.includes(e)),Ne.log("     day === longRunDay ('".concat(y,"'):"),e===y),!f.includes(e))return Ne.log("     \u26d4 Result: REST DAY (not in availableDays)"),void p.push({day:e,type:"rest",workout:{name:"Rest Day",description:"Complete rest or light cross-training"},distance:0,focus:"Recovery"});if(e===y)if("bikeOnly"===d)Ne.log("     \u2705 Result: LONG BIKE RIDE (bike-only mode)"),p.push({day:e,type:"bike",workout:this.selectStandUpBikeWorkout("long_endurance",n,u,w,h),distance:w,focus:"Endurance",equipmentSpecific:!0});else{Ne.log("     \u2705 Result: LONG RUN");const t=i.paces||i;p.push({day:e,type:"longRun",workout:this.selectLongRunWorkout(n,w,o,t),distance:w,focus:"Endurance"})}else if(g.includes(e)&&v.includes(e)&&u&&(s!==l-1||"taper"!==n.phase)){Ne.log("     \u2705 Result: HARD BIKE SESSION (hard day + bike day, hardSessionIndex: ".concat(E,")"));const t=["tempo","intervals","aerobic_power"],r=t[E%t.length],i=x(r);p.push({day:e,type:"bike",workout:this.selectStandUpBikeWorkout(r,n,u,i,h),distance:i,focus:"tempo"===r?"Lactate Threshold":"Speed & Power",equipmentSpecific:!0}),E++}else if(!g.includes(e)||s===l-1&&"taper"===n.phase)if(v.includes(e)&&u){Ne.log("     \u2705 Result: BIKE DAY");const t="aerobic_base",r=x("bike");p.push({day:e,type:"bike",workout:this.selectStandUpBikeWorkout(t,n,u,r),distance:r,focus:"Aerobic Base",equipmentSpecific:!0})}else if("bikeOnly"===d){Ne.log("     \u2705 Result: EASY BIKE RIDE (bike-only mode)");const t=x("recovery");p.push({day:e,type:"bike",workout:this.selectStandUpBikeWorkout("recovery",n,u,t),distance:t,focus:"Recovery",equipmentSpecific:!0})}else{Ne.log("     \u2705 Result: EASY RUN");const t=i.paces||i,n=x("easy");p.push({day:e,type:"easy",workout:this.generateEasyRun(n,o,t),distance:n,focus:"Recovery"})}else if("bikeOnly"===d){Ne.log("     \u2705 Result: HARD BIKE SESSION (bike-only mode, hardSessionIndex: ".concat(E,")"));const t=["tempo","intervals","aerobic_power"],r=t[E%t.length],i=x(r);p.push({day:e,type:"bike",workout:this.selectStandUpBikeWorkout(r,n,u,i,h),distance:i,focus:"tempo"===r?"Lactate Threshold":"Speed & Power",equipmentSpecific:!0}),E++}else{Ne.log("     \u2705 Result: HARD RUN SESSION (hardSessionIndex: ".concat(E,")"));const t=this.selectWorkoutType(E,n,r),a=x(t);p.push({day:e,type:t,workout:this.selectQualityWorkout(t,n,a,o,i,s,l),distance:a,focus:this.getWorkoutFocus(t)}),E++}}),p}selectWorkoutType(e,t,n){this.trainingPhases[t.phase];const r=t.weekInPhase||1,i=r/(t.endWeek-t.startWeek+1);let o;switch(t.phase){case"base":o=r<=3?["tempo","hills","tempo"]:r<=5?["tempo","hills","intervals"]:["tempo","intervals","hills"];break;case"build":o=i<.5?["tempo","intervals","hills"]:["intervals","tempo","hills"];break;case"peak":o=["intervals","tempo","intervals"];break;case"taper":o=["tempo","intervals"];break;default:o=["tempo","intervals","hills"]}return o[e%o.length]}selectQualityWorkout(e,t,n,r,i,o,a){this.trainingPhases[t.phase];const s=i.paces||i,l=i.trackIntervals||null;switch(e){case"hills":return this.selectHillWorkout(t,r,s,o,a);case"tempo":return this.selectTempoWorkout(t,r,s,o,a);case"intervals":return this.selectIntervalWorkout(t,r,s,l,o,a);default:return this.generateEasyRun(n,r,s)}}selectHillWorkout(e,t,n,r,i){const o=this.trainingPhases[e.phase].hillFocus,a=this.hillLibrary.getWorkoutsByCategory(o);if(0===a.length){const e=Object.values(this.hillLibrary.workoutLibrary).flat(),r=this.selectWorkoutAvoidingRepetition(e,"hills");return this.hillLibrary.prescribeHillWorkout(r.name,{runEqPreference:t,paces:n})}const s=this.selectWorkoutAvoidingRepetition(a,"hills");return this.hillLibrary.prescribeHillWorkout(s.name,{runEqPreference:t,paces:n})}selectTempoWorkout(e,t,n,r,i){this.trainingPhases[e.phase];const o={base:"TRADITIONAL_TEMPO",build:"TEMPO_INTERVALS",peak:"RACE_SPECIFIC",taper:"ALTERNATING_TEMPO"}[e.phase],a=this.tempoLibrary.getWorkoutsByCategory(o),s=this.selectWorkoutAvoidingRepetition(a,"tempo");return this.tempoLibrary.prescribeTempoWorkout(s.name,{runEqPreference:t,paces:n,weekNumber:r,totalWeeks:i})}selectIntervalWorkout(e,t,n,r,i,o){this.trainingPhases[e.phase];const a={base:"LONG_INTERVALS",build:"VO2_MAX",peak:"SHORT_SPEED",taper:"MIXED_INTERVALS"}[e.phase],s=this.intervalLibrary.getWorkoutsByCategory(a),l=this.selectWorkoutAvoidingRepetition(s,"intervals"),u=this.calculateSpecificReps(l.repetitions,i,o);return this.intervalLibrary.prescribeIntervalWorkout(l.name,{runEqPreference:t,paces:n,trackIntervals:r,specificReps:u,weekNumber:i,totalWeeks:o})}selectLongRunWorkout(e,t,n,r){const i={easy:"TRADITIONAL_EASY",progressive:"PROGRESSIVE_RUNS",raceSimulation:"RACE_SIMULATION",traditional_easy:"TRADITIONAL_EASY"}[this.trainingPhases[e.phase].longRunEmphasis]||"TRADITIONAL_EASY",o=this.longRunLibrary.getWorkoutsByCategory(i),a=o[Math.floor(Math.random()*o.length)];return this.longRunLibrary.prescribeLongRunWorkout(a.name,{runEqPreference:n,distance:t,paces:r})}generateEasyRun(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r={optionA:"Full easy running",optionB:"First half running, second half stand-up bike",optionC:"Full stand-up bike (2x time conversion)",recommendation:t>=50?"Split or full bike workout":"Full running"};let i="".concat(e," miles at easy pace"),o="Conversational pace, aerobic base building";return n&&n.easy&&(i="".concat(e," miles at easy pace (").concat(n.easy.min,"-").concat(n.easy.max,"/mile)"),o="Conversational pace (".concat(n.easy.min,"-").concat(n.easy.max,"/mile), aerobic base building")),{name:"Easy Run",description:o,structure:i,intensity:"easy",benefits:"Aerobic development, recovery, base building",runEqOptions:r,paces:n,notes:"Should feel refreshed after this run, not fatigued"}}calculateLongRunDistance(e,t,n,r,i,o){if(!i||!o||!n||!r){Ne.warn("\u26a0\ufe0f Missing long run parameters, using percentage fallback");const n=t<=4?.35:.3;return Math.round(e*n)}const a=Math.floor(.8*r);if(n<=a){const e=(n-1)/(a-1),t=i+e*(o-i),r=Math.round(t);return Ne.log("  \ud83d\udccf Week ".concat(n," Long Run: ").concat(r," miles (").concat(Math.round(100*e),"% build: ").concat(i,"\u2192").concat(o,")")),r}{const e=Math.round(.75*o);return Ne.log("  \ud83d\udccf Week ".concat(n," Long Run: ").concat(e," miles (taper: 75% of ").concat(o,")")),e}}getWorkoutFocus(e){return{hills:"Power & Strength",tempo:"Lactate Threshold",intervals:"VO2 Max & Speed",easy:"Aerobic Base",longRun:"Endurance"}[e]||"General Fitness"}getWeekFocus(e,t){const n=this.trainingPhases[e];return"".concat(n.name,": ").concat(n.focus)}generateWeekNotes(e,t,n,r){const i=[];t&&i.push("RECOVERY WEEK: Reduced volume to allow adaptation and recovery");const o=this.trainingPhases[e];return i.push("Focus: ".concat(o.focus)),"peak"===e&&n>r-4&&i.push("Peak phase: Focus on race-specific workouts and maintaining sharpness"),"taper"===e&&i.push("Taper phase: Maintain intensity but reduce volume for race readiness"),i}generatePlanSummary(e,t){const n=e.reduce((e,t)=>e+t.workouts.filter(e=>"rest"!==e.type).length,0),r=e.reduce((e,t)=>(t.workouts.forEach(t=>{e[t.type]=(e[t.type]||0)+1}),e),{}),i=e.reduce((e,t)=>e+t.totalMileage,0);return{totalWorkouts:n,totalMiles:i,workoutBreakdown:r,averageWeeklyMiles:Math.round(i/e.length),peakWeekMiles:Math.max(...e.map(e=>e.totalMileage)),varietyScore:Object.keys(r).length}}selectWorkoutAvoidingRepetition(e,t){if(!e||0===e.length)throw new Error("No workouts available for type: ".concat(t));if(e.length<=2){const n=this.workoutHistory[t][this.workoutHistory[t].length-1],r=e.filter(e=>e.name!==n);if(r.length>0){const e=r[Math.floor(Math.random()*r.length)];return this.workoutHistory[t].push(e.name),e}const i=e[Math.floor(Math.random()*e.length)];return this.workoutHistory[t].push(i.name),i}const n=this.workoutHistory[t].slice(-2),r=e.filter(e=>!n.includes(e.name));if(0===r.length){this.workoutHistory[t]=[];const n=e[Math.floor(Math.random()*e.length)];return this.workoutHistory[t].push(n.name),n}const i=r[Math.floor(Math.random()*r.length)];return this.workoutHistory[t].push(i.name),this.workoutHistory[t].length>5&&this.workoutHistory[t].shift(),i}calculateSpecificReps(e,t,n){const r=e.match(/(\d+)-(\d+)/);if(!r)return e;const i=parseInt(r[1],10),o=parseInt(r[2],10),a=Math.min(1,t/(.75*n)),s=Math.round(i+a*(o-i));return e.replace(/(\d+)-(\d+)/,s.toString())}selectStandUpBikeWorkoutType(e,t,n){this.trainingPhases[t.phase];const r={base:["aerobic_base","tempo_efforts","recovery_specific"],build:["tempo_efforts","high_intensity","technique_specific"],peak:["high_intensity","race_specific","tempo_efforts"],taper:["technique_specific","recovery_specific","race_specific"]}[t.phase];return r[e%r.length]}selectStandUpBikeWorkout(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const o={tempo:"TEMPO_BIKE",intervals:"INTERVAL_BIKE",aerobic_power:"POWER_RESISTANCE",long_endurance:"LONG_ENDURANCE_RIDES",recovery:"RECOVERY_SPECIFIC",aerobic_base:"AEROBIC_BASE",technique_specific:"TECHNIQUE_SPECIFIC"}[e]||"AEROBIC_BASE",a=this.standUpBikeLibrary.workoutLibrary[o];if(!a||0===a.length){const e=Object.values(this.standUpBikeLibrary.workoutLibrary).flat().filter(e=>e.equipment===n||"both"===e.equipment);if(e.length>0){const t=e[Math.floor(Math.random()*e.length)];return this.standUpBikeLibrary.prescribeStandUpBikeWorkout(t.name,n,{targetDistance:r,hasGarmin:i})}}const s=a.filter(e=>e.equipment===n||"both"===e.equipment);if(0===s.length){const e=a.filter(e=>"both"===e.equipment);if(e.length>0){const t=e[Math.floor(Math.random()*e.length)];return this.standUpBikeLibrary.prescribeStandUpBikeWorkout(t.name,n,{targetDistance:r,hasGarmin:i})}}const l=s[Math.floor(Math.random()*s.length)];return this.standUpBikeLibrary.prescribeStandUpBikeWorkout(l.name,n,{targetDistance:r,hasGarmin:i})}generateRaceDayWorkout(e,t){const n={"5K":{miles:3.1,name:"5K"},"10K":{miles:6.2,name:"10K"},Half:{miles:13.1,name:"Half Marathon"},Marathon:{miles:26.2,name:"Marathon"}}[e]||{miles:parseFloat(e)||13.1,name:e},r={"5K":["\ud83c\udfaf Race Strategy: Start controlled, hit race pace by mile 1, build through mile 2, empty the tank in the final 800m","\u23f1\ufe0f Pacing: This is a fast race - don't go out too hard, but don't be afraid to hurt","\ud83d\udcaa Mental Game: Pain is temporary, your PR time is forever","\ud83d\udd25 The last mile is where races are won - stay strong and finish fast!"],"10K":["\ud83c\udfaf Race Strategy: First 5K controlled at goal pace, second 5K at effort (pace will feel harder but stay consistent)","\u23f1\ufe0f Pacing: Even splits are your friend - negative splits are magic","\ud83d\udcaa Mental Game: The middle miles (2-4) are where mental toughness counts","\ud83c\udfc1 Final kilometer: Give everything you've got left!"],Half:["\ud83c\udfaf Race Strategy: Miles 1-6 feel easy, 7-10 at goal pace, 11-13 dig deep","\u23f1\ufe0f Pacing: First half should feel controlled - if you're working hard before mile 8, you went too fast","\ud83d\udcaa Mental Game: Mile 10 is the real start of the race - this is where your training pays off","\ud83d\udd25 The final 5K is all guts - trust your training and push through","\ud83d\udca7 Hydration: Take water at every aid station, even if just a sip"],Marathon:["\ud83c\udfaf Race Strategy: Miles 1-16 should feel easy and controlled, 17-20 maintain focus, 21-26 is the real race","\u23f1\ufe0f Pacing: The first 20 miles are the warmup for the last 6 miles",'\ud83d\udcaa Mental Game: "The wall" at mile 20 is real - but your training prepared you for this',"\ud83d\udd25 When it gets hard around mile 20, remember: this is why you trained","\ud83d\udca7 Hydration & Fuel: Take water/electrolytes at every station, fuel every 45min starting at mile 6","\ud83e\udde0 Break it down: Focus on one mile at a time, not the distance remaining","\u2728 You've got this - you've already done the hard work in training!"]}[e]||["\ud83c\udfaf Race Strategy: Start controlled, settle into your pace, finish strong","\u23f1\ufe0f Pacing: Even effort throughout, trust your training","\ud83d\udcaa Mental Game: Stay present, stay strong, stay focused","\ud83d\udd25 This is your day - go get it!"],i=t?new Date(t+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Race Day";return{name:"\ud83c\udfc1 RACE DAY - ".concat(n.name),type:"race",distance:n.miles,structure:"Your ".concat(n.name," race - ").concat(n.miles," miles"),description:r.join("\n\n"),about:"Today is what you've been training for! Trust your preparation, execute your race plan, and leave it all out there. You're ready for this.",focus:"Race Performance",notes:"Race Date: ".concat(i),equipment:"running"}}}const $h=["actualDate"];const ep=class{constructor(){this.trainingPlanGenerator=new Jh,this.tempoLibrary=new ze,this.intervalLibrary=new Ue,this.hillLibrary=new qe,this.longRunLibrary=new He,this.brickWorkoutService=new Zh,this.aquaRunningLibrary=new qh,this.ellipticalLibrary=new zh,this.stationaryBikeLibrary=new Vh,this.swimmingLibrary=new Yh,this.rowingLibrary=new Qh,this.standUpBikeLibrary=new Lh,this.planTemplates={"5K":{weeks:8,focusAreas:["speed","vo2max"]},"10K":{weeks:10,focusAreas:["vo2max","lactateThreshold"]},Half:{weeks:12,focusAreas:["lactateThreshold","endurance"]},Marathon:{weeks:16,focusAreas:["endurance","lactateThreshold"]}}}convertOnboardingToOptions(e){const{distance:t,time:n}=this.parseRaceTimeWithDistance(e.currentRaceTime),r=this.calculateRunEqPreference(e);let i=null;if(e.startDate&&e.raceDate){const t=6048e5;i=Math.ceil((new Date(e.raceDate+"T00:00:00")-new Date(e.startDate+"T00:00:00"))/t)}Ne.log("\ud83d\udd0d Converting onboarding to options:"),Ne.log("  currentRaceTime:",e.currentRaceTime),Ne.log("  parsedDistance:",t),Ne.log("  parsedTime:",n),Ne.log("  currentWeeklyMileage:",e.currentWeeklyMileage),Ne.log("  currentLongRunDistance:",e.currentLongRunDistance),Ne.log("  availableDays:",e.availableDays),Ne.log("  hardSessionDays:",e.hardSessionDays),Ne.log("  longRunDay:",e.longRunDay),Ne.log("  preferredBikeDays:",e.preferredBikeDays);const o=e.startDate?new Date(e.startDate+"T00:00:00"):null,a=o?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][o.getDay()]:null;return{raceDistance:e.raceDistance,currentRaceDistance:t,raceTime:n,raceDate:e.raceDate,currentPaces:null,runsPerWeek:e.runsPerWeek,runEqPreference:r,weeksAvailable:i,experienceLevel:e.experienceLevel,standUpBikeType:e.standUpBikeType,runningStatus:e.runningStatus||"active",hasGarmin:!1!==e.hasGarmin,currentWeeklyMileage:parseInt(e.currentWeeklyMileage)||null,startDay:a,currentLongRunDistance:parseInt(e.currentLongRunDistance)||null,availableDays:e.availableDays,hardSessionDays:e.hardSessionDays,longRunDay:e.longRunDay,preferredBikeDays:e.preferredBikeDays}}parseRaceTimeWithDistance(e){if(!e)return{distance:null,time:null};const t=e.split("-");return 2!==t.length?{distance:null,time:null}:{distance:t[0],time:t[1]}}parseRaceTime(e){if(!e)return null;const t=e.split("-");return 2!==t.length?null:t[1]}calculateRunEqPreference(e){let t=0;return e.standUpBikeType&&(t+=30,e.runsPerWeek>=5&&(t+=20),e.runsPerWeek>=6&&(t+=20)),"advanced"!==e.experienceLevel&&"elite"!==e.experienceLevel||(t+=10),Math.min(t,80)}async generatePlanFromOnboarding(e){try{Ne.log("Generating training plan for:",e);const t=this.convertOnboardingToOptions(e),n=this.trainingPlanGenerator.generateTrainingPlan(t);Ne.log("\u2705 Plan generator created plan with",n.weeks.length,"weeks");const r=this.addDatesAndReorderWorkouts(n.weeks,e.startDate);return{success:!0,plan:{planOverview:{raceDistance:e.raceDistance,raceTime:e.currentRaceTime,totalWeeks:n.planOverview.totalWeeks,runsPerWeek:e.runsPerWeek,standUpBikeType:e.standUpBikeType,runningStatus:e.runningStatus||"active",experienceLevel:e.experienceLevel,runEqPreference:this.calculateRunEqPreference(e),startDate:e.startDate,raceDate:e.raceDate,trainingPhilosophy:e.trainingPhilosophy||"Zone-Based Training"},weeks:r,trainingPaces:n.trainingPaces,periodization:n.periodization,planSummary:(0,u.A)((0,u.A)({},n.planSummary),{},{workoutVariety:"80+ different workouts with proper periodization",equipmentIntegration:e.standUpBikeType?"".concat(e.standUpBikeType," specific with smart brick integration"):"Running focused with optional equipment integration",coachingPhilosophy:"Research-based training with 4 ways to complete every workout",runeqAdvantage:"Every workout offers 4 ways to complete it - pure running, brick combinations, mixed segments, or full equipment",ageBasedGuidance:this.getAgeBasedGuidance(e),flexibilityMessage:"Remember: it's pretty much impossible to follow any plan exactly - life gets in the way, and that's completely okay. This serves as your guide that you can build around your life."})},userProfile:e}}catch(t){return console.error("Error generating training plan:",t),{success:!1,error:t.message,plan:this.generateFallbackPlan(e)}}}generateWeeks(e,t){const n=[],r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)||e.weeks;for(let i=1;i<=r;i++){const o=this.generateWeekWorkouts(i,e,t,r),a=this.getWeekDateRange(t.startDate,i);n.push({week:i,weekDates:a,phase:this.getPhase(i,r),totalMileage:this.calculateWeeklyMileage(i,e,t),workouts:o,isRestWeek:i%4===0&&i<r-2,coachingNote:this.generateCoachingNote(i,e,t),weeklyFocus:this.getWeeklyFocus(i,r),motivation:this.getWeeklyMotivation(i,r)})}return n}addDatesAndReorderWorkouts(e,t){if(!t)return console.warn("\u26a0\ufe0f No start date provided, workouts will remain in Monday-Sunday order"),e;const n=new Date(t+"T00:00:00"),r={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6};return Ne.log("\ud83d\udcc5 Training plan start date: ".concat(n.toDateString()," (").concat(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][n.getDay()],")")),e.map((e,t)=>{let i;if(0===t)i=new Date(n);else{const e=n.getDay(),r=0===e?0:7-e,o=new Date(n);o.setDate(n.getDate()+r+1),i=new Date(o),i.setDate(o.getDate()+7*(t-1))}const o=e.workouts.map(e=>{const t=r[e.day],n=new Date(i);let o=t-i.getDay();return o<0&&(o+=7),n.setDate(i.getDate()+o),(0,u.A)((0,u.A)({},e),{},{date:n.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),fullDate:n.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),actualDate:n,dateString:n.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})});let a;if(0===t){const e=n.getDay(),t=0===e?0:7-e,r=new Date(n);r.setDate(n.getDate()+t),r.setHours(23,59,59,999),a=o.filter(e=>e.actualDate>=n&&e.actualDate<=r)}else a=o;a.sort((e,t)=>e.actualDate-t.actualDate);const s=a.map(e=>{const{actualDate:t}=e;return(0,pi.A)(e,$h)});return Ne.log("\ud83d\udcc5 Week ".concat(e.week," workouts reordered:"),s.map(e=>"".concat(e.day," (").concat(e.date,")")).join(", ")),(0,u.A)((0,u.A)({},e),{},{workouts:s})})}getWeekDateRange(e,t){if(!e)return{start:"Week ".concat(t),end:"Week ".concat(t),displayText:"Week ".concat(t)};const n=new Date(e+"T00:00:00");if(1===t){const e=n.getDay(),r=0===e?0:7-e,i=new Date(n);return i.setDate(n.getDate()+r),{start:n.toLocaleDateString("en-US",{month:"short",day:"numeric"}),end:i.toLocaleDateString("en-US",{month:"short",day:"numeric"}),displayText:"".concat(n.toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ").concat(i.toLocaleDateString("en-US",{month:"short",day:"numeric"})),weekNumber:t}}{const e=n.getDay(),r=0===e?0:7-e,i=new Date(n);i.setDate(n.getDate()+r+1);const o=new Date(i);o.setDate(i.getDate()+7*(t-2));const a=new Date(o);return a.setDate(o.getDate()+6),{start:o.toLocaleDateString("en-US",{month:"short",day:"numeric"}),end:a.toLocaleDateString("en-US",{month:"short",day:"numeric"}),displayText:"".concat(o.toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ").concat(a.toLocaleDateString("en-US",{month:"short",day:"numeric"})),weekNumber:t}}}calculateCalendarDates(e,t,n){if(!e||!t||0===t.length)return["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];const r=new Date(e+"T00:00:00"),i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=[];if(1===n){const e=r.getDay(),n=0===e?0:7-e;for(let a=0;a<=n;a++){const e=new Date(r);e.setDate(r.getDate()+a);const n=i[e.getDay()];o.push({dayName:n,date:e,dateString:e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),fullDate:e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),isAvailable:t.includes(n)})}Ne.log("\ud83d\udcc5 Week 1 partial week: ".concat(o.map(e=>"".concat(e.dayName," ").concat(e.dateString)).join(", ")))}else{const e=r.getDay(),a=0===e?0:7-e,s=new Date(r);s.setDate(r.getDate()+a+1);const l=new Date(s);l.setDate(s.getDate()+7*(n-2));for(let n=0;n<7;n++){const e=new Date(l);e.setDate(l.getDate()+n);const r=i[e.getDay()];o.push({dayName:r,date:e,dateString:e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),fullDate:e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),isAvailable:t.includes(r)})}Ne.log("\ud83d\udcc5 Week ".concat(n," (Monday-Sunday): ").concat(o.map(e=>"".concat(e.dayName," ").concat(e.dateString)).join(", ")))}return o}generateWeekWorkouts(e,t,n){const r=[],i=this.calculateCalendarDates(n.startDate,n.availableDays,e),o=this.getWorkoutPattern(n);return i.forEach(t=>{const i=o[t.dayName];if("rest"!==i&&t.isAvailable){if(n.preferredBikeDays&&n.preferredBikeDays.includes(t.dayName)&&"Sunday"!==t.dayName&&n.standUpBikeType){const e=this.generateCycleteWorkout(i,n);r.push({day:t.dayName,date:t.dateString,fullDate:t.fullDate,actualDate:t.date,type:"bike",workout:e,focus:this.getCycleteWorkoutFocus(i),completed:!1,equipmentSpecific:!0,workoutDetails:e,coachingGuidance:this.getCycleteCoachingGuidance(i,n),runEqOptions:this.generateCycleteRunEqOptions(i,e,n)})}else{const o=this.selectWorkout(i,e,n);r.push({day:t.dayName,date:t.dateString,fullDate:t.fullDate,actualDate:t.date,type:i,workout:o,focus:this.getWorkoutFocus(i),completed:!1,equipmentSpecific:n.standUpBikeType&&this.shouldUseEquipment(i,n),workoutDetails:o,coachingGuidance:this.getWorkoutCoachingGuidance(i,n),runEqOptions:this.generateRunEqOptions(i,o,n)})}}else r.push({day:t.dayName,date:t.dateString,fullDate:t.fullDate,actualDate:t.date,type:"rest",workout:{name:t.isAvailable?"Rest Day":"Scheduled Rest",description:t.isAvailable?"Complete rest or light cross-training":"Rest day - not available for training"},focus:"Recovery",completed:!1})}),r}getWorkoutPattern(e){const{runsPerWeek:t,availableDays:n,preferredBikeDays:r=[],longRunDay:i}=e;let o={};["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].forEach(e=>{o[e]="rest"});let a=[];if(t>=3&&(a=["tempo","intervals","longRun"]),t>=4&&a.push("easy"),t>=5){const t=this.getElevationSpecificWorkout(e.raceElevationProfile);a.push(t)}if(t>=6&&a.push("easy"),t>=7&&a.push("easy"),e.raceElevationProfile&&t>=4&&(a=this.adjustForElevationProfile(a,e.raceElevationProfile)),i&&n.includes(i)&&(o[i]="longRun",a=a.filter(e=>"longRun"!==e)),r.length>0){const e=r.filter(e=>n.includes(e)&&"rest"===o[e]);for(const t of e)if("rest"===o[t]&&a.length>0){const e=a[0];e&&(o[t]=e,a=a.filter(t=>t!==e))}}const s=n.filter(e=>"rest"===o[e]).sort(()=>Math.random()-.5);for(let l=0;l<Math.min(s.length,a.length);l++)o[s[l]]=a[l];return o}selectWorkout(e,t,n){var r;const i=(null===(r=this.planTemplates[n.raceDistance])||void 0===r?void 0:r.weeks)||12,o=(this.getPhase(t,i),this.calculateWeeklyMileage(t,n));let a,s;switch(e){case"tempo":a=this.tempoLibrary.getRandomWorkout("TRADITIONAL_TEMPO"),s=Math.max(4,Math.min(8,Math.round(.12*o)));break;case"intervals":a=this.intervalLibrary.getRandomWorkout("VO2_MAX"),s=Math.max(3,Math.min(6,Math.round(.1*o)));break;case"hills":a=this.hillLibrary.getRandomWorkout("short_power"),s=Math.max(3,Math.min(6,Math.round(.1*o)));break;case"longRun":return this.selectProgressiveLongRun(t,n);case"bike":return this.selectBikeWorkout(t,n);case"brick":return this.selectBrickWorkout(t,n);case"brickLongRun":return this.selectBrickLongRun(t,n);case"easy":s=Math.max(3,Math.min(6,Math.round(.17*o))),a={name:"Easy Run",description:"Conversational pace, aerobic base building",duration:"".concat(10*s,"-").concat(12*s," minutes"),intensity:"Easy"};break;default:s=Math.max(3,Math.min(4,Math.round(.12*o))),a={name:"Recovery Run",description:"Very easy pace, active recovery",duration:"".concat(11*s,"-").concat(13*s," minutes"),intensity:"Recovery"}}return(0,u.A)((0,u.A)({},a),{},{distance:s})}selectBrickWorkout(e,t){var n;let r="aerobic";switch(this.getPhase(e,(null===(n=this.planTemplates[t.raceDistance])||void 0===n?void 0:n.weeks)||12)){case"Base":r=Math.random()<.7?"aerobic":"recovery";break;case"Build":r=Math.random()<.5?"tempo":"aerobic";break;case"Peak":r=Math.random()<.4?"speed":"tempo";break;case"Taper":r="recovery";break;default:r="aerobic"}return this.brickWorkoutService.generateBrickWorkout({type:r,equipment:t.standUpBikeType||"cyclete",difficulty:this.mapExperienceTodifficulty(t.experienceLevel)})}selectBrickLongRun(e,t){const n=this.calculateBaseDistance(e,t.raceDistance,t.experienceLevel),r=Math.round(.6*n),i=Math.round(.4*n*2.5);return{name:"Brick Long Run",description:"".concat(r," mile run + ").concat(i," mile ").concat(t.standUpBikeType||"bike"),duration:"".concat(Math.round(9*r)," minutes total"),intensity:"Easy-Moderate",segments:[{type:"run",distance:r,description:"Steady aerobic run"},{type:"transition",duration:"2-3 minutes",description:"Equipment change and setup"},{type:"bike",distance:i,description:"Moderate effort ".concat(t.standUpBikeType||"bike"," ride")}],safetyNotes:["Take your time with the transition","Keep both portions conversational","Stay hydrated throughout"],equipmentSpecific:!0}}calculateBaseDistance(e,t,n){let r=6;return"marathon"===t?r=Math.min(8+Math.floor(e/2),16):"halfMarathon"===t&&(r=Math.min(6+Math.floor(e/2),12)),"beginner"===n?r=Math.max(4,r-2):"elite"===n&&(r=Math.min(r+2,16)),r}mapExperienceTodifficulty(e){const t={beginner:"beginner",recreational:"intermediate",competitive:"advanced",elite:"advanced"};if(!t[e])throw new Error("Invalid experience level: ".concat(e,". Must be one of: ").concat(Object.keys(t).join(", ")));return t[e]}selectProgressiveLongRun(e,t){var n,r;const i=t.raceDistance,o=t.experienceLevel,a=(null===(n=this.planTemplates[i])||void 0===n?void 0:n.weeks)||12,s=this.getPhase(e,a),l=e%4===0&&e<a-2,u={"5K":{beginner:{min:3,max:6,peak:8},recreational:{min:4,max:8,peak:10},competitive:{min:5,max:10,peak:12},elite:{min:6,max:12,peak:15}},"10K":{beginner:{min:4,max:8,peak:10},recreational:{min:5,max:10,peak:12},competitive:{min:6,max:12,peak:15},elite:{min:7,max:15,peak:18}},Half:{beginner:{min:5,max:10,peak:13},recreational:{min:6,max:12,peak:15},competitive:{min:7,max:14,peak:16},elite:{min:8,max:16,peak:16}},Marathon:{beginner:{min:6,max:12,peak:16},recreational:{min:7,max:14,peak:16},competitive:{min:8,max:16,peak:16},elite:{min:10,max:16,peak:16}}},c=(null===(r=u[i])||void 0===r?void 0:r[o])||u.Marathon.recreational;let d;if(l)d=Math.max(c.min,Math.round(.7*this.getPreviousLongRunDistance(e,c)));else{const t=e/a;switch(s){case"Base":const n=c.min+(.75*c.peak-c.min)*(t/.4);d=Math.round(n);break;case"Build":const r=(t-.4)/.3;d=Math.round(.75*c.peak+(c.peak-.75*c.peak)*r);break;case"Peak":d=e%2===0?c.peak:Math.round(.85*c.peak);break;case"Taper":const i=(t-.9)/.1;d=Math.round(c.peak*(.6-.3*i));break;default:d=c.min+2}}return d=Math.max(c.min,Math.min(c.peak,d)),this.generateSpecificLongRun(d,s,e,t)}getPreviousLongRunDistance(e,t){if(e<=1)return t.min;const n=(e-1)/16;return t.min+(t.peak-t.min)*n*.8}generateSpecificLongRun(e,t,n,r){const i=this.getLongRunPaceGuidance(e,t),o=this.getLongRunCoaching(e,t,n);return{name:"".concat(e,"-Mile Long Run"),distance:e,duration:"".concat(Math.round(8.5*e),"-").concat(Math.round(11*e)," minutes"),description:"".concat(e," mile long run - ").concat(i.effort),structure:"".concat(o.warmup," + ").concat(e," miles @ ").concat(i.pace," + ").concat(o.cooldown),intensity:"Easy to Moderate",paceGuidance:i,coachingNotes:o.notes,phase:t,weekNumber:n,benefits:this.getLongRunBenefits(e,t),fuelingGuidance:e>=10?"Practice race fueling every 45-60 minutes":"Water as needed",runEqOptions:this.generateLongRunRunEqOptions(e,r)}}getLongRunPaceGuidance(e,t){return e<=6?{pace:"Easy conversational pace",effort:"should feel comfortable throughout",heartRate:"Zone 1-2 (65-75% max HR)"}:e<=12?{pace:"Easy pace with optional faster finish",effort:"conversational for 80%, can build last 2-3 miles",heartRate:"Zone 1-2, building to Zone 3 if feeling strong"}:{pace:"Marathon pace practice in middle miles",effort:"easy start, marathon pace middle, easy finish",heartRate:"Zone 1-2 building to Zone 3 for middle segment"}}getLongRunCoaching(e,t,n){const r=e>=12;return{warmup:r?"10-15 min easy":"5-10 min easy",cooldown:"10 min easy + stretching",notes:["Week ".concat(n,": ").concat(e," miles is perfect for your current fitness level"),r?"This is a key workout - focus on steady effort and fueling practice":"Build your aerobic base with relaxed, comfortable running","Peak"===t&&e>=14?"Practice your race day routine - gear, fueling, pacing":"Stay relaxed and enjoy the longer effort",e>=16?"Smart 16-mile cap - gets all endurance benefits without the injury risk of 20+ mile runs":""].filter(Boolean)}}getLongRunBenefits(e,t){return e<=8?"Aerobic base building, fat adaptation, capillary development":e<=12?"Endurance building, mental toughness, glycogen storage improvement":"Race-specific endurance, fueling practice, confidence building"}generateLongRunRunEqOptions(e,t){const n=t.standUpBikeType,r=Math.round(2.2*e);return{optionA:{name:"Full Run",description:"Complete ".concat(e," mile run as planned"),approach:"Traditional long run approach"},optionB:{name:"Run/Bike Brick",description:n?"".concat(Math.round(.6*e)," mile run + ").concat(Math.round(.4*r)," miles ").concat(n):"".concat(Math.round(.6*e)," mile run + bike portion"),approach:"Build endurance while saving legs"},optionC:{name:"Alternating Segments",description:n?"Alternate running and ".concat(n," every 20-30 minutes"):"Alternate running and biking every 20-30 minutes",approach:"Maximum freshness with full training benefit"},optionD:{name:n?"Full ".concat(n):"Full Bike",description:n?"".concat(r," miles on ").concat(n):"".concat(r," miles biking"),approach:"Zero impact endurance - perfect for recovery or tired legs"}}}getPhase(e,t){const n=e/t;return n<=.4?"Base":n<=.7?"Build":n<=.9?"Peak":"Taper"}calculateWeeklyMileage(e,t,n){const r=4*n.runsPerWeek,i=1.5*r,o=e/t.weeks;return o<=.7?Math.round(r+o/.7*(i-r)):Math.round(i*(1-.5*(o-.7)))}getWorkoutFocus(e){return{tempo:"Lactate Threshold",intervals:"Speed & Power",hills:"Strength & Power",longRun:"Endurance",bike:"Equipment Training",brick:"RunEQ Brick Training",brickLongRun:"Brick Endurance",easy:"Recovery"}[e]||"Aerobic Base"}shouldUseEquipment(e,t){if(!t.standUpBikeType)return!1;if("bike"===e||"brick"===e||"brickLongRun"===e)return!0;return this.calculateRunEqPreference(t)>30&&("tempo"===e||"easy"===e)}calculateTrainingPaces(e){return{easy:"8:30-9:00 min/mile",tempo:"7:00-7:30 min/mile",intervals:"6:00-6:30 min/mile",recovery:"9:00-9:30 min/mile"}}generateCoachingNote(e,t,n){const r=this.getPhase(e,t.weeks),i=e/t.weeks,o=e%4===0&&e<t.weeks-2,a=n.standUpBikeType;if(1===e)return"Here we go - week 1 of your training journey! We're laying down the base and preparing you for what's to come. ".concat(a?"Since you have a ".concat(a,", we'll use it strategically to keep you fresh while building fitness."):""," Remember, it's pretty much impossible to follow any plan exactly - life gets in the way, and that's completely okay. This serves as your guide that you can build around your life.");if(o)return"This week is a recovery week where we see a reduction in overall training. This lets your body adapt and rebuild stronger. Listen to your body - these easier weeks are where the magic happens. You can achieve way more than you think, and this foundation week will set you up perfectly for what's ahead.";switch(r){case"Base":return e<=3?"We're building your aerobic foundation - think of this as constructing the base of your fitness pyramid. Your long runs at the weekend are so important for building the endurance you'll need. ".concat(a?"Your stand-up bike isn't just cross-training, it's performance training that counts just as much as pure running.":""," Focus on effort over pace right now."):"Your body is adapting beautifully to the training! You should be feeling stronger and more comfortable with the weekly rhythm. ".concat(a?"Those brick workouts are your secret weapon - your body gets more benefit from mixed training than pure running alone.":""," Keep building that strong foundation.");case"Build":return i<=.55?"Time to step things up! Your body is ready to handle more challenge. You'll notice some harder workouts creeping in - this is where we start sharpening that speed and power. There will be tough moments over the next few weeks, but many more highs as you get fitter and stronger.":"The biggest weeks are coming! Your fitness is really developing now. ".concat(e>=.6*t.weeks?"Time to start fueling during your long runs - around every 30-45 minutes is a good starting point.":""," Trust the process, you've got this.");case"Peak":return"These are the biggest weeks - trust the process, you've got this! Your body has been preparing for this volume. Remember to stay flexible with your schedule and listen to your body. Every workout doesn't have to be perfect - consistency over perfection wins every time.";case"Taper":return i>=.95?"Here we go - race week is here! Time to shine and show what you're made of. The hard work is done, now we trust in all that training. Stay relaxed, get good sleep, and remember - you're so much stronger than when you started this journey.":"The hard work is done! Now we're letting your body absorb all that training and get ready to perform. It might feel weird to do less, but this is how we peak properly. Your legs will feel fresh and fast by race day.";default:return"I'm here to help you on your journey to get where you want to be. Every week builds on the last, and you're making great progress even when it doesn't feel like it."}}getWeeklyFocus(e,t){const n=this.getPhase(e,t);if(e%4===0&&e<t-2)return"Recovery & Adaptation";switch(n){case"Base":return e<=2?"Foundation Building":"Aerobic Development";case"Build":return"Strength & Speed Development";case"Peak":return"Race Simulation & Peak Fitness";case"Taper":return e>=t-1?"Race Preparation":"Recovery & Sharpening";default:return"Balanced Training"}}getWeeklyMotivation(e,t){const n={Base:["Every mile is building your foundation \ud83d\udcaa","Consistency is your superpower right now \u26a1","Your future racing self will thank you for this base work \ud83d\ude4f","Strong foundations create breakthrough performances \ud83c\udfd7\ufe0f"],Build:["Time to discover what you're capable of! \ud83d\ude80","Challenge accepted - your body is ready for this \ud83d\udcaa","Every hard workout is making you stronger \ud83d\udcc8","You're building the fitness that will carry you to your goal \ud83c\udfaf"],Peak:["This is what all that base work was preparing you for! \u26f0\ufe0f","Your biggest weeks - embrace the challenge \ud83d\udcaa","Peak fitness is within reach - trust the process \ud83c\udfaf","You're stronger than you think you are \ud83d\udcaa"],Taper:["The hard work is done - time to sharpen up! \u2728","Your body is absorbing all that training magic \ud83e\ude84","Race day confidence is building with every easy step \ud83d\ude0a","You've earned this taper - enjoy feeling fresh! \ud83c\udf1f"]},r=n[this.getPhase(e,t)]||n.Base;return r[e%r.length]}getWorkoutCoachingGuidance(e,t){const n=t.standUpBikeType,r={tempo:{purpose:"This tempo workout builds your lactate threshold - the pace you can hold for about an hour.",encouragement:"Aim for 'comfortably hard' - you should be breathing rhythmically but able to speak in short sentences.",equipment:n?"Your ".concat(n," is perfect for tempo work - the smooth motion lets you focus on sustained effort without impact stress."):""},intervals:{purpose:"These intervals develop your VO2 max and speed - this is where we build your top-end power.",encouragement:"These will feel challenging, but that's exactly what makes you faster. Focus on form and smooth breathing.",equipment:n?"Short, intense efforts translate beautifully to your ".concat(n," - you'll maintain the same training effect with less impact."):""},hills:{purpose:"Hill training builds power, strength, and mental toughness - the complete package for better running.",encouragement:"Think 'power up, float down' - drive with your arms going up, then relax and let gravity help on the way down.",equipment:n?"Hill repeats on your ".concat(n," let you focus purely on power without worrying about footing or downhill impact."):""},longRun:{purpose:"Your long run builds the endurance foundation everything else sits on - this is your most important weekly workout.",encouragement:"Keep it conversational - you should be able to chat with a training partner throughout most of this run.",equipment:n?"Long efforts on your ".concat(n," give you the same endurance benefits while keeping your legs fresher for the week ahead."):""},brick:{purpose:"Brick workouts teach your body to transition between activities while maintaining effort - pure RunEQ magic.",encouragement:"The transitions might feel weird at first, but this is where you develop true fitness versatility. Take your time with equipment changes.",equipment:n?"This is what your ".concat(n," was made for - seamless run/bike combinations that no traditional plan can offer."):""},easy:{purpose:"Easy runs build your aerobic base and promote recovery - they're harder to pace correctly than they seem!",encouragement:"Truly easy - err on the side of too slow rather than too fast. This is active recovery that makes you stronger.",equipment:n?"Perfect recovery day for your ".concat(n," - get the blood flowing without the impact stress."):""}},i=r[e]||r.easy;return{purpose:i.purpose,encouragement:i.encouragement,equipmentNote:i.equipment}}generateRunEqOptions(e,t,n){const r=n.standUpBikeType,i={optionA:{name:"Full Run",description:"Complete the workout as a traditional run",approach:"Pure running - stick to the classic approach"},optionB:{name:"Run/Bike Brick",description:r?"Start running, switch to ".concat(r," mid-workout, finish running"):"Start running, switch to bike mid-workout, finish running",approach:"Best of both worlds - get variety while hitting your training zones"},optionC:{name:"Mixed Segments",description:r?"Alternate between running and ".concat(r," every 10-15 minutes"):"Alternate between running and biking every 10-15 minutes",approach:"Keep it fresh - your body adapts better to variety"},optionD:{name:r?"Full ".concat(r):"Full Bike",description:r?"Complete the entire workout on your ".concat(r):"Complete the entire workout on bike",approach:"Low impact, high benefit - perfect for recovery or when your legs need a break"}};return i.coachingNote="tempo"===e?"Today's workout gives you four ways to get it done - pick what works for your body and schedule.":"intervals"===e?"Want to switch things up? All four options deliver the same speed benefits - choose what feels right today.":"brick"===e?"This is pure RunEQ training - experiment with different transitions to find your rhythm.":"Feeling tired? Options B, C, or D give you the same training benefit while being kinder to your legs.",i}getAgeBasedGuidance(e){const t={beginner:{guidance:"Starting your running journey at any age is something to celebrate! Focus on consistency over intensity.",longRunCap:"Long runs should feel comfortable and conversational - quality over extreme distance."},recreational:{guidance:"Your experience gives you great body awareness - trust those instincts about when to push and when to back off.",longRunCap:"Smart long run approach - we cap at 16 miles to protect your joints while building the endurance you need."},competitive:{guidance:"Your competitive experience is a huge asset - you know the difference between discomfort and danger.",longRunCap:"At your level, we focus on quality over quantity - 16-mile long runs with smart pacing beats body-destroying 20+ mile slogs."},elite:{guidance:"Your advanced fitness allows for higher training loads, but smart recovery remains crucial.",longRunCap:"Elite-level training with RunEQ intelligence - even at your level, 16-mile caps with brick options provide superior training stimulus."}},n=t[e.experienceLevel]||t.recreational;return{message:n.guidance,longRunPhilosophy:n.longRunCap,recoveryFocus:"Recovery weeks are where the magic happens - your body adapts and gets stronger during these easier periods."}}generateFallbackPlan(e){return{planOverview:{raceDistance:e.raceDistance,totalWeeks:12,runsPerWeek:e.runsPerWeek,standUpBikeType:e.standUpBikeType,experienceLevel:e.experienceLevel},weeks:[],message:"Using simplified plan - full generator temporarily unavailable"}}selectBikeWorkout(e,t){var n;const r=this.getPhase(e,(null===(n=this.planTemplates[t.raceDistance])||void 0===n?void 0:n.weeks)||12),i=t.standUpBikeType||"bike";let o="Easy",a="45-60 minutes",s="Conversational pace ".concat(i," ride");switch(r){case"Base":o="Easy",a="45-75 minutes",s="Long aerobic ".concat(i," ride, building endurance");break;case"Build":o="Easy-Moderate",a="60-90 minutes",s="Steady ".concat(i," ride with some moderate efforts");break;case"Peak":o="Moderate",a="45-60 minutes",s="Race-pace ".concat(i," ride for sharpening")}return{name:"".concat("cyclete"===i?"Cyclete":"elliptigo"===i?"ElliptiGO":"Bike"," Long Ride"),description:s,duration:a,intensity:o,equipmentSpecific:!0,safetyNotes:["Focus on smooth ".concat("cyclete"===i?"teardrop motion":"elliptigo"===i?"elliptical motion":"pedaling technique"),"Maintain steady effort throughout","Stay hydrated and fuel as needed for longer sessions","Practice race-day equipment setup"],technique:"cyclete"===i?"Focus on forward drive phase of teardrop motion, maintain 70-85 RPM":"elliptigo"===i?"Use full stride extension with coordinated upper body movement":"Standard cycling technique"}}generateCycleteWorkout(e,t){var n;const r=t.standUpBikeType||"cyclete",i=(this.getPhase(1,(null===(n=this.planTemplates[t.raceDistance])||void 0===n?void 0:n.weeks)||12),{tempo:{name:"".concat("cyclete"===r?"Cyclete":"ElliptiGO"," Tempo Ride"),description:"20-25 minutes @ comfortably hard sustained effort",duration:"45-50 minutes",intensity:"Medium-Hard",structure:"10min easy warmup + 20-25min @ tempo effort + 10min easy cooldown",focus:"Lactate Threshold",safetyNotes:["Maintain consistent cadence throughout tempo segment","Focus on smooth motion pattern","Keep core engaged for stability"]},intervals:{name:"".concat("cyclete"===r?"Cyclete":"ElliptiGO"," Speed Intervals"),description:"6x3min @ hard effort (90sec easy recovery)",duration:"40-45 minutes",intensity:"Hard",structure:"10min easy warmup + 6x3min @ hard effort (90sec easy) + 10min easy cooldown",focus:"VO2 Max Development",safetyNotes:["Focus on power through the drive phase","Keep smooth motion even at high intensity","Recover fully between intervals"]},hills:{name:"".concat("cyclete"===r?"Cyclete":"ElliptiGO"," Power Intervals"),description:"8x90sec @ high resistance/power (jog/coast recovery)",duration:"40-45 minutes",intensity:"Hard",structure:"10min easy warmup + 8x90sec @ high resistance (90sec easy) + 10min easy cooldown",focus:"Power Development",safetyNotes:["Increase resistance/incline for power work","Drive hard through full motion range","Focus on form over pure speed"]},longRun:{name:"".concat("cyclete"===r?"Cyclete":"ElliptiGO"," Long Ride"),description:"60-90 minutes @ conversational effort",duration:"60-90 minutes",intensity:"Easy",structure:"60-90min @ steady conversational effort",focus:"Aerobic Endurance",safetyNotes:["Maintain conversational effort throughout","Practice nutrition timing for longer efforts","Focus on efficient motion pattern"]},easy:{name:"".concat("cyclete"===r?"Cyclete":"ElliptiGO"," Recovery Ride"),description:"30-40 minutes @ very easy effort",duration:"30-40 minutes",intensity:"Very Easy",structure:"30-40min @ recovery effort",focus:"Active Recovery",safetyNotes:["Keep effort truly easy","Focus on smooth, relaxed motion","Perfect for recovery days"]},brick:{name:"".concat("cyclete"===r?"Cyclete":"ElliptiGO","/Run Brick"),description:"20min bike + 15min run @ steady effort",duration:"45-50 minutes",intensity:"Medium",structure:"20min ".concat(r," @ steady + quick transition + 15min run @ steady"),focus:"Transition Training",safetyNotes:["Practice quick equipment transitions","Start run portion slightly easier","Focus on form during transition"]}}),o=i[e]||i.easy;return(0,u.A)((0,u.A)({},o),{},{type:"bike",equipmentSpecific:!0,equipment:r,technique:"cyclete"===r?"Focus on forward drive phase of teardrop motion, maintain 70-85 RPM":"Use full stride extension with coordinated upper body movement"})}getCycleteWorkoutFocus(e){return{tempo:"Lactate Threshold",intervals:"VO2 Max Development",hills:"Power Development",longRun:"Aerobic Endurance",easy:"Active Recovery",brick:"Transition Training"}[e]||"Aerobic Base"}getCycleteCoachingGuidance(e,t){const n=t.standUpBikeType||"cyclete",r={tempo:{purpose:"This tempo workout builds your lactate threshold using your ".concat(n," - same training benefit with less impact stress."),encouragement:"Focus on sustained effort and smooth motion. Your breathing should be rhythmic but controlled.",equipment:"The ".concat(n,"'s smooth motion is perfect for tempo work - you can maintain consistent effort without worrying about ground impact.")},intervals:{purpose:"These intervals develop your VO2 max and power on the ".concat(n," - high-intensity training with smart recovery."),encouragement:"Push hard during the work intervals, then truly recover. Focus on maintaining form even at high intensity.",equipment:"Your ".concat(n," lets you hit these intensities while protecting your legs for the rest of the week.")},hills:{purpose:"Power intervals on your ".concat(n," build strength and neuromuscular power - the same benefits as hill running without the downhill impact."),encouragement:"Drive hard through the power phase, focusing on full range of motion. This builds real running strength.",equipment:"Increase resistance or incline to simulate hill work - your ".concat(n," gives you perfect control over the training stimulus.")},longRun:{purpose:"This long ride builds the same endurance foundation as a long run while keeping your legs fresher for the week ahead.",encouragement:"Keep it conversational and enjoy the longer effort. This is building your aerobic engine.",equipment:"Long efforts on your ".concat(n," give you all the endurance benefits while reducing weekly impact load - smart training.")},easy:{purpose:"Easy recovery ride promotes blood flow and adaptation while giving your running muscles a break.",encouragement:"Keep this truly easy - it's active recovery that makes you stronger for tomorrow's workout.",equipment:"Perfect recovery day use of your ".concat(n," - get the movement benefits without impact stress.")},brick:{purpose:"Brick training teaches your body to transition between activities while maintaining effort - this is pure RunEQ methodology.",encouragement:"Take your time with transitions and expect the run to feel different at first. This builds real fitness versatility.",equipment:"This is what your ".concat(n," was designed for - seamless training combinations that traditional plans can't offer.")}},i=r[e]||r.easy;return{purpose:i.purpose,encouragement:i.encouragement,equipmentNote:i.equipment}}generateCycleteRunEqOptions(e,t,n){const r=n.standUpBikeType||"cyclete";return{optionA:{name:"Full ".concat("cyclete"===r?"Cyclete":"ElliptiGO"),description:"Complete the workout entirely on your ".concat(r),approach:"Pure equipment training - maximum impact reduction while maintaining training effect"},optionB:{name:"".concat("cyclete"===r?"Cyclete":"ElliptiGO","/Run Brick"),description:"Start on ".concat(r,", transition to running for final portion"),approach:"Best of both worlds - equipment benefits plus running specificity"},optionC:{name:"Mixed Segments",description:"Alternate between ".concat(r," and running every 10-15 minutes"),approach:"Maximum variety - keeps workout fresh and engaging"},optionD:{name:"Traditional Run",description:"Convert to equivalent running workout if preferred",approach:"Classic approach - pure running with traditional structure"},coachingNote:"Your ".concat(r," gives you training options that no traditional plan can offer - choose what feels right for your body today.")}}getElevationSpecificWorkout(e){switch(e){case"flat":case"moderate":default:return"intervals";case"rolling":case"hilly":return"hills"}}adjustForElevationProfile(e,t){const n=e.filter(e=>"intervals"===e).length,r=(e.filter(e=>"tempo"===e).length,e.filter(e=>"hills"===e).length),i=e.filter(e=>"easy"===e).length;switch(t){case"flat":if(r>0&&n<2&&i>0){const t=e.findIndex(e=>"hills"===e||"easy"===e);-1!==t&&(e[t]="intervals")}break;case"rolling":break;case"moderate":if(0===r&&i>0){const t=e.findIndex(e=>"easy"===e);-1!==t&&(e[t]="hills")}break;case"hilly":if(r<2&&i>0){const t=e.findIndex(e=>"easy"===e);-1!==t&&(e[t]="hills")}if(r<2&&e.filter(e=>"easy"===e).length>1){const t=e.findLastIndex(e=>"easy"===e);-1!==t&&(e[t]="hills")}}return e}preserveAndMergeWeeks(e,t,n){Ne.log("\ud83d\udd27 Preserving completed weeks and merging...");const r=(null===e||void 0===e?void 0:e.weeks)||(null===e||void 0===e?void 0:e.weeklyPlans);if(!r)throw new Error("Training plan structure is invalid - missing weeks array");const i=r.slice(0,n-1);Ne.log("  Preserved",i.length,"completed weeks"),Ne.log("  Merging",t.length,"new weeks from week",n);const o=[...i,...t];return Ne.log("  \u2705 Weeks merged successfully"),Ne.log("    Total weeks:",o.length),Ne.log("    Completed weeks:",i.length),Ne.log("    New weeks:",t.length),o}async regeneratePlanFromCurrentWeek(e,t,n){throw Ne.warn("\u26a0\ufe0f regeneratePlanFromCurrentWeek() is deprecated. Use AI regeneration instead."),new Error("This method is deprecated. Plan regeneration should use AI via TrainingPlanAIService.")}async regeneratePlanWithInjury(e,t,n,r,i,o){Ne.log("\ud83c\udfe5 Generating injury recovery plan..."),Ne.log("  Current week:",n),Ne.log("  Weeks off running:",r),Ne.log("  Selected equipment:",i),Ne.log("  Reduce training days:",o);const a=(null===e||void 0===e?void 0:e.weeklyPlans)||(null===e||void 0===e?void 0:e.weeks);if(!a)throw new Error("Training plan structure is invalid - missing weeklyPlans/weeks array");const s=a.slice(0,n-1);Ne.log("  Preserved",s.length,"completed weeks");const l=[];i.pool&&l.push({type:"pool",library:this.aquaRunningLibrary}),i.elliptical&&l.push({type:"elliptical",library:this.ellipticalLibrary}),i.stationaryBike&&l.push({type:"stationaryBike",library:this.stationaryBikeLibrary}),i.swimming&&l.push({type:"swimming",library:this.swimmingLibrary}),i.rowing&&l.push({type:"rowing",library:this.rowingLibrary}),i.standUpBike&&l.push({type:"standUpBike",library:this.standUpBikeLibrary}),Ne.log("  Available cross-training options:",l.length);const c=n,d=n+r-1,h=n+r;Ne.log("  Injury weeks:",c,"-",d),Ne.log("  Return to running week:",h);const p=a.slice(n-1).map((e,t)=>{const r=n+t,i=r===h;return r>=c&&r<=d?(Ne.log("  Week ".concat(r,": Cross-training only")),this.createCrossTrainingWeek(e,l,o)):i?(Ne.log("  Week ".concat(r,": Return to running transition")),this.createReturnToRunningWeek(e,l,o)):(Ne.log("  Week ".concat(r,": Regular training (full volume restored)")),e)}),m=[...s,...p];Ne.log("  \u2705 Injury recovery plan generated successfully"),Ne.log("    Total weeks:",m.length),Ne.log("    Completed weeks:",s.length),Ne.log("    Modified weeks:",p.length);const f={weeks:a,planOverview:e.planOverview};return(0,u.A)((0,u.A)({},e),{},{weeks:m,injuryRecoveryActive:!0,injuryRecoveryInfo:{startWeek:c,endWeek:d,returnWeek:h,selectedEquipment:i,weeksOffRunning:r,reduceTrainingDays:o},originalPlanBeforeInjury:f})}createCrossTrainingWeek(e,t,n){const r=e.workouts||[],i=r.filter(e=>"rest"!==e.type&&"REST"!==e.type);Ne.log("  createCrossTrainingWeek: Total days: ".concat(r.length,", Actual workouts: ").concat(i.length,", Reduce by: ").concat(n));const o=Math.max(1,i.length-n);Ne.log("  Target workout count: ".concat(o));const a=["long","LONG","longRun","tempo","TEMPO","intervals","INTERVALS","hills","HILLS","easy","EASY","recovery","RECOVERY"],s=[...i].sort((e,t)=>{const n=a.indexOf(e.type),r=a.indexOf(t.type);return(-1===n?999:n)-(-1===r?999:r)}).slice(0,o);Ne.log("  Workouts to use:",s.map(e=>"".concat(e.day," ").concat(e.type)));const l=new Map;s.forEach((e,t)=>{l.set(e.day,{originalWorkout:e,index:t})});const c=s.length,d=t.length,h=Math.floor(c/d),p=c%d;Ne.log("  Equipment distribution: ".concat(c," workouts across ").concat(d," types")),Ne.log("    Base per equipment: ".concat(h,", Extra workouts to distribute: ").concat(p));const m=[];for(let u=0;u<d;u++){const e=h+(u<p?1:0);for(let t=0;t<e;t++)m.push(u)}Ne.log("    Equipment assignments:",m);const f=r.map(e=>{if("rest"===e.type||"REST"===e.type)return{day:e.day,date:e.date,fullDate:e.fullDate,dateString:e.dateString,type:"rest",name:"Rest Day",description:"Recovery day - focus on healing"};if(!l.has(e.day))return{day:e.day,date:e.date,fullDate:e.fullDate,dateString:e.dateString,type:"rest",name:"Rest Day",description:"Recovery day - focus on healing"};const{originalWorkout:n,index:r}=l.get(e.day),i=m[r],{type:o,library:a}=t[i];let s="EASY";"tempo"===n.type||"TEMPO"===n.type?s="TEMPO":"intervals"===n.type||"INTERVALS"===n.type?s="INTERVALS":"long"===n.type||"LONG"===n.type||"longRun"===n.type?s="LONG":"hills"===n.type||"HILLS"===n.type?s="HILLS":"recovery"!==n.type&&"RECOVERY"!==n.type||(s="RECOVERY");const u={rowing:{HILLS:"INTERVALS"},swimming:{HILLS:"INTERVALS"},pool:{HILLS:"INTERVALS"}};if(u[o]&&u[o][s]){const e=s;s=u[o][s],Ne.log("    Equipment '".concat(o,"' doesn't support '").concat(e,"', mapping to '").concat(s,"'"))}let c=45;if(n.distance)c=Math.round(10*n.distance);else if(n.duration){const e=n.duration.match(/(\d+)/);e&&(c=parseInt(e[1]))}Ne.log("    ".concat(n.day,": Original type=").concat(n.type,", Mapped to=").concat(s,", Duration=").concat(c,"min, Equipment=").concat(o));const d=a.getWorkoutByDuration(s,c);return Ne.log("      Returned workout:",d?d.name:"null/undefined"),{day:n.day,date:n.date,fullDate:n.fullDate,dateString:n.dateString,type:"cross-training",crossTrainingType:o,name:d?d.name:"".concat(o," - ").concat(s),description:d?d.description:"Cross-training on ".concat(o),structure:d?d.structure:null,duration:d?d.duration:"".concat(c," minutes"),intensity:d?d.intensity:s.toLowerCase(),benefits:d?d.benefits:null,technique:d?d.technique:null,effort:d?d.effort:null,coachingTips:d?d.coachingTips:null,distance:null,pace:null,originalWorkout:{type:n.type,name:n.name,distance:n.distance,duration:n.duration}}});return Ne.log("  Full week: ".concat(f.length," days total")),(0,u.A)((0,u.A)({},e),{},{workouts:f,weekType:"injury-recovery",note:"Cross-training only - No running during injury recovery"})}createReturnToRunningWeek(e,t,n){const r=e.workouts||[],i=r.filter(e=>"rest"!==e.type&&"REST"!==e.type),o=Math.max(1,i.length-n),a=["long","LONG","longRun","tempo","TEMPO","intervals","INTERVALS","hills","HILLS","easy","EASY","recovery","RECOVERY"],s=[...i].sort((e,t)=>{const n=a.indexOf(e.type),r=a.indexOf(t.type);return(-1===n?999:n)-(-1===r?999:r)}).slice(0,o),l=Math.ceil(o/2),c=new Map;s.forEach((e,t)=>{c.set(e.day,{originalWorkout:e,index:t})});const d=r.map(e=>{if("rest"===e.type||"REST"===e.type)return{day:e.day,date:e.date,fullDate:e.fullDate,dateString:e.dateString,type:"rest",name:"Rest Day",description:"Recovery day"};if(!c.has(e.day))return{day:e.day,date:e.date,fullDate:e.fullDate,dateString:e.dateString,type:"rest",name:"Rest Day",description:"Recovery day"};const{originalWorkout:n,index:r}=c.get(e.day);if(r<l)return{day:n.day,date:n.date,fullDate:n.fullDate,dateString:n.dateString,type:"easy",name:"Easy Return Run",description:"Easy-paced running to gradually return from injury",distance:n.distance?Math.round(.5*n.distance*10)/10:3,pace:n.pace||"easy",note:"\u26a0\ufe0f Return to running: Start slow, listen to your body"};{const e=(r-l)%t.length,{type:i,library:o}=t[e],a=o.getWorkoutByDuration("EASY",45);return{day:n.day,date:n.date,fullDate:n.fullDate,dateString:n.dateString,type:"cross-training",crossTrainingType:i,name:a?a.name:"".concat(i," workout"),description:a?a.description:"Cross-training on ".concat(i),structure:a?a.structure:null,distance:null,benefits:a?a.benefits:null,technique:a?a.technique:null,effort:a?a.effort:null,coachingTips:a?a.coachingTips:null}}});return(0,u.A)((0,u.A)({},e),{},{workouts:d,weekType:"return-to-running",note:"\u26a0\ufe0f Gradual return to running - Mix of easy runs and cross-training"})}reduceWeekTrainingDays(e,t){if(0===t)return e;const n=e.workouts||[],r=n.filter(e=>"rest"!==e.type&&"REST"!==e.type),i=["long","LONG","longRun","tempo","TEMPO","intervals","INTERVALS","hills","HILLS","easy","EASY","recovery","RECOVERY"],o=[...r].sort((e,t)=>{const n=i.indexOf(e.type),r=i.indexOf(t.type);return(-1===n?999:n)-(-1===r?999:r)}),a=Math.max(1,r.length-t),s=o.slice(0,a),l=new Set(s.map(e=>e.day)),c=n.map(e=>"rest"===e.type||"REST"===e.type||l.has(e.day)?e:{day:e.day,date:e.date,fullDate:e.fullDate,dateString:e.dateString,type:"rest",name:"Rest Day",description:"Recovery day"});return(0,u.A)((0,u.A)({},e),{},{workouts:c,note:e.note?"".concat(e.note," | Training days reduced by ").concat(t):"Training days reduced by ".concat(t)})}cancelInjuryRecovery(e){if(Ne.log("\ud83c\udfe5 Canceling injury recovery protocol..."),!e.injuryRecoveryActive)return Ne.warn("  \u26a0\ufe0f No active injury recovery to cancel"),e;if(!e.originalPlanBeforeInjury)throw Ne.error("  \u274c Original plan backup not found"),new Error("Cannot restore original plan - backup not found");return Ne.log("  \u2705 Restoring original plan"),(0,u.A)((0,u.A)({},e),{},{weeks:e.originalPlanBeforeInjury.weeks,injuryRecoveryActive:!1,injuryRecoveryInfo:null,originalPlanBeforeInjury:null})}},tp=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];const np=function(e){var t;let{isOpen:n,onClose:r,userProfile:i,trainingPlan:o,currentWeek:s}=e;const l=al(),[c,d]=(0,a.useState)(5),[h,p]=(0,a.useState)([]),[m,f]=(0,a.useState)([]),[g,y]=(0,a.useState)("Saturday"),[v,b]=(0,a.useState)([]),[w,D]=(0,a.useState)(!1),[k,x]=(0,a.useState)(null),[E,S]=(0,a.useState)(null);if((0,a.useEffect)(()=>{h.length>0&&!h.includes(g)?y(h[0]):0===h.length&&g&&y("Sunday")},[h,g]),(0,a.useEffect)(()=>{if(n&&Ie.j2.currentUser){const e=async()=>{try{Ne.log("\u2699\ufe0f ManagePlanModal: Loading fresh data from Firestore...");const e=await Me.getUserData(Ie.j2.currentUser.uid);if(Ne.log("  userData:",e),Ne.log("  userData.data keys:",null!==e&&void 0!==e&&e.data?Object.keys(e.data):"no data"),null!==e&&void 0!==e&&e.success&&null!==e&&void 0!==e&&e.data){const t=e.data.profile,n=e.data.trainingPlan;Ne.log("  Profile keys:",t?Object.keys(t):"no profile"),Ne.log("  Plan keys:",n?Object.keys(n):"no plan"),Ne.log("  Plan overview:",null===n||void 0===n?void 0:n.planOverview);const r=t||{};Ne.log("  Loading settings:"),Ne.log("    runsPerWeek:",r.runsPerWeek),Ne.log("    availableDays:",r.availableDays),Ne.log("    hardSessionDays:",r.hardSessionDays),Ne.log("    longRunDay:",r.longRunDay),Ne.log("    preferredBikeDays:",r.preferredBikeDays);const i=r.availableDays||[],o=r.longRunDay||"Sunday";d(r.runsPerWeek||5),p(i),f(r.hardSessionDays||[]),y(i.includes(o)?o:i.length>0?i[0]:"Sunday"),b(r.preferredBikeDays||[]),S(null),Ne.log("  \u2705 Settings loaded successfully")}}catch(e){Ne.error("\u274c Error loading settings:",e),S("Failed to load current settings. Please try again.")}};e()}},[n]),!n)return null;const C=(null===o||void 0===o||null===(t=o.planOverview)||void 0===t?void 0:t.raceDistance)||"Half",A={"5K":[3,4,5,6],"10K":[3,4,5,6],Half:[4,5,6,7],Marathon:[4,5,6,7]}[C]||[4,5,6];return(0,je.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4,padding:"20px"},onClick:e=>{e.target===e.currentTarget&&r()},children:(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%)",border:"1px solid #333",borderRadius:"12px",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",padding:"24px",position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,je.jsx)("style",{children:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        "}),(0,je.jsxs)("div",{style:{borderBottom:"1px solid #333",paddingBottom:"16px",marginBottom:"24px"},children:[(0,je.jsx)("h2",{style:{margin:0,fontSize:"1.5rem",color:"#fff",display:"flex",alignItems:"center",gap:"8px"},children:"\u2699\ufe0f Manage Plan"}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.9rem",color:"#999"},children:"Adjust your training schedule. Your completed weeks will be preserved."})]}),(0,je.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"Runs per week"}),(0,je.jsx)("div",{style:{display:"flex",gap:"8px"},children:[3,4,5,6].map(e=>{const t=A.includes(e);return(0,je.jsx)("button",{onClick:()=>t&&d(e),disabled:!t,title:t?"":"".concat(e," days not supported for ").concat(C," training"),style:{flex:1,padding:"12px",fontSize:"1rem",fontWeight:"500",border:c===e?"2px solid #3b82f6":"1px solid #333",background:t?c===e?"rgba(59, 130, 246, 0.1)":"#1a1a1a":"#0a0a0a",color:t?c===e?"#3b82f6":"#999":"#444",borderRadius:"6px",cursor:t?"pointer":"not-allowed",opacity:t?1:.4},children:e},e)})}),!A.includes(3)&&(0,je.jsxs)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#666"},children:[C," training requires minimum 4 runs per week"]})]}),(0,je.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"Training days"}),(0,je.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:tp.map(e=>(0,je.jsxs)("button",{onClick:()=>(e=>{if(h.includes(e)){const t=h.filter(t=>t!==e);p(t),m.includes(e)&&f(m.filter(t=>t!==e)),v.includes(e)&&b(v.filter(t=>t!==e)),g===e&&t.length>0?y(t[0]):0===t.length&&y("Sunday")}else{const t=[...h,e].sort((e,t)=>tp.indexOf(e)-tp.indexOf(t));p(t),!t.includes(g)&&t.length>0&&y(t[0])}})(e),style:{padding:"10px",fontSize:"0.9rem",border:h.includes(e)?"2px solid #22c55e":"1px solid #333",background:h.includes(e)?"rgba(34, 197, 94, 0.1)":"#1a1a1a",color:h.includes(e)?"#22c55e":"#999",borderRadius:"6px",cursor:"pointer"},children:[h.includes(e)?"\u2713 ":"",e.substring(0,3)]},e))}),(0,je.jsxs)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#666"},children:["Selected: ",h.length," days"]})]}),(0,je.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"Hard workout days"}),(0,je.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:h.filter(e=>e!==g).map(e=>(0,je.jsxs)("button",{onClick:()=>(e=>{h.includes(e)&&(m.includes(e)?f(m.filter(t=>t!==e)):f([...m,e]))})(e),style:{padding:"10px",fontSize:"0.9rem",border:m.includes(e)?"2px solid #f97316":"1px solid #333",background:m.includes(e)?"rgba(249, 115, 22, 0.1)":"#1a1a1a",color:m.includes(e)?"#f97316":"#999",borderRadius:"6px",cursor:"pointer"},children:[m.includes(e)?"\u26a1 ":"",e.substring(0,3)]},e))}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#666"},children:"Tempo runs, intervals, or hill workouts"})]}),(0,je.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"Long run day"}),(0,je.jsx)("select",{value:h.includes(g)?g:h.length>0?h[0]:"Sunday",onChange:e=>y(e.target.value),style:{width:"100%",padding:"12px",fontSize:"0.9rem",background:"#1a1a1a",color:"#fff",border:"1px solid #333",borderRadius:"6px",cursor:"pointer"},children:h.length>0?h.map(e=>(0,je.jsx)("option",{value:e,children:e},e)):(0,je.jsx)("option",{value:"Sunday",children:"Select training days first"})})]}),(null===i||void 0===i?void 0:i.standUpBikeType)&&(0,je.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,je.jsxs)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:["cyclete"===i.standUpBikeType?"Cyclete":"ElliptiGO"," days (optional)"]}),(0,je.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:h.map(e=>(0,je.jsxs)("button",{onClick:()=>(e=>{h.includes(e)&&(v.includes(e)?b(v.filter(t=>t!==e)):b([...v,e]))})(e),style:{padding:"10px",fontSize:"0.9rem",border:v.includes(e)?"2px solid #8b5cf6":"1px solid #333",background:v.includes(e)?"rgba(139, 92, 246, 0.1)":"#1a1a1a",color:v.includes(e)?"#8b5cf6":"#999",borderRadius:"6px",cursor:"pointer"},children:[v.includes(e)?"\ud83d\udeb4 ":"",e.substring(0,3)]},e))}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#666"},children:"Cross-training alternative to running"})]}),E&&!w&&(0,je.jsxs)("div",{style:{marginTop:"24px",padding:"16px",background:"rgba(239, 68, 68, 0.15)",border:"2px solid rgba(239, 68, 68, 0.5)",borderRadius:"12px",color:"#fca5a5"},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.2rem"},children:"\u26a0\ufe0f"}),(0,je.jsx)("strong",{style:{color:"#ef4444"},children:"Error"})]}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#fca5a5"},children:E})]}),w&&k&&(0,je.jsxs)("div",{style:{marginTop:"24px",padding:"20px",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(37, 99, 235, 0.1) 100%)",border:"2px solid rgba(59, 130, 246, 0.3)",borderRadius:"12px",textAlign:"center"},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",marginBottom:"12px"},children:[(0,je.jsx)("div",{style:{width:"24px",height:"24px",border:"3px solid rgba(59, 130, 246, 0.3)",borderTop:"3px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),(0,je.jsxs)("h3",{style:{margin:0,fontSize:"1.1rem",color:"#60a5fa",fontWeight:"600"},children:["regenerating"===k&&"\ud83e\udd16 AI Coach is regenerating your plan...","analyzing"===k&&"\ud83d\udca1 AI Coach is analyzing your adjustments...","saving"===k&&"\ud83d\udcbe Saving your updated plan..."]})]}),(0,je.jsxs)("p",{style:{margin:"8px 0 0 0",fontSize:"0.9rem",color:"#93c5fd",lineHeight:"1.5"},children:["regenerating"===k&&"Jason is restructuring your training plan based on your new preferences. Your completed workouts are being preserved.","analyzing"===k&&"Jason is reviewing your changes and preparing personalized coaching insights for your plan adjustments.","saving"===k&&"Almost done! Your updated plan is being saved..."]})]}),(0,je.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"32px",paddingTop:"24px",borderTop:"1px solid #333"},children:[(0,je.jsx)("button",{onClick:r,disabled:w,style:{flex:1,padding:"14px",fontSize:"1rem",fontWeight:"500",background:"#1a1a1a",color:"#999",border:"1px solid #333",borderRadius:"8px",cursor:w?"not-allowed":"pointer",opacity:w?.5:1},children:"Cancel"}),(0,je.jsx)("button",{onClick:async()=>{try{var e;if(S(null),!h||0===h.length)return S("Please select at least one training day."),void l.error("Please select at least one training day.");if(h.length!==c)return S("You selected ".concat(h.length," days but chose ").concat(c," runs per week. Please match them.")),void l.error("You selected ".concat(h.length," days but chose ").concat(c," runs per week."));if(!h.includes(g))return S("Long run day (".concat(g,") must be one of your selected training days.")),void l.error("Long run day must be one of your selected training days.");const n=m.filter(e=>h.includes(e)),r=v.filter(e=>h.includes(e));D(!0),x("regenerating"),Ne.log("\u2699\ufe0f Updating training plan..."),Ne.log("  Current week:",s),Ne.log("  New settings:",{runsPerWeek:c,trainingDays:h,hardDays:n,longRunDay:g,bikeDays:r});const a=new ep;let d=i.units;!d&&null!==o&&void 0!==o&&null!==(e=o.planOverview)&&void 0!==e&&e.units&&(d=o.planOverview.units,Ne.warn("\u26a0\ufe0f Units not in profile, using from training plan:",d)),d||(d="imperial",Ne.warn("\u26a0\ufe0f Units not found in profile or plan, defaulting to imperial (legacy data)"));const p=(0,u.A)((0,u.A)({},i),{},{units:d,runsPerWeek:c,availableDays:h,hardSessionDays:n,longRunDay:g,preferredBikeDays:r});Ne.log("  \ud83e\udd16 Using AI to regenerate plan structure...");const f=await Ye.regeneratePlanStructureFromCurrentWeek(o,p,s);if(!f.success||!f.newWeeks)throw new Error(f.error||"Failed to regenerate plan with AI");Ne.log("  \u2705 AI plan structure regenerated");const y=a.preserveAndMergeWeeks(o,f.newWeeks,s),b=(0,u.A)((0,u.A)({},o),{},{weeks:y,planOverview:(0,u.A)((0,u.A)({},o.planOverview),{},{runsPerWeek:p.runsPerWeek})});Ne.log("  \u2705 Plan regenerated successfully (AI + utility merge)"),x("analyzing"),Ne.log("  \ud83e\udd16 Generating AI coaching analysis...");try{const e={runsPerWeek:i.runsPerWeek,availableDays:i.availableDays||[],hardSessionDays:i.hardSessionDays||[],longRunDay:i.longRunDay,preferredBikeDays:i.preferredBikeDays||[]},t={oldSettings:e,newSettings:{runsPerWeek:c,availableDays:h,hardSessionDays:n,longRunDay:g,preferredBikeDays:r},currentWeek:s},a=await Ye.generatePlanAdjustmentCoaching(t,i,o);b.planAdjustmentCoaching=a,Ne.log("  \u2705 AI coaching analysis generated")}catch(t){Ne.error("  \u26a0\ufe0f Could not generate AI coaching (non-critical):",t)}x("saving"),await Me.saveTrainingPlan(Ie.j2.currentUser.uid,b),await Me.saveUserProfile(Ie.j2.currentUser.uid,p),Ne.log("  \u2705 Saved to Firestore"),l.success("Plan updated successfully! Your AI coach has regenerated your training plan."),setTimeout(()=>{window.location.reload()},1e3)}catch(t){Ne.error("\u274c Error updating plan:",t);const e=t.message||"Failed to update plan. Please try again.";S(e),l.error(e),D(!1),x(null)}},disabled:w,style:{flex:1,padding:"14px",fontSize:"1rem",fontWeight:"500",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#fff",border:"none",borderRadius:"8px",cursor:w?"not-allowed":"pointer",opacity:w?.7:1,position:"relative",overflow:"hidden"},children:w?(0,je.jsxs)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[(0,je.jsx)("span",{style:{width:"16px",height:"16px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 0.8s linear infinite",display:"inline-block"}}),"regenerating"===k&&"Regenerating Plan...","analyzing"===k&&"Coach Analyzing...","saving"===k&&"Saving..."]}):"Update Plan"})]})]})})};const rp=function(e){let{isOpen:t,onClose:n,userProfile:r,trainingPlan:i,currentWeek:o}=e;const[s,l]=(0,a.useState)(2),[c,d]=(0,a.useState)({pool:!1,elliptical:!1,stationaryBike:!1,swimming:!1,rowing:!1,standUpBike:!1}),[h,p]=(0,a.useState)(1),[m,f]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{t&&Ie.j2.currentUser&&(l(2),p(1),null!==r&&void 0!==r&&r.standUpBikeType?d(e=>(0,u.A)((0,u.A)({},e),{},{standUpBike:!0})):d({pool:!1,elliptical:!1,stationaryBike:!1,swimming:!1,rowing:!1,standUpBike:!1}))},[t,r]),!t)return null;const g=Object.values(c).filter(Boolean).length,y=[{id:"pool",name:"Pool / Aqua Running",emoji:"\ud83c\udfca",description:"Deep water running with flotation belt"},{id:"elliptical",name:"Elliptical",emoji:"\ud83c\udfc3",description:"Low-impact cardio machine"},{id:"stationaryBike",name:"Stationary Bike",emoji:"\ud83d\udeb4",description:"Spin bike, Peloton, or indoor trainer"},{id:"swimming",name:"Swimming",emoji:"\ud83c\udfca",description:"Lap swimming (technique required)"},{id:"rowing",name:"Rowing Machine",emoji:"\ud83d\udea3",description:"Concept2 or similar rowing erg"}];return null!==r&&void 0!==r&&r.standUpBikeType&&y.push({id:"standUpBike",name:"cyclete"===r.standUpBikeType?"Cyclete":"ElliptiGO",emoji:"\ud83d\udeb4",description:"Your stand-up bike"}),(0,je.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},children:(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%)",border:"1px solid #333",borderRadius:"12px",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",padding:"24px"},children:[(0,je.jsxs)("div",{style:{borderBottom:"1px solid #333",paddingBottom:"16px",marginBottom:"24px"},children:[(0,je.jsx)("h2",{style:{margin:0,fontSize:"1.5rem",color:"#fff",display:"flex",alignItems:"center",gap:"8px"},children:"\ud83c\udfe5 Injury Recovery Protocol"}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.9rem",color:"#999"},children:"We'll create a modified plan with cross-training while you recover. Your completed weeks will be preserved."})]}),(0,je.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"How many weeks off running do you need?"}),(0,je.jsx)("div",{style:{display:"flex",gap:"8px"},children:[1,2,3,4,5,6].map(e=>(0,je.jsx)("button",{onClick:()=>l(e),style:{flex:1,padding:"12px",fontSize:"1rem",fontWeight:"500",border:s===e?"2px solid #ef4444":"1px solid #333",background:s===e?"rgba(239, 68, 68, 0.1)":"#1a1a1a",color:s===e?"#ef4444":"#999",borderRadius:"6px",cursor:"pointer"},children:e},e))}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#666"},children:"Your race date will remain the same. Plan will be compressed after recovery."})]}),(0,je.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"Select available cross-training equipment"}),(0,je.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:y.map(e=>(0,je.jsxs)("button",{onClick:()=>{return t=e.id,void d(e=>(0,u.A)((0,u.A)({},e),{},{[t]:!e[t]}));var t},style:{padding:"12px 16px",fontSize:"0.9rem",border:c[e.id]?"2px solid #22c55e":"1px solid #333",background:c[e.id]?"rgba(34, 197, 94, 0.1)":"#1a1a1a",color:c[e.id]?"#22c55e":"#999",borderRadius:"6px",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.5rem"},children:e.emoji}),(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsxs)("div",{style:{fontWeight:"500"},children:[c[e.id]?"\u2713 ":"",e.name]}),(0,je.jsx)("div",{style:{fontSize:"0.8rem",color:c[e.id]?"#86efac":"#666",marginTop:"2px"},children:e.description})]})]},e.id))}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:0===g?"#ef4444":"#666"},children:0===g?"Please select at least one option":"Selected: ".concat(g," option").concat(g>1?"s":"")})]}),(0,je.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"Reduce training days per week during recovery"}),(0,je.jsx)("div",{style:{display:"flex",gap:"8px"},children:[0,1,2].map(e=>(0,je.jsx)("button",{onClick:()=>p(e),style:{flex:1,padding:"12px",fontSize:"1rem",fontWeight:"500",border:h===e?"2px solid #3b82f6":"1px solid #333",background:h===e?"rgba(59, 130, 246, 0.1)":"#1a1a1a",color:h===e?"#3b82f6":"#999",borderRadius:"6px",cursor:"pointer"},children:0===e?"Keep same":"-".concat(e," day").concat(e>1?"s":"")},e))}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#666"},children:"Recommended: Reduce by 1-2 days to focus on recovery"})]}),(0,je.jsxs)("div",{style:{background:"rgba(59, 130, 246, 0.05)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"8px",padding:"16px",marginBottom:"24px"},children:[(0,je.jsx)("div",{style:{color:"#3b82f6",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"Recovery Plan Summary"}),(0,je.jsxs)("div",{style:{fontSize:"0.85rem",color:"#999",lineHeight:"1.6"},children:[(0,je.jsxs)("div",{style:{marginBottom:"6px"},children:["\u2022 Weeks ",o,"-",o+s-1,": Cross-training only (",g," modality options)"]}),(0,je.jsxs)("div",{style:{marginBottom:"6px"},children:["\u2022 Week ",o+s,": Gradual return to running"]}),(0,je.jsxs)("div",{style:{marginBottom:"6px"},children:["\u2022 Training days: ",0===h?"Same as current plan":"Reduced by ".concat(h," day").concat(h>1?"s":"")]}),(0,je.jsx)("div",{children:"\u2022 Race date: Unchanged (plan will be compressed)"})]})]}),(0,je.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"32px",paddingTop:"24px",borderTop:"1px solid #333"},children:[(0,je.jsx)("button",{onClick:n,disabled:m,style:{flex:1,padding:"14px",fontSize:"1rem",fontWeight:"500",background:"#1a1a1a",color:"#999",border:"1px solid #333",borderRadius:"8px",cursor:m?"not-allowed":"pointer",opacity:m?.5:1},children:"Cancel"}),(0,je.jsx)("button",{onClick:async()=>{try{if(0===g)return void console.warn("Please select at least one cross-training option");f(!0),Ne.log("\ud83c\udfe5 Creating injury recovery plan..."),Ne.log("  Current week:",o),Ne.log("  Weeks off running:",s),Ne.log("  Selected equipment:",c),Ne.log("  Reduce training days by:",h);const t=new ep,n=(0,u.A)((0,u.A)({},r),{},{injuryRecovery:{weeksOffRunning:s,selectedEquipment:c,reduceTrainingDays:h,injuryStartWeek:o,returnToRunningWeek:o+s}}),a=await t.regeneratePlanWithInjury(i,n,o,s,c,h);Ne.log("  \u2705 Recovery plan generated successfully"),Ne.log("  \ud83e\udd16 Generating AI coaching analysis...");try{const e={weeksOffRunning:s,selectedEquipment:c,reduceTrainingDays:h,currentWeek:o,returnToRunningWeek:o+s},t=await Ye.generateInjuryRecoveryCoaching(e,r,i);a.injuryRecoveryCoaching=t,Ne.log("  \u2705 AI coaching analysis generated")}catch(e){Ne.error("  \u26a0\ufe0f Could not generate AI coaching (non-critical):",e)}await Me.saveTrainingPlan(Ie.j2.currentUser.uid,a),await Me.saveUserProfile(Ie.j2.currentUser.uid,n),Ne.log("  \u2705 Saved to Firestore"),window.location.reload()}catch(e){Ne.error("\u274c Error creating recovery plan:",e),console.error("Error creating recovery plan. Please try again."),f(!1)}},disabled:m||0===g,style:{flex:1,padding:"14px",fontSize:"1rem",fontWeight:"500",background:0===g?"#333":"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"#fff",border:"none",borderRadius:"8px",cursor:m||0===g?"not-allowed":"pointer",opacity:m||0===g?.5:1},children:m?"Creating Recovery Plan...":"Create Recovery Plan"})]})]})})},ip={clientId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_STRAVA_CLIENT_ID||"185232",clientSecret:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_STRAVA_CLIENT_SECRET||"",redirectUri:"".concat(window.location.origin,"/auth/strava/callback"),authorizationUrl:"https://www.strava.com/oauth/authorize",apiBaseUrl:"https://www.strava.com/api/v3",scope:"activity:read_all"};ip.clientId||console.error("\u26a0\ufe0f REACT_APP_STRAVA_CLIENT_ID is not set. Strava integration will not work.");const op=ip;const ap=new class{getAuthorizationUrl(){const e=new URLSearchParams({client_id:op.clientId,redirect_uri:op.redirectUri,response_type:"code",approval_prompt:"auto",scope:op.scope});return"".concat(op.authorizationUrl,"?").concat(e.toString())}async exchangeToken(e){const t=await fetch("https://www.strava.com/oauth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:op.clientId,client_secret:op.clientSecret,code:e,grant_type:"authorization_code"})});if(!t.ok){const e=await t.json();throw new Error("Strava token exchange failed: ".concat(e.message||t.statusText))}return t.json()}async refreshAccessToken(e){const t=await fetch("https://www.strava.com/oauth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:op.clientId,client_secret:op.clientSecret,refresh_token:e,grant_type:"refresh_token"})});if(!t.ok)throw new Error("Failed to refresh Strava access token");return t.json()}async getActivities(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const r=new URLSearchParams({page:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1).toString(),per_page:t.toString()});if(n){const e=Math.floor(n.getTime()/1e3);r.append("after",e.toString()),Ne.log("\ud83d\udcc5 Filtering activities after: ".concat(n.toLocaleDateString()," (").concat(e,")"))}const i=await fetch("".concat(op.apiBaseUrl,"/athlete/activities?").concat(r.toString()),{headers:{Authorization:"Bearer ".concat(e)}});if(!i.ok){if(401===i.status)throw new Error("STRAVA_TOKEN_EXPIRED");throw new Error("Failed to fetch Strava activities: ".concat(i.statusText))}return i.json()}async getActivity(e,t){const n=await fetch("".concat(op.apiBaseUrl,"/activities/").concat(t),{headers:{Authorization:"Bearer ".concat(e)}});if(!n.ok){if(401===n.status)throw new Error("STRAVA_TOKEN_EXPIRED");throw new Error("Failed to fetch Strava activity: ".concat(n.statusText))}return n.json()}async getActivityStreams(e,t){const n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:["time","distance","altitude","heartrate","cadence","watts","temp","moving","grade_smooth"]).join(","),r=await fetch("".concat(op.apiBaseUrl,"/activities/").concat(t,"/streams?keys=").concat(n,"&key_by_type=true"),{headers:{Authorization:"Bearer ".concat(e)}});if(!r.ok){if(401===r.status)throw new Error("STRAVA_TOKEN_EXPIRED");if(404===r.status)return Ne.log("\u26a0\ufe0f No stream data available for this activity"),null;throw new Error("Failed to fetch activity streams: ".concat(r.statusText))}return r.json()}async getAthlete(e){const t=await fetch("".concat(op.apiBaseUrl,"/athlete"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok){if(401===t.status)throw new Error("STRAVA_TOKEN_EXPIRED");throw new Error("Failed to fetch Strava athlete: ".concat(t.statusText))}return t.json()}isTokenExpired(e){return e-Math.floor(Date.now()/1e3)<3600}matchActivity(e,t){const n=new Date(e.start_date_local),r=new Date(t.date);if(n.getFullYear()!==r.getFullYear()||n.getMonth()!==r.getMonth()||n.getDate()!==r.getDate())return!1;if(!["Ride","VirtualRide","EBikeRide"].includes(e.type))return!1;if(t.distance){const n=e.distance/1609.34,r=t.distance;if(Math.abs(n-r)>.2*r)return!1}return!0}convertToRunEQCompletion(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=e.distance/1609.34,r=Math.round(e.moving_time/60);let i=null;if(["Run","VirtualRun"].includes(e.type)&&n>0){const t=e.moving_time/n,r=Math.floor(t/60),o=Math.round(t%60);i="".concat(r,":").concat(o.toString().padStart(2,"0"),"/mi")}let o=null;e.splits_standard&&e.splits_standard.length>0?o=e.splits_standard.map((e,t)=>({lap:t+1,distance:(e.distance/1609.34).toFixed(2)+" mi",distanceMiles:(e.distance/1609.34).toFixed(2),time:this.formatTime(e.moving_time),pace:e.average_speed?this.calculatePaceFromSpeed(e.average_speed):null,elevationGain:e.elevation_difference?Math.round(3.28084*e.elevation_difference):null,avgHeartRate:e.average_heartrate||null})):e.splits_metric&&e.splits_metric.length>0&&(o=e.splits_metric.map((e,t)=>({lap:t+1,distance:(e.distance/1e3).toFixed(2)+" km",distanceMiles:(e.distance/1609.34).toFixed(2),time:this.formatTime(e.moving_time),pace:e.average_speed?this.calculatePaceFromSpeed(e.average_speed):null,elevationGain:e.elevation_difference?Math.round(3.28084*e.elevation_difference):null,avgHeartRate:e.average_heartrate||null})));const a={distance:n.toFixed(2),duration:r,pace:i,notes:"Synced from Strava: ".concat(e.name),avgHeartRate:e.average_heartrate||null,maxHeartRate:e.max_heartrate||null,cadence:e.average_cadence||null,elevationGain:e.total_elevation_gain?Math.round(3.28084*e.total_elevation_gain):null,stravaActivityId:e.id,stravaActivityUrl:"https://www.strava.com/activities/".concat(e.id)};return o&&(a.laps=o),e.suffer_score&&(a.sufferScore=e.suffer_score),e.device_name&&(a.device=e.device_name),e.calories&&(a.calories=e.calories),t&&(a.streams=this.processStreams(t)),a}processStreams(e){const t={};return e.altitude&&(t.elevation=e.altitude.data),e.heartrate&&(t.heartRate=e.heartrate.data),e.distance&&(t.distance=e.distance.data),e.time&&(t.time=e.time.data),t}formatTime(e){const t=Math.floor(e/60),n=Math.round(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))}calculatePaceFromSpeed(e){if(!e||0===e)return null;const t=1609.34/e,n=Math.floor(t/60),r=Math.round(t%60);return"".concat(n,":").concat(r.toString().padStart(2,"0"),"/mi")}};const sp=new class{async syncActivities(e,t,n,r){if(Ne.log("\ud83d\udd04 Starting Strava sync...",{userId:e,currentWeek:r}),!t.stravaConnected)return Ne.log("\u26a0\ufe0f Strava not connected - skipping sync"),{success:!1,error:"Strava not connected"};try{var i;let a=t.stravaAccessToken;const s=t.stravaTokenExpiresAt;if(ap.isTokenExpired(s)){Ne.log("\ud83d\udd04 Access token expired - refreshing...");const n=await ap.refreshAccessToken(t.stravaRefreshToken),r=(0,_e.doc)(Ie.db,"users",e);await(0,_e.updateDoc)(r,{stravaAccessToken:n.access_token,stravaRefreshToken:n.refresh_token,stravaTokenExpiresAt:n.expires_at}),a=n.access_token,Ne.log("\u2705 Token refreshed successfully")}const l=null!==n&&void 0!==n&&null!==(i=n.planOverview)&&void 0!==i&&i.startDate?new Date(n.planOverview.startDate+"T00:00:00"):null;l||Ne.log("\u26a0\ufe0f No plan start date found - fetching all recent activities");const c=await ap.getActivities(a,1,50,l);Ne.log("\ud83d\udce5 Fetched ".concat(c.length," Strava activities ").concat(l?"since ".concat(l.toLocaleDateString()):""));const d=n.weeks[r-1];if(!d||!d.workouts)return Ne.log("\u26a0\ufe0f No workouts found for current week"),{success:!1,error:"No workouts in current week"};const h=[r];r>1&&h.push(r-1),r>2&&h.push(r-2);let p=[];h.forEach(e=>{const t=n.weeks[e-1];t&&t.workouts&&t.workouts.forEach(t=>{p.push((0,u.A)((0,u.A)({},t),{},{weekNumber:e,workoutIndex:0}))})}),Ne.log("\ud83d\udd0d Checking ".concat(p.length," workouts across ").concat(h.length," weeks"));const m=[],f=await this.getCompletedWorkouts(e);for(const e of c){Ne.log('\ud83d\udccb Activity: "'.concat(e.name,'" - Type: "').concat(e.type,'" - Date: ').concat(e.start_date_local));if(!["Ride","VirtualRide","EBikeRide","Run","VirtualRun"].includes(e.type)){Ne.log("  \u23ed\ufe0f Skipping - unsupported type: ".concat(e.type));continue}const t=this.findMatchingWorkout(e,p,f);var o;if(t)Ne.log("\u2705 Matched Strava activity ".concat(e.id," to workout:"),{day:t.day,week:t.weekNumber,workout:null===(o=t.workout)||void 0===o?void 0:o.name,type:e.type}),m.push({activity:e,workout:t})}Ne.log("\ud83c\udfaf Found ".concat(m.length," matching workouts"));let g=0;for(const t of m){await this.completeWorkout(e,t.workout,t.activity,a)&&g++}return Ne.log("\u2705 Strava sync complete: ".concat(g,"/").concat(m.length," workouts auto-completed")),{success:!0,activitiesFetched:c.length,matchesFound:m.length,workoutsCompleted:g}}catch(a){return console.error("\u274c Strava sync error:",a),"STRAVA_TOKEN_EXPIRED"===a.message?{success:!1,error:"Token expired - please reconnect Strava"}:{success:!1,error:a.message}}}findMatchingWorkout(e,t,n){const r=new Date(e.start_date_local),i=e.distance/1609.34;Ne.log("\ud83d\udd0d Matching activity:",{name:e.name,type:e.type,date:e.start_date_local,activityDate:r.toLocaleDateString(),distance:i.toFixed(2)+" mi"});const o=["Ride","VirtualRide","EBikeRide"].includes(e.type),a=["Run","VirtualRun"].includes(e.type);for(const s of t){const e="".concat(s.weekNumber,"-").concat(s.day,"-").concat(s.workoutIndex||0);if(Ne.log("  \ud83d\udd11 Generated workout key: ".concat(e),{weekNumber:s.weekNumber,day:s.day,workoutIndex:s.workoutIndex,hasWorkoutIndex:s.hasOwnProperty("workoutIndex")}),Ne.log("  \ud83d\udccb Completed workouts keys:",n.map(e=>e.key)),n.some(t=>t.key===e)){Ne.log("  \u23ed\ufe0f Skipping ".concat(s.day," - already completed"));continue}const t="bike"===s.type||s.equipmentSpecific,i=["tempo","intervals","hills","longRun","easy"].includes(s.type),l=new Date(s.date+" 00:00:00");if(Ne.log("  \ud83d\udcc5 Checking ".concat(s.day,":"),{workoutDate:l.toLocaleDateString(),rawDate:s.date,workoutType:s.type,isBikeWorkout:t,isRunWorkout:i,activityIsBike:o,activityIsRun:a}),!o||t)if(!a||i){if(r.getFullYear()===l.getFullYear()&&r.getMonth()===l.getMonth()&&r.getDate()===l.getDate())return Ne.log("    \u2705 MATCH FOUND!"),s;Ne.log("    \u274c Date mismatch")}else Ne.log("    \u274c Type mismatch: run activity but not run workout");else Ne.log("    \u274c Type mismatch: bike activity but not bike workout")}return Ne.log("  \u274c No match found for this activity"),null}async getCompletedWorkouts(e){try{const{doc:t,getDoc:r}=await Promise.resolve().then(n.bind(n,667)),{db:i}=await Promise.resolve().then(n.bind(n,121)),o=t(i,"users",e),a=await r(o);if(!a.exists())return Ne.log("\ud83d\udce6 getCompletedWorkouts: User doc does not exist"),[];const s=a.data().completedWorkouts||{};Ne.log("\ud83d\udce6 getCompletedWorkouts: Raw data from Firebase:",s),Ne.log("\ud83d\udce6 getCompletedWorkouts: Number of completed workouts:",Object.keys(s).length);const l=Object.keys(s).map(e=>({key:e,data:s[e]}));return Ne.log("\ud83d\udce6 getCompletedWorkouts: Returning array:",l),l}catch(t){return console.error("Error fetching completed workouts:",t),[]}}async completeWorkout(e,t,r,i){try{Ne.log("\ud83d\udce5 Fetching detailed activity data for ".concat(r.id,"..."));const a=await ap.getActivity(i,r.id);Ne.log("  \u2705 Got detailed activity data");let s=null;try{s=await ap.getActivityStreams(i,r.id),s&&Ne.log("  \u2705 Got activity streams (elevation profile, HR data, etc.)")}catch(o){Ne.log("  \u26a0\ufe0f Could not fetch streams (not critical):",o.message)}const l=ap.convertToRunEQCompletion(a,s),c="".concat(t.weekNumber,"-").concat(t.day,"-").concat(t.workoutIndex||0),{doc:d,updateDoc:h,arrayUnion:p}=await Promise.resolve().then(n.bind(n,667)),{db:m}=await Promise.resolve().then(n.bind(n,121)),f=d(m,"users",e);return await h(f,{["completedWorkouts.".concat(c)]:(0,u.A)((0,u.A)({completedAt:(new Date).toISOString(),completed:!0},l),{},{autoCompletedFromStrava:!0})}),Ne.log("\u2705 Auto-completed workout: ".concat(c)),l.laps&&Ne.log("  \ud83d\udcca Stored ".concat(l.laps.length," lap splits")),l.streams&&Ne.log("  \ud83d\udcc8 Stored elevation and HR profile data"),!0}catch(o){return console.error("\u274c Error completing workout:",o),!1}}getSyncStatus(e){if(!e.stravaConnected)return{connected:!1,status:"not_connected",message:"Connect Strava to enable automatic workout tracking"};const t=e.stravaLastSync;if(!t)return{connected:!0,status:"never_synced",message:"Connected - sync will happen automatically"};const n=new Date(t),r=(new Date-n)/36e5;return r<1?{connected:!0,status:"recent",message:"Synced recently",lastSync:n}:{connected:!0,status:"ready",message:"Last synced ".concat(Math.round(r)," hours ago"),lastSync:n}}};const lp=function(e){var t,r,i,o,s,l,c,d,h,p;let{userProfile:m,trainingPlan:f,completedWorkouts:g,clearAllData:y}=e;const v=re(),b=al(),[w,D]=(0,a.useState)(!1),[k,x]=(0,a.useState)(!1),[E,S]=(0,a.useState)(!0),[C,A]=(0,a.useState)(!0),T=e=>{var t;if(null===f||void 0===f||null===(t=f.planOverview)||void 0===t||!t.startDate)return null;const n=new Date(f.planOverview.startDate+"T00:00:00"),r=864e5,i=n.getDay(),o=0===i?6:i-1,a=new Date(n.getTime()-o*r),s=new Date(a.getTime()+7*(e-1)*r),l=new Date(s.getTime()+5184e5),u={month:"short",day:"numeric"},c=s.toLocaleDateString("en-US",u),d=l.toLocaleDateString("en-US",u);return"".concat(c," - ").concat(d)},F=(e,t)=>{var n,r;if(null===f||void 0===f||null===(n=f.planOverview)||void 0===n||!n.startDate)return null;const i=new Date(f.planOverview.startDate+"T00:00:00"),o=864e5,a=i.getDay(),s=0===a?6:a-1,l=new Date(i.getTime()-s*o),u=new Date(l.getTime()+7*(e-1)*o),c=null!==(r={Monday:0,Mon:0,Tuesday:1,Tue:1,Wednesday:2,Wed:2,Thursday:3,Thu:3,Friday:4,Fri:4,Saturday:5,Sat:5,Sunday:6,Sun:6}[t])&&void 0!==r?r:0;return new Date(u.getTime()+c*o).toLocaleDateString("en-US",{month:"short",day:"numeric"})},R=e=>{const t=((null===e||void 0===e?void 0:e.type)||"").toLowerCase(),n=((null===e||void 0===e?void 0:e.name)||"").toLowerCase(),r=((null===e||void 0===e?void 0:e.focus)||"").toLowerCase();return["intervals","hills","tempo","longrun","easy","rest","rest_or_xt","bike"].includes(t)?"longrun"===t?"longRun":t:t.includes("vo2")||t.includes("speed")||t.includes("interval")||n.includes("interval")||n.includes("800m")||n.includes("400m")||n.includes("repeat")||r.includes("vo2")?"intervals":t.includes("hill")||t.includes("power")||t.includes("strength")||n.includes("hill")||r.includes("strength")?"hills":t.includes("tempo")||t.includes("threshold")||n.includes("tempo")||n.includes("threshold")||n.includes("cruise")||r.includes("threshold")?"tempo":t.includes("long")||t.includes("progressive")||t.includes("mixed")||n.includes("long run")||r.includes("endurance")?"longRun":t||"easy"},[_,I]=(0,a.useState)(()=>{var e;const t=(()=>{var e,t;if(null===f||void 0===f||null===(e=f.planOverview)||void 0===e||!e.startDate)return 1;const n=new Date,r=new Date(f.planOverview.startDate+"T00:00:00"),i=r.getDay(),o=0===i?6:i-1,a=new Date(r.getTime()-864e5*o);if(n<a)return 1;const s=Math.floor((n-a)/6048e5);return Math.min(s+1,(null===f||void 0===f||null===(t=f.planOverview)||void 0===t?void 0:t.totalWeeks)||12)})(),n=localStorage.getItem("runeq_currentWeek"),r=localStorage.getItem("runeq_startDate");var i;if((null===f||void 0===f||null===(e=f.planOverview)||void 0===e?void 0:e.startDate)!==r)return Ne.log("\ud83d\udcc5 New plan detected - using calculated week:",t),localStorage.setItem("runeq_startDate",null===f||void 0===f||null===(i=f.planOverview)||void 0===i?void 0:i.startDate),t;if(n){var o;const e=parseInt(n,10);if(e>=1&&e<=((null===f||void 0===f||null===(o=f.planOverview)||void 0===o?void 0:o.totalWeeks)||12))return e}return t});(0,a.useEffect)(()=>{localStorage.setItem("runeq_currentWeek",_.toString())},[_]);const[P,M]=(0,a.useState)({isOpen:!1,workout:null}),[N,j]=(0,a.useState)({}),[B,O]=(0,a.useState)({}),[L,W]=(0,a.useState)({}),[q,U]=(0,a.useState)({}),[z,H]=(0,a.useState)({}),[V,K]=(0,a.useState)(!1),[Y,G]=(0,a.useState)({}),[Q,Z]=(0,a.useState)(!1),[X,J]=(0,a.useState)({isOpen:!1,workout:null,distance:"",notes:""});(0,a.useEffect)(()=>{try{const e=localStorage.getItem("runeq_modifiedWorkouts");if(Ne.log("\ud83d\udce6 Dashboard loading from localStorage:",e),e){const t=JSON.parse(e);Ne.log("\ud83d\udce6 Dashboard parsed data:",t),j(t)}ee(!0)}catch(e){console.warn("Error loading modified workouts:",e),localStorage.removeItem("runeq_modifiedWorkouts"),ee(!0)}},[]),(0,a.useEffect)(()=>{(async()=>{if(Ie.j2.currentUser)try{const e=await Me.getModifiedWorkouts(Ie.j2.currentUser.uid);e.success&&e.data&&Object.keys(e.data).length>0&&(Ne.log("\ud83d\udce6 Loaded modified workouts from Firestore:",e.data),j(e.data),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(e.data)))}catch(e){console.warn("Error loading modified workouts from Firestore:",e)}})()},[null===(t=Ie.j2.currentUser)||void 0===t?void 0:t.uid]);const[$,ee]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if($)try{Ne.log("\ud83d\udcbe Dashboard saving to localStorage:",N),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(N))}catch(e){console.warn("Error saving modified workouts:",e)}},[N,$]),(0,a.useEffect)(()=>{g?(Ne.log("\ud83d\udce6 Dashboard: Loading completions from Firebase:",g),H(g)):H({})},[g]);const te=new ze,ne=new Ue,ie=new He,oe=new qe,ae=new Oh,se=e=>{var t,n,r,i,o,a,s;if("rest"===e.type||"Rest"===e.type||null!==(t=e.workout)&&void 0!==t&&null!==(n=t.name)&&void 0!==n&&n.toLowerCase().includes("rest")||null!==(r=e.name)&&void 0!==r&&r.toLowerCase().includes("rest"))return null;if(e.distance)return"\ud83d\udccf ".concat(e.distance);const l=null===(i=e.workout)||void 0===i||null===(o=i.name)||void 0===o?void 0:o.match(/(\d+(?:\.\d+)?)\s*-?\s*(mile|miles|mi|RunEQ|km)/i);if(l)return"\ud83d\udccf ".concat(l[1]," ").concat(l[2]);if(null!==(a=e.workoutDetails)&&void 0!==a&&a.repetitions)return"\ud83d\udd01 ".concat(e.workoutDetails.repetitions);if(null!==(s=e.workoutDetails)&&void 0!==s&&s.duration)return"\u23f1\ufe0f ".concat(e.workoutDetails.duration);switch(e.type){case"longRun":return"\ud83d\udccf 10+ miles";case"tempo":return"\u23f1\ufe0f 20-40 min";case"intervals":return"\ud83d\udd01 Multiple reps";case"hills":return"\u26f0\ufe0f Hill session";case"easy":return"\ud83d\udccf 4-6 miles";case"bike":return"\ud83d\udeb4 12+ RunEQ miles";default:return null}},le=e=>{var t,n,r,i;return"longRun"===e.type||"brickLongRun"===e.type||(!(null===(t=e.metadata)||void 0===t||!t.workoutId||!e.metadata.workoutId.includes("longrun_"))||(!(!e.workoutId||!e.workoutId.includes("longrun_"))||!!(null!==(n=e.name)&&void 0!==n&&n.toLowerCase().includes("long run")||null!==(r=e.workout)&&void 0!==r&&null!==(i=r.name)&&void 0!==i&&i.toLowerCase().includes("long run"))))},ue=(e,t)=>{var n,r,i,o,a,s,l,u,c,d,h,p,m,f,g,y,v,b,w,D,k,x,E,S,C,A,T,F,R,_;Ne.log("\ud83d\udd0d generateWeekWorkouts - profile:",t),Ne.log("\ud83d\udeb4 preferredBikeDays:",null===t||void 0===t?void 0:t.preferredBikeDays),Ne.log("\ud83d\udcc0 localStorage userProfile:",localStorage.getItem("runeq_userProfile")),Ne.log("\ud83d\udcc5 localStorage trainingPlan:",localStorage.getItem("runeq_trainingPlan"));const I={tempo:[te.getRandomWorkout("TRADITIONAL_TEMPO"),te.getRandomWorkout("ALTERNATING_TEMPO"),te.getRandomWorkout("PROGRESSIVE_TEMPO"),te.getRandomWorkout("TEMPO_INTERVALS")],intervals:[ne.getRandomWorkout("SHORT_SPEED"),ne.getRandomWorkout("VO2_MAX"),ne.getRandomWorkout("LONG_INTERVALS")],hills:[oe.getRandomWorkout("short_power"),oe.getRandomWorkout("long_strength"),oe.getRandomWorkout("hill_circuits")],longRuns:[ie.getRandomWorkout("TRADITIONAL_EASY"),ie.getRandomWorkout("PROGRESSIVE_RUNS"),ie.getRandomWorkout("MIXED_PACE_LONG"),ie.getRandomWorkout("RACE_SIMULATION")]},P=function(e){const n={Easy:8,Moderate:12,Hard:16,"Very Hard":20}[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Moderate"]||12;return{name:"".concat(n,"-Mile ").concat($s(t.standUpBikeType)," Ride"),description:"".concat(n," miles on ").concat($s(t.standUpBikeType)," @ steady aerobic effort")}},M=[{tuesday:"tempo",saturday:"intervals",sunday:"longRuns"},{tuesday:"hills",saturday:"tempo",sunday:"longRuns"},{tuesday:"intervals",saturday:"hills",sunday:"longRuns"},{tuesday:"tempo",saturday:"intervals",sunday:"longRuns"}],N=M[(e-1)%M.length],j=I[N.tuesday][(e-1)%I[N.tuesday].length],B=I[N.saturday][(e-1)%I[N.saturday].length],O=I[N.sunday][(e-1)%I[N.sunday].length],L=e=>({tempo:{type:"tempo",focus:"Lactate Threshold"},intervals:{type:"intervals",focus:"Speed & Power"},hills:{type:"hills",focus:"Strength & Power"},longRuns:{type:"longRun",focus:"Endurance"}}[e]||{type:"easy",focus:"Recovery"}),W=L(N.tuesday),q=L(N.saturday),U=L(N.sunday);return Ne.log("\ud83d\udeb4 Checking bike days for each day:"),Ne.log("  Monday bike day?",null===t||void 0===t||null===(n=t.preferredBikeDays)||void 0===n?void 0:n.includes("Monday")),Ne.log("  Tuesday bike day?",null===t||void 0===t||null===(r=t.preferredBikeDays)||void 0===r?void 0:r.includes("Tuesday")),Ne.log("  Wednesday bike day?",null===t||void 0===t||null===(i=t.preferredBikeDays)||void 0===i?void 0:i.includes("Wednesday")),Ne.log("  Thursday bike day?",null===t||void 0===t||null===(o=t.preferredBikeDays)||void 0===o?void 0:o.includes("Thursday")),Ne.log("  Friday bike day?",null===t||void 0===t||null===(a=t.preferredBikeDays)||void 0===a?void 0:a.includes("Friday")),Ne.log("  Saturday bike day?",null===t||void 0===t||null===(s=t.preferredBikeDays)||void 0===s?void 0:s.includes("Saturday")),Ne.log("  Sunday bike day?",null===t||void 0===t||null===(l=t.preferredBikeDays)||void 0===l?void 0:l.includes("Sunday")),[{day:"Monday",type:null!==t&&void 0!==t&&null!==(u=t.preferredBikeDays)&&void 0!==u&&u.includes("Monday")?"bike":"rest",workout:null!==t&&void 0!==t&&null!==(c=t.preferredBikeDays)&&void 0!==c&&c.includes("Monday")?P("Monday","Easy"):{name:"Rest Day",description:"Complete rest or light cross-training"},focus:null!==t&&void 0!==t&&null!==(d=t.preferredBikeDays)&&void 0!==d&&d.includes("Monday")?"Active Recovery":"Recovery",completed:!1,equipmentSpecific:(null===t||void 0===t||null===(h=t.preferredBikeDays)||void 0===h?void 0:h.includes("Monday"))&&!(null===t||void 0===t||!t.standUpBikeType)},{day:"Tuesday",type:null!==t&&void 0!==t&&null!==(p=t.preferredBikeDays)&&void 0!==p&&p.includes("Tuesday")?"bike":W.type,workout:null!==t&&void 0!==t&&null!==(m=t.preferredBikeDays)&&void 0!==m&&m.includes("Tuesday")?P("Tuesday","Moderate"):{name:j.name,description:j.description},focus:null!==t&&void 0!==t&&null!==(f=t.preferredBikeDays)&&void 0!==f&&f.includes("Tuesday")?"Aerobic Base":W.focus,completed:!1,equipmentSpecific:(null===t||void 0===t||null===(g=t.preferredBikeDays)||void 0===g?void 0:g.includes("Tuesday"))&&!(null===t||void 0===t||!t.standUpBikeType),workoutDetails:j},{day:"Wednesday",type:null!==t&&void 0!==t&&null!==(y=t.preferredBikeDays)&&void 0!==y&&y.includes("Wednesday")?"bike":"rest",workout:null!==t&&void 0!==t&&null!==(v=t.preferredBikeDays)&&void 0!==v&&v.includes("Wednesday")?P("Wednesday","Easy"):{name:"Rest Day",description:"Complete rest or light cross-training"},focus:null!==t&&void 0!==t&&null!==(b=t.preferredBikeDays)&&void 0!==b&&b.includes("Wednesday")?"Active Recovery":"Recovery",completed:!1,equipmentSpecific:(null===t||void 0===t||null===(w=t.preferredBikeDays)||void 0===w?void 0:w.includes("Wednesday"))&&!(null===t||void 0===t||!t.standUpBikeType)},{day:"Thursday",type:null!==t&&void 0!==t&&null!==(D=t.preferredBikeDays)&&void 0!==D&&D.includes("Thursday")?"bike":"easy",workout:null!==t&&void 0!==t&&null!==(k=t.preferredBikeDays)&&void 0!==k&&k.includes("Thursday")?P("Thursday","Easy"):{name:"Easy Run",description:"Conversational pace, aerobic base building"},focus:"Recovery",completed:!1,equipmentSpecific:(null===t||void 0===t||null===(x=t.preferredBikeDays)||void 0===x?void 0:x.includes("Thursday"))&&!(null===t||void 0===t||!t.standUpBikeType)},{day:"Friday",type:null!==t&&void 0!==t&&null!==(E=t.preferredBikeDays)&&void 0!==E&&E.includes("Friday")?"bike":"rest",workout:null!==t&&void 0!==t&&null!==(S=t.preferredBikeDays)&&void 0!==S&&S.includes("Friday")?P("Friday","Easy"):{name:"Rest Day",description:"Complete rest or light cross-training"},focus:null!==t&&void 0!==t&&null!==(C=t.preferredBikeDays)&&void 0!==C&&C.includes("Friday")?"Active Recovery":"Recovery",completed:!1,equipmentSpecific:(null===t||void 0===t||null===(A=t.preferredBikeDays)||void 0===A?void 0:A.includes("Friday"))&&!(null===t||void 0===t||!t.standUpBikeType)},{day:"Saturday",type:null!==t&&void 0!==t&&null!==(T=t.preferredBikeDays)&&void 0!==T&&T.includes("Saturday")?"bike":q.type,workout:null!==t&&void 0!==t&&null!==(F=t.preferredBikeDays)&&void 0!==F&&F.includes("Saturday")?P("Saturday","Hard"):{name:B.name,description:B.description},focus:null!==t&&void 0!==t&&null!==(R=t.preferredBikeDays)&&void 0!==R&&R.includes("Saturday")?"Aerobic Power":q.focus,completed:!1,equipmentSpecific:(null===t||void 0===t||null===(_=t.preferredBikeDays)||void 0===_?void 0:_.includes("Saturday"))&&!(null===t||void 0===t||!t.standUpBikeType),workoutDetails:B},{day:"Sunday",type:U.type,workout:{name:O.name,description:O.description},focus:U.focus,completed:!1,workoutDetails:O}]},ce=(()=>{if(_<=0){var e;const t=new Date((null===f||void 0===f||null===(e=f.planOverview)||void 0===e?void 0:e.startDate)+"T00:00:00");return{week:0,weekDates:{displayText:"Training starts ".concat(t.toLocaleDateString())},phase:"preparation",totalMileage:0,workouts:[{day:"Preparation",type:"preparation",workout:{name:"Training Starts Soon!",description:"Your RunEQ training plan will begin on ".concat(t.toLocaleDateString(),". Get ready!")},focus:"Preparation",completed:!1}]}}if(f&&f.weeks&&f.weeks.length>0){const e=f.weeks[_-1];if(e&&e.workouts&&e.workouts.length>0)return Ne.log("Using training plan data for week",_,"with",e.workouts.length,"workouts"),e.workouts.forEach(e=>{var t;"brickLongRun"===e.type&&Ne.log("Found brick workout:",e.day,null===(t=e.workout)||void 0===t?void 0:t.name)}),e}return Ne.log("Falling back to generated workouts for week",_),{week:_,weekDates:{displayText:"Week ".concat(_)},phase:"base",totalMileage:15,workouts:ue(_,m)}})(),de=e=>({tempo:"#4299e1",intervals:"#e53e3e",hills:"#38a169",longRun:"#805ad5",bike:"#ff9500",brick:"#ff6b6b",brickLongRun:"#ff6b6b",easy:"#718096",rest:"#a0aec0",rest_or_xt:"#22c55e",preparation:"#ffd700"}[e]||"#718096"),he=function(e){M({isOpen:!0,workout:e,mode:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"replace"})},pe=()=>{M({isOpen:!1,workout:null})},me=async e=>{var t;if(Ie.j2.currentUser){if(e.completed){const t=!1,r=e.workoutIndex||0,i="".concat(_,"-").concat(e.day,"-").concat(r);H(e=>(0,u.A)((0,u.A)({},e),{},{[i]:{completed:t,completedAt:null,actualDistance:null,notes:null}}));try{(await Me.markWorkoutComplete(Ie.j2.currentUser.uid,_,e.day,t,null,null)).success||(console.error("Failed to save completion status"),H(e=>{const t=(0,u.A)({},e);return delete t[i],t}),b.error("Failed to save. Please try again."))}catch(n){console.error("Error uncompleting workout:",n)}return}if("rest"===e.type){const t=!0,r=e.workoutIndex||0,i="".concat(_,"-").concat(e.day,"-").concat(r);H(e=>(0,u.A)((0,u.A)({},e),{},{[i]:{completed:t,completedAt:(new Date).toISOString()}}));try{await Me.markWorkoutComplete(Ie.j2.currentUser.uid,_,e.day,t)}catch(n){console.error("Error completing rest day:",n)}return}J({isOpen:!0,workout:e,distance:(null===(t=e.distance)||void 0===t?void 0:t.toString())||"",notes:""})}else console.error("No user logged in")},fe=e=>{const t="".concat(_,"-").concat(e.day,"-").concat(e.workoutIndex||0);G(e=>(0,u.A)((0,u.A)({},e),{},{[t]:!0}))},ge=e=>{const t="".concat(_,"-").concat(e.day,"-").concat(e.workoutIndex||0);G(e=>(0,u.A)((0,u.A)({},e),{},{[t]:!1}))},ye=e=>{const t=e.workoutIndex||0,n="".concat(_,"-").concat(e.day,"-").concat(t);j(e=>{const t=(0,u.A)({},e);return delete t[n],t})},ve=e=>{const t=[],n="".concat(_,"-").concat(e.day);let r=0,i=!0;for(;i;){const o="".concat(n,"-").concat(r),a=N[o];if(a){const e=z[o];t.push((0,u.A)((0,u.A)({},a),{},{completed:(null===e||void 0===e?void 0:e.completed)||!1,completedAt:(null===e||void 0===e?void 0:e.completedAt)||null,workoutIndex:r})),r++}else if(0===r){const n=z[o];t.push((0,u.A)((0,u.A)({},e),{},{completed:(null===n||void 0===n?void 0:n.completed)||!1,completedAt:(null===n||void 0===n?void 0:n.completedAt)||null,workoutIndex:0})),i=!1}else i=!1}return t},be=e=>ve(e)[0]||e;return"pending"===(null===m||void 0===m?void 0:m.approvalStatus)?(0,je.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"20px"},children:(0,je.jsxs)("div",{className:"dashboard-pending-approval",style:{maxWidth:"500px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"40px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,je.jsx)("div",{className:"pending-emoji",style:{fontSize:"4rem",marginBottom:"20px"},children:"\u23f3"}),(0,je.jsx)("h1",{style:{color:"#00D4FF",marginBottom:"16px"},children:"Account Pending Approval"}),(0,je.jsx)("p",{style:{color:"#AAAAAA",fontSize:"1.1rem",lineHeight:"1.6",marginBottom:"24px"},children:"Thank you for signing up! Your account is currently pending approval."}),(0,je.jsxs)("p",{style:{color:"#AAAAAA",fontSize:"0.95rem",lineHeight:"1.6"},children:["You'll receive an email at ",(0,je.jsx)("strong",{style:{color:"#FFFFFF"},children:null===m||void 0===m?void 0:m.email})," once your account has been approved. This usually takes less than 24 hours."]}),(0,je.jsx)("button",{onClick:async()=>{await(0,Re.CI)(Ie.j2),v("/")},style:{marginTop:"32px",padding:"12px 24px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"#FFFFFF",cursor:"pointer",fontSize:"1rem"},children:"Sign Out"})]})}):(0,je.jsx)(je.Fragment,{children:(0,je.jsxs)("div",{style:{minHeight:"100vh"},children:[(0,je.jsx)("div",{style:{color:"#AAAAAA",padding:"20px 0"},children:(0,je.jsxs)("div",{className:"container",children:[(0,je.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,je.jsxs)("h1",{className:"dashboard-week-title",style:{margin:"0",lineHeight:"1.2"},children:["Week ",_]}),(()=>{const e=T(_);return e?(0,je.jsxs)("div",{style:{fontSize:"0.9rem",color:"#AAAAAA",marginTop:"4px"},children:["Week of ",e]}):null})()]}),(0,je.jsx)("div",{style:{display:"flex",gap:"12px",alignItems:"center",marginBottom:"16px"},children:(0,je.jsx)("button",{onClick:()=>v("/welcome"),style:{padding:"8px 16px",background:"rgba(0, 245, 212, 0.1)",border:"1px solid rgba(0, 245, 212, 0.3)",borderRadius:"6px",color:"#00f5d4",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.2s"},onMouseEnter:e=>{e.target.style.background="rgba(0, 245, 212, 0.2)",e.target.style.borderColor="#00f5d4"},onMouseLeave:e=>{e.target.style.background="rgba(0, 245, 212, 0.1)",e.target.style.borderColor="rgba(0, 245, 212, 0.3)"},children:"\u2190 Coach's Analysis"})}),(0,je.jsxs)("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap",marginBottom:"16px"},children:[(()=>{const e=(e=>{if(null===e||void 0===e||!e.workouts)return{runMiles:0,bikeMiles:0,ellipticalMiles:0,runEqMiles:0,totalMiles:0,equivalentMiles:0};const t=void 0!==e.totalMileage&&null!==e.totalMileage;let n=0,r=0,i=0,o=0;e.workouts.forEach(e=>{ve(e).forEach(e=>{var t,a,s,l,u,c,d,h,p,m;if("brick"===e.type){var f,g,y,v;const t=null===(f=e.workout)||void 0===f||null===(g=f.description)||void 0===g?void 0:g.match(/(\d+(?:\.\d+)?)\s*mi.*run/i),i=null===(y=e.workout)||void 0===y||null===(v=y.description)||void 0===v?void 0:v.match(/(\d+(?:\.\d+)?)\s*mi.*bike/i);t&&(n+=parseFloat(t[1])),i&&(r+=parseFloat(i[1]))}else if(null!==(t=e.workout)&&void 0!==t&&null!==(a=t.name)&&void 0!==a&&a.match(/(\d+(?:\.\d+)?)\s*RunEQ\s*Miles?/i)){var b,w;const t=null===(b=e.workout)||void 0===b||null===(w=b.name)||void 0===w?void 0:w.match(/(\d+(?:\.\d+)?)\s*RunEQ\s*Miles?/i);t&&(o+=parseFloat(t[1]))}else if(null!==(s=e.workout)&&void 0!==s&&null!==(l=s.name)&&void 0!==l&&l.includes("Bike")||null!==(u=e.workout)&&void 0!==u&&null!==(c=u.name)&&void 0!==c&&c.includes("Cycling")){var D,k;const t=null===(D=e.workout)||void 0===D||null===(k=D.name)||void 0===k?void 0:k.match(/(\d+(?:\.\d+)?)/);t&&(r+=parseFloat(t[1]))}else if(null!==(d=e.workout)&&void 0!==d&&null!==(h=d.name)&&void 0!==h&&h.includes("Elliptical")||null!==(p=e.workout)&&void 0!==p&&null!==(m=p.name)&&void 0!==m&&m.includes("ElliptiGO")){var x,E;const t=null===(x=e.workout)||void 0===x||null===(E=x.name)||void 0===E?void 0:E.match(/(\d+(?:\.\d+)?)/);t&&(i+=parseFloat(t[1]))}else{var S,C,A,T;const t=(null===(S=e.workout)||void 0===S||null===(C=S.name)||void 0===C?void 0:C.match(/(\d+(?:\.\d+)?)\s*-?\s*(mile|miles|mi)\b/i))||(null===(A=e.workout)||void 0===A||null===(T=A.name)||void 0===T?void 0:T.match(/^(\d+(?:\.\d+)?)\s*(mile|miles|mi)/i));if(t)n+=parseFloat(t[1]);else{let t=0;switch(e.type){case"rest":case"cross-training":t=0;break;case"longRun":case"long-run":t=10;break;case"tempo":t=6;break;case"interval":case"intervals":case"hill":case"hills":t=5;break;default:t=4}n+=t}}})});const a=r/3+i/2+o,s=n+a,l=t?e.totalMileage:s;return{runMiles:Math.round(10*n)/10,bikeMiles:Math.round(10*r)/10,ellipticalMiles:Math.round(10*i)/10,runEqMiles:Math.round(10*o)/10,equivalentMiles:Math.round(10*a)/10,totalMiles:Math.round(10*l)/10}})(ce),t=e.equivalentMiles>0;return(0,je.jsxs)("div",{className:"dashboard-stats-badge",style:{background:"rgba(0, 212, 255, 0.2)",color:"#00D4FF",padding:"8px 14px",borderRadius:"10px",fontWeight:"600",fontSize:"1.1rem",border:"1px solid rgba(0, 212, 255, 0.3)"},children:["\ud83d\udcca ",e.totalMiles," Miles This Week",t&&(0,je.jsxs)("div",{className:"stats-subtext",style:{fontSize:"0.85rem",fontWeight:"500",marginTop:"4px",color:"#66E8FF"},children:[e.runMiles,"mi run",e.bikeMiles>0&&" + ".concat(e.bikeMiles,"mi bike"),e.ellipticalMiles>0&&" + ".concat(e.ellipticalMiles,"mi elliptical"),(0,je.jsxs)("span",{style:{fontSize:"0.75rem",opacity:.8,display:"block",marginTop:"2px"},children:["(",e.equivalentMiles,"mi equivalent activity)"]})]})]})})(),(e=>{let t={min:0,max:0};const n=(null===(e=ce.workouts)||void 0===e?void 0:e.filter(e=>("bike"===e.type||e.equipmentSpecific)&&e.distance&&e.distance>0))||[];return n.forEach(e=>{const n=jh.calculateWorkoutCalories(e);n&&(t.min+=n.min,t.max+=n.max)}),0===n.length?null:(0,je.jsxs)("div",{className:"dashboard-stats-badge",style:{background:"rgba(255, 149, 0, 0.15)",color:"#FF9500",padding:"8px 14px",borderRadius:"10px",fontWeight:"600",fontSize:"1.1rem",border:"1px solid rgba(255, 149, 0, 0.3)"},children:["\ud83d\udd25 ",Math.round(t.min),"-",Math.round(t.max)," Cal This Week",(0,je.jsxs)("div",{style:{fontSize:"0.8rem",fontWeight:"500",marginTop:"4px",color:"#FFB84D"},children:[n.length," bike workout",1!==n.length?"s":""]})]})})(),(()=>{const e=(()=>{if(null===f||void 0===f||!f.weeks)return{last7Days:0,last30Days:0,allTime:0};const e=new Date,t=new Date(e.getTime()-6048e5),n=new Date(e.getTime()-2592e6);let r=0,i=0,o=0;return f.weeks.forEach(e=>{e.workouts&&e.workouts.forEach(a=>{ve(a).forEach(a=>{var s,l;const u=a.completed||(null===(s=z["".concat(e.week,"-").concat(a.day,"-").concat(a.workoutIndex||0)])||void 0===s?void 0:s.completed),c=a.actualDistance||(null===(l=z["".concat(e.week,"-").concat(a.day,"-").concat(a.workoutIndex||0)])||void 0===l?void 0:l.actualDistance);if(u&&c){var d;const s=a.completedAt||(null===(d=z["".concat(e.week,"-").concat(a.day,"-").concat(a.workoutIndex||0)])||void 0===d?void 0:d.completedAt),l=s?new Date(s):null;o+=c,l&&(l>=t&&(r+=c),l>=n&&(i+=c))}})})}),{last7Days:Math.round(10*r)/10,last30Days:Math.round(10*i)/10,allTime:Math.round(10*o)/10}})();return e.allTime>0?(0,je.jsxs)("div",{className:"dashboard-stats-badge",style:{background:"rgba(34, 197, 94, 0.15)",color:"#22c55e",padding:"8px 14px",borderRadius:"10px",fontWeight:"600",fontSize:"1.1rem",border:"1px solid rgba(34, 197, 94, 0.3)"},children:["\ud83c\udfc3 ",e.last7Days," Miles (7 days)",(0,je.jsxs)("div",{style:{fontSize:"0.8rem",fontWeight:"500",marginTop:"4px",color:"#4ade80"},children:[e.last30Days,"mi last 30 days \u2022 ",e.allTime,"mi total"]})]}):null})()]}),(()=>{const e=ce.phase||"base",t={base:{color:"#3b82f6",bgColor:"rgba(59, 130, 246, 0.15)",borderColor:"rgba(59, 130, 246, 0.4)",icon:"\ud83c\udfc3",message:"Building your aerobic foundation - consistency over intensity"},build:{color:"#f59e0b",bgColor:"rgba(245, 158, 11, 0.15)",borderColor:"rgba(245, 158, 11, 0.4)",icon:"\ud83c\udfd7\ufe0f",message:"Building strength and speed - time to push harder"},peak:{color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.15)",borderColor:"rgba(239, 68, 68, 0.4)",icon:"\ud83c\udfd4\ufe0f",message:"Peak fitness - your hardest workouts are here"},taper:{color:"#8b5cf6",bgColor:"rgba(139, 92, 246, 0.15)",borderColor:"rgba(139, 92, 246, 0.4)",icon:"\u26a1",message:"Tapering for race day - trust your training"},recovery:{color:"#22c55e",bgColor:"rgba(34, 197, 94, 0.15)",borderColor:"rgba(34, 197, 94, 0.4)",icon:"\ud83c\udf31",message:"Recovery week - let your body adapt and rebuild"}},n=t[e]||t.base;return(0,je.jsxs)("div",{style:{background:n.bgColor,border:"2px solid ".concat(n.borderColor),borderRadius:"12px",padding:"14px 18px",marginTop:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("div",{className:"dashboard-phase-icon",style:{fontSize:"1.8rem",lineHeight:"1"},children:n.icon}),(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsx)("div",{style:{color:n.color,fontSize:"1rem",fontWeight:"700",marginBottom:"2px"},children:el(e)}),(0,je.jsx)("div",{style:{color:"#CCCCCC",fontSize:"0.85rem",fontWeight:"500"},children:n.message})]})]})})(),(0,je.jsxs)("div",{className:"dashboard-button-row",style:{display:"flex",gap:"8px",marginTop:"16px",flexWrap:"wrap",alignItems:"center"},children:[(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-prev",onClick:()=>I(Math.max(1,_-1)),disabled:_<=1,children:"\u2190 Prev"}),(0,je.jsx)("select",{className:"dashboard-week-select",value:_,onChange:e=>I(parseInt(e.target.value,10)),children:Array.from({length:(null===f||void 0===f||null===(r=f.planOverview)||void 0===r?void 0:r.totalWeeks)||12},(e,t)=>t+1).map(e=>(0,je.jsxs)("option",{value:e,children:["Week ",e]},e))}),(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-next",onClick:()=>{var e;return I(Math.min((null===f||void 0===f||null===(e=f.planOverview)||void 0===e?void 0:e.totalWeeks)||12,_+1))},disabled:_===((null===f||void 0===f||null===(i=f.planOverview)||void 0===i?void 0:i.totalWeeks)||12),children:"Next \u2192"}),(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-manage",onClick:()=>D(!0),title:"Adjust training schedule, days, and preferences",children:"\u2699\ufe0f Manage Plan"}),null!==f&&void 0!==f&&f.injuryRecoveryActive?(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-recovery",onClick:async()=>{if(window.confirm("Cancel injury recovery protocol and restore your original training plan?"))try{if(!f.originalPlanBeforeInjury)throw new Error("Cannot restore original plan - backup not found");const e=(0,u.A)((0,u.A)({},f),{},{weeks:f.originalPlanBeforeInjury.weeks,injuryRecoveryActive:!1,injuryRecoveryInfo:null,originalPlanBeforeInjury:null});await Me.saveTrainingPlan(Ie.j2.currentUser.uid,e),window.location.reload()}catch(e){Ne.error("Error canceling injury recovery:",e),b.error("Error restoring plan. Please try again.")}},title:"Cancel injury recovery and restore original plan",children:"\u2713 Cancel Recovery Protocol"}):(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-injury",onClick:()=>x(!0),title:"Modify plan for injury recovery with cross-training",children:"\ud83c\udfe5 Report Injury"}),null!==m&&void 0!==m&&m.stravaConnected?(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-strava",title:"Connected as ".concat(m.stravaAthleteName||"Strava athlete"),children:"\u2713 Strava Connected"}),(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-strava",onClick:e=>{Ne.log("\ud83d\udd18 BUTTON CLICKED INLINE - Event:",e),Ne.log("\ud83d\udd18 stravaSyncing:",Q),Ne.log("\ud83d\udd18 userProfile?.stravaConnected:",null===m||void 0===m?void 0:m.stravaConnected),Ne.log("\ud83d\udd18 auth.currentUser:",Ie.j2.currentUser),Ne.log("\ud83d\udd18 trainingPlan:",f),e.preventDefault(),e.stopPropagation(),(async()=>{if(Ne.log("\ud83d\udd18 BUTTON CLICKED - handleManualStravaSync called"),null!==m&&void 0!==m&&m.stravaConnected&&Ie.j2.currentUser&&f){Z(!0),Ne.log("\ud83d\udd04 Manual Strava sync triggered...");try{const e=await sp.syncActivities(Ie.j2.currentUser.uid,m,f,_);e.success?(Ne.log("\u2705 Strava sync successful:",e),localStorage.setItem("runeq_stravaLastSync",(new Date).toISOString()),e.workoutsCompleted>0?(Ne.log("\ud83d\udd04 ".concat(e.workoutsCompleted," workouts auto-completed - refreshing...")),window.location.reload()):(b.success("Sync complete! Found ".concat(e.activitiesFetched," activities, ").concat(e.matchesFound," matched workouts.")),Z(!1))):(console.warn("\u26a0\ufe0f Strava sync failed:",e.error),b.error("Sync failed: ".concat(e.error)),Z(!1))}catch(e){console.error("\u274c Strava sync error:",e),b.error("Sync error: ".concat(e.message)),Z(!1)}}else Ne.log("\u274c Cannot sync - missing requirements:",{stravaConnected:null===m||void 0===m?void 0:m.stravaConnected,hasUser:!!Ie.j2.currentUser,hasTrainingPlan:!!f})})()},disabled:Q,title:"Manually sync your Strava activities",children:Q?"\u23f3 Syncing...":"\ud83d\udd04 Sync Now"})]}):(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-strava",onClick:()=>{const e=ap.getAuthorizationUrl();window.location.href=e},children:"\ud83d\udd17 Connect Strava"}),(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-reset",onClick:()=>{window.confirm("Clear all data and start over? This will reset your profile and training plan.")&&y()},title:"Clear all data and restart onboarding",children:"\ud83d\uddd1\ufe0f Reset"}),(0,je.jsx)("button",{className:"dashboard-nav-button dashboard-nav-button-logout",onClick:async()=>{window.confirm("Logout? Your data is saved and will be here when you log back in.")&&await(0,Re.CI)(Ie.j2)},title:"Logout (your data is saved)",children:"\ud83d\udeaa Logout"})]})]})}),(0,je.jsxs)("div",{className:"container dashboard-container",style:{padding:"20px 16px"},children:[(0,je.jsxs)("div",{className:"card",style:{marginBottom:"20px",background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)"},children:[(0,je.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,je.jsx)("h3",{className:"dashboard-section-header",style:{margin:"0 0 4px 0",color:"#00D4FF"},children:"Current Training System"}),(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.2rem"},children:"\ud83d\udd2c"}),(0,je.jsx)("span",{style:{fontSize:"1.1rem",fontWeight:"bold"},children:(we=(null===f||void 0===f||null===(o=f.planOverview)||void 0===o?void 0:o.trainingPhilosophy)||(null===m||void 0===m?void 0:m.trainingPhilosophy)||"Zone-Based Training",we?Js.TRAINING_SYSTEMS[we]||nl(we.replace(/_/g," ")):"")})]}),(0,je.jsxs)("p",{style:{margin:"4px 0 0 0",fontSize:"0.9rem",color:"#00D4FF"},children:["Week ",_," of ",(null===f||void 0===f||null===(s=f.planOverview)||void 0===s?void 0:s.totalWeeks)||16,T(_)&&" \u2022 ".concat(T(_))," \u2022 Periodized training system"]})]}),(0,je.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px",fontSize:"0.85rem"},children:[(0,je.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",padding:"8px",borderRadius:"6px"},children:[(0,je.jsx)("strong",{children:"Focus:"})," ",ce.phase?ce.phase.charAt(0).toUpperCase()+ce.phase.slice(1)+" Phase":"Periodized Training"]}),(0,je.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",padding:"8px",borderRadius:"6px"},children:[(0,je.jsx)("strong",{children:"Current Phase:"})," ",(ce.phase||"base").toUpperCase()]})]})]}),(0,je.jsxs)("div",{className:"card",style:{marginBottom:"20px"},children:[(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[(0,je.jsx)("h2",{className:"dashboard-section-header",style:{margin:0},children:"Week Progress"}),(0,je.jsx)("span",{className:"badge badge-info",children:(()=>{const e=ce.workouts.filter(e=>be(e).completed).length,t=ce.workouts.filter(e=>"rest"!==e.type).length;return"".concat(e,"/").concat(t," completed")})()})]}),(0,je.jsx)("div",{className:"progress-bar",children:(0,je.jsx)("div",{className:"progress-fill",style:{width:"".concat(ce.workouts.filter(e=>be(e).completed).length/ce.workouts.filter(e=>"rest"!==e.type).length*100,"%")}})})]}),"hot_humid"===m.climate&&(0,je.jsx)("div",{className:"card",style:{marginBottom:"20px",background:"rgba(255, 184, 0, 0.1)",border:"1px solid rgba(255, 184, 0, 0.3)"},children:(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{className:"dashboard-alert-emoji",style:{fontSize:"1.5rem"},children:"\ud83c\udf21\ufe0f"}),(0,je.jsxs)("div",{children:[(0,je.jsx)("h3",{style:{margin:"0 0 4px 0",color:"#c05621"},children:"Climate Adjustment Active"}),(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem",color:"#744210"},children:["Paces automatically adjusted for ",m.climate.replace("_"," ")," conditions. Add 30-60 seconds per mile to easy runs when very humid."]})]})]})}),"injury-recovery"===ce.weekType&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("div",{className:"card",style:{marginBottom:"20px",background:"rgba(239, 68, 68, 0.15)",border:"2px solid rgba(239, 68, 68, 0.5)"},children:(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{className:"dashboard-alert-emoji",style:{fontSize:"1.5rem"},children:"\ud83c\udfe5"}),(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsx)("h3",{style:{margin:"0 0 4px 0",color:"#ef4444"},children:"Injury Recovery Protocol Active"}),(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.9rem",color:"#dc2626"},children:["No running this week. You're cross-training to maintain fitness while healing.",(null===m||void 0===m?void 0:m.injuryRecovery)&&(0,je.jsxs)("span",{children:[" ","Return to running: Week ",m.injuryRecovery.returnToRunningWeek,"."]})]})]})]})}),(null===f||void 0===f?void 0:f.injuryRecoveryCoaching)&&(0,je.jsx)("div",{className:"card",style:{marginBottom:"20px",background:"linear-gradient(135deg, #1a2a3a 0%, #0f1f2f 100%)",border:"2px solid #00D4FF"},children:(0,je.jsxs)("div",{style:{padding:"20px"},children:[(0,je.jsxs)("h3",{onClick:()=>S(!E),style:{margin:"0 0 16px 0",color:"#00D4FF",fontSize:"1.3rem",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",userSelect:"none",transition:"opacity 0.2s ease"},onMouseEnter:e=>e.currentTarget.style.opacity="0.8",onMouseLeave:e=>e.currentTarget.style.opacity="1",children:[(0,je.jsx)("span",{children:"\ud83d\udca1"}),(0,je.jsx)("span",{style:{flex:1},children:"Coach's Recovery Guidance"}),(0,je.jsx)("span",{style:{fontSize:"1rem",transition:"transform 0.3s ease",transform:E?"rotate(180deg)":"rotate(0deg)",display:"inline-block"},children:"\u25bc"})]}),E&&(0,je.jsx)("div",{className:"dashboard-coaching-text",style:{color:"#DDD",fontSize:"1rem",lineHeight:"1.8",whiteSpace:"pre-line",animation:"fadeIn 0.3s ease"},children:f.injuryRecoveryCoaching})]})})]}),"return-to-running"===ce.weekType&&(0,je.jsx)("div",{className:"card",style:{marginBottom:"20px",background:"rgba(34, 197, 94, 0.15)",border:"2px solid rgba(34, 197, 94, 0.5)"},children:(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("span",{className:"dashboard-alert-emoji",style:{fontSize:"1.5rem"},children:"\ud83c\udfaf"}),(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsx)("h3",{style:{margin:"0 0 4px 0",color:"#22c55e"},children:"Return to Running Week"}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#16a34a"},children:"Gradual return to running mixed with cross-training. Listen to your body and ease back into it."})]})]})}),(null===f||void 0===f?void 0:f.planAdjustmentCoaching)&&(0,je.jsx)("div",{className:"card",style:{marginBottom:"20px",background:"linear-gradient(135deg, #1a2a3a 0%, #0f1f2f 100%)",border:"2px solid #3b82f6"},children:(0,je.jsxs)("div",{style:{padding:"20px"},children:[(0,je.jsxs)("h3",{onClick:()=>A(!C),style:{margin:"0 0 16px 0",color:"#3b82f6",fontSize:"1.3rem",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",userSelect:"none",transition:"opacity 0.2s ease"},onMouseEnter:e=>e.currentTarget.style.opacity="0.8",onMouseLeave:e=>e.currentTarget.style.opacity="1",children:[(0,je.jsx)("span",{children:"\ud83d\udca1"}),(0,je.jsx)("span",{style:{flex:1},children:"Coach's Take on Your Plan Adjustments"}),(0,je.jsx)("span",{style:{fontSize:"1rem",transition:"transform 0.3s ease",transform:C?"rotate(180deg)":"rotate(0deg)",display:"inline-block"},children:"\u25bc"})]}),C&&(0,je.jsx)("div",{className:"dashboard-coaching-text",style:{color:"#DDD",fontSize:"1rem",lineHeight:"1.8",whiteSpace:"pre-line",animation:"fadeIn 0.3s ease"},children:f.planAdjustmentCoaching})]})}),(0,je.jsxs)("div",{className:"card",style:{marginBottom:"20px"},children:[(0,je.jsxs)("div",{className:"card-header",children:[(0,je.jsx)("h2",{className:"dashboard-section-header",style:{margin:0},children:"This Week's Workouts"}),(0,je.jsx)("p",{style:{margin:"8px 0 0 0",color:"#666"},children:m.standUpBikeType&&"Equipment-specific workouts marked with \u26a1"})]}),(0,je.jsx)("div",{className:"dashboard-workout-list",style:{display:"grid",gap:"16px"},children:ce.workouts.filter(e=>!((e,t)=>{var n;if(null===f||void 0===f||null===(n=f.planOverview)||void 0===n||!n.startDate)return!1;const r=new Date(f.planOverview.startDate+"T00:00:00"),i=864e5,o=r.getDay(),a=0===o?6:o-1,s=new Date(r.getTime()-a*i),l=new Date(s.getTime()+7*(e-1)*i),u={Monday:0,Mon:0,Tuesday:1,Tue:1,Wednesday:2,Wed:2,Thursday:3,Thu:3,Friday:4,Fri:4,Saturday:5,Sat:5,Sunday:6,Sun:6}[t];if(void 0===u)return!1;const c=new Date(l.getTime()+u*i),d=new Date;return d.setHours(0,0,0,0),c.setHours(0,0,0,0),c<d})(_,e.day)&&!((e,t)=>{var n;if(1!==e)return!1;if(null===f||void 0===f||null===(n=f.planOverview)||void 0===n||!n.startDate)return!1;const r=new Date(f.planOverview.startDate+"T00:00:00").getDay(),i={Sunday:0,Sun:0,Monday:1,Mon:1,Tuesday:2,Tue:2,Wednesday:3,Wed:3,Thursday:4,Thu:4,Friday:5,Fri:5,Saturday:6,Sat:6}[t];return void 0!==i&&0!==i&&0!==r&&i<r})(_,e.day)).map(e=>{const t=ve(e),n=t.map(t=>(0,u.A)((0,u.A)({},t),{},{date:F(_,e.day)}));return(0,je.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[n.map((n,r)=>{var i,o,a,s;return(0,je.jsxs)("div",{className:"card dashboard-workout-card",style:{background:"rest"===n.type?"linear-gradient(135deg, rgba(160, 174, 192, 0.1) 0%, rgba(160, 174, 192, 0.05) 100%)":"rest_or_xt"===n.type?"linear-gradient(135deg, rgba(34, 197, 94, 0.15) 0%, rgba(34, 197, 94, 0.08) 100%)":"linear-gradient(135deg, ".concat(de(n.type),"25 0%, ").concat(de(n.type),"08 50%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(de(n.type),"40"),borderLeft:"5px solid ".concat(de(n.type)),boxShadow:"rest"===n.type?"0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(255, 255, 255, 0.05)":"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(de(n.type),"20, 0 0 20px ").concat(de(n.type),"15"),opacity:"rest"===n.type||"rest_or_xt"===n.type?.7:1,cursor:"rest"===n.type||"rest_or_xt"===n.type?"default":"pointer",position:"relative",color:"#FFFFFF",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:"translateY(0)",overflow:"hidden"},onMouseEnter:e=>{"rest"!==n.type&&"rest_or_xt"!==n.type&&(e.currentTarget.style.transform="translateY(-4px) scale(1.01)",e.currentTarget.style.boxShadow="0 12px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px ".concat(de(n.type),"50, 0 0 30px ").concat(de(n.type),"30"),e.currentTarget.style.borderColor="".concat(de(n.type),"60"),e.currentTarget.style.borderLeftWidth="6px")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0) scale(1)",e.currentTarget.style.boxShadow="rest"===n.type?"0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(255, 255, 255, 0.05)":"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(de(n.type),"20, 0 0 20px ").concat(de(n.type),"15"),e.currentTarget.style.borderColor="".concat(de(n.type),"40"),e.currentTarget.style.borderLeftWidth="5px"},onClick:()=>(e=>{if("rest"===e.type||"rest_or_xt"===e.type||"preparation"===e.type)return;const t=(e.day||"unknown").toLowerCase().replace(/\s+/g,"-");v("/workout/".concat(t),{state:{workout:e,userProfile:(0,u.A)((0,u.A)({},m),{},{paces:null===f||void 0===f?void 0:f.paces,trackIntervals:null===f||void 0===f?void 0:f.trackIntervals}),currentWeek:_,weekData:ce}})})(n),children:[(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px",flexWrap:"wrap",gap:"12px"},children:[(0,je.jsxs)("div",{style:{flex:"1 1 auto",minWidth:"200px"},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[(0,je.jsx)("div",{children:(0,je.jsxs)("h3",{style:{margin:0,color:"#EEEEEE",fontSize:"1.1rem",fontWeight:"600"},children:[n.day,n.date&&(0,je.jsx)("span",{style:{fontSize:"0.85rem",marginLeft:"8px",color:"#AAAAAA",fontWeight:"400"},children:n.date}),t.length>1&&(0,je.jsxs)("span",{style:{fontSize:"0.75rem",marginLeft:"8px",background:"rgba(0, 212, 255, 0.2)",color:"#00D4FF",padding:"2px 8px",borderRadius:"12px",fontWeight:"700",border:"1px solid rgba(0, 212, 255, 0.4)"},children:["Workout ",r+1,"/",t.length]})]})}),n.equipmentSpecific&&(0,je.jsx)("span",{style:{fontSize:"1rem"},children:"\u26a1"}),"bike"===n.type&&(0,je.jsx)("span",{style:{fontSize:"1rem",color:"#ff9500"},title:"Pure bike workout",children:"\ud83d\udeb4"}),("brick"===n.type||"brickLongRun"===n.type)&&(0,je.jsx)("span",{style:{fontSize:"1rem",color:"#ff6b6b"},title:"Brick workout (Run + Bike combination)",children:"\ud83e\uddf1"}),"cross-training"===n.type&&(()=>{const e={pool:{emoji:"\ud83c\udfca",color:"#3b82f6",label:"Pool / Aqua Running"},aquaRunning:{emoji:"\ud83c\udfca",color:"#3b82f6",label:"Aqua Running"},rowing:{emoji:"\ud83d\udea3",color:"#22c55e",label:"Rowing Machine"},elliptical:{emoji:"\u26a1",color:"#f59e0b",label:"Elliptical"},swimming:{emoji:"\ud83c\udfca\u200d\u2642\ufe0f",color:"#06b6d4",label:"Swimming"},stationaryBike:{emoji:"\ud83d\udeb4\u200d\u2640\ufe0f",color:"#8b5cf6",label:"Stationary Bike"},standUpBike:{emoji:"\ud83d\udeb4",color:"#ec4899",label:"Stand-Up Bike"},cyclete:{emoji:"\ud83d\udeb4",color:"#ec4899",label:"Cyclete"},elliptigo:{emoji:"\ud83d\udeb4",color:"#ec4899",label:"ElliptiGO"}}[n.crossTrainingType]||{emoji:"\ud83c\udfc3",color:"#999",label:"Cross-Training"};return(0,je.jsx)("span",{style:{fontSize:"1rem",color:e.color},title:e.label,children:e.emoji})})(),n.completed&&(0,je.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),n.replacementReason&&(0,je.jsx)("span",{style:{color:"var(--runeq-accent)",fontSize:"1.2rem"},title:"Changed: ".concat(n.replacementReason),children:"\ud83d\udd04"})]}),(0,je.jsx)("h4",{style:{margin:"0 0 4px 0",fontSize:"1.1rem",color:de(n.type)},children:"rest_or_xt"===n.type?"\ud83e\uddd8 Rest / Cross-Train":(null===(i=n.workout)||void 0===i?void 0:i.name)||n.name||"Workout"}),se(n)&&(0,je.jsx)("div",{style:{display:"inline-block",background:"rgba(0, 212, 255, 0.15)",color:"#00D4FF",padding:"4px 10px",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"8px",border:"1px solid rgba(0, 212, 255, 0.3)"},children:se(n)}),"cross-training"===n.type&&n.crossTrainingType&&(()=>{const e={pool:"Pool / Aqua Running",aquaRunning:"Aqua Running",rowing:"Rowing Machine",elliptical:"Elliptical",swimming:"Swimming",stationaryBike:"Stationary Bike",standUpBike:"Stand-Up Bike",cyclete:"Cyclete",elliptigo:"ElliptiGO"}[n.crossTrainingType]||n.crossTrainingType;return(0,je.jsxs)("div",{style:{display:"inline-block",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",padding:"4px 10px",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"8px",marginLeft:se(n)?"8px":"0",border:"1px solid rgba(239, 68, 68, 0.3)"},children:["\ud83c\udfe5 ",e]})})(),("bike"===n.type||n.equipmentSpecific)&&(()=>{const e=jh.calculateWorkoutCalories(n);return e?(0,je.jsxs)("div",{style:{display:"inline-block",background:"rgba(255, 149, 0, 0.15)",color:"#FF9500",padding:"4px 10px",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"8px",marginLeft:"8px",border:"1px solid rgba(255, 149, 0, 0.3)"},children:["\ud83d\udd25 ",e.range," cal"]}):null})(),((null===(o=n.workout)||void 0===o?void 0:o.description)||n.description)&&(0,je.jsx)("p",{style:{margin:"0 0 12px 0",fontSize:"1rem",color:"#CCCCCC",lineHeight:"1.4"},children:(null===(a=n.workout)||void 0===a?void 0:a.description)||n.description}),n.completed&&(()=>{const e="".concat(_,"-").concat(n.day,"-").concat(n.workoutIndex||0),t=z[e];if(!t)return null;t.pace||t.avgHeartRate||t.cadence||t.elevationGain;return(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(0, 255, 136, 0.15) 0%, rgba(0, 212, 255, 0.15) 100%)",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:"12px",padding:"12px",marginBottom:"12px"},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"8px"},children:[(0,je.jsx)("span",{style:{fontSize:"1rem"},children:"\u2713"}),(0,je.jsx)("span",{style:{color:"#00FF88",fontSize:"0.85rem",fontWeight:"700",letterSpacing:"0.5px"},children:t.autoCompletedFromStrava?"\ud83d\udd17 SYNCED FROM STRAVA":"COMPLETED"})]}),(0,je.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"8px",fontSize:"0.85rem"},children:[t.distance&&(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.75rem"},children:"Distance"}),(0,je.jsxs)("div",{style:{color:"#FFF",fontWeight:"600"},children:[t.distance," mi"]})]}),t.duration&&(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.75rem"},children:"Duration"}),(0,je.jsxs)("div",{style:{color:"#FFF",fontWeight:"600"},children:[t.duration," min"]})]}),t.pace&&(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.75rem"},children:"Pace"}),(0,je.jsx)("div",{style:{color:"#FFF",fontWeight:"600"},children:t.pace})]}),t.avgHeartRate&&(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.75rem"},children:"Avg HR"}),(0,je.jsxs)("div",{style:{color:"#FFF",fontWeight:"600"},children:[t.avgHeartRate," bpm"]})]}),t.cadence&&(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.75rem"},children:"Cadence"}),(0,je.jsxs)("div",{style:{color:"#FFF",fontWeight:"600"},children:[Math.round(t.cadence)," spm"]})]}),t.elevationGain&&(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.75rem"},children:"Elevation"}),(0,je.jsxs)("div",{style:{color:"#FFF",fontWeight:"600"},children:[t.elevationGain," ft"]})]})]}),t.notes&&(0,je.jsxs)("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.75rem",marginBottom:"4px"},children:"Notes"}),(0,je.jsx)("div",{style:{color:"#CCC",fontSize:"0.85rem"},children:t.notes})]}),t.stravaActivityUrl&&(0,je.jsx)("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,je.jsx)("a",{href:t.stravaActivityUrl,target:"_blank",rel:"noopener noreferrer",style:{color:"#FC4C02",fontSize:"0.85rem",fontWeight:"600",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"4px"},onClick:e=>e.stopPropagation(),children:"View on Strava \u2192"})})]})})(),(0,je.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[(e=>{const t={tempo:"Lactate Threshold",intervals:"Speed & VO2 Max",hills:"Strength & Power",longRun:"Distance Builder",brickLongRun:"Distance Builder",long:"Distance Builder",easy:"Aerobic Base",bike:"Cross-Training",rest:"Recovery",rest_or_xt:"Recovery / XT"},r=((null===(e=n.workout)||void 0===e?void 0:e.name)||n.name||"").toLowerCase(),i=r.includes("long run")||r.includes("long-run");let o;o=n.focus&&"Training"!==n.focus?n.focus:t[n.type]?t[n.type]:i?"Distance Builder":"Training";const a={"Lactate Threshold":"#4299e1","Speed & VO2 Max":"#e53e3e","Strength & Power":"#38a169",Endurance:"#805ad5","Distance Builder":"#a78bfa","Aerobic Base":"#38b2ac","Aerobic Power":"#ed8936","Cross-Training":"#ed8936",Recovery:"#68d391","Recovery / XT":"#48bb78","Active Recovery":"#68d391","Easy Effort":"#38b2ac","Base Building":"#4299e1",Training:"#a0aec0"}[o]||de(n.type);return(0,je.jsx)("span",{className:"badge",style:{background:"".concat(a,"30"),color:a,fontSize:"0.8rem",fontWeight:"500"},children:o})})(),n.equipmentSpecific&&(null===m||void 0===m||null===(s=m.preferredBikeDays)||void 0===s?void 0:s.includes(n.day))&&(0,je.jsx)("span",{className:"badge badge-warning",style:{fontSize:"0.8rem",fontWeight:"500"},children:$s(m.standUpBikeType)})]})]}),"rest"===n.type||"rest_or_xt"===n.type?(0,je.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",minWidth:"140px",flexShrink:0},children:[(0,je.jsx)("button",{className:"btn",style:{fontSize:"0.85rem",padding:"10px 12px",fontWeight:"600",background:n.completed?"rgba(156, 163, 175, 0.1)":"rgba(0, 255, 136, 0.1)",color:n.completed?"#9ca3af":"#00FF88",border:n.completed?"1px solid rgba(156, 163, 175, 0.3)":"1px solid rgba(0, 255, 136, 0.3)",textAlign:"center"},onClick:e=>{e.stopPropagation(),me(n)},children:n.completed?"\u23ea Undo Rest":"\u2705 Rested"}),(0,je.jsx)("button",{className:"btn",style:{fontSize:"0.8rem",padding:"8px 12px",background:"rgba(34, 197, 94, 0.1)",color:"#22c55e",border:"1px solid rgba(34, 197, 94, 0.3)",fontWeight:"600",textAlign:"center"},onClick:e=>{e.stopPropagation(),he(n)},children:"rest_or_xt"===n.type?"\ud83c\udfca Cross-Train":"\ud83c\udf1f Add Workout"})]}):"rest"!==n.type&&"rest_or_xt"!==n.type&&(0,je.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",minWidth:"140px",flexShrink:0},children:[(0,je.jsx)("button",{className:"btn",style:{fontSize:"0.85rem",padding:"10px 12px",fontWeight:"600",background:n.completed?"rgba(156, 163, 175, 0.1)":null!==m&&void 0!==m&&m.stravaConnected?"rgba(0, 212, 255, 0.1)":"rgba(0, 255, 136, 0.1)",color:n.completed?"#9ca3af":null!==m&&void 0!==m&&m.stravaConnected?"#00D4FF":"#00FF88",border:n.completed?"1px solid rgba(156, 163, 175, 0.3)":null!==m&&void 0!==m&&m.stravaConnected?"1px solid rgba(0, 212, 255, 0.3)":"1px solid rgba(0, 255, 136, 0.3)",textAlign:"center",cursor:n.completed?"pointer":null!==m&&void 0!==m&&m.stravaConnected?"default":"pointer",opacity:null!==m&&void 0!==m&&m.stravaConnected&&!n.completed?.7:1},onClick:e=>{e.stopPropagation(),null!==m&&void 0!==m&&m.stravaConnected&&!n.completed||me(n)},children:n.completed?"\u23ea Undo":null!==m&&void 0!==m&&m.stravaConnected?(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("svg",{viewBox:"0 0 24 24",style:{width:"16px",height:"16px",display:"inline-block",marginRight:"6px",verticalAlign:"middle"},children:(0,je.jsx)("path",{fill:"#FC4C02",d:"M15.387 17.944l-2.089-4.116h-3.065L15.387 24l5.15-10.172h-3.066m-7.008-5.599l2.836 5.598h4.172L10.463 0l-7 13.828h4.169"})}),"Strava Sync"]}):"\ud83d\udcdd Log Workout"}),(()=>{const e=R(n),t=["tempo","intervals","longRun","hills"].includes(e);return("adventure"===(null===m||void 0===m?void 0:m.trainingStyle)||"flexible"===(null===m||void 0===m?void 0:m.trainingStyle)&&t)&&t})()&&!(()=>{const e="".concat(_,"-").concat(n.day,"-").concat(n.workoutIndex||0),t=z[e];return null===t||void 0===t?void 0:t.autoCompletedFromStrava})()&&(0,je.jsx)("button",{className:"btn btn-primary",style:{fontSize:"0.8rem",padding:"8px 12px",background:"#4299e1",border:"1px solid #4299e1",textAlign:"center"},onClick:e=>{e.stopPropagation();const t="".concat(_,"-").concat(n.day);L[t]?(e=>{const t="".concat(_,"-").concat(e.day);W(e=>(0,u.A)((0,u.A)({},e),{},{[t]:!1}))})(n):(e=>{var t,n,r;const i="".concat(_,"-").concat(e.day);let o=[];const a=parseFloat(null===(t=e.workout)||void 0===t||null===(n=t.name)||void 0===n||null===(r=n.match(/\d+/))||void 0===r?void 0:r[0])||8;switch(R(e)){case"intervals":o=ae.getSpeedOptions(_,m);break;case"tempo":o=ae.getTempoOptions(_,m);break;case"longRun":o=ae.getLongRunOptions(_,m,a);break;case"hills":o=ae.getHillOptions(_,m);break;case"easy":o=ae.getEasyOptions(_,m,4);break;default:o=[]}O(e=>(0,u.A)((0,u.A)({},e),{},{[i]:o})),W(e=>(0,u.A)((0,u.A)({},e),{},{[i]:!0}))})(n)},children:(()=>{const e="".concat(_,"-").concat(n.day);return L[e]?"\ud83d\udccb Hide":"\ud83c\udfb2 Choose Adventure"})()}),le(n)&&(null===m||void 0===m?void 0:m.standUpBikeType)&&"Sunday"===n.day&&!(()=>{const e="".concat(_,"-").concat(n.day,"-").concat(n.workoutIndex||0),t=z[e];return null===t||void 0===t?void 0:t.autoCompletedFromStrava})()&&(0,je.jsx)("button",{className:"btn",style:{fontSize:"0.8rem",padding:"8px 12px",fontWeight:"600",background:"brickLongRun"===n.type?"#48bb78":"transparent",color:"brickLongRun"===n.type?"white":"#c4a77d",border:"1px solid ".concat("brickLongRun"===n.type?"#48bb78":"#c4a77d"),textAlign:"center"},onClick:e=>{if(e.stopPropagation(),"brickLongRun"===n.type)ye(n);else{const e="".concat(_,"-").concat(n.day,"-").concat(n.workoutIndex||0);Y[e]?ge(n):fe(n)}},children:"brickLongRun"===n.type?"\ud83c\udfc3 Run Only":"\ud83e\uddf1 Make Brick"}),le(n)&&(null===m||void 0===m?void 0:m.standUpBikeType)&&"Sunday"!==n.day&&!(()=>{const e="".concat(_,"-").concat(n.day,"-").concat(n.workoutIndex||0),t=z[e];return null===t||void 0===t?void 0:t.autoCompletedFromStrava})()&&(0,je.jsx)("button",{className:"btn",style:{fontSize:"0.8rem",padding:"8px 12px",fontWeight:"600",background:"brickLongRun"===n.type?"#805ad5":"transparent",color:"brickLongRun"===n.type?"white":"#c4a77d",border:"1px solid ".concat("brickLongRun"===n.type?"#805ad5":"#c4a77d"),textAlign:"center"},onClick:e=>{if(e.stopPropagation(),"brickLongRun"===n.type)ye(n);else{const e="".concat(_,"-").concat(n.day,"-").concat(n.workoutIndex||0);Y[e]?ge(n):fe(n)}},children:"brickLongRun"===n.type?"\ud83c\udfc3 Run Only":"\ud83e\uddf1 Make Brick"}),!(()=>{const e="".concat(_,"-").concat(n.day,"-").concat(n.workoutIndex||0),t=z[e];return null===t||void 0===t?void 0:t.autoCompletedFromStrava})()&&(0,je.jsx)("button",{className:"btn",style:{fontSize:"0.8rem",padding:"8px 14px",textAlign:"center",background:"linear-gradient(135deg, rgba(0, 212, 255, 0.25) 0%, rgba(0, 255, 136, 0.2) 100%)",border:"2px solid rgba(0, 212, 255, 0.5)",color:"#00D4FF",fontWeight:"600",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, rgba(0, 212, 255, 0.35) 0%, rgba(0, 255, 136, 0.3) 100%)",e.currentTarget.style.border="2px solid rgba(0, 212, 255, 0.8)",e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, rgba(0, 212, 255, 0.25) 0%, rgba(0, 255, 136, 0.2) 100%)",e.currentTarget.style.border="2px solid rgba(0, 212, 255, 0.5)",e.currentTarget.style.transform="translateY(0)"},onClick:e=>{e.stopPropagation(),he(n)},children:"Life Adaptations"}),n.replacementReason&&0===r&&(0,je.jsx)("button",{className:"btn",style:{fontSize:"0.8rem",padding:"6px 12px",background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",border:"1px solid rgba(59, 130, 246, 0.3)",fontWeight:"600",textAlign:"center"},onClick:e=>{e.stopPropagation(),ye(n)},title:"Restore the original scheduled workout",children:"\u21a9\ufe0f Revert to Original"}),r>0&&(0,je.jsx)("button",{className:"btn",style:{fontSize:"0.8rem",padding:"6px 12px",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",fontWeight:"600",textAlign:"center"},onClick:t=>{t.stopPropagation(),window.confirm("Remove this workout?")&&((e,t)=>{if(0===t)return void b.warning("Cannot remove the primary workout. Use 'Something Else' to replace it instead.");const n="".concat(_,"-").concat(e.day,"-").concat(t),r=(0,u.A)({},N);delete r[n];const i="".concat(_,"-").concat(e.day),o=[];Object.keys(r).forEach(e=>{if(e.startsWith(i)){const n=parseInt(e.split("-").pop());n>t&&(o.push({key:e,index:n,workout:r[e]}),delete r[e])}}),o.sort((e,t)=>e.index-t.index).forEach((e,n)=>{const o="".concat(i,"-").concat(t+n);r[o]=e.workout}),j(r),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(r))})(e,r)},children:"\ud83d\uddd1\ufe0f Remove"})]})]}),(()=>{const e="".concat(_,"-").concat(n.day,"-").concat(n.workoutIndex||0),t=Y[e];let r=n.distance||0;if(!r){var i,o;const e=null===(i=n.workout)||void 0===i||null===(o=i.name)||void 0===o?void 0:o.match(/(\d+(?:\.\d+)?)/);r=e?parseFloat(e[1]):10}if(!t||!le(n))return null;const a=[{key:"heavy-run",emoji:"\ud83c\udfc3\u200d\u2642\ufe0f",label:"Heavy Run",runMiles:Math.round(.8*r),bikeMiles:Math.round(.2*r),description:"Feeling strong - mostly running",color:"#4299e1"},{key:"balanced",emoji:"\u2696\ufe0f",label:"Balanced",runMiles:Math.round(.6*r),bikeMiles:Math.round(.4*r),description:"Standard brick workout",color:"#ed8936"},{key:"heavy-bike",emoji:"\ud83d\udeb4",label:"Heavy Bike",runMiles:Math.round(.4*r),bikeMiles:Math.round(.6*r),description:"Legs need a break - more biking",color:"#9f7aea"},{key:"light-run",emoji:"\ud83d\udeb4\u200d\u2642\ufe0f",label:"Light Run",runMiles:Math.round(.2*r),bikeMiles:Math.round(.8*r),description:"Recovery mode - minimal running",color:"#48bb78"}];return(0,je.jsx)("div",{style:{marginTop:"12px"},children:(0,je.jsxs)("div",{style:{background:"transparent",border:"none",padding:"0"},children:[(0,je.jsx)("h4",{style:{margin:"0 0 16px 0",color:"#f59e0b",display:"flex",alignItems:"center",gap:"8px",fontSize:"1.2rem",fontWeight:"700"},children:"\ud83e\uddf1 Choose Your Brick Workout Split"}),(0,je.jsxs)("p",{style:{margin:"0 0 16px 0",fontSize:"0.9rem",color:"#CCCCCC"},children:["All options = ",r," miles total training load. Pick based on how your legs feel today:"]}),(0,je.jsx)("div",{style:{display:"grid",gap:"12px"},children:a.map(e=>(0,je.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"2px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"16px",cursor:"pointer",transition:"all 0.2s ease"},onClick:t=>{t.stopPropagation(),function(e){var t,n,r;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"balanced";const o=parseFloat(null===(t=e.workout)||void 0===t||null===(n=t.name)||void 0===n||null===(r=n.match(/\d+/))||void 0===r?void 0:r[0])||8;let a,s,l;switch(i){case"heavy-run":a=Math.round(.8*o),s=Math.round(.2*o),l="Heavy Run";break;case"balanced":default:a=Math.round(.6*o),s=Math.round(.4*o),l="Balanced";break;case"heavy-bike":a=Math.round(.4*o),s=Math.round(.6*o),l="Heavy Bike";break;case"light-run":a=Math.round(.2*o),s=Math.round(.8*o),l="Light Run"}const c=(0,u.A)((0,u.A)({},e),{},{type:"brickLongRun",workout:{name:"Brick Long Run (".concat(a,"mi run + ").concat(s," RunEQ Miles ").concat($s(null===m||void 0===m?void 0:m.standUpBikeType),")"),description:"".concat(l," brick: ").concat(a," mile run + ").concat(s," RunEQ miles on ").concat($s(null===m||void 0===m?void 0:m.standUpBikeType))},focus:"Brick Endurance",equipmentSpecific:!0,replacementReason:"Converted to ".concat(l.toLowerCase()," brick workout")}),d=e.workoutIndex||0,h="".concat(_,"-").concat(e.day,"-").concat(d);j(e=>(0,u.A)((0,u.A)({},e),{},{[h]:c})),ge(e)}(n,e.key)},onMouseEnter:t=>{t.currentTarget.style.borderColor=e.color,t.currentTarget.style.background="".concat(e.color,"15")},onMouseLeave:e=>{e.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)",e.currentTarget.style.background="rgba(255, 255, 255, 0.05)"},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.5rem"},children:e.emoji}),(0,je.jsx)("strong",{style:{color:e.color,fontSize:"1.1rem"},children:e.label})]}),(0,je.jsxs)("span",{style:{fontSize:"0.9rem",color:"#00D4FF",fontWeight:"bold"},children:[e.runMiles,"mi + ",e.bikeMiles," RunEQ"]})]}),(0,je.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#aaa"},children:e.description})]},e.key))}),(0,je.jsx)("button",{onClick:e=>{e.stopPropagation(),ge(n)},style:{marginTop:"16px",padding:"8px 16px",background:"rgba(156, 163, 175, 0.1)",color:"#9ca3af",border:"1px solid rgba(156, 163, 175, 0.3)",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",cursor:"pointer",width:"100%"},children:"Cancel"})]})})})(),(()=>{const e="".concat(_,"-").concat(n.day),t=B[e];return L[e]&&t&&0!==t.length?(0,je.jsx)("div",{style:{marginTop:"12px"},children:(0,je.jsxs)("div",{style:{background:"transparent",border:"none",padding:"0"},children:[(0,je.jsxs)("h4",{style:{margin:"0 0 16px 0",color:"#00D4FF",display:"flex",alignItems:"center",gap:"8px",fontSize:"1.2rem",fontWeight:"700"},children:["\ud83c\udfb2 Choose Your ","longRun"===n.type?"Long Run":"intervals"===n.type?"Speed":"tempo"===n.type?"Tempo":"hills"===n.type?"Hill":"Easy Run"," Adventure"]}),(0,je.jsx)("div",{style:{display:"grid",gap:"12px"},children:t.map((e,t)=>{var r;const i=((e,t)=>{const n={"Very Easy":{bg:"rgba(34, 197, 94, 0.4)",border:"rgba(34, 197, 94, 0.8)",accent:"#22c55e",icon:"\ud83d\ude0c"},Easy:{bg:"rgba(34, 197, 94, 0.45)",border:"rgba(34, 197, 94, 0.9)",accent:"#22c55e",icon:"\ud83d\udfe2"},"Easy-Moderate":{bg:"rgba(245, 158, 11, 0.4)",border:"rgba(245, 158, 11, 0.8)",accent:"#f59e0b",icon:"\ud83d\udfe1"},Moderate:{bg:"rgba(245, 158, 11, 0.45)",border:"rgba(245, 158, 11, 0.9)",accent:"#f59e0b",icon:"\ud83d\udd36"},"Medium-Hard":{bg:"rgba(239, 68, 68, 0.4)",border:"rgba(239, 68, 68, 0.8)",accent:"#ef4444",icon:"\ud83d\udd38"},Hard:{bg:"rgba(239, 68, 68, 0.45)",border:"rgba(239, 68, 68, 0.9)",accent:"#ef4444",icon:"\ud83d\udd25"},"Very Hard":{bg:"rgba(220, 38, 127, 0.4)",border:"rgba(220, 38, 127, 0.8)",accent:"#dc2626",icon:"\ud83d\udca5"},Variable:{bg:"rgba(168, 85, 247, 0.4)",border:"rgba(168, 85, 247, 0.8)",accent:"#a855f7",icon:"\u26a1"},"Variable Hard":{bg:"rgba(168, 85, 247, 0.45)",border:"rgba(168, 85, 247, 0.9)",accent:"#a855f7",icon:"\u26a1"},Progressive:{bg:"rgba(59, 130, 246, 0.4)",border:"rgba(59, 130, 246, 0.8)",accent:"#3b82f6",icon:"\ud83d\udcc8"}};if(!n[e]&&t)return{Low:n.Easy,"Low-Moderate":n["Easy-Moderate"],Moderate:n.Moderate,"Moderate-High":n["Medium-Hard"],High:n.Hard,"Very High":n["Very Hard"]}[t]||n.Moderate;return n[e]||n.Moderate})(e.intensity,e.difficulty),o="".concat(_,"-").concat(n.day),a=(null===(r=q[o])||void 0===r?void 0:r.id)===e.id;return(0,je.jsxs)("div",{className:"card",style:{cursor:"pointer",background:a?"rgba(74, 222, 128, 0.2)":i.bg,border:a?"3px solid #4ade80":"2px solid ".concat(i.border),borderLeft:a?"6px solid #22c55e":"6px solid ".concat(i.accent),transition:"all 0.2s ease",backdropFilter:"blur(3px)",boxShadow:a?"0 4px 20px rgba(74, 222, 128, 0.4)":"0 4px 16px ".concat(i.accent,"20"),transform:a?"scale(1.02)":"scale(1)"},onClick:t=>{t.preventDefault(),t.stopPropagation(),((e,t)=>{const n="".concat(_,"-").concat(e.day);Ne.log("\ud83c\udfaf Option selected:",{workoutKey:n,selectedOption:t.shortName,workout:e.day,currentWeek:_,selectedOptionObject:t});try{const e=(0,u.A)((0,u.A)({},q),{},{[n]:t});Ne.log("\ud83d\udcdd Direct state update:",{oldState:q,newState:e,workoutKey:n,selectedOption:t.shortName}),U(e),Ne.log("\u2728 State update dispatched, should see confirmation buttons next")}catch(r){console.error("\u274c Error in handleSelectOption:",r)}})(n,e)},onMouseEnter:e=>{e.currentTarget.style.background=i.bg.replace("0.1","0.2").replace("0.15","0.25"),e.currentTarget.style.border="2px solid ".concat(i.accent),e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 12px ".concat(i.accent,"40")},onMouseLeave:e=>{e.currentTarget.style.background=i.bg,e.currentTarget.style.border="2px solid ".concat(i.border),e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:[(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.2rem"},children:i.icon}),(0,je.jsx)("h5",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600",color:"#FFFFFF"},children:e.name}),a&&(0,je.jsx)("span",{style:{background:"#22c55e",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"0.7rem",fontWeight:"600"},children:"\u2713 SELECTED"})]}),(0,je.jsx)("p",{style:{margin:"0 0 10px 0",fontSize:"0.9rem",color:"#FFFFFF",lineHeight:"1.4",opacity:"1"},children:e.description}),(0,je.jsxs)("div",{style:{display:"flex",gap:"12px",fontSize:"0.8rem",color:"#FFFFFF",opacity:"1",marginBottom:"8px"},children:[(0,je.jsxs)("span",{children:["\u23f1\ufe0f ",e.timeRequired]}),(0,je.jsxs)("span",{children:["\ud83d\udccd ",e.location]}),(0,je.jsxs)("span",{children:["\ud83d\udcaa ",e.difficulty]})]})]}),(0,je.jsx)("div",{style:{background:i.accent+"20",color:"#FFFFFF",padding:"6px 12px",borderRadius:"16px",fontSize:"0.8rem",fontWeight:"600",whiteSpace:"nowrap",marginLeft:"12px",border:"1px solid ".concat(i.accent,"40")},children:e.focus})]}),(0,je.jsxs)("div",{style:{background:i.accent+"15",color:"#FFFFFF",padding:"8px 12px",borderRadius:"8px",fontSize:"0.85rem",fontWeight:"500",border:"1px solid ".concat(i.accent,"30")},children:["\ud83d\udca1 ",e.benefits]})]},e.id)})}),(0,je.jsx)("div",{style:{marginTop:"12px",padding:"8px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.8rem",color:"#CCCCCC",fontStyle:"italic"},children:["\ud83d\udca1 ",(0,je.jsx)("strong",{children:"All options target the same training system"})," - choose based on your mood, time, and location!"]})}),(()=>{const e="".concat(_,"-").concat(n.day),t=q[e];return Ne.log("\ud83d\udd0d Checking confirmation buttons:",{workoutKey:e,selectedOption:(null===t||void 0===t?void 0:t.shortName)||"none",hasSelection:!!t,selectedOptionsState:q}),t?(Ne.log("\u2705 Showing confirmation buttons for:",t.shortName),Ne.log("   Confirmation buttons should be visible now!"),console.warn("\ud83d\udea8 BUTTONS RENDERING NOW - they should be bright green and obvious!"),(0,je.jsxs)("div",{style:{marginTop:"16px",padding:"20px",background:"linear-gradient(135deg, rgba(74, 222, 128, 0.3), rgba(34, 197, 94, 0.2))",border:"3px solid #22c55e",borderRadius:"12px",boxShadow:"0 8px 25px rgba(34, 197, 94, 0.4)",position:"relative",zIndex:1e3},children:[(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.2rem"},children:"\u2705"}),(0,je.jsxs)("span",{style:{color:"#4ade80",fontWeight:"600",fontSize:"0.9rem"},children:["Selected: ",t.shortName]})]}),(0,je.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,je.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),(async e=>{const t="".concat(_,"-").concat(e.day),n=q[t];if(!n)return;const r=(0,u.A)((0,u.A)({},e),{},{workout:(0,u.A)({},n),focus:n.focus||e.focus,replacementReason:"Choose Your Adventure selection"}),i=(0,u.A)((0,u.A)({},N),{},{[t]:r});j(i),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(i)),Ie.j2.currentUser&&(await Me.saveModifiedWorkout(Ie.j2.currentUser.uid,_,e.day,r),Ne.log("\u2705 SAVED to Firestore:",n.name,"for",e.day)),U({}),W(e=>(0,u.A)((0,u.A)({},e),{},{[t]:!1}))})(n)},style:{flex:1,padding:"12px 20px",background:"linear-gradient(135deg, #22c55e, #16a34a)",color:"white",border:"2px solid #16a34a",borderRadius:"8px",fontSize:"1rem",fontWeight:"700",cursor:"pointer",transition:"all 0.2s ease",textShadow:"0 1px 2px rgba(0,0,0,0.3)",boxShadow:"0 4px 12px rgba(34, 197, 94, 0.4)"},onMouseEnter:e=>e.target.style.background="#22c55e",onMouseLeave:e=>e.target.style.background="#4ade80",children:"\u2713 Confirm Selection"}),(0,je.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),(e=>{const t="".concat(_,"-").concat(e.day);U(e=>{const n=(0,u.A)({},e);return delete n[t],n})})(n)},style:{padding:"8px 16px",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.background="rgba(239, 68, 68, 0.2)",e.target.style.borderColor="#ef4444"},onMouseLeave:e=>{e.target.style.background="rgba(239, 68, 68, 0.1)",e.target.style.borderColor="rgba(239, 68, 68, 0.3)"},children:"\u2717 Cancel"})]})]})):(Ne.log("\u274c No selectedOption found for key:",e),Ne.log("   Available keys:",Object.keys(q)),null)})()]})}):null})()]},"".concat(e.day,"-").concat(r))}),(0,je.jsx)("button",{className:"btn dashboard-add-workout-button",style:{width:"100%",fontSize:"0.9rem",padding:"12px",background:"rgba(34, 197, 94, 0.1)",color:"#22c55e",border:"2px dashed rgba(34, 197, 94, 0.3)",fontWeight:"600",marginTop:t.length>1?"0":"8px"},onClick:t=>{t.stopPropagation(),(e=>{he(e,"add")})(e)},children:"\u2795 Add Second Workout (Two-a-Day)"})]},e.day)})})]})]}),(0,je.jsx)(Xh,{isOpen:P.isOpen,onClose:pe,currentWorkout:P.workout,userProfile:m,trainingPlan:f,onWorkoutSelect:e=>{const t=P.mode||"replace",n="".concat(_,"-").concat(e.day);if("add"===t){var r;let t=0;for(;N["".concat(n,"-").concat(t)];)t++;0===t&&(t=1);const i="".concat(n,"-").concat(t),o=(0,u.A)((0,u.A)({},N),{},{[i]:e});j(o),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(o)),Ne.log("\ud83d\udcbe Added second workout:",i,null===(r=e.workout)||void 0===r?void 0:r.name)}else{var i;const t="".concat(n,"-0"),r=(0,u.A)((0,u.A)({},N),{},{[t]:e});j(r),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(r)),Ne.log("\ud83d\udcbe Replaced workout:",t,null===(i=e.workout)||void 0===i?void 0:i.name)}pe()},weather:null,mode:P.mode||"replace"}),(0,je.jsx)(np,{isOpen:w,onClose:()=>D(!1),userProfile:m,trainingPlan:f,currentWeek:_}),(0,je.jsx)(rp,{isOpen:k,onClose:()=>x(!1),userProfile:m,trainingPlan:f,currentWeek:_}),X.isOpen&&(0,je.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:"20px"},children:(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",borderRadius:"12px",padding:"30px",maxWidth:"500px",width:"100%",border:"2px solid rgba(0, 212, 255, 0.3)"},children:[(0,je.jsx)("h2",{style:{color:"#00D4FF",marginTop:0,marginBottom:"20px"},children:"Mark Workout Complete"}),(0,je.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,je.jsx)("h3",{style:{color:"#FFFFFF",fontSize:"16px",marginBottom:"8px"},children:(null===(l=X.workout)||void 0===l||null===(c=l.workout)||void 0===c?void 0:c.name)||(null===(d=X.workout)||void 0===d?void 0:d.name)}),(0,je.jsxs)("p",{style:{color:"#AAAAAA",fontSize:"14px",margin:0},children:[null===(h=X.workout)||void 0===h?void 0:h.type," - ",null===(p=X.workout)||void 0===p?void 0:p.focus]})]}),(0,je.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#CCCCCC",fontSize:"14px",marginBottom:"8px",fontWeight:"500"},children:"Distance Completed (miles)"}),(0,je.jsx)("input",{type:"number",step:"0.1",value:X.distance,onChange:e=>J(t=>(0,u.A)((0,u.A)({},t),{},{distance:e.target.value})),placeholder:"Enter distance",style:{width:"100%",padding:"12px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#FFFFFF",fontSize:"16px",boxSizing:"border-box"}})]}),(0,je.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,je.jsx)("label",{style:{display:"block",color:"#CCCCCC",fontSize:"14px",marginBottom:"8px",fontWeight:"500"},children:"Notes (optional)"}),(0,je.jsx)("textarea",{value:X.notes,onChange:e=>J(t=>(0,u.A)((0,u.A)({},t),{},{notes:e.target.value})),placeholder:"How did it feel? Any observations?",rows:3,style:{width:"100%",padding:"12px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#FFFFFF",fontSize:"14px",fontFamily:"inherit",resize:"vertical",boxSizing:"border-box"}})]}),(0,je.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,je.jsx)("button",{onClick:async()=>{const{workout:e,distance:t,notes:n}=X;if(!e||!Ie.j2.currentUser)return;const r=!0,i=e.workoutIndex||0,o="".concat(_,"-").concat(e.day,"-").concat(i);H(e=>(0,u.A)((0,u.A)({},e),{},{[o]:{completed:r,completedAt:(new Date).toISOString(),actualDistance:t?parseFloat(t):null,notes:n||null}})),J({isOpen:!1,workout:null,distance:"",notes:""});try{(await Me.markWorkoutComplete(Ie.j2.currentUser.uid,_,e.day,r,t?parseFloat(t):null,n||null)).success||(console.error("Failed to save completion status"),H(e=>{const t=(0,u.A)({},e);return delete t[o],t}),b.error("Failed to save. Please try again."))}catch(a){console.error("Error saving completion:",a),H(e=>{const t=(0,u.A)({},e);return delete t[o],t}),b.error("Failed to save. Please try again.")}},style:{flex:1,padding:"15px",background:"#00D4FF",color:"#000000",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},children:"Save"}),(0,je.jsx)("button",{onClick:()=>J({isOpen:!1,workout:null,distance:"",notes:""}),style:{padding:"15px 30px",background:"rgba(156, 163, 175, 0.1)",color:"#9CA3AF",border:"1px solid rgba(156, 163, 175, 0.3)",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},children:"Cancel"})]})]})}),V&&(0,je.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:"20px"},children:(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",borderRadius:"12px",padding:"40px",maxWidth:"600px",width:"100%",border:"2px solid rgba(0, 212, 255, 0.3)",maxHeight:"90vh",overflowY:"auto"},children:[(0,je.jsx)("h2",{style:{color:"#00D4FF",marginTop:0},children:"\ud83c\udfab Setup Beta Codes"}),(0,je.jsx)("p",{style:{color:"#AAAAAA",marginBottom:"20px"},children:"This will add 10 unique single-use beta codes to Firestore."}),(0,je.jsxs)("div",{style:{background:"rgba(0, 0, 0, 0.3)",padding:"20px",borderRadius:"8px",marginBottom:"30px",fontFamily:"monospace",fontSize:"14px"},children:[(0,je.jsx)("strong",{style:{color:"#00D4FF"},children:"Your 10 Beta Codes:"}),(0,je.jsxs)("div",{style:{marginTop:"10px"},children:[(0,je.jsx)("div",{children:"1. VVVFRS"}),(0,je.jsx)("div",{children:"2. SVTQHH"}),(0,je.jsx)("div",{children:"3. EN88AQ"}),(0,je.jsx)("div",{children:"4. H8RXZ6"}),(0,je.jsx)("div",{children:"5. 69JUVC"}),(0,je.jsx)("div",{children:"6. XJXHZM"}),(0,je.jsx)("div",{children:"7. 2EHTS9"}),(0,je.jsx)("div",{children:"8. ZWNVSS"}),(0,je.jsx)("div",{children:"9. KFCHAK"}),(0,je.jsx)("div",{children:"10. 8E685H"})]})]}),(0,je.jsxs)("div",{style:{background:"rgba(255, 184, 0, 0.1)",border:"1px solid rgba(255, 184, 0, 0.3)",borderRadius:"8px",padding:"16px",marginBottom:"20px",color:"#FFB800"},children:[(0,je.jsx)("strong",{children:"\u26a0\ufe0f Before clicking:"}),(0,je.jsxs)("ol",{style:{margin:"10px 0 0 0",paddingLeft:"20px"},children:[(0,je.jsx)("li",{children:"Make sure Firestore security rules are updated"}),(0,je.jsx)("li",{children:"This only needs to be done once"}),(0,je.jsx)("li",{children:"Each code can only be used once"})]})]}),(0,je.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,je.jsx)("button",{onClick:async()=>{const e=["VVVFRS","SVTQHH","EN88AQ","H8RXZ6","69JUVC","XJXHZM","2EHTS9","ZWNVSS","KFCHAK","8E685H"];try{let t=0;const{doc:r,setDoc:i,serverTimestamp:o}=await Promise.resolve().then(n.bind(n,667)),{db:a}=await Promise.resolve().then(n.bind(n,121));for(const n of e){const e=r(a,"betaCodes",n);await i(e,{code:n,used:!1,usedBy:null,usedAt:null,createdAt:o(),createdFor:"",notes:""}),t++}b.success("Success! All ".concat(t," beta codes added to Firestore! Check Firebase Console \u2192 Firestore \u2192 betaCodes"),8e3),K(!1)}catch(t){console.error("Error adding beta codes:",t),b.error("Error adding beta codes: ".concat(t.message,". Make sure Firestore security rules allow writes for authenticated users."),1e4)}},style:{flex:1,padding:"15px",background:"#00D4FF",color:"#000000",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},children:"\ud83d\ude80 Add Codes to Firestore"}),(0,je.jsx)("button",{onClick:()=>K(!1),style:{padding:"15px 30px",background:"rgba(156, 163, 175, 0.1)",color:"#9CA3AF",border:"1px solid rgba(156, 163, 175, 0.3)",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},children:"Cancel"})]})]})})]})});var we};function up(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}function cp(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}let dp=function(){const{crypto:e}=globalThis;if(null!==e&&void 0!==e&&e.randomUUID)return dp=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^n()&15>>+e/4).toString(16))};function hp(e){return"object"===typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const pp=e=>{if(e instanceof Error)return e;if("object"===typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch(t){}try{return new Error(JSON.stringify(e))}catch(n){}}return new Error(e)};class mp extends Error{}class fp extends mp{constructor(e,t,n,r){super("".concat(fp.makeMessage(e,t,n))),this.status=e,this.headers=r,this.requestID=null===r||void 0===r?void 0:r.get("request-id"),this.error=t}static makeMessage(e,t,n){const r=null!==t&&void 0!==t&&t.message?"string"===typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?"".concat(e," ").concat(r):e?"".concat(e," status code (no body)"):r||"(no status code or body)"}static generate(e,t,n,r){if(!e||!r)return new yp({message:n,cause:pp(t)});const i=t;return 400===e?new bp(e,i,n,r):401===e?new wp(e,i,n,r):403===e?new Dp(e,i,n,r):404===e?new kp(e,i,n,r):409===e?new xp(e,i,n,r):422===e?new Ep(e,i,n,r):429===e?new Sp(e,i,n,r):e>=500?new Cp(e,i,n,r):new fp(e,i,n,r)}}class gp extends fp{constructor(){let{message:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(void 0,void 0,e||"Request was aborted.",void 0)}}class yp extends fp{constructor(e){let{message:t,cause:n}=e;super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class vp extends yp{constructor(){let{message:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({message:null!==e&&void 0!==e?e:"Request timed out."})}}class bp extends fp{}class wp extends fp{}class Dp extends fp{}class kp extends fp{}class xp extends fp{}class Ep extends fp{}class Sp extends fp{}class Cp extends fp{}const Ap=/^[a-z][a-z0-9+.-]*:/i;let Tp=e=>(Tp=Array.isArray,Tp(e)),Fp=Tp;function Rp(e){return"object"!==typeof e?{}:null!==e&&void 0!==e?e:{}}const _p=e=>{try{return JSON.parse(e)}catch(t){return}},Ip="0.69.0";const Pp=()=>{const e="undefined"!==typeof Deno&&null!=Deno.build?"deno":"undefined"!==typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call("undefined"!==typeof globalThis.process?globalThis.process:0)?"node":"unknown";var t,n,r,i,o;if("deno"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ip,"X-Stainless-OS":Np(Deno.build.os),"X-Stainless-Arch":Mp(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"===typeof Deno.version?Deno.version:null!==(t=null===(n=Deno.version)||void 0===n?void 0:n.deno)&&void 0!==t?t:"unknown"};if("undefined"!==typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ip,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"other:".concat(EdgeRuntime),"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ip,"X-Stainless-OS":Np(null!==(r=globalThis.process.platform)&&void 0!==r?r:"unknown"),"X-Stainless-Arch":Mp(null!==(i=globalThis.process.arch)&&void 0!==i?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":null!==(o=globalThis.process.version)&&void 0!==o?o:"unknown"};const a=function(){if("undefined"===typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const e=n.exec(navigator.userAgent);if(e){const n=e[1]||0,r=e[2]||0,i=e[3]||0;return{browser:t,version:"".concat(n,".").concat(r,".").concat(i)}}}return null}();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ip,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"browser:".concat(a.browser),"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ip,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};const Mp=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?"other:".concat(e):"unknown",Np=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?"Other:".concat(e):"Unknown";let jp;function Bp(){const e=globalThis.ReadableStream;if("undefined"===typeof e)throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new e(...n)}function Op(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return Bp({start(){},async pull(e){const{done:n,value:r}=await t.next();n?e.close():e.enqueue(r)},async cancel(){var e;await(null===(e=t.return)||void 0===e?void 0:e.call(t))}})}function Lp(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return null!==e&&void 0!==e&&e.done&&t.releaseLock(),e}catch(wy){throw t.releaseLock(),wy}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const Wp=e=>{let{headers:t,body:n}=e;return{bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(n)}};function qp(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Up(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Up(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Up=function(e){this.s=e,this.n=e.next},Up.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Up(e)}function zp(e,t){this.v=e,this.k=t}function Hp(e){return new zp(e,0)}function Vp(e){return function(){return new Kp(e.apply(this,arguments))}}function Kp(e){var t,n;function r(t,n){try{var o=e[t](n),a=o.value,s=a instanceof zp;Promise.resolve(s?a.v:a).then(function(n){if(s){var l="return"===t?"return":"next";if(!a.k||n.done)return r(l,n);n=e[l](n).value}i(o.done?"return":"normal",n)},function(e){r("throw",e)})}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise(function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,i))})},"function"!=typeof e.return&&(this.return=void 0)}let Yp,Gp;function Qp(e){let t;return(null!==Yp&&void 0!==Yp?Yp:(t=new globalThis.TextEncoder,Yp=t.encode.bind(t)))(e)}function Zp(e){let t;return(null!==Gp&&void 0!==Gp?Gp:(t=new globalThis.TextDecoder,Gp=t.decode.bind(t)))(e)}var Xp,Jp;Kp.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Kp.prototype.next=function(e){return this._invoke("next",e)},Kp.prototype.throw=function(e){return this._invoke("throw",e)},Kp.prototype.return=function(e){return this._invoke("return",e)};class $p{constructor(){Xp.set(this,void 0),Jp.set(this,void 0),up(this,Xp,new Uint8Array,"f"),up(this,Jp,null,"f")}decode(e){if(null==e)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"===typeof e?Qp(e):e;up(this,Xp,function(e){let t=0;for(const i of e)t+=i.length;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}([cp(this,Xp,"f"),t]),"f");const n=[];let r;for(;null!=(r=em(cp(this,Xp,"f"),cp(this,Jp,"f")));){if(r.carriage&&null==cp(this,Jp,"f")){up(this,Jp,r.index,"f");continue}if(null!=cp(this,Jp,"f")&&(r.index!==cp(this,Jp,"f")+1||r.carriage)){n.push(Zp(cp(this,Xp,"f").subarray(0,cp(this,Jp,"f")-1))),up(this,Xp,cp(this,Xp,"f").subarray(cp(this,Jp,"f")),"f"),up(this,Jp,null,"f");continue}const e=null!==cp(this,Jp,"f")?r.preceding-1:r.preceding,t=Zp(cp(this,Xp,"f").subarray(0,e));n.push(t),up(this,Xp,cp(this,Xp,"f").subarray(r.index),"f"),up(this,Jp,null,"f")}return n}flush(){return cp(this,Xp,"f").length?this.decode("\n"):[]}}function em(e,t){for(let n=null!==t&&void 0!==t?t:0;n<e.length;n++){if(10===e[n])return{preceding:n,index:n+1,carriage:!1};if(13===e[n])return{preceding:n,index:n+1,carriage:!0}}return null}function tm(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1}Xp=new WeakMap,Jp=new WeakMap,$p.NEWLINE_CHARS=new Set(["\n","\r"]),$p.NEWLINE_REGEXP=/\r\n|[\n\r]/g;const nm={off:0,error:200,warn:300,info:400,debug:500},rm=(e,t,n)=>{var r,i;if(e)return r=nm,i=e,Object.prototype.hasOwnProperty.call(r,i)?e:void lm(n).warn("".concat(t," was set to ").concat(JSON.stringify(e),", expected one of ").concat(JSON.stringify(Object.keys(nm))))};function im(){}function om(e,t,n){return!t||nm[e]>nm[n]?im:t[e].bind(t)}const am={error:im,warn:im,info:im,debug:im};let sm=new WeakMap;function lm(e){var t;const n=e.logger,r=null!==(t=e.logLevel)&&void 0!==t?t:"off";if(!n)return am;const i=sm.get(n);if(i&&i[0]===r)return i[1];const o={error:om("error",n,r),warn:om("warn",n,r),info:om("info",n,r),debug:om("debug",n,r)};return sm.set(n,[r,o]),o}const um=e=>(e.options&&(e.options=(0,u.A)({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(e=>{let[t,n]=e;return[t,"x-api-key"===t.toLowerCase()||"authorization"===t.toLowerCase()||"cookie"===t.toLowerCase()||"set-cookie"===t.toLowerCase()?"***":n]}))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);var cm,dm,hm;class pm{constructor(e,t,n){this.iterator=e,cm.set(this,void 0),this.controller=t,up(this,cm,n,"f")}static fromSSEResponse(e,t,n){let r=!1;const i=n?lm(n):console;function o(){return o=Vp(function*(){if(r)throw new mp("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let n=!1;try{var o,a=!1,s=!1;try{for(var l,u=qp(function(e,t){return mm.apply(this,arguments)}(e,t));a=!(l=yield Hp(u.next())).done;a=!1){const t=l.value;if("completion"===t.event)try{yield JSON.parse(t.data)}catch(wy){throw i.error("Could not parse message into JSON:",t.data),i.error("From chunk:",t.raw),wy}if("message_start"===t.event||"message_delta"===t.event||"message_stop"===t.event||"content_block_start"===t.event||"content_block_delta"===t.event||"content_block_stop"===t.event)try{yield JSON.parse(t.data)}catch(wy){throw i.error("Could not parse message into JSON:",t.data),i.error("From chunk:",t.raw),wy}var c;if("ping"!==t.event)if("error"===t.event)throw new fp(void 0,null!==(c=_p(t.data))&&void 0!==c?c:t.data,void 0,e.headers)}}catch(d){s=!0,o=d}finally{try{a&&null!=u.return&&(yield Hp(u.return()))}finally{if(s)throw o}}n=!0}catch(wy){if(hp(wy))return;throw wy}finally{n||t.abort()}}),o.apply(this,arguments)}return new pm(function(){return o.apply(this,arguments)},t,n)}static fromReadableStream(e,t,n){let r=!1;function i(){return(i=Vp(function*(){const t=new $p,n=Lp(e);var r,i=!1,o=!1;try{for(var a,s=qp(n);i=!(a=yield Hp(s.next())).done;i=!1){const e=a.value;for(const n of t.decode(e))yield n}}catch(l){o=!0,r=l}finally{try{i&&null!=s.return&&(yield Hp(s.return()))}finally{if(o)throw r}}for(const e of t.flush())yield e})).apply(this,arguments)}function o(){return o=Vp(function*(){if(r)throw new mp("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let e=!1;try{var n,o=!1,a=!1;try{for(var s,l=qp(function(){return i.apply(this,arguments)}());o=!(s=yield Hp(l.next())).done;o=!1){const t=s.value;e||t&&(yield JSON.parse(t))}}catch(u){a=!0,n=u}finally{try{o&&null!=l.return&&(yield Hp(l.return()))}finally{if(a)throw n}}e=!0}catch(wy){if(hp(wy))return;throw wy}finally{e||t.abort()}}),o.apply(this,arguments)}return new pm(function(){return o.apply(this,arguments)},t,n)}[(cm=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=r=>({next:()=>{if(0===r.length){const r=n.next();e.push(r),t.push(r)}return r.shift()}});return[new pm(()=>r(e),this.controller,cp(this,cm,"f")),new pm(()=>r(t),this.controller,cp(this,cm,"f"))]}toReadableStream(){const e=this;let t;return Bp({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:n,done:r}=await t.next();if(r)return e.close();const i=Qp(JSON.stringify(n)+"\n");e.enqueue(i)}catch(n){e.error(n)}},async cancel(){var e,n;await(null===(e=(n=t).return)||void 0===e?void 0:e.call(n))}})}}function mm(){return mm=Vp(function*(e,t){if(!e.body){if(t.abort(),"undefined"!==typeof globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new mp("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new mp("Attempted to iterate over a response with no body")}const n=new gm,r=new $p,i=Lp(e.body);var o,a=!1,s=!1;try{for(var l,u=qp(function(e){return fm.apply(this,arguments)}(i));a=!(l=yield Hp(u.next())).done;a=!1){const e=l.value;for(const t of r.decode(e)){const e=n.decode(t);e&&(yield e)}}}catch(c){s=!0,o=c}finally{try{a&&null!=u.return&&(yield Hp(u.return()))}finally{if(s)throw o}}for(const d of r.flush()){const e=n.decode(d);e&&(yield e)}}),mm.apply(this,arguments)}function fm(){return fm=Vp(function*(e){let t=new Uint8Array;var n,r=!1,i=!1;try{for(var o,a=qp(e);r=!(o=yield Hp(a.next())).done;r=!1){const e=o.value;{if(null==e)continue;const n=e instanceof ArrayBuffer?new Uint8Array(e):"string"===typeof e?Qp(e):e;let r,i=new Uint8Array(t.length+n.length);for(i.set(t),i.set(n,t.length),t=i;-1!==(r=tm(t));)yield t.slice(0,r),t=t.slice(r)}}}catch(s){i=!0,n=s}finally{try{r&&null!=a.return&&(yield Hp(a.return()))}finally{if(i)throw n}}t.length>0&&(yield t)}),fm.apply(this,arguments)}class gm{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=function(e,t){const n=e.indexOf(t);if(-1!==n)return[e.substring(0,n),t,e.substring(n+t.length)];return[e,"",""]}(e,":");return r.startsWith(" ")&&(r=r.substring(1)),"event"===t?this.event=r:"data"===t&&this.data.push(r),null}}async function ym(e,t){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=t,a=await(async r=>{if(t.options.stream)return lm(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller):pm.fromSSEResponse(n,t.controller);if(204===n.status)return null;if(t.options.__binaryResponse)return n;const i=n.headers.get("content-type"),o=null===i||void 0===i||null===(r=i.split(";")[0])||void 0===r?void 0:r.trim();if((null===o||void 0===o?void 0:o.includes("application/json"))||(null===o||void 0===o?void 0:o.endsWith("+json"))){return vm(await n.json(),n)}return await n.text()})();return lm(e).debug("[".concat(r,"] response parsed"),um({retryOfRequestLogID:i,url:n.url,status:n.status,body:a,durationMs:Date.now()-o})),a}function vm(e,t){return!e||"object"!==typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("request-id"),enumerable:!1})}class bm extends Promise{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ym;super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=n,dm.set(this,void 0),up(this,dm,e,"f")}_thenUnwrap(e){return new bm(cp(this,dm,"f"),this.responsePromise,async(t,n)=>vm(e(await this.parseResponse(t,n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(cp(this,dm,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}dm=new WeakMap;class wm{constructor(e,t,n,r){hm.set(this,void 0),up(this,hm,e,"f"),this.options=r,this.response=t,this.body=n}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageRequestOptions()}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new mp("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await cp(this,hm,"f").requestAPIList(this.constructor,e)}iterPages(){var e=this;return Vp(function*(){let t=e;for(yield t;t.hasNextPage();)t=yield Hp(t.getNextPage()),yield t})()}[(hm=new WeakMap,Symbol.asyncIterator)](){var e=this;return Vp(function*(){var t,n=!1,r=!1;try{for(var i,o=qp(e.iterPages());n=!(i=yield Hp(o.next())).done;n=!1){const e=i.value;for(const t of e.getPaginatedItems())yield t}}catch(a){r=!0,t=a}finally{try{n&&null!=o.return&&(yield Hp(o.return()))}finally{if(r)throw t}}})()}}class Dm extends bm{constructor(e,t,n){super(e,t,async(e,t)=>new n(e,t.response,await ym(e,t),t.options))}[Symbol.asyncIterator](){var e=this;return Vp(function*(){const t=yield Hp(e);var n,r=!1,i=!1;try{for(var o,a=qp(t);r=!(o=yield Hp(a.next())).done;r=!1){const e=o.value;yield e}}catch(s){i=!0,n=s}finally{try{r&&null!=a.return&&(yield Hp(a.return()))}finally{if(i)throw n}}})()}}class km extends wm{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1,this.first_id=n.first_id||null,this.last_id=n.last_id||null}getPaginatedItems(){var e;return null!==(e=this.data)&&void 0!==e?e:[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){var e;if(null!==(e=this.options.query)&&void 0!==e&&e.before_id){const e=this.first_id;return e?(0,u.A)((0,u.A)({},this.options),{},{query:(0,u.A)((0,u.A)({},Rp(this.options.query)),{},{before_id:e})}):null}const t=this.last_id;return t?(0,u.A)((0,u.A)({},this.options),{},{query:(0,u.A)((0,u.A)({},Rp(this.options.query)),{},{after_id:t})}):null}}class xm extends wm{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1,this.next_page=n.next_page||null}getPaginatedItems(){var e;return null!==(e=this.data)&&void 0!==e?e:[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){const e=this.next_page;return e?(0,u.A)((0,u.A)({},this.options),{},{query:(0,u.A)((0,u.A)({},Rp(this.options.query)),{},{page:e})}):null}}const Em=()=>{if("undefined"===typeof File){var e;const{process:t}=globalThis,n="string"===typeof(null===t||void 0===t||null===(e=t.versions)||void 0===e?void 0:e.node)&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Sm(e,t,n){return Em(),new File(e,null!==t&&void 0!==t?t:"unknown_file",n)}function Cm(e){return("object"===typeof e&&null!==e&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const Am=e=>null!=e&&"object"===typeof e&&"function"===typeof e[Symbol.asyncIterator],Tm=async(e,t)=>(0,u.A)((0,u.A)({},e),{},{body:await Rm(e.body,t)}),Fm=new WeakMap;const Rm=async(e,t)=>{if(!await function(e){const t="function"===typeof e?e:e.fetch,n=Fm.get(t);if(n)return n;const r=(async()=>{try{const e="Response"in t?t.Response:(await t("data:,")).constructor,n=new FormData;return n.toString()!==await new e(n).text()}catch(e){return!0}})();return Fm.set(t,r),r}(t))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(e||{}).map(e=>{let[t,r]=e;return Im(n,t,r)})),n},_m=e=>e instanceof Blob&&"name"in e,Im=async(e,t,n)=>{if(void 0!==n){if(null==n)throw new TypeError('Received null for "'.concat(t,"\"; to pass null in FormData, you must use the string 'null'"));if("string"===typeof n||"number"===typeof n||"boolean"===typeof n)e.append(t,String(n));else if(n instanceof Response){let r={};const i=n.headers.get("Content-Type");i&&(r={type:i}),e.append(t,Sm([await n.blob()],Cm(n),r))}else if(Am(n))e.append(t,Sm([await new Response(Op(n)).blob()],Cm(n)));else if(_m(n))e.append(t,Sm([n],Cm(n),{type:n.type}));else if(Array.isArray(n))await Promise.all(n.map(n=>Im(e,t+"[]",n)));else{if("object"!==typeof n)throw new TypeError("Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ".concat(n," instead"));await Promise.all(Object.entries(n).map(n=>{let[r,i]=n;return Im(e,"".concat(t,"[").concat(r,"]"),i)}))}}},Pm=e=>null!=e&&"object"===typeof e&&"number"===typeof e.size&&"string"===typeof e.type&&"function"===typeof e.text&&"function"===typeof e.slice&&"function"===typeof e.arrayBuffer;async function Mm(e){let t=[];if("string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(Pm(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else{if(!Am(e)){var n;const t=null===e||void 0===e||null===(n=e.constructor)||void 0===n?void 0:n.name;throw new Error("Unexpected data type: ".concat(typeof e).concat(t?"; constructor: ".concat(t):"").concat(function(e){if("object"!==typeof e||null===e)return"";const t=Object.getOwnPropertyNames(e);return"; props: [".concat(t.map(e=>'"'.concat(e,'"')).join(", "),"]")}(e)))}var r,i=!1,o=!1;try{for(var a,s=qp(e);i=!(a=await s.next()).done;i=!1){const e=a.value;t.push(...await Mm(e))}}catch(l){o=!0,r=l}finally{try{i&&null!=s.return&&await s.return()}finally{if(o)throw r}}}return t}class Nm{constructor(e){this._client=e}}function jm(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const Bm=Symbol.for("brand.privateNullableHeaders");function*Om(e){if(!e)return;if(Bm in e){const{values:t,nulls:n}=e;yield*t.entries();for(const e of n)yield[e,null];return}let t,n=!1;e instanceof Headers?t=e.entries():Fp(e)?t=e:(n=!0,t=Object.entries(null!==e&&void 0!==e?e:{}));for(let r of t){const e=r[0];if("string"!==typeof e)throw new TypeError("expected header name to be a string");const t=Fp(r[1])?r[1]:[r[1]];let i=!1;for(const r of t)void 0!==r&&(n&&!i&&(i=!0,yield[e,null]),yield[e,r])}}const Lm=e=>{const t=new Headers,n=new Set;for(const r of e){const e=new Set;for(const[i,o]of Om(r)){const r=i.toLowerCase();e.has(r)||(t.delete(i),e.add(r)),null===o?(t.delete(i),n.add(r)):(t.append(i,o),n.delete(r))}}return{[Bm]:!0,values:t,nulls:n}};function Wm(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const qm=Object.freeze(Object.create(null)),Um=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wm;return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(1===t.length)return t[0];let o=!1;const a=[],s=t.reduce((t,n,i)=>{var s,l,u;/[?#]/.test(n)&&(o=!0);const c=r[i];let d=(o?encodeURIComponent:e)(""+c);return i!==r.length&&(null==c||"object"===typeof c&&c.toString===(null===(s=Object.getPrototypeOf(null!==(l=Object.getPrototypeOf(null!==(u=c.hasOwnProperty)&&void 0!==u?u:qm))&&void 0!==l?l:qm))||void 0===s?void 0:s.toString))&&(d=c+"",a.push({start:t.length+n.length,length:d.length,error:"Value of type ".concat(Object.prototype.toString.call(c).slice(8,-1)," is not a valid path parameter")})),t+n+(i===r.length?"":d)},""),l=s.split(/[?#]/,1)[0],u=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;let c;for(;null!==(c=u.exec(l));)a.push({start:c.index,length:c[0].length,error:'Value "'.concat(c[0],"\" can't be safely passed as a path parameter")});if(a.sort((e,t)=>e.start-t.start),a.length>0){let e=0;const t=a.reduce((t,n)=>{const r=" ".repeat(n.start-e),i="^".repeat(n.length);return e=n.start+n.length,t+r+i},"");throw new mp("Path parameters result in path with invalid segments:\n".concat(a.map(e=>e.error).join("\n"),"\n").concat(s,"\n").concat(t))}return s}},zm=Um(Wm);var Hm,Vm,Km;const Ym=["betas"],Gm=["betas"];class Qm extends Nm{list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=null!==e&&void 0!==e?e:{},{betas:r}=n,i=(0,pi.A)(n,Ym);return this._client.getAPIList("/v1/files",km,(0,u.A)((0,u.A)({query:i},t),{},{headers:Lm([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"files-api-2025-04-14"].toString()},null===t||void 0===t?void 0:t.headers])}))}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.delete(zm(Hm||(Hm=jm(["/v1/files/",""])),e),(0,u.A)((0,u.A)({},n),{},{headers:Lm([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"files-api-2025-04-14"].toString()},null===n||void 0===n?void 0:n.headers])}))}download(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.get(zm(Vm||(Vm=jm(["/v1/files/","/content"])),e),(0,u.A)((0,u.A)({},n),{},{headers:Lm([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},null===n||void 0===n?void 0:n.headers]),__binaryResponse:!0}))}retrieveMetadata(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.get(zm(Km||(Km=jm(["/v1/files/",""])),e),(0,u.A)((0,u.A)({},n),{},{headers:Lm([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"files-api-2025-04-14"].toString()},null===n||void 0===n?void 0:n.headers])}))}upload(e,t){const{betas:n}=e,r=(0,pi.A)(e,Gm);return this._client.post("/v1/files",Tm((0,u.A)((0,u.A)({body:r},t),{},{headers:Lm([{"anthropic-beta":[...null!==n&&void 0!==n?n:[],"files-api-2025-04-14"].toString()},null===t||void 0===t?void 0:t.headers])}),this._client))}}const Zm=["betas"];var Xm;class Jm extends Nm{retrieve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.get(zm(Xm||(Xm=jm(["/v1/models/","?beta=true"])),e),(0,u.A)((0,u.A)({},n),{},{headers:Lm([(0,u.A)({},null!=(null===r||void 0===r?void 0:r.toString())?{"anthropic-beta":null===r||void 0===r?void 0:r.toString()}:void 0),null===n||void 0===n?void 0:n.headers])}))}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=null!==e&&void 0!==e?e:{},{betas:r}=n,i=(0,pi.A)(n,Zm);return this._client.getAPIList("/v1/models?beta=true",km,(0,u.A)((0,u.A)({query:i},t),{},{headers:Lm([(0,u.A)({},null!=(null===r||void 0===r?void 0:r.toString())?{"anthropic-beta":null===r||void 0===r?void 0:r.toString()}:void 0),null===t||void 0===t?void 0:t.headers])}))}}const $m={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192,"claude-opus-4-1-20250805":8192,"anthropic.claude-opus-4-1-20250805-v1:0":8192,"claude-opus-4-1@20250805":8192};function ef(e,t){var n;return t&&"parse"in(null!==(n=t.output_format)&&void 0!==n?n:{})?tf(e,t):(0,u.A)((0,u.A)({},e),{},{content:e.content.map(e=>"text"===e.type?(0,u.A)((0,u.A)({},e),{},{parsed:null}):e),parsed_output:null})}function tf(e,t){let n=null;const r=e.content.map(e=>{if("text"===e.type){const r=function(e,t){var n;if("json_schema"!==(null===(n=e.output_format)||void 0===n?void 0:n.type))return null;try{return"parse"in e.output_format?e.output_format.parse(t):JSON.parse(t)}catch(r){throw new mp("Failed to parse structured output: ".concat(r))}}(t,e.text);return null===n&&(n=r),(0,u.A)((0,u.A)({},e),{},{parsed:r})}return e});return(0,u.A)((0,u.A)({},e),{},{content:r,parsed_output:n})}const nf=e=>{if(0===e.length)return e;let t=e[e.length-1];switch(t.type){case"separator":return e=e.slice(0,e.length-1),nf(e);case"number":let n=t.value[t.value.length-1];if("."===n||"-"===n)return e=e.slice(0,e.length-1),nf(e);case"string":let r=e[e.length-2];if("delimiter"===(null===r||void 0===r?void 0:r.type))return e=e.slice(0,e.length-1),nf(e);if("brace"===(null===r||void 0===r?void 0:r.type)&&"{"===r.value)return e=e.slice(0,e.length-1),nf(e);break;case"delimiter":return e=e.slice(0,e.length-1),nf(e)}return e},rf=e=>JSON.parse((e=>{let t="";return e.map(e=>{"string"===e.type?t+='"'+e.value+'"':t+=e.value}),t})((e=>{let t=[];return e.map(e=>{"brace"===e.type&&("{"===e.value?t.push("}"):t.splice(t.lastIndexOf("}"),1)),"paren"===e.type&&("["===e.value?t.push("]"):t.splice(t.lastIndexOf("]"),1))}),t.length>0&&t.reverse().map(t=>{"}"===t?e.push({type:"brace",value:"}"}):"]"===t&&e.push({type:"paren",value:"]"})}),e})(nf((e=>{let t=0,n=[];for(;t<e.length;){let r=e[t];if("\\"===r){t++;continue}if("{"===r){n.push({type:"brace",value:"{"}),t++;continue}if("}"===r){n.push({type:"brace",value:"}"}),t++;continue}if("["===r){n.push({type:"paren",value:"["}),t++;continue}if("]"===r){n.push({type:"paren",value:"]"}),t++;continue}if(":"===r){n.push({type:"separator",value:":"}),t++;continue}if(","===r){n.push({type:"delimiter",value:","}),t++;continue}if('"'===r){let i="",o=!1;for(r=e[++t];'"'!==r;){if(t===e.length){o=!0;break}if("\\"===r){if(t++,t===e.length){o=!0;break}i+=r+e[t],r=e[++t]}else i+=r,r=e[++t]}r=e[++t],o||n.push({type:"string",value:i});continue}if(r&&/\s/.test(r)){t++;continue}let i=/[0-9]/;if(r&&i.test(r)||"-"===r||"."===r){let o="";for("-"===r&&(o+=r,r=e[++t]);r&&i.test(r)||"."===r;)o+=r,r=e[++t];n.push({type:"number",value:o});continue}let o=/[a-z]/i;if(r&&o.test(r)){let i="";for(;r&&o.test(r)&&t!==e.length;)i+=r,r=e[++t];if("true"!=i&&"false"!=i&&"null"!==i){t++;continue}n.push({type:"name",value:i});continue}t++}return n})(e)))));var of,af,sf,lf,uf,cf,df,hf,pf,mf,ff,gf,yf,vf,bf,wf,Df,kf,xf,Ef,Sf,Cf,Af;const Tf="__json_buf";function Ff(e){return"tool_use"===e.type||"server_tool_use"===e.type||"mcp_tool_use"===e.type}class Rf{constructor(e){of.add(this),this.messages=[],this.receivedMessages=[],af.set(this,void 0),sf.set(this,null),this.controller=new AbortController,lf.set(this,void 0),uf.set(this,()=>{}),cf.set(this,()=>{}),df.set(this,void 0),hf.set(this,()=>{}),pf.set(this,()=>{}),mf.set(this,{}),ff.set(this,!1),gf.set(this,!1),yf.set(this,!1),vf.set(this,!1),bf.set(this,void 0),wf.set(this,void 0),xf.set(this,e=>{if(up(this,gf,!0,"f"),hp(e)&&(e=new gp),e instanceof gp)return up(this,yf,!0,"f"),this._emit("abort",e);if(e instanceof mp)return this._emit("error",e);if(e instanceof Error){const t=new mp(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new mp(String(e)))}),up(this,lf,new Promise((e,t)=>{up(this,uf,e,"f"),up(this,cf,t,"f")}),"f"),up(this,df,new Promise((e,t)=>{up(this,hf,e,"f"),up(this,pf,t,"f")}),"f"),cp(this,lf,"f").catch(()=>{}),cp(this,df,"f").catch(()=>{}),up(this,sf,e,"f")}get response(){return cp(this,bf,"f")}get request_id(){return cp(this,wf,"f")}async withResponse(){const e=await cp(this,lf,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const t=new Rf(null);return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,n){const r=new Rf(t);for(const i of t.messages)r._addMessageParam(i);return up(r,sf,(0,u.A)((0,u.A)({},t),{},{stream:!0}),"f"),r._run(()=>r._createMessage(e,(0,u.A)((0,u.A)({},t),{},{stream:!0}),(0,u.A)((0,u.A)({},n),{},{headers:(0,u.A)((0,u.A)({},null===n||void 0===n?void 0:n.headers),{},{"X-Stainless-Helper-Method":"stream"})}))),r}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},cp(this,xf,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,n){const r=null===n||void 0===n?void 0:n.signal;let i;r&&(r.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),r.addEventListener("abort",i));try{var o;cp(this,of,"m",Ef).call(this);const{response:r,data:i}=await e.create((0,u.A)((0,u.A)({},t),{},{stream:!0}),(0,u.A)((0,u.A)({},n),{},{signal:this.controller.signal})).withResponse();this._connected(r);var a,s=!1,l=!1;try{for(var c,d=qp(i);s=!(c=await d.next()).done;s=!1){const e=c.value;cp(this,of,"m",Sf).call(this,e)}}catch(h){l=!0,a=h}finally{try{s&&null!=d.return&&await d.return()}finally{if(l)throw a}}if(null!==(o=i.controller.signal)&&void 0!==o&&o.aborted)throw new gp;cp(this,of,"m",Cf).call(this)}finally{r&&i&&r.removeEventListener("abort",i)}}_connected(e){this.ended||(up(this,bf,e,"f"),up(this,wf,null===e||void 0===e?void 0:e.headers.get("request-id"),"f"),cp(this,uf,"f").call(this,e),this._emit("connect"))}get ended(){return cp(this,ff,"f")}get errored(){return cp(this,gf,"f")}get aborted(){return cp(this,yf,"f")}abort(){this.controller.abort()}on(e,t){return(cp(this,mf,"f")[e]||(cp(this,mf,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=cp(this,mf,"f")[e];if(!n)return this;const r=n.findIndex(e=>e.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(cp(this,mf,"f")[e]||(cp(this,mf,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{up(this,vf,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)})}async done(){up(this,vf,!0,"f"),await cp(this,df,"f")}get currentMessage(){return cp(this,af,"f")}async finalMessage(){return await this.done(),cp(this,of,"m",Df).call(this)}async finalText(){return await this.done(),cp(this,of,"m",kf).call(this)}_emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(cp(this,ff,"f"))return;"end"===e&&(up(this,ff,!0,"f"),cp(this,hf,"f").call(this));const i=cp(this,mf,"f")[e];if(i&&(cp(this,mf,"f")[e]=i.filter(e=>!e.once),i.forEach(e=>{let{listener:t}=e;return t(...n)})),"abort"===e){const e=n[0];return cp(this,vf,"f")||null!==i&&void 0!==i&&i.length||Promise.reject(e),cp(this,cf,"f").call(this,e),cp(this,pf,"f").call(this,e),void this._emit("end")}if("error"===e){const e=n[0];cp(this,vf,"f")||null!==i&&void 0!==i&&i.length||Promise.reject(e),cp(this,cf,"f").call(this,e),cp(this,pf,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",cp(this,of,"m",Df).call(this))}async _fromReadableStream(e,t){const n=null===t||void 0===t?void 0:t.signal;let r;n&&(n.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),n.addEventListener("abort",r));try{var i;cp(this,of,"m",Ef).call(this),this._connected(null);const t=pm.fromReadableStream(e,this.controller);var o,a=!1,s=!1;try{for(var l,u=qp(t);a=!(l=await u.next()).done;a=!1){const e=l.value;cp(this,of,"m",Sf).call(this,e)}}catch(c){s=!0,o=c}finally{try{a&&null!=u.return&&await u.return()}finally{if(s)throw o}}if(null!==(i=t.controller.signal)&&void 0!==i&&i.aborted)throw new gp;cp(this,of,"m",Cf).call(this)}finally{n&&r&&n.removeEventListener("abort",r)}}[(af=new WeakMap,sf=new WeakMap,lf=new WeakMap,uf=new WeakMap,cf=new WeakMap,df=new WeakMap,hf=new WeakMap,pf=new WeakMap,mf=new WeakMap,ff=new WeakMap,gf=new WeakMap,yf=new WeakMap,vf=new WeakMap,bf=new WeakMap,wf=new WeakMap,xf=new WeakMap,of=new WeakSet,Df=function(){if(0===this.receivedMessages.length)throw new mp("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},kf=function(){if(0===this.receivedMessages.length)throw new mp("stream ended without producing a Message with role=assistant");const e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new mp("stream ended without producing a content block with type=text");return e.join(" ")},Ef=function(){this.ended||up(this,af,void 0,"f")},Sf=function(e){if(this.ended)return;const t=cp(this,of,"m",Af).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{const r=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===r.type&&this._emit("text",e.delta.text,r.text||"");break;case"citations_delta":var n;if("text"===r.type)this._emit("citation",e.delta.citation,null!==(n=r.citations)&&void 0!==n?n:[]);break;case"input_json_delta":Ff(r)&&r.input&&this._emit("inputJson",e.delta.partial_json,r.input);break;case"thinking_delta":"thinking"===r.type&&this._emit("thinking",e.delta.thinking,r.thinking);break;case"signature_delta":"thinking"===r.type&&this._emit("signature",r.signature);break;default:e.delta}break}case"message_stop":this._addMessageParam(t),this._addMessage(ef(t,cp(this,sf,"f")),!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":up(this,af,t,"f")}},Cf=function(){if(this.ended)throw new mp("stream has ended, this shouldn't happen");const e=cp(this,af,"f");if(!e)throw new mp("request ended without sending any chunks");return up(this,af,void 0,"f"),ef(e,cp(this,sf,"f"))},Af=function(e){let t=cp(this,af,"f");if("message_start"===e.type){if(t)throw new mp("Unexpected event order, got ".concat(e.type,' before receiving "message_stop"'));return e.message}if(!t)throw new mp("Unexpected event order, got ".concat(e.type,' before "message_start"'));switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.container=e.delta.container,t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,t.context_management=e.context_management,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push(e.content_block),t;case"content_block_delta":{const i=t.content.at(e.index);switch(e.delta.type){case"text_delta":"text"===(null===i||void 0===i?void 0:i.type)&&(t.content[e.index]=(0,u.A)((0,u.A)({},i),{},{text:(i.text||"")+e.delta.text}));break;case"citations_delta":var n;if("text"===(null===i||void 0===i?void 0:i.type))t.content[e.index]=(0,u.A)((0,u.A)({},i),{},{citations:[...null!==(n=i.citations)&&void 0!==n?n:[],e.delta.citation]});break;case"input_json_delta":if(i&&Ff(i)){let n=i[Tf]||"";n+=e.delta.partial_json;const o=(0,u.A)({},i);if(Object.defineProperty(o,Tf,{value:n,enumerable:!1,writable:!0}),n)try{o.input=rf(n)}catch(r){const e=new mp("Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ".concat(r,". JSON: ").concat(n));cp(this,xf,"f").call(this,e)}t.content[e.index]=o}break;case"thinking_delta":"thinking"===(null===i||void 0===i?void 0:i.type)&&(t.content[e.index]=(0,u.A)((0,u.A)({},i),{},{thinking:i.thinking+e.delta.thinking}));break;case"signature_delta":"thinking"===(null===i||void 0===i?void 0:i.type)&&(t.content[e.index]=(0,u.A)((0,u.A)({},i),{},{signature:e.delta.signature}));break;default:e.delta}return t}}},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("streamEvent",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0});return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new pm(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}const _f=["max_iterations"];var If,Pf,Mf,Nf,jf,Bf,Of,Lf,Wf,qf,Uf,zf,Hf;function Vf(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}class Kf{constructor(e,t,n){If.add(this),this.client=e,Pf.set(this,!1),Mf.set(this,!1),Nf.set(this,void 0),jf.set(this,void 0),Bf.set(this,void 0),Of.set(this,void 0),Lf.set(this,void 0),Wf.set(this,0),up(this,Nf,{params:(0,u.A)((0,u.A)({},t),{},{messages:structuredClone(t.messages)})},"f"),up(this,jf,(0,u.A)((0,u.A)({},n),{},{headers:Lm([{"x-stainless-helper":"BetaToolRunner"},null===n||void 0===n?void 0:n.headers])}),"f"),up(this,Lf,Vf(),"f")}[(Pf=new WeakMap,Mf=new WeakMap,Nf=new WeakMap,jf=new WeakMap,Bf=new WeakMap,Of=new WeakMap,Lf=new WeakMap,Wf=new WeakMap,If=new WeakSet,Symbol.asyncIterator)](){var e=this;return Vp(function*(){var t;if(cp(e,Pf,"f"))throw new mp("Cannot iterate over a consumed stream");up(e,Pf,!0,"f"),up(e,Mf,!0,"f"),up(e,Of,void 0,"f");try{for(;;){let n;try{if(cp(e,Nf,"f").params.max_iterations&&cp(e,Wf,"f")>=cp(e,Nf,"f").params.max_iterations)break;up(e,Mf,!1,"f"),up(e,Bf,void 0,"f"),up(e,Of,void 0,"f"),up(e,Wf,(t=cp(e,Wf,"f"),++t),"f");const r=cp(e,Nf,"f").params,{max_iterations:i}=r,o=(0,pi.A)(r,_f);if(o.stream?(n=e.client.beta.messages.stream((0,u.A)({},o),cp(e,jf,"f")),up(e,Bf,n.finalMessage(),"f"),cp(e,Bf,"f").catch(()=>{}),yield n):(up(e,Bf,e.client.beta.messages.create((0,u.A)((0,u.A)({},o),{},{stream:!1}),cp(e,jf,"f")),"f"),yield cp(e,Bf,"f")),!cp(e,Mf,"f")){const{role:t,content:n}=yield Hp(cp(e,Bf,"f"));cp(e,Nf,"f").params.messages.push({role:t,content:n})}const a=yield Hp(cp(e,If,"m",qf).call(e,cp(e,Nf,"f").params.messages.at(-1)));if(a&&cp(e,Nf,"f").params.messages.push(a),!a&&!cp(e,Mf,"f"))break}finally{n&&n.abort()}}if(!cp(e,Bf,"f"))throw new mp("ToolRunner concluded without a message from the server");cp(e,Lf,"f").resolve(yield Hp(cp(e,Bf,"f")))}catch(n){throw up(e,Pf,!1,"f"),cp(e,Lf,"f").promise.catch(()=>{}),cp(e,Lf,"f").reject(n),up(e,Lf,Vf(),"f"),n}})()}setMessagesParams(e){cp(this,Nf,"f").params="function"===typeof e?e(cp(this,Nf,"f").params):e,up(this,Mf,!0,"f"),up(this,Of,void 0,"f")}async generateToolResponse(){var e;const t=null!==(e=await cp(this,Bf,"f"))&&void 0!==e?e:this.params.messages.at(-1);return t?cp(this,If,"m",qf).call(this,t):null}done(){return cp(this,Lf,"f").promise}async runUntilDone(){if(!cp(this,Pf,"f")){var e,t=!1,n=!1;try{for(var r,i=qp(this);t=!(r=await i.next()).done;t=!1){r.value}}catch(o){n=!0,e=o}finally{try{t&&null!=i.return&&await i.return()}finally{if(n)throw e}}}return this.done()}get params(){return cp(this,Nf,"f").params}pushMessages(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.setMessagesParams(e=>(0,u.A)((0,u.A)({},e),{},{messages:[...e.messages,...t]}))}then(e,t){return this.runUntilDone().then(e,t)}}qf=async function(e){return void 0!==cp(this,Of,"f")||up(this,Of,async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.messages.at(-1);if(!t||"assistant"!==t.role||!t.content||"string"===typeof t.content)return null;const n=t.content.filter(e=>"tool_use"===e.type);if(0===n.length)return null;const r=await Promise.all(n.map(async t=>{const n=e.tools.find(e=>e.name===t.name);if(!n||!("run"in n))return{type:"tool_result",tool_use_id:t.id,content:"Error: Tool '".concat(t.name,"' not found"),is_error:!0};try{let e=t.input;"parse"in n&&n.parse&&(e=n.parse(e));const r=await n.run(e);return{type:"tool_result",tool_use_id:t.id,content:r}}catch(r){return{type:"tool_result",tool_use_id:t.id,content:"Error: ".concat(r instanceof Error?r.message:String(r)),is_error:!0}}}));return{role:"user",content:r}}(cp(this,Nf,"f").params,e),"f"),cp(this,Of,"f")};class Yf{constructor(e,t){this.iterator=e,this.controller=t}decoder(){var e=this;return Vp(function*(){const t=new $p;var n,r=!1,i=!1;try{for(var o,a=qp(e.iterator);r=!(o=yield Hp(a.next())).done;r=!1){const e=o.value;for(const n of t.decode(e))yield JSON.parse(n)}}catch(s){i=!0,n=s}finally{try{r&&null!=a.return&&(yield Hp(a.return()))}finally{if(i)throw n}}for(const e of t.flush())yield JSON.parse(e)})()}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,t){if(!e.body){if(t.abort(),"undefined"!==typeof globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new mp("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new mp("Attempted to iterate over a response with no body")}return new Yf(Lp(e.body),t)}}const Gf=["betas"],Qf=["betas"];class Zf extends Nm{create(e,t){const{betas:n}=e,r=(0,pi.A)(e,Gf);return this._client.post("/v1/messages/batches?beta=true",(0,u.A)((0,u.A)({body:r},t),{},{headers:Lm([{"anthropic-beta":[...null!==n&&void 0!==n?n:[],"message-batches-2024-09-24"].toString()},null===t||void 0===t?void 0:t.headers])}))}retrieve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.get(zm(Uf||(Uf=jm(["/v1/messages/batches/","?beta=true"])),e),(0,u.A)((0,u.A)({},n),{},{headers:Lm([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"message-batches-2024-09-24"].toString()},null===n||void 0===n?void 0:n.headers])}))}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=null!==e&&void 0!==e?e:{},{betas:r}=n,i=(0,pi.A)(n,Qf);return this._client.getAPIList("/v1/messages/batches?beta=true",km,(0,u.A)((0,u.A)({query:i},t),{},{headers:Lm([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"message-batches-2024-09-24"].toString()},null===t||void 0===t?void 0:t.headers])}))}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.delete(zm(zf||(zf=jm(["/v1/messages/batches/","?beta=true"])),e),(0,u.A)((0,u.A)({},n),{},{headers:Lm([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"message-batches-2024-09-24"].toString()},null===n||void 0===n?void 0:n.headers])}))}cancel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.post(zm(Hf||(Hf=jm(["/v1/messages/batches/","/cancel?beta=true"])),e),(0,u.A)((0,u.A)({},n),{},{headers:Lm([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"message-batches-2024-09-24"].toString()},null===n||void 0===n?void 0:n.headers])}))}async results(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=await this.retrieve(e);if(!r.results_url)throw new mp("No batch `results_url`; Has it finished processing? ".concat(r.processing_status," - ").concat(r.id));const{betas:i}=null!==t&&void 0!==t?t:{};return this._client.get(r.results_url,(0,u.A)((0,u.A)({},n),{},{headers:Lm([{"anthropic-beta":[...null!==i&&void 0!==i?i:[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},null===n||void 0===n?void 0:n.headers]),stream:!0,__binaryResponse:!0}))._thenUnwrap((e,t)=>Yf.fromResponse(t.response,t.controller))}}const Xf=["betas"],Jf=["betas"],$f={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026"};class eg extends Nm{constructor(){super(...arguments),this.batches=new Zf(this._client)}create(e,t){var n;const{betas:r}=e,i=(0,pi.A)(e,Xf);i.model in $f&&console.warn("The model '".concat(i.model,"' is deprecated and will reach end-of-life on ").concat($f[i.model],"\nPlease migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information."));let o=this._client._options.timeout;if(!i.stream&&null==o){var a;const e=null!==(a=$m[i.model])&&void 0!==a?a:void 0;o=this._client.calculateNonstreamingTimeout(i.max_tokens,e)}return this._client.post("/v1/messages?beta=true",(0,u.A)((0,u.A)({body:i,timeout:null!==o&&void 0!==o?o:6e5},t),{},{headers:Lm([(0,u.A)({},null!=(null===r||void 0===r?void 0:r.toString())?{"anthropic-beta":null===r||void 0===r?void 0:r.toString()}:void 0),null===t||void 0===t?void 0:t.headers]),stream:null!==(n=e.stream)&&void 0!==n&&n}))}parse(e,t){var n,r;return t=(0,u.A)((0,u.A)({},t),{},{headers:Lm([{"anthropic-beta":[...null!==(n=e.betas)&&void 0!==n?n:[],"structured-outputs-2025-09-17"].toString()},null===(r=t)||void 0===r?void 0:r.headers])}),this.create(e,t).then(t=>tf(t,e))}stream(e,t){return Rf.createMessage(this,e,t)}countTokens(e,t){const{betas:n}=e,r=(0,pi.A)(e,Jf);return this._client.post("/v1/messages/count_tokens?beta=true",(0,u.A)((0,u.A)({body:r},t),{},{headers:Lm([{"anthropic-beta":[...null!==n&&void 0!==n?n:[],"token-counting-2024-11-01"].toString()},null===t||void 0===t?void 0:t.headers])}))}toolRunner(e,t){return new Kf(this._client,e,t)}}var tg,ng,rg,ig;eg.Batches=Zf,eg.BetaToolRunner=Kf;const og=["betas"],ag=["betas"];class sg extends Nm{create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=null!==t&&void 0!==t?t:{},{betas:i}=r,o=(0,pi.A)(r,og);return this._client.post(zm(tg||(tg=jm(["/v1/skills/","/versions?beta=true"])),e),Tm((0,u.A)((0,u.A)({body:o},n),{},{headers:Lm([{"anthropic-beta":[...null!==i&&void 0!==i?i:[],"skills-2025-10-02"].toString()},null===n||void 0===n?void 0:n.headers])}),this._client))}retrieve(e,t,n){const{skill_id:r,betas:i}=t;return this._client.get(zm(ng||(ng=jm(["/v1/skills/","/versions/","?beta=true"])),r,e),(0,u.A)((0,u.A)({},n),{},{headers:Lm([{"anthropic-beta":[...null!==i&&void 0!==i?i:[],"skills-2025-10-02"].toString()},null===n||void 0===n?void 0:n.headers])}))}list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=null!==t&&void 0!==t?t:{},{betas:i}=r,o=(0,pi.A)(r,ag);return this._client.getAPIList(zm(rg||(rg=jm(["/v1/skills/","/versions?beta=true"])),e),xm,(0,u.A)((0,u.A)({query:o},n),{},{headers:Lm([{"anthropic-beta":[...null!==i&&void 0!==i?i:[],"skills-2025-10-02"].toString()},null===n||void 0===n?void 0:n.headers])}))}delete(e,t,n){const{skill_id:r,betas:i}=t;return this._client.delete(zm(ig||(ig=jm(["/v1/skills/","/versions/","?beta=true"])),r,e),(0,u.A)((0,u.A)({},n),{},{headers:Lm([{"anthropic-beta":[...null!==i&&void 0!==i?i:[],"skills-2025-10-02"].toString()},null===n||void 0===n?void 0:n.headers])}))}}var lg,ug;const cg=["betas"],dg=["betas"];class hg extends Nm{constructor(){super(...arguments),this.versions=new sg(this._client)}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=null!==e&&void 0!==e?e:{},{betas:r}=n,i=(0,pi.A)(n,cg);return this._client.post("/v1/skills?beta=true",Tm((0,u.A)((0,u.A)({body:i},t),{},{headers:Lm([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"skills-2025-10-02"].toString()},null===t||void 0===t?void 0:t.headers])}),this._client))}retrieve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.get(zm(lg||(lg=jm(["/v1/skills/","?beta=true"])),e),(0,u.A)((0,u.A)({},n),{},{headers:Lm([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"skills-2025-10-02"].toString()},null===n||void 0===n?void 0:n.headers])}))}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=null!==e&&void 0!==e?e:{},{betas:r}=n,i=(0,pi.A)(n,dg);return this._client.getAPIList("/v1/skills?beta=true",xm,(0,u.A)((0,u.A)({query:i},t),{},{headers:Lm([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"skills-2025-10-02"].toString()},null===t||void 0===t?void 0:t.headers])}))}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.delete(zm(ug||(ug=jm(["/v1/skills/","?beta=true"])),e),(0,u.A)((0,u.A)({},n),{},{headers:Lm([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"skills-2025-10-02"].toString()},null===n||void 0===n?void 0:n.headers])}))}}hg.Versions=sg;class pg extends Nm{constructor(){super(...arguments),this.models=new Jm(this._client),this.messages=new eg(this._client),this.files=new Qm(this._client),this.skills=new hg(this._client)}}pg.Models=Jm,pg.Messages=eg,pg.Files=Qm,pg.Skills=hg;const mg=["betas"];class fg extends Nm{create(e,t){var n,r;const{betas:i}=e,o=(0,pi.A)(e,mg);return this._client.post("/v1/complete",(0,u.A)((0,u.A)({body:o,timeout:null!==(n=this._client._options.timeout)&&void 0!==n?n:6e5},t),{},{headers:Lm([(0,u.A)({},null!=(null===i||void 0===i?void 0:i.toString())?{"anthropic-beta":null===i||void 0===i?void 0:i.toString()}:void 0),null===t||void 0===t?void 0:t.headers]),stream:null!==(r=e.stream)&&void 0!==r&&r}))}}var gg,yg,vg,bg,wg,Dg,kg,xg,Eg,Sg,Cg,Ag,Tg,Fg,Rg,_g,Ig,Pg,Mg,Ng,jg,Bg;const Og="__json_buf";function Lg(e){return"tool_use"===e.type||"server_tool_use"===e.type}class Wg{constructor(){gg.add(this),this.messages=[],this.receivedMessages=[],yg.set(this,void 0),this.controller=new AbortController,vg.set(this,void 0),bg.set(this,()=>{}),wg.set(this,()=>{}),Dg.set(this,void 0),kg.set(this,()=>{}),xg.set(this,()=>{}),Eg.set(this,{}),Sg.set(this,!1),Cg.set(this,!1),Ag.set(this,!1),Tg.set(this,!1),Fg.set(this,void 0),Rg.set(this,void 0),Pg.set(this,e=>{if(up(this,Cg,!0,"f"),hp(e)&&(e=new gp),e instanceof gp)return up(this,Ag,!0,"f"),this._emit("abort",e);if(e instanceof mp)return this._emit("error",e);if(e instanceof Error){const t=new mp(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new mp(String(e)))}),up(this,vg,new Promise((e,t)=>{up(this,bg,e,"f"),up(this,wg,t,"f")}),"f"),up(this,Dg,new Promise((e,t)=>{up(this,kg,e,"f"),up(this,xg,t,"f")}),"f"),cp(this,vg,"f").catch(()=>{}),cp(this,Dg,"f").catch(()=>{})}get response(){return cp(this,Fg,"f")}get request_id(){return cp(this,Rg,"f")}async withResponse(){const e=await cp(this,vg,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const t=new Wg;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,n){const r=new Wg;for(const i of t.messages)r._addMessageParam(i);return r._run(()=>r._createMessage(e,(0,u.A)((0,u.A)({},t),{},{stream:!0}),(0,u.A)((0,u.A)({},n),{},{headers:(0,u.A)((0,u.A)({},null===n||void 0===n?void 0:n.headers),{},{"X-Stainless-Helper-Method":"stream"})}))),r}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},cp(this,Pg,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,n){const r=null===n||void 0===n?void 0:n.signal;let i;r&&(r.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),r.addEventListener("abort",i));try{var o;cp(this,gg,"m",Mg).call(this);const{response:r,data:i}=await e.create((0,u.A)((0,u.A)({},t),{},{stream:!0}),(0,u.A)((0,u.A)({},n),{},{signal:this.controller.signal})).withResponse();this._connected(r);var a,s=!1,l=!1;try{for(var c,d=qp(i);s=!(c=await d.next()).done;s=!1){const e=c.value;cp(this,gg,"m",Ng).call(this,e)}}catch(h){l=!0,a=h}finally{try{s&&null!=d.return&&await d.return()}finally{if(l)throw a}}if(null!==(o=i.controller.signal)&&void 0!==o&&o.aborted)throw new gp;cp(this,gg,"m",jg).call(this)}finally{r&&i&&r.removeEventListener("abort",i)}}_connected(e){this.ended||(up(this,Fg,e,"f"),up(this,Rg,null===e||void 0===e?void 0:e.headers.get("request-id"),"f"),cp(this,bg,"f").call(this,e),this._emit("connect"))}get ended(){return cp(this,Sg,"f")}get errored(){return cp(this,Cg,"f")}get aborted(){return cp(this,Ag,"f")}abort(){this.controller.abort()}on(e,t){return(cp(this,Eg,"f")[e]||(cp(this,Eg,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=cp(this,Eg,"f")[e];if(!n)return this;const r=n.findIndex(e=>e.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(cp(this,Eg,"f")[e]||(cp(this,Eg,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{up(this,Tg,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)})}async done(){up(this,Tg,!0,"f"),await cp(this,Dg,"f")}get currentMessage(){return cp(this,yg,"f")}async finalMessage(){return await this.done(),cp(this,gg,"m",_g).call(this)}async finalText(){return await this.done(),cp(this,gg,"m",Ig).call(this)}_emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(cp(this,Sg,"f"))return;"end"===e&&(up(this,Sg,!0,"f"),cp(this,kg,"f").call(this));const i=cp(this,Eg,"f")[e];if(i&&(cp(this,Eg,"f")[e]=i.filter(e=>!e.once),i.forEach(e=>{let{listener:t}=e;return t(...n)})),"abort"===e){const e=n[0];return cp(this,Tg,"f")||null!==i&&void 0!==i&&i.length||Promise.reject(e),cp(this,wg,"f").call(this,e),cp(this,xg,"f").call(this,e),void this._emit("end")}if("error"===e){const e=n[0];cp(this,Tg,"f")||null!==i&&void 0!==i&&i.length||Promise.reject(e),cp(this,wg,"f").call(this,e),cp(this,xg,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",cp(this,gg,"m",_g).call(this))}async _fromReadableStream(e,t){const n=null===t||void 0===t?void 0:t.signal;let r;n&&(n.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),n.addEventListener("abort",r));try{var i;cp(this,gg,"m",Mg).call(this),this._connected(null);const t=pm.fromReadableStream(e,this.controller);var o,a=!1,s=!1;try{for(var l,u=qp(t);a=!(l=await u.next()).done;a=!1){const e=l.value;cp(this,gg,"m",Ng).call(this,e)}}catch(c){s=!0,o=c}finally{try{a&&null!=u.return&&await u.return()}finally{if(s)throw o}}if(null!==(i=t.controller.signal)&&void 0!==i&&i.aborted)throw new gp;cp(this,gg,"m",jg).call(this)}finally{n&&r&&n.removeEventListener("abort",r)}}[(yg=new WeakMap,vg=new WeakMap,bg=new WeakMap,wg=new WeakMap,Dg=new WeakMap,kg=new WeakMap,xg=new WeakMap,Eg=new WeakMap,Sg=new WeakMap,Cg=new WeakMap,Ag=new WeakMap,Tg=new WeakMap,Fg=new WeakMap,Rg=new WeakMap,Pg=new WeakMap,gg=new WeakSet,_g=function(){if(0===this.receivedMessages.length)throw new mp("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},Ig=function(){if(0===this.receivedMessages.length)throw new mp("stream ended without producing a Message with role=assistant");const e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new mp("stream ended without producing a content block with type=text");return e.join(" ")},Mg=function(){this.ended||up(this,yg,void 0,"f")},Ng=function(e){if(this.ended)return;const t=cp(this,gg,"m",Bg).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{const r=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===r.type&&this._emit("text",e.delta.text,r.text||"");break;case"citations_delta":var n;if("text"===r.type)this._emit("citation",e.delta.citation,null!==(n=r.citations)&&void 0!==n?n:[]);break;case"input_json_delta":Lg(r)&&r.input&&this._emit("inputJson",e.delta.partial_json,r.input);break;case"thinking_delta":"thinking"===r.type&&this._emit("thinking",e.delta.thinking,r.thinking);break;case"signature_delta":"thinking"===r.type&&this._emit("signature",r.signature);break;default:e.delta}break}case"message_stop":this._addMessageParam(t),this._addMessage(t,!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":up(this,yg,t,"f")}},jg=function(){if(this.ended)throw new mp("stream has ended, this shouldn't happen");const e=cp(this,yg,"f");if(!e)throw new mp("request ended without sending any chunks");return up(this,yg,void 0,"f"),e},Bg=function(e){let t=cp(this,yg,"f");if("message_start"===e.type){if(t)throw new mp("Unexpected event order, got ".concat(e.type,' before receiving "message_stop"'));return e.message}if(!t)throw new mp("Unexpected event order, got ".concat(e.type,' before "message_start"'));switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push((0,u.A)({},e.content_block)),t;case"content_block_delta":{const r=t.content.at(e.index);switch(e.delta.type){case"text_delta":"text"===(null===r||void 0===r?void 0:r.type)&&(t.content[e.index]=(0,u.A)((0,u.A)({},r),{},{text:(r.text||"")+e.delta.text}));break;case"citations_delta":var n;if("text"===(null===r||void 0===r?void 0:r.type))t.content[e.index]=(0,u.A)((0,u.A)({},r),{},{citations:[...null!==(n=r.citations)&&void 0!==n?n:[],e.delta.citation]});break;case"input_json_delta":if(r&&Lg(r)){let n=r[Og]||"";n+=e.delta.partial_json;const i=(0,u.A)({},r);Object.defineProperty(i,Og,{value:n,enumerable:!1,writable:!0}),n&&(i.input=rf(n)),t.content[e.index]=i}break;case"thinking_delta":"thinking"===(null===r||void 0===r?void 0:r.type)&&(t.content[e.index]=(0,u.A)((0,u.A)({},r),{},{thinking:r.thinking+e.delta.thinking}));break;case"signature_delta":"thinking"===(null===r||void 0===r?void 0:r.type)&&(t.content[e.index]=(0,u.A)((0,u.A)({},r),{},{signature:e.delta.signature}));break;default:e.delta}return t}}},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("streamEvent",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0});return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new pm(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}var qg,Ug,zg;class Hg extends Nm{create(e,t){return this._client.post("/v1/messages/batches",(0,u.A)({body:e},t))}retrieve(e,t){return this._client.get(zm(qg||(qg=jm(["/v1/messages/batches/",""])),e),t)}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return this._client.getAPIList("/v1/messages/batches",km,(0,u.A)({query:e},t))}delete(e,t){return this._client.delete(zm(Ug||(Ug=jm(["/v1/messages/batches/",""])),e),t)}cancel(e,t){return this._client.post(zm(zg||(zg=jm(["/v1/messages/batches/","/cancel"])),e),t)}async results(e,t){const n=await this.retrieve(e);if(!n.results_url)throw new mp("No batch `results_url`; Has it finished processing? ".concat(n.processing_status," - ").concat(n.id));return this._client.get(n.results_url,(0,u.A)((0,u.A)({},t),{},{headers:Lm([{Accept:"application/binary"},null===t||void 0===t?void 0:t.headers]),stream:!0,__binaryResponse:!0}))._thenUnwrap((e,t)=>Yf.fromResponse(t.response,t.controller))}}class Vg extends Nm{constructor(){super(...arguments),this.batches=new Hg(this._client)}create(e,t){var n;e.model in Kg&&console.warn("The model '".concat(e.model,"' is deprecated and will reach end-of-life on ").concat(Kg[e.model],"\nPlease migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information."));let r=this._client._options.timeout;if(!e.stream&&null==r){var i;const t=null!==(i=$m[e.model])&&void 0!==i?i:void 0;r=this._client.calculateNonstreamingTimeout(e.max_tokens,t)}return this._client.post("/v1/messages",(0,u.A)((0,u.A)({body:e,timeout:null!==r&&void 0!==r?r:6e5},t),{},{stream:null!==(n=e.stream)&&void 0!==n&&n}))}stream(e,t){return Wg.createMessage(this,e,t)}countTokens(e,t){return this._client.post("/v1/messages/count_tokens",(0,u.A)({body:e},t))}}const Kg={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026"};Vg.Batches=Hg;const Yg=["betas"];var Gg;class Qg extends Nm{retrieve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.get(zm(Gg||(Gg=jm(["/v1/models/",""])),e),(0,u.A)((0,u.A)({},n),{},{headers:Lm([(0,u.A)({},null!=(null===r||void 0===r?void 0:r.toString())?{"anthropic-beta":null===r||void 0===r?void 0:r.toString()}:void 0),null===n||void 0===n?void 0:n.headers])}))}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=null!==e&&void 0!==e?e:{},{betas:r}=n,i=(0,pi.A)(n,Yg);return this._client.getAPIList("/v1/models",km,(0,u.A)((0,u.A)({query:i},t),{},{headers:Lm([(0,u.A)({},null!=(null===r||void 0===r?void 0:r.toString())?{"anthropic-beta":null===r||void 0===r?void 0:r.toString()}:void 0),null===t||void 0===t?void 0:t.headers])}))}}const Zg=e=>{var t,n,r,i;return"undefined"!==typeof globalThis.process?null!==(t=null===(n=globalThis.process.env)||void 0===n||null===(n=n[e])||void 0===n?void 0:n.trim())&&void 0!==t?t:void 0:"undefined"!==typeof globalThis.Deno?null===(r=globalThis.Deno.env)||void 0===r||null===(i=r.get)||void 0===i||null===(i=i.call(r,e))||void 0===i?void 0:i.trim():void 0},Xg=["baseURL","apiKey","authToken"],Jg=["signal","method"];var $g,ey,ty,ny;class ry{constructor(){var e,t,n,r,i,o,a,s;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{baseURL:c=Zg("ANTHROPIC_BASE_URL"),apiKey:d=(null!==(e=Zg("ANTHROPIC_API_KEY"))&&void 0!==e?e:null),authToken:h=(null!==(t=Zg("ANTHROPIC_AUTH_TOKEN"))&&void 0!==t?t:null)}=l,p=(0,pi.A)(l,Xg);$g.add(this),ty.set(this,void 0);const m=(0,u.A)((0,u.A)({apiKey:d,authToken:h},p),{},{baseURL:c||"https://api.anthropic.com"});if(!m.dangerouslyAllowBrowser&&"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof navigator)throw new mp("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew Anthropic({ apiKey, dangerouslyAllowBrowser: true });\n");this.baseURL=m.baseURL,this.timeout=null!==(n=m.timeout)&&void 0!==n?n:ey.DEFAULT_TIMEOUT,this.logger=null!==(r=m.logger)&&void 0!==r?r:console;const f="warn";this.logLevel=f,this.logLevel=null!==(i=null!==(o=rm(m.logLevel,"ClientOptions.logLevel",this))&&void 0!==o?o:rm(Zg("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this))&&void 0!==i?i:f,this.fetchOptions=m.fetchOptions,this.maxRetries=null!==(a=m.maxRetries)&&void 0!==a?a:2,this.fetch=null!==(s=m.fetch)&&void 0!==s?s:function(){if("undefined"!==typeof fetch)return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),up(this,ty,Wp,"f"),this._options=m,this.apiKey=d,this.authToken=h}withOptions(e){return new this.constructor((0,u.A)((0,u.A)({},this._options),{},{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken},e))}defaultQuery(){return this._options.defaultQuery}validateHeaders(e){let{values:t,nulls:n}=e;if((!this.apiKey||!t.get("x-api-key"))&&!n.has("x-api-key")&&(!this.authToken||!t.get("authorization"))&&!n.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}async authHeaders(e){return Lm([await this.apiKeyAuth(e),await this.bearerAuth(e)])}async apiKeyAuth(e){if(null!=this.apiKey)return Lm([{"X-Api-Key":this.apiKey}])}async bearerAuth(e){if(null!=this.authToken)return Lm([{Authorization:"Bearer ".concat(this.authToken)}])}stringifyQuery(e){return Object.entries(e).filter(e=>{let[t,n]=e;return"undefined"!==typeof n}).map(e=>{let[t,n]=e;if("string"===typeof n||"number"===typeof n||"boolean"===typeof n)return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n));if(null===n)return"".concat(encodeURIComponent(t),"=");throw new mp("Cannot stringify type ".concat(typeof n,"; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case."))}).join("&")}getUserAgent(){return"".concat(this.constructor.name,"/JS ").concat(Ip)}defaultIdempotencyKey(){return"stainless-node-retry-".concat(dp())}makeStatusError(e,t,n,r){return fp.generate(e,t,n,r)}buildURL(e,t,n){const r=!cp(this,$g,"m",ny).call(this)&&n||this.baseURL,i=(e=>Ap.test(e))(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return function(e){if(!e)return!0;for(const t in e)return!1;return!0}(o)||(t=(0,u.A)((0,u.A)({},o),t)),"object"===typeof t&&t&&!Array.isArray(t)&&(i.search=this.stringifyQuery(t)),i.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new mp("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 6e5}async prepareOptions(e){}async prepareRequest(e,t){let{url:n,options:r}=t}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(n=>(0,u.A)({method:e,path:t},n)))}request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new bm(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,n){var r,i;const o=await e,a=null!==(r=o.maxRetries)&&void 0!==r?r:this.maxRetries;null==t&&(t=a),await this.prepareOptions(o);const{req:s,url:l,timeout:u}=await this.buildRequest(o,{retryCount:a-t});await this.prepareRequest(s,{url:l,options:o});const c="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),d=void 0===n?"":", retryOf: ".concat(n),h=Date.now();if(lm(this).debug("[".concat(c,"] sending request"),um({retryOfRequestLogID:n,method:o.method,url:l,options:o,headers:s.headers})),null!==(i=o.signal)&&void 0!==i&&i.aborted)throw new gp;const p=new AbortController,m=await this.fetchWithTimeout(l,s,u,p).catch(pp),f=Date.now();if(m instanceof globalThis.Error){var g;const e="retrying, ".concat(t," attempts remaining");if(null!==(g=o.signal)&&void 0!==g&&g.aborted)throw new gp;const r=hp(m)||/timed? ?out/i.test(String(m)+("cause"in m?String(m.cause):""));if(t)return lm(this).info("[".concat(c,"] connection ").concat(r?"timed out":"failed"," - ").concat(e)),lm(this).debug("[".concat(c,"] connection ").concat(r?"timed out":"failed"," (").concat(e,")"),um({retryOfRequestLogID:n,url:l,durationMs:f-h,message:m.message})),this.retryRequest(o,t,null!==n&&void 0!==n?n:c);if(lm(this).info("[".concat(c,"] connection ").concat(r?"timed out":"failed"," - error; no more retries left")),lm(this).debug("[".concat(c,"] connection ").concat(r?"timed out":"failed"," (error; no more retries left)"),um({retryOfRequestLogID:n,url:l,durationMs:f-h,message:m.message})),r)throw new vp;throw new yp({cause:m})}const y=[...m.headers.entries()].filter(e=>{let[t]=e;return"request-id"===t}).map(e=>{let[t,n]=e;return", "+t+": "+JSON.stringify(n)}).join(""),v="[".concat(c).concat(d).concat(y,"] ").concat(s.method," ").concat(l," ").concat(m.ok?"succeeded":"failed"," with status ").concat(m.status," in ").concat(f-h,"ms");if(!m.ok){const e=await this.shouldRetry(m);if(t&&e){const e="retrying, ".concat(t," attempts remaining");return await async function(e){if(null===e||"object"!==typeof e)return;var t,n;if(e[Symbol.asyncIterator])return void await(null===(t=(n=e[Symbol.asyncIterator]()).return)||void 0===t?void 0:t.call(n));const r=e.getReader(),i=r.cancel();r.releaseLock(),await i}(m.body),lm(this).info("".concat(v," - ").concat(e)),lm(this).debug("[".concat(c,"] response error (").concat(e,")"),um({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,durationMs:f-h})),this.retryRequest(o,t,null!==n&&void 0!==n?n:c,m.headers)}const r=e?"error; no more retries left":"error; not retryable";lm(this).info("".concat(v," - ").concat(r));const i=await m.text().catch(e=>pp(e).message),a=_p(i),s=a?void 0:i;lm(this).debug("[".concat(c,"] response error (").concat(r,")"),um({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,message:s,durationMs:Date.now()-h}));throw this.makeStatusError(m.status,a,s,m.headers)}return lm(this).info(v),lm(this).debug("[".concat(c,"] response start"),um({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,durationMs:f-h})),{response:m,options:o,controller:p,requestLogID:c,retryOfRequestLogID:n,startTime:h}}getAPIList(e,t,n){return this.requestAPIList(t,(0,u.A)({method:"get",path:e},n))}requestAPIList(e,t){const n=this.makeRequest(t,null,void 0);return new Dm(this,n,e)}async fetchWithTimeout(e,t,n,r){const i=t||{},{signal:o,method:a}=i,s=(0,pi.A)(i,Jg);o&&o.addEventListener("abort",()=>r.abort());const l=setTimeout(()=>r.abort(),n),c=globalThis.ReadableStream&&s.body instanceof globalThis.ReadableStream||"object"===typeof s.body&&null!==s.body&&Symbol.asyncIterator in s.body,d=(0,u.A)((0,u.A)({signal:r.signal},c?{duplex:"half"}:{}),{},{method:"GET"},s);a&&(d.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(l)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||(409===e.status||(429===e.status||e.status>=500)))}async retryRequest(e,t,n,r){let i;const o=null===r||void 0===r?void 0:r.get("retry-after-ms");if(o){const e=parseFloat(o);Number.isNaN(e)||(i=e)}const a=null===r||void 0===r?void 0:r.get("retry-after");if(a&&!i){const e=parseFloat(a);i=Number.isNaN(e)?Date.parse(a)-Date.now():1e3*e}if(!(i&&0<=i&&i<6e4)){var s;const n=null!==(s=e.maxRetries)&&void 0!==s?s:this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(t,n)}var l;return await(l=i,new Promise(e=>setTimeout(e,l))),this.makeRequest(e,t-1,n)}calculateDefaultRetryTimeoutMillis(e,t){const n=t-e;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}calculateNonstreamingTimeout(e,t){const n=6e5;if(36e5*e/128e3>n||null!=t&&e>t)throw new mp("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return n}async buildRequest(e){var t,n,r;let{retryCount:i=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=(0,u.A)({},e),{method:a,path:s,query:l,defaultBaseURL:c}=o,d=this.buildURL(s,l,c);"timeout"in o&&((e,t)=>{if("number"!==typeof t||!Number.isInteger(t))throw new mp("".concat(e," must be an integer"));if(t<0)throw new mp("".concat(e," must be a positive integer"))})("timeout",o.timeout),o.timeout=null!==(t=o.timeout)&&void 0!==t?t:this.timeout;const{bodyHeaders:h,body:p}=this.buildBody({options:o}),m=await this.buildHeaders({options:e,method:a,bodyHeaders:h,retryCount:i});return{req:(0,u.A)((0,u.A)((0,u.A)((0,u.A)((0,u.A)({method:a,headers:m},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&p instanceof globalThis.ReadableStream&&{duplex:"half"}),p&&{body:p}),null!==(n=this.fetchOptions)&&void 0!==n?n:{}),null!==(r=o.fetchOptions)&&void 0!==r?r:{}),url:d,timeout:o.timeout}}async buildHeaders(e){let{options:t,method:n,bodyHeaders:r,retryCount:i}=e,o={};this.idempotencyHeader&&"get"!==n&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=t.idempotencyKey);const a=Lm([o,(0,u.A)((0,u.A)((0,u.A)((0,u.A)({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),null!==jp&&void 0!==jp?jp:jp=Pp()),this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0),{},{"anthropic-version":"2023-06-01"}),await this.authHeaders(t),this._options.defaultHeaders,r,t.headers]);return this.validateHeaders(a),a.values}buildBody(e){let{options:{body:t,headers:n}}=e;if(!t)return{bodyHeaders:void 0,body:void 0};const r=Lm([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||"string"===typeof t&&r.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:"object"===typeof t&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&"function"===typeof t.next)?{bodyHeaders:void 0,body:Op(t)}:cp(this,ty,"f").call(this,{body:t,headers:r})}}ey=ry,ty=new WeakMap,$g=new WeakSet,ny=function(){return"https://api.anthropic.com"!==this.baseURL},ry.Anthropic=ey,ry.HUMAN_PROMPT="\\n\\nHuman:",ry.AI_PROMPT="\\n\\nAssistant:",ry.DEFAULT_TIMEOUT=6e5,ry.AnthropicError=mp,ry.APIError=fp,ry.APIConnectionError=yp,ry.APIConnectionTimeoutError=vp,ry.APIUserAbortError=gp,ry.NotFoundError=kp,ry.ConflictError=xp,ry.RateLimitError=Sp,ry.BadRequestError=bp,ry.AuthenticationError=wp,ry.InternalServerError=Cp,ry.PermissionDeniedError=Dp,ry.UnprocessableEntityError=Ep,ry.toFile=async function(e,t,n){var r;if(Em(),e=await e,t||(t=Cm(e)),(e=>null!=e&&"object"===typeof e&&"string"===typeof e.name&&"number"===typeof e.lastModified&&Pm(e))(e))return e instanceof File&&null==t&&null==n?e:Sm([await e.arrayBuffer()],null!==t&&void 0!==t?t:e.name,(0,u.A)({type:e.type,lastModified:e.lastModified},n));if((e=>null!=e&&"object"===typeof e&&"string"===typeof e.url&&"function"===typeof e.blob)(e)){const r=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),Sm(await Mm(r),t,n)}const i=await Mm(e);if(null===(r=n)||void 0===r||!r.type){const e=i.find(e=>"object"===typeof e&&"type"in e&&e.type);"string"===typeof e&&(n=(0,u.A)((0,u.A)({},n),{},{type:e}))}return Sm(i,t,n)};class iy extends ry{constructor(){super(...arguments),this.completions=new fg(this),this.messages=new Vg(this),this.models=new Qg(this),this.beta=new pg(this)}}iy.Completions=fg,iy.Messages=Vg,iy.Models=Qg,iy.Beta=pg;const oy=new class{constructor(){this.apiKey=null,this.client=null}initialize(e){this.apiKey=e,this.client=new iy({apiKey:this.apiKey,dangerouslyAllowBrowser:!0})}async analyzeWorkout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.client)throw new Error("AICoachService not initialized. Call initialize(apiKey) first.");const n=this.buildCoachingPrompt(e,t);try{return(await this.client.messages.create({model:"claude-sonnet-4-20250514",max_tokens:500,temperature:.7,messages:[{role:"user",content:n}]})).content[0].text}catch(r){throw console.error("\u274c Error calling Claude API:",r),r}}buildCoachingPrompt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{trainingContext:n,injuryContext:r,prescribedWorkout:i,upcomingWorkouts:o}=t,a=("Ride"===e.type||"VirtualRide"===e.type)&&e.standUpBikeType,s="Run"===e.type||"VirtualRun"===e.type;let l="";if(e.laps&&e.laps.length>0){e.laps[0].distance&&e.laps[0].distance.includes("km")?(l="\n\nLap-by-Lap Breakdown (kilometer splits):\n",e.laps.forEach(e=>{const t=null!==e.elevationGain?"".concat(e.elevationGain>0?"+":"").concat(e.elevationGain,"ft"):"flat";l+="Kilometer ".concat(e.lap," (~").concat(e.distanceMiles," mi cumulative): ").concat(e.pace||"N/A"," pace, ").concat(t," elevation, ").concat(e.avgHeartRate||"N/A"," bpm\n")})):(l="\n\nLap-by-Lap Breakdown (mile splits):\n",e.laps.forEach(e=>{const t=null!==e.elevationGain?"".concat(e.elevationGain>0?"+":"").concat(e.elevationGain,"ft"):"flat";l+="Mile ".concat(e.lap,": ").concat(e.pace||"N/A"," pace, ").concat(t," elevation, ").concat(e.avgHeartRate||"N/A"," bpm\n")}))}let u="",c="";if(a){const t="cyclete"===e.standUpBikeType?"Cyclete":"elliptigo"===e.standUpBikeType?"ElliptiGO":"stand-up bike";u="".concat(t," (stand-up bike) - Weight-bearing, NO-IMPACT outdoor cardio"),c='This was completed on a stand-up bike (comes into Strava as "Ride"). Stand-up bikes are weight-bearing but have ZERO impact forces on joints. Quads still work eccentrically controlling descents but without the pounding. Recovery needs: less joint/bone stress than running, but similar muscular fatigue. Can often handle higher volume than running due to no impact.'}else s?(u="Running - Weight-bearing, HIGH-IMPACT activity",c="This was a running workout with full ground impact forces. Every foot strike creates 2-3x bodyweight forces absorbed by joints, bones, and connective tissue. Descents create even higher eccentric loading on quads AND impact stress. Recovery needs: manage both muscular fatigue AND impact-related stress on joints/bones/tendons."):(u="Cycling or other cardio activity",c="This appears to be a traditional cycling workout. Lower body muscular work but minimal impact forces.");return"You are a USATF-certified running coach analyzing a completed workout. Your coaching style is conversational, data-driven, and actionable - like you're coaching someone you know personally.\n\nIMPORTANT GUIDELINES:\n- Keep response to 150-175 words MAXIMUM\n- Use conversational tone (not robotic or generic)\n- Focus on terrain's impact on performance (especially descents and eccentric loading)\n- Provide specific lap-by-lap storytelling when relevant\n- Give actionable next-step advice\n- DO NOT use any real coach names in your response\n- Be concise and insightful, not flowery or generic\n\nWORKOUT TYPE: ".concat(u,"\n\nCRITICAL CONTEXT - RECOVERY IMPLICATIONS:\n").concat(c,"\n\nCOMPLETED WORKOUT:\n- Distance: ").concat(e.distance," miles\n- Duration: ").concat(e.duration," minutes\n").concat(e.pace?"- Pace: ".concat(e.pace):"","\n").concat(null!==e.elevationGain&&void 0!==e.elevationGain?"- Total Elevation Gain: ".concat(e.elevationGain," feet"):"","\n").concat(e.avgHeartRate?"- Avg Heart Rate: ".concat(e.avgHeartRate," bpm"):"","\n").concat(e.maxHeartRate?"- Max Heart Rate: ".concat(e.maxHeartRate," bpm"):"","\n").concat(l,"\n\n").concat(i?"PRESCRIBED WORKOUT:\n".concat(i,"\n"):"","\n\n").concat(n?"TRAINING CONTEXT:\n".concat(n,"\n"):"","\n\n").concat(o?"UPCOMING WORKOUTS THIS WEEK:\n".concat(o,"\n"):"","\n\n").concat(r?"INJURY/FATIGUE NOTES:\n".concat(r,"\n"):"",'\n\nAnalyze this workout and provide coaching feedback. Focus on how terrain affected performance, whether pacing was appropriate given elevation changes, and what recovery/preparation is needed for the upcoming scheduled workouts. Reference specific upcoming workouts when giving advice (e.g., "Tuesday\'s tempo run", "Thursday\'s intervals").')}},ay=new Ke.O,sy=new Ue,ly=new ze,uy=new qe,cy=new He;const dy=function(e){var t,r,i,o;let{userProfile:s,trainingPlan:l}=e;const c=re(),{day:d}=function(){let{matches:e}=a.useContext(J),t=e[e.length-1];return t?t.params:{}}(),h=te(),[p,m]=(0,a.useState)({isOpen:!1,workout:null}),[f,g]=(0,a.useState)(null),[y,v]=(0,a.useState)(null),[b,w]=(0,a.useState)(null),[D,k]=(0,a.useState)(!1),[x,E]=(0,a.useState)(null),S=null===(t=h.state)||void 0===t?void 0:t.workout,C=(null===(r=h.state)||void 0===r?void 0:r.userProfile)||s,A=(null===(i=h.state)||void 0===i?void 0:i.currentWeek)||1,T=null===(o=h.state)||void 0===o?void 0:o.weekData,F=(()=>{var e,t,n,r;const i=(null===l||void 0===l||null===(e=l.planOverview)||void 0===e?void 0:e.goalTime)||(null===C||void 0===C?void 0:C.raceTime)||(null===s||void 0===s?void 0:s.raceTime),o=(null===l||void 0===l||null===(t=l.planOverview)||void 0===t?void 0:t.raceDistance)||(null===C||void 0===C?void 0:C.raceDistance)||(null===s||void 0===s?void 0:s.raceDistance),a=((e,t)=>{if(!e||!t)return null;let n=e;n.includes("-")&&(n=n.split("-")[1]);const r=n.split(":").map(Number);let i;if(3===r.length)i=60*r[0]+r[1]+r[2]/60;else{if(2!==r.length)return null;i=r[0]+r[1]/60}const o={"5K":3.1,"10K":6.2,Half:13.1,"Half Marathon":13.1,Marathon:26.2}[t]||parseFloat(t);if(!o)return null;const a=i/o,s=Math.floor(a),l=Math.round(60*(a-s));return"".concat(s,":").concat(l.toString().padStart(2,"0"))})(i,o),c=e=>e&&a?(0,u.A)((0,u.A)({},e),{},{racePace:{pace:a},raceDistance:o}):e;if(null!==C&&void 0!==C&&null!==(n=C.paces)&&void 0!==n&&n.easy)return c(C.paces);if(null!==l&&void 0!==l&&null!==(r=l.paces)&&void 0!==r&&r.easy)return c(l.paces);if(i&&o)try{var d;const e=ay.calculateFromGoal(o,i);if(null!==e&&void 0!==e&&null!==(d=e.paces)&&void 0!==d&&d.easy)return c(e.paces)}catch(wy){}return null})(),R=S||(e=>{if(T&&T.workouts)return T.workouts.find(t=>t.day&&t.day.toLowerCase()===e.toLowerCase());if(!l||!l.weeks)return null;const t=Math.min(A-1,l.weeks.length-1),n=l.weeks[t];return n&&n.workouts?n.workouts.find(t=>t.day&&t.day.toLowerCase()===e.toLowerCase()):null})(d);(0,a.useEffect)(()=>{(async()=>{if(Ie.j2.currentUser&&R)try{const{doc:e,getDoc:t}=await Promise.resolve().then(n.bind(n,667)),{db:r}=await Promise.resolve().then(n.bind(n,121)),i=e(r,"users",Ie.j2.currentUser.uid),o=await t(i);if(o.exists()){const e=o.data().completedWorkouts||{},t=R.workoutIndex||0,n="".concat(A,"-").concat(R.day,"-").concat(t);e[n]&&v(e[n])}}catch(e){console.error("Error fetching completion data:",e)}})()},[R,A]);const _={tuesday:{name:null!==s&&void 0!==s&&s.standUpBikeType?"Progressive Build Session":"Sandwich Tempo",type:"tempo",focus:"Lactate Threshold",duration:"45 minutes",description:null!==s&&void 0!==s&&s.standUpBikeType?"Gradually increasing intensity throughout session on your stand-up bike":"Tempo effort sandwiched between easy running",structure:null!==s&&void 0!==s&&s.standUpBikeType?"20 min easy + 20-40 min progressive build to tempo + 10 min easy":"10-15 min easy warmup + 15-20 min tempo + 5-10 min easy cooldown",equipmentSpecific:!(null===s||void 0===s||!s.standUpBikeType),intensity:"Medium-hard effort, sustainable for 20-60 minutes",heartRate:"86-90% Max HR",paceGuidance:null!==s&&void 0!==s&&s.standUpBikeType?"".concat($s(null===s||void 0===s?void 0:s.standUpBikeType)," specific: Focus on smooth ").concat("cyclete"===(null===s||void 0===s?void 0:s.standUpBikeType)?"teardrop":"elliptical"," motion"):"Half marathon to 10-mile race pace",safetyNotes:['Start conservatively - tempo should feel "controlled discomfort"',"If breathing becomes labored, slow down slightly","Better to run slightly too easy than too hard"],alternatives:{tooHot:"Move indoors or to early morning",tooTired:"Easy run with 4-6 x 1 minute pickups",timeConstraint:"20 min tempo run instead of full session",noEquipment:null!==s&&void 0!==s&&s.standUpBikeType?"Traditional running tempo workout":"Treadmill with 1% incline"}},thursday:{name:"Easy Run",type:"easy",focus:"Recovery",duration:"35-45 minutes",description:"Conversational pace, aerobic base building",structure:"Easy effort throughout, should feel refreshed after",equipmentSpecific:!1,intensity:"Easy conversational pace",heartRate:"65-79% Max HR",paceGuidance:"Should be able to speak in full sentences",safetyNotes:["This should feel easy - not a workout day","Focus on form and relaxation","Cut short if feeling overly fatigued"],alternatives:{tooHot:"Move to air conditioning or pool running",tooTired:"Walk or very easy bike ride",injury:"Cross-training or complete rest",timeConstraint:"20-30 minutes is fine"}},sunday:{name:"Conversational Long Run",type:"longRun",focus:"Endurance",duration:"60-75 minutes",description:"Easy long run emphasizing conversational pace",structure:"Run with partner/group, maintain conversation throughout",equipmentSpecific:!1,intensity:"Easy conversational pace",heartRate:"65-78% Max HR",paceGuidance:"If you can't hold a conversation, you're going too fast",safetyNotes:["Carry water for runs over 60 minutes","Know your route and have bailout options","Focus on time on feet, not speed"],alternatives:{tooHot:"Start very early or split into two shorter runs",timeConstraint:"Run for available time, maintain easy effort",noPartner:"Solo run with audiobook or podcast",injury:"Long bike ride or pool running session"}}},I=function(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").toLowerCase();return t.includes("fartlek")?"Develops speed, mental toughness, and ability to surge during races. Improves VO2 max and teaches body to handle varied paces.":t.includes("progressive")?"Builds mental strength and pacing skills. Teaches body to run strong when tired. Improves lactate clearance and finishing speed.":t.includes("tempo")||"tempo"===e?"Raises lactate threshold, improves race pace endurance, and builds mental toughness. Key workout for half marathon and marathon training.":t.includes("interval")||t.includes("speed")||"intervals"===e?"Increases VO2 max, running economy, and speed. Develops neuromuscular power and teaches body to handle high-intensity efforts.":t.includes("hill")||"hills"===e?"Builds leg strength, power, and running economy. Improves form and reduces injury risk through strength development.":t.includes("long")||"longRun"===e?"Builds aerobic endurance, fat adaptation, and mental toughness. Strengthens bones, tendons, and cardiovascular system.":t.includes("easy")||t.includes("recovery")||"easy"===e?"Promotes recovery, builds aerobic base, and strengthens cardiovascular system without stress. Allows body to adapt to training.":"Develops overall fitness and running ability"},P=R?(e=>{var t,n,r,i,o,a,s,c,d,h,p,m,f,g,y,v,b,w,D,k,x,E,S,A,T,R,_,P,M,N,j,B,O,L,W,q,U,z,H,V,K,Y,G,Q,Z,X,J,$,ee,te,ne,re,ie,oe,ae,se,le,ue,ce,de,he,pe;if(!e)return null;const me="cross-training"===e.type;let fe=me?e:e.workoutDetails||e.workout;const ge=e.type,ye=["longRun","long-run","tempo","interval","intervals","hill","hills"],ve=((null===(t=fe)||void 0===t?void 0:t.name)||e.name||"").toLowerCase(),be=ve.includes("long run")||ve.includes("progression")||ve.includes("dropdown")||ve.includes("thirds")||ve.includes("marathon pace")||ve.includes("steady state")||ve.includes("sandwich")||ve.includes("simulation")||ve.includes("dress rehearsal")||ve.includes("goal pace")?"longRun":ge,we=!(null!==(n=fe)&&void 0!==n&&n.intensityGuidance)||ye.includes(be);if(fe&&we&&!me&&"easy"!==be){var De,ke,xe,Ee,Se;const t=fe.name||e.name,n=F;let r=e.distance||(null===(De=fe)||void 0===De?void 0:De.distance)||(null===(ke=e.workout)||void 0===ke?void 0:ke.distance);if(!r){const e=(t||"").match(/(\d+(?:\.\d+)?)[- ]?Mile/i);e&&(r=parseFloat(e[1]))}if(!r){var Ce;const t=(e.description||(null===(Ce=fe)||void 0===Ce?void 0:Ce.description)||"").match(/(\d+(?:\.\d+)?)\s*(?:miles?|mi)\b/i);t&&(r=parseFloat(t[1]))}if(!r){const t=(e.name||"").match(/(\d+(?:\.\d+)?)\s*(?:miles?|mi|-Mile)\b/i);t&&(r=parseFloat(t[1]))}r||"longRun"!==be||console.warn('\u26a0\ufe0f NO DISTANCE FOUND for long run "'.concat(t,'" - AI coach should include distance in description')),console.log('\ud83d\udccf Distance extraction for "'.concat(t,'":'),{fromWorkoutData:e.distance,fromWorkoutLib:null===(xe=fe)||void 0===xe?void 0:xe.distance,fromNestedWorkout:null===(Ee=e.workout)||void 0===Ee?void 0:Ee.distance,parsed:r,description:null===(Se=e.description)||void 0===Se?void 0:Se.substring(0,50)});const i=((e,t,n,r,i)=>{if(!e)return null;try{var o,a;const s={runEqPreference:(null===C||void 0===C?void 0:C.runEqPreference)||0,paces:n||F,trackIntervals:r||(null===l||void 0===l?void 0:l.trackIntervals)||(null===C||void 0===C?void 0:C.trackIntervals)},c=(null===l||void 0===l?void 0:l.currentWeek)||(null===l||void 0===l||null===(o=l.planOverview)||void 0===o?void 0:o.currentWeek)||null,d=(null===l||void 0===l||null===(a=l.planOverview)||void 0===a?void 0:a.totalWeeks)||null;switch(t){case"interval":case"intervals":return sy.prescribeIntervalWorkout(e,(0,u.A)((0,u.A)({},s),{},{totalDistance:i,weekNumber:c,totalWeeks:d}));case"tempo":return ly.prescribeTempoWorkout(e,(0,u.A)((0,u.A)({},s),{},{weekNumber:c,totalWeeks:d}));case"hill":case"hills":return uy.prescribeHillWorkout(e,s);case"longRun":case"long-run":return cy.prescribeLongRunWorkout(e,(0,u.A)((0,u.A)({},s),{},{distance:i||8}));default:return null}}catch(wy){return console.warn('Could not fetch workout "'.concat(e,'" from library:'),wy.message),null}})(t,be,n,fe.trackIntervals,r);i&&(fe=i)}const Ae=(e=>{switch(e){case"interval":case"intervals":return{intensity:"High intensity - 5K to 1-mile race pace",heartRate:"90-100% Max HR"};case"tempo":return{intensity:"Medium-hard effort, sustainable for 20-60 minutes",heartRate:"86-90% Max HR"};case"hill":case"hills":return{intensity:"Hard effort on hills, easy on recovery",heartRate:"85-95% Max HR"};case"longRun":case"long-run":return{intensity:"Easy conversational pace",heartRate:"70-80% Max HR"};default:return{intensity:"Moderate effort",heartRate:"70-85% Max HR"}}})(ge);let Te=null;if(me&&null!==(r=fe)&&void 0!==r&&r.structure)Te=fe.structure;else if(null!==(i=fe)&&void 0!==i&&i.warmupCooldown&&null!==(o=fe)&&void 0!==o&&o.repetitions){const e=fe.warmupCooldown,t=[];e.warmup&&t.push("**Warmup:** ".concat(e.warmup)),t.push("**Main Set:** ".concat(fe.repetitions).concat(fe.recovery?" with ".concat(fe.recovery):"")),e.cooldown&&t.push("**Cooldown:** ".concat(e.cooldown)),Te=t.join("\n\n")}else if(null!==(a=fe)&&void 0!==a&&a.mileByMilePacing)Te=fe.mileByMilePacing;else if(null===(s=fe)||void 0===s||!s.structure||"longRun"!==ge&&"long-run"!==ge&&"tempo"!==ge)if(null!==(c=e.workout)&&void 0!==c&&c.structure)Te=e.workout.structure;else if(null!==(d=fe)&&void 0!==d&&d.workout)Te=fe.workout;else if(null!==(h=fe)&&void 0!==h&&null!==(p=h.totalWorkout)&&void 0!==p&&p.structure){if(Te=fe.totalWorkout.structure,"intervals"===ge&&fe.repetitions){const e=/(\d+)-(\d+)\s*x\s*(\S+)/g;Te=Te.replace(e,(e,t,n,r)=>{if(fe.repetitions.includes(r)){const e=fe.repetitions.match(/(\d+\s*x\s*\S+)/);if(e)return e[1]}return e})}}else null!==(m=fe)&&void 0!==m&&m.structure?Te=fe.structure:null!==(f=fe)&&void 0!==f&&f.repetitions&&null!==(g=fe)&&void 0!==g&&g.recovery?Te="".concat(fe.repetitions," with ").concat(fe.recovery):null!==(y=fe)&&void 0!==y&&y.repetitions?Te="".concat(fe.repetitions):null!==(v=e.workout)&&void 0!==v&&v.structure&&(Te=e.workout.structure);else Te=fe.structure;if(!Te||"Complete the workout as prescribed"===Te){var Fe,Re,_e,Ie,Pe,Me;const t=(null===(Fe=e.workout)||void 0===Fe?void 0:Fe.name)||(null===(Re=fe)||void 0===Re?void 0:Re.name)||"Workout",n=(null===(_e=e.workout)||void 0===_e?void 0:_e.description)||(null===(Ie=fe)||void 0===Ie?void 0:Ie.description)||"",r=(null===(Pe=e.workout)||void 0===Pe?void 0:Pe.duration)||(null===(Me=fe)||void 0===Me?void 0:Me.duration)||"30-45 minutes";Te=t.toLowerCase().includes("fartlek")?"10 min warmup + 20-30 min fartlek (surge when you feel strong, recover as needed) + 10 min cooldown":t.toLowerCase().includes("progressive")?"10 min easy + gradually build pace to moderate-hard finish + 5 min cooldown":t.toLowerCase().includes("tempo")?"10-15 min easy warmup + 20-30 min @ comfortably hard pace + 5-10 min cooldown":t.toLowerCase().includes("interval")||t.toLowerCase().includes("speed")?"15 min warmup + intervals at high intensity with recovery + 10 min cooldown":t.toLowerCase().includes("easy")||t.toLowerCase().includes("recovery")?"".concat(r," at conversational pace throughout"):t.toLowerCase().includes("long")?"".concat(r," at steady, easy pace - focus on time on feet"):n||"Complete the workout as prescribed"}const Ne=me&&(null===(b=fe)||void 0===b||null===(w=b.effort)||void 0===w?void 0:w.perceived)||(null===(D=e.workout)||void 0===D||null===(k=D.effort)||void 0===k?void 0:k.perceived)||(null===(x=fe)||void 0===x||null===(E=x.intensityGuidance)||void 0===E?void 0:E.effort)||(null===(S=fe)||void 0===S||null===(A=S.intensityGuidance)||void 0===A?void 0:A.description)||("string"!==typeof(null===(T=fe)||void 0===T?void 0:T.intensity)||["shortSpeed","vo2Max","longIntervals","threshold","tempoPlus"].includes(fe.intensity)?null:fe.intensity)||Ae.intensity,je=me&&(null===(R=fe)||void 0===R||null===(_=R.effort)||void 0===_?void 0:_.heartRate)||(null===(P=e.workout)||void 0===P||null===(M=P.effort)||void 0===M?void 0:M.heartRate)||(null===(N=fe)||void 0===N||null===(j=N.intensityGuidance)||void 0===j?void 0:j.heartRate)||(null===(B=fe)||void 0===B?void 0:B.heartRate)||Ae.heartRate;let Be="Maintain steady effort throughout";var Oe,Le;if(e.equipmentSpecific&&null!==C&&void 0!==C&&C.standUpBikeType)Be="cyclete"===C.standUpBikeType&&null!==(Oe=e.workout)&&void 0!==Oe&&Oe.cycleteNotes?e.workout.cycleteNotes:"elliptigo"===C.standUpBikeType&&null!==(Le=e.workout)&&void 0!==Le&&Le.elliptigoNotes?e.workout.elliptigoNotes:"".concat($s(C.standUpBikeType)," specific: Focus on smooth motion and consistent effort");else if("intervals"===ge&&null!==(O=fe)&&void 0!==O&&O.trackIntervals){var We,qe,Ue,ze;const e=fe.trackIntervals,t=(null===(We=fe)||void 0===We||null===(qe=We.name)||void 0===qe?void 0:qe.toLowerCase())||"";let n=null;if(t.includes("800m")&&e["800m"]?n="".concat(e["800m"]," per 800m"):t.includes("1000m")&&e["1000m"]?n="".concat(e["1000m"]," per 1000m"):t.includes("1200m")&&e["1200m"]?n="".concat(e["1200m"]," per 1200m"):t.includes("400m")&&e["400m"]?n="".concat(e["400m"]," per 400m"):t.includes("200m")&&e["200m"]?n="".concat(e["200m"]," per 200m"):t.includes("mile")&&e["1mile"]&&(n="".concat(e["1mile"]," per mile")),n){var He,Ve;const e=(null===(He=fe)||void 0===He||null===(Ve=He.intensityGuidance)||void 0===Ve?void 0:Ve.pace)||"";Be=e?"".concat(n," (").concat(e,")"):n}else null!==(Ue=fe)&&void 0!==Ue&&null!==(ze=Ue.intensityGuidance)&&void 0!==ze&&ze.pace&&(Be=fe.intensityGuidance.pace)}const Ke=(null===(L=fe)||void 0===L?void 0:L.paces)||F;if(Ke){var Ye,Ge,Qe,Ze;const t=(null===(Ye=fe)||void 0===Ye?void 0:Ye.intensity)||ge,n=((null===(Ge=fe)||void 0===Ge?void 0:Ge.name)||e.name||"").toLowerCase(),r=n.includes("dropdown")||n.includes("10-second")||n.includes("thirds")||n.includes("dusa")||n.includes("fast finish")||n.includes("progressive"),i=n.includes("sandwich")||n.includes("simulation")||n.includes("dress rehearsal")||n.includes("marathon pace long")||n.includes("goal pace"),o=n.includes("fast finish")||n.includes("super fast");if(i&&(Ke.racePace||Ke.marathon)){var Xe,Je;const e=(null===(Xe=Ke.racePace)||void 0===Xe?void 0:Xe.pace)||(null===(Je=Ke.marathon)||void 0===Je?void 0:Je.pace);Be="".concat(e,"/mile (goal pace)")}else if(o&&Ke.easy&&Ke.interval){const e="".concat(Ke.easy.min,"-").concat(Ke.easy.max,"/mile"),t=Ke.interval.pace;Be="".concat(e," \u2192 ").concat(t,"/mile (fast finish)")}else if(r&&Ke.easy)Be="".concat(Ke.easy.min,"-").concat(Ke.easy.max,"/mile (starting pace)");else if("easy"!==t&&"recovery"!==t||!Ke.easy)if("hills"===ge||"hill"===ge){var $e,et;t&&t.toLowerCase().includes("short")&&Ke.interval?Be="".concat(Ke.interval.pace,"/mile (hill effort)"):Ke.threshold?Be="".concat(Ke.threshold.pace,"/mile (hill effort)"):Ke.interval?Be="".concat(Ke.interval.pace,"/mile (hill effort)"):null!==($e=fe)&&void 0!==$e&&null!==(et=$e.intensityGuidance)&&void 0!==et&&et.pace&&(Be=fe.intensityGuidance.pace)}else if("intervals"===ge||"interval"===t||"shortspeed"===t||"vo2Max"===t||"longIntervals"===t){var tt,nt;Be=Ke.interval?"".concat(Ke.interval.pace,"/mile"):null!==(tt=fe)&&void 0!==tt&&null!==(nt=tt.intensityGuidance)&&void 0!==nt&&nt.pace?fe.intensityGuidance.pace:"5K to 3K race pace (interval effort)"}else if("tempo"===ge||"threshold"===t||"tempoPlus"===t||"comfortablyHard"===t){var rt,it;Be=Ke.threshold?"".concat(Ke.threshold.pace,"/mile"):null!==(rt=fe)&&void 0!==rt&&null!==(it=rt.intensityGuidance)&&void 0!==it&&it.pace?fe.intensityGuidance.pace:"Half marathon to 10-mile race pace (tempo effort)"}else"marathonPace"===t&&Ke.marathon?Be="".concat(Ke.marathon.pace,"/mile"):"longRun"===ge&&Ke.easy?Be="".concat(Ke.easy.min,"-").concat(Ke.easy.max,"/mile"):null!==(Qe=fe)&&void 0!==Qe&&null!==(Ze=Qe.intensityGuidance)&&void 0!==Ze&&Ze.pace?Be=fe.intensityGuidance.pace:Ke.easy&&(Be="easy"===ge||"recovery"===ge||"longRun"===ge||"easy"===t?"".concat(Ke.easy.min,"-").concat(Ke.easy.max,"/mile"):"Maintain appropriate effort for workout type");else Be="".concat(Ke.easy.min,"-").concat(Ke.easy.max,"/mile")}else null!==(W=fe)&&void 0!==W&&W.paceGuidance?Be="object"===typeof fe.paceGuidance?fe.paceGuidance.description||"Maintain steady effort throughout":fe.paceGuidance:"intervals"===ge&&null!==(q=fe)&&void 0!==q&&null!==(U=q.intensityGuidance)&&void 0!==U&&U.pace&&(Be=fe.intensityGuidance.pace);let ot=null!==(z=fe)&&void 0!==z&&z.safetyNotes&&Array.isArray(fe.safetyNotes)&&fe.safetyNotes.length>0?fe.safetyNotes:["Listen to your body and adjust as needed","Stay hydrated throughout the workout","Stop if you feel pain or excessive fatigue"];null!==(H=e.workout)&&void 0!==H&&H.roadConsiderations&&(ot=[...ot,"Road planning: ".concat(e.workout.roadConsiderations)]);let at="30-45 minutes";if(me&&null!==(V=fe)&&void 0!==V&&V.duration||null!==(K=fe)&&void 0!==K&&K.duration&&ye.includes(be)?at=fe.duration:null!==(Y=e.workout)&&void 0!==Y&&Y.duration?at=e.workout.duration:null!==(G=fe)&&void 0!==G&&G.duration&&(at=fe.duration),("longRun"===be||"easy"===ge)&&at.includes("45-")&&null!==(Q=fe)&&void 0!==Q&&null!==(Z=Q.paces)&&void 0!==Z&&Z.easy){var st,lt;const t=((null===(st=fe)||void 0===st?void 0:st.name)||(null===(lt=e.workout)||void 0===lt?void 0:lt.name)||"").match(/(\d+(?:\.\d+)?)[- ]?Mile/i);if(t){const e=parseFloat(t[1]),n=fe.paces.easy.min,r=fe.paces.easy.max;if(n&&r){const t=e=>{const[t,n]=e.split(":").map(Number);return t+n/60},i=Math.round(e*t(n)),o=Math.round(e*t(r));at="".concat(i,"-").concat(o," minutes")}}}if(Te&&"string"===typeof Te){const e=Te.match(/(\d+-\d+)\s*minutes?\s*total/i);e?at="".concat(e[1]," minutes total"):Te.includes("warmup")&&Te.includes("cooldown")&&(at="".concat(at," (main set)"))}var ut;return{name:(null===(X=fe)||void 0===X?void 0:X.name)||"Workout",type:e.type||"easy",focus:e.focus||(null===(J=fe)||void 0===J?void 0:J.focus)||(ut=ge,{hills:"Power & Strength",tempo:"Lactate Threshold",intervals:"VO2 Max & Speed",easy:"Aerobic Base",longRun:"Endurance","cross-training":"Active Recovery"}[ut]||"General Fitness"),duration:at,description:(null===($=fe)||void 0===$?void 0:$.description)||"Standard workout",structure:Te,equipmentSpecific:e.equipmentSpecific||!1,intensity:Ne,heartRate:je,paceGuidance:Be,safetyNotes:ot,alternatives:(null===(ee=fe)||void 0===ee?void 0:ee.alternatives)||{tooHot:"Move indoors or adjust timing",tooTired:"Easy recovery pace instead",timeConstraint:"Reduce duration but maintain intensity",noEquipment:"Bodyweight alternative available"},hillRequirement:null===(te=fe)||void 0===te?void 0:te.hillRequirement,terrainInstructions:null===(ne=fe)||void 0===ne?void 0:ne.terrainInstructions,progression:null===(re=fe)||void 0===re?void 0:re.progression,benefits:(null===(ie=fe)||void 0===ie?void 0:ie.benefits)||I(ge,null===(oe=fe)||void 0===oe?void 0:oe.name),variations:null===(ae=fe)||void 0===ae?void 0:ae.variations,examples:null===(se=fe)||void 0===se?void 0:se.examples,trackIntervals:null===(le=fe)||void 0===le?void 0:le.trackIntervals,fueling:null===(ue=fe)||void 0===ue?void 0:ue.fueling,runEqOptions:e.runEqOptions,coachingGuidance:e.coachingGuidance,technique:null===(ce=fe)||void 0===ce?void 0:ce.technique,effort:null===(de=fe)||void 0===de?void 0:de.effort,coachingTips:null===(he=fe)||void 0===he?void 0:he.coachingTips,settings:null===(pe=fe)||void 0===pe?void 0:pe.settings,crossTrainingType:e.crossTrainingType}})(R):_[d]||_.tuesday,M=f||P,N=e=>({tempo:"#4299e1",intervals:"#e53e3e",hills:"#38a169",longRun:"#805ad5",easy:"#718096"}[e]||"#718096"),j=()=>{m({isOpen:!1,workout:null})};return(0,je.jsxs)("div",{className:"workout-detail",style:{minHeight:"100vh",background:"#0a0a0a"},children:[(0,je.jsx)("div",{className:"workout-detail-header",style:{background:"linear-gradient(135deg, ".concat(N(M.type),"15 0%, #1a1a1a 50%, #0a0a0a 100%)"),borderBottom:"2px solid ".concat(N(M.type),"30"),padding:"32px 0 48px 0",position:"relative",overflow:"hidden",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4), inset 0 -1px 0 ".concat(N(M.type),"20")},children:(0,je.jsxs)("div",{className:"container",style:{position:"relative",zIndex:1},children:[(0,je.jsxs)("div",{style:{display:"flex",gap:"12px",marginBottom:"24px"},children:[(0,je.jsx)("button",{onClick:()=>c(-1),style:{background:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"8px 16px",borderRadius:"12px",display:"flex",alignItems:"center",fontWeight:"bold"},children:"\u2190 Back"}),(0,je.jsx)("button",{onClick:()=>window.location.reload(),style:{background:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.1)",color:"#999",fontSize:"0.9rem",cursor:"pointer",padding:"8px 16px",borderRadius:"12px",display:"flex",alignItems:"center",fontWeight:"600",gap:"6px"},title:"Reload workout data from libraries (useful after code changes)",children:"Refresh"})]}),(0,je.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"16px"},children:(0,je.jsxs)("div",{style:{flex:1},children:[(0,je.jsx)("h1",{style:{margin:0,color:"white",fontSize:"2.5rem",fontWeight:"800",letterSpacing:"-0.5px"},children:"string"===typeof M.name?M.name:"object"===typeof M.name?JSON.stringify(M.name):"Workout"}),M.crossTrainingType&&(()=>{const e={pool:{emoji:"\ud83c\udfca",color:"#3b82f6",label:"Pool / Aqua Running"},aquaRunning:{emoji:"\ud83c\udfca",color:"#3b82f6",label:"Aqua Running"},rowing:{emoji:"\ud83d\udea3",color:"#22c55e",label:"Rowing Machine"},elliptical:{emoji:"\u26a1",color:"#f59e0b",label:"Elliptical"},swimming:{emoji:"\ud83c\udfca\u200d\u2642\ufe0f",color:"#06b6d4",label:"Swimming"},stationaryBike:{emoji:"\ud83d\udeb4\u200d\u2640\ufe0f",color:"#8b5cf6",label:"Stationary Bike"},standUpBike:{emoji:"\ud83d\udeb4",color:"#ec4899",label:"Stand-Up Bike"},cyclete:{emoji:"\ud83d\udeb4",color:"#ec4899",label:"Cyclete"},elliptigo:{emoji:"\ud83d\udeb4",color:"#ec4899",label:"ElliptiGO"}}[M.crossTrainingType]||{emoji:"\ud83c\udfc3",color:"#999",label:"Cross-Training"};return(0,je.jsxs)("div",{className:"workout-equipment-indicator",style:{display:"inline-flex",alignItems:"center",gap:"12px",background:"linear-gradient(135deg, ".concat(e.color,"15 0%, ").concat(e.color,"25 100%)"),border:"2px solid ".concat(e.color),borderRadius:"12px",padding:"12px 20px",marginTop:"16px"},children:[(0,je.jsx)("span",{className:"workout-equipment-emoji",style:{fontSize:"2rem"},children:e.emoji}),(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:e.color,fontSize:"0.75rem",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px"},children:"Cross-Training Workout"}),(0,je.jsx)("div",{className:"workout-equipment-label",style:{color:"white",fontSize:"1.3rem",fontWeight:"800",marginTop:"2px"},children:e.label})]})]})})(),(0,je.jsxs)("p",{className:"workout-subtitle",style:{margin:"8px 0 0 0",color:"#999",fontSize:"1.1rem",fontWeight:"500"},children:[d.charAt(0).toUpperCase()+d.slice(1)," \u2022 ","string"===typeof M.duration?M.duration:"object"===typeof M.duration?JSON.stringify(M.duration):"30-45 minutes"]})]})}),(0,je.jsxs)("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[(0,je.jsxs)("span",{className:"workout-badge",style:{background:"linear-gradient(135deg, ".concat(N(M.type),"20 0%, ").concat(N(M.type),"40 100%)"),border:"2px solid ".concat(N(M.type)),color:N(M.type),padding:"8px 16px",borderRadius:"20px",fontSize:"0.9rem",fontWeight:"700"},children:[(O=M.type,{tempo:"\u26a1",intervals:"\ud83d\udd25",hills:"\u26f0\ufe0f",longRun:"\ud83c\udfc3",easy:"\ud83c\udf24\ufe0f"}[O]||"\ud83d\udcaa")," ",M.focus]}),M.equipmentSpecific&&(null===s||void 0===s?void 0:s.standUpBikeType)&&(0,je.jsx)("span",{style:{background:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.1)",color:"#999",padding:"8px 16px",borderRadius:"20px",fontSize:"0.9rem",fontWeight:"600"},children:$s(s.standUpBikeType)})]})]})}),(0,je.jsxs)("div",{className:"container",style:{padding:"24px 16px"},children:[(0,je.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px",marginBottom:"24px"},children:[(0,je.jsxs)("div",{className:"workout-detail-card workout-metric-card",style:{background:"linear-gradient(135deg, ".concat(N(M.type),"25 0%, ").concat(N(M.type),"08 50%, rgba(255, 255, 255, 0.05) 100%)"),padding:"20px",borderRadius:"16px",border:"2px solid ".concat(N(M.type),"50"),boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"20, 0 0 20px ").concat(N(M.type),"15"),transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px) scale(1.02)",e.currentTarget.style.boxShadow="0 12px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px ".concat(N(M.type),"60, 0 0 30px ").concat(N(M.type),"30"),e.currentTarget.style.borderColor="".concat(N(M.type),"70")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0) scale(1)",e.currentTarget.style.boxShadow="0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"20, 0 0 20px ").concat(N(M.type),"15"),e.currentTarget.style.borderColor="".concat(N(M.type),"50")},children:[(0,je.jsx)("div",{className:"workout-metric-label",style:{color:"#999",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},children:"Target Pace"}),(0,je.jsx)("div",{className:"workout-metric-value",style:{color:"white",fontSize:"1.5rem",fontWeight:"800",lineHeight:"1.2",textShadow:"0 2px 8px ".concat(N(M.type),"40")},children:(e=>{if("string"===typeof e)return e;if("object"===typeof e){const t=Object.entries(e);return 1===t.length?t[0][1]:t.map(e=>{let[t,n]=e;return"".concat(t.charAt(0).toUpperCase()+t.slice(1),": ").concat(n)}).join(" | ")}return"Steady, controlled effort"})(M.paceGuidance)})]}),(0,je.jsxs)("div",{className:"workout-detail-card workout-metric-card",style:{background:"linear-gradient(135deg, ".concat(N(M.type),"25 0%, ").concat(N(M.type),"08 50%, rgba(255, 255, 255, 0.05) 100%)"),padding:"20px",borderRadius:"16px",border:"2px solid ".concat(N(M.type),"50"),boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"20, 0 0 20px ").concat(N(M.type),"15"),transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px) scale(1.02)",e.currentTarget.style.boxShadow="0 12px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px ".concat(N(M.type),"60, 0 0 30px ").concat(N(M.type),"30"),e.currentTarget.style.borderColor="".concat(N(M.type),"70")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0) scale(1)",e.currentTarget.style.boxShadow="0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"20, 0 0 20px ").concat(N(M.type),"15"),e.currentTarget.style.borderColor="".concat(N(M.type),"50")},children:[(0,je.jsx)("div",{className:"workout-metric-label",style:{color:"#999",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},children:"Intensity"}),(0,je.jsx)("div",{className:"workout-metric-value",style:{color:"white",fontSize:"1.1rem",fontWeight:"700",lineHeight:"1.3",textShadow:"0 2px 6px ".concat(N(M.type),"40")},children:"string"===typeof M.intensity?tl(M.intensity):"object"===typeof M.intensity?JSON.stringify(M.intensity):"Medium Effort"})]}),(0,je.jsxs)("div",{className:"workout-detail-card workout-metric-card",style:{background:"linear-gradient(135deg, ".concat(N(M.type),"25 0%, ").concat(N(M.type),"08 50%, rgba(255, 255, 255, 0.05) 100%)"),padding:"20px",borderRadius:"16px",border:"2px solid ".concat(N(M.type),"50"),boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"20, 0 0 20px ").concat(N(M.type),"15"),transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px) scale(1.02)",e.currentTarget.style.boxShadow="0 12px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px ".concat(N(M.type),"60, 0 0 30px ").concat(N(M.type),"30"),e.currentTarget.style.borderColor="".concat(N(M.type),"70")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0) scale(1)",e.currentTarget.style.boxShadow="0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"20, 0 0 20px ").concat(N(M.type),"15"),e.currentTarget.style.borderColor="".concat(N(M.type),"50")},children:[(0,je.jsx)("div",{className:"workout-metric-label",style:{color:"#999",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},children:"Heart Rate Zone"}),(0,je.jsx)("div",{className:"workout-metric-value",style:{color:"white",fontSize:"1.5rem",fontWeight:"800",lineHeight:"1.2",textShadow:"0 2px 8px ".concat(N(M.type),"40")},children:"string"===typeof M.heartRate?(B=M.heartRate,B?B.replace(/max hr/gi,"Max HR").replace(/max heart rate/gi,"Max Heart Rate").replace(/hr/gi,"HR"):""):"object"===typeof M.heartRate?JSON.stringify(M.heartRate):"70-85% Max HR"})]}),("bike"===R.type||R.equipmentSpecific)&&(()=>{const e=jh.calculateWorkoutCalories(R);return e?(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255, 149, 0, 0.25) 0%, rgba(255, 149, 0, 0.08) 50%, rgba(255, 255, 255, 0.05) 100%)",padding:"20px",borderRadius:"16px",border:"2px solid rgba(255, 149, 0, 0.5)",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 149, 0, 0.2), 0 0 20px rgba(255, 149, 0, 0.15)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px) scale(1.02)",e.currentTarget.style.boxShadow="0 12px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 149, 0, 0.6), 0 0 30px rgba(255, 149, 0, 0.3)",e.currentTarget.style.borderColor="rgba(255, 149, 0, 0.7)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0) scale(1)",e.currentTarget.style.boxShadow="0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 149, 0, 0.2), 0 0 20px rgba(255, 149, 0, 0.15)",e.currentTarget.style.borderColor="rgba(255, 149, 0, 0.5)"},children:[(0,je.jsx)("div",{style:{color:"#FFB84D",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},children:"Expected Calorie Burn"}),(0,je.jsxs)("div",{style:{color:"white",fontSize:"1.5rem",fontWeight:"800",lineHeight:"1.2",textShadow:"0 2px 8px rgba(255, 149, 0, 0.4)"},children:[e.range," cal"]}),(0,je.jsx)("div",{style:{color:"#FFB84D",fontSize:"0.75rem",marginTop:"6px",fontWeight:"500"},children:"Based on RunEQ equivalency"})]}):null})()]}),(null===R||void 0===R?void 0:R.completed)&&y&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(0, 255, 136, 0.15) 0%, rgba(0, 212, 255, 0.12) 50%, rgba(255, 255, 255, 0.05) 100%)",border:"2px solid rgba(0, 255, 136, 0.4)",borderRadius:"20px",padding:"24px",marginBottom:"24px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 255, 136, 0.2), 0 0 25px rgba(0, 255, 136, 0.15)",transition:"all 0.3s ease"},children:[(0,je.jsx)("h2",{style:{margin:"0 0 20px 0",color:"white",fontSize:"1.8rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"12px"},children:y.autoCompletedFromStrava?"Synced from Strava":"Workout Completed"}),(0,je.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"16px",marginBottom:y.notes||y.stravaActivityUrl?"20px":"0"},children:[y.distance&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(0, 212, 255, 0.05) 100%)",padding:"16px",borderRadius:"12px",border:"2px solid rgba(0, 212, 255, 0.5)",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 212, 255, 0.4), 0 0 25px rgba(0, 212, 255, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)"},children:[(0,je.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Distance"}),(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:y.distance}),(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"miles"})]})]}),y.duration&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(0, 212, 255, 0.05) 100%)",padding:"16px",borderRadius:"12px",border:"2px solid rgba(0, 212, 255, 0.5)",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 212, 255, 0.4), 0 0 25px rgba(0, 212, 255, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)"},children:[(0,je.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Duration"}),(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:y.duration}),(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"minutes"})]})]}),y.pace&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(0, 212, 255, 0.05) 100%)",padding:"16px",borderRadius:"12px",border:"2px solid rgba(0, 212, 255, 0.5)",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 212, 255, 0.4), 0 0 25px rgba(0, 212, 255, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)"},children:[(0,je.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Pace"}),(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:y.pace.replace("/mi","")}),(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"per mile"})]})]}),y.avgHeartRate&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(0, 212, 255, 0.05) 100%)",padding:"16px",borderRadius:"12px",border:"2px solid rgba(0, 212, 255, 0.5)",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 212, 255, 0.4), 0 0 25px rgba(0, 212, 255, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)"},children:[(0,je.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Avg Heart Rate"}),(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:y.avgHeartRate}),(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"bpm"})]})]}),y.maxHeartRate&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(0, 212, 255, 0.05) 100%)",padding:"16px",borderRadius:"12px",border:"2px solid rgba(0, 212, 255, 0.5)",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 212, 255, 0.4), 0 0 25px rgba(0, 212, 255, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)"},children:[(0,je.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Max Heart Rate"}),(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:y.maxHeartRate}),(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"bpm"})]})]}),y.cadence&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(0, 212, 255, 0.05) 100%)",padding:"16px",borderRadius:"12px",border:"2px solid rgba(0, 212, 255, 0.5)",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 212, 255, 0.4), 0 0 25px rgba(0, 212, 255, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)"},children:[(0,je.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Cadence"}),(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:Math.round(y.cadence)}),(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"steps/min"})]})]}),y.elevationGain&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(0, 212, 255, 0.05) 100%)",padding:"16px",borderRadius:"12px",border:"2px solid rgba(0, 212, 255, 0.5)",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 212, 255, 0.4), 0 0 25px rgba(0, 212, 255, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 16px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.15)"},children:[(0,je.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Elevation Gain"}),(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:y.elevationGain}),(0,je.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"feet"})]})]})]}),y.notes&&(0,je.jsxs)("div",{style:{background:"#0a0a0a",padding:"16px",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.05)",marginBottom:y.stravaActivityUrl?"16px":"0"},children:[(0,je.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Notes"}),(0,je.jsx)("div",{style:{color:"#DDD",fontSize:"1rem",lineHeight:"1.6"},children:y.notes})]}),y.stravaActivityUrl&&(0,je.jsx)("div",{style:{display:"flex",justifyContent:"center",paddingTop:"8px"},children:(0,je.jsxs)("a",{href:y.stravaActivityUrl,target:"_blank",rel:"noopener noreferrer",style:{background:"#FC4C02",color:"white",padding:"12px 24px",borderRadius:"12px",fontSize:"1rem",fontWeight:"700",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(252, 76, 2, 0.4)",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 6px 16px rgba(252, 76, 2, 0.6)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 12px rgba(252, 76, 2, 0.4)"},children:[(0,je.jsx)("span",{style:{fontSize:"1.2rem"},children:"\ud83d\udd17"}),"View Full Activity on Strava"]})}),y.laps&&y.laps.length>0&&(0,je.jsx)("div",{style:{display:"flex",justifyContent:"center",paddingTop:"16px",marginTop:"16px",borderTop:"1px solid rgba(255, 255, 255, 0.05)"},children:(0,je.jsxs)("button",{onClick:async()=>{if(!y)return void console.warn("No workout data available for analysis");const e=prompt("Enter your Anthropic API key (local dev only):");if(e){k(!0),E(null);try{var t;oy.initialize(e);let r="Run";y.laps&&y.laps.length>0&&y.laps[0].pace||y.pace&&y.pace.includes("/mi")?r="Run":y.laps&&y.laps.length>0&&!y.laps[0].pace&&(r="Ride");const i={type:r,distance:y.distance,duration:y.duration,pace:y.pace,elevationGain:y.elevationGain,avgHeartRate:y.avgHeartRate,maxHeartRate:y.maxHeartRate,laps:y.laps,standUpBikeType:"Ride"===r?null===C||void 0===C?void 0:C.standUpBikeType:null};console.log("\ud83d\udd0d AI Coach Debug:",{actualWorkoutType:r,stravaUrl:y.stravaActivityUrl,standUpBikeType:i.standUpBikeType,fullData:i});let o=null;if(l&&T){const e=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],t=e.indexOf(d.toLowerCase()),r=[];for(let i=t+1;i<Math.min(t+4,e.length);i++){var n;const t=e[i],o=null===(n=T.workouts)||void 0===n?void 0:n[t];if(o&&o.name){const e=t.charAt(0).toUpperCase()+t.slice(1);r.push("".concat(e,": ").concat(o.name))}}r.length>0&&(o=r.join(", "))}const a={prescribedWorkout:M.name?"".concat(M.name,": ").concat(M.description):null,trainingContext:l?"Week ".concat(A," of ").concat((null===(t=l.weeks)||void 0===t?void 0:t.length)||"N/A"," week training plan for ").concat(l.goalRace||"race"):null,upcomingWorkouts:o},s=await oy.analyzeWorkout(i,a);w(s)}catch(r){console.error("Error getting coaching analysis:",r),E(r.message||"Failed to get coaching analysis")}finally{k(!1)}}},disabled:D,style:{background:D?"#1a1a1a":"linear-gradient(135deg, #00D4FF 0%, #0099CC 100%)",color:"white",padding:"14px 28px",borderRadius:"12px",fontSize:"1.05rem",fontWeight:"700",border:"none",cursor:D?"not-allowed":"pointer",display:"inline-flex",alignItems:"center",gap:"10px",boxShadow:D?"none":"0 4px 12px rgba(0, 212, 255, 0.4)",transition:"all 0.2s",opacity:D?.6:1},onMouseEnter:e=>{D||(e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 6px 16px rgba(0, 212, 255, 0.6)")},onMouseLeave:e=>{D||(e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 12px rgba(0, 212, 255, 0.4)")},children:[(0,je.jsx)("span",{style:{fontSize:"1.3rem"},children:D?"\u23f3":"\ud83e\udd16"}),D?"Analyzing Workout...":"Get Coaching"]})}),b&&(0,je.jsxs)("div",{style:{marginTop:"20px",background:"linear-gradient(135deg, #1a2a3a 0%, #0f1f2f 100%)",padding:"24px",borderRadius:"16px",border:"2px solid #00D4FF"},children:[(0,je.jsxs)("h4",{style:{margin:"0 0 16px 0",color:"#00D4FF",fontSize:"1.4rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"10px"},children:[(0,je.jsx)("span",{style:{fontSize:"1.5rem"},children:"\ud83d\udca1"}),"Workout Insights"]}),(0,je.jsx)("div",{className:"workout-coaching-text",style:{color:"#DDD",fontSize:"1.05rem",lineHeight:"1.8",whiteSpace:"pre-line"},children:b})]}),x&&(0,je.jsx)("div",{style:{marginTop:"20px",background:"#2a1a1a",padding:"20px",borderRadius:"12px",border:"1px solid #e53e3e"},children:(0,je.jsxs)("div",{style:{color:"#e53e3e",fontSize:"1rem",fontWeight:"600"},children:["Error getting coaching analysis: ",x]})})]}),(0,je.jsxs)("div",{className:"workout-detail-card workout-section",style:{background:"linear-gradient(135deg, ".concat(N(M.type),"15 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(N(M.type),"30"),borderRadius:"20px",padding:"24px",marginBottom:"24px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"15, 0 0 25px ").concat(N(M.type),"10"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h2",{style:{margin:"0 0 20px 0",color:"white",fontSize:"1.8rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"12px"},children:"Workout Structure"}),(0,je.jsx)("div",{className:"workout-structure-text",style:{background:"linear-gradient(135deg, ".concat(N(M.type),"08 0%, rgba(0, 0, 0, 0.3) 100%)"),padding:"20px",borderRadius:"16px",border:"2px solid ".concat(N(M.type),"20"),fontSize:"1.1rem",lineHeight:"2",color:"#ddd",fontWeight:"500",whiteSpace:"pre-line",boxShadow:"inset 0 2px 8px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"10, 0 0 15px ").concat(N(M.type),"08")},children:(e=>{if("string"===typeof e)return e;if(Array.isArray(e))return e.map((e,t)=>{if("object"===typeof e){const t=[];return e.duration&&t.push(e.duration),e.type&&t.push(e.type),e.intensity&&t.push("@ ".concat(e.intensity)),e.description&&t.push("(".concat(e.description,")")),e.activity&&t.push(e.activity),t.join(" ")}return e}).join(" \u2192 ");if("object"===typeof e){const t=[];return e.warmup&&t.push("**Warmup:** ".concat(e.warmup)),e.main&&t.push("**Main Set:** ".concat(e.main)),e.recovery&&t.push("**Recovery:** ".concat(e.recovery)),e.cooldown&&t.push("**Cooldown:** ".concat(e.cooldown)),e.repeat&&t.push("**Repeat:** ".concat(e.repeat)),e.effort&&t.push("**Effort:** ".concat(e.effort)),e.technique&&t.push("**Technique:** ".concat(e.technique)),e.style&&t.push("**Style:** ".concat(e.style)),e.approach&&t.push("**Approach:** ".concat(e.approach)),e.pattern&&t.push("**Pattern:** ".concat(e.pattern)),t.length>0?t.join("\n\n"):Object.entries(e).map(e=>{let[t,n]=e;return"".concat(t,": ").concat(n)}).join(", ")}return"Complete the workout as prescribed"})(M.structure)})]}),M.description&&(0,je.jsxs)("div",{className:"workout-detail-card workout-section",style:{background:"linear-gradient(135deg, ".concat(N(M.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(N(M.type),"25"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"10, 0 0 20px ").concat(N(M.type),"08"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 12px 0",color:"white",fontSize:"1.3rem",fontWeight:"700"},children:"About This Workout"}),(0,je.jsx)("p",{className:"workout-description-text",style:{fontSize:"1rem",margin:0,lineHeight:"1.7",color:"#ddd"},children:"string"===typeof M.description?M.description:"object"===typeof M.description?JSON.stringify(M.description):"Standard workout description"})]}),M.benefits&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(34, 197, 94, 0.2) 0%, rgba(34, 197, 94, 0.08) 50%, rgba(255, 255, 255, 0.05) 100%)",border:"2px solid rgba(34, 197, 94, 0.4)",borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(34, 197, 94, 0.2), 0 0 20px rgba(34, 197, 94, 0.15)",transition:"all 0.3s ease"},children:[(0,je.jsxs)("h3",{style:{margin:"0 0 12px 0",color:"#22c55e",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:[(0,je.jsx)("span",{children:"\ud83d\udcaa"})," Benefits"]}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:"string"===typeof M.benefits?M.benefits:Array.isArray(M.benefits)?M.benefits.join(", "):"object"===typeof M.benefits?JSON.stringify(M.benefits):"Training adaptation"})]}),M.technique&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(59, 130, 246, 0.08) 50%, rgba(255, 255, 255, 0.05) 100%)",border:"2px solid rgba(59, 130, 246, 0.5)",borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(59, 130, 246, 0.2), 0 0 20px rgba(59, 130, 246, 0.15)",transition:"all 0.3s ease"},children:[(0,je.jsxs)("h3",{style:{margin:"0 0 12px 0",color:"#3b82f6",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:[(0,je.jsx)("span",{children:"\ud83c\udfaf"})," Technique"]}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:"string"===typeof M.technique?M.technique:"object"===typeof M.technique?JSON.stringify(M.technique):"Maintain good form"})]}),M.effort&&"object"===typeof M.effort&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.2) 0%, rgba(239, 68, 68, 0.08) 50%, rgba(255, 255, 255, 0.05) 100%)",border:"2px solid rgba(239, 68, 68, 0.5)",borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(239, 68, 68, 0.2), 0 0 20px rgba(239, 68, 68, 0.15)",transition:"all 0.3s ease"},children:[(0,je.jsxs)("h3",{style:{margin:"0 0 16px 0",color:"#ef4444",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:[(0,je.jsx)("span",{children:"\u2764\ufe0f"})," Effort Guidelines"]}),(0,je.jsxs)("div",{style:{display:"grid",gap:"12px"},children:[M.effort.heartRate&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Heart Rate:"}),(0,je.jsx)("span",{style:{color:"#ddd",fontSize:"1rem"},children:M.effort.heartRate})]}),M.effort.perceived&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Perceived Effort:"}),(0,je.jsx)("span",{style:{color:"#ddd",fontSize:"1rem"},children:M.effort.perceived})]}),M.effort.cadence&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Cadence:"}),(0,je.jsx)("span",{style:{color:"#ddd",fontSize:"1rem"},children:M.effort.cadence})]}),M.effort.strokeRate&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Stroke Rate:"}),(0,je.jsx)("span",{style:{color:"#ddd",fontSize:"1rem"},children:M.effort.strokeRate})]}),M.effort.legTurnover&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Leg Turnover:"}),(0,je.jsx)("span",{style:{color:"#ddd",fontSize:"1rem"},children:M.effort.legTurnover})]})]})]}),M.settings&&"object"===typeof M.settings&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(168, 85, 247, 0.2) 0%, rgba(168, 85, 247, 0.08) 50%, rgba(255, 255, 255, 0.05) 100%)",border:"2px solid rgba(168, 85, 247, 0.5)",borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(168, 85, 247, 0.2), 0 0 20px rgba(168, 85, 247, 0.15)",transition:"all 0.3s ease"},children:[(0,je.jsxs)("h3",{style:{margin:"0 0 16px 0",color:"#a855f7",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:[(0,je.jsx)("span",{children:"\u2699\ufe0f"})," Equipment Settings"]}),(0,je.jsxs)("div",{style:{display:"grid",gap:"16px"},children:[M.settings.intervals&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#a855f7",fontSize:"1rem",display:"block",marginBottom:"8px"},children:"Intervals:"}),(0,je.jsxs)("div",{style:{paddingLeft:"12px",display:"grid",gap:"6px"},children:[M.settings.intervals.strokeRate&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("span",{style:{color:"#999"},children:"Stroke Rate:"})," ",M.settings.intervals.strokeRate," spm"]}),M.settings.intervals.pace&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("span",{style:{color:"#999"},children:"Pace:"})," ",M.settings.intervals.pace]}),M.settings.intervals.resistance&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("span",{style:{color:"#999"},children:"Resistance:"})," ",M.settings.intervals.resistance]}),M.settings.intervals.incline&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("span",{style:{color:"#999"},children:"Incline:"})," ",M.settings.intervals.incline]}),M.settings.intervals.cadence&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("span",{style:{color:"#999"},children:"Cadence:"})," ",M.settings.intervals.cadence]})]})]}),M.settings.recovery&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#a855f7",fontSize:"1rem",display:"block",marginBottom:"8px"},children:"Recovery:"}),(0,je.jsxs)("div",{style:{paddingLeft:"12px",display:"grid",gap:"6px"},children:[M.settings.recovery.strokeRate&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("span",{style:{color:"#999"},children:"Stroke Rate:"})," ",M.settings.recovery.strokeRate," spm"]}),M.settings.recovery.pace&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("span",{style:{color:"#999"},children:"Pace:"})," ",M.settings.recovery.pace]}),M.settings.recovery.resistance&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("span",{style:{color:"#999"},children:"Resistance:"})," ",M.settings.recovery.resistance]}),M.settings.recovery.incline&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("span",{style:{color:"#999"},children:"Incline:"})," ",M.settings.recovery.incline]}),M.settings.recovery.cadence&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("span",{style:{color:"#999"},children:"Cadence:"})," ",M.settings.recovery.cadence]})]})]}),M.settings.heartRate&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("strong",{style:{color:"#999"},children:"Heart Rate:"})," ",M.settings.heartRate]}),M.settings.power&&(0,je.jsxs)("div",{style:{color:"#ddd",fontSize:"0.95rem"},children:[(0,je.jsx)("strong",{style:{color:"#999"},children:"Power:"})," ",M.settings.power]})]})]}),M.coachingTips&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%)",border:"2px solid rgba(139, 92, 246, 0.3)",borderRadius:"16px",padding:"20px",marginBottom:"24px"},children:[(0,je.jsxs)("h3",{style:{margin:"0 0 12px 0",color:"#8b5cf6",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:[(0,je.jsx)("span",{children:"\ud83d\udca1"})," Coaching Tips"]}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:"string"===typeof M.coachingTips?M.coachingTips:"object"===typeof M.coachingTips?JSON.stringify(M.coachingTips):"Execute as prescribed"})]}),"hot_humid"===(null===s||void 0===s?void 0:s.climate)&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255, 149, 0, 0.15) 0%, rgba(255, 255, 255, 0.05) 100%)",border:"2px solid rgba(255, 149, 0, 0.4)",borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 149, 0, 0.2), 0 0 20px rgba(255, 149, 0, 0.15)",transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.5rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"10px"},children:"Climate Adjustments"}),(0,je.jsxs)("div",{style:{display:"grid",gap:"12px"},children:[(0,je.jsx)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Pace:"}),(0,je.jsx)("span",{style:{color:"#ddd"},children:"Add 30-60 seconds per mile in high humidity"})]})}),(0,je.jsx)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Hydration:"}),(0,je.jsx)("span",{style:{color:"#ddd"},children:"Drink before feeling thirsty"})]})}),(0,je.jsx)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Timing:"}),(0,je.jsx)("span",{style:{color:"#ddd"},children:"Early morning (before 7am) or late evening recommended"})]})}),(0,je.jsx)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Effort:"}),(0,je.jsx)("span",{style:{color:"#ddd"},children:"Focus on effort level rather than exact pace"})]})})]})]}),(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(N(M.type),"10 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(N(M.type),"25"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"10, 0 0 20px ").concat(N(M.type),"08"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.5rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"10px"},children:"Safety & Execution Notes"}),(0,je.jsx)("div",{style:{display:"grid",gap:"12px"},children:(Array.isArray(M.safetyNotes)?M.safetyNotes:["Listen to your body and adjust as needed","Stay hydrated throughout the workout","Stop if you feel pain or excessive fatigue"]).map((e,t)=>(0,je.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"8px 0"},children:[(0,je.jsx)("span",{className:"workout-safety-bullet",style:{color:"#666",fontSize:"1.5rem",minWidth:"24px"},children:"\u2022"}),(0,je.jsx)("span",{className:"workout-body-text",style:{fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:"string"===typeof e?e:JSON.stringify(e)})]},t))})]}),M.hillRequirement&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(N(M.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(N(M.type),"35"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"15, 0 0 20px ").concat(N(M.type),"12"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.5rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"10px"},children:"Hill Requirements"}),(0,je.jsxs)("div",{style:{display:"grid",gap:"12px"},children:[M.hillRequirement.description&&(0,je.jsxs)("div",{children:[(0,je.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"8px",fontSize:"1.1rem"},children:"Description:"}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:M.hillRequirement.description})]}),M.hillRequirement.grade&&(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("strong",{style:{color:"#999",fontSize:"1.1rem"},children:"Grade:"}),(0,je.jsx)("span",{style:{fontSize:"1rem",color:"#ddd"},children:M.hillRequirement.grade})]}),M.hillRequirement.distance&&(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,je.jsx)("strong",{style:{color:"#999",fontSize:"1.1rem"},children:"Distance:"}),(0,je.jsx)("span",{style:{fontSize:"1rem",color:"#ddd"},children:M.hillRequirement.distance})]})]})]}),M.terrainInstructions&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(N(M.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(N(M.type),"35"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"15, 0 0 20px ").concat(N(M.type),"12"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 12px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:"Terrain Instructions"}),"string"===typeof M.terrainInstructions?(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:M.terrainInstructions}):"object"===typeof M.terrainInstructions?(0,je.jsx)("div",{style:{display:"grid",gap:"16px"},children:Object.entries(M.terrainInstructions).map(e=>{let[t,n]=e;return(0,je.jsxs)("div",{children:[(0,je.jsxs)("strong",{style:{color:"#999",textTransform:"capitalize",display:"block",marginBottom:"6px",fontSize:"1.1rem"},children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),"string"===typeof n?(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:n}):Array.isArray(n)?(0,je.jsx)("div",{style:{paddingLeft:"12px"},children:n.map((e,t)=>(0,je.jsxs)("p",{style:{margin:"4px 0",fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:["\u2022 ",e]},t))}):(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:JSON.stringify(n)})]},t)})}):null]}),M.progression&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(N(M.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(N(M.type),"35"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"15, 0 0 20px ").concat(N(M.type),"12"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:"Progression"}),"string"===typeof M.progression?(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:M.progression}):"object"===typeof M.progression?(0,je.jsx)("div",{style:{display:"grid",gap:"16px"},children:Object.entries(M.progression).map(e=>{let[t,n]=e;return(0,je.jsxs)("div",{children:[(0,je.jsxs)("strong",{style:{color:"#999",textTransform:"capitalize",display:"block",marginBottom:"6px",fontSize:"1.1rem"},children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:n})]},t)})}):null]}),M.variations&&Array.isArray(M.variations)&&M.variations.length>0&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(N(M.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(N(M.type),"35"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"15, 0 0 20px ").concat(N(M.type),"12"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:"Variations"}),(0,je.jsx)("div",{style:{display:"grid",gap:"12px"},children:M.variations.map((e,t)=>(0,je.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"8px 0"},children:[(0,je.jsx)("span",{style:{color:"#666",fontSize:"1.5rem",minWidth:"24px"},children:"\u2022"}),(0,je.jsx)("span",{style:{fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:e})]},t))})]}),M.examples&&Array.isArray(M.examples)&&M.examples.length>0&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(N(M.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(N(M.type),"35"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"15, 0 0 20px ").concat(N(M.type),"12"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:"Examples"}),(0,je.jsx)("div",{style:{display:"grid",gap:"12px"},children:M.examples.map((e,t)=>(0,je.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"8px 0"},children:[(0,je.jsx)("span",{style:{color:"#666",fontSize:"1.5rem",minWidth:"24px"},children:"\u2022"}),(0,je.jsx)("span",{style:{fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:e})]},t))})]}),M.trackIntervals&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(N(M.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(N(M.type),"35"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"15, 0 0 20px ").concat(N(M.type),"12"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:"Track Intervals"}),"string"===typeof M.trackIntervals?(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:M.trackIntervals}):"object"===typeof M.trackIntervals?(0,je.jsx)("div",{style:{display:"grid",gap:"16px"},children:Object.entries(M.trackIntervals).map(e=>{let[t,n]=e;return(0,je.jsxs)("div",{children:[(0,je.jsxs)("strong",{style:{color:"#999",textTransform:"capitalize",display:"block",marginBottom:"6px",fontSize:"1.1rem"},children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),"object"===typeof n?(0,je.jsx)("div",{style:{paddingLeft:"12px"},children:Object.entries(n).map(e=>{let[t,n]=e;return(0,je.jsxs)("p",{style:{margin:"4px 0",fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:[(0,je.jsxs)("strong",{style:{color:"#999"},children:[t,":"]})," ","string"===typeof n?n:JSON.stringify(n)]},t)})}):(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:"string"===typeof n?n:JSON.stringify(n)})]},t)})}):null]}),M.fueling&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(N(M.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(N(M.type),"35"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"15, 0 0 20px ").concat(N(M.type),"12"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:"Fueling"}),"string"===typeof M.fueling?(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:M.fueling}):"object"===typeof M.fueling?(0,je.jsx)("div",{style:{display:"grid",gap:"16px"},children:Object.entries(M.fueling).map(e=>{let[t,n]=e;return(0,je.jsxs)("div",{children:[(0,je.jsxs)("strong",{style:{color:"#999",textTransform:"capitalize",display:"block",marginBottom:"6px",fontSize:"1.1rem"},children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:n})]},t)})}):null]}),M.runEqOptions&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(N(M.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(N(M.type),"40"),borderRadius:"20px",padding:"24px",marginBottom:"24px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"20, 0 0 25px ").concat(N(M.type),"15"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 20px 0",color:"white",fontSize:"1.6rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"12px"},children:"RunEQ Options - 4 Ways to Complete This Workout"}),(0,je.jsxs)("div",{style:{display:"grid",gap:"16px"},children:[M.runEqOptions.optionA&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(N(M.type),"08 0%, rgba(0, 0, 0, 0.3) 100%)"),padding:"16px",borderRadius:"12px",border:"2px solid ".concat(N(M.type),"25"),boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2), 0 0 0 1px ".concat(N(M.type),"10, 0 0 10px ").concat(N(M.type),"08")},children:[(0,je.jsx)("strong",{style:{color:"#999",fontSize:"1.1rem",display:"block",marginBottom:"8px"},children:"Option A:"}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:M.runEqOptions.optionA})]}),M.runEqOptions.optionB&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(N(M.type),"08 0%, rgba(0, 0, 0, 0.3) 100%)"),padding:"16px",borderRadius:"12px",border:"2px solid ".concat(N(M.type),"25"),boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2), 0 0 0 1px ".concat(N(M.type),"10, 0 0 10px ").concat(N(M.type),"08")},children:[(0,je.jsx)("strong",{style:{color:"#999",fontSize:"1.1rem",display:"block",marginBottom:"8px"},children:"Option B:"}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:M.runEqOptions.optionB})]}),M.runEqOptions.optionC&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(N(M.type),"08 0%, rgba(0, 0, 0, 0.3) 100%)"),padding:"16px",borderRadius:"12px",border:"2px solid ".concat(N(M.type),"25"),boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2), 0 0 0 1px ".concat(N(M.type),"10, 0 0 10px ").concat(N(M.type),"08")},children:[(0,je.jsx)("strong",{style:{color:"#999",fontSize:"1.1rem",display:"block",marginBottom:"8px"},children:"Option C:"}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:M.runEqOptions.optionC})]}),M.runEqOptions.optionD&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(N(M.type),"08 0%, rgba(0, 0, 0, 0.3) 100%)"),padding:"16px",borderRadius:"12px",border:"2px solid ".concat(N(M.type),"25"),boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2), 0 0 0 1px ".concat(N(M.type),"10, 0 0 10px ").concat(N(M.type),"08")},children:[(0,je.jsx)("strong",{style:{color:"#999",fontSize:"1.1rem",display:"block",marginBottom:"8px"},children:"Option D:"}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:M.runEqOptions.optionD})]}),M.runEqOptions.recommendation&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(N(M.type),"20 0%, ").concat(N(M.type),"10 100%)"),padding:"16px",borderRadius:"12px",border:"2px solid ".concat(N(M.type),"50"),boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"30, 0 0 15px ").concat(N(M.type),"20")},children:[(0,je.jsx)("strong",{style:{color:"white",fontSize:"1.2rem",display:"block",marginBottom:"8px"},children:"Recommended for you:"}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1.05rem",lineHeight:"1.6",color:"white",fontWeight:"500"},children:M.runEqOptions.recommendation})]})]})]}),M.coachingGuidance&&(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(N(M.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(N(M.type),"35"),borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"15, 0 0 20px ").concat(N(M.type),"12"),transition:"all 0.3s ease"},children:[(0,je.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.5rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"10px"},children:"Coaching Guidance"}),"string"===typeof M.coachingGuidance?(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:M.coachingGuidance}):"object"===typeof M.coachingGuidance?(0,je.jsx)("div",{style:{display:"grid",gap:"16px"},children:Object.entries(M.coachingGuidance).map(e=>{let[t,n]=e;return(0,je.jsxs)("div",{children:[(0,je.jsxs)("strong",{style:{color:"#999",textTransform:"capitalize",display:"block",marginBottom:"6px",fontSize:"1.1rem"},children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),(0,je.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:n})]},t)})}):null]}),(0,je.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(N(M.type),"12 0%, rgba(255, 255, 255, 0.05) 100%)"),border:"2px solid ".concat(N(M.type),"30"),borderRadius:"20px",padding:"24px",marginBottom:"24px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3), 0 0 0 1px ".concat(N(M.type),"15, 0 0 25px ").concat(N(M.type),"10"),transition:"all 0.3s ease"},children:[(0,je.jsxs)("button",{onClick:()=>{const e={day:d.charAt(0).toUpperCase()+d.slice(1),type:M.type,workout:{name:M.name,description:M.description},focus:M.focus,equipmentSpecific:M.equipmentSpecific};m({isOpen:!0,workout:e})},className:"workout-button",style:{width:"100%",background:"linear-gradient(135deg, #8b5cf6 0%, #ec4899 50%, #f59e0b 100%)",border:"2px solid rgba(255, 255, 255, 0.3)",color:"white",fontSize:"1.2rem",fontWeight:"700",padding:"18px 24px",borderRadius:"16px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",boxShadow:"0 6px 20px rgba(139, 92, 246, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1), 0 0 30px rgba(236, 72, 153, 0.3)",textShadow:"0 2px 8px rgba(0, 0, 0, 0.4)",position:"relative",overflow:"hidden"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, #a78bfa 0%, #f472b6 50%, #fbbf24 100%)",e.currentTarget.style.borderColor="rgba(255, 255, 255, 0.5)",e.currentTarget.style.transform="translateY(-3px) scale(1.02)",e.currentTarget.style.boxShadow="0 12px 32px rgba(139, 92, 246, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.2), 0 0 40px rgba(236, 72, 153, 0.5)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, #8b5cf6 0%, #ec4899 50%, #f59e0b 100%)",e.currentTarget.style.borderColor="rgba(255, 255, 255, 0.3)",e.currentTarget.style.transform="translateY(0) scale(1)",e.currentTarget.style.boxShadow="0 6px 20px rgba(139, 92, 246, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1), 0 0 30px rgba(236, 72, 153, 0.3)"},children:[(0,je.jsx)("span",{style:{fontSize:"1.3rem"},children:"\u2728"}),"Something Else (Show Alternatives)"]}),(0,je.jsx)("div",{style:{marginTop:"20px",textAlign:"center",padding:"16px",background:"#0a0a0a",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.05)"},children:(0,je.jsxs)("p",{style:{margin:0,fontSize:"0.95rem",color:"#666",lineHeight:"1.6"},children:[(0,je.jsx)("strong",{style:{color:"#999"},children:"Need something different?"}),(0,je.jsx)("br",{}),"Click above for all alternatives including contextual adaptations (too hot, too tired, time constraints, etc.)"]})})]})]}),(0,je.jsx)(Xh,{isOpen:p.isOpen,onClose:j,currentWorkout:p.workout,userProfile:s,trainingPlan:l,onWorkoutSelect:async e=>{const t=(0,u.A)((0,u.A)({},P),{},{workout:(0,u.A)({},e.workout),name:e.workout.name,description:e.workout.description,type:e.type,focus:e.focus,equipmentSpecific:e.equipmentSpecific,replacementReason:e.replacementReason});g(t);const n="".concat(A,"-").concat(d),r={day:d.charAt(0).toUpperCase()+d.slice(1),workout:(0,u.A)({},e.workout),focus:e.focus,type:e.type,equipmentSpecific:e.equipmentSpecific,replacementReason:e.replacementReason},i=JSON.parse(localStorage.getItem("runeq_modifiedWorkouts")||"{}");i[n]=r,localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(i)),console.log("\ud83d\udcbe WorkoutDetail saved to localStorage:",n,e.workout.name),Ie.j2.currentUser&&(await Me.saveModifiedWorkout(Ie.j2.currentUser.uid,A,d,r),console.log("\u2705 SAVED to Firestore:",e.workout.name,"for",d)),j()}})]});var B,O};const hy=function(){var e;const[t,n]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[o,s]=(0,a.useState)(""),l=re(),c=null===(e=Ie.j2.currentUser)||void 0===e?void 0:e.email,d=["herrenbrad@gmail.com"].includes(c);(0,a.useEffect)(()=>{h()},[]);const h=async()=>{try{i(!0);const e=(0,_e.rJ)(Ie.db,"users"),t=(0,_e.P)(e,(0,_e._M)("approvalStatus","==","pending")),r=await(0,_e.GG)(t),o=[];r.forEach(e=>{o.push((0,u.A)({id:e.id},e.data()))}),o.sort((e,t)=>{var n,r;const i=(null===(n=e.createdAt)||void 0===n?void 0:n.toMillis())||0;return((null===(r=t.createdAt)||void 0===r?void 0:r.toMillis())||0)-i}),n(o),i(!1)}catch(e){console.error("Error loading pending users:",e),s("Error loading pending users: "+e.message),i(!1)}};return d?(0,je.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"20px"},children:(0,je.jsxs)("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[(0,je.jsxs)("div",{children:[(0,je.jsx)("h1",{style:{color:"#00D4FF",margin:"0 0 8px 0"},children:"Admin: User Approvals"}),(0,je.jsx)("p",{style:{color:"#AAAAAA",margin:0},children:"Approve or deny pending user accounts"})]}),(0,je.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,je.jsx)("button",{onClick:h,disabled:r,style:{padding:"10px 20px",background:"rgba(0, 212, 255, 0.2)",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:"6px",color:"#00D4FF",cursor:r?"not-allowed":"pointer",fontSize:"0.9rem"},children:r?"Loading...":"\ud83d\udd04 Refresh"}),(0,je.jsx)("button",{onClick:()=>l("/"),style:{padding:"10px 20px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"#FFFFFF",cursor:"pointer",fontSize:"0.9rem"},children:"Back to Dashboard"})]})]}),o&&(0,je.jsx)("div",{style:{background:"rgba(229, 62, 62, 0.1)",border:"1px solid rgba(229, 62, 62, 0.3)",borderRadius:"8px",padding:"16px",color:"#FC8181",marginBottom:"20px"},children:o}),(0,je.jsx)("div",{children:r?(0,je.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#AAAAAA"},children:"Loading pending users..."}):0===t.length?(0,je.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"40px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,je.jsx)("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:"\u2705"}),(0,je.jsx)("h2",{style:{color:"#00D4FF",marginBottom:"8px"},children:"All Caught Up!"}),(0,je.jsx)("p",{style:{color:"#AAAAAA",margin:0},children:"No pending user approvals at this time."})]}):(0,je.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:t.map(e=>(0,je.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"24px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[(0,je.jsxs)("div",{style:{flex:1,minWidth:"250px"},children:[(0,je.jsx)("div",{style:{fontSize:"1.2rem",color:"#FFFFFF",marginBottom:"8px",fontWeight:"bold"},children:e.displayName||"No name provided"}),(0,je.jsx)("div",{style:{color:"#00D4FF",marginBottom:"8px",fontSize:"0.95rem"},children:e.email}),(0,je.jsxs)("div",{style:{color:"#AAAAAA",fontSize:"0.85rem"},children:["Signed up: ",e.createdAt?new Date(e.createdAt.toMillis()).toLocaleString():"Unknown"]})]}),(0,je.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,je.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm("Approve ".concat(t,"?")))try{const n=(0,_e.doc)(Ie.db,"users",e);await(0,_e.updateDoc)(n,{approvalStatus:"approved",approvedAt:(0,_e.serverTimestamp)(),approvedBy:c}),console.log("\u2705 Approved user: ".concat(t)),await h()}catch(n){console.error("Error approving user:",n),console.error("Error approving user: "+n.message)}})(e.id,e.email),style:{padding:"10px 24px",background:"#00FF88",border:"none",borderRadius:"6px",color:"#000000",cursor:"pointer",fontSize:"0.95rem",fontWeight:"bold"},children:"\u2705 Approve"}),(0,je.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm("Deny ".concat(t,"? They will need to create a new account.")))try{const n=(0,_e.doc)(Ie.db,"users",e);await(0,_e.updateDoc)(n,{approvalStatus:"denied",deniedAt:(0,_e.serverTimestamp)(),deniedBy:c}),console.log("\u274c Denied user: ".concat(t)),await h()}catch(n){console.error("Error denying user:",n),console.error("Error denying user: "+n.message)}})(e.id,e.email),style:{padding:"10px 24px",background:"rgba(255, 107, 107, 0.2)",border:"1px solid rgba(255, 107, 107, 0.3)",borderRadius:"6px",color:"#FF6B6B",cursor:"pointer",fontSize:"0.95rem",fontWeight:"bold"},children:"\u274c Deny"})]})]})},e.id))})})]})}):(0,je.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"20px"},children:(0,je.jsxs)("div",{style:{maxWidth:"500px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"40px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,je.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:"\ud83d\udd12"}),(0,je.jsx)("h1",{style:{color:"#FF6B6B",marginBottom:"16px"},children:"Access Denied"}),(0,je.jsx)("p",{style:{color:"#AAAAAA",fontSize:"1.1rem",marginBottom:"24px"},children:"You do not have permission to access this page."}),(0,je.jsx)("button",{onClick:()=>l("/"),style:{padding:"12px 24px",background:"#00D4FF",border:"none",borderRadius:"6px",color:"#000000",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:"Go to Dashboard"})]})})};const py=function(){const[e]=Fe(),t=re(),[r,i]=(0,a.useState)("processing"),[o,s]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{const r=e.get("error");if(r)return s("Strava authorization failed: ".concat(r)),void i("error");const o=e.get("code");if(!o)return s("No authorization code received from Strava"),void i("error");if(!Ie.j2.currentUser)return s("You must be logged in to connect Strava"),void i("error");i("exchanging");const a=await ap.exchangeToken(o);i("saving");const{updateDoc:l,doc:u}=await Promise.resolve().then(n.bind(n,667)),{db:c}=await Promise.resolve().then(n.bind(n,121)),d=u(c,"users",Ie.j2.currentUser.uid);await l(d,{stravaConnected:!0,stravaAccessToken:a.access_token,stravaRefreshToken:a.refresh_token,stravaTokenExpiresAt:a.expires_at,stravaAthleteId:a.athlete.id,stravaAthleteName:"".concat(a.athlete.firstname," ").concat(a.athlete.lastname),stravaConnectedAt:(new Date).toISOString()}),console.log("\u2705 Strava connected successfully:",a.athlete),i("success"),setTimeout(()=>{t("/dashboard")},2e3)}catch(r){console.error("\u274c Strava callback error:",r),s(r.message||"Failed to connect Strava"),i("error")}})()},[e,t]),(0,je.jsxs)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"20px"},children:[(0,je.jsxs)("div",{style:{maxWidth:"500px",width:"100%",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",padding:"40px",textAlign:"center"},children:["processing"===r&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px",animation:"spin 2s linear infinite"},children:"\u23f3"}),(0,je.jsx)("h1",{style:{color:"white",marginBottom:"10px"},children:"Processing..."}),(0,je.jsx)("p",{style:{color:"#aaa"},children:"Connecting your Strava account"})]}),"exchanging"===r&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px",animation:"pulse 1.5s ease-in-out infinite"},children:"\ud83d\udd04"}),(0,je.jsx)("h1",{style:{color:"white",marginBottom:"10px"},children:"Exchanging Tokens..."}),(0,je.jsx)("p",{style:{color:"#aaa"},children:"Getting your Strava authorization"})]}),"saving"===r&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px",animation:"bounce 1s ease-in-out infinite"},children:"\ud83d\udcbe"}),(0,je.jsx)("h1",{style:{color:"white",marginBottom:"10px"},children:"Saving Connection..."}),(0,je.jsx)("p",{style:{color:"#aaa"},children:"Almost done!"})]}),"success"===r&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:"\u2705"}),(0,je.jsx)("h1",{style:{color:"#00FF88",marginBottom:"10px"},children:"Strava Connected!"}),(0,je.jsx)("p",{style:{color:"#aaa",marginBottom:"20px"},children:"Your workouts will now sync automatically"}),(0,je.jsx)("p",{style:{color:"#666",fontSize:"0.9rem"},children:"Redirecting to dashboard..."})]}),"error"===r&&(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:"\u274c"}),(0,je.jsx)("h1",{style:{color:"#ff4444",marginBottom:"10px"},children:"Connection Failed"}),(0,je.jsx)("p",{style:{color:"#aaa",marginBottom:"20px"},children:o}),(0,je.jsx)("button",{onClick:()=>t("/dashboard"),style:{background:"rgba(255, 255, 255, 0.1)",color:"white",border:"1px solid rgba(255, 255, 255, 0.2)",padding:"12px 24px",borderRadius:"10px",cursor:"pointer",fontSize:"1rem",fontWeight:"600"},children:"Return to Dashboard"})]})]}),(0,je.jsx)("style",{children:"\n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n        @keyframes pulse {\n          0%, 100% { opacity: 1; transform: scale(1); }\n          50% { opacity: 0.7; transform: scale(1.1); }\n        }\n        @keyframes bounce {\n          0%, 100% { transform: translateY(0); }\n          50% { transform: translateY(-10px); }\n        }\n      "})]})};class my extends a.Component{constructor(e){super(e),this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){Ne.error("\u274c Error Boundary caught an error:",e),Ne.error("Error Info:",t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?(0,je.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"20px",color:"#ffffff"},children:(0,je.jsxs)("div",{style:{maxWidth:"600px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"40px",border:"1px solid rgba(255, 255, 255, 0.1)",textAlign:"center"},children:[(0,je.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:"\u26a0\ufe0f"}),(0,je.jsx)("h1",{style:{color:"#00D4FF",marginBottom:"16px"},children:"Something went wrong"}),(0,je.jsx)("p",{style:{color:"#AAAAAA",fontSize:"1.1rem",lineHeight:"1.6",marginBottom:"24px"},children:"We're sorry, but something unexpected happened. Our team has been notified."}),!1,(0,je.jsxs)("div",{style:{marginTop:"32px",display:"flex",gap:"12px",justifyContent:"center"},children:[(0,je.jsx)("button",{onClick:this.handleReset,style:{padding:"12px 24px",background:"rgba(0, 212, 255, 0.2)",border:"1px solid rgba(0, 212, 255, 0.5)",borderRadius:"6px",color:"#00D4FF",cursor:"pointer",fontSize:"1rem",transition:"all 0.2s"},onMouseOver:e=>{e.target.style.background="rgba(0, 212, 255, 0.3)"},onMouseOut:e=>{e.target.style.background="rgba(0, 212, 255, 0.2)"},children:"Reload App"}),(0,je.jsx)("button",{onClick:()=>window.location.href="/",style:{padding:"12px 24px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"#FFFFFF",cursor:"pointer",fontSize:"1rem",transition:"all 0.2s"},onMouseOver:e=>{e.target.style.background="rgba(255, 255, 255, 0.15)"},onMouseOut:e=>{e.target.style.background="rgba(255, 255, 255, 0.1)"},children:"Go Home"})]})]})}):this.props.children}}const fy=my;function gy(){const{pathname:e}=te();return(0,a.useEffect)(()=>{window.scrollTo(0,0)},[e]),null}function yy(){const e=al(),t="v2.0-approval-fix-"+(new Date).toISOString();Ne.log("\ud83d\ude80 APP VERSION:",t),Ne.log("\ud83d\udcc5 Build timestamp:",(new Date).toISOString());const[n,r]=(0,a.useState)(null),[i,o]=(0,a.useState)(null),[s,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[h,p]=(0,a.useState)(!0);(0,a.useEffect)(()=>{const e=(0,Re.hg)(Ie.j2,e=>{if(Ne.log("\ud83d\udd10 Auth state changed:",e?"Logged in":"Logged out"),e)r(e),Ne.log("\u2705 User authenticated, real-time listener will load data");else{r(null),o(null),l(null),d(null);const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&n.startsWith("runeq_")&&e.push(n)}e.forEach(e=>localStorage.removeItem(e)),p(!1)}});return()=>e()},[]),(0,a.useEffect)(()=>{if(!n)return;Ne.log("\ud83d\udc42 Setting up real-time listener for user:",n.uid);const t=(0,_e.doc)(Ie.db,"users",n.uid),r=(0,_e.aQ)(t,n=>{if(Ne.log("\ud83d\udd04 Snapshot received:",{exists:n.exists()}),n.exists()){const r=n.data();Ne.log("\ud83d\udce6 User document data:",{hasProfile:!!r.profile,hasTrainingPlan:!!r.trainingPlan,hasEmail:!!r.email,approvalStatus:r.approvalStatus,allKeys:Object.keys(r)});const a=(0,u.A)((0,u.A)({},r.profile),{},{email:r.email,displayName:r.displayName,approvalStatus:r.approvalStatus,createdAt:r.createdAt,approvedAt:r.approvedAt,approvedBy:r.approvedBy,stravaConnected:r.stravaConnected,stravaAccessToken:r.stravaAccessToken,stravaRefreshToken:r.stravaRefreshToken,stravaTokenExpiresAt:r.stravaTokenExpiresAt,stravaAthleteId:r.stravaAthleteId,stravaAthleteName:r.stravaAthleteName,stravaConnectedAt:r.stravaConnectedAt,stravaLastSync:r.stravaLastSync});a.approvalStatus||(Ne.log("\ud83d\udd04 [Realtime] Migrating existing user without approvalStatus - auto-approving"),a.approvalStatus="approved",(0,_e.updateDoc)(t,{approvalStatus:"approved",approvedAt:new Date,approvedBy:"auto-migration-all-existing-users"}).catch(e=>console.error("Failed to migrate user:",e))),Ne.log("\u2705 Setting userProfile with approvalStatus:",a.approvalStatus),"pending"===(null===i||void 0===i?void 0:i.approvalStatus)&&"approved"===a.approvalStatus&&(Ne.log("\ud83c\udf89 User approved! Showing notification..."),e.success("Great news! Your account has been approved. Welcome to Run+ Plans!",8e3)),o(a),r.trainingPlan&&(Ne.log("\u2705 Setting training plan"),l(r.trainingPlan)),r.completedWorkouts?(Ne.log("\u2705 Setting completed workouts:",Object.keys(r.completedWorkouts).length,"workouts"),d(r.completedWorkouts)):d({})}else Ne.log("\u26a0\ufe0f User document does not exist yet - waiting for creation");p(!1)},e=>{console.error("\u274c Error listening to user document:",e),p(!1)});return()=>{Ne.log("\ud83d\udd07 Cleaning up real-time listener"),r()}},[n,null===i||void 0===i?void 0:i.approvalStatus]);const m=()=>{const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&n.startsWith("runeq_")&&e.push(n)}e.forEach(e=>localStorage.removeItem(e)),Ne.log("\ud83e\uddf9 Cleared localStorage:",e)};return h?(0,je.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)"},children:(0,je.jsx)("div",{style:{textAlign:"center",color:"#00D4FF"},children:(0,je.jsx)("h2",{children:"Loading..."})})}):n?(Ne.log("\ud83d\udd0d Checking approval status:",{hasUserProfile:!!i,approvalStatus:null===i||void 0===i?void 0:i.approvalStatus,willShowPendingScreen:"pending"===(null===i||void 0===i?void 0:i.approvalStatus)}),"pending"===(null===i||void 0===i?void 0:i.approvalStatus)?(Ne.log("\ud83d\udeab Showing pending approval screen"),(0,je.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"20px"},children:(0,je.jsxs)("div",{style:{maxWidth:"500px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"40px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,je.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:"\u23f3"}),(0,je.jsx)("h1",{style:{color:"#00D4FF",marginBottom:"16px"},children:"Account Pending Approval"}),(0,je.jsx)("p",{style:{color:"#AAAAAA",fontSize:"1.1rem",lineHeight:"1.6",marginBottom:"24px"},children:"Thank you for signing up! Your account is currently pending approval."}),(0,je.jsxs)("p",{style:{color:"#AAAAAA",fontSize:"0.95rem",lineHeight:"1.6"},children:["You'll receive an email at ",(0,je.jsx)("strong",{style:{color:"#FFFFFF"},children:null===i||void 0===i?void 0:i.email})," once your account has been approved. This usually takes less than 24 hours."]}),(0,je.jsx)("button",{onClick:async()=>{await(0,Re.CI)(Ie.j2),window.location.href="/"},style:{marginTop:"32px",padding:"12px 24px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"#FFFFFF",cursor:"pointer",fontSize:"1rem"},children:"Sign Out"})]})})):(0,je.jsxs)(Ce,{children:[(0,je.jsx)(gy,{}),(0,je.jsx)("div",{className:"App",children:(0,je.jsxs)(we,{children:[(0,je.jsx)(ve,{path:"/",element:s?(0,je.jsx)(ye,{to:"/welcome",replace:!0}):(0,je.jsx)(Oe,{})}),(0,je.jsx)(ve,{path:"/onboarding",element:s?(0,je.jsx)(ye,{to:"/welcome",replace:!0}):(0,je.jsx)(ul,{onComplete:async(t,r)=>{var i,a;(Ne.log("\ud83c\udfaf Onboarding complete - received data:",{hasProfile:!!t,hasPlan:!!r,planKeys:r?Object.keys(r):[]}),r&&r.weeks&&r.weeks[0])&&Ne.log("\ud83d\udcca First week structure:",{weekNumber:r.weeks[0].weekNumber,totalMileage:r.weeks[0].totalMileage,workoutsCount:null===(i=r.weeks[0].workouts)||void 0===i?void 0:i.length,firstWorkout:null===(a=r.weeks[0].workouts)||void 0===a?void 0:a[0]});if(o(t),l(r),m(),!n)throw console.error("\u274c No user found - cannot save to Firestore"),new Error("User not authenticated");{Ne.log("\ud83d\udcbe Saving profile to Firestore...",t);const i=await Me.saveUserProfile(n.uid,t);if(!i.success)throw console.error("\u274c Failed to save profile:",i.error),e.error("Warning: Failed to save your profile. Please try again or contact support.",1e4),new Error("Profile save failed: "+i.error);Ne.log("\ud83d\udcbe Saving training plan to Firestore...",r);const o=await Me.saveTrainingPlan(n.uid,r);if(!o.success)throw console.error("\u274c Failed to save training plan:",o.error),e.error("Warning: Failed to save your training plan. Please try again or contact support.",1e4),new Error("Training plan save failed: "+o.error);Ne.log("\u2705 Successfully saved all data to Firestore")}}})}),(0,je.jsx)(ve,{path:"/welcome",element:s?(0,je.jsx)(Nh,{trainingPlan:s}):(0,je.jsx)(ye,{to:"/onboarding",replace:!0})}),(0,je.jsx)(ve,{path:"/preview",element:s?(0,je.jsx)(Bh,{userProfile:i,trainingPlan:s}):(0,je.jsx)(ye,{to:"/onboarding",replace:!0})}),(0,je.jsx)(ve,{path:"/dashboard",element:s?(0,je.jsx)(lp,{userProfile:i,trainingPlan:s,completedWorkouts:c,clearAllData:async()=>{n&&await Me.clearUserData(n.uid),o(null),l(null),m(),await(0,Re.CI)(Ie.j2),window.location.href="/"}}):(0,je.jsx)(ye,{to:"/onboarding",replace:!0})}),(0,je.jsx)(ve,{path:"/workout/:day",element:(0,je.jsx)(dy,{userProfile:i,trainingPlan:s})}),(0,je.jsx)(ve,{path:"/admin/approvals",element:(0,je.jsx)(hy,{})}),(0,je.jsx)(ve,{path:"/auth/strava/callback",element:(0,je.jsx)(py,{})})]})})]})):(0,je.jsx)(Be,{})}const vy=function(){return(0,je.jsx)(fy,{children:(0,je.jsx)(il,{children:(0,je.jsx)(yy,{})})})},by=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:a}=t;n(e),r(e),i(e),o(e),a(e)})};window.addEventListener("error",e=>{if(e.message&&(e.message.includes("ResizeObserver loop")||e.message.includes("ResizeObserver loop completed with undelivered notifications")))return e.stopImmediatePropagation(),!1});l.createRoot(document.getElementById("root")).render((0,je.jsx)(a.StrictMode,{children:(0,je.jsx)(vy,{})})),by()})();
//# sourceMappingURL=main.e3ed5cf6.js.map