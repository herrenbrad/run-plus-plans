/*! For license information please see main.636fe04a.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),i=n(43),o=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(a(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),k=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var _=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var D=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var A=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var I=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===I?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case S:return"Suspense";case E:return"SuspenseList";case _:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case k:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return P(e(t))}catch(n){}}return null}var M=Array.isArray,N=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},F=[],L=-1;function W(e){return{current:e}}function B(e){0>L||(e.current=F[L],F[L]=null,L--)}function U(e,t){L++,F[L]=e.current,e.current=t}var z=W(null),q=W(null),H=W(null),V=W(null);function K(e,t){switch(U(H,t),U(q,e),U(z,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?id(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=od(t=id(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(z),U(z,e)}function Y(){B(z),B(q),B(H)}function G(e){null!==e.memoizedState&&U(V,e);var t=z.current,n=od(t,e.type);t!==n&&(U(q,e),U(z,n))}function Q(e){q.current===e&&(B(z),B(q)),V.current===e&&(B(V),Gd._currentValue=O)}var X=Object.prototype.hasOwnProperty,J=r.unstable_scheduleCallback,$=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,oe=r.unstable_NormalPriority,ae=r.unstable_LowPriority,se=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(fe(e)/me|0)|0},fe=Math.log,me=Math.LN2;var ge=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,o=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~o)?i=ve(r):0!==(a&=s)?i=ve(a):n||0!==(n=s&~e)&&(i=ve(n)):0!==(s=r&~o)?i=ve(s):0!==a?i=ve(a):n||0!==(n=r&~e)&&(i=ve(n)),0===i?0:0!==t&&t!==i&&0===(t&o)&&((o=i&-i)>=(n=t&-t)||32===o&&0!==(4194048&n))?t:i}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function ke(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function xe(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Se(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function Ee(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Te(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ce(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-pe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function _e(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-pe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function De(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ae(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Re(){var e=j.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Ie=Math.random().toString(36).slice(2),Pe="__reactFiber$"+Ie,Me="__reactProps$"+Ie,Ne="__reactContainer$"+Ie,je="__reactEvents$"+Ie,Oe="__reactListeners$"+Ie,Fe="__reactHandles$"+Ie,Le="__reactResources$"+Ie,We="__reactMarker$"+Ie;function Be(e){delete e[Pe],delete e[Me],delete e[je],delete e[Oe],delete e[Fe]}function Ue(e){var t=e[Pe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ne]||n[Pe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bd(e);null!==e;){if(n=e[Pe])return n;e=bd(e)}return t}n=(e=n).parentNode}return null}function ze(e){if(e=e[Pe]||e[Ne]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function He(e){var t=e[Le];return t||(t=e[Le]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ve(e){e[We]=!0}var Ke=new Set,Ye={};function Ge(e,t){Qe(e,t),Qe(e+"Capture",t)}function Qe(e,t){for(Ye[e]=t,e=0;e<t.length;e++)Ke.add(t[e])}var Xe,Je,$e=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(i=t,X.call(et,i)||!X.call(Ze,i)&&($e.test(i)?et[i]=!0:(Ze[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Xe)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xe=t&&t[1]||"",Je=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Xe+e+Je}var ot=!1;function at(e,t){if(!e||ot)return"";ot=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(o){r=o}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),a=o[0],s=o[1];if(a&&s){var l=a.split("\n"),c=s.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{ot=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function st(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=st(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ft=/[\n"\\]/g;function mt(e){return e.replace(ft,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,i,o,a,s){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?vt(e,a,ct(t)):null!=n?vt(e,a,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=o&&(e.defaultChecked=!!o),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.name=""+ct(s):e.removeAttribute("name")}function yt(e,t,n,r,i,o,a,s){if(null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.type=o),null!=t||null!=n){if(!("submit"!==o&&"reset"!==o||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function vt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function kt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(M(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function xt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Tt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Et(e,i,r)}else for(var o in t)t.hasOwnProperty(o)&&Et(e,o,t[o])}function Ct(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return Dt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Rt=null;function It(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Mt=null;function Nt(e){var t=ze(e);if(t&&(e=t.stateNode)){var n=e[Me]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Me]||null;if(!i)throw Error(a(90));gt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var jt=!1;function Ot(e,t,n){if(jt)return e(t,n);jt=!0;try{return e(t)}finally{if(jt=!1,(null!==Pt||null!==Mt)&&(Uc(),Pt&&(t=Pt,e=Mt,Mt=Pt=null,Nt(t),e)))for(t=0;t<e.length;t++)Nt(e[t])}}function Ft(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Me]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Lt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Wt=!1;if(Lt)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){Wt=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(Mh){Wt=!1}var Ut=null,zt=null,qt=null;function Ht(){if(qt)return qt;var e,t,n=zt,r=n.length,i="value"in Ut?Ut.value:Ut.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return qt=i.slice(e,1<t?1-t:void 0)}function Vt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function Yt(){return!1}function Gt(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Kt:Yt,this.isPropagationStopped=Yt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var Qt,Xt,Jt,$t={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Gt($t),en=h({},$t,{view:0,detail:0}),tn=Gt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jt&&(Jt&&"mousemove"===e.type?(Qt=e.screenX-Jt.screenX,Xt=e.screenY-Jt.screenY):Xt=Qt=0,Jt=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),rn=Gt(nn),on=Gt(h({},nn,{dataTransfer:0})),an=Gt(h({},en,{relatedTarget:0})),sn=Gt(h({},$t,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Gt(h({},$t,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Gt(h({},$t,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function fn(){return pn}var mn=Gt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Vt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fn,charCode:function(e){return"keypress"===e.type?Vt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Vt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Gt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=Gt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fn})),vn=Gt(h({},$t,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Gt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Gt(h({},$t,{newState:0,oldState:0})),kn=[9,13,27,32],xn=Lt&&"CompositionEvent"in window,Sn=null;Lt&&"documentMode"in document&&(Sn=document.documentMode);var En=Lt&&"TextEvent"in window&&!Sn,Tn=Lt&&(!xn||Sn&&8<Sn&&11>=Sn),Cn=String.fromCharCode(32),_n=!1;function Dn(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function An(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1;var In={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!In[e.type]:"textarea"===t}function Mn(e,t,n,r){Pt?Mt?Mt.push(r):Mt=[r]:Pt=r,0<(t=Hu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Nn=null,jn=null;function On(e){Ou(e,0)}function Fn(e){if(ht(qe(e)))return e}function Ln(e,t){if("change"===e)return t}var Wn=!1;if(Lt){var Bn;if(Lt){var Un="oninput"in document;if(!Un){var zn=document.createElement("div");zn.setAttribute("oninput","return;"),Un="function"===typeof zn.oninput}Bn=Un}else Bn=!1;Wn=Bn&&(!document.documentMode||9<document.documentMode)}function qn(){Nn&&(Nn.detachEvent("onpropertychange",Hn),jn=Nn=null)}function Hn(e){if("value"===e.propertyName&&Fn(jn)){var t=[];Mn(t,jn,e,It(e)),Ot(On,t)}}function Vn(e,t,n){"focusin"===e?(qn(),jn=n,(Nn=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&qn()}function Kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Fn(jn)}function Yn(e,t){if("click"===e)return Fn(t)}function Gn(e,t){if("input"===e||"change"===e)return Fn(t)}var Qn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xn(e,t){if(Qn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!X.call(t,i)||!Qn(e[i],t[i]))return!1}return!0}function Jn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $n(e,t){var n,r=Jn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Jn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Lt&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,or=null,ar=!1;function sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==pt(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&Xn(or,r)||(or=r,0<(r=Hu(ir,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}Lt&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var pr=hr("animationend"),fr=hr("animationiteration"),mr=hr("animationstart"),gr=hr("transitionrun"),yr=hr("transitionstart"),vr=hr("transitioncancel"),br=hr("transitionend"),wr=new Map,kr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xr(e,t){wr.set(e,t),Ge(t,[e])}kr.push("scrollEnd");var Sr=new WeakMap;function Er(e,t){if("object"===typeof e&&null!==e){var n=Sr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Sr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Tr=[],Cr=0,_r=0;function Dr(){for(var e=Cr,t=_r=Cr=0;t<e;){var n=Tr[t];Tr[t++]=null;var r=Tr[t];Tr[t++]=null;var i=Tr[t];Tr[t++]=null;var o=Tr[t];if(Tr[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==o&&Pr(n,i,o)}}function Ar(e,t,n,r){Tr[Cr++]=e,Tr[Cr++]=t,Tr[Cr++]=n,Tr[Cr++]=r,_r|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Rr(e,t,n,r){return Ar(e,t,n,r),Mr(e)}function Ir(e,t){return Ar(e,null,null,t),Mr(e)}function Pr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(i=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,i&&null!==t&&(i=31-pe(n),null===(r=(e=o.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),o):null}function Mr(e){if(50<Pc)throw Pc=0,Mc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Nr={};function jr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(e,t,n,r){return new jr(e,t,n,r)}function Fr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lr(e,t){var n=e.alternate;return null===n?((n=Or(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Wr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Br(e,t,n,r,i,o){var s=0;if(r=e,"function"===typeof e)Fr(e)&&(s=1);else if("string"===typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,z.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case _:return(e=Or(31,n,t,i)).elementType=_,e.lanes=o,e;case g:return Ur(n.children,i,o,t);case y:s=8,i|=24;break;case v:return(e=Or(12,n,t,2|i)).elementType=v,e.lanes=o,e;case S:return(e=Or(13,n,t,i)).elementType=S,e.lanes=o,e;case E:return(e=Or(19,n,t,i)).elementType=E,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case k:s=10;break e;case w:s=9;break e;case x:s=11;break e;case T:s=14;break e;case C:s=16,r=null;break e}s=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Or(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ur(e,t,n,r){return(e=Or(7,e,r,t)).lanes=n,e}function zr(e,t,n){return(e=Or(6,e,null,t)).lanes=n,e}function qr(e,t,n){return(t=Or(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],Vr=0,Kr=null,Yr=0,Gr=[],Qr=0,Xr=null,Jr=1,$r="";function Zr(e,t){Hr[Vr++]=Yr,Hr[Vr++]=Kr,Kr=e,Yr=t}function ei(e,t,n){Gr[Qr++]=Jr,Gr[Qr++]=$r,Gr[Qr++]=Xr,Xr=e;var r=Jr;e=$r;var i=32-pe(r)-1;r&=~(1<<i),n+=1;var o=32-pe(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Jr=1<<32-pe(t)+i|n<<i|r,$r=o+e}else Jr=1<<o|n<<i|r,$r=e}function ti(e){null!==e.return&&(Zr(e,1),ei(e,1,0))}function ni(e){for(;e===Kr;)Kr=Hr[--Vr],Hr[Vr]=null,Yr=Hr[--Vr],Hr[Vr]=null;for(;e===Xr;)Xr=Gr[--Qr],Gr[Qr]=null,$r=Gr[--Qr],Gr[Qr]=null,Jr=Gr[--Qr],Gr[Qr]=null}var ri=null,ii=null,oi=!1,ai=null,si=!1,li=Error(a(519));function ci(e){throw mi(Er(Error(a(418,"")),e)),li}function ui(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Pe]=e,t[Me]=r,n){case"dialog":Fu("cancel",t),Fu("close",t);break;case"iframe":case"object":case"embed":Fu("load",t);break;case"video":case"audio":for(n=0;n<Nu.length;n++)Fu(Nu[n],t);break;case"source":Fu("error",t);break;case"img":case"image":case"link":Fu("error",t),Fu("load",t);break;case"details":Fu("toggle",t);break;case"input":Fu("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Fu("invalid",t);break;case"textarea":Fu("invalid",t),kt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Xu(t.textContent,n)?(null!=r.popover&&(Fu("beforetoggle",t),Fu("toggle",t)),null!=r.onScroll&&Fu("scroll",t),null!=r.onScrollEnd&&Fu("scrollend",t),null!=r.onClick&&(t.onclick=Ju),t=!0):t=!1,t||ci(e)}function di(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(si=!1);case 27:case 3:return void(si=!0);default:ri=ri.return}}function hi(e){if(e!==ri)return!1;if(!oi)return di(e),oi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ad(e.type,e.memoizedProps)),t=!t),t&&ii&&ci(e),di(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=yd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,pd(e.type)?(e=vd,vd=null,ii=e):ii=n):ii=ri?yd(e.stateNode.nextSibling):null;return!0}function pi(){ii=ri=null,oi=!1}function fi(){var e=ai;return null!==e&&(null===bc?bc=e:bc.push.apply(bc,e),ai=null),e}function mi(e){null===ai?ai=[e]:ai.push(e)}var gi=W(null),yi=null,vi=null;function bi(e,t,n){U(gi,t._currentValue),t._currentValue=n}function wi(e){e._currentValue=gi.current,B(gi)}function ki(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xi(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var o=i.dependencies;if(null!==o){var s=i.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),ki(o.return,n,e),r||(s=null);break e}o=l.next}}else if(18===i.tag){if(null===(s=i.return))throw Error(a(341));s.lanes|=n,null!==(o=s.alternate)&&(o.lanes|=n),ki(s,n,e),s=null}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===e){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}}function Si(e,t,n,r){e=null;for(var i=t,o=!1;null!==i;){if(!o)if(0!==(524288&i.flags))o=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var s=i.alternate;if(null===s)throw Error(a(387));if(null!==(s=s.memoizedProps)){var l=i.type;Qn(i.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(i===V.current){if(null===(s=i.alternate))throw Error(a(387));s.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Gd):e=[Gd])}i=i.return}null!==e&&xi(t,e,n,r),t.flags|=262144}function Ei(e){for(e=e.firstContext;null!==e;){if(!Qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ti(e){yi=e,vi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ci(e){return Di(yi,e)}function _i(e,t){return null===yi&&Ti(e),Di(e,t)}function Di(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===vi){if(null===e)throw Error(a(308));vi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vi=vi.next=t;return n}var Ai="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ri=r.unstable_scheduleCallback,Ii=r.unstable_NormalPriority,Pi={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mi(){return{controller:new Ai,data:new Map,refCount:0}}function Ni(e){e.refCount--,0===e.refCount&&Ri(Ii,function(){e.controller.abort()})}var ji=null,Oi=0,Fi=0,Li=null;function Wi(){if(0===--Oi&&null!==ji){null!==Li&&(Li.status="fulfilled");var e=ji;ji=null,Fi=0,Li=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Bi=N.S;N.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===ji){var n=ji=[];Oi=0,Fi=Au(),Li={status:"pending",value:void 0,then:function(e){n.push(e)}}}Oi++,t.then(Wi,Wi)}(0,t),null!==Bi&&Bi(e,t)};var Ui=W(null);function zi(){var e=Ui.current;return null!==e?e:rc.pooledCache}function qi(e,t){U(Ui,null===t?Ui.current:t.pool)}function Hi(){var e=zi();return null===e?null:{parent:Pi._currentValue,pool:e}}var Vi=Error(a(460)),Ki=Error(a(474)),Yi=Error(a(542)),Gi={then:function(){}};function Qi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xi(){}function Ji(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Xi,Xi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e;default:if("string"===typeof t.status)t.then(Xi,Xi);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e}throw $i=t,Vi}}var $i=null;function Zi(){if(null===$i)throw Error(a(459));var e=$i;return $i=null,e}function eo(e){if(e===Vi||e===Yi)throw Error(a(483))}var to=!1;function no(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function io(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Mr(e),Pr(e,null,n),t}return Ar(e,r,t,n),Mr(e)}function ao(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_e(e,n)}}function so(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var lo=!1;function co(){if(lo){if(null!==Li)throw Li}}function uo(e,t,n,r){lo=!1;var i=e.updateQueue;to=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(a=0,u=c=l=null,s=o;;){var p=-536870913&s.lane,f=p!==s.lane;if(f?(oc&p)===p:(r&p)===p){0!==p&&p===Fi&&(lo=!0),null!==u&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var m=e,g=s;p=t;var y=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(y,d,p);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(p="function"===typeof(m=g.payload)?m.call(y,d,p):m)||void 0===p)break e;d=h({},d,p);break e;case 2:to=!0}}null!==(p=s.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=i.callbacks)?i.callbacks=[p]:f.push(p))}else f={lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=p;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===o&&(i.shared.lanes=0),pc|=a,e.lanes=a,e.memoizedState=d}}function ho(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function po(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ho(n[e],t)}var fo=W(null),mo=W(0);function go(e,t){U(mo,e=dc),U(fo,t),dc=e|t.baseLanes}function yo(){U(mo,dc),U(fo,fo.current)}function vo(){dc=mo.current,B(fo),B(mo)}var bo=0,wo=null,ko=null,xo=null,So=!1,Eo=!1,To=!1,Co=0,_o=0,Do=null,Ao=0;function Ro(){throw Error(a(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qn(e[n],t[n]))return!1;return!0}function Po(e,t,n,r,i,o){return bo=o,wo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=null===e||null===e.memoizedState?Ka:Ya,To=!1,o=n(r,i),To=!1,Eo&&(o=No(t,n,r,i)),Mo(e),o}function Mo(e){N.H=Va;var t=null!==ko&&null!==ko.next;if(bo=0,xo=ko=wo=null,So=!1,_o=0,Do=null,t)throw Error(a(300));null===e||_s||null!==(e=e.dependencies)&&Ei(e)&&(_s=!0)}function No(e,t,n,r){wo=e;var i=0;do{if(Eo&&(Do=null),_o=0,Eo=!1,25<=i)throw Error(a(301));if(i+=1,xo=ko=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}N.H=Ga,o=t(n,r)}while(Eo);return o}function jo(){var e=N.H,t=e.useState()[0];return t="function"===typeof t.then?Uo(t):t,e=e.useState()[0],(null!==ko?ko.memoizedState:null)!==e&&(wo.flags|=1024),t}function Oo(){var e=0!==Co;return Co=0,e}function Fo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Lo(e){if(So){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}So=!1}bo=0,xo=ko=wo=null,Eo=!1,_o=Co=0,Do=null}function Wo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===xo?wo.memoizedState=xo=e:xo=xo.next=e,xo}function Bo(){if(null===ko){var e=wo.alternate;e=null!==e?e.memoizedState:null}else e=ko.next;var t=null===xo?wo.memoizedState:xo.next;if(null!==t)xo=t,ko=e;else{if(null===e){if(null===wo.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(ko=e).memoizedState,baseState:ko.baseState,baseQueue:ko.baseQueue,queue:ko.queue,next:null},null===xo?wo.memoizedState=xo=e:xo=xo.next=e}return xo}function Uo(e){var t=_o;return _o+=1,null===Do&&(Do=[]),e=Ji(Do,e,t),t=wo,null===(null===xo?t.memoizedState:xo.next)&&(t=t.alternate,N.H=null===t||null===t.memoizedState?Ka:Ya),e}function zo(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Uo(e);if(e.$$typeof===k)return Ci(e)}throw Error(a(438,String(e)))}function qo(e){var t=null,n=wo.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=wo.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},wo.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=D;return t.index++,n}function Ho(e,t){return"function"===typeof t?t(e):t}function Vo(e){return Ko(Bo(),ko,e)}function Ko(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var i=e.baseQueue,o=r.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}t.baseQueue=i=o,r.pending=null}if(o=e.baseState,null===i)e.memoizedState=o;else{var l=s=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(oc&h)===h:(bo&h)===h){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Fi&&(d=!0);else{if((bo&p)===p){u=u.next,p===Fi&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,s=o):c=c.next=h,wo.lanes|=p,pc|=p}h=u.action,To&&n(o,h),o=u.hasEagerState?u.eagerState:n(o,h)}else p={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,s=o):c=c.next=p,wo.lanes|=h,pc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?s=o:c.next=l,!Qn(o,e.memoizedState)&&(_s=!0,d&&null!==(n=Li)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=c,r.lastRenderedState=o}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Yo(e){var t=Bo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);Qn(o,t.memoizedState)||(_s=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Go(e,t,n){var r=wo,i=Bo(),o=oi;if(o){if(void 0===n)throw Error(a(407));n=n()}else n=t();var s=!Qn((ko||i).memoizedState,n);if(s&&(i.memoizedState=n,_s=!0),i=i.queue,ya(2048,8,Jo.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||null!==xo&&1&xo.memoizedState.tag){if(r.flags|=2048,fa(9,{destroy:void 0,resource:void 0},Xo.bind(null,r,i,n,t),null),null===rc)throw Error(a(349));o||0!==(124&bo)||Qo(r,t,n)}return n}function Qo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=wo.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},wo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Xo(e,t,n,r){t.value=n,t.getSnapshot=r,$o(t)&&Zo(e)}function Jo(e,t,n){return n(function(){$o(t)&&Zo(e)})}function $o(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qn(e,n)}catch(r){return!0}}function Zo(e){var t=Ir(e,2);null!==t&&Oc(t,e,2)}function ea(e){var t=Wo();if("function"===typeof e){var n=e;if(e=n(),To){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:e},t}function ta(e,t,n,r){return e.baseState=n,Ko(e,ko,"function"===typeof r?r:Ho)}function na(e,t,n,r,i){if(za(e))throw Error(a(485));if(null!==(e=t.action)){var o={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==N.T?n(!0):o.isTransition=!1,r(o),null===(n=t.pending)?(o.next=t.pending=o,ra(t,o)):(o.next=n.next,t.pending=n.next=o)}}function ra(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var o=N.T,a={};N.T=a;try{var s=n(i,r),l=N.S;null!==l&&l(a,s),ia(e,t,s)}catch(c){aa(e,t,c)}finally{N.T=o}}else try{ia(e,t,o=n(i,r))}catch(u){aa(e,t,u)}}function ia(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){oa(e,t,n)},function(n){return aa(e,t,n)}):oa(e,t,n)}function oa(e,t,n){t.status="fulfilled",t.value=n,sa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ra(e,n)))}function aa(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,sa(t),t=t.next}while(t!==r)}e.action=null}function sa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function la(e,t){return t}function ca(e,t){if(oi){var n=rc.formState;if(null!==n){e:{var r=wo;if(oi){if(ii){t:{for(var i=ii,o=si;8!==i.nodeType;){if(!o){i=null;break t}if(null===(i=yd(i.nextSibling))){i=null;break t}}i="F!"===(o=i.data)||"F"===o?i:null}if(i){ii=yd(i.nextSibling),r="F!"===i.data;break e}}ci(r)}r=!1}r&&(t=n[0])}}return(n=Wo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:t},n.queue=r,n=Wa.bind(null,wo,r),r.dispatch=n,r=ea(!1),o=Ua.bind(null,wo,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Wo()).queue=i,n=na.bind(null,wo,i,o,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function ua(e){return da(Bo(),ko,e)}function da(e,t,n){if(t=Ko(e,t,la)[0],e=Vo(Ho)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Uo(t)}catch(a){if(a===Vi)throw Yi;throw a}else r=t;var i=(t=Bo()).queue,o=i.dispatch;return n!==t.memoizedState&&(wo.flags|=2048,fa(9,{destroy:void 0,resource:void 0},ha.bind(null,i,n),null)),[r,o,e]}function ha(e,t){e.action=t}function pa(e){var t=Bo(),n=ko;if(null!==n)return da(t,n,e);Bo(),t=t.memoizedState;var r=(n=Bo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function fa(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=wo.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},wo.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ma(){return Bo().memoizedState}function ga(e,t,n,r){var i=Wo();r=void 0===r?null:r,wo.flags|=e,i.memoizedState=fa(1|t,{destroy:void 0,resource:void 0},n,r)}function ya(e,t,n,r){var i=Bo();r=void 0===r?null:r;var o=i.memoizedState.inst;null!==ko&&null!==r&&Io(r,ko.memoizedState.deps)?i.memoizedState=fa(t,o,n,r):(wo.flags|=e,i.memoizedState=fa(1|t,o,n,r))}function va(e,t){ga(8390656,8,e,t)}function ba(e,t){ya(2048,8,e,t)}function wa(e,t){return ya(4,2,e,t)}function ka(e,t){return ya(4,4,e,t)}function xa(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Sa(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ya(4,4,xa.bind(null,t,e),n)}function Ea(){}function Ta(e,t){var n=Bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ca(e,t){var n=Bo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Io(t,r[1]))return r[0];if(r=e(),To){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function _a(e,t,n){return void 0===n||0!==(1073741824&bo)?e.memoizedState=t:(e.memoizedState=n,e=jc(),wo.lanes|=e,pc|=e,n)}function Da(e,t,n,r){return Qn(n,t)?n:null!==fo.current?(e=_a(e,n,r),Qn(e,t)||(_s=!0),e):0===(42&bo)?(_s=!0,e.memoizedState=n):(e=jc(),wo.lanes|=e,pc|=e,t)}function Aa(e,t,n,r,i){var o=j.p;j.p=0!==o&&8>o?o:8;var a=N.T,s={};N.T=s,Ua(e,!1,t,n);try{var l=i(),c=N.S;if(null!==c&&c(s,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r);Ba(e,t,u,Nc())}else Ba(e,t,r,Nc())}catch(d){Ba(e,t,{then:function(){},status:"rejected",reason:d},Nc())}finally{j.p=o,N.T=a}}function Ra(){}function Ia(e,t,n,r){if(5!==e.tag)throw Error(a(476));var i=Pa(e).queue;Aa(e,i,t,O,null===n?Ra:function(){return Ma(e),n(r)})}function Pa(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:O},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ma(e){Ba(e,Pa(e).next.queue,{},Nc())}function Na(){return Ci(Gd)}function ja(){return Bo().memoizedState}function Oa(){return Bo().memoizedState}function Fa(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Nc(),r=oo(t,e=io(n),n);return null!==r&&(Oc(r,t,n),ao(r,t,n)),t={cache:Mi()},void(e.payload=t)}t=t.return}}function La(e,t,n){var r=Nc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},za(e)?qa(t,n):null!==(n=Rr(e,t,n,r))&&(Oc(n,e,r),Ha(n,t,r))}function Wa(e,t,n){Ba(e,t,n,Nc())}function Ba(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(za(e))qa(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Qn(s,a))return Ar(e,t,i,0),null===rc&&Dr(),!1}catch(l){}if(null!==(n=Rr(e,t,i,r)))return Oc(n,e,r),Ha(n,t,r),!0}return!1}function Ua(e,t,n,r){if(r={lane:2,revertLane:Au(),action:r,hasEagerState:!1,eagerState:null,next:null},za(e)){if(t)throw Error(a(479))}else null!==(t=Rr(e,n,r,2))&&Oc(t,e,2)}function za(e){var t=e.alternate;return e===wo||null!==t&&t===wo}function qa(e,t){Eo=So=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ha(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_e(e,n)}}var Va={readContext:Ci,use:zo,useCallback:Ro,useContext:Ro,useEffect:Ro,useImperativeHandle:Ro,useLayoutEffect:Ro,useInsertionEffect:Ro,useMemo:Ro,useReducer:Ro,useRef:Ro,useState:Ro,useDebugValue:Ro,useDeferredValue:Ro,useTransition:Ro,useSyncExternalStore:Ro,useId:Ro,useHostTransitionStatus:Ro,useFormState:Ro,useActionState:Ro,useOptimistic:Ro,useMemoCache:Ro,useCacheRefresh:Ro},Ka={readContext:Ci,use:zo,useCallback:function(e,t){return Wo().memoizedState=[e,void 0===t?null:t],e},useContext:Ci,useEffect:va,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ga(4194308,4,xa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ga(4194308,4,e,t)},useInsertionEffect:function(e,t){ga(4,2,e,t)},useMemo:function(e,t){var n=Wo();t=void 0===t?null:t;var r=e();if(To){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Wo();if(void 0!==n){var i=n(t);if(To){he(!0);try{n(t)}finally{he(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=La.bind(null,wo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Wo().memoizedState=e},useState:function(e){var t=(e=ea(e)).queue,n=Wa.bind(null,wo,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ea,useDeferredValue:function(e,t){return _a(Wo(),e,t)},useTransition:function(){var e=ea(!1);return e=Aa.bind(null,wo,e.queue,!0,!1),Wo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=wo,i=Wo();if(oi){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===rc)throw Error(a(349));0!==(124&oc)||Qo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,va(Jo.bind(null,r,o,e),[e]),r.flags|=2048,fa(9,{destroy:void 0,resource:void 0},Xo.bind(null,r,o,n,t),null),n},useId:function(){var e=Wo(),t=rc.identifierPrefix;if(oi){var n=$r;t="\xab"+t+"R"+(n=(Jr&~(1<<32-pe(Jr)-1)).toString(32)+n),0<(n=Co++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ao++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Na,useFormState:ca,useActionState:ca,useOptimistic:function(e){var t=Wo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ua.bind(null,wo,!0,n),n.dispatch=t,[e,t]},useMemoCache:qo,useCacheRefresh:function(){return Wo().memoizedState=Fa.bind(null,wo)}},Ya={readContext:Ci,use:zo,useCallback:Ta,useContext:Ci,useEffect:ba,useImperativeHandle:Sa,useInsertionEffect:wa,useLayoutEffect:ka,useMemo:Ca,useReducer:Vo,useRef:ma,useState:function(){return Vo(Ho)},useDebugValue:Ea,useDeferredValue:function(e,t){return Da(Bo(),ko.memoizedState,e,t)},useTransition:function(){var e=Vo(Ho)[0],t=Bo().memoizedState;return["boolean"===typeof e?e:Uo(e),t]},useSyncExternalStore:Go,useId:ja,useHostTransitionStatus:Na,useFormState:ua,useActionState:ua,useOptimistic:function(e,t){return ta(Bo(),0,e,t)},useMemoCache:qo,useCacheRefresh:Oa},Ga={readContext:Ci,use:zo,useCallback:Ta,useContext:Ci,useEffect:ba,useImperativeHandle:Sa,useInsertionEffect:wa,useLayoutEffect:ka,useMemo:Ca,useReducer:Yo,useRef:ma,useState:function(){return Yo(Ho)},useDebugValue:Ea,useDeferredValue:function(e,t){var n=Bo();return null===ko?_a(n,e,t):Da(n,ko.memoizedState,e,t)},useTransition:function(){var e=Yo(Ho)[0],t=Bo().memoizedState;return["boolean"===typeof e?e:Uo(e),t]},useSyncExternalStore:Go,useId:ja,useHostTransitionStatus:Na,useFormState:pa,useActionState:pa,useOptimistic:function(e,t){var n=Bo();return null!==ko?ta(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:qo,useCacheRefresh:Oa},Qa=null,Xa=0;function Ja(e){var t=Xa;return Xa+=1,null===Qa&&(Qa=[]),Ji(Qa,e,t)}function $a(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Za(e,t){if(t.$$typeof===p)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function es(e){return(0,e._init)(e._payload)}function ts(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Lr(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=zr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===C&&es(o)===t.type)?($a(t=i(t,n.props),n),t.return=e,t):($a(t=Br(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Ur(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=zr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return $a(n=Br(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=qr(t,e.mode,n)).return=e,t;case C:return h(e,t=(0,t._init)(t._payload),n)}if(M(t)||R(t))return(t=Ur(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Ja(t),n);if(t.$$typeof===k)return h(e,_i(e,t),n);Za(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case f:return n.key===i?c(e,t,n,r):null;case m:return n.key===i?u(e,t,n,r):null;case C:return p(e,t,n=(i=n._init)(n._payload),r)}if(M(n)||R(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return p(e,t,Ja(n),r);if(n.$$typeof===k)return p(e,t,_i(e,n),r);Za(e,n)}return null}function y(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case f:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case C:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(M(r)||R(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return y(e,t,n,Ja(r),i);if(r.$$typeof===k)return y(e,t,n,_i(t,r),i);Za(t,r)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case f:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=i(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===C&&es(b)===c.type){n(l,c.sibling),$a(d=i(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=Ur(u.props.children,l.mode,d,u.key)).return=l,l=d):($a(d=Br(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return s(l);case m:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=i(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=qr(u,l.mode,d)).return=l,l=d}return s(l);case C:return v(l,c,u=(b=u._init)(u._payload),d)}if(M(u))return function(i,a,s,l){for(var c=null,u=null,d=a,f=a=0,m=null;null!==d&&f<s.length;f++){d.index>f?(m=d,d=null):m=d.sibling;var g=p(i,d,s[f],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(i,d),a=o(g,a,f),null===u?c=g:u.sibling=g,u=g,d=m}if(f===s.length)return n(i,d),oi&&Zr(i,f),c;if(null===d){for(;f<s.length;f++)null!==(d=h(i,s[f],l))&&(a=o(d,a,f),null===u?c=d:u.sibling=d,u=d);return oi&&Zr(i,f),c}for(d=r(d);f<s.length;f++)null!==(m=y(d,i,f,s[f],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?f:m.key),a=o(m,a,f),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(i,e)}),oi&&Zr(i,f),c}(l,c,u,d);if(R(u)){if("function"!==typeof(b=R(u)))throw Error(a(150));return function(i,s,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,f=s,m=s=0,g=null,v=l.next();null!==f&&!v.done;m++,v=l.next()){f.index>m?(g=f,f=null):g=f.sibling;var b=p(i,f,v.value,c);if(null===b){null===f&&(f=g);break}e&&f&&null===b.alternate&&t(i,f),s=o(b,s,m),null===d?u=b:d.sibling=b,d=b,f=g}if(v.done)return n(i,f),oi&&Zr(i,m),u;if(null===f){for(;!v.done;m++,v=l.next())null!==(v=h(i,v.value,c))&&(s=o(v,s,m),null===d?u=v:d.sibling=v,d=v);return oi&&Zr(i,m),u}for(f=r(f);!v.done;m++,v=l.next())null!==(v=y(f,i,m,v.value,c))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),s=o(v,s,m),null===d?u=v:d.sibling=v,d=v);return e&&f.forEach(function(e){return t(i,e)}),oi&&Zr(i,m),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return v(l,c,Ja(u),d);if(u.$$typeof===k)return v(l,c,_i(l,u),d);Za(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=i(c,u)).return=l,l=d):(n(l,c),(d=zr(u,l.mode,d)).return=l,l=d),s(l)):n(l,c)}return function(e,t,n,r){try{Xa=0;var i=v(e,t,n,r);return Qa=null,i}catch(a){if(a===Vi||a===Yi)throw a;var o=Or(29,a,null,e.mode);return o.lanes=r,o.return=e,o}}}var ns=ts(!0),rs=ts(!1),is=W(null),os=null;function as(e){var t=e.alternate;U(us,1&us.current),U(is,e),null===os&&(null===t||null!==fo.current||null!==t.memoizedState)&&(os=e)}function ss(e){if(22===e.tag){if(U(us,us.current),U(is,e),null===os){var t=e.alternate;null!==t&&null!==t.memoizedState&&(os=e)}}else ls()}function ls(){U(us,us.current),U(is,is.current)}function cs(e){B(is),os===e&&(os=null),B(us)}var us=W(0);function ds(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function hs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ps={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Nc(),i=io(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=oo(e,i,r))&&(Oc(t,e,r),ao(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Nc(),i=io(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=oo(e,i,r))&&(Oc(t,e,r),ao(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Nc(),r=io(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=oo(e,r,n))&&(Oc(t,e,n),ao(t,e,n))}};function fs(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Xn(n,r)||!Xn(i,o))}function ms(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ps.enqueueReplaceState(t,t.state,null)}function gs(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var ys="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function vs(e){ys(e)}function bs(e){console.error(e)}function ws(e){ys(e)}function ks(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function xs(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ss(e,t,n){return(n=io(n)).tag=3,n.payload={element:null},n.callback=function(){ks(e,t)},n}function Es(e){return(e=io(e)).tag=3,e}function Ts(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var o=r.value;e.payload=function(){return i(o)},e.callback=function(){xs(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){xs(t,n,r),"function"!==typeof i&&(null===Ec?Ec=new Set([this]):Ec.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Cs=Error(a(461)),_s=!1;function Ds(e,t,n,r){t.child=null===e?rs(t,null,n,r):ns(t,e.child,n,r)}function As(e,t,n,r,i){n=n.render;var o=t.ref;if("ref"in r){var a={};for(var s in r)"ref"!==s&&(a[s]=r[s])}else a=r;return Ti(t),r=Po(e,t,n,a,o,i),s=Oo(),null===e||_s?(oi&&s&&ti(t),t.flags|=1,Ds(e,t,r,i),t.child):(Fo(e,t,i),Qs(e,t,i))}function Rs(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Fr(o)||void 0!==o.defaultProps||null!==n.compare?((e=Br(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Is(e,t,o,r,i))}if(o=e.child,!Xs(e,i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:Xn)(a,r)&&e.ref===t.ref)return Qs(e,t,i)}return t.flags|=1,(e=Lr(o,r)).ref=t.ref,e.return=t,t.child=e}function Is(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(Xn(o,r)&&e.ref===t.ref){if(_s=!1,t.pendingProps=r=o,!Xs(e,i))return t.lanes=e.lanes,Qs(e,t,i);0!==(131072&e.flags)&&(_s=!0)}}return js(e,t,n,r,i)}function Ps(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==o?o.baseLanes|n:n,null!==e){for(i=t.child=e.child,o=0;null!==i;)o=o|i.lanes|i.childLanes,i=i.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return Ms(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Ms(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&qi(0,null!==o?o.cachePool:null),null!==o?go(t,o):yo(),ss(t)}else null!==o?(qi(0,o.cachePool),go(t,o),ls(),t.memoizedState=null):(null!==e&&qi(0,null),yo(),ls());return Ds(e,t,i,n),t.child}function Ms(e,t,n,r){var i=zi();return i=null===i?null:{parent:Pi._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&qi(0,null),yo(),ss(t),null!==e&&Si(e,t,r,!0),null}function Ns(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function js(e,t,n,r,i){return Ti(t),n=Po(e,t,n,r,void 0,i),r=Oo(),null===e||_s?(oi&&r&&ti(t),t.flags|=1,Ds(e,t,n,i),t.child):(Fo(e,t,i),Qs(e,t,i))}function Os(e,t,n,r,i,o){return Ti(t),t.updateQueue=null,n=No(t,r,n,i),Mo(e),r=Oo(),null===e||_s?(oi&&r&&ti(t),t.flags|=1,Ds(e,t,n,o),t.child):(Fo(e,t,o),Qs(e,t,o))}function Fs(e,t,n,r,i){if(Ti(t),null===t.stateNode){var o=Nr,a=n.contextType;"object"===typeof a&&null!==a&&(o=Ci(a)),o=new n(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=ps,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},no(t),a=n.contextType,o.context="object"===typeof a&&null!==a?Ci(a):Nr,o.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(hs(t,n,a,r),o.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(a=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),a!==o.state&&ps.enqueueReplaceState(o,o.state,null),uo(t,r,o,i),co(),o.state=t.memoizedState),"function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var s=t.memoizedProps,l=gs(n,s);o.props=l;var c=o.context,u=n.contextType;a=Nr,"object"===typeof u&&null!==u&&(a=Ci(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate,s=t.pendingProps!==s,u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s||c!==a)&&ms(t,o,r,a),to=!1;var h=t.memoizedState;o.state=h,uo(t,r,o,i),co(),c=t.memoizedState,s||h!==c||to?("function"===typeof d&&(hs(t,n,d,r),c=t.memoizedState),(l=to||fs(t,n,l,r,h,c,a))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=a,r=l):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ro(e,t),u=gs(n,a=t.memoizedProps),o.props=u,d=t.pendingProps,h=o.context,c=n.contextType,l=Nr,"object"===typeof c&&null!==c&&(l=Ci(c)),(c="function"===typeof(s=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&ms(t,o,r,l),to=!1,h=t.memoizedState,o.state=h,uo(t,r,o,i),co();var p=t.memoizedState;a!==d||h!==p||to||null!==e&&null!==e.dependencies&&Ei(e.dependencies)?("function"===typeof s&&(hs(t,n,s,r),p=t.memoizedState),(u=to||fs(t,n,u,r,h,p,l)||null!==e&&null!==e.dependencies&&Ei(e.dependencies))?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,Ns(e,t),r=0!==(128&t.flags),o||r?(o=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=ns(t,e.child,null,i),t.child=ns(t,null,n,i)):Ds(e,t,n,i),t.memoizedState=o.state,e=t.child):e=Qs(e,t,i),e}function Ls(e,t,n,r){return pi(),t.flags|=256,Ds(e,t,n,r),t.child}var Ws={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bs(e){return{baseLanes:e,cachePool:Hi()}}function Us(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function zs(e,t,n){var r,i=t.pendingProps,o=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&us.current)),r&&(o=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(oi){if(o?as(t):ls(),oi){var l,c=ii;if(l=c){e:{for(l=c,c=si;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=yd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Xr?{id:Jr,overflow:$r}:null,retryLane:536870912,hydrationErrors:null},(l=Or(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ci(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gd(c)?t.lanes=32:t.lanes=536870912,null;cs(t)}return c=i.children,i=i.fallback,o?(ls(),c=Hs({mode:"hidden",children:c},o=t.mode),i=Ur(i,o,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(o=t.child).memoizedState=Bs(n),o.childLanes=Us(e,r,n),t.memoizedState=Ws,i):(as(t),qs(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(s)256&t.flags?(as(t),t.flags&=-257,t=Vs(e,t,n)):null!==t.memoizedState?(ls(),t.child=e.child,t.flags|=128,t=null):(ls(),o=i.fallback,c=t.mode,i=Hs({mode:"visible",children:i.children},c),(o=Ur(o,c,n,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,ns(t,e.child,null,n),(i=t.child).memoizedState=Bs(n),i.childLanes=Us(e,r,n),t.memoizedState=Ws,t=o);else if(as(t),gd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(a(419))).stack="",i.digest=r,mi({value:i,source:null,stack:null}),t=Vs(e,t,n)}else if(_s||Si(e,t,n,!1),r=0!==(n&e.childLanes),_s||r){if(null!==(r=rc)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:De(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Ir(e,i),Oc(r,e,i),Cs;"$?"===c.data||Yc(),t=Vs(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=yd(c.nextSibling),ri=t,oi=!0,ai=null,si=!1,null!==e&&(Gr[Qr++]=Jr,Gr[Qr++]=$r,Gr[Qr++]=Xr,Jr=e.id,$r=e.overflow,Xr=t),(t=qs(t,i.children)).flags|=4096);return t}return o?(ls(),o=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=Lr(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?o=Lr(u,o):(o=Ur(o,c,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,null===(c=e.child.memoizedState)?c=Bs(n):(null!==(l=c.cachePool)?(u=Pi._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Hi(),c={baseLanes:c.baseLanes|n,cachePool:l}),o.memoizedState=c,o.childLanes=Us(e,r,n),t.memoizedState=Ws,i):(as(t),e=(n=e.child).sibling,(n=Lr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function qs(e,t){return(t=Hs({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Hs(e,t){return(e=Or(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Vs(e,t,n){return ns(t,e.child,null,n),(e=qs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ks(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ki(e.return,t,n)}function Ys(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Gs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ds(e,t,r.children,n),0!==(2&(r=us.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ks(e,n,t);else if(19===e.tag)Ks(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(U(us,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ds(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ys(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ds(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ys(t,!0,n,null,o);break;case"together":Ys(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Si(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Lr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xs(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ei(e))}function Js(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)_s=!0;else{if(!Xs(e,n)&&0===(128&t.flags))return _s=!1,function(e,t,n){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),bi(0,Pi,e.memoizedState.cache),pi();break;case 27:case 5:G(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:bi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(as(t),t.flags|=128,null):0!==(n&t.child.childLanes)?zs(e,t,n):(as(t),null!==(e=Qs(e,t,n))?e.sibling:null);as(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Si(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Gs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),U(us,us.current),r)break;return null;case 22:case 23:return t.lanes=0,Ps(e,t,n);case 24:bi(0,Pi,e.memoizedState.cache)}return Qs(e,t,n)}(e,t,n);_s=0!==(131072&e.flags)}else _s=!1,oi&&0!==(1048576&t.flags)&&ei(t,Yr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===x){t.tag=11,t=As(null,t,r,e,n);break e}if(i===T){t.tag=14,t=Rs(null,t,r,e,n);break e}}throw t=P(r)||r,Error(a(306,t,""))}Fr(r)?(e=gs(r,e),t.tag=1,t=Fs(null,t,r,e,n)):(t.tag=0,t=js(null,t,r,e,n))}return t;case 0:return js(e,t,t.type,t.pendingProps,n);case 1:return Fs(e,t,r=t.type,i=gs(r,t.pendingProps),n);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var o=t.memoizedState;i=o.element,ro(e,t),uo(t,r,null,n);var s=t.memoizedState;if(r=s.cache,bi(0,Pi,r),r!==o.cache&&xi(t,[Pi],n,!0),co(),r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ls(e,t,r,n);break e}if(r!==i){mi(i=Er(Error(a(424)),t)),t=Ls(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=yd(e.firstChild),ri=t,oi=!0,ai=null,si=!0,n=rs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===i){t=Qs(e,t,n);break e}Ds(e,t,r,n)}t=t.child}return t;case 26:return Ns(e,t),null===e?(n=Dd(t.type,null,t.pendingProps,null))?t.memoizedState=n:oi||(n=t.type,e=t.pendingProps,(r=rd(H.current).createElement(n))[Pe]=t,r[Me]=e,ed(r,n,e),Ve(r),t.stateNode=r):t.memoizedState=Dd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return G(t),null===e&&oi&&(r=t.stateNode=wd(t.type,t.pendingProps,H.current),ri=t,si=!0,i=ii,pd(t.type)?(vd=i,ii=yd(r.firstChild)):ii=i),Ds(e,t,t.pendingProps.children,n),Ns(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&oi&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[We])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===o)return e}if(null===(e=yd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,si))?(t.stateNode=r,ri=t,ii=yd(r.firstChild),si=!1,i=!0):i=!1),i||ci(t)),G(t),i=t.type,o=t.pendingProps,s=null!==e?e.memoizedProps:null,r=o.children,ad(i,o)?r=null:null!==s&&ad(i,s)&&(t.flags|=32),null!==t.memoizedState&&(i=Po(e,t,jo,null,null,n),Gd._currentValue=i),Ns(e,t),Ds(e,t,r,n),t.child;case 6:return null===e&&oi&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(n,t.pendingProps,si))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ci(t)),null;case 13:return zs(e,t,n);case 4:return K(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ns(t,null,r,n):Ds(e,t,r,n),t.child;case 11:return As(e,t,t.type,t.pendingProps,n);case 7:return Ds(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ds(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,bi(0,t.type,r.value),Ds(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ti(t),r=r(i=Ci(i)),t.flags|=1,Ds(e,t,r,n),t.child;case 14:return Rs(e,t,t.type,t.pendingProps,n);case 15:return Is(e,t,t.type,t.pendingProps,n);case 19:return Gs(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Hs(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Lr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ps(e,t,n);case 24:return Ti(t),r=Ci(Pi),null===e?(null===(i=zi())&&(i=rc,o=Mi(),i.pooledCache=o,o.refCount++,null!==o&&(i.pooledCacheLanes|=n),i=o),t.memoizedState={parent:r,cache:i},no(t),bi(0,Pi,i)):(0!==(e.lanes&n)&&(ro(e,t),uo(t,null,null,n),co()),i=e.memoizedState,o=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),bi(0,Pi,r)):(r=o.cache,bi(0,Pi,r),r!==i.cache&&xi(t,[Pi],n,!0))),Ds(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function $s(e){e.flags|=4}function Zs(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Ud(t)){if(null!==(t=is.current)&&((4194048&oc)===oc?null!==os:(62914560&oc)!==oc&&0===(536870912&oc)||t!==os))throw $i=Gi,Ki;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,yc|=t)}function tl(e,t){if(!oi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),wi(Pi),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hi(t)?$s(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,fi())),nl(t),null;case 26:return n=t.memoizedState,null===e?($s(t),null!==n?(nl(t),Zs(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?($s(t),nl(t),Zs(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&$s(t),nl(t),t.flags&=-16777217),null;case 27:Q(t),n=H.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&$s(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}e=z.current,hi(t)?ui(t):(e=wd(i,r,n),t.stateNode=e,$s(t))}return nl(t),null;case 5:if(Q(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&$s(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}if(e=z.current,hi(t))ui(t);else{switch(i=rd(H.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Pe]=t,e[Me]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&$s(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&$s(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=H.current,hi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Pe]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Xu(e.nodeValue,n)))||ci(t)}else(e=rd(e).createTextNode(r))[Pe]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[Pe]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),i=!1}else i=fi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(cs(t),t):(cs(t),null)}if(cs(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var o=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return Y(),null===e&&Bu(t.stateNode.containerInfo),nl(t),null;case 10:return wi(t.type),nl(t),null;case 19:if(B(us),null===(i=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(o=i.rendering))if(r)tl(i,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=ds(e))){for(t.flags|=128,tl(i,!1),e=o.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Wr(n,e),n=n.sibling;return U(us,1&us.current|2),t.child}e=e.sibling}null!==i.tail&&te()>xc&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ds(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!oi)return nl(t),null}else 2*te()-i.renderingStartTime>xc&&536870912!==n&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=i.last)?e.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=us.current,U(us,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return cs(t),vo(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&B(Ui),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),wi(Pi),nl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function il(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return wi(Pi),Y(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 13:if(cs(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(us),null;case 4:return Y(),null;case 10:return wi(t.type),null;case 22:case 23:return cs(t),vo(),null!==e&&B(Ui),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return wi(Pi),null;default:return null}}function ol(e,t){switch(ni(t),t.tag){case 3:wi(Pi),Y();break;case 26:case 27:case 5:Q(t);break;case 4:Y();break;case 13:cs(t);break;case 19:B(us);break;case 10:wi(t.type);break;case 22:case 23:cs(t),vo(),null!==e&&B(Ui);break;case 24:wi(Pi)}}function al(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var o=n.create,a=n.inst;r=o(),a.destroy=r}n=n.next}while(n!==i)}}catch(s){uu(t,t.return,s)}}function sl(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var o=i.next;r=o;do{if((r.tag&e)===e){var a=r.inst,s=a.destroy;if(void 0!==s){a.destroy=void 0,i=t;var l=n,c=s;try{c()}catch(u){uu(i,l,u)}}}r=r.next}while(r!==o)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{po(t,n)}catch(r){uu(e,e.return,r)}}}function cl(e,t,n){n.props=gs(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){uu(e,t,r)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){uu(e,t,i)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){uu(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(o){uu(e,t,o)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){uu(e,e.return,i)}}function pl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,o=null,s=null,l=null,c=null,u=null,d=null;for(f in n){var h=n[f];if(n.hasOwnProperty(f)&&null!=h)switch(f){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(f)||$u(e,t,f,null,r,h)}}for(var p in r){var f=r[p];if(h=n[p],r.hasOwnProperty(p)&&(null!=f||null!=h))switch(p){case"type":o=f;break;case"name":i=f;break;case"checked":u=f;break;case"defaultChecked":d=f;break;case"value":s=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:f!==h&&$u(e,t,p,f,r,h)}}return void gt(e,s,l,c,u,d,o,i);case"select":for(o in f=s=l=p=null,n)if(c=n[o],n.hasOwnProperty(o)&&null!=c)switch(o){case"value":break;case"multiple":f=c;default:r.hasOwnProperty(o)||$u(e,t,o,null,r,c)}for(i in r)if(o=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=o||null!=c))switch(i){case"value":p=o;break;case"defaultValue":l=o;break;case"multiple":s=o;default:o!==c&&$u(e,t,i,o,r,c)}return t=l,n=s,r=f,void(null!=p?bt(e,!!n,p,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=p=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:$u(e,t,l,null,r,i)}for(s in r)if(i=r[s],o=n[s],r.hasOwnProperty(s)&&(null!=i||null!=o))switch(s){case"value":p=i;break;case"defaultValue":f=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(a(91));break;default:i!==o&&$u(e,t,s,i,r,o)}return void wt(e,p,f);case"option":for(var m in n)if(p=n[m],n.hasOwnProperty(m)&&null!=p&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else $u(e,t,m,null,r,p);for(c in r)if(p=r[c],f=n[c],r.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else $u(e,t,c,p,r,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g)&&$u(e,t,g,null,r,p);for(u in r)if(p=r[u],f=n[u],r.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:$u(e,t,u,p,r,f)}return;default:if(Ct(t)){for(var y in n)p=n[y],n.hasOwnProperty(y)&&void 0!==p&&!r.hasOwnProperty(y)&&Zu(e,t,y,void 0,r,p);for(d in r)p=r[d],f=n[d],!r.hasOwnProperty(d)||p===f||void 0===p&&void 0===f||Zu(e,t,d,p,r,f);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&null!=p&&!r.hasOwnProperty(v)&&$u(e,t,v,null,r,p);for(h in r)p=r[h],f=n[h],!r.hasOwnProperty(h)||p===f||null==p&&null==f||$u(e,t,h,p,r,f)}(r,e.type,n,t),r[Me]=t}catch(i){uu(e,e.return,i)}}function fl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&pd(e.type)||4===e.tag}function ml(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||fl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&pd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ju));else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ed(t,r,n),t[Pe]=e,t[Me]=n}catch(o){uu(e,e.return,o)}}var bl=!1,wl=!1,kl=!1,xl="function"===typeof WeakSet?WeakSet:Set,Sl=null;function El(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Fl(e,n),4&r&&al(5,n);break;case 1:if(Fl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){uu(n,n.return,a)}else{var i=gs(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){uu(n,n.return,s)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(Fl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{po(e,t)}catch(a){uu(n,n.return,a)}}break;case 27:null===t&&4&r&&vl(n);case 26:case 5:Fl(e,n),null===t&&4&r&&hl(n),512&r&&ul(n,n.return);break;case 12:Fl(e,n);break;case 13:Fl(e,n),4&r&&Rl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=fu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||bl)){t=null!==t&&null!==t.memoizedState||wl,i=bl;var o=wl;bl=r,(wl=t)&&!o?Wl(e,n,0!==(8772&n.subtreeFlags)):Fl(e,n),bl=i,wl=o}break;case 30:break;default:Fl(e,n)}}function Tl(e){var t=e.alternate;null!==t&&(e.alternate=null,Tl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Be(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Cl=null,_l=!1;function Dl(e,t,n){for(n=n.child;null!==n;)Al(e,t,n),n=n.sibling}function Al(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(o){}switch(n.tag){case 26:wl||dl(n,t),Dl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:wl||dl(n,t);var r=Cl,i=_l;pd(n.type)&&(Cl=n.stateNode,_l=!1),Dl(e,t,n),kd(n.stateNode),Cl=r,_l=i;break;case 5:wl||dl(n,t);case 6:if(r=Cl,i=_l,Cl=null,Dl(e,t,n),_l=i,null!==(Cl=r))if(_l)try{(9===Cl.nodeType?Cl.body:"HTML"===Cl.nodeName?Cl.ownerDocument.body:Cl).removeChild(n.stateNode)}catch(a){uu(n,t,a)}else try{Cl.removeChild(n.stateNode)}catch(a){uu(n,t,a)}break;case 18:null!==Cl&&(_l?(fd(9===(e=Cl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),_h(e)):fd(Cl,n.stateNode));break;case 4:r=Cl,i=_l,Cl=n.stateNode.containerInfo,_l=!0,Dl(e,t,n),Cl=r,_l=i;break;case 0:case 11:case 14:case 15:wl||sl(2,n,t),wl||sl(4,n,t),Dl(e,t,n);break;case 1:wl||(dl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),Dl(e,t,n);break;case 21:Dl(e,t,n);break;case 22:wl=(r=wl)||null!==n.memoizedState,Dl(e,t,n),wl=r;break;default:Dl(e,t,n)}}function Rl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{_h(e)}catch(n){uu(t,t.return,n)}}function Il(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new xl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new xl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var r=mu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(pd(l.type)){Cl=l.stateNode,_l=!1;break e}break;case 5:Cl=l.stateNode,_l=!1;break e;case 3:case 4:Cl=l.stateNode.containerInfo,_l=!0;break e}l=l.return}if(null===Cl)throw Error(a(160));Al(o,s,i),Cl=null,_l=!1,null!==(o=i.alternate)&&(o.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Nl(t,e),t=t.sibling}var Ml=null;function Nl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pl(t,e),jl(e),4&r&&(sl(3,e,e.return),al(3,e),sl(5,e,e.return));break;case 1:Pl(t,e),jl(e),512&r&&(wl||null===n||dl(n,n.return)),64&r&&bl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Ml;if(Pl(t,e),jl(e),512&r&&(wl||null===n||dl(n,n.return)),4&r){var o=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(o=i.getElementsByTagName("title")[0])||o[We]||o[Pe]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=i.createElement(r),i.head.insertBefore(o,i.querySelector("head > title"))),ed(o,r,n),o[Pe]=e,Ve(o),r=o;break e;case"link":var s=Wd("link","href",i).get(r+(n.href||""));if(s)for(var l=0;l<s.length;l++)if((o=s[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&o.getAttribute("rel")===(null==n.rel?null:n.rel)&&o.getAttribute("title")===(null==n.title?null:n.title)&&o.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(l,1);break t}ed(o=i.createElement(r),r,n),i.head.appendChild(o);break;case"meta":if(s=Wd("meta","content",i).get(r+(n.content||"")))for(l=0;l<s.length;l++)if((o=s[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&o.getAttribute("name")===(null==n.name?null:n.name)&&o.getAttribute("property")===(null==n.property?null:n.property)&&o.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&o.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(l,1);break t}ed(o=i.createElement(r),r,n),i.head.appendChild(o);break;default:throw Error(a(468,r))}o[Pe]=e,Ve(o),r=o}e.stateNode=r}else Bd(i,e.type,e.stateNode);else e.stateNode=Nd(i,r,e.memoizedProps);else o!==r?(null===o?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):o.count--,null===r?Bd(i,e.type,e.stateNode):Nd(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&pl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Pl(t,e),jl(e),512&r&&(wl||null===n||dl(n,n.return)),null!==n&&4&r&&pl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Pl(t,e),jl(e),512&r&&(wl||null===n||dl(n,n.return)),32&e.flags){i=e.stateNode;try{xt(i,"")}catch(f){uu(e,e.return,f)}}4&r&&null!=e.stateNode&&pl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(kl=!0);break;case 6:if(Pl(t,e),jl(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(f){uu(e,e.return,f)}}break;case 3:if(Ld=null,i=Ml,Ml=Ed(t.containerInfo),Pl(t,e),Ml=i,jl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{_h(t.containerInfo)}catch(f){uu(e,e.return,f)}kl&&(kl=!1,Ol(e));break;case 4:r=Ml,Ml=Ed(e.stateNode.containerInfo),Pl(t,e),jl(e),Ml=r;break;case 12:default:Pl(t,e),jl(e);break;case 13:Pl(t,e),jl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(kc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Il(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=bl,d=wl;if(bl=u||i,wl=d||c,Pl(t,e),wl=d,bl=u,jl(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||bl||wl||Ll(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(o=c.stateNode,i)"function"===typeof(s=o.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,p=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(f){uu(c,c.return,f)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(f){uu(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Il(e,n))));break;case 19:Pl(t,e),jl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Il(e,r)));case 30:case 21:}}function jl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(fl(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var i=n.stateNode;yl(e,ml(e),i);break;case 5:var o=n.stateNode;32&n.flags&&(xt(o,""),n.flags&=-33),yl(e,ml(e),o);break;case 3:case 4:var s=n.stateNode.containerInfo;gl(e,ml(e),s);break;default:throw Error(a(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ol(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ol(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)El(e,t.alternate,t),t=t.sibling}function Ll(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sl(4,t,t.return),Ll(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Ll(t);break;case 27:kd(t.stateNode);case 26:case 5:dl(t,t.return),Ll(t);break;case 22:null===t.memoizedState&&Ll(t);break;default:Ll(t)}e=e.sibling}}function Wl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,o=t,a=o.flags;switch(o.tag){case 0:case 11:case 15:Wl(i,o,n),al(4,o);break;case 1:if(Wl(i,o,n),"function"===typeof(i=(r=o).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){uu(r,r.return,c)}if(null!==(i=(r=o).updateQueue)){var s=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)ho(l[i],s)}catch(c){uu(r,r.return,c)}}n&&64&a&&ll(o),ul(o,o.return);break;case 27:vl(o);case 26:case 5:Wl(i,o,n),n&&null===r&&4&a&&hl(o),ul(o,o.return);break;case 12:Wl(i,o,n);break;case 13:Wl(i,o,n),n&&4&a&&Rl(i,o);break;case 22:null===o.memoizedState&&Wl(i,o,n),ul(o,o.return);break;case 30:break;default:Wl(i,o,n)}t=t.sibling}}function Bl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ni(n))}function Ul(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ni(e))}function zl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ql(e,t,n,r),t=t.sibling}function ql(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:zl(e,t,n,r),2048&i&&al(9,t);break;case 1:case 13:default:zl(e,t,n,r);break;case 3:zl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ni(e)));break;case 12:if(2048&i){zl(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,a=o.id,s=o.onPostCommit;"function"===typeof s&&s(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else zl(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,a=t.alternate,null!==t.memoizedState?2&o._visibility?zl(e,t,n,r):Vl(e,t):2&o._visibility?zl(e,t,n,r):(o._visibility|=2,Hl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&Bl(a,t);break;case 24:zl(e,t,n,r),2048&i&&Ul(t.alternate,t)}}function Hl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,a=t,s=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:Hl(o,a,s,l,i),al(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?Hl(o,a,s,l,i):Vl(o,a):(u._visibility|=2,Hl(o,a,s,l,i)),i&&2048&c&&Bl(a.alternate,a);break;case 24:Hl(o,a,s,l,i),i&&2048&c&&Ul(a.alternate,a);break;default:Hl(o,a,s,l,i)}t=t.sibling}}function Vl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Vl(n,r),2048&i&&Bl(r.alternate,r);break;case 24:Vl(n,r),2048&i&&Ul(r.alternate,r);break;default:Vl(n,r)}t=t.sibling}}var Kl=8192;function Yl(e){if(e.subtreeFlags&Kl)for(e=e.child;null!==e;)Gl(e),e=e.sibling}function Gl(e){switch(e.tag){case 26:Yl(e),e.flags&Kl&&null!==e.memoizedState&&function(e,t,n){if(null===zd)throw Error(a(475));var r=zd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Ad(n.href),o=e.querySelector(Rd(i));if(o)return null!==(e=o._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Hd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=o,void Ve(o);o=e.ownerDocument||e,n=Id(n),(i=xd.get(i))&&Od(n,i),Ve(o=o.createElement("link"));var s=o;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ed(o,"link",n),t.instance=o}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Hd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ml,e.memoizedState,e.memoizedProps);break;case 5:default:Yl(e);break;case 3:case 4:var t=Ml;Ml=Ed(e.stateNode.containerInfo),Yl(e),Ml=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Kl,Kl=16777216,Yl(e),Kl=t):Yl(e))}}function Ql(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Xl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Sl=r,Zl(r,e)}Ql(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Jl(e),e=e.sibling}function Jl(e){switch(e.tag){case 0:case 11:case 15:Xl(e),2048&e.flags&&sl(9,e,e.return);break;case 3:case 12:default:Xl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,$l(e)):Xl(e)}}function $l(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Sl=r,Zl(r,e)}Ql(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:sl(8,t,t.return),$l(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,$l(t));break;default:$l(t)}e=e.sibling}}function Zl(e,t){for(;null!==Sl;){var n=Sl;switch(n.tag){case 0:case 11:case 15:sl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ni(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Sl=r;else e:for(n=e;null!==Sl;){var i=(r=Sl).sibling,o=r.return;if(Tl(r),r===n){Sl=null;break e}if(null!==i){i.return=o,Sl=i;break e}Sl=o}}}var ec={getCacheForType:function(e){var t=Ci(Pi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,ic=null,oc=0,ac=0,sc=null,lc=!1,cc=!1,uc=!1,dc=0,hc=0,pc=0,fc=0,mc=0,gc=0,yc=0,vc=null,bc=null,wc=!1,kc=0,xc=1/0,Sc=null,Ec=null,Tc=0,Cc=null,_c=null,Dc=0,Ac=0,Rc=null,Ic=null,Pc=0,Mc=null;function Nc(){if(0!==(2&nc)&&0!==oc)return oc&-oc;if(null!==N.T){return 0!==Fi?Fi:Au()}return Re()}function jc(){0===gc&&(gc=0===(536870912&oc)||oi?xe():536870912);var e=is.current;return null!==e&&(e.flags|=32),gc}function Oc(e,t,n){(e!==rc||2!==ac&&9!==ac)&&null===e.cancelPendingCommit||(qc(e,0),Bc(e,oc,gc,!1)),Te(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(fc|=n),4===hc&&Bc(e,oc,gc,!1)),xu(e))}function Fc(e,t,n){if(0!==(6&nc))throw Error(a(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),i=r?function(e,t){var n=nc;nc|=2;var r=Vc(),i=Kc();rc!==e||oc!==t?(Sc=null,xc=te()+500,qc(e,t)):cc=we(e,t);e:for(;;)try{if(0!==ac&&null!==ic){t=ic;var o=sc;t:switch(ac){case 1:ac=0,sc=null,Zc(e,t,o,1);break;case 2:case 9:if(Qi(o)){ac=0,sc=null,$c(t);break}t=function(){2!==ac&&9!==ac||rc!==e||(ac=7),xu(e)},o.then(t,t);break e;case 3:ac=7;break e;case 4:ac=5;break e;case 7:Qi(o)?(ac=0,sc=null,$c(t)):(ac=0,sc=null,Zc(e,t,o,7));break;case 5:var s=null;switch(ic.tag){case 26:s=ic.memoizedState;case 5:case 27:var l=ic;if(!s||Ud(s)){ac=0,sc=null;var c=l.sibling;if(null!==c)ic=c;else{var u=l.return;null!==u?(ic=u,eu(u)):ic=null}break t}}ac=0,sc=null,Zc(e,t,o,5);break;case 6:ac=0,sc=null,Zc(e,t,o,6);break;case 8:zc(),hc=6;break e;default:throw Error(a(462))}}Xc();break}catch(d){Hc(e,d)}return vi=yi=null,N.H=r,N.A=i,nc=n,null!==ic?0:(rc=null,oc=0,Dr(),hc)}(e,t):Gc(e,t,!0),o=r;;){if(0===i){cc&&!r&&Bc(e,t,0,!1);break}if(n=e.current.alternate,!o||Wc(n)){if(2===i){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;i=vc;var c=l.current.memoizedState.isDehydrated;if(c&&(qc(l,s).flags|=256),2!==(s=Gc(l,s,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=o,fc|=o,i=4;break e}o=bc,bc=i,null!==o&&(null===bc?bc=o:bc.push.apply(bc,o))}i=s}if(o=!1,2!==i)continue}}if(1===i){qc(e,0),Bc(e,t,0,!0);break}e:{switch(r=e,o=i){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Bc(r,t,gc,!lc);break e;case 2:bc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(i=kc+300-te())){if(Bc(r,t,gc,!lc),0!==be(r,0,!0))break e;r.timeoutHandle=ld(Lc.bind(null,r,n,bc,Sc,wc,t,gc,fc,yc,lc,o,2,-0,0),i)}else Lc(r,n,bc,Sc,wc,t,gc,fc,yc,lc,o,0,-0,0)}break}i=Gc(e,t,!1),o=!1}xu(e)}function Lc(e,t,n,r,i,o,s,l,c,u,d,h,p,f){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(zd={stylesheets:null,count:0,unsuspend:qd},Gl(t),null!==(h=function(){if(null===zd)throw Error(a(475));var e=zd;return e.stylesheets&&0===e.count&&Kd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Kd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nu.bind(null,e,t,o,n,r,i,s,l,c,d,1,p,f)),void Bc(e,o,s,!u);nu(e,t,o,n,r,i,s,l,c)}function Wc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Qn(o(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bc(e,t,n,r){t&=~mc,t&=~fc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var o=31-pe(i),a=1<<o;r[o]=-1,i&=~a}0!==n&&Ce(e,n,t)}function Uc(){return 0!==(6&nc)||(Su(0,!1),!1)}function zc(){if(null!==ic){if(0===ac)var e=ic.return;else vi=yi=null,Lo(e=ic),Qa=null,Xa=0,e=ic;for(;null!==e;)ol(e.alternate,e),e=e.return;ic=null}}function qc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),zc(),rc=e,ic=n=Lr(e.current,null),oc=t,ac=0,sc=null,lc=!1,cc=we(e,t),uc=!1,yc=gc=mc=fc=pc=hc=0,bc=vc=null,wc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-pe(r),o=1<<i;t|=e[i],r&=~o}return dc=t,Dr(),n}function Hc(e,t){wo=null,N.H=Va,t===Vi||t===Yi?(t=Zi(),ac=3):t===Ki?(t=Zi(),ac=4):ac=t===Cs?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,sc=t,null===ic&&(hc=1,ks(e,Er(t,e.current)))}function Vc(){var e=N.H;return N.H=Va,null===e?Va:e}function Kc(){var e=N.A;return N.A=ec,e}function Yc(){hc=4,lc||(4194048&oc)!==oc&&null!==is.current||(cc=!0),0===(134217727&pc)&&0===(134217727&fc)||null===rc||Bc(rc,oc,gc,!1)}function Gc(e,t,n){var r=nc;nc|=2;var i=Vc(),o=Kc();rc===e&&oc===t||(Sc=null,qc(e,t)),t=!1;var a=hc;e:for(;;)try{if(0!==ac&&null!==ic){var s=ic,l=sc;switch(ac){case 8:zc(),a=6;break e;case 3:case 2:case 9:case 6:null===is.current&&(t=!0);var c=ac;if(ac=0,sc=null,Zc(e,s,l,c),n&&cc){a=0;break e}break;default:c=ac,ac=0,sc=null,Zc(e,s,l,c)}}Qc(),a=hc;break}catch(u){Hc(e,u)}return t&&e.shellSuspendCounter++,vi=yi=null,nc=r,N.H=i,N.A=o,null===ic&&(rc=null,oc=0,Dr()),a}function Qc(){for(;null!==ic;)Jc(ic)}function Xc(){for(;null!==ic&&!Z();)Jc(ic)}function Jc(e){var t=Js(e.alternate,e,dc);e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function $c(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Os(n,t,t.pendingProps,t.type,void 0,oc);break;case 11:t=Os(n,t,t.pendingProps,t.type.render,t.ref,oc);break;case 5:Lo(t);default:ol(n,t),t=Js(n,t=ic=Wr(t,dc),dc)}e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function Zc(e,t,n,r){vi=yi=null,Lo(t),Qa=null,Xa=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Si(t,n,i,!0),null!==(n=is.current)){switch(n.tag){case 13:return null===os?Yc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Gi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),du(e,r,i)),!1;case 22:return n.flags|=65536,r===Gi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),du(e,r,i)),!1}throw Error(a(435,n.tag))}return du(e,r,i),Yc(),!1}if(oi)return null!==(t=is.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&mi(Er(e=Error(a(422),{cause:r}),n))):(r!==li&&mi(Er(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Er(r,n),so(e,i=Ss(e.stateNode,r,i)),4!==hc&&(hc=2)),!1;var o=Error(a(520),{cause:r});if(o=Er(o,n),null===vc?vc=[o]:vc.push(o),4!==hc&&(hc=2),null===t)return!0;r=Er(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,so(n,e=Ss(n.stateNode,r,e)),!1;case 1:if(t=n.type,o=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==o&&"function"===typeof o.componentDidCatch&&(null===Ec||!Ec.has(o))))return n.flags|=65536,i&=-i,n.lanes|=i,Ts(i=Es(i),e,n,r),so(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,oc))return hc=1,ks(e,Er(n,e.current)),void(ic=null)}catch(o){if(null!==i)throw ic=i,o;return hc=1,ks(e,Er(n,e.current)),void(ic=null)}32768&t.flags?(oi||1===r?e=!0:cc||0!==(536870912&oc)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=is.current)&&13===r.tag&&(r.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=rl(t.alternate,t,dc);if(null!==n)return void(ic=n);if(null!==(t=t.sibling))return void(ic=t);ic=t=e}while(null!==t);0===hc&&(hc=5)}function tu(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(ic=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ic=e);ic=e=n}while(null!==e);hc=6,ic=null}function nu(e,t,n,r,i,o,s,l,c){e.cancelPendingCommit=null;do{su()}while(0!==Tc);if(0!==(6&nc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(o=t.lanes|t.childLanes,function(e,t,n,r,i,o){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-pe(n),d=1<<u;s[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var p=h[u];null!==p&&(p.lane&=-536870913)}n&=~d}0!==r&&Ce(e,r,0),0!==o&&0===i&&0!==e.tag&&(e.suspendedLanes|=o&~(a&~t))}(e,n,o|=_r,s,l,c),e===rc&&(ic=rc=null,oc=0),_c=t,Cc=e,Dc=n,Ac=o,Rc=i,Ic=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,J(oe,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=N.T,N.T=null,i=j.p,j.p=2,s=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(g){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==o||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===i&&(l=s),p===o&&++d===r&&(c=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,Sl=t;null!==Sl;)if(e=(t=Sl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,Sl=e;else for(;null!==Sl;){switch(o=(t=Sl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==o){e=void 0,n=t,i=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var m=gs(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){uu(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))md(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":md(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Sl=e;break}Sl=t.return}}(e,t)}finally{nc=s,j.p=i,N.T=r}}Tc=1,ru(),iu(),ou()}}function ru(){if(1===Tc){Tc=0;var e=Cc,t=_c,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=N.T,N.T=null;var r=j.p;j.p=2;var i=nc;nc|=4;try{Nl(t,e);var o=nd,a=er(e.containerInfo),s=o.focusedElem,l=o.selectionRange;if(a!==s&&s&&s.ownerDocument&&Zn(s.ownerDocument.documentElement,s)){if(null!==l&&tr(s)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in s)s.selectionStart=c,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var p=h.getSelection(),f=s.textContent.length,m=Math.min(l.start,f),g=void 0===l.end?m:Math.min(l.end,f);!p.extend&&m>g&&(a=g,g=m,m=a);var y=$n(s,m),v=$n(s,g);if(y&&v&&(1!==p.rangeCount||p.anchorNode!==y.node||p.anchorOffset!==y.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),p.removeAllRanges(),m>g?(p.addRange(b),p.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),p.addRange(b))}}}}for(d=[],p=s;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<d.length;s++){var w=d[s];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}nh=!!td,nd=td=null}finally{nc=i,j.p=r,N.T=n}}e.current=t,Tc=2}}function iu(){if(2===Tc){Tc=0;var e=Cc,t=_c,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=N.T,N.T=null;var r=j.p;j.p=2;var i=nc;nc|=4;try{El(e,t.alternate,t)}finally{nc=i,j.p=r,N.T=n}}Tc=3}}function ou(){if(4===Tc||3===Tc){Tc=0,ee();var e=Cc,t=_c,n=Dc,r=Ic;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Tc=5:(Tc=0,_c=Cc=null,au(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Ec=null),Ae(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=N.T,i=j.p,j.p=2,N.T=null;try{for(var o=e.onRecoverableError,a=0;a<r.length;a++){var s=r[a];o(s.value,{componentStack:s.stack})}}finally{N.T=t,j.p=i}}0!==(3&Dc)&&su(),xu(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Mc?Pc++:(Pc=0,Mc=e):Pc=0,Su(0,!1)}}function au(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ni(t)))}function su(e){return ru(),iu(),ou(),lu()}function lu(){if(5!==Tc)return!1;var e=Cc,t=Ac;Ac=0;var n=Ae(Dc),r=N.T,i=j.p;try{j.p=32>n?32:n,N.T=null,n=Rc,Rc=null;var o=Cc,s=Dc;if(Tc=0,_c=Cc=null,Dc=0,0!==(6&nc))throw Error(a(331));var l=nc;if(nc|=4,Jl(o.current),ql(o,o.current,s,n),nc=l,Su(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,o)}catch(c){}return!0}finally{j.p=i,N.T=r,au(e,t)}}function cu(e,t,n){t=Er(n,t),null!==(e=oo(e,t=Ss(e.stateNode,t,2),2))&&(Te(e,2),xu(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ec||!Ec.has(r))){e=Er(n,e),null!==(r=oo(t,n=Es(2),2))&&(Ts(n,r,t,e),Te(r,2),xu(r));break}}t=t.return}}function du(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(uc=!0,i.add(n),e=hu.bind(null,e,t,n),t.then(e,e))}function hu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(oc&n)===n&&(4===hc||3===hc&&(62914560&oc)===oc&&300>te()-kc?0===(2&nc)&&qc(e,0):mc|=n,yc===oc&&(yc=0)),xu(e)}function pu(e,t){0===t&&(t=Se()),null!==(e=Ir(e,t))&&(Te(e,t),xu(e))}function fu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pu(e,n)}function mu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),pu(e,n)}var gu=null,yu=null,vu=!1,bu=!1,wu=!1,ku=0;function xu(e){e!==yu&&null===e.next&&(null===yu?gu=yu=e:yu=yu.next=e),bu=!0,vu||(vu=!0,dd(function(){0!==(6&nc)?J(re,Eu):Tu()}))}function Su(e,t){if(!wu&&bu){wu=!0;do{for(var n=!1,r=gu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var o=0;else{var a=r.suspendedLanes,s=r.pingedLanes;o=(1<<31-pe(42|e)+1)-1,o=201326741&(o&=i&~(a&~s))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,Du(r,o))}else o=oc,0===(3&(o=be(r,r===rc?o:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,o)||(n=!0,Du(r,o));r=r.next}}while(n);wu=!1}}function Eu(){Tu()}function Tu(){bu=vu=!1;var e=0;0!==ku&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==sd&&(sd=e,!0);return sd=null,!1}()&&(e=ku),ku=0);for(var t=te(),n=null,r=gu;null!==r;){var i=r.next,o=Cu(r,t);0===o?(r.next=null,null===n?gu=i:n.next=i,null===i&&(yu=n)):(n=r,(0!==e||0!==(3&o))&&(bu=!0)),r=i}Su(e,!1)}function Cu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var a=31-pe(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=ke(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}if(n=oc,n=be(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===ac||9===ac)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&$(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&$(r),Ae(n)){case 2:case 8:n=ie;break;case 32:default:n=oe;break;case 268435456:n=se}return r=_u.bind(null,e),n=J(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&$(r),e.callbackPriority=2,e.callbackNode=null,2}function _u(e,t){if(0!==Tc&&5!==Tc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(su()&&e.callbackNode!==n)return null;var r=oc;return 0===(r=be(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Fc(e,r,t),Cu(e,te()),null!=e.callbackNode&&e.callbackNode===n?_u.bind(null,e):null)}function Du(e,t){if(su())return null;Fc(e,t,!0)}function Au(){return 0===ku&&(ku=xe()),ku}function Ru(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:At(""+e)}function Iu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Pu=0;Pu<kr.length;Pu++){var Mu=kr[Pu];xr(Mu.toLowerCase(),"on"+(Mu[0].toUpperCase()+Mu.slice(1)))}xr(pr,"onAnimationEnd"),xr(fr,"onAnimationIteration"),xr(mr,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(gr,"onTransitionRun"),xr(yr,"onTransitionStart"),xr(vr,"onTransitionCancel"),xr(br,"onTransitionEnd"),Qe("onMouseEnter",["mouseout","mouseover"]),Qe("onMouseLeave",["mouseout","mouseover"]),Qe("onPointerEnter",["pointerout","pointerover"]),Qe("onPointerLeave",["pointerout","pointerover"]),Ge("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ge("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ge("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ge("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ju=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nu));function Ou(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=c;try{o(i)}catch(u){ys(u)}i.currentTarget=null,o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=c;try{o(i)}catch(u){ys(u)}i.currentTarget=null,o=l}}}}function Fu(e,t){var n=t[je];void 0===n&&(n=t[je]=new Set);var r=e+"__bubble";n.has(r)||(Uu(t,e,2,!1),n.add(r))}function Lu(e,t,n){var r=0;t&&(r|=4),Uu(n,e,r,t)}var Wu="_reactListening"+Math.random().toString(36).slice(2);function Bu(e){if(!e[Wu]){e[Wu]=!0,Ke.forEach(function(t){"selectionchange"!==t&&(ju.has(t)||Lu(t,!1,e),Lu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Wu]||(t[Wu]=!0,Lu("selectionchange",!1,t))}}function Uu(e,t,n,r){switch(ch(t)){case 2:var i=rh;break;case 8:i=ih;break;default:i=oh}n=i.bind(null,t,n,e),i=void 0,!Wt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zu(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===i)return;a=a.return}for(;null!==s;){if(null===(a=Ue(s)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=o=a;continue e}s=s.parentNode}}r=r.return}Ot(function(){var r=o,i=It(n),a=[];e:{var s=wr.get(e);if(void 0!==s){var c=Zt,u=e;switch(e){case"keypress":if(0===Vt(n))break e;case"keydown":case"keyup":c=mn;break;case"focusin":u="focus",c=an;break;case"focusout":u="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=yn;break;case pr:case fr:case mr:c=sn;break;case br:c=vn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=bn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=wn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),p=d?null!==s?s+"Capture":null:s;d=[];for(var f,m=r;null!==m;){var g=m;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===p||null!=(g=Ft(m,p))&&d.push(qu(m,g,f)),h)break;m=m.return}0<d.length&&(s=new c(s,u,null,n,i),a.push({event:s,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Rt||!(u=n.relatedTarget||n.fromElement)||!Ue(u)&&!u[Ne])&&(c||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Ue(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",p="onPointerEnter",m="pointer"),h=null==c?s:qe(c),f=null==u?s:qe(u),(s=new d(g,m+"leave",c,n,i)).target=h,s.relatedTarget=f,g=null,Ue(i)===r&&((d=new d(p,m+"enter",u,n,i)).target=f,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(p=u,m=0,f=d=c;f;f=Vu(f))m++;for(f=0,g=p;g;g=Vu(g))f++;for(;0<m-f;)d=Vu(d),m--;for(;0<f-m;)p=Vu(p),f--;for(;m--;){if(d===p||null!==p&&d===p.alternate)break e;d=Vu(d),p=Vu(p)}d=null}else d=null;null!==c&&Ku(a,s,c,d,!1),null!==u&&null!==h&&Ku(a,h,u,d,!0)}if("select"===(c=(s=r?qe(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var y=Ln;else if(Pn(s))if(Wn)y=Gn;else{y=Kn;var v=Vn}else!(c=s.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&Ct(r.elementType)&&(y=Ln):y=Yn;switch(y&&(y=y(e,r))?Mn(a,y,n,i):(v&&v(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&vt(s,"number",s.value)),v=r?qe(r):window,e){case"focusin":(Pn(v)||"true"===v.contentEditable)&&(rr=v,ir=r,or=null);break;case"focusout":or=ir=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,sr(a,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":sr(a,n,i)}var b;if(xn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Rn?Dn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Tn&&"ko"!==n.locale&&(Rn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Rn&&(b=Ht()):(zt="value"in(Ut=i)?Ut.value:Ut.textContent,Rn=!0)),0<(v=Hu(r,w)).length&&(w=new cn(w,e,null,n,i),a.push({event:w,listeners:v}),b?w.data=b:null!==(b=An(n))&&(w.data=b))),(b=En?function(e,t){switch(e){case"compositionend":return An(t);case"keypress":return 32!==t.which?null:(_n=!0,Cn);case"textInput":return(e=t.data)===Cn&&_n?null:e;default:return null}}(e,n):function(e,t){if(Rn)return"compositionend"===e||!xn&&Dn(e,t)?(e=Ht(),qt=zt=Ut=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=Hu(r,"onBeforeInput")).length&&(v=new cn("onBeforeInput","beforeinput",null,n,i),a.push({event:v,listeners:w}),v.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var o=Ru((i[Me]||null).action),a=r.submitter;a&&null!==(t=(t=a[Me]||null)?Ru(t.formAction):a.getAttribute("formAction"))&&(o=t,a=null);var s=new Zt("action","action",null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==ku){var e=a?Iu(i,a):new FormData(i);Ia(n,{pending:!0,data:e,method:i.method,action:o},null,e)}}else"function"===typeof o&&(s.preventDefault(),e=a?Iu(i,a):new FormData(i),Ia(n,{pending:!0,data:e,method:i.method,action:o},o,e))},currentTarget:i}]})}}(a,e,r,n,i)}Ou(a,t)})}function qu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===o||(null!=(i=Ft(e,n))&&r.unshift(qu(e,i,o)),null!=(i=Ft(e,t))&&r.push(qu(e,i,o))),3===e.tag)return r;e=e.return}return[]}function Vu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Ku(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===c||(l=c,i?null!=(c=Ft(n,o))&&a.unshift(qu(n,c,l)):i||null!=(c=Ft(n,o))&&a.push(qu(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yu=/\r\n?/g,Gu=/\u0000|\uFFFD/g;function Qu(e){return("string"===typeof e?e:""+e).replace(Yu,"\n").replace(Gu,"")}function Xu(e,t){return t=Qu(t),Qu(e)===t}function Ju(){}function $u(e,t,n,r,i,o){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||xt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&xt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Tt(e,r,o);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof o&&("formAction"===n?("input"!==t&&$u(e,t,"name",i.name,i,null),$u(e,t,"formEncType",i.formEncType,i,null),$u(e,t,"formMethod",i.formMethod,i,null),$u(e,t,"formTarget",i.formTarget,i,null)):($u(e,t,"encType",i.encType,i,null),$u(e,t,"method",i.method,i,null),$u(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Ju);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=At(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Fu("beforetoggle",e),Fu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=_t.get(n)||n,r)}}function Zu(e,t,n,r,i,o){switch(n){case"style":Tt(e,r,o);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?xt(e,r):("number"===typeof r||"bigint"===typeof r)&&xt(e,""+r);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Ju);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ye.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(o=null!=(o=e[Me]||null)?o[n]:null)&&e.removeEventListener(t,o,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof o&&null!==o&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fu("error",e),Fu("load",e);var r,i=!1,o=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:$u(e,t,r,s,n,null)}}return o&&$u(e,t,"srcSet",n.srcSet,n,null),void(i&&$u(e,t,"src",n.src,n,null));case"input":Fu("invalid",e);var l=r=s=o=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":o=d;break;case"type":s=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:$u(e,t,i,d,n,null)}}return yt(e,r,l,c,u,s,o,!1),void dt(e);case"select":for(o in Fu("invalid",e),i=s=r=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":r=l;break;case"defaultValue":s=l;break;case"multiple":i=l;default:$u(e,t,o,l,n,null)}return t=r,n=s,e.multiple=!!i,void(null!=t?bt(e,!!i,t,!1):null!=n&&bt(e,!!i,n,!0));case"textarea":for(s in Fu("invalid",e),r=o=i=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":i=l;break;case"defaultValue":o=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:$u(e,t,s,l,n,null)}return kt(e,i,o,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else $u(e,t,c,i,n,null);return;case"dialog":Fu("beforetoggle",e),Fu("toggle",e),Fu("cancel",e),Fu("close",e);break;case"iframe":case"object":Fu("load",e);break;case"video":case"audio":for(i=0;i<Nu.length;i++)Fu(Nu[i],e);break;case"image":Fu("error",e),Fu("load",e);break;case"details":Fu("toggle",e);break;case"embed":case"source":case"link":Fu("error",e),Fu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:$u(e,t,u,i,n,null)}return;default:if(Ct(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&Zu(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&$u(e,t,l,i,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function id(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function od(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ad(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sd=null;var ld="function"===typeof setTimeout?setTimeout:void 0,cd="function"===typeof clearTimeout?clearTimeout:void 0,ud="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ud?function(e){return ud.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout(function(){throw e})}function pd(e){return"head"===e}function fd(e,t){var n=t,r=0,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&kd(a.documentElement),2&n&&kd(a.body),4&n)for(kd(n=a.head),a=n.firstChild;a;){var s=a.nextSibling,l=a.nodeName;a[We]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=s}}if(0===i)return e.removeChild(o),void _h(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=o}while(n);_h(t)}function md(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":md(n),Be(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vd=null;function bd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function wd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function kd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Be(e)}var xd=new Map,Sd=new Set;function Ed(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Td=j.d;j.d={f:function(){var e=Td.f(),t=Uc();return e||t},r:function(e){var t=ze(e);null!==t&&5===t.tag&&"form"===t.type?Ma(t):Td.r(e)},D:function(e){Td.D(e),_d("dns-prefetch",e,null)},C:function(e,t){Td.C(e,t),_d("preconnect",e,t)},L:function(e,t,n){Td.L(e,t,n);var r=Cd;if(r&&e&&t){var i='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+mt(n.imageSizes)+'"]')):i+='[href="'+mt(e)+'"]';var o=i;switch(t){case"style":o=Ad(e);break;case"script":o=Pd(e)}xd.has(o)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),xd.set(o,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Rd(o))||"script"===t&&r.querySelector(Md(o))||(ed(t=r.createElement("link"),"link",e),Ve(t),r.head.appendChild(t)))}},m:function(e,t){Td.m(e,t);var n=Cd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',o=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Pd(e)}if(!xd.has(o)&&(e=h({rel:"modulepreload",href:e},t),xd.set(o,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Md(o)))return}ed(r=n.createElement("link"),"link",e),Ve(r),n.head.appendChild(r)}}},X:function(e,t){Td.X(e,t);var n=Cd;if(n&&e){var r=He(n).hoistableScripts,i=Pd(e),o=r.get(i);o||((o=n.querySelector(Md(i)))||(e=h({src:e,async:!0},t),(t=xd.get(i))&&Fd(e,t),Ve(o=n.createElement("script")),ed(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}},S:function(e,t,n){Td.S(e,t,n);var r=Cd;if(r&&e){var i=He(r).hoistableStyles,o=Ad(e);t=t||"default";var a=i.get(o);if(!a){var s={loading:0,preload:null};if(a=r.querySelector(Rd(o)))s.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=xd.get(o))&&Od(e,n);var l=a=r.createElement("link");Ve(l),ed(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,jd(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:s},i.set(o,a)}}},M:function(e,t){Td.M(e,t);var n=Cd;if(n&&e){var r=He(n).hoistableScripts,i=Pd(e),o=r.get(i);o||((o=n.querySelector(Md(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=xd.get(i))&&Fd(e,t),Ve(o=n.createElement("script")),ed(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}}};var Cd="undefined"===typeof document?null:document;function _d(e,t,n){var r=Cd;if(r&&"string"===typeof t&&t){var i=mt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Sd.has(i)||(Sd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(ed(t=r.createElement("link"),"link",e),Ve(t),r.head.appendChild(t)))}}function Dd(e,t,n,r){var i,o,s,l,c=(c=H.current)?Ed(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Ad(n.href),(r=(n=He(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Ad(n.href);var u=He(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Rd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),xd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},xd.set(e,n),u||(i=c,o=e,s=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+o+"]")?l.loading=1:(o=i.createElement("link"),l.preload=o,o.addEventListener("load",function(){return l.loading|=1}),o.addEventListener("error",function(){return l.loading|=2}),ed(o,"link",s),Ve(o),i.head.appendChild(o))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Pd(n),(r=(n=He(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Ad(e){return'href="'+mt(e)+'"'}function Rd(e){return'link[rel="stylesheet"]['+e+"]"}function Id(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Pd(e){return'[src="'+mt(e)+'"]'}function Md(e){return"script[async]"+e}function Nd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,Ve(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ve(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",i),jd(r,n.precedence,e),t.instance=r;case"stylesheet":i=Ad(n.href);var o=e.querySelector(Rd(i));if(o)return t.state.loading|=4,t.instance=o,Ve(o),o;r=Id(n),(i=xd.get(i))&&Od(r,i),Ve(o=(e.ownerDocument||e).createElement("link"));var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ed(o,"link",r),t.state.loading|=4,jd(o,n.precedence,e),t.instance=o;case"script":return o=Pd(n.src),(i=e.querySelector(Md(o)))?(t.instance=i,Ve(i),i):(r=n,(i=xd.get(o))&&Fd(r=h({},n),i),Ve(i=(e=e.ownerDocument||e).createElement("script")),ed(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,jd(r,n.precedence,e));return t.instance}function jd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,o=i,a=0;a<r.length;a++){var s=r[a];if(s.dataset.precedence===t)o=s;else if(o!==i)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Od(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ld=null;function Wd(e,t,n){if(null===Ld){var r=new Map,i=Ld=new Map;i.set(n,r)}else(r=(i=Ld).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var o=n[i];if(!(o[We]||o[Pe]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var a=o.getAttribute(t)||"";a=e+a;var s=r.get(a);s?s.push(o):r.set(a,[o])}}return r}function Bd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Ud(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var zd=null;function qd(){}function Hd(){if(this.count--,0===this.count)if(this.stylesheets)Kd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Vd=null;function Kd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Vd=new Map,t.forEach(Yd,e),Vd=null,Hd.call(e))}function Yd(e,t){if(!(4&t.state.loading)){var n=Vd.get(e);if(n)var r=n.get(null);else{n=new Map,Vd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var a=i[o];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(o=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=Hd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),o?o.parentNode.insertBefore(i,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Gd={$$typeof:k,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function Qd(e,t,n,r,i,o,a,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.hiddenUpdates=Ee(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function Xd(e,t,n,r,i,o,a,s,l,c,u,d){return e=new Qd(e,t,n,a,s,l,c,d),t=1,!0===o&&(t|=24),o=Or(3,null,null,t),e.current=o,o.stateNode=e,(t=Mi()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},no(o),e}function Jd(e){return e?e=Nr:Nr}function $d(e,t,n,r,i,o){i=Jd(i),null===r.context?r.context=i:r.pendingContext=i,(r=io(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=oo(e,r,t))&&(Oc(n,0,t),ao(n,e,t))}function Zd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function th(e){if(13===e.tag){var t=Ir(e,67108864);null!==t&&Oc(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var i=N.T;N.T=null;var o=j.p;try{j.p=2,oh(e,t,n,r)}finally{j.p=o,N.T=i}}function ih(e,t,n,r){var i=N.T;N.T=null;var o=j.p;try{j.p=8,oh(e,t,n,r)}finally{j.p=o,N.T=i}}function oh(e,t,n,r){if(nh){var i=ah(r);if(null===i)zu(e,t,r,sh,n),vh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return dh=bh(dh,e,t,n,r,i),!0;case"dragenter":return hh=bh(hh,e,t,n,r,i),!0;case"mouseover":return ph=bh(ph,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return fh.set(o,bh(fh.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,mh.set(o,bh(mh.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(vh(e,r),4&t&&-1<yh.indexOf(e)){for(;null!==i;){var o=ze(i);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var a=ve(o.pendingLanes);if(0!==a){var s=o;for(s.pendingLanes|=2,s.entangledLanes|=2;a;){var l=1<<31-pe(a);s.entanglements[1]|=l,a&=~l}xu(o),0===(6&nc)&&(xc=te()+500,Su(0,!1))}}break;case 13:null!==(s=Ir(o,2))&&Oc(s,0,2),Uc(),eh(o,2)}if(null===(o=ah(r))&&zu(e,t,r,sh,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else zu(e,t,r,null,n)}}function ah(e){return lh(e=It(e))}var sh=null;function lh(e){if(sh=null,null!==(e=Ue(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return sh=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case oe:case ae:return 32;case se:return 268435456;default:return 32}default:return 32}}var uh=!1,dh=null,hh=null,ph=null,fh=new Map,mh=new Map,gh=[],yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":ph=null;break;case"pointerover":case"pointerout":fh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mh.delete(t.pointerId)}}function bh(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=ze(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function wh(e){var t=Ue(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=j.p;try{return j.p=e,t()}finally{j.p=n}}(e.priority,function(){if(13===n.tag){var e=Nc();e=De(e);var t=Ir(n,e);null!==t&&Oc(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function kh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ah(e.nativeEvent);if(null!==n)return null!==(t=ze(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Rt=r,n.target.dispatchEvent(r),Rt=null,t.shift()}return!0}function xh(e,t,n){kh(e)&&n.delete(t)}function Sh(){uh=!1,null!==dh&&kh(dh)&&(dh=null),null!==hh&&kh(hh)&&(hh=null),null!==ph&&kh(ph)&&(ph=null),fh.forEach(xh),mh.forEach(xh)}function Eh(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Sh)))}var Th=null;function Ch(e){Th!==e&&(Th=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Th===e&&(Th=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===lh(r||n))continue;break}var o=ze(n);null!==o&&(e.splice(t,3),t-=3,Ia(o,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function _h(e){function t(t){return Eh(t,e)}null!==dh&&Eh(dh,e),null!==hh&&Eh(hh,e),null!==ph&&Eh(ph,e),fh.forEach(t),mh.forEach(t);for(var n=0;n<gh.length;n++){var r=gh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<gh.length&&null===(n=gh[0]).blockedOn;)wh(n),null===n.blockedOn&&gh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],o=n[r+1],a=i[Me]||null;if("function"===typeof o)a||Ch(n);else if(a){var s=null;if(o&&o.hasAttribute("formAction")){if(i=o,a=o[Me]||null)s=a.formAction;else if(null!==lh(i))continue}else s=a.action;"function"===typeof s?n[r+1]=s:(n.splice(r,3),r-=3),Ch(n)}}}function Dh(e){this._internalRoot=e}function Ah(e){this._internalRoot=e}Ah.prototype.render=Dh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));$d(t.current,Nc(),e,t,null,null)},Ah.prototype.unmount=Dh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;$d(e.current,2,null,e,null,null),Uc(),t[Ne]=null}},Ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=Re();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gh.length&&0!==t&&t<gh[n].priority;n++);gh.splice(n,0,e),0===n&&wh(e)}};var Rh=i.version;if("19.1.1"!==Rh)throw Error(a(527,Rh,"19.1.1"));j.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return u(i),e;if(o===r)return u(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,c=i.child;c;){if(c===n){s=!0,n=i,r=o;break}if(c===r){s=!0,r=i,n=o;break}c=c.sibling}if(!s){for(c=o.child;c;){if(c===n){s=!0,n=o,r=i;break}if(c===r){s=!0,r=o,n=i;break}c=c.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ih={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{ue=Ph.inject(Ih),de=Ph}catch(Nh){}}t.createRoot=function(e,t){if(!s(e))throw Error(a(299));var n=!1,r="",i=vs,o=bs,l=ws;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Xd(e,1,!1,null,0,n,r,i,o,l,0,null),e[Ne]=t.current,Bu(e),new Dh(t)},t.hydrateRoot=function(e,t,n){if(!s(e))throw Error(a(299));var r=!1,i="",o=vs,l=bs,c=ws,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Xd(e,1,!0,t,0,r,i,o,l,c,0,u)).context=Jd(null),n=t.current,(i=io(r=De(r=Nc()))).callback=null,oo(n,i,r),n=r,t.current.lanes=n,Te(t,n),xu(t),e[Ne]=t.current,Bu(e),new Ah(t)},t.version="19.1.1"},43:(e,t,n)=>{e.exports=n(288)},121:(e,t,n)=>{n.d(t,{j2:()=>je,db:()=>Oe});var r=n(150);(0,r.KO)("firebase","12.5.0","app");var i=n(144),o=n(667),a=n(379),s=n(965),l=n(776),c=n(606),u=n(799);const d="@firebase/installations",h="0.6.19",p=1e4,f="w:".concat(h),m="FIS_v2",g=36e5,y={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},v=new l.FA("installations","Installations",y);function b(e){return e instanceof l.g&&e.code.includes("request-failed")}function w(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function k(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function x(e,t){const n=(await t.json()).error;return v.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function S(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function E(e,t){let{refreshToken:n}=t;const r=S(e);return r.append("Authorization",function(e){return"".concat(m," ").concat(e)}(n)),r}async function T(e){const t=await e();return t.status>=500&&t.status<600?e():t}function C(e){return new Promise(t=>{setTimeout(t,e)})}const _=/^[cdef][\w-]{21}$/;function D(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return _.test(t)?t:""}catch(e){return""}}function A(e){return"".concat(e.appName,"!").concat(e.appId)}const R=new Map;function I(e,t){const n=A(e);P(n,t),function(e,t){const n=N();n&&n.postMessage({key:e,fid:t});j()}(n,t)}function P(e,t){const n=R.get(e);if(n)for(const r of n)r(t)}let M=null;function N(){return!M&&"BroadcastChannel"in self&&(M=new BroadcastChannel("[Firebase] FID Change"),M.onmessage=e=>{P(e.data.key,e.data.fid)}),M}function j(){0===R.size&&M&&(M.close(),M=null)}const O="firebase-installations-store";let F=null;function L(){return F||(F=(0,u.P2)("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(O)}})),F}async function W(e,t){const n=A(e),r=(await L()).transaction(O,"readwrite"),i=r.objectStore(O),o=await i.get(n);return await i.put(t,n),await r.done,o&&o.fid===t.fid||I(e,t.fid),t}async function B(e){const t=A(e),n=(await L()).transaction(O,"readwrite");await n.objectStore(O).delete(t),await n.done}async function U(e,t){const n=A(e),r=(await L()).transaction(O,"readwrite"),i=r.objectStore(O),o=await i.get(n),a=t(o);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||o&&o.fid===a.fid||I(e,a.fid),a}async function z(e){let t;const n=await U(e.appConfig,n=>{const r=function(e){const t=e||{fid:D(),registrationStatus:0};return V(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(v.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const o=w(n),a=S(n),s=r.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:i,authVersion:m,appId:n.appId,sdkVersion:f},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await T(()=>fetch(o,c));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:k(e.authToken)}}throw await x("Create Installation",u)}(e,t);return W(e.appConfig,n)}catch(n){throw b(n)&&409===n.customData.serverCode?await B(e.appConfig):await W(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:q(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function q(e){let t=await H(e.appConfig);for(;1===t.registrationStatus;)await C(100),t=await H(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await z(e);return n||t}return t}function H(e){return U(e,e=>{if(!e)throw v.create("installation-not-found");return V(e)})}function V(e){return 1===(t=e).registrationStatus&&t.registrationTime+p<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function K(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return"".concat(w(e),"/").concat(n,"/authTokens:generate")}(n,t),o=E(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const s={installation:{sdkVersion:f,appId:n.appId}},l={method:"POST",headers:o,body:JSON.stringify(s)},c=await T(()=>fetch(i,l));if(c.ok){return k(await c.json())}throw await x("Generate Auth Token",c)}async function Y(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await U(e.appConfig,r=>{if(!Q(r))throw v.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+g}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await G(e.appConfig);for(;1===n.authToken.requestStatus;)await C(100),n=await G(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Y(e,t):r}(e,n),r;{if(!navigator.onLine)throw v.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return(0,a.A)((0,a.A)({},e),{},{authToken:t})}(r);return t=async function(e,t){try{const n=await K(e,t),r=(0,a.A)((0,a.A)({},t),{},{authToken:n});return await W(e.appConfig,r),n}catch(n){if(!b(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=(0,a.A)((0,a.A)({},t),{},{authToken:{requestStatus:0}});await W(e.appConfig,n)}else await B(e.appConfig);throw n}}(e,n),n}});return t?await t:r.authToken}function G(e){return U(e,e=>{if(!Q(e))throw v.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+p<Date.now()?(0,a.A)((0,a.A)({},e),{},{authToken:{requestStatus:0}}):e;var n})}function Q(e){return void 0!==e&&2===e.registrationStatus}async function X(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await z(e);t&&await t}(n);return(await Y(n,t)).token}function J(e){return v.create("missing-app-config-values",{valueName:e})}const $="installations",Z=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw J("App Configuration");if(!e.name)throw J("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw J(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:(0,r.j6)(t,"heartbeat"),_delete:()=>Promise.resolve()}},ee=e=>{const t=e.getProvider("app").getImmediate(),n=(0,r.j6)(t,$).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await z(t);return r?r.catch(console.error):Y(t).catch(console.error),n.fid}(n),getToken:e=>X(n,e)}};(0,r.om)(new c.uA($,Z,"PUBLIC")),(0,r.om)(new c.uA("installations-internal",ee,"PRIVATE")),(0,r.KO)(d,h),(0,r.KO)(d,h,"esm2020");const te="analytics",ne="https://www.googletagmanager.com/gtag/js",re=new s.Vy("@firebase/analytics"),ie={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},oe=new l.FA("analytics","Analytics",ie);function ae(e){if(!e.startsWith(ne)){const t=oe.create("invalid-gtag-resource",{gtagURL:e});return re.warn(t.message),""}return e}function se(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function le(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:ae}),r=document.createElement("script"),i="".concat(ne,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function ce(e,t,n,r){return async function(i){try{for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];if("event"===i){const[r,i]=a;await async function(e,t,n,r,i){try{let o=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await se(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){o=[];break}o.push(i)}}0===o.length&&(o=Object.values(t)),await Promise.all(o),e("event",r,i||{})}catch(o){re.error(o)}}(e,t,n,r,i)}else if("config"===i){const[i,o]=a;await async function(e,t,n,r,i,o){const a=r[i];try{if(a)await t[a];else{const e=(await se(n)).find(e=>e.measurementId===i);e&&await t[e.appId]}}catch(s){re.error(s)}e("config",i,o)}(e,t,n,r,i,o)}else if("consent"===i){const[t,n]=a;e("consent",t,n)}else if("get"===i){const[t,n,r]=a;e("get",t,n,r)}else if("set"===i){const[t]=a;e("set",t)}else e(i,...a)}catch(l){re.error(l)}}}const ue=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function de(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function he(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:o}=e.options;if(!r)throw oe.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw oe.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new fe;return setTimeout(async()=>{s.abort()},void 0!==n?n:6e4),pe({appId:r,apiKey:i,measurementId:o},a,s,t)}async function pe(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ue;const{appId:a,measurementId:s}=e;try{await function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(o),r(oe.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(n,r)}catch(u){if(s)return re.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(s)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===u||void 0===u?void 0:u.message,"]")),{appId:a,measurementId:s};throw u}try{const t=await async function(e){const{appId:t,apiKey:n}=e,r={method:"GET",headers:de(n)},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",t),o=await fetch(i,r);if(200!==o.status&&304!==o.status){let e="";try{var a;const t=await o.json();null!==(a=t.error)&&void 0!==a&&a.message&&(e=t.error.message)}catch(s){}throw oe.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return o.deleteThrottleMetadata(a),t}catch(u){var c;const t=u;if(!function(e){if(!(e instanceof l.g)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(o.deleteThrottleMetadata(a),s)return re.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(s)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===t||void 0===t?void 0:t.message,"]")),{appId:a,measurementId:s};throw u}const r=503===Number(null===t||void 0===t||null===(c=t.customData)||void 0===c?void 0:c.httpStatus)?(0,l.p9)(i,o.intervalMillis,30):(0,l.p9)(i,o.intervalMillis),d={throttleEndTimeMillis:Date.now()+r,backoffCount:i+1};return o.setThrottleMetadata(a,d),re.debug("Calling attemptFetch again in ".concat(r," millis")),pe(e,d,n,o)}}class fe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let me,ge;function ye(e){ge=e}function ve(e){me=e}async function be(e,t,n,r,i,o,a){var s;const c=he(e);c.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&re.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(e=>re.error(e)),t.push(c);const u=async function(){if(!(0,l.zW)())return re.warn(oe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await(0,l.eX)()}catch(e){return re.warn(oe.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[d,h]=await Promise.all([c,u]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(ne)&&n.src.includes(e))return n;return null})(o)||le(o,d.measurementId),ge&&(i("consent","default",ge),ye(void 0)),i("js",new Date);const p=null!==(s=null===a||void 0===a?void 0:a.config)&&void 0!==s?s:{};return p.origin="firebase",p.update=!0,null!=h&&(p.firebase_id=h),i("config",d.measurementId,p),me&&(i("set",me),ve(void 0)),d.measurementId}class we{constructor(e){this.app=e}_delete(){return delete ke[this.app.options.appId],Promise.resolve()}}let ke={},xe=[];const Se={};let Ee,Te,Ce="dataLayer",_e="gtag",De=!1;function Ae(e,t,n){!function(){const e=[];if((0,l.sr)()&&e.push("This is a browser extension environment."),(0,l.dM)()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(" "),n=oe.create("invalid-analytics-context",{errorInfo:t});re.warn(n.message)}}();const r=e.options.appId;if(!r)throw oe.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw oe.create("no-api-key");re.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=ke[r])throw oe.create("already-exists",{id:r});if(!De){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Ce);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=ce(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}(ke,xe,Se,Ce,_e);Te=e,Ee=t,De=!0}ke[r]=be(e,xe,Se,t,Ee,Ce,n);return new we(e)}function Re(e,t,n){e=(0,l.Ku)(e),async function(e,t,n,r){if(r&&r.global){const t={};for(const e of Object.keys(n))t["user_properties.".concat(e)]=n[e];return e("set",t),Promise.resolve()}e("config",await t,{update:!0,user_properties:n})}(Te,ke[e.app.options.appId],t,n).catch(e=>re.error(e))}function Ie(e,t,n,r){e=(0,l.Ku)(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,(0,a.A)((0,a.A)({},r),{},{send_to:i}))}}(Te,ke[e.app.options.appId],t,n,r).catch(e=>re.error(e))}const Pe="@firebase/analytics",Me="0.10.19";(0,r.om)(new c.uA(te,(e,t)=>{let{options:n}=t;return Ae(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),(0,r.om)(new c.uA("analytics-internal",function(e){try{const t=e.getProvider(te).getImmediate();return{logEvent:(e,n,r)=>Ie(t,e,n,r),setUserProperties:(e,n)=>Re(t,e,n)}}catch(t){throw oe.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,r.KO)(Pe,Me),(0,r.KO)(Pe,Me,"esm2020");const Ne=(0,r.Wp)({apiKey:"AIzaSyD8w8BevGoG5L5n5wSU5TrVyYe1qi008Do",authDomain:"run-plus-plans.firebaseapp.com",projectId:"run-plus-plans",storageBucket:"run-plus-plans.firebasestorage.app",messagingSenderId:"426458481793",appId:"1:426458481793:web:dbcb81b021501d94e7f980",measurementId:"G-HFHB0GWKCC"}),je=(0,i.xI)(Ne),Oe=(0,o.aU)(Ne);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)();e=(0,l.Ku)(e);const t=(0,r.j6)(e,te);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(0,r.j6)(e,te);if(n.isInitialized()){const e=n.getImmediate();if((0,l.bD)(t,n.getOptions()))return e;throw oe.create("already-initialized")}const i=n.initialize({options:t})}(e)}(Ne)},144:(e,t,n)=>{n.d(t,{eJ:()=>gt,xI:()=>qn,hg:()=>bt,J1:()=>mt,x9:()=>yt,CI:()=>wt,r7:()=>vt});var r=n(986),i=n(379),o=n(150),a=n(776),s=n(965),l=n(606);const c=["providerId"],u=["uid","auth","stsTokenManager"],d=["providerId","signInMethod"];function h(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const p=h,f=new a.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),m=new s.Vy("@firebase/auth");function g(e){if(m.logLevel<=s.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];m.error("Auth (".concat(o.MF,"): ").concat(e),...n)}}function y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw k(e,...n)}function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return k(e,...n)}function b(e,t,n){const r=(0,i.A)((0,i.A)({},p()),{},{[t]:n});return new a.FA("auth","Firebase",r).create(t,{appName:e.name})}function w(e){return b(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function k(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return f.create(e,...n)}function x(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw k(t,...r)}}function S(e){const t="INTERNAL ASSERTION FAILED: "+e;throw g(t),new Error(t)}function E(e,t){e||S(t)}function T(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function C(){return"http:"===_()||"https:"===_()}function _(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class D{constructor(e,t){this.shortDelay=e,this.longDelay=t,E(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,a.jZ)()||(0,a.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(C()||(0,a.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function A(e,t){E(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class R{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void S("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void S("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void S("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const I={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},P=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],M=new D(3e4,6e4);function N(e,t){return e.tenantId&&!t.tenantId?(0,i.A)((0,i.A)({},t),{},{tenantId:e.tenantId}):t}async function j(e,t,n,r){return O(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let o={},s={};r&&("GET"===t?s=r:o={body:JSON.stringify(r)});const l=(0,a.Am)((0,i.A)({key:e.config.apiKey},s)).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u=(0,i.A)({method:t,headers:c},o);return(0,a.c1)()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,a.zJ)(e.emulatorConfig.host)&&(u.credentials="include"),R.fetch()(await L(e,e.config.apiHost,n,l),u)})}async function O(e,t,n){e._canInitEmulator=!1;const r=(0,i.A)((0,i.A)({},I),t);try{const t=new B(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw U(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw U(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw U(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw U(e,"user-disabled",o);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw b(e,s,a);y(e,s)}}catch(o){if(o instanceof a.g)throw o;y(e,"network-request-failed",{message:String(o)})}}async function F(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await j(e,t,n,r,i);return"mfaPendingCredential"in o&&y(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function L(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),o=e,a=o.config.emulator?A(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(P.includes(n)&&(await o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())){return o._getPersistence()._getFinalTarget(a).toString()}return a}function W(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class B{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(v(this.auth,"network-request-failed")),M.get())})}}function U(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=v(e,t,r);return i.customData._tokenResponse=n,i}function z(e){return void 0!==e&&void 0!==e.enterprise}class q{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return W(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function H(e,t){return j(e,"GET","/v2/recaptchaConfig",N(e,t))}async function V(e,t){return j(e,"POST","/v1/accounts:lookup",t)}function K(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Y(e){return 1e3*Number(e)}function G(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return g("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,a.u)(n);return e?JSON.parse(e):(g("Failed to decode base64 JWT payload"),null)}catch(i){return g("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function Q(e){const t=G(e);return x(t,"internal-error"),x("undefined"!==typeof t.exp,"internal-error"),x("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function X(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof a.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class J{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class ${constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=K(this.lastLoginAt),this.creationTime=K(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Z(e){var t;const n=e.auth,r=await e.getIdToken(),i=await X(e,V(n,{idToken:r}));x(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=null!==(t=o.providerUserInfo)&&void 0!==t&&t.length?ee(o.providerUserInfo):[],s=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null!==s&&void 0!==s&&s.length),h=!!u&&d,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new $(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,p)}function ee(e){return e.map(e=>{let{providerId:t}=e,n=(0,r.A)(e,c);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class te{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){x(e.idToken,"internal-error"),x("undefined"!==typeof e.idToken,"internal-error"),x("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Q(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){x(0!==e.length,"internal-error");const t=Q(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(x(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await O(e,{},async()=>{const n=(0,a.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=await L(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();s["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:s,body:n};return e.emulatorConfig&&(0,a.zJ)(e.emulatorConfig.host)&&(l.credentials="include"),R.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new te;return n&&(x("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(x("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(x("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new te,this.toJSON())}_performRefresh(){return S("not implemented")}}function ne(e,t){x("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class re{constructor(e){let{uid:t,auth:n,stsTokenManager:i}=e,o=(0,r.A)(e,u);this.providerId="firebase",this.proactiveRefresh=new J(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new $(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await X(this,this.stsTokenManager.getToken(this.auth,e));return x(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,a.Ku)(e),r=await n.getIdToken(t),i=G(r);x(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:K(Y(i.auth_time)),issuedAtTime:K(Y(i.iat)),expirationTime:K(Y(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,a.Ku)(e);await Z(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(x(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>(0,i.A)({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new re((0,i.A)((0,i.A)({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){x(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Z(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,o.xZ)(this.auth.app))return Promise.reject(w(this.auth));const e=await this.getIdToken();return await X(this,async function(e,t){return j(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return(0,i.A)((0,i.A)({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>(0,i.A)({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,o,a,s,l,c,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,p=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,f=null!==(a=t.photoURL)&&void 0!==a?a:void 0,m=null!==(s=t.tenantId)&&void 0!==s?s:void 0,g=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,y=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:b,emailVerified:w,isAnonymous:k,providerData:S,stsTokenManager:E}=t;x(b&&E,e,"internal-error");const T=te.fromJSON(this.name,E);x("string"===typeof b,e,"internal-error"),ne(d,e.name),ne(h,e.name),x("boolean"===typeof w,e,"internal-error"),x("boolean"===typeof k,e,"internal-error"),ne(p,e.name),ne(f,e.name),ne(m,e.name),ne(g,e.name),ne(y,e.name),ne(v,e.name);const C=new re({uid:b,auth:e,email:h,emailVerified:w,displayName:d,isAnonymous:k,photoURL:f,phoneNumber:p,tenantId:m,stsTokenManager:T,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(C.providerData=S.map(e=>(0,i.A)({},e))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new te;r.updateFromServerResponse(t);const i=new re({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Z(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];x(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?ee(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),a=new te;a.updateFromIdToken(n);const s=new re({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new $(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(s,l),s}}const ie=new Map;function oe(e){E(e instanceof Function,"Expected a class definition");let t=ie.get(e);return t?(E(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ie.set(e,t),t)}class ae{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ae.type="NONE";const se=ae;function le(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ce{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=le(this.userKey,r.apiKey,i),this.fullPersistenceKey=le("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await V(this.auth,{idToken:e}).catch(()=>{});return t?re._fromGetAccountInfoResponse(this.auth,t,e):null}return re._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ce(oe(se),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||oe(se);const o=le(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(o);if(t){let n;if("string"===typeof t){const r=await V(e,{idToken:t}).catch(()=>{});if(!r)break;n=await re._fromGetAccountInfoResponse(e,r,t)}else n=re._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const s=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&s.length?(i=s[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(o)}catch(t){}})),new ce(i,e,n)):new ce(i,e,n)}}function ue(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(fe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(de(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ge(t))return"Blackberry";if(ye(t))return"Webos";if(he(t))return"Safari";if((t.includes("chrome/")||pe(t))&&!t.includes("edge/"))return"Chrome";if(me(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/firefox\//i.test(e)}function he(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/crios\//i.test(e)}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/iemobile/i.test(e)}function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/android/i.test(e)}function ge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/blackberry/i.test(e)}function ye(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/webos/i.test(e)}function ve(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function be(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return ve(e)||me(e)||ye(e)||ge(e)||/windows phone/i.test(e)||fe(e)}function we(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ue((0,a.ZQ)());break;case"Worker":t="".concat(ue((0,a.ZQ)()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(o.MF,"/").concat(r)}class ke{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class xe{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(o=s.containsNumericCharacter)||void 0===o||o),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Se{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Te(this),this.idTokenSubscription=new Te(this),this.beforeStateQueue=new ke(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=f,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=oe(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await ce.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(o){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await V(this,{idToken:e}),n=await re._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if((0,o.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,a;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,o=null===(a=n)||void 0===a?void 0:a._redirectEventId,s=await this.tryRedirectSignIn(e);t&&t!==o||null===s||void 0===s||!s.user||(n=s.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return x(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Z(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,o.xZ)(this.app))return Promise.reject(w(this));const t=e?(0,a.Ku)(e):null;return t&&x(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&x(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,o.xZ)(this.app)?Promise.reject(w(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,o.xZ)(this.app)?Promise.reject(w(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(oe(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return j(e,"GET","/v2/passwordPolicy",N(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new xe(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new a.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return j(e,"POST","/v2/accounts:revokeToken",N(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&oe(e)||this._popupRedirectResolver;x(t,this,"argument-error"),this.redirectPersistenceManager=await ce.create(this,[oe(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(x(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return x(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=we(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if((0,o.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(m.logLevel<=s.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];m.warn("Auth (".concat(o.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ee(e){return(0,a.Ku)(e)}class Te{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,a.tD)(e=>this.observer=e)}get next(){return x(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ce={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _e(e){return Ce.loadJS(e)}function De(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Ae{constructor(){this.enterprise=new Re}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Re{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ie="NO_RECAPTCHA";class Pe{constructor(e){this.type="recaptcha-enterprise",this.auth=Ee(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;z(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Ie)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Ae).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{H(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new q(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&z(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ce.recaptchaEnterpriseScript;0!==t.length&&(t+=i),_e(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Me(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=new Pe(e);let s;if(o)s=Ie;else try{s=await a.verify(n)}catch(c){s=await a.verify(n,!0)}const l=(0,i.A)({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in l){const e=l.phoneEnrollmentInfo.phoneNumber,t=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const e=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:s}):Object.assign(l,{captchaResponse:s}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Ne(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Me(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Me(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const i=await Me(e,t,n);return r(e,i).catch(async i=>{var o;if("AUDIT"===(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Me(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Me(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function je(e){const t=Ee(e),n=await H(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new q(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Pe(t).verify()}}function Oe(e,t,n){const r=Ee(e);x(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),o=Fe(t),{host:s,port:l}=function(e){const t=Fe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Le(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Le(t)}}}(t),c=null===l?"":":".concat(l),u={url:"".concat(o,"//").concat(s).concat(c,"/")},d=Object.freeze({host:s,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return x(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void x((0,a.bD)(u,r.config.emulator)&&(0,a.bD)(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,(0,a.zJ)(s)?((0,a.gE)("".concat(o,"//").concat(s).concat(c)),(0,a.P1)("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Fe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Le(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class We{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return S("not implemented")}_getIdTokenResponse(e){return S("not implemented")}_linkToIdToken(e,t){return S("not implemented")}_getReauthenticationResolver(e){return S("not implemented")}}async function Be(e,t){return j(e,"POST","/v1/accounts:signUp",t)}async function Ue(e,t){return F(e,"POST","/v1/accounts:signInWithPassword",N(e,t))}async function ze(e,t){return j(e,"POST","/v1/accounts:sendOobCode",N(e,t))}async function qe(e,t){return ze(e,t)}class He extends We{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new He(e,t,"password")}static _fromEmailAndCode(e,t){return new He(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ne(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ue,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return F(e,"POST","/v1/accounts:signInWithEmailLink",N(e,t))}(e,{email:this._email,oobCode:this._password});default:y(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ne(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Be,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return F(e,"POST","/v1/accounts:signInWithEmailLink",N(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:y(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ve(e,t){return F(e,"POST","/v1/accounts:signInWithIdp",N(e,t))}class Ke extends We{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ke(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):y("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,o=(0,r.A)(t,d);if(!n||!i)return null;const a=new Ke(n,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){return Ve(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ve(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ve(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,a.Am)(t)}return e}}async function Ye(e,t){return j(e,"POST","/v1/accounts:sendVerificationCode",N(e,t))}const Ge={USER_NOT_FOUND:"user-not-found"};class Qe extends We{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Qe({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Qe({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return F(e,"POST","/v1/accounts:signInWithPhoneNumber",N(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await F(e,"POST","/v1/accounts:signInWithPhoneNumber",N(e,t));if(n.temporaryProof)throw U(e,"account-exists-with-different-credential",n);return n}(e,(0,i.A)({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return F(e,"POST","/v1/accounts:signInWithPhoneNumber",N(e,(0,i.A)((0,i.A)({},t),{},{operation:"REAUTH"})),Ge)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Qe({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Xe{constructor(e){var t,n,r,i,o,s;const l=(0,a.I9)((0,a.hp)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);x(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(i=l.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=l.lang)&&void 0!==o?o:null,this.tenantId=null!==(s=l.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=(0,a.I9)((0,a.hp)(e)).link,n=t?(0,a.I9)((0,a.hp)(t)).deep_link_id:null,r=(0,a.I9)((0,a.hp)(e)).deep_link_id;return(r?(0,a.I9)((0,a.hp)(r)).link:null)||r||n||t||e}(e);try{return new Xe(t)}catch(n){return null}}}class Je{constructor(){this.providerId=Je.PROVIDER_ID}static credential(e,t){return He._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Xe.parseLink(t);return x(n,"argument-error"),He._fromEmailAndCode(e,n.code,n.tenantId)}}Je.PROVIDER_ID="password",Je.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Je.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class $e{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ze extends $e{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class et extends Ze{constructor(){super("facebook.com")}static credential(e){return Ke._fromParams({providerId:et.PROVIDER_ID,signInMethod:et.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return et.credentialFromTaggedObject(e)}static credentialFromError(e){return et.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return et.credential(t.oauthAccessToken)}catch(n){return null}}}et.FACEBOOK_SIGN_IN_METHOD="facebook.com",et.PROVIDER_ID="facebook.com";class tt extends Ze{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ke._fromParams({providerId:tt.PROVIDER_ID,signInMethod:tt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return tt.credentialFromTaggedObject(e)}static credentialFromError(e){return tt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return tt.credential(n,r)}catch(i){return null}}}tt.GOOGLE_SIGN_IN_METHOD="google.com",tt.PROVIDER_ID="google.com";class nt extends Ze{constructor(){super("github.com")}static credential(e){return Ke._fromParams({providerId:nt.PROVIDER_ID,signInMethod:nt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nt.credentialFromTaggedObject(e)}static credentialFromError(e){return nt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return nt.credential(t.oauthAccessToken)}catch(n){return null}}}nt.GITHUB_SIGN_IN_METHOD="github.com",nt.PROVIDER_ID="github.com";class rt extends Ze{constructor(){super("twitter.com")}static credential(e,t){return Ke._fromParams({providerId:rt.PROVIDER_ID,signInMethod:rt.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return rt.credentialFromTaggedObject(e)}static credentialFromError(e){return rt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return rt.credential(n,r)}catch(i){return null}}}async function it(e,t){return F(e,"POST","/v1/accounts:signUp",N(e,t))}rt.TWITTER_SIGN_IN_METHOD="twitter.com",rt.PROVIDER_ID="twitter.com";class ot{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await re._fromIdTokenResponse(e,n,r),o=at(n);return new ot({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=at(n);return new ot({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function at(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class st extends a.g{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,st.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new st(e,t,n,r)}}function lt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw st._fromErrorAndOperation(e,n,t,r);throw n})}async function ct(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await X(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ot._forOperation(e,"link",r)}async function ut(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if((0,o.xZ)(r.app))return Promise.reject(w(r));const i="reauthenticate";try{const o=await X(e,lt(r,i,t,e),n);x(o.idToken,r,"internal-error");const a=G(o.idToken);x(a,r,"internal-error");const{sub:s}=a;return x(e.uid===s,r,"user-mismatch"),ot._forOperation(e,i,o)}catch(a){throw(null===a||void 0===a?void 0:a.code)==="auth/".concat("user-not-found")&&y(r,"user-mismatch"),a}}async function dt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,o.xZ)(e.app))return Promise.reject(w(e));const r="signIn",i=await lt(e,r,t),a=await ot._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function ht(e,t){return dt(Ee(e),t)}function pt(e,t,n){var r;x((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),x("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),x("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(x(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(x(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function ft(e){const t=Ee(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function mt(e,t,n){const r=Ee(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&pt(r,i,n),await Ne(r,i,"getOobCode",qe,"EMAIL_PASSWORD_PROVIDER")}async function gt(e,t,n){if((0,o.xZ)(e.app))return Promise.reject(w(e));const r=Ee(e),i=Ne(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",it,"EMAIL_PASSWORD_PROVIDER"),a=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ft(e),t}),s=await ot._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(s.user),s}function yt(e,t,n){return(0,o.xZ)(e.app)?Promise.reject(w(e)):ht((0,a.Ku)(e),Je.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ft(e),t})}async function vt(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=(0,a.Ku)(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await X(i,async function(e,t){return j(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const l=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}function bt(e,t,n,r){return(0,a.Ku)(e).onAuthStateChanged(t,n,r)}function wt(e){return(0,a.Ku)(e).signOut()}function kt(e,t){return j(e,"POST","/v2/accounts/mfaEnrollment:start",N(e,t))}new WeakMap;const xt="__sak";class St{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xt,"1"),this.storage.removeItem(xt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Et extends St{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=be(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,a.lT)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Et.type="LOCAL";const Tt=Et;function Ct(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function _t(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Dt{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=_t(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Ct(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=_t(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=_t(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Ct(n);const i=setInterval(()=>{const e=Ct(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Dt.type="COOKIE";class At extends St{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}At.type="SESSION";const Rt=At;class It{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new It(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(null===o||void 0===o||!o.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map(async e=>e(t.origin,i)),s=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Pt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}It.receivers=[];class Mt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,s)=>{const l=Pt("",20);r.port1.start();const c=setTimeout(()=>{s(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{s(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Nt(){return window}function jt(){return"undefined"!==typeof Nt().WorkerGlobalScope&&"function"===typeof Nt().importScripts}const Ot="firebaseLocalStorageDb",Ft="firebaseLocalStorage",Lt="fbase_key";class Wt{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bt(e,t){return e.transaction([Ft],t?"readwrite":"readonly").objectStore(Ft)}function Ut(){const e=indexedDB.open(Ot,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Ft,{keyPath:Lt})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Ft)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ot);return new Wt(e).toPromise()}(),t(await Ut()))})})}async function zt(e,t,n){const r=Bt(e,!0).put({[Lt]:t,value:n});return new Wt(r).toPromise()}function qt(e,t){const n=Bt(e,!0).delete(t);return new Wt(n).toPromise()}class Ht{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Ut()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=It._getInstance(jt()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Mt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ut();return await zt(e,xt,"1"),await qt(e,xt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>zt(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Bt(e,!1).get(t),r=await new Wt(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>qt(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Bt(e,!1).getAll();return new Wt(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ht.type="LOCAL";const Vt=Ht;function Kt(e,t){return j(e,"POST","/v2/accounts/mfaSignIn:start",N(e,t))}De("rcb"),new D(3e4,6e4);const Yt="recaptcha";async function Gt(e,t,n){if(!e._getRecaptchaConfig())try{await je(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){x("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},o=Ne(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Ie){x((null===n||void 0===n?void 0:n.type)===Yt,e,"argument-error");return kt(e,await Qt(e,t,n))}return kt(e,t)},"PHONE_PROVIDER"),a=await o.catch(e=>Promise.reject(e));return a.phoneSessionInfo.sessionInfo}{var r;x("signin"===t.type,e,"internal-error");const o=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;x(o,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},s=Ne(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Ie){x((null===n||void 0===n?void 0:n.type)===Yt,e,"argument-error");return Kt(e,await Qt(e,t,n))}return Kt(e,t)},"PHONE_PROVIDER"),l=await s.catch(e=>Promise.reject(e));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Ne(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Ie){x((null===n||void 0===n?void 0:n.type)===Yt,e,"argument-error");return Ye(e,await Qt(e,t,n))}return Ye(e,t)},"PHONE_PROVIDER"),o=await r.catch(e=>Promise.reject(e));return o.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Qt(e,t,n){x(n.type===Yt,e,"argument-error");const r=await n.verify();x("string"===typeof r,e,"argument-error");const o=(0,i.A)({},t);if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.captchaResponse,n=o.phoneEnrollmentInfo.clientType,i=o.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),o}if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.captchaResponse,t=o.phoneSignInInfo.clientType,n=o.phoneSignInInfo.recaptchaVersion;return Object.assign(o,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),o}return Object.assign(o,{recaptchaToken:r}),o}class Xt{constructor(e){this.providerId=Xt.PROVIDER_ID,this.auth=Ee(e)}verifyPhoneNumber(e,t){return Gt(this.auth,e,(0,a.Ku)(t))}static credential(e,t){return Qe._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Xt.credentialFromTaggedObject(t)}static credentialFromError(e){return Xt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Qe._fromTokenResponse(n,r):null}}function Jt(e,t){return t?oe(t):(x(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Xt.PROVIDER_ID="phone",Xt.PHONE_SIGN_IN_METHOD="phone";class $t extends We{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ve(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ve(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ve(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Zt(e){return dt(e.auth,new $t(e),e.bypassAuthState)}function en(e){const{auth:t,user:n}=e;return x(n,t,"internal-error"),ut(n,new $t(e),e.bypassAuthState)}async function tn(e){const{auth:t,user:n}=e;return x(n,t,"internal-error"),ct(n,new $t(e),e.bypassAuthState)}class nn{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Zt;case"linkViaPopup":case"linkViaRedirect":return tn;case"reauthViaPopup":case"reauthViaRedirect":return en;default:y(this.auth,"internal-error")}}resolve(e){E(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){E(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rn=new D(2e3,1e4);class on extends nn{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,on.currentPopupAction&&on.currentPopupAction.cancel(),on.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return x(e,this.auth,"internal-error"),e}async onExecution(){E(1===this.filter.length,"Popup operations only handle one event");const e=Pt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(v(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(v(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,on.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(v(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,rn.get())};e()}}on.currentPopupAction=null;const an=new Map;class sn extends nn{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=an.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=un(t),r=cn(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}an.set(this.auth._key(),e)}return this.bypassAuthState||an.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ln(e,t){an.set(e._key(),t)}function cn(e){return oe(e._redirectPersistence)}function un(e){return le("pendingRedirect",e.config.apiKey,e.name)}async function dn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,o.xZ)(e.app))return Promise.reject(w(e));const r=Ee(e),i=Jt(r,t),a=new sn(r,i,n),s=await a.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class hn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!fn(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(v(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pn(e))}saveEventToCache(e){this.cachedEventUids.add(pn(e)),this.lastProcessedEventTime=Date.now()}}function pn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function fn(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const mn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gn=/^https?/;async function yn(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return j(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(vn(r))return}catch(n){}y(e,"unauthorized-domain")}function vn(e){const t=T(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!gn.test(n))return!1;if(mn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const bn=new D(3e4,6e4);function wn(){const e=Nt().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function kn(e){return new Promise((t,n)=>{var r,i;function o(){wn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{wn(),n(v(e,"network-request-failed"))},timeout:bn.get()})}if(null!==(r=Nt().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=Nt().gapi)||void 0===i||!i.load){const t=De("iframefcb");return Nt()[t]=()=>{gapi.load?o():n(v(e,"network-request-failed"))},_e("".concat(Ce.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw xn=null,e})}let xn=null;const Sn=new D(5e3,15e3),En={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cn(e){const t=e.config;x(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?A(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:o.MF},i=Tn.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat((0,a.Am)(r).slice(1))}async function _n(e){const t=await function(e){return xn=xn||kn(e),xn}(e),n=Nt().gapi;return x(n,e,"internal-error"),t.open({where:document.body,url:Cn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:En,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=v(e,"network-request-failed"),o=Nt().setTimeout(()=>{r(i)},Sn.get());function a(){Nt().clearTimeout(o),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const Dn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class An{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Rn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-o)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=(0,i.A)((0,i.A)({},Dn),{},{width:r.toString(),height:o.toString(),top:s,left:l}),d=(0,a.ZQ)().toLowerCase();n&&(c=pe(d)?"_blank":n),de(d)&&(t=t||"http://localhost",u.scrollbars="yes");const h=Object.entries(u).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return ve(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(d)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",c),new An(null);const p=window.open(t||"",c,h);x(p,e,"popup-blocked");try{p.focus()}catch(f){}return new An(p)}const In="__/auth/handler",Pn="emulator/auth/handler",Mn=encodeURIComponent("fac");async function Nn(e,t,n,r,i,s){x(e.config.authDomain,e,"auth-domain-config-required"),x(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:o.MF,eventId:i};if(t instanceof $e){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,a.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))l[e]=t}if(t instanceof Ze){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const o of Object.keys(c))void 0===c[o]&&delete c[o];const u=await e._getAppCheckToken(),d=u?"#".concat(Mn,"=").concat(encodeURIComponent(u)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(In);return A(t,Pn)}(e),"?").concat((0,a.Am)(c).slice(1)).concat(d)}const jn="webStorageSupport";const On=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rt,this._completeRedirectFn=dn,this._overrideRedirectResult=ln}async _openPopup(e,t,n,r){var i;E(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Rn(e,await Nn(e,t,n,T(),r),Pt())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Nt().location.href=e}(await Nn(e,t,n,T(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(E(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await _n(e),n=new hn(e);return t.register("authEvent",t=>{x(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jn,{type:jn},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[jn];void 0!==i&&t(!!i),y(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yn(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return be()||he()||ve()}};var Fn="@firebase/auth",Ln="1.11.1";class Wn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){x(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Bn=(0,a.XA)("authIdTokenMaxAge")||300;let Un=null;const zn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Bn)return;const i=null===n||void 0===n?void 0:n.token;Un!==i&&(Un=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))};function qn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.Sx)();const t=(0,o.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,o.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,a.bD)(r,null!==t&&void 0!==t?t:{}))return e;y(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:On,persistence:[Vt,Tt,Rt]}),r=(0,a.XA)("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=zn(e.toString());!function(e,t,n){(0,a.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,a.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}const i=(0,a.Tj)("auth");return i&&Oe(n,"http://".concat(i)),n}var Hn,Vn;Hn={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=v("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Ce=Hn,Vn="Browser",(0,o.om)(new l.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;x(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:s,clientPlatform:Vn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:we(Vn)},c=new Se(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(oe);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,o.om)(new l.uA("auth-internal",e=>(e=>new Wn(e))(Ee(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,o.KO)(Fn,Ln,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Vn)),(0,o.KO)(Fn,Ln,"esm2020")},150:(e,t,n)=>{n.d(t,{KO:()=>Z,MF:()=>X,Sx:()=>$,Wp:()=>J,j6:()=>V,om:()=>H,xZ:()=>K});var r=n(379),i=n(606),o=n(965),a=n(776),s=n(799);class l{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const c="@firebase/app",u="0.14.5",d=new o.Vy("@firebase/app"),h="@firebase/app-compat",p="@firebase/analytics-compat",f="@firebase/analytics",m="@firebase/app-check-compat",g="@firebase/app-check",y="@firebase/auth",v="@firebase/auth-compat",b="@firebase/database",w="@firebase/data-connect",k="@firebase/database-compat",x="@firebase/functions",S="@firebase/functions-compat",E="@firebase/installations",T="@firebase/installations-compat",C="@firebase/messaging",_="@firebase/messaging-compat",D="@firebase/performance",A="@firebase/performance-compat",R="@firebase/remote-config",I="@firebase/remote-config-compat",P="@firebase/storage",M="@firebase/storage-compat",N="@firebase/firestore",j="@firebase/ai",O="@firebase/firestore-compat",F="firebase",L="[DEFAULT]",W={[c]:"fire-core",[h]:"fire-core-compat",[f]:"fire-analytics",[p]:"fire-analytics-compat",[g]:"fire-app-check",[m]:"fire-app-check-compat",[y]:"fire-auth",[v]:"fire-auth-compat",[b]:"fire-rtdb",[w]:"fire-data-connect",[k]:"fire-rtdb-compat",[x]:"fire-fn",[S]:"fire-fn-compat",[E]:"fire-iid",[T]:"fire-iid-compat",[C]:"fire-fcm",[_]:"fire-fcm-compat",[D]:"fire-perf",[A]:"fire-perf-compat",[R]:"fire-rc",[I]:"fire-rc-compat",[P]:"fire-gcs",[M]:"fire-gcs-compat",[N]:"fire-fst",[O]:"fire-fst-compat",[j]:"fire-vertex","fire-js":"fire-js",[F]:"fire-js-all"},B=new Map,U=new Map,z=new Map;function q(e,t){try{e.container.addComponent(t)}catch(n){d.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function H(e){const t=e.name;if(z.has(t))return d.debug("There were multiple attempts to register component ".concat(t,".")),!1;z.set(t,e);for(const n of B.values())q(n,e);for(const n of U.values())q(n,e);return!0}function V(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function K(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Y={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},G=new a.FA("app","Firebase",Y);class Q{constructor(e,t,n){this._isDeleted=!1,this._options=(0,r.A)({},e),this._config=(0,r.A)({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw G.create("app-deleted",{appName:this._name})}}const X="12.5.0";function J(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const o=(0,r.A)({name:L,automaticDataCollectionEnabled:!0},t),s=o.name;if("string"!==typeof s||!s)throw G.create("bad-app-name",{appName:String(s)});if(n||(n=(0,a.T9)()),!n)throw G.create("no-options");const l=B.get(s);if(l){if((0,a.bD)(n,l.options)&&(0,a.bD)(o,l.config))return l;throw G.create("duplicate-app",{appName:s})}const c=new i.h1(s);for(const r of z.values())c.addComponent(r);const u=new Q(n,o,c);return B.set(s,u),u}function $(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;const t=B.get(e);if(!t&&e===L&&(0,a.T9)())return J();if(!t)throw G.create("no-app",{appName:e});return t}function Z(e,t,n){var r;let o=null!==(r=W[e])&&void 0!==r?r:e;n&&(o+="-".concat(n));const a=o.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const e=['Unable to register library "'.concat(o,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(o,'" contains illegal characters (whitespace or "/")')),a&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void d.warn(e.join(" "))}H(new i.uA("".concat(o,"-version"),()=>({library:o,version:t}),"VERSION"))}const ee="firebase-heartbeat-store";let te=null;function ne(){return te||(te=(0,s.P2)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ee)}catch(n){console.warn(n)}}}).catch(e=>{throw G.create("idb-open",{originalErrorMessage:e.message})})),te}async function re(e,t){try{const n=(await ne()).transaction(ee,"readwrite"),r=n.objectStore(ee);await r.put(t,ie(e)),await n.done}catch(n){if(n instanceof a.g)d.warn(n.message);else{const e=G.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});d.warn(e.message)}}}function ie(e){return"".concat(e.name,"!").concat(e.options.appId)}class oe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new se(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ae();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){d.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ae(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),le(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),le(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,a.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return d.warn(t),""}}}function ae(){return(new Date).toISOString().substring(0,10)}class se{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,a.zW)()&&(0,a.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ne()).transaction(ee),n=await t.objectStore(ee).get(ie(e));return await t.done,n}catch(t){if(t instanceof a.g)d.warn(t.message);else{const e=G.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});d.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function le(e){return(0,a.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var ce;ce="",H(new i.uA("platform-logger",e=>new l(e),"PRIVATE")),H(new i.uA("heartbeat",e=>new oe(e),"PRIVATE")),Z(c,u,ce),Z(c,u,"esm2020"),Z("fire-js","")},180:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var o in r={},t)"key"!==o&&(r[o]=t[o]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var k=Array.isArray,x={H:null,A:null,T:null,S:null,V:null},S=Object.prototype.hasOwnProperty;function E(e,t,r,i,o,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function D(){}function A(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(s){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return A((u=e._init)(e._payload),t,i,o,a)}}if(u)return a=a(e),u=""===o?"."+_(e,0):o,k(a)?(i="",null!=u&&(i=u.replace(C,"$&/")+"/"),A(a,t,i,"",function(e){return e})):null!=a&&(T(a)&&(l=a,c=i+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+u,a=E(l.type,c,void 0,0,0,l.props)),t.push(a)),1;u=0;var d,f=""===o?".":o+":";if(k(e))for(var m=0;m<e.length;m++)u+=A(o=e[m],t,i,s=f+_(o,m),a);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(o=e.next()).done;)u+=A(o=o.value,t,i,s=f+_(o,m++),a);else if("object"===s){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(D,D):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,o,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function R(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",function(e){return t.call(n,e,i++)}),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function M(){}t.Children={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return x.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key;if(null!=t)for(o in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!S.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var a=Array(o),s=0;s<o;s++)a[s]=arguments[s+2];r.children=a}return E(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,i={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var s=Array(a),l=0;l<a;l++)s[l]=arguments[l+2];i.children=s}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return E(e,o,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=x.T,n={};x.T=n;try{var r=e(),i=x.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(M,P)}catch(o){P(o)}finally{x.T=t}},t.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},t.use=function(e){return x.H.use(e)},t.useActionState=function(e,t,n){return x.H.useActionState(e,t,n)},t.useCallback=function(e,t){return x.H.useCallback(e,t)},t.useContext=function(e){return x.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return x.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=x.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return x.H.useId()},t.useImperativeHandle=function(e,t,n){return x.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return x.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return x.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return x.H.useMemo(e,t)},t.useOptimistic=function(e,t){return x.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return x.H.useReducer(e,t,n)},t.useRef=function(e){return x.H.useRef(e)},t.useState=function(e){return x.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return x.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return x.H.useTransition()},t.version="19.1.1"},379:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(705);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},578:(e,t,n)=>{n.d(t,{O:()=>s});var r=n(379);const i={marathon:[{goalTime:"6:00:00",paces:{easy:{min:"12:52",max:"14:04",km:"8:00-8:44"},marathon:{pace:"13:38",km:"8:28"},threshold:{pace:"11:42",km:"7:16"},interval:{pace:"10:00",km:"6:13"}},trackIntervals:{threshold:{"1200m":"8:43","800m":"5:49","600m":"4:22"},interval:{"400m":"2:29","300m":"1:53","200m":"1:15"}}},{goalTime:"5:45:00",paces:{easy:{min:"12:35",max:"13:45",km:"7:49-8:33"},marathon:{pace:"13:05",km:"8:08"},threshold:{pace:"11:20",km:"7:02"},interval:{pace:"9:46",km:"6:04"}},trackIntervals:{threshold:{"1200m":"8:27","800m":"5:38","600m":"4:13"},interval:{"400m":"2:26","300m":"1:49","200m":"1:13"}}},{goalTime:"5:30:00",paces:{easy:{min:"12:17",max:"13:26",km:"7:38-8:21"},marathon:{pace:"12:32",km:"7:47"},threshold:{pace:"10:57",km:"6:49"},interval:{pace:"9:31",km:"5:55"}},trackIntervals:{threshold:{"1200m":"8:10","800m":"5:27","600m":"4:05"},interval:{"400m":"2:22","300m":"1:46","200m":"1:11"}}},{goalTime:"5:15:00",paces:{easy:{min:"11:58",max:"13:06",km:"7:26-8:08"},marathon:{pace:"11:58",km:"7:26"},threshold:{pace:"10:34",km:"6:34"},interval:{pace:"9:16",km:"5:45"}},trackIntervals:{threshold:{"1200m":"7:53","800m":"5:15","600m":"3:57"},interval:{"400m":"2:18","300m":"1:44","200m":"1:09"}}},{goalTime:"5:00:00",paces:{easy:{min:"11:38",max:"12:45",km:"7:14-7:55"},marathon:{pace:"11:25",km:"7:05"},threshold:{pace:"10:11",km:"6:20"},interval:{pace:"9:00",km:"5:35"}},trackIntervals:{threshold:{"1200m":"7:36","800m":"5:04","600m":"3:48"},interval:{"400m":"2:14","300m":"1:41","200m":"1:07"}}},{goalTime:"4:45:00",paces:{easy:{min:"11:18",max:"12:23",km:"7:01-7:42"},marathon:{pace:"10:51",km:"6:45"},threshold:{pace:"9:47",km:"6:05"},interval:{pace:"8:43",km:"5:25"}},trackIntervals:{threshold:{"1200m":"7:18","800m":"4:52","600m":"3:39"},interval:{"400m":"2:10","300m":"1:38","200m":"1:05"}}},{goalTime:"4:30:00",paces:{easy:{min:"10:57",max:"12:00",km:"6:48-7:27"},marathon:{pace:"10:17",km:"6:24"},threshold:{pace:"9:22",km:"5:49"},interval:{pace:"8:26",km:"5:15"}},trackIntervals:{threshold:{"1200m":"6:59","800m":"4:40","600m":"3:30"},interval:{"400m":"2:06","300m":"1:34","200m":"1:03"}}},{goalTime:"4:15:00",paces:{easy:{min:"10:34",max:"11:36",km:"6:34-7:13"},marathon:{pace:"9:43",km:"6:02"},threshold:{pace:"8:57",km:"5:34"},interval:{pace:"8:08",km:"5:03"}},trackIntervals:{threshold:{"1200m":"6:41","800m":"4:27","600m":"3:20"},interval:{"400m":"2:01","300m":"1:31","200m":"1:01"}}},{goalTime:"4:00:00",paces:{easy:{min:"10:11",max:"11:11",km:"6:20-6:57"},marathon:{pace:"9:09",km:"5:41"},threshold:{pace:"8:32",km:"5:18"},interval:{pace:"7:50",km:"4:52"}},trackIntervals:{threshold:{"1200m":"6:22","800m":"4:14","600m":"3:11"},interval:{"400m":"1:57","300m":"1:28","200m":"0:58"}}},{goalTime:"3:45:00",paces:{easy:{min:"9:39",max:"10:36",km:"6:00-6:35"},marathon:{pace:"8:35",km:"5:20"},threshold:{pace:"8:02",km:"5:00"},interval:{pace:"7:24",km:"4:36"}},trackIntervals:{threshold:{"1200m":"6:00","800m":"4:00","600m":"3:00"},interval:{"400m":"1:50","300m":"1:23","200m":"0:55"}}},{goalTime:"3:30:00",paces:{easy:{min:"9:02",max:"9:56",km:"5:37-6:11"},marathon:{pace:"8:01",km:"4:59"},threshold:{pace:"7:31",km:"4:40"},interval:{pace:"6:55",km:"4:18"}},trackIntervals:{threshold:{"1200m":"5:36","800m":"3:44","600m":"2:48"},interval:{"400m":"1:43","300m":"1:17","200m":"0:52"}}},{goalTime:"3:15:00",paces:{easy:{min:"8:25",max:"9:16",km:"5:14-5:46"},marathon:{pace:"7:26",km:"4:37"},threshold:{pace:"7:00",km:"4:21"},interval:{pace:"6:26",km:"4:00"}},trackIntervals:{threshold:{"1200m":"5:13","800m":"3:29","600m":"2:37"},interval:{"400m":"1:36","300m":"1:12","200m":"0:48"}}},{goalTime:"3:00:00",paces:{easy:{min:"7:48",max:"8:36",km:"4:51-5:21"},marathon:{pace:"6:52",km:"4:16"},threshold:{pace:"6:29",km:"4:02"},interval:{pace:"5:58",km:"3:42"}},trackIntervals:{threshold:{"1200m":"4:50","800m":"3:13","600m":"2:25"},interval:{"400m":"1:29","300m":"1:07","200m":"0:44"}}},{goalTime:"2:45:00",paces:{easy:{min:"7:11",max:"7:55",km:"4:28-4:55"},marathon:{pace:"6:18",km:"3:55"},threshold:{pace:"5:58",km:"3:42"},interval:{pace:"5:29",km:"3:24"}},trackIntervals:{threshold:{"1200m":"4:27","800m":"2:58","600m":"2:13"},interval:{"400m":"1:22","300m":"1:01","200m":"0:41"}}},{goalTime:"2:30:00",paces:{easy:{min:"6:33",max:"7:14",km:"4:04-4:30"},marathon:{pace:"5:43",km:"3:33"},threshold:{pace:"5:27",km:"3:23"},interval:{pace:"5:01",km:"3:07"}},trackIntervals:{threshold:{"1200m":"4:04","800m":"2:42","600m":"2:02"},interval:{"400m":"1:15","300m":"0:56","200m":"0:37"}}},{goalTime:"2:15:00",paces:{easy:{min:"5:56",max:"6:33",km:"3:41-4:04"},marathon:{pace:"5:09",km:"3:12"},threshold:{pace:"4:56",km:"3:04"},interval:{pace:"4:32",km:"2:49"}},trackIntervals:{threshold:{"1200m":"3:40","800m":"2:27","600m":"1:50"},interval:{"400m":"1:08","300m":"0:51","200m":"0:34"}}},{goalTime:"2:00:00",paces:{easy:{min:"5:18",max:"5:51",km:"3:18-3:38"},marathon:{pace:"4:34",km:"2:50"},threshold:{pace:"4:25",km:"2:44"},interval:{pace:"4:04",km:"2:32"}},trackIntervals:{threshold:{"1200m":"3:17","800m":"2:12","600m":"1:39"},interval:{"400m":"1:01","300m":"0:45","200m":"0:30"}}}],"10K":[{goalTime:"80:00",paces:{easy:{min:"13:14",max:"14:28",km:"8:13-8:59"},marathon:{pace:"14:04",km:"8:44"},threshold:{pace:"11:58",km:"7:26"},interval:{pace:"10:11",km:"6:20"}},trackIntervals:{threshold:{"1200m":"8:56","800m":"5:58","600m":"4:28"},interval:{"400m":"2:32","300m":"1:54","200m":"1:16"}}},{goalTime:"70:00",paces:{easy:{min:"12:18",max:"13:27",km:"7:38-8:21"},marathon:{pace:"12:35",km:"7:49"},threshold:{pace:"10:59",km:"6:49"},interval:{pace:"9:33",km:"5:56"}},trackIntervals:{threshold:{"1200m":"8:12","800m":"5:28","600m":"4:06"},interval:{"400m":"2:23","300m":"1:47","200m":"1:11"}}},{goalTime:"60:00",paces:{easy:{min:"11:11",max:"12:15",km:"6:57-7:37"},marathon:{pace:"10:58",km:"6:49"},threshold:{pace:"9:48",km:"6:05"},interval:{pace:"8:39",km:"5:22"}},trackIntervals:{threshold:{"1200m":"7:19","800m":"4:53","600m":"3:40"},interval:{"400m":"2:09","300m":"1:37","200m":"1:04"}}},{goalTime:"55:00",paces:{easy:{min:"10:32",max:"11:32",km:"6:33-7:10"},marathon:{pace:"10:15",km:"6:22"},threshold:{pace:"9:09",km:"5:41"},interval:{pace:"8:08",km:"5:03"}},trackIntervals:{threshold:{"1200m":"6:50","800m":"4:33","600m":"3:25"},interval:{"400m":"2:01","300m":"1:31","200m":"1:01"}}},{goalTime:"50:00",paces:{easy:{min:"9:51",max:"10:48",km:"6:07-6:43"},marathon:{pace:"9:29",km:"5:53"},threshold:{pace:"8:29",km:"5:16"},interval:{pace:"7:35",km:"4:43"}},trackIntervals:{threshold:{"1200m":"6:20","800m":"4:13","600m":"3:10"},interval:{"400m":"1:53","300m":"1:25","200m":"0:57"}}},{goalTime:"45:00",paces:{easy:{min:"9:07",max:"10:00",km:"5:40-6:13"},marathon:{pace:"8:41",km:"5:23"},threshold:{pace:"7:46",km:"4:50"},interval:{pace:"6:58",km:"4:20"}},trackIntervals:{threshold:{"1200m":"5:48","800m":"3:52","600m":"2:54"},interval:{"400m":"1:44","300m":"1:18","200m":"0:52"}}},{goalTime:"42:00",paces:{easy:{min:"8:42",max:"9:32",km:"5:24-5:56"},marathon:{pace:"8:15",km:"5:08"},threshold:{pace:"7:23",km:"4:35"},interval:{pace:"6:38",km:"4:07"}},trackIntervals:{threshold:{"1200m":"5:31","800m":"3:40","600m":"2:45"},interval:{"400m":"1:39","300m":"1:14","200m":"0:50"}}},{goalTime:"38:00",paces:{easy:{min:"8:07",max:"8:56",km:"5:02-5:33"},marathon:{pace:"7:36",km:"4:43"},threshold:{pace:"6:51",km:"4:15"},interval:{pace:"6:10",km:"3:50"}},trackIntervals:{threshold:{"1200m":"5:07","800m":"3:24","600m":"2:33"},interval:{"400m":"1:32","300m":"1:09","200m":"0:46"}}},{goalTime:"32:00",paces:{easy:{min:"7:13",max:"7:56",km:"4:29-4:56"},marathon:{pace:"6:40",km:"4:09"},threshold:{pace:"6:03",km:"3:45"},interval:{pace:"5:28",km:"3:23"}},trackIntervals:{threshold:{"1200m":"4:31","800m":"3:01","600m":"2:16"},interval:{"400m":"1:22","300m":"1:01","200m":"0:41"}}}],halfMarathon:[{goalTime:"3:00:00",paces:{easy:{min:"12:59",max:"14:11",km:"8:04-8:49"},marathon:{pace:"13:51",km:"8:36"},threshold:{pace:"11:50",km:"7:21"},interval:{pace:"10:05",km:"6:16"}},trackIntervals:{threshold:{"1200m":"8:50","800m":"5:53","600m":"4:25"},interval:{"400m":"2:30","300m":"1:53","200m":"1:15"}}},{goalTime:"2:45:00",paces:{easy:{min:"12:25",max:"13:34",km:"7:43-8:26"},marathon:{pace:"12:46",km:"7:56"},threshold:{pace:"11:07",km:"6:55"},interval:{pace:"9:37",km:"5:59"}},trackIntervals:{threshold:{"1200m":"8:17","800m":"5:32","600m":"4:09"},interval:{"400m":"2:23","300m":"1:48","200m":"1:12"}}},{goalTime:"2:30:00",paces:{easy:{min:"11:48",max:"12:55",km:"7:20-8:02"},marathon:{pace:"11:40",km:"7:15"},threshold:{pace:"10:22",km:"6:26"},interval:{pace:"9:07",km:"5:40"}},trackIntervals:{threshold:{"1200m":"7:44","800m":"5:09","600m":"3:52"},interval:{"400m":"2:16","300m":"1:42","200m":"1:08"}}},{goalTime:"2:15:00",paces:{easy:{min:"11:07",max:"12:12",km:"6:55-7:35"},marathon:{pace:"10:34",km:"6:34"},threshold:{pace:"9:35",km:"5:57"},interval:{pace:"8:35",km:"5:20"}},trackIntervals:{threshold:{"1200m":"7:08","800m":"4:46","600m":"3:34"},interval:{"400m":"2:08","300m":"1:36","200m":"1:04"}}},{goalTime:"2:00:00",paces:{easy:{min:"10:23",max:"11:24",km:"6:27-7:05"},marathon:{pace:"9:27",km:"5:52"},threshold:{pace:"8:45",km:"5:26"},interval:{pace:"7:59",km:"4:58"}},trackIntervals:{threshold:{"1200m":"6:32","800m":"4:21","600m":"3:16"},interval:{"400m":"1:59","300m":"1:29","200m":"1:00"}}},{goalTime:"1:45:00",paces:{easy:{min:"9:21",max:"10:17",km:"5:49-6:23"},marathon:{pace:"8:19",km:"5:10"},threshold:{pace:"7:48",km:"4:51"},interval:{pace:"7:10",km:"4:27"}},trackIntervals:{threshold:{"1200m":"5:49","800m":"3:52","600m":"2:54"},interval:{"400m":"1:47","300m":"1:20","200m":"0:53"}}},{goalTime:"1:30:00",paces:{easy:{min:"8:07",max:"8:56",km:"5:02-5:33"},marathon:{pace:"7:09",km:"4:27"},threshold:{pace:"6:45",km:"4:11"},interval:{pace:"6:12",km:"3:51"}},trackIntervals:{threshold:{"1200m":"5:02","800m":"3:21","600m":"2:31"},interval:{"400m":"1:33","300m":"1:09","200m":"0:46"}}},{goalTime:"1:15:00",paces:{easy:{min:"6:51",max:"7:33",km:"4:15-4:42"},marathon:{pace:"5:59",km:"3:43"},threshold:{pace:"5:41",km:"3:32"},interval:{pace:"5:14",km:"3:15"}},trackIntervals:{threshold:{"1200m":"4:14","800m":"2:49","600m":"2:07"},interval:{"400m":"1:18","300m":"0:58","200m":"0:39"}}},{goalTime:"1:00:00",paces:{easy:{min:"5:33",max:"6:07",km:"3:27-3:48"},marathon:{pace:"4:47",km:"2:59"},threshold:{pace:"4:36",km:"2:52"},interval:{pace:"4:15",km:"2:38"}},trackIntervals:{threshold:{"1200m":"3:26","800m":"2:17","600m":"1:43"},interval:{"400m":"1:03","300m":"0:47","200m":"0:32"}}}]};function o(e){const t=e.split(":").map(Number);return 60*t[0]+t[1]}function a(e){const t=Math.floor(e/60),n=Math.round(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))}e=n.hmd(e);class s{constructor(){this.distanceMap={"10K":"10K","10k":"10K","10 K":"10K",Marathon:"marathon",marathon:"marathon",MARATHON:"marathon","Half Marathon":"halfMarathon",Half:"halfMarathon",half:"halfMarathon",halfMarathon:"halfMarathon",HalfMarathon:"halfMarathon"},this.validRanges={"10K":{min:"30:00",max:"90:00"},marathon:{min:"2:00:00",max:"6:00:00"},halfMarathon:{min:"1:00:00",max:"3:00:00"}}}timeToSeconds(e){const t=e.split(":").map(Number);if(2===t.length)return 60*t[0]+t[1];if(3===t.length)return 3600*t[0]+60*t[1]+t[2];throw new Error("Invalid time format. Use MM:SS or H:MM:SS")}secondsToTime(e){const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.round(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"))}normalizeDistance(e){const t=this.distanceMap[e];if(!t)throw new Error("Unsupported race distance: ".concat(e,". Use 'Marathon' or 'Half Marathon'"));return t}isWithinRange(e,t){const n=this.validRanges[e],r=this.timeToSeconds(n.min),i=this.timeToSeconds(n.max);return t>=r&&t<=i}getRangeMessage(e){const t=this.validRanges[e];return"Training plans are designed for ".concat("marathon"===e?"Marathon":"Half Marathon"," times between ").concat(t.min," and ").concat(t.max,". ")+"For goals outside this range, please reach out to the developer for additional support."}findExactMatch(e,t){const n=i[e];return n&&n.find(e=>e.goalTime===t)||null}findSurroundingPoints(e,t){const n=i[e];if(!n)return null;const o=n.map(e=>(0,r.A)((0,r.A)({},e),{},{seconds:this.timeToSeconds(e.goalTime)})).sort((e,t)=>e.seconds-t.seconds);let a=null,s=null;for(let r=0;r<o.length;r++)if(o[r].seconds<=t&&(a=o[r]),o[r].seconds>=t&&!s){s=o[r];break}return a&&s?{lowerPoint:a,upperPoint:s}:null}interpolatePace(e,t,n){const r=o(e);return a(r+(o(t)-r)*n)}interpolatePaceData(e,t,n){const r=this.findSurroundingPoints(e,n);if(!r)throw new Error("Unable to find data points for interpolation");const{lowerPoint:i,upperPoint:o}=r;if(i.goalTime===o.goalTime)return{goalTime:t,paces:i.paces,trackIntervals:i.trackIntervals,interpolated:!1};const a=o.seconds-i.seconds,s=(n-i.seconds)/a,l={easy:{min:this.interpolatePace(i.paces.easy.min,o.paces.easy.min,s),max:this.interpolatePace(i.paces.easy.max,o.paces.easy.max,s),km:i.paces.easy.km},marathon:{pace:this.interpolatePace(i.paces.marathon.pace,o.paces.marathon.pace,s),km:i.paces.marathon.km},threshold:{pace:this.interpolatePace(i.paces.threshold.pace,o.paces.threshold.pace,s),km:i.paces.threshold.km},interval:{pace:this.interpolatePace(i.paces.interval.pace,o.paces.interval.pace,s),km:i.paces.interval.km}},c={threshold:{},interval:{}};for(const[u,d]of Object.entries(i.trackIntervals.threshold))c.threshold[u]=this.interpolatePace(i.trackIntervals.threshold[u],o.trackIntervals.threshold[u],s);for(const[u,d]of Object.entries(i.trackIntervals.interval))c.interval[u]=this.interpolatePace(i.trackIntervals.interval[u],o.trackIntervals.interval[u],s);return{goalTime:t,paces:l,trackIntervals:c,interpolated:!0,interpolatedBetween:{lower:i.goalTime,upper:o.goalTime}}}getPaceData(e,t){const n=this.normalizeDistance(e),i=this.timeToSeconds(t);if(!this.isWithinRange(n,i))throw new Error(this.getRangeMessage(n));const o=this.findExactMatch(n,t);return o?(0,r.A)((0,r.A)({},o),{},{interpolated:!1}):this.interpolatePaceData(n,t,i)}calculateFromGoal(e,t){try{const n=this.getPaceData(e,t);return(0,r.A)({distance:e,goalTime:t,paces:{easy:{pace:"".concat(n.paces.easy.min,"-").concat(n.paces.easy.max),min:n.paces.easy.min,max:n.paces.easy.max,description:"Easy/Recovery runs",heartRate:"65-79% max HR"},marathon:{pace:n.paces.marathon.pace,description:"Marathon race pace",heartRate:"80-85% max HR"},threshold:{pace:n.paces.threshold.pace,description:"Tempo/Threshold runs",heartRate:"86-90% max HR"},interval:{pace:n.paces.interval.pace,description:"VO2 Max intervals (3-8 min)",heartRate:"95-100% max HR"}},trackIntervals:n.trackIntervals,interpolated:n.interpolated},n.interpolated&&{interpolatedBetween:n.interpolatedBetween})}catch(n){throw new Error("Pace calculation failed: ".concat(n.message))}}estimateCurrentVDOT(e,t){let n=30;return!e||e<=0?n=t>=40?40:t>=30?35:t>=20?32:30:(n=e>=18?42:e>=15?40:e>=13?38:e>=10?36:e>=8?34:e>=6?32:30,t>=50?n+=2:t<20&&(n-=2)),Math.max(25,Math.min(55,n))}estimateRaceTimeFromVDOT(e,t){const n={25:{"10K":"65:00",halfMarathon:"2:35:00",marathon:"5:30:00"},30:{"10K":"58:00",halfMarathon:"2:15:00",marathon:"4:45:00"},32:{"10K":"55:00",halfMarathon:"2:08:00",marathon:"4:30:00"},34:{"10K":"52:00",halfMarathon:"2:02:00",marathon:"4:15:00"},36:{"10K":"49:30",halfMarathon:"1:56:00",marathon:"4:02:00"},38:{"10K":"47:00",halfMarathon:"1:50:00",marathon:"3:50:00"},40:{"10K":"45:00",halfMarathon:"1:45:00",marathon:"3:40:00"},42:{"10K":"43:00",halfMarathon:"1:40:00",marathon:"3:30:00"},45:{"10K":"40:30",halfMarathon:"1:33:00",marathon:"3:15:00"},50:{"10K":"37:00",halfMarathon:"1:23:00",marathon:"2:55:00"}},r=Object.keys(n).map(Number).sort((e,t)=>e-t);let i=r[0];for(const a of r)Math.abs(a-e)<Math.abs(i-e)&&(i=a);const o=this.normalizeDistance(t);return n[i][o]||"2:00:00"}calculateFromCurrentFitness(e,t,n){const r=this.estimateCurrentVDOT(e,t),i=this.estimateRaceTimeFromVDOT(r,n);return console.log("\ud83d\udcca Estimated current fitness: VDOT ".concat(r," = ").concat(n," in ").concat(i)),this.calculateFromGoal(n,i)}blendPaces(e,t,n,r){const i=(n-1)/(r-1),s=this.smoothProgressionCurve(i),l=(e,t)=>{const n=o(e);return a(n-(n-o(t))*s)},c=e.paces||e,u=t.paces||t;return{paces:{easy:(d=c.easy.min,h=c.easy.max,p=u.easy.min,f=u.easy.max,{min:l(d,p),max:l(h,f)}),marathon:{pace:l(c.marathon.pace,u.marathon.pace)},threshold:{pace:l(c.threshold.pace,u.threshold.pace)},interval:{pace:l(c.interval.pace,u.interval.pace)}},progressionRatio:s,weekNumber:n,totalWeeks:r};var d,h,p,f}smoothProgressionCurve(e){return e<.3?.5*e:e<.7?.15+1.5*(e-.3):.75+.833*(e-.7)}calculateRunEqDistance(e){const t=2*e;return{runDistance:e,bikeDistance:t,factor:2,description:"Ride ".concat(t," miles on stand-up bike (").concat(2,"x run equivalent)")}}getAvailableGoalTimes(e){const t=this.normalizeDistance(e),n=i[t];return n?n.map(e=>e.goalTime):[]}}e.exports&&(e.exports={PaceCalculator:s})},579:(e,t,n)=>{e.exports=n(180)},606:(e,t,n)=>{n.d(t,{h1:()=>s,uA:()=>i});var r=n(776);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const o="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===o?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.component?this.component.multipleInstances?e:o:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class s{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},667:(e,t,n)=>{n.d(t,{arrayUnion:()=>yc,rJ:()=>nl,deleteField:()=>mc,doc:()=>rl,getDoc:()=>sc,GG:()=>cc,aU:()=>cl,aQ:()=>hc,P:()=>Yl,serverTimestamp:()=>gc,setDoc:()=>uc,updateDoc:()=>dc,_M:()=>Ql});var r,i,o=n(379),a=n(150),s=n(606),l=n(965),c=n(776),u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},d={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let o,a=e.g[3];o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[3]+3250441966&4294967295,o=t+(a^(n=i+(o<<22&4294967295|o>>>10))&(i^a))+r[4]+4118548399&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[7]+4249261313&4294967295,o=t+(a^(n=i+(o<<22&4294967295|o>>>10))&(i^a))+r[8]+1770035416&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[11]+2304563134&4294967295,o=t+(a^(n=i+(o<<22&4294967295|o>>>10))&(i^a))+r[12]+1804603682&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[15]+1236535329&4294967295,o=t+(i^a&((n=i+(o<<22&4294967295|o>>>10))^i))+r[1]+4129170786&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[0]+3921069994&4294967295,o=t+(i^a&((n=i+(o<<20&4294967295|o>>>12))^i))+r[5]+3593408605&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[4]+3889429448&4294967295,o=t+(i^a&((n=i+(o<<20&4294967295|o>>>12))^i))+r[9]+568446438&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[8]+1163531501&4294967295,o=t+(i^a&((n=i+(o<<20&4294967295|o>>>12))^i))+r[13]+2850285829&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[12]+2368359562&4294967295,o=t+((n=i+(o<<20&4294967295|o>>>12))^i^a)+r[5]+4294588738&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[14]+4259657740&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^a)+r[1]+2763975236&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[10]+3200236656&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^a)+r[13]+681279174&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[6]+76029189&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^a)+r[9]+3654602809&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[2]+3299628645&4294967295,o=t+(i^((n=i+(o<<23&4294967295|o>>>9))|~a))+r[0]+4096336452&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[5]+4237533241&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~a))+r[12]+1700485571&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[1]+2240044497&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~a))+r[8]+1873313359&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[13]+1309151649&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~a))+r[4]+4149444226&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function o(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let o=this.h,a=0;for(;a<t;){if(0==o)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[o++]=e.charCodeAt(a++),o==this.blockSize){n(this,i),o=0;break}}else for(;a<t;)if(i[o++]=e[a++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var a={};function s(e){return-128<=e&&e<128?function(e,t){var n=a;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new o([0|e],e<0?-1:0)}):new o([0|e],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(e<0)return m(l(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}var c=s(0),u=s(1),h=s(16777216);function p(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function f(e){return-1==e.h}function m(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(u)}function g(e,t){return e.add(m(t))}function y(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function v(e,t){this.g=e,this.h=t}function b(e,t){if(p(t))throw Error("division by zero");if(p(e))return new v(c,c);if(f(e))return t=b(m(e),t),new v(m(t.g),m(t.h));if(f(t))return t=b(e,m(t)),new v(m(t.g),t.h);if(e.g.length>30){if(f(e)||f(t))throw Error("slowDivide_ only works with positive integers.");for(var n=u,r=t;r.l(e)<=0;)n=w(n),r=w(r);var i=k(n,1),o=k(r,1);for(r=k(r,2),n=k(n,2);!p(r);){var a=o.add(r);a.l(e)<=0&&(i=i.add(n),o=a),r=k(r,1),n=k(n,1)}return t=g(e,i.j(t)),new v(i,t)}for(i=c;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),a=(o=l(n)).j(t);f(a)||a.l(e)>0;)a=(o=l(n-=r)).j(t);p(o)&&(o=u),i=i.add(o),e=g(e,a)}return new v(i,e)}function w(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function k(e,t){const n=t>>5;t%=32;const r=e.g.length-n,i=[];for(let o=0;o<r;o++)i[o]=t>0?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new o(i,e.h)}(e=o.prototype).m=function(){if(f(this))return-m(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(p(this))return"0";if(f(this))return"-"+m(this).toString(e);const t=l(Math.pow(e,6));var n=this;let r="";for(;;){const i=b(n,t).g;let o=(((n=g(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(p(n=i))return o+r;for(;o.length<6;)o="0"+o;r=o+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return f(e=g(this,e))?-1:p(e)?0:1},e.abs=function(){return f(this)?m(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let r=0;for(let i=0;i<=t;i++){let t=r+(65535&this.i(i))+(65535&e.i(i)),o=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=o>>>16,t&=65535,o&=65535,n[i]=o<<16|t}return new o(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(p(this)||p(e))return c;if(f(this))return f(e)?m(this).j(m(e)):m(m(this).j(e));if(f(e))return m(this.j(m(e)));if(this.l(h)<0&&e.l(h)<0)return l(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){const i=this.i(r)>>>16,o=65535&this.i(r),a=e.i(t)>>>16,s=65535&e.i(t);n[2*r+2*t]+=o*s,y(n,2*r+2*t),n[2*r+2*t+1]+=i*s,y(n,2*r+2*t+1),n[2*r+2*t+1]+=o*a,y(n,2*r+2*t+1),n[2*r+2*t+2]+=i*a,y(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new o(n,0)},e.B=function(e){return b(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,i=d.Md5=t,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return m(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=l(Math.pow(n,8));let i=c;for(let a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+o),n);o<8?(o=l(Math.pow(n,o)),i=i.j(o).add(l(e))):(i=i.j(r),i=i.add(l(e)))}return i},r=d.Integer=o}).apply("undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var h,p,f,m,g,y,v,b,w="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},k={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof w&&w];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in i))break e;i=i[a]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},o=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=s).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function x(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function E(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function T(e){o.setTimeout(()=>{throw e},0)}function C(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new D,e=>e.reset());class D{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let A,R=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=_.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},P=()=>{const e=Promise.resolve(void 0);A=()=>{e.then(M)}};function M(){for(var e;e=C();){try{e.h.call(e.g)}catch(n){T(n)}var t=_;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}R=!1}function N(){this.u=this.u,this.C=this.C}function j(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},j.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};o.addEventListener("test",e,t),o.removeEventListener("test",e,t)}catch(n){}return e}();function F(e){return/^[\s\xa0]*$/.test(e)}function L(e,t){j.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(L,j),L.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&L.Z.h.call(this)},L.prototype.h=function(){L.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var W="closure_listenable_"+(1e6*Math.random()|0),B=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++B,this.da=this.fa=!1}function z(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function q(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function H(e){const t={};for(const n in e)t[n]=e[n];return t}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<V.length;t++)n=V[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Y(e){this.src=e,this.g={},this.h=0}function G(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=o>=0)&&Array.prototype.splice.call(i,o,1),r&&(z(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Q(e,t,n,r){for(let i=0;i<e.length;++i){const o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}Y.prototype.add=function(e,t,n,r,i){const o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);const a=Q(e,t,r,i);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var X="closure_lm_"+(1e6*Math.random()|0),J={};function $(e,t,n,r,i){if(r&&r.once)return ee(e,t,n,r,i);if(Array.isArray(t)){for(let o=0;o<t.length;o++)$(e,t[o],n,r,i);return null}return n=le(n),e&&e[W]?e.J(t,n,a(r)?!!r.capture:!!r,i):Z(e,t,n,!1,r,i)}function Z(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");const s=a(i)?!!i.capture:!!i;let l=ae(e);if(l||(e[X]=l=new Y(e)),(n=l.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=oe;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ie(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ee(e,t,n,r,i){if(Array.isArray(t)){for(let o=0;o<t.length;o++)ee(e,t[o],n,r,i);return null}return n=le(n),e&&e[W]?e.K(t,n,a(r)?!!r.capture:!!r,i):Z(e,t,n,!0,r,i)}function ne(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)ne(e,t[o],n,r,i);else r=a(r)?!!r.capture:!!r,n=le(n),e&&e[W]?(e=e.i,(o=String(t).toString())in e.g&&((n=Q(t=e.g[o],n,r,i))>-1&&(z(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[o],e.h--)))):e&&(e=ae(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Q(t,n,r,i)),(n=e>-1?t[e]:null)&&re(n))}function re(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[W])G(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ie(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ae(t))?(G(n,e),0==n.h&&(n.src=null,t[X]=null)):z(e)}}}function ie(e){return e in J?J[e]:J[e]="on"+e}function oe(e,t){if(e.da)e=!0;else{t=new L(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&re(e),e=n.call(r,t)}return e}function ae(e){return(e=e[X])instanceof Y?e:null}var se="__closure_events_fn_"+(1e9*Math.random()>>>0);function le(e){return"function"===typeof e?e:(e[se]||(e[se]=function(t){return e.handleEvent(t)}),e[se])}function ce(){N.call(this),this.i=new Y(this),this.M=this,this.G=null}function ue(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new j(t,e);else if(t instanceof j)t.target=t.target||e;else{var i=t;K(t=new j(r,e),i)}let o,a;if(i=!0,n)for(a=n.length-1;a>=0;a--)o=t.g=n[a],i=de(o,r,!0,t)&&i;if(o=t.g=e,i=de(o,r,!0,t)&&i,i=de(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)o=t.g=n[a],i=de(o,r,!1,t)&&i}function de(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let o=0;o<t.length;++o){const a=t[o];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&G(e.i,a),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function he(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,he(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(ce,N),ce.prototype[W]=!0,ce.prototype.removeEventListener=function(e,t,n,r){ne(this,e,t,n,r)},ce.prototype.N=function(){if(ce.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)z(n[e]);delete e.g[t],e.h--}}this.G=null},ce.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ce.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class pe extends N{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:he(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fe(e){N.call(this),this.h=e,this.g={}}u(fe,N);var me=[];function ge(e){q(e.g,function(e,t){this.g.hasOwnProperty(t)&&re(e)},e),e.g={}}fe.prototype.N=function(){fe.Z.N.call(this),ge(this)},fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ye=o.JSON.stringify,ve=o.JSON.parse,be=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function we(){}function ke(){}var xe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Se(){j.call(this,"d")}function Ee(){j.call(this,"c")}u(Se,j),u(Ee,j);var Te={},Ce=null;function _e(){return Ce=Ce||new ce}function De(e){j.call(this,Te.Ia,e)}function Ae(e){const t=_e();ue(t,new De(t))}function Re(e,t){j.call(this,Te.STAT_EVENT,e),this.stat=t}function Ie(e){const t=_e();ue(t,new Re(t,e))}function Pe(e,t){j.call(this,Te.Ja,e),this.size=t}function Me(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){e()},t)}function Ne(){this.g=!0}function je(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const o=JSON.parse(t);if(o)for(e=0;e<o.length;e++)if(Array.isArray(o[e])){var n=o[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return ye(o)}catch(o){return t}}(e,n)+(r?" "+r:"")})}Te.Ia="serverreachability",u(De,j),Te.STAT_EVENT="statevent",u(Re,j),Te.Ja="timingevent",u(Pe,j),Ne.prototype.ua=function(){this.g=!1},Ne.prototype.info=function(){};var Oe,Fe={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Le={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function We(){}function Be(e){return encodeURIComponent(String(e))}function Ue(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function ze(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new fe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qe}function qe(){this.i=null,this.g="",this.h=!1}u(We,we),We.prototype.g=function(){return new XMLHttpRequest},Oe=new We;var He={},Ve={};function Ke(e,t,n){e.M=1,e.A=yt(ht(t)),e.u=n,e.R=!0,Ye(e,null)}function Ye(e,t){e.F=Date.now(),Xe(e),e.B=ht(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),It(n.i,"t",r),e.C=0,n=e.j.L,e.h=new qe,e.g=vn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new pe(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(me[0]=i.toString()),i=me);for(let o=0;o<i.length;o++){const e=$(n,i[o],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?H(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),Ae(),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o){var a="",s=o.split("&");for(let e=0;e<s.length;e++){var l=s[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+l+"&":a+(e+"=redacted&")}}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Ge(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Qe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ve:(n=Number(t.substring(n,r)),isNaN(n)?He:(r+=1)+n>t.length?Ve:(t=t.slice(r,r+n),e.C=r+n,t))}function Xe(e){e.T=Date.now()+e.H,Je(e,e.H)}function Je(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=Me(l(e.aa,e),t)}function $e(e){e.D&&(o.clearTimeout(e.D),e.D=null)}function Ze(e){0==e.j.I||e.K||pn(e.j,e)}function et(e){$e(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ge(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function tt(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||at(n.h,e)))if(!e.L&&at(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;hn(n),tn(n)}cn(n),Ie(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=Me(l(n.Va,n),6e3));ot(n.h)<=1&&n.ta&&(n.ta=void 0)}else mn(n,11)}else if((e.L||n.g==e)&&hn(n),!F(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(st(o,o.h),o.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,gt(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=yn(r,r.L?r.ba:null,r.W),a.L){lt(r.h,a);var s=a,c=r.O;c&&(s.H=c),s.D&&($e(s),Xe(s)),r.g=a}else ln(r);n.i.length>0&&rn(n)}else"stop"!=l[0]&&"close"!=l[0]||mn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?mn(n,7):en(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}Ae()}catch(u){}}ze.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Xt(e)?t.j():this.Y(e)},ze.prototype.Y=function(e){try{if(e==this.g)e:{const l=Xt(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Jt(this.g)))){this.K||4!=l||7==c||Ae(),$e(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Ge(e))return e.g.la();const t=Jt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Xt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return et(e),Ze(e),"";e.h.i=new o.TextDecoder}for(let o=0;o<r;o++)e.h.h=!0,n+=e.h.i.decode(t[o],{stream:!(i&&o==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,o,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(r)){var a=r;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,Ie(12),et(this),Ze(this);break e}je(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tt(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Qe(this,n),t==Ve){4==l&&(this.m=4,Ie(14),e=!1),je(this.i,this.l,null,"[Incomplete Response]");break}if(t==He){this.m=4,Ie(15),je(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}je(this.i,this.l,t,null),tt(this,t)}if(Ge(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,Ie(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var s=this.j;s.g==this&&s.aa&&!s.P&&(s.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),un(s),s.P=!0,Ie(11))}}else je(this.i,this.l,n,"[Invalid Chunked Response]"),et(this),Ze(this)}else je(this.i,this.l,n,null),tt(this,n);4==l&&et(this),this.o&&!this.K&&(4==l?pn(this.j,this):(this.o=!1,Xe(this)))}else(function(e){const t={};e=(e.g&&Xt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(F(e[r]))continue;var n=Ue(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,Ie(12)):(this.m=0,Ie(13)),et(this),Ze(this)}}}catch(te){}},ze.prototype.cancel=function(){this.K=!0,et(this)},ze.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(Ae(),Ie(17)),et(this),this.m=2,Ze(this)):Je(this,this.T-e)};var nt=class{constructor(e,t){this.g=e,this.map=t}};function rt(e){this.l=e||10,o.PerformanceNavigationTiming?e=(e=o.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function it(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ot(e){return e.h?1:e.g?e.g.size:0}function at(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function st(e,t){e.g?e.g.add(t):e.h=t}function lt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ct(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return x(e.i)}rt.prototype.cancel=function(){if(this.i=ct(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ut=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dt(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof dt?(this.l=e.l,pt(this,e.j),this.o=e.o,this.g=e.g,ft(this,e.u),this.h=e.h,mt(this,Pt(e.i)),this.m=e.m):e&&(t=String(e).match(ut))?(this.l=!1,pt(this,t[1]||"",!0),this.o=vt(t[2]||""),this.g=vt(t[3]||"",!0),ft(this,t[4]),this.h=vt(t[5]||"",!0),mt(this,t[6]||"",!0),this.m=vt(t[7]||"")):(this.l=!1,this.i=new Ct(null,this.l))}function ht(e){return new dt(e)}function pt(e,t,n){e.j=n?vt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ft(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function mt(e,t,n){t instanceof Ct?(e.i=t,function(e,t){t&&!e.j&&(_t(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(Dt(this,t),It(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=bt(t,Et)),e.i=new Ct(t,e.l))}function gt(e,t,n){e.i.set(t,n)}function yt(e){return gt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function vt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function bt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,wt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function wt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}dt.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(bt(t,kt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(bt(t,kt,!0),"@"),e.push(Be(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(bt(n,"/"==n.charAt(0)?St:xt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",bt(n,Tt)),e.join("")},dt.prototype.resolve=function(e){const t=ht(this);let n=!!e.j;n?pt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)ft(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?mt(t,Pt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var kt=/[#\/\?@]/g,xt=/[#\?:]/g,St=/[#\?]/g,Et=/[#\?@]/g,Tt=/#/g;function Ct(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _t(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,o=null;r>=0?(i=e[n].substring(0,r),o=e[n].substring(r+1)):i=e[n],t(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Dt(e,t){_t(e),t=Mt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function At(e,t){return _t(e),t=Mt(e,t),e.g.has(t)}function Rt(e,t){_t(e);let n=[];if("string"===typeof t)At(e,t)&&(n=n.concat(e.g.get(Mt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function It(e,t,n){Dt(e,t),n.length>0&&(e.i=null,e.g.set(Mt(e,t),x(n)),e.h+=n.length)}function Pt(e){const t=new Ct;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function Mt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Nt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(o){}}function jt(){this.g=new be}function Ot(e){this.i=e.Sb||null,this.h=e.ab||!1}function Ft(e,t){ce.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Lt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Wt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Bt(e)}function Bt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ut(e){let t="";return q(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function zt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ut(n),"string"===typeof e?null!=n&&Be(n):gt(e,t,n))}function qt(e){ce.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=Ct.prototype).add=function(e,t){_t(this),this.i=null,e=Mt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){_t(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return _t(this),this.i=null,At(this,e=Mt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=Rt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Be(n);n=Rt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Be(n[t])),e.push(r)}}return this.i=e.join("&")},u(Ot,we),Ot.prototype.g=function(){return new Ft(this.i,this.h)},u(Ft,ce),(e=Ft.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Bt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Wt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Bt(this)),this.g&&(this.readyState=3,Bt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof o.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Lt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Wt(this):Bt(this),3==this.readyState&&Lt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Wt(this))},e.Na=function(e){this.g&&(this.response=e,Wt(this))},e.ga=function(){this.g&&Wt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ft.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(qt,ce);var Ht=/^https?$/i,Vt=["POST","PUT"];function Kt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Yt(e),Qt(e)}function Yt(e){e.A||(e.A=!0,ue(e,"complete"),ue(e,"error"))}function Gt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Xt(e))setTimeout(e.Ca.bind(e),0);else if(ue(e,"readystatechange"),4==Xt(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(ut)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!Ht.test(t?t.toLowerCase():"")}n=r}if(n)ue(e,"complete"),ue(e,"success");else{e.o=6;try{var a=Xt(e)>2?e.g.statusText:""}catch(s){a=""}e.l=a+" ["+e.ca()+"]",Yt(e)}}finally{Qt(e)}}}function Qt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||ue(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Xt(e){return e.g?e.g.readyState:0}function Jt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function $t(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Zt(e){this.za=0,this.i=[],this.j=new Ne,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=$t("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=$t("baseRetryDelayMs",5e3,e),this.Za=$t("retryDelaySeedMs",1e4,e),this.Ta=$t("forwardChannelMaxRetries",2,e),this.va=$t("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new rt(e&&e.concurrentRequestLimit),this.Ba=new jt,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function en(e){if(nn(e),3==e.I){var t=e.V++,n=ht(e.J);if(gt(n,"SID",e.M),gt(n,"RID",t),gt(n,"TYPE","terminate"),an(e,n),(t=new ze(e,e.j,t)).M=2,t.A=yt(ht(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&o.Image&&((new Image).src=t.A,n=!0),n||(t.g=vn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Xe(t)}gn(e)}function tn(e){e.g&&(un(e),e.g.cancel(),e.g=null)}function nn(e){tn(e),e.v&&(o.clearTimeout(e.v),e.v=null),hn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&o.clearTimeout(e.m),e.m=null)}function rn(e){if(!it(e.h)&&!e.m){e.m=!0;var t=e.Ea;A||P(),R||(A(),R=!0),I.add(t,e),e.D=0}}function on(e,t){var n;n=t?t.l:e.V++;const r=ht(e.J);gt(r,"SID",e.M),gt(r,"RID",n),gt(r,"AID",e.K),an(e,r),e.u&&e.o&&zt(r,e.u,e.o),n=new ze(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=sn(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),st(e.h,n),Ke(n,r,t)}function an(e,t){e.H&&q(e.H,function(e,n){gt(t,n,e)}),e.l&&q({},function(e,n){gt(t,n,e)})}function sn(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var o=i[c].g;const n=i[c].map;if((o-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{o="req"+o+"_"||0;try{var s=n instanceof Map?n:Object.entries(n);for(const[t,n]of s){let r=n;a(n)&&(r=ye(n)),e.push(o+t+"="+encodeURIComponent(r))}}catch(S){throw e.push(o+"type="+encodeURIComponent("_badmap")),S}}catch(S){r&&r(n)}}if(l){s=e.join("&");break e}}s=void 0}return e=e.i.splice(0,n),t.G=e,s}function ln(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;A||P(),R||(A(),R=!0),I.add(t,e),e.A=0}}function cn(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=Me(l(e.Da,e),fn(e,e.A)),e.A++,!0)}function un(e){null!=e.B&&(o.clearTimeout(e.B),e.B=null)}function dn(e){e.g=new ze(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=ht(e.na);gt(t,"RID","rpc"),gt(t,"SID",e.M),gt(t,"AID",e.K),gt(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&gt(t,"TO",e.ia),gt(t,"TYPE","xmlhttp"),an(e,t),e.u&&e.o&&zt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=yt(ht(t)),n.u=null,n.R=!0,Ye(n,e)}function hn(e){null!=e.C&&(o.clearTimeout(e.C),e.C=null)}function pn(e,t){var n=null;if(e.g==t){hn(e),un(e),e.g=null;var r=2}else{if(!at(e.h,t))return;n=t.G,lt(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;ue(r=_e(),new Pe(r,n)),rn(e)}else ln(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(ot(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=Me(l(e.Ea,e,t),fn(e,e.D)),e.D++,!0))}(e,t)||2==r&&cn(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:mn(e,5);break;case 4:mn(e,10);break;case 3:mn(e,6);break;default:mn(e,2)}}function fn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function mn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new dt(r||"//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||pt(r,"https"),yt(r),t?function(e,t){const n=new Ne;if(o.Image){const r=new Image;r.onload=c(Nt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Nt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Nt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Nt,n,"TestLoadImage: timeout",!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout(()=>{n.abort(),Nt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Nt(0,0,!0,t):Nt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Nt(0,0,!1,t)})}(r.toString(),n)}else Ie(2);e.I=0,e.l&&e.l.pa(t),gn(e),nn(e)}function gn(e){if(e.I=0,e.ja=[],e.l){const t=ct(e.h);0==t.length&&0==e.i.length||(E(e.ja,t),E(e.ja,e.i),e.h.i.length=0,x(e.i),e.i.length=0),e.l.oa()}}function yn(e,t,n){var r=n instanceof dt?ht(n):new dt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ft(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new dt(null);r&&pt(e,r),t&&(e.g=t),i&&ft(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&gt(r,n,t),gt(r,"VER",e.ka),an(e,r),r}function vn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new qt(new Ot({ab:n})):new qt(e.ma)).Fa(e.L),t}function bn(){}function wn(){}function kn(e,t){ce.call(this),this.g=new Zt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!F(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!F(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new En(this)}function xn(e){Se.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Sn(){Ee.call(this),this.status=1}function En(e){this.g=e}(e=qt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Oe.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Kt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(Vt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(a){Kt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,ue(this,"complete"),ue(this,"abort"),Qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qt(this,!0)),qt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Gt(this):this.Xa())},e.Xa=function(){Gt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Xt(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ve(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Zt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){Ie(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=yn(this,null,this.W),rn(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new ze(this,this.j,e);let o=this.o;if(this.U&&(o?(o=H(o),K(o,this.U)):o=this.U),null!==this.u||this.R||(i.J=o,o=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=sn(this,i,t),gt(n=ht(this.J),"RID",e),gt(n,"CVER",22),this.G&&gt(n,"X-HTTP-Session-Id",this.G),an(this,n),o&&(this.R?t="headers="+Be(Ut(o))+"&"+t:this.u&&zt(n,this.u,o)),st(this.h,i),this.Ra&&gt(n,"TYPE","init"),this.S?(gt(n,"$req",t),gt(n,"SID","null"),i.U=!0,Ke(i,n,null)):Ke(i,n,t),this.I=2}}else 3==this.I&&(e?on(this,e):0==this.i.length||it(this.h)||on(this))},e.Da=function(){if(this.v=null,dn(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=Me(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ie(10),tn(this),dn(this))},e.Va=function(){null!=this.C&&(this.C=null,tn(this),cn(this),Ie(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=bn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},wn.prototype.g=function(e,t){return new kn(e,t)},u(kn,ce),kn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){en(this.g)},kn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ye(e),e=n);t.i.push(new nt(t.Ya++,e)),3==t.I&&rn(t)},kn.prototype.N=function(){this.g.l=null,delete this.j,en(this.g),delete this.g,kn.Z.N.call(this)},u(xn,Se),u(Sn,Ee),u(En,bn),En.prototype.ra=function(){ue(this.g,"a")},En.prototype.qa=function(e){ue(this.g,new xn(e))},En.prototype.pa=function(e){ue(this.g,new Sn)},En.prototype.oa=function(){ue(this.g,"b")},wn.prototype.createWebChannel=wn.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,b=k.createWebChannelTransport=function(){return new wn},v=k.getStatEventTarget=function(){return _e()},y=k.Event=Te,g=k.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fe.NO_ERROR=0,Fe.TIMEOUT=8,Fe.HTTP_ERROR=6,m=k.ErrorCode=Fe,Le.COMPLETE="complete",f=k.EventType=Le,ke.EventType=xe,xe.OPEN="a",xe.CLOSE="b",xe.ERROR="c",xe.MESSAGE="d",ce.prototype.listen=ce.prototype.J,p=k.WebChannel=ke,k.FetchXmlHttpFactory=Ot,qt.prototype.listenOnce=qt.prototype.K,qt.prototype.getLastError=qt.prototype.Ha,qt.prototype.getLastErrorCode=qt.prototype.ya,qt.prototype.getStatus=qt.prototype.ca,qt.prototype.getResponseJson=qt.prototype.La,qt.prototype.getResponseText=qt.prototype.la,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Fa,h=k.XhrIo=qt}).apply("undefined"!==typeof w?w:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const x="@firebase/firestore",S="4.9.2";class E{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}E.UNAUTHENTICATED=new E(null),E.GOOGLE_CREDENTIALS=new E("google-credentials-uid"),E.FIRST_PARTY=new E("first-party-uid"),E.MOCK_USER=new E("mock-user");let T="12.3.0";const C=new l.Vy("@firebase/firestore");function _(){return C.logLevel}function D(e){if(C.logLevel<=l.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(I);C.debug("Firestore (".concat(T,"): ").concat(e),...i)}}function A(e){if(C.logLevel<=l.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(I);C.error("Firestore (".concat(T,"): ").concat(e),...i)}}function R(e){if(C.logLevel<=l.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(I);C.warn("Firestore (".concat(T,"): ").concat(e),...i)}}function I(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function P(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,M(e,r,n)}function M(e,t,n){let r="FIRESTORE (".concat(T,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw A(r),new Error(r)}function N(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||M(t,i,r)}function j(e,t){return e}const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class F extends c.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class L{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class W{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class B{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(E.UNAUTHENTICATED))}shutdown(){}}class U{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class z{constructor(e){this.t=e,this.currentUser=E.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){N(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new L;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new L,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new L)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(N("string"==typeof t.accessToken,31837,{l:t}),new W(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return N(null===e||"string"==typeof e,2055,{h:e}),new E(e)}}class q{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=E.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class H{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new q(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(E.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class V{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,a.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){N(void 0===this.o,3512);const n=e=>{null!=e.error&&D("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,D("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new V(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(N("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new V(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Y(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class G{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Y(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Q(e,t){return e<t?-1:e>t?1:0}function X(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return Z(n)===Z(i)?Q(n,i):Z(n)?1:-1}return Q(e.length,t.length)}const J=55296,$=57343;function Z(e){const t=e.charCodeAt(0);return t>=J&&t<=$}function ee(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const te="__name__";class ne{constructor(e,t,n){void 0===t?t=0:t>e.length&&P(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&P(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ne.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ne?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=ne.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Q(e.length,t.length)}static compareSegments(e,t){const n=ne.isNumericId(e),r=ne.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?ne.extractNumericId(e).compare(ne.extractNumericId(t)):X(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return r.fromString(e.substring(4,e.length-2))}}class re extends ne{construct(e,t,n){return new re(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new F(O.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new re(e)}static emptyPath(){return new re([])}}const ie=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class oe extends ne{construct(e,t,n){return new oe(e,t,n)}static isValidIdentifier(e){return ie.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),oe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===te}static keyField(){return new oe([te])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new F(O.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new F(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new F(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new F(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new oe(t)}static emptyPath(){return new oe([])}}class ae{constructor(e){this.path=e}static fromPath(e){return new ae(re.fromString(e))}static fromName(e){return new ae(re.fromString(e).popFirst(5))}static empty(){return new ae(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===re.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return re.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new re(e.slice()))}}function se(e,t,n){if(!n)throw new F(O.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function le(e){if(!ae.isDocumentKey(e))throw new F(O.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ce(e){if(ae.isDocumentKey(e))throw new F(O.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ue(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function de(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":P(12329,{type:typeof e})}function he(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new F(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=de(e);throw new F(O.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function pe(e,t){const n={typeString:e};return t&&(n.value=t),n}function fe(e,t){if(!ue(e))throw new F(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,o="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(i&&typeof a!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==o&&a!==o.value){n="Expected '".concat(r,"' field to equal '").concat(o.value,"'");break}}if(n)throw new F(O.INVALID_ARGUMENT,n);return!0}const me=-62135596800,ge=1e6;class ye{static now(){return ye.fromMillis(Date.now())}static fromDate(e){return ye.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*ge);return new ye(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new F(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new F(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<me)throw new F(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ge}_compareTo(e){return this.seconds===e.seconds?Q(this.nanoseconds,e.nanoseconds):Q(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fe(e,ye._jsonSchema))return new ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-me;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ye._jsonSchemaVersion="firestore/timestamp/1.0",ye._jsonSchema={type:pe("string",ye._jsonSchemaVersion),seconds:pe("number"),nanoseconds:pe("number")};class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new ye(0,0))}static max(){return new ve(new ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const be=-1;class we{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}we.UNKNOWN_ID=-1;function ke(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ve.fromTimestamp(1e9===r?new ye(n+1,0):new ye(n,r));return new Se(i,ae.empty(),t)}function xe(e){return new Se(e.readTime,e.key,be)}class Se{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Se(ve.min(),ae.empty(),be)}static max(){return new Se(ve.max(),ae.empty(),be)}}function Ee(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ae.comparator(e.documentKey,t.documentKey),0!==n?n:Q(e.largestBatchId,t.largestBatchId))}const Te="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ce{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function _e(e){if(e.code!==O.FAILED_PRECONDITION||e.message!==Te)throw e;D("LocalStore","Unexpectedly lost primary lease")}class De{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&P(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new De((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof De?t:De.resolve(t)}catch(e){return De.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):De.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):De.reject(t)}static resolve(e){return new De((t,n)=>{t(e)})}static reject(e){return new De((t,n)=>{n(e)})}static waitFor(e){return new De((t,n)=>{let r=0,i=0,o=!1;e.forEach(e=>{++r,e.next(()=>{++i,o&&i===r&&t()},e=>n(e))}),o=!0,i===r&&t()})}static or(e){let t=De.resolve(!1);for(const n of e)t=t.next(e=>e?De.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new De((n,r)=>{const i=e.length,o=new Array(i);let a=0;for(let s=0;s<i;s++){const l=s;t(e[l]).next(e=>{o[l]=e,++a,a===i&&n(o)},e=>r(e))}})}static doWhile(e,t){return new De((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Ae(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Re(e){return"IndexedDbTransactionError"===e.name}class Ie{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ie.ce=-1;const Pe=-1;function Me(e){return null==e}function Ne(e){return 0===e&&1/e==-1/0}function je(e){return"number"==typeof e&&Number.isInteger(e)&&!Ne(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Oe="\x01";function Fe(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=We(t)),t=Le(e.get(n),t);return We(t)}function Le(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Oe:n+="\x01\x11";break;default:n+=t}}return n}function We(e){return e+Oe+"\x01"}const Be="remoteDocuments",Ue="owner",ze="mutationQueues",qe="mutations";const He="documentMutations",Ve="remoteDocumentsV14",Ke="remoteDocumentGlobal",Ye="targets",Qe="targetDocuments",Xe="targetGlobal",Je="collectionParents",$e="clientMetadata",Ze="bundles",et="namedQueries",tt="indexConfiguration",nt="indexState",rt="indexEntries",it="documentOverlays",ot="globals",at=[ze,qe,He,Be,Ye,Ue,Xe,Qe,$e,Ke,Je,Ze,et],st=[ze,qe,He,Ve,Ye,Ue,Xe,Qe,$e,Ke,Je,Ze,et,it],lt=st,ct=[...lt,tt,nt,rt];function ut(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function dt(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ht(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class pt{constructor(e,t){this.comparator=e,this.root=t||mt.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ft(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ft(this.root,e,this.comparator,!1)}getReverseIterator(){return new ft(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ft(this.root,e,this.comparator,!0)}}class ft{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mt{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:mt.RED,this.left=null!=r?r:mt.EMPTY,this.right=null!=i?i:mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new mt(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return mt.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw P(43730,{key:this.key,value:this.value});if(this.right.isRed())throw P(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw P(27949);return e+(this.isRed()?0:1)}}mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1,mt.EMPTY=new class{constructor(){this.size=0}get key(){throw P(57766)}get value(){throw P(16141)}get color(){throw P(16727)}get left(){throw P(29726)}get right(){throw P(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new mt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yt(this.data.getIterator())}getIteratorFrom(e){return new yt(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof gt))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gt(this.comparator);return t.data=e,t}}class yt{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class vt{constructor(e){this.fields=e,e.sort(oe.comparator)}static empty(){return new vt([])}unionWith(e){let t=new gt(oe.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new vt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ee(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class bt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new bt("Invalid base64 string: "+e):e}}(e);return new wt(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Q(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const kt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xt(e){if(N(!!e,39018),"string"==typeof e){let t=0;const n=kt.exec(e);if(N(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:St(e.seconds),nanos:St(e.nanos)}}function St(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Et(e){return"string"==typeof e?wt.fromBase64String(e):wt.fromUint8Array(e)}const Tt="server_timestamp",Ct="__type__",_t="__previous_value__",Dt="__local_write_time__";function At(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Ct])||void 0===t?void 0:t.stringValue)===Tt}function Rt(e){const t=e.mapValue.fields[_t];return At(t)?Rt(t):t}function It(e){const t=xt(e.mapValue.fields[Dt].timestampValue);return new ye(t.seconds,t.nanos)}class Pt{constructor(e,t,n,r,i,o,a,s,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=s,this.useFetchStreams=l,this.isUsingEmulator=c}}const Mt="(default)";class Nt{constructor(e,t){this.projectId=e,this.database=t||Mt}static empty(){return new Nt("","")}get isDefaultDatabase(){return this.database===Mt}isEqual(e){return e instanceof Nt&&e.projectId===this.projectId&&e.database===this.database}}const jt="__type__",Ot="__max__",Ft={mapValue:{fields:{__type__:{stringValue:Ot}}}},Lt="__vector__",Wt="value";function Bt(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?At(e)?4:rn(e)?9007199254740991:tn(e)?10:11:P(28295,{value:e})}function Ut(e,t){if(e===t)return!0;const n=Bt(e);if(n!==Bt(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return It(e).isEqual(It(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=xt(e.timestampValue),r=xt(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Et(e.bytesValue).isEqual(Et(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return St(e.geoPointValue.latitude)===St(t.geoPointValue.latitude)&&St(e.geoPointValue.longitude)===St(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return St(e.integerValue)===St(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=St(e.doubleValue),r=St(t.doubleValue);return n===r?Ne(n)===Ne(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ee(e.arrayValue.values||[],t.arrayValue.values||[],Ut);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ut(n)!==ut(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ut(n[i],r[i])))return!1;return!0}(e,t);default:return P(52216,{left:e})}}function zt(e,t){return void 0!==(e.values||[]).find(e=>Ut(e,t))}function qt(e,t){if(e===t)return 0;const n=Bt(e),r=Bt(t);if(n!==r)return Q(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Q(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=St(e.integerValue||e.doubleValue),r=St(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ht(e.timestampValue,t.timestampValue);case 4:return Ht(It(e),It(t));case 5:return X(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Et(e),r=Et(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Q(n[i],r[i]);if(0!==e)return e}return Q(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Q(St(e.latitude),St(t.latitude));return 0!==n?n:Q(St(e.longitude),St(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Vt(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,o){const a=e.fields||{},s=t.fields||{},l=null===(n=a[Wt])||void 0===n?void 0:n.arrayValue,c=null===(r=s[Wt])||void 0===r?void 0:r.arrayValue,u=Q((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(o=c.values)||void 0===o?void 0:o.length)||0);return 0!==u?u:Vt(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ft.mapValue&&t===Ft.mapValue)return 0;if(e===Ft.mapValue)return 1;if(t===Ft.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let a=0;a<r.length&&a<o.length;++a){const e=X(r[a],o[a]);if(0!==e)return e;const t=qt(n[r[a]],i[o[a]]);if(0!==t)return t}return Q(r.length,o.length)}(e.mapValue,t.mapValue);default:throw P(23264,{he:n})}}function Ht(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Q(e,t);const n=xt(e),r=xt(t),i=Q(n.seconds,r.seconds);return 0!==i?i:Q(n.nanos,r.nanos)}function Vt(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=qt(n[i],r[i]);if(e)return e}return Q(n.length,r.length)}function Kt(e){return Yt(e)}function Yt(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=xt(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Et(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ae.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Yt(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Yt(e.fields[i]));return n+"}"}(e.mapValue):P(61005,{value:e})}function Gt(e){switch(Bt(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Rt(e);return t?16+Gt(t):16;case 5:return 2*e.stringValue.length;case 6:return Et(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Gt(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return dt(e.fields,(e,n)=>{t+=e.length+Gt(n)}),t}(e.mapValue);default:throw P(13486,{value:e})}}function Qt(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Xt(e){return!!e&&"integerValue"in e}function Jt(e){return!!e&&"arrayValue"in e}function $t(e){return!!e&&"nullValue"in e}function Zt(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function en(e){return!!e&&"mapValue"in e}function tn(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[jt])||void 0===t?void 0:t.stringValue)===Lt}function nn(e){if(e.geoPointValue)return{geoPointValue:(0,o.A)({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:(0,o.A)({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return dt(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=nn(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=nn(e.arrayValue.values[n]);return t}return(0,o.A)({},e)}function rn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Ot}class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!en(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nn(t)}setAll(e){let t=oe.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=nn(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());en(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ut(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];en(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){dt(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new on(nn(this.value))}}function an(e){const t=[];return dt(e.fields,(e,n)=>{const r=new oe([e]);if(en(n)){const e=an(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new vt(t)}class sn{constructor(e,t,n,r,i,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new sn(e,0,ve.min(),ve.min(),ve.min(),on.empty(),0)}static newFoundDocument(e,t,n,r){return new sn(e,1,t,ve.min(),n,r,0)}static newNoDocument(e,t){return new sn(e,2,t,ve.min(),ve.min(),on.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,ve.min(),ve.min(),on.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ln{constructor(e,t){this.position=e,this.inclusive=t}}function cn(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],a=e.position[i];if(r=o.field.isKeyField()?ae.comparator(ae.fromName(a.referenceValue),n.key):qt(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function un(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ut(e.position[n],t.position[n]))return!1;return!0}class dn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function hn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class pn{}class fn extends pn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new xn(e,t,n):"array-contains"===t?new Cn(e,n):"in"===t?new _n(e,n):"not-in"===t?new Dn(e,n):"array-contains-any"===t?new An(e,n):new fn(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Sn(e,n):new En(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(qt(t,this.value)):null!==t&&Bt(this.value)===Bt(t)&&this.matchesComparison(qt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return P(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mn extends pn{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new mn(e,t)}matches(e){return gn(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gn(e){return"and"===e.op}function yn(e){return vn(e)&&gn(e)}function vn(e){for(const t of e.filters)if(t instanceof mn)return!1;return!0}function bn(e){if(e instanceof fn)return e.field.canonicalString()+e.op.toString()+Kt(e.value);if(yn(e))return e.filters.map(e=>bn(e)).join(",");{const t=e.filters.map(e=>bn(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function wn(e,t){return e instanceof fn?function(e,t){return t instanceof fn&&e.op===t.op&&e.field.isEqual(t.field)&&Ut(e.value,t.value)}(e,t):e instanceof mn?function(e,t){return t instanceof mn&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&wn(n,t.filters[r]),!0)}(e,t):void P(19439)}function kn(e){return e instanceof fn?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Kt(e.value))}(e):e instanceof mn?function(e){return e.op.toString()+" {"+e.getFilters().map(kn).join(" ,")+"}"}(e):"Filter"}class xn extends fn{constructor(e,t,n){super(e,t,n),this.key=ae.fromName(n.referenceValue)}matches(e){const t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class Sn extends fn{constructor(e,t){super(e,"in",t),this.keys=Tn("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class En extends fn{constructor(e,t){super(e,"not-in",t),this.keys=Tn("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Tn(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ae.fromName(e.referenceValue))}class Cn extends fn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Jt(t)&&zt(t.arrayValue,this.value)}}class _n extends fn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&zt(this.value.arrayValue,t)}}class Dn extends fn{constructor(e,t){super(e,"not-in",t)}matches(e){if(zt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!zt(this.value.arrayValue,t)}}class An extends fn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Jt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>zt(this.value.arrayValue,e))}}class Rn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function In(e){return new Rn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Pn(e){const t=j(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>bn(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Me(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Kt(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Kt(e)).join(",")),t.Te=e}return t.Te}function Mn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!hn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!wn(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!un(e.startAt,t.startAt)&&un(e.endAt,t.endAt)}function Nn(e){return ae.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class jn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function On(e,t,n,r,i,o,a,s){return new jn(e,t,n,r,i,o,a,s)}function Fn(e){return new jn(e)}function Ln(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Wn(e){return null!==e.collectionGroup}function Bn(e){const t=j(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new gt(oe.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new dn(r,n))}),e.has(oe.keyField().canonicalString())||t.Ie.push(new dn(oe.keyField(),n))}return t.Ie}function Un(e){const t=j(e);return t.Ee||(t.Ee=zn(t,Bn(e))),t.Ee}function zn(e,t){if("F"===e.limitType)return In(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new dn(e.field,t)});const n=e.endAt?new ln(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ln(e.startAt.position,e.startAt.inclusive):null;return In(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function qn(e,t){const n=e.filters.concat([t]);return new jn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Hn(e,t,n){return new jn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Vn(e,t){return Mn(Un(e),Un(t))&&e.limitType===t.limitType}function Kn(e){return"".concat(Pn(Un(e)),"|lt:").concat(e.limitType)}function Yn(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>kn(e)).join(", "),"]")),Me(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Kt(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Kt(e)).join(",")),"Target(".concat(t,")")}(Un(e)),"; limitType=").concat(e.limitType,")")}function Gn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ae.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Bn(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=cn(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Bn(e),t))&&!(e.endAt&&!function(e,t,n){const r=cn(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Bn(e),t))}(e,t)}function Qn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Xn(e){return(t,n)=>{let r=!1;for(const i of Bn(e)){const e=Jn(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Jn(e,t,n){const r=e.field.isKeyField()?ae.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?qt(r,i):P(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return P(19790,{direction:e.dir})}}class $n{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){dt(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return ht(this.inner)}size(){return this.innerSize}}const Zn=new pt(ae.comparator);function er(){return Zn}const tr=new pt(ae.comparator);function nr(){let e=tr;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function rr(e){let t=tr;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ir(){return ar()}function or(){return ar()}function ar(){return new $n(e=>e.toString(),(e,t)=>e.isEqual(t))}const sr=new pt(ae.comparator),lr=new gt(ae.comparator);function cr(){let e=lr;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const ur=new gt(Q);function dr(){return ur}function hr(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ne(t)?"-0":t}}function pr(e){return{integerValue:""+e}}function fr(e,t){return je(t)?pr(t):hr(e,t)}class mr{constructor(){this._=void 0}}function gr(e,t,n){return e instanceof br?function(e,t){const n={fields:{[Ct]:{stringValue:Tt},[Dt]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&At(t)&&(t=Rt(t)),t&&(n.fields[_t]=t),{mapValue:n}}(n,t):e instanceof wr?kr(e,t):e instanceof xr?Sr(e,t):function(e,t){const n=vr(e,t),r=Tr(n)+Tr(e.Ae);return Xt(n)&&Xt(e.Ae)?pr(r):hr(e.serializer,r)}(e,t)}function yr(e,t,n){return e instanceof wr?kr(e,t):e instanceof xr?Sr(e,t):n}function vr(e,t){return e instanceof Er?function(e){return Xt(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class br extends mr{}class wr extends mr{constructor(e){super(),this.elements=e}}function kr(e,t){const n=Cr(t);for(const r of e.elements)n.some(e=>Ut(e,r))||n.push(r);return{arrayValue:{values:n}}}class xr extends mr{constructor(e){super(),this.elements=e}}function Sr(e,t){let n=Cr(t);for(const r of e.elements)n=n.filter(e=>!Ut(e,r));return{arrayValue:{values:n}}}class Er extends mr{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Tr(e){return St(e.integerValue||e.doubleValue)}function Cr(e){return Jt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class _r{constructor(e,t){this.field=e,this.transform=t}}class Dr{constructor(e,t){this.version=e,this.transformResults=t}}class Ar{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ar}static exists(e){return new Ar(void 0,e)}static updateTime(e){return new Ar(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rr(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ir{}function Pr(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new zr(e.key,Ar.none()):new Fr(e.key,e.data,Ar.none());{const n=e.data,r=on.empty();let i=new gt(oe.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Lr(e.key,r,new vt(i.toArray()),Ar.none())}}function Mr(e,t,n){e instanceof Fr?function(e,t,n){const r=e.value.clone(),i=Br(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Lr?function(e,t,n){if(!Rr(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Br(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Wr(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Nr(e,t,n,r){return e instanceof Fr?function(e,t,n,r){if(!Rr(e.precondition,t))return n;const i=e.value.clone(),o=Ur(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Lr?function(e,t,n,r){if(!Rr(e.precondition,t))return n;const i=Ur(e.fieldTransforms,r,t),o=t.data;return o.setAll(Wr(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Rr(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function jr(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=vr(r.transform,e||null);null!=i&&(null===n&&(n=on.empty()),n.set(r.field,i))}return n||null}function Or(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ee(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof wr&&t instanceof wr||e instanceof xr&&t instanceof xr?ee(e.elements,t.elements,Ut):e instanceof Er&&t instanceof Er?Ut(e.Ae,t.Ae):e instanceof br&&t instanceof br}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Fr extends Ir{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Lr extends Ir{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Wr(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Br(e,t,n){const r=new Map;N(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,yr(a,s,n[i]))}return r}function Ur(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,gr(e,o,t))}return r}class zr extends Ir{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qr extends Ir{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Hr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Mr(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Nr(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Nr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=or();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const s=Pr(o,a);null!==s&&n.set(r.key,s),o.isValidDocument()||o.convertToNoDocument(ve.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),cr())}isEqual(e){return this.batchId===e.batchId&&ee(this.mutations,e.mutations,(e,t)=>Or(e,t))&&ee(this.baseMutations,e.baseMutations,(e,t)=>Or(e,t))}}class Vr{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){N(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=sr;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Vr(e,t,n,r)}}class Kr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Yr{constructor(e,t){this.count=e,this.unchangedNames=t}}var Gr,Qr;function Xr(e){switch(e){case O.OK:return P(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return P(15467,{code:e})}}function Jr(e){if(void 0===e)return A("GRPC error has no .code"),O.UNKNOWN;switch(e){case Gr.OK:return O.OK;case Gr.CANCELLED:return O.CANCELLED;case Gr.UNKNOWN:return O.UNKNOWN;case Gr.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Gr.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Gr.INTERNAL:return O.INTERNAL;case Gr.UNAVAILABLE:return O.UNAVAILABLE;case Gr.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Gr.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Gr.NOT_FOUND:return O.NOT_FOUND;case Gr.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Gr.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Gr.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Gr.ABORTED:return O.ABORTED;case Gr.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Gr.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Gr.DATA_LOSS:return O.DATA_LOSS;default:return P(39323,{code:e})}}(Qr=Gr||(Gr={}))[Qr.OK=0]="OK",Qr[Qr.CANCELLED=1]="CANCELLED",Qr[Qr.UNKNOWN=2]="UNKNOWN",Qr[Qr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qr[Qr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qr[Qr.NOT_FOUND=5]="NOT_FOUND",Qr[Qr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qr[Qr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qr[Qr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qr[Qr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qr[Qr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qr[Qr.ABORTED=10]="ABORTED",Qr[Qr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qr[Qr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qr[Qr.INTERNAL=13]="INTERNAL",Qr[Qr.UNAVAILABLE=14]="UNAVAILABLE",Qr[Qr.DATA_LOSS=15]="DATA_LOSS";let $r=null;function Zr(){return new TextEncoder}const ei=new r([4294967295,4294967295],0);function ti(e){const t=Zr().encode(e),n=new i;return n.update(t),new Uint8Array(n.digest())}function ni(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),o=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new r([n,i],0),new r([o,a],0)]}class ri{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ii("Invalid padding: ".concat(t));if(n<0)throw new ii("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ii("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ii("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=r.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(r.fromNumber(n)));return 1===i.compare(ei)&&(i=new r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=ti(e),[n,r]=ni(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ri(i,r,t);return n.forEach(e=>o.insert(e)),o}insert(e){if(0===this.ge)return;const t=ti(e),[n,r]=ni(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ii extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class oi{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ai.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new oi(ve.min(),r,new pt(Q),er(),cr())}}class ai{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ai(n,t,cr(),cr(),cr())}}class si{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class li{constructor(e,t){this.targetId=e,this.Ce=t}}class ci{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wt.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ui{constructor(){this.ve=0,this.Fe=pi(),this.Me=wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=cr(),t=cr(),n=cr();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:P(38017,{changeType:i})}}),new ai(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=pi()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,N(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class di{constructor(e){this.Ge=e,this.ze=new Map,this.je=er(),this.Je=hi(),this.He=hi(),this.Ye=new pt(Q)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:P(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const o=r.target;if(Nn(o))if(0===n){const e=new ae(o.path);this.et(t,e,sn.newNoDocument(e,ve.min()))}else N(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),o=n?this.ct(n,e,r):1;if(0!==o){this.it(t);const e=2===o?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=$r)||void 0===i||i.lt(function(e,t,n,r,i,o,a,s,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===i,hashCount:null!==(o=null===d||void 0===d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(a=null===d||void 0===d||null===(s=d.bits)||void 0===s||null===(s=s.bitmap)||void 0===s?void 0:s.length)&&void 0!==a?a:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,o))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,a;try{o=Et(n).toUint8Array()}catch(e){if(e instanceof bt)return R("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new ri(o,r,i)}catch(e){return R(e instanceof ii?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Nn(i.target)){const t=new ae(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,sn.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=cr();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new oi(e,t,this.Ye,this.je,n);return this.je=er(),this.Je=hi(),this.He=hi(),this.Ye=new pt(Q),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ui,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new gt(Q),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new gt(Q),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||D("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ui),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function hi(){return new pt(ae.comparator)}function pi(){return new pt(ae.comparator)}const fi={asc:"ASCENDING",desc:"DESCENDING"},mi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gi={and:"AND",or:"OR"};class yi{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vi(e,t){return e.useProto3Json||Me(t)?t:{value:t}}function bi(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function wi(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ki(e,t){return bi(e,t.toTimestamp())}function xi(e){return N(!!e,49232),ve.fromTimestamp(function(e){const t=xt(e);return new ye(t.seconds,t.nanos)}(e))}function Si(e,t){return Ei(e,t).canonicalString()}function Ei(e,t){const n=function(e){return new re(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Ti(e){const t=re.fromString(e);return N(Vi(t),10190,{key:t.toString()}),t}function Ci(e,t){return Si(e.databaseId,t.path)}function _i(e,t){const n=Ti(t);if(n.get(1)!==e.databaseId.projectId)throw new F(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new F(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ae(Ii(n))}function Di(e,t){return Si(e.databaseId,t)}function Ai(e){const t=Ti(e);return 4===t.length?re.emptyPath():Ii(t)}function Ri(e){return new re(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ii(e){return N(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Pi(e,t,n){return{name:Ci(e,t),fields:n.value.mapValue.fields}}function Mi(e,t){let n;if(t instanceof Fr)n={update:Pi(e,t.key,t.value)};else if(t instanceof zr)n={delete:Ci(e,t.key)};else if(t instanceof Lr)n={update:Pi(e,t.key,t.data),updateMask:Hi(t.fieldMask)};else{if(!(t instanceof qr))return P(16599,{Vt:t.type});n={verify:Ci(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof br)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof wr)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof xr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Er)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw P(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ki(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:P(27497)}(e,t.precondition)),n}function Ni(e,t){return{documents:[Di(e,t.path)]}}function ji(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Di(e,i);const o=function(e){if(0!==e.length)return qi(mn.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Ui(e.field),direction:Li(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const s=vi(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Oi(e){let t=Ai(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){N(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Fi(e);return t instanceof mn&&yn(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new dn(zi(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,Me(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ln(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new ln(n,t)}(n.endAt)),On(t,i,a,o,s,"F",l,c)}function Fi(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=zi(e.unaryFilter.field);return fn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=zi(e.unaryFilter.field);return fn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=zi(e.unaryFilter.field);return fn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=zi(e.unaryFilter.field);return fn.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return P(61313);default:return P(60726)}}(e):void 0!==e.fieldFilter?function(e){return fn.create(zi(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return P(58110);default:return P(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return mn.create(e.compositeFilter.filters.map(e=>Fi(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return P(1026)}}(e.compositeFilter.op))}(e):P(30097,{filter:e})}function Li(e){return fi[e]}function Wi(e){return mi[e]}function Bi(e){return gi[e]}function Ui(e){return{fieldPath:e.canonicalString()}}function zi(e){return oe.fromServerFormat(e.fieldPath)}function qi(e){return e instanceof fn?function(e){if("=="===e.op){if(Zt(e.value))return{unaryFilter:{field:Ui(e.field),op:"IS_NAN"}};if($t(e.value))return{unaryFilter:{field:Ui(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Zt(e.value))return{unaryFilter:{field:Ui(e.field),op:"IS_NOT_NAN"}};if($t(e.value))return{unaryFilter:{field:Ui(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ui(e.field),op:Wi(e.op),value:e.value}}}(e):e instanceof mn?function(e){const t=e.getFilters().map(e=>qi(e));return 1===t.length?t[0]:{compositeFilter:{op:Bi(e.op),filters:t}}}(e):P(54877,{filter:e})}function Hi(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Vi(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ki{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ve.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ve.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:wt.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=s}withSequenceNumber(e){return new Ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Yi{constructor(e){this.yt=e}}function Gi(e){const t=Oi({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Hn(t,t.limit,"L"):t}class Qi{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(St(e.integerValue));else if("doubleValue"in e){const n=St(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Ne(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=xt(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Et(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?rn(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):tn(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):P(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=Wt,o=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(St(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),ae.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Qi.Kt=new Qi;class Xi{constructor(){this.Cn=new Ji}addToCollectionParentIndex(e,t){return this.Cn.add(t),De.resolve()}getCollectionParents(e,t){return De.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return De.resolve()}deleteFieldIndex(e,t){return De.resolve()}deleteAllFieldIndexes(e){return De.resolve()}createTargetIndexes(e,t){return De.resolve()}getDocumentsMatchingTarget(e,t){return De.resolve(null)}getIndexType(e,t){return De.resolve(0)}getFieldIndexes(e,t){return De.resolve([])}getNextCollectionGroupToUpdate(e){return De.resolve(null)}getMinOffset(e,t){return De.resolve(Se.min())}getMinOffsetFromCollectionGroup(e,t){return De.resolve(Se.min())}updateCollectionGroup(e,t,n){return De.resolve()}updateIndexEntries(e,t){return De.resolve()}}class Ji{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new gt(re.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new gt(re.comparator)).toArray()}}new Uint8Array(0);const $i={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zi=41943040;class eo{static withCacheSize(e){return new eo(e,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}eo.DEFAULT_COLLECTION_PERCENTILE=10,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,eo.DEFAULT=new eo(Zi,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),eo.DISABLED=new eo(-1,0,0);class to{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new to(0)}static cr(){return new to(-1)}}const no="LruGarbageCollector",ro=1048576;function io(e,t){let[n,r]=e,[i,o]=t;const a=Q(n,i);return 0===a?Q(r,o):a}class oo{constructor(e){this.Ir=e,this.buffer=new gt(io),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();io(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ao{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){D(no,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Re(e)?D(no,"Ignoring IndexedDB error during garbage collection: ",e):await _e(e)}await this.Vr(3e5)})}}class so{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return De.resolve(Ie.ce);const n=new oo(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(D("LruGarbageCollector","Garbage collection skipped; disabled"),De.resolve($i)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(D("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),$i):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,o,a,s,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(D("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),_()<=l.$b.DEBUG&&D("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-s)+"ms\n"+"Total Duration: ".concat(c-u,"ms")),De.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function lo(e,t){return new so(e,t)}class co{constructor(){this.changes=new $n(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?De.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uo{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ho{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Nr(n.mutation,e,vt.empty(),ye.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,cr()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cr();const r=ir();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=nr();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=ir();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,cr()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=er();const o=ar(),a=ar();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Lr)?i=i.insert(t.key,t):void 0!==a?(o.set(t.key,a.mutation.getFieldMask()),Nr(a.mutation,t,a.mutation.getFieldMask(),ye.now())):o.set(t.key,vt.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new uo(t,null!==(n=o.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=ar();let r=new pt((e,t)=>e-t),i=cr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let a=n.get(e)||vt.empty();a=i.applyToLocalView(o,a),n.set(e,a);const s=(r.get(i.batchId)||cr()).add(e);r=r.insert(i.batchId,s)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,l=r.value,c=or();l.forEach(e=>{if(!i.has(e)){const r=Pr(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,s,c))}return De.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ae.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wn(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):De.resolve(ir());let a=be,s=i;return o.next(t=>De.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?De.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{s=s.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,s,t,cr())).next(e=>({batchId:a,changes:rr(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next(e=>{let t=nr();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=nr();return this.indexManager.getCollectionParents(e,i).next(a=>De.forEach(a,a=>{const s=function(e,t){return new jn(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next(e=>{e.forEach((e,t)=>{o=o.insert(e,t)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,sn.newInvalidDocument(r)))});let n=nr();return e.forEach((e,r)=>{const o=i.get(e);void 0!==o&&Nr(o.mutation,r,vt.empty(),ye.now()),Gn(t,r)&&(n=n.insert(e,r))}),n})}}class po{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return De.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:xi(e.createTime)}}(t)),De.resolve()}getNamedQuery(e,t){return De.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Gi(e.bundledQuery),readTime:xi(e.readTime)}}(t)),De.resolve()}}class fo{constructor(){this.overlays=new pt(ae.comparator),this.qr=new Map}getOverlay(e,t){return De.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ir();return De.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),De.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),De.resolve()}getOverlaysForCollection(e,t,n){const r=ir(),i=t.length+1,o=new ae(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const e=a.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return De.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new pt((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=ir(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=ir(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return De.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Kr(t,n));let i=this.qr.get(t);void 0===i&&(i=cr(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class mo{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return De.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,De.resolve()}}class go{constructor(){this.Qr=new gt(yo.$r),this.Ur=new gt(yo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new yo(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new yo(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new ae(new re([])),n=new yo(t,e),r=new yo(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ae(new re([])),n=new yo(t,e),r=new yo(t,e+1);let i=cr();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new yo(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class yo{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ae.comparator(e.key,t.key)||Q(e.Yr,t.Yr)}static Kr(e,t){return Q(e.Yr,t.Yr)||ae.comparator(e.key,t.key)}}class vo{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new gt(yo.$r)}checkEmpty(e){return De.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Hr(i,t,n,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new yo(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return De.resolve(o)}lookupMutationBatch(e,t){return De.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return De.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return De.resolve(0===this.mutationQueue.length?Pe:this.tr-1)}getAllMutationBatches(e){return De.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new yo(t,0),r=new yo(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),De.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new gt(Q);return t.forEach(e=>{const t=new yo(e,0),r=new yo(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),De.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ae.isDocumentKey(i)||(i=i.child(""));const o=new yo(new ae(i),0);let a=new gt(Q);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},o),De.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){N(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return De.forEach(t.mutations,r=>{const i=new yo(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new yo(t,0),r=this.Zr.firstAfterOrEqual(n);return De.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,De.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class bo{constructor(e){this.ri=e,this.docs=new pt(ae.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return De.resolve(n?n.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let n=er();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():sn.newInvalidDocument(e))}),De.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=er();const o=t.path,a=new ae(o.child("__id-9223372036854775808__")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Ee(xe(a),n)<=0||(r.has(a.key)||Gn(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return De.resolve(i)}getAllFromCollectionGroup(e,t,n,r){P(9500)}ii(e,t){return De.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new wo(this)}getSize(e){return De.resolve(this.size)}}class wo extends co{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),De.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class ko{constructor(e){this.persistence=e,this.si=new $n(e=>Pn(e),Mn),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new go,this.targetCount=0,this.ai=to.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),De.resolve()}getLastRemoteSnapshotVersion(e){return De.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return De.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),De.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),De.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new to(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,De.resolve()}updateTargetData(e,t){return this.Pr(t),De.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,De.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),De.waitFor(i).next(()=>r)}getTargetCount(e){return De.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return De.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),De.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),De.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),De.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return De.resolve(n)}containsKey(e,t){return De.resolve(this._i.containsKey(t))}}class xo{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ie(0),this.li=!1,this.li=!0,this.hi=new mo,this.referenceDelegate=e(this),this.Pi=new ko(this),this.indexManager=new Xi,this.remoteDocumentCache=function(e){return new bo(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Yi(t),this.Ii=new po(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fo,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new vo(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){D("MemoryPersistence","Starting transaction:",e);const r=new So(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return De.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class So extends Ce{constructor(e){super(),this.currentSequenceNumber=e}}class Eo{constructor(e){this.persistence=e,this.Ri=new go,this.Vi=null}static mi(e){return new Eo(e)}get fi(){if(this.Vi)return this.Vi;throw P(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),De.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),De.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),De.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return De.forEach(this.fi,n=>{const r=ae.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,ve.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return De.or([()=>De.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class To{constructor(e,t){this.persistence=e,this.pi=new $n(e=>Fe(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=lo(this,t)}static mi(e,t){return new To(e,t)}Ei(){}di(e){return De.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return De.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?De.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,ve.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),De.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),De.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),De.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),De.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Gt(e.data.value)),t}br(e,t,n){return De.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return De.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Co{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=cr(),r=cr();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Co(e,t.fromCache,n,r)}}class _o{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Do{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(0,c.nr)()?8:Ae((0,c.ZQ)())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new _o;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(_()<=l.$b.DEBUG&&D("QueryEngine","SDK will not create cache indexes for query:",Yn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),De.resolve()):(_()<=l.$b.DEBUG&&D("QueryEngine","Query:",Yn(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(_()<=l.$b.DEBUG&&D("QueryEngine","The SDK decides to create cache indexes for query:",Yn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Un(t))):De.resolve())}ys(e,t){if(Ln(t))return De.resolve(null);let n=Un(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Hn(t,null,"F"),n=Un(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=cr(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const o=this.Ds(t,r);return this.Cs(t,o,i,n.readTime)?this.ys(e,Hn(t,null,"F")):this.vs(e,o,t,n)}))})))}ws(e,t,n,r){return Ln(t)||r.isEqual(ve.min())?De.resolve(null):this.ps.getDocuments(e,n).next(i=>{const o=this.Ds(t,i);return this.Cs(t,o,n,r)?De.resolve(null):(_()<=l.$b.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Yn(t)),this.vs(e,o,t,ke(r,be)).next(e=>e))})}Ds(e,t){let n=new gt(Xn(e));return t.forEach((t,r)=>{Gn(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return _()<=l.$b.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",Yn(t)),this.ps.getDocumentsMatchingQuery(e,t,Se.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Ao="LocalStore",Ro=3e8;class Io{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new pt(Q),this.xs=new $n(e=>Pn(e),Mn),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ho(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Po(e,t,n,r){return new Io(e,t,n,r)}async function Mo(e,t){const n=j(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],o=[];let a=cr();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:o}))})})}function No(e){const t=j(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function jo(e,t,n){let r=cr(),i=cr();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=er();return n.forEach((n,o)=>{const a=e.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(ve.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):D(Ao,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),{ks:r,qs:i}})}function Oo(e,t){const n=j(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Pe),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Fo(e,t){const n=j(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,De.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new Ki(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Lo(e,t,n){const r=j(e),i=r.Ms.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Re(e))throw e;D(Ao,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Wo(e,t,n){const r=j(e);let i=ve.min(),o=cr();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=j(e),i=r.xs.get(n);return void 0!==i?De.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,Un(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{o=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:ve.min(),n?o:cr())).next(e=>(Bo(r,Qn(t),e),{documents:e,Qs:o})))}function Bo(e,t,n){let r=e.Os.get(t)||ve.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Uo{constructor(){this.activeTargetIds=dr()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zo{constructor(){this.Mo=new Uo,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Uo,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qo{Oo(e){}shutdown(){}}const Ho="ConnectivityMonitor";class Vo{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){D(Ho,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){D(Ho,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ko=null;function Yo(){return null===Ko?Ko=268435456+Math.round(2147483648*Math.random()):Ko++,"0x"+Ko.toString(16)}const Go="RestConnection",Qo={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Xo{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Mt?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const o=Yo(),a=this.zo(e,t.toUriEncodedString());D(Go,"Sending RPC '".concat(e,"' ").concat(o,":"),a,n);const s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,i);const{host:l}=new URL(a),u=(0,c.zJ)(l);return this.Jo(e,a,s,n,u).then(t=>(D(Go,"Received RPC '".concat(e,"' ").concat(o,": "),t),t),t=>{throw R(Go,"RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,i,o){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+T,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Qo[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Jo{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const $o="WebChannelConnection";class Zo extends Xo{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const o=Yo();return new Promise((i,a)=>{const s=new h;s.setWithCredentials(!0),s.listenOnce(f.COMPLETE,()=>{try{switch(s.getLastErrorCode()){case m.NO_ERROR:const n=s.getResponseJson();D($o,"XHR for RPC '".concat(e,"' ").concat(o," received:"),JSON.stringify(n)),i(n);break;case m.TIMEOUT:D($o,"RPC '".concat(e,"' ").concat(o," timed out")),a(new F(O.DEADLINE_EXCEEDED,"Request time out"));break;case m.HTTP_ERROR:const r=s.getStatus();if(D($o,"RPC '".concat(e,"' ").concat(o," failed with status:"),r,"response text:",s.getResponseText()),r>0){var t;let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(t)>=0?t:O.UNKNOWN}(n.status);a(new F(e,n.message))}else a(new F(O.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new F(O.UNAVAILABLE,"Connection failed."));break;default:P(9055,{l_:e,streamId:o,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{D($o,"RPC '".concat(e,"' ").concat(o," completed."))}});const l=JSON.stringify(r);D($o,"RPC '".concat(e,"' ").concat(o," sending request:"),r),s.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Yo(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=b(),a=v(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const c=i.join("");D($o,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);const u=o.createWebChannel(c,s);this.I_(u);let d=!1,h=!1;const f=new Jo({Yo:t=>{h?D($o,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(D($o,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),D($o,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(u,p.EventType.OPEN,()=>{h||(D($o,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),m(u,p.EventType.CLOSE,()=>{h||(h=!0,D($o,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),m(u,p.EventType.ERROR,t=>{h||(h=!0,R($o,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new F(O.UNAVAILABLE,"The operation could not be completed")))}),m(u,p.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];N(!!i,16349);const o=i,a=(null===o||void 0===o?void 0:o.error)||(null===(n=o[0])||void 0===n?void 0:n.error);if(a){D($o,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Gr[e];if(void 0!==t)return Jr(t)}(t),i=a.message;void 0===n&&(n=O.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.a_(new F(n,i)),u.close()}else D($o,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),m(a,y.STAT_EVENT,t=>{t.stat===g.PROXY?D($o,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===g.NOPROXY&&D($o,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function ea(){return"undefined"!=typeof document?document:null}function ta(e){return new yi(e,!0)}class na{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&D("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ra="PersistentStream";class ia{constructor(e,t,n,r,i,o,a,s){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new na(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(A(t.toString()),A("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===O.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new F(O.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return D(ra,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(D(ra,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oa extends ia{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:P(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(N(void 0===t||"string"==typeof t,58123),wt.fromBase64String(t||"")):(N(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),wt.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){const t=void 0===e.code?O.UNKNOWN:Jr(e.code);return new F(t,e.message||"")}(a);n=new ci(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=_i(e,r.document.name),o=xi(r.document.updateTime),a=r.document.createTime?xi(r.document.createTime):ve.min(),s=new on({mapValue:{fields:r.document.fields}}),l=sn.newFoundDocument(i,o,a,s),c=r.targetIds||[],u=r.removedTargetIds||[];n=new si(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=_i(e,r.document),o=r.readTime?xi(r.readTime):ve.min(),a=sn.newNoDocument(i,o),s=r.removedTargetIds||[];n=new si([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=_i(e,r.document),o=r.removedTargetIds||[];n=new si([],o,i,null)}else{if(!("filter"in t))return P(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Yr(r,i),a=e.targetId;n=new li(a,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ve.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ve.min():t.readTime?xi(t.readTime):ve.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Ri(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Nn(r)?{documents:Ni(e,r)}:{query:ji(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=wi(e,t.resumeToken);const r=vi(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ve.min())>0){n.readTime=bi(e,t.snapshotVersion.toTimestamp());const r=vi(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return P(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Ri(this.serializer),t.removeTarget=e,this.q_(t)}}class aa extends ia{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return N(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,N(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){N(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(N(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?xi(e.updateTime):xi(t);return n.isEqual(ve.min())&&(n=xi(t)),new Dr(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=xi(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Ri(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Mi(this.serializer,e))};this.q_(t)}}class sa{}class la extends sa{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new F(O.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,a]=i;return this.connection.Go(e,Ei(t,n),r,o,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new F(O.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(o=>{let[a,s]=o;return this.connection.Ho(e,Ei(t,n),r,a,s,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new F(O.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ca{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(A(t),this.aa=!1):D("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const ua="RemoteStore";class da{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{wa(this)&&(D(ua,"Restarting streams for network reachability change."),await async function(e){const t=j(e);t.Ea.add(4),await pa(t),t.Ra.set("Unknown"),t.Ea.delete(4),await ha(t)}(this))})}),this.Ra=new ca(n,r)}}async function ha(e){if(wa(e))for(const t of e.da)await t(!0)}async function pa(e){for(const t of e.da)await t(!1)}function fa(e,t){const n=j(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),ba(n)?va(n):Wa(n).O_()&&ga(n,t))}function ma(e,t){const n=j(e),r=Wa(n);n.Ia.delete(t),r.O_()&&ya(n,t),0===n.Ia.size&&(r.O_()?r.L_():wa(n)&&n.Ra.set("Unknown"))}function ga(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ve.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Wa(e).Y_(t)}function ya(e,t){e.Va.Ue(t),Wa(e).Z_(t)}function va(e){e.Va=new di({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Wa(e).start(),e.Ra.ua()}function ba(e){return wa(e)&&!Wa(e).x_()&&e.Ia.size>0}function wa(e){return 0===j(e).Ea.size}function ka(e){e.Va=void 0}async function xa(e){e.Ra.set("Online")}async function Sa(e){e.Ia.forEach((t,n)=>{ga(e,t)})}async function Ea(e,t){ka(e),ba(e)?(e.Ra.ha(t),va(e)):e.Ra.set("Unknown")}async function Ta(e,t,n){if(e.Ra.set("Online"),t instanceof ci&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){D(ua,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Ca(e,n)}else if(t instanceof si?e.Va.Ze(t):t instanceof li?e.Va.st(t):e.Va.tt(t),!n.isEqual(ve.min()))try{const t=await No(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(wt.EMPTY_BYTE_STRING,r.snapshotVersion)),ya(e,t);const i=new Ki(r.target,t,n,r.sequenceNumber);ga(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){D(ua,"Failed to raise snapshot:",t),await Ca(e,t)}}async function Ca(e,t,n){if(!Re(t))throw t;e.Ea.add(1),await pa(e),e.Ra.set("Offline"),n||(n=()=>No(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{D(ua,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await ha(e)})}function _a(e,t){return t().catch(n=>Ca(e,n,t))}async function Da(e){const t=j(e),n=Ba(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Pe;for(;Aa(t);)try{const e=await Oo(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Ra(t,e)}catch(e){await Ca(t,e)}Ia(t)&&Pa(t)}function Aa(e){return wa(e)&&e.Ta.length<10}function Ra(e,t){e.Ta.push(t);const n=Ba(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Ia(e){return wa(e)&&!Ba(e).x_()&&e.Ta.length>0}function Pa(e){Ba(e).start()}async function Ma(e){Ba(e).ra()}async function Na(e){const t=Ba(e);for(const n of e.Ta)t.ea(n.mutations)}async function ja(e,t,n){const r=e.Ta.shift(),i=Vr.from(r,t,n);await _a(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Da(e)}async function Oa(e,t){t&&Ba(e).X_&&await async function(e,t){if(function(e){return Xr(e)&&e!==O.ABORTED}(t.code)){const n=e.Ta.shift();Ba(e).B_(),await _a(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Da(e)}}(e,t),Ia(e)&&Pa(e)}async function Fa(e,t){const n=j(e);n.asyncQueue.verifyOperationInProgress(),D(ua,"RemoteStore received new credentials");const r=wa(n);n.Ea.add(3),await pa(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await ha(n)}async function La(e,t){const n=j(e);t?(n.Ea.delete(2),await ha(n)):t||(n.Ea.add(2),await pa(n),n.Ra.set("Unknown"))}function Wa(e){return e.ma||(e.ma=function(e,t,n){const r=j(e);return r.sa(),new oa(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:xa.bind(null,e),t_:Sa.bind(null,e),r_:Ea.bind(null,e),H_:Ta.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),ba(e)?va(e):e.Ra.set("Unknown")):(await e.ma.stop(),ka(e))})),e.ma}function Ba(e){return e.fa||(e.fa=function(e,t,n){const r=j(e);return r.sa(),new aa(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Ma.bind(null,e),r_:Oa.bind(null,e),ta:Na.bind(null,e),na:ja.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Da(e)):(await e.fa.stop(),e.Ta.length>0&&(D(ua,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Ua{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new L,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,a=new Ua(e,t,o,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new F(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function za(e,t){if(A("AsyncQueue","".concat(t,": ").concat(e)),Re(e))return new F(O.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class qa{static emptySet(e){return new qa(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ae.comparator(t.key,n.key):(e,t)=>ae.comparator(e.key,t.key),this.keyedMap=nr(),this.sortedSet=new pt(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qa))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new qa;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Ha{constructor(){this.ga=new pt(ae.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):P(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Va{constructor(e,t,n,r,i,o,a,s,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach(e=>{o.push({type:0,doc:e})}),new Va(e,t,qa.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ka{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Ya{constructor(){this.queries=Ga(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=j(e),r=n.queries;n.queries=Ga(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new F(O.ABORTED,"Firestore shutting down"))}}function Ga(){return new $n(e=>Kn(e),Vn)}async function Qa(e,t){const n=j(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.ba()&&t.Da()&&(r=2):(o=new Ka,r=t.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=za(e,"Initialization of query '".concat(Yn(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,o),o.Sa.push(t),t.va(n.onlineState),o.wa&&t.Fa(o.wa)&&Za(n)}async function Xa(e,t){const n=j(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.Sa.indexOf(t);e>=0&&(o.Sa.splice(e,1),0===o.Sa.length?i=t.Da()?0:1:!o.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ja(e,t){const n=j(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&Za(n)}function $a(e,t,n){const r=j(e),i=r.queries.get(t);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(t)}function Za(e){e.Ca.forEach(e=>{e.next()})}var es,ts;(ts=es||(es={})).Ma="default",ts.Cache="cache";class ns{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Va(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Va.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==es.Cache}}class rs{constructor(e){this.key=e}}class is{constructor(e){this.key=e}}class os{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=cr(),this.mutatedKeys=cr(),this.eu=Xn(e),this.tu=new qa(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Ha,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Gn(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),p=!0):this.su(c,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.eu(u,s)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(s||l)&&(a=!0)),p&&(u?(o=o.add(u),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:o,iu:n,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return P(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],s=0===this.Xa.size&&this.current&&!r?1:0,l=s!==this.Za;return this.Za=s,0!==o.length||l?{snapshot:new Va(this.query,e.tu,i,o,e.mutatedKeys,0===s,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ha,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=cr(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new is(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new rs(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=cr();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Va.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const as="SyncEngine";class ss{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ls{constructor(e){this.key=e,this.hu=!1}}class cs{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new $n(e=>Kn(e),Vn),this.Iu=new Map,this.Eu=new Set,this.du=new pt(ae.comparator),this.Au=new Map,this.Ru=new go,this.Vu={},this.mu=new Map,this.fu=to.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function us(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Is(e);let i;const o=r.Tu.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await hs(r,t,n,!0),i}async function ds(e,t){const n=Is(e);await hs(n,t,!0,!1)}async function hs(e,t,n,r){const i=await Fo(e.localStore,Un(t)),o=i.targetId,a=e.sharedClientState.addLocalQueryTarget(o,n);let s;return r&&(s=await ps(e,t,o,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&fa(e.remoteStore,i),s}async function ps(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Wo(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const o=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o,a);return Ts(e,t.targetId,s.au),s.snapshot}(e,t,n,r);const o=await Wo(e.localStore,t,!0),a=new os(t,o.Qs),s=a.ru(o.documents),l=ai.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(s,e.isPrimaryClient,l);Ts(e,n,c.au);const u=new ss(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function fs(e,t,n){const r=j(e),i=r.Tu.get(t),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(e=>!Vn(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Lo(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ma(r.remoteStore,i.targetId),Ss(r,i.targetId)}).catch(_e)):(Ss(r,i.targetId),await Lo(r.localStore,i.targetId,!0))}async function ms(e,t){const n=j(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ma(n.remoteStore,r.targetId))}async function gs(e,t){const n=j(e);try{const e=await function(e,t){const n=j(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach((o,s)=>{const l=i.get(s);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,o.removedDocuments,s).next(()=>n.Pi.addMatchingKeys(e,o.addedDocuments,s)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(wt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Ro||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,o)&&a.push(n.Pi.updateTargetData(e,c))});let s=er(),l=cr();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(jo(e,o,t.documentUpdates).next(e=>{s=e.ks,l=e.qs})),!r.isEqual(ve.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return De.waitFor(a).next(()=>o.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,s,l)).next(()=>s)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(N(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?N(r.hu,14607):e.removedDocuments.size>0&&(N(r.hu,42227),r.hu=!1))}),await Ds(n,e,t)}catch(e){await _e(e)}}function ys(e,t,n){const r=j(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=j(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&Za(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function vs(e,t,n){const r=j(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),o=i&&i.key;if(o){let e=new pt(ae.comparator);e=e.insert(o,sn.newNoDocument(o,ve.min()));const n=cr().add(o),i=new oi(ve.min(),new Map,new pt(Q),e,n);await gs(r,i),r.du=r.du.remove(o),r.Au.delete(t),_s(r)}else await Lo(r.localStore,t,!1).then(()=>Ss(r,t,n)).catch(_e)}async function bs(e,t){const n=j(e),r=t.batch.batchId;try{const e=await function(e,t){const n=j(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let a=De.resolve();return o.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const o=n.docVersions.get(e);N(null!==o,48541),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=cr();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);xs(n,r,null),ks(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ds(n,e)}catch(e){await _e(e)}}async function ws(e,t,n){const r=j(e);try{const e=await function(e,t){const n=j(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(N(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);xs(r,t,n),ks(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ds(r,e)}catch(n){await _e(n)}}function ks(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function xs(e,t,n){const r=j(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Ss(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Es(e,t)})}function Es(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(ma(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),_s(e))}function Ts(e,t,n){for(const r of n)r instanceof rs?(e.Ru.addReference(r.key,t),Cs(e,r)):r instanceof is?(D(as,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Es(e,r.key)):P(19791,{wu:r})}function Cs(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(D(as,"New document in limbo: "+n),e.Eu.add(r),_s(e))}function _s(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ae(re.fromString(t)),r=e.fu.next();e.Au.set(r,new ls(n)),e.du=e.du.insert(n,r),fa(e.remoteStore,new Ki(Un(Fn(n.path)),r,"TargetPurposeLimboResolution",Ie.ce))}}async function Ds(e,t,n){const r=j(e),i=[],o=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,s)=>{a.push(r.pu(s,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(s.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(s.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Co.As(s.targetId,e);o.push(t)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(e,t){const n=j(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>De.forEach(t,t=>De.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>De.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Re(e))throw e;D(Ao,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,o))}async function As(e,t){const n=j(e);if(!n.currentUser.isEqual(t)){D(as,"User change. New user:",t.toKey());const e=await Mo(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new F(O.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Ds(n,e.Ls)}}function Rs(e,t){const n=j(e),r=n.Au.get(t);if(r&&r.hu)return cr().add(r.key);{let e=cr();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Is(e){const t=j(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gs.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rs.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=vs.bind(null,t),t.Pu.H_=Ja.bind(null,t.eventManager),t.Pu.yu=$a.bind(null,t.eventManager),t}function Ps(e){const t=j(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=bs.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ws.bind(null,t),t}class Ms{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ta(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Po(this.persistence,new Do,e.initialUser,this.serializer)}Cu(e){return new xo(Eo.mi,this.serializer)}Du(e){return new zo}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ms.provider={build:()=>new Ms};class Ns extends Ms{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){N(this.persistence.referenceDelegate instanceof To,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new ao(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?eo.withCacheSize(this.cacheSizeBytes):eo.DEFAULT;return new xo(e=>To.mi(e,t),this.serializer)}}class js{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ys(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=As.bind(null,this.syncEngine),await La(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ya}createDatastore(e){const t=ta(e.databaseInfo.databaseId),n=function(e){return new Zo(e)}(e.databaseInfo);return function(e,t,n,r){return new la(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new da(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>ys(this.syncEngine,e,0),Vo.v()?new Vo:new qo)}createSyncEngine(e,t){return function(e,t,n,r,i,o,a){const s=new cs(e,t,n,r,i,o);return a&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=j(e);D(ua,"RemoteStore shutting down."),t.Ea.add(5),await pa(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}js.provider={build:()=>new js};class Os{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):A("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Fs="FirestoreClient";class Ls{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=E.UNAUTHENTICATED,this.clientId=G.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{D(Fs,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(D(Fs,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new L;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=za(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ws(e,t){e.asyncQueue.verifyOperationInProgress(),D(Fs,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Mo(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Bs(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Us(e);D(Fs,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Fa(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Fa(t.remoteStore,n)),e._onlineComponents=t}async function Us(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){D(Fs,"Using user provided OfflineComponentProvider");try{await Ws(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===O.FAILED_PRECONDITION||e.code===O.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;R("Error using user provided cache. Falling back to memory cache: "+n),await Ws(e,new Ms)}}else D(Fs,"Using default OfflineComponentProvider"),await Ws(e,new Ns(void 0));return e._offlineComponents}async function zs(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(D(Fs,"Using user provided OnlineComponentProvider"),await Bs(e,e._uninitializedComponentsProvider._online)):(D(Fs,"Using default OnlineComponentProvider"),await Bs(e,new js))),e._onlineComponents}function qs(e){return zs(e).then(e=>e.syncEngine)}async function Hs(e){const t=await zs(e),n=t.eventManager;return n.onListen=us.bind(null,t.syncEngine),n.onUnlisten=fs.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ds.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ms.bind(null,t.syncEngine),n}function Vs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new L;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new Os({next:s=>{o.Nu(),t.enqueueAndForget(()=>Xa(e,a));const l=s.docs.has(n);!l&&s.fromCache?i.reject(new F(O.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&s.fromCache&&r&&"server"===r.source?i.reject(new F(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),a=new ns(Fn(n.path),o,{includeMetadataChanges:!0,qa:!0});return Qa(e,a)}(await Hs(e),e.asyncQueue,t,n,r)),r.promise}function Ks(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new L;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new Os({next:n=>{o.Nu(),t.enqueueAndForget(()=>Xa(e,a)),n.fromCache&&"server"===r.source?i.reject(new F(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new ns(n,o,{includeMetadataChanges:!0,qa:!0});return Qa(e,a)}(await Hs(e),e.asyncQueue,t,n,r)),r.promise}function Ys(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Gs=new Map,Qs="firestore.googleapis.com",Xs=!0;class Js{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new F(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qs,this.ssl=Xs}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Xs;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Zi;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<ro)throw new F(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new F(O.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ys(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new F(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new F(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new F(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $s{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Js({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new F(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Js(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new B;switch(e.type){case"firstParty":return new H(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new F(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Gs.get(e);t&&(D("ComponentProvider","Removing Datastore"),Gs.delete(e),t.terminate())}(this),Promise.resolve()}}class Zs{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Zs(this.firestore,e,this._query)}}class el{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new el(this.firestore,e,this._key)}toJSON(){return{type:el._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(fe(t,el._jsonSchema))return new el(e,n||null,new ae(re.fromString(t.referencePath)))}}el._jsonSchemaVersion="firestore/documentReference/1.0",el._jsonSchema={type:pe("string",el._jsonSchemaVersion),referencePath:pe("string")};class tl extends Zs{constructor(e,t,n){super(e,t,Fn(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new el(this.firestore,null,new ae(e))}withConverter(e){return new tl(this.firestore,e,this._path)}}function nl(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,c.Ku)(e),se("collection","path",t),e instanceof $s){const n=re.fromString(t,...r);return ce(n),new tl(e,null,n)}{if(!(e instanceof el||e instanceof tl))throw new F(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(re.fromString(t,...r));return ce(n),new tl(e.firestore,null,n)}}function rl(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,c.Ku)(e),1===arguments.length&&(t=G.newId()),se("doc","path",t),e instanceof $s){const n=re.fromString(t,...r);return le(n),new el(e,null,new ae(n))}{if(!(e instanceof el||e instanceof tl))throw new F(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(re.fromString(t,...r));return le(n),new el(e.firestore,e instanceof tl?e.converter:null,new ae(n))}}const il="AsyncQueue";class ol{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new na(this,"async_queue_retry"),this._c=()=>{const e=ea();e&&D(il,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=ea();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ea();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new L;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Re(e))throw e;D(il,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,A("INTERNAL UNHANDLED ERROR: ",al(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Ua.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&P(47125,{Pc:al(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function al(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function sl(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class ll extends $s{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new ol,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ol(e),this._firestoreClient=void 0,await e}}}function cl(e,t){const n="object"==typeof e?e:(0,a.Sx)(),r="string"==typeof e?e:t||Mt,i=(0,a.j6)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(0,c.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=he(e,$s);const i=(0,c.zJ)(t),a=e._getSettings(),s=(0,o.A)((0,o.A)({},a),{},{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);i&&((0,c.gE)("https://".concat(l)),(0,c.P1)("Firestore",!0)),a.host!==Qs&&a.host!==l&&R("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=(0,o.A)((0,o.A)({},a),{},{host:l,ssl:i,emulatorOptions:r});if(!(0,c.bD)(u,s)&&(e._setSettings(u),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=E.MOCK_USER;else{var d;t=(0,c.Fy)(r.mockUserToken,null===(d=e._app)||void 0===d?void 0:d.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new F(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new E(i)}e._authCredentials=new U(new W(t,n))}}(i,...e)}return i}function ul(e){if(e._terminated)throw new F(O.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||dl(e),e._firestoreClient}function dl(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new Pt(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ys(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Ls(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class hl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hl(wt.fromBase64String(e))}catch(e){throw new F(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new hl(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:hl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fe(e,hl._jsonSchema))return hl.fromBase64String(e.bytes)}}hl._jsonSchemaVersion="firestore/bytes/1.0",hl._jsonSchema={type:pe("string",hl._jsonSchemaVersion),bytes:pe("string")};class pl{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new F(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oe(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fl{constructor(e){this._methodName=e}}class ml{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new F(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new F(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Q(this._lat,e._lat)||Q(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ml._jsonSchemaVersion}}static fromJSON(e){if(fe(e,ml._jsonSchema))return new ml(e.latitude,e.longitude)}}ml._jsonSchemaVersion="firestore/geoPoint/1.0",ml._jsonSchema={type:pe("string",ml._jsonSchemaVersion),latitude:pe("number"),longitude:pe("number")};class gl{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fe(e,gl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new gl(e.vectorValues);throw new F(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gl._jsonSchemaVersion="firestore/vectorValue/1.0",gl._jsonSchema={type:pe("string",gl._jsonSchemaVersion),vectorValues:pe("object")};const yl=/^__.*__$/;class vl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fr(e,this.data,t,this.fieldTransforms)}}class bl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw P(40011,{Ac:e})}}class kl{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new kl((0,o.A)((0,o.A)({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Wl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(wl(this.Ac)&&yl.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class xl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ta(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new kl({Ac:e,methodName:t,Dc:n,path:oe.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sl(e){const t=e._freezeSettings(),n=ta(e._databaseId);return new xl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function El(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(o.merge||o.mergeFields?2:0,t,n,i);jl("Data must be an object, but it was:",a,r);const s=Ml(r,a);let l,c;if(o.merge)l=new vt(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Ol(t,r,n);if(!a.contains(i))throw new F(O.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Bl(e,i)||e.push(i)}l=new vt(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new vl(new on(s),l,c)}class Tl extends fl{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tl}}function Cl(e,t,n){return new kl({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class _l extends fl{_toFieldTransform(e){return new _r(e.path,new br)}isEqual(e){return e instanceof _l}}class Dl extends fl{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Cl(this,e,!0),n=this.vc.map(e=>Pl(e,t)),r=new wr(n);return new _r(e.path,r)}isEqual(e){return e instanceof Dl&&(0,c.bD)(this.vc,e.vc)}}function Al(e,t,n,r){const i=e.Cc(1,t,n);jl("Data must be an object, but it was:",i,r);const o=[],a=on.empty();dt(r,(e,r)=>{const s=Ll(t,e,n);r=(0,c.Ku)(r);const l=i.yc(s);if(r instanceof Tl)o.push(s);else{const e=Pl(r,l);null!=e&&(o.push(s),a.set(s,e))}});const s=new vt(o);return new bl(a,s,i.fieldTransforms)}function Rl(e,t,n,r,i,o){const a=e.Cc(1,t,n),s=[Ol(t,r,n)],l=[i];if(o.length%2!=0)throw new F(O.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let c=0;c<o.length;c+=2)s.push(Ol(t,o[c])),l.push(o[c+1]);const u=[],d=on.empty();for(let p=s.length-1;p>=0;--p)if(!Bl(u,s[p])){const e=s[p];let t=l[p];t=(0,c.Ku)(t);const n=a.yc(e);if(t instanceof Tl)u.push(e);else{const r=Pl(t,n);null!=r&&(u.push(e),d.set(e,r))}}const h=new vt(u);return new bl(d,h,a.fieldTransforms)}function Il(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Pl(n,e.Cc(r?4:3,t))}function Pl(e,t){if(Nl(e=(0,c.Ku)(e)))return jl("Unsupported field value:",t,e),Ml(e,t);if(e instanceof fl)return function(e,t){if(!wl(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Pl(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,c.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return fr(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ye.fromDate(e);return{timestampValue:bi(t.serializer,n)}}if(e instanceof ye){const n=new ye(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:bi(t.serializer,n)}}if(e instanceof ml)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof hl)return{bytesValue:wi(t.serializer,e._byteString)};if(e instanceof el){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Si(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof gl)return function(e,t){return{mapValue:{fields:{[jt]:{stringValue:Lt},[Wt]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return hr(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(de(e)))}(e,t)}function Ml(e,t){const n={};return ht(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):dt(e,(e,r)=>{const i=Pl(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Nl(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ye||e instanceof ml||e instanceof hl||e instanceof el||e instanceof fl||e instanceof gl)}function jl(e,t,n){if(!Nl(n)||!ue(n)){const r=de(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Ol(e,t,n){if((t=(0,c.Ku)(t))instanceof pl)return t._internalPath;if("string"==typeof t)return Ll(e,t);throw Wl("Field path arguments must be of type string or ",e,!1,void 0,n)}const Fl=new RegExp("[~\\*/\\[\\]]");function Ll(e,t,n){if(t.search(Fl)>=0)throw Wl("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new pl(...t.split("."))._internalPath}catch(Ge){throw Wl("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Wl(e,t,n,r,i){const o=r&&!r.isEmpty(),a=void 0!==i;let s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new F(O.INVALID_ARGUMENT,s+e+l)}function Bl(e,t){return e.some(e=>e.isEqual(t))}class Ul{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new el(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new zl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ql("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class zl extends Ul{data(){return super.data()}}function ql(e,t){return"string"==typeof t?Ll(e,t):t instanceof pl?t._internalPath:t._delegate._internalPath}function Hl(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new F(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vl{}class Kl extends Vl{}function Yl(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof Vl&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Xl).length,n=e.filter(e=>e instanceof Gl).length;if(t>1||t>0&&n>0)throw new F(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Gl extends Kl{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Gl(e,t,n)}_apply(e){const t=this._parse(e);return Zl(e._query,t),new Zs(e.firestore,e.converter,qn(e._query,t))}_parse(e){const t=Sl(e.firestore),n=function(e,t,n,r,i,o,a){let s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new F(O.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){$l(a,o);const t=[];for(const n of a)t.push(Jl(r,e,n));s={arrayValue:{values:t}}}else s=Jl(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||$l(a,o),s=Il(n,t,a,"in"===o||"not-in"===o);return fn.create(i,o,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Ql(e,t,n){const r=t,i=ql("where",e);return Gl._create(i,r,n)}class Xl extends Vl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Xl(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:mn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Zl(n,i),n=qn(n,i)}(e._query,t),new Zs(e.firestore,e.converter,qn(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Jl(e,t,n){if("string"==typeof(n=(0,c.Ku)(n))){if(""===n)throw new F(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wn(t)&&-1!==n.indexOf("/"))throw new F(O.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(re.fromString(n));if(!ae.isDocumentKey(r))throw new F(O.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Qt(e,new ae(r))}if(n instanceof el)return Qt(e,n._key);throw new F(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(de(n),"."))}function $l(e,t){if(!Array.isArray(e)||0===e.length)throw new F(O.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Zl(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new F(O.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new F(O.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class ec{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Bt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Et(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw P(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return dt(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Wt].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>St(e.doubleValue));return new gl(n)}convertGeoPoint(e){return new ml(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Rt(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(It(e));default:return null}}convertTimestamp(e){const t=xt(e);return new ye(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=re.fromString(e);N(Vi(n),9688,{name:e});const r=new Nt(n.get(1),n.get(3)),i=new ae(n.popFirst(5));return r.isEqual(t)||A("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function tc(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class nc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rc extends Ul{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(ql("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=rc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}rc._jsonSchemaVersion="firestore/documentSnapshot/1.0",rc._jsonSchema={type:pe("string",rc._jsonSchemaVersion),bundleSource:pe("string","DocumentSnapshot"),bundleName:pe("string"),bundle:pe("string")};class ic extends rc{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class oc{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new nc(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new ic(this._firestore,this._userDataWriter,n.key,n,new nc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new F(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new ic(e._firestore,e._userDataWriter,n.doc.key,n.doc,new nc(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new ic(e._firestore,e._userDataWriter,t.doc.key,t.doc,new nc(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:ac(t.type),doc:r,oldIndex:i,newIndex:o}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=oc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=G.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ac(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return P(61501,{type:e})}}function sc(e){e=he(e,el);const t=he(e.firestore,ll);return Vs(ul(t),e._key).then(n=>fc(t,e,n))}oc._jsonSchemaVersion="firestore/querySnapshot/1.0",oc._jsonSchema={type:pe("string",oc._jsonSchemaVersion),bundleSource:pe("string","QuerySnapshot"),bundleName:pe("string"),bundle:pe("string")};class lc extends ec{constructor(e){super(),this.firestore=e}convertBytes(e){return new hl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new el(this.firestore,null,t)}}function cc(e){e=he(e,Zs);const t=he(e.firestore,ll),n=ul(t),r=new lc(t);return Hl(e._query),Ks(n,e._query).then(n=>new oc(t,r,e,n))}function uc(e,t,n){e=he(e,el);const r=he(e.firestore,ll),i=tc(e.converter,t,n);return pc(r,[El(Sl(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ar.none())])}function dc(e,t,n){e=he(e,el);const r=he(e.firestore,ll),i=Sl(r);let o;for(var a=arguments.length,s=new Array(a>3?a-3:0),l=3;l<a;l++)s[l-3]=arguments[l];return o="string"==typeof(t=(0,c.Ku)(t))||t instanceof pl?Rl(i,"updateDoc",e._key,t,n,s):Al(i,"updateDoc",e._key,t),pc(r,[o.toMutation(e._key,Ar.exists(!0))])}function hc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=(0,c.Ku)(e);let i={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof n[o]||sl(n[o])||(i=n[o++]);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(sl(n[o])){var s,l,u;const e=n[o];n[o]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[o+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[o+2]=null===(u=e.complete)||void 0===u?void 0:u.bind(e)}let d,h,p;if(e instanceof el)h=he(e.firestore,ll),p=Fn(e._key.path),d={next:t=>{n[o]&&n[o](fc(h,e,t))},error:n[o+1],complete:n[o+2]};else{const t=he(e,Zs);h=he(t.firestore,ll),p=t._query;const r=new lc(h);d={next:e=>{n[o]&&n[o](new oc(h,r,t,e))},error:n[o+1],complete:n[o+2]},Hl(e._query)}return function(e,t,n,r){const i=new Os(r),o=new ns(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>Qa(await Hs(e),o)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>Xa(await Hs(e),o))}}(ul(h),p,a,d)}function pc(e,t){return function(e,t){const n=new L;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Ps(e);try{const e=await function(e,t){const n=j(e),r=ye.now(),i=t.reduce((e,t)=>e.add(t.key),cr());let o,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let s=er(),l=cr();return n.Ns.getEntries(e,i).next(e=>{s=e,s.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,s)).next(i=>{o=i;const a=[];for(const e of t){const t=jr(e,o.get(e.key).overlayedDocument);null!=t&&a.push(new Lr(e.key,t,an(t.value.mapValue),Ar.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:rr(o)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new pt(Q)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Ds(r,e.changes),await Da(r.remoteStore)}catch(e){const t=za(e,"Failed to persist write");n.reject(t)}}(await qs(e),t,n)),n.promise}(ul(e),t)}function fc(e,t,n){const r=n.docs.get(t._key),i=new lc(e);return new rc(e,i,t._key,r,new nc(n.hasPendingWrites,n.fromCache),t.converter)}function mc(){return new Tl("deleteField")}function gc(){return new _l("serverTimestamp")}function yc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Dl("arrayUnion",t)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){T=e}(a.MF),(0,a.om)(new s.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const a=e.getProvider("app").getImmediate(),s=new ll(new z(e.getProvider("auth-internal")),new K(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new F(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nt(e.options.projectId,t)}(a,r),a);return i=(0,o.A)({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),(0,a.KO)(x,S,e),(0,a.KO)(x,S,"esm2020")}()},672:(e,t,n)=>{var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var a={d:{f:o,r:function(){throw Error(i(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},s=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,o="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:o}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:o,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},705:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function o(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{A:()=>o})},776:(e,t,n)=>{n.d(t,{cY:()=>m,FA:()=>j,g:()=>N,dM:()=>M,u:()=>l,Uj:()=>s,p9:()=>X,Fy:()=>v,tD:()=>q,bD:()=>L,hp:()=>z,T9:()=>p,Tj:()=>d,yU:()=>h,XA:()=>f,mS:()=>c,Ku:()=>J,ZQ:()=>x,sr:()=>C,zJ:()=>g,c1:()=>T,Im:()=>F,lT:()=>D,zW:()=>I,jZ:()=>S,lV:()=>_,nr:()=>A,Ov:()=>R,gE:()=>y,Am:()=>B,I9:()=>U,P1:()=>k,eX:()=>P});var r=n(379);const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,a=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;s||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==l)throw new a;const c=t<<2|o>>4;if(r.push(c),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==l){const e=s<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s=function(e){return function(e){const t=i(e);return o.encodeByteArray(t,!0)}(e).replace(/\./g,"")},l=function(e){try{return o.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const u=()=>{try{return c().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&l(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},d=e=>{var t;return null===(t=u())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},h=e=>{const t=d(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},p=()=>{var e;return null===(e=u())||void 0===e?void 0:e.config},f=e=>{var t;return null===(t=u())||void 0===t?void 0:t["_".concat(e)]};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function g(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function y(e){return(await fetch(e,{credentials:"include"})).ok}function v(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=(0,r.A)({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[s(JSON.stringify({alg:"none",type:"JWT"})),s(JSON.stringify(a)),""].join(".")}const b={};let w=!1;function k(e,t){if("undefined"===typeof window||"undefined"===typeof document||!g(window.location.host)||b[e]===t||b[e]||w)return;function n(e){return"__firebase__banner__".concat(e)}b[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(b))b[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function o(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{w=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),s=n("learnmore"),l=document.getElementById(s)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,s);const n=o();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function x(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function S(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(x())}function E(){var e;const t=null===(e=u())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function T(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function C(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function _(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function D(){const e=x();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function A(){return!E()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R(){return!E()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function I(){try{return"object"===typeof indexedDB}catch(e){return!1}}function P(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function M(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class N extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,N.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,j.prototype.create)}}class j{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(O,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new N(n,o,t)}}const O=/\{\$([^}]+)}/g;function F(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function L(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(W(n)&&W(o)){if(!L(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function W(e){return null!==e&&"object"===typeof e}function B(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function U(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function z(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function q(e,t){const n=new H(e,t);return n.subscribe.bind(n)}class H{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V(){}const K=1e3,Y=2,G=144e5,Q=.5;function X(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:K)*Math.pow(t,e),r=Math.round(Q*n*(Math.random()-.5)*2);return Math.min(G,n+r)}function J(e){return e&&e._delegate?e._delegate:e}},799:(e,t,n)=>{n.d(t,{P2:()=>y});var r=n(379);const i=(e,t)=>t.some(t=>e instanceof t);let o,a;const s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap;let h={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return l.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return m(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(g(this),n),m(s.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m(e.apply(g(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(g(this),t,...r);return c.set(o,t.sort?t.sort():[t]),m(o)}}function f(e){return"function"===typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(l.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});l.set(e,t)}(e),i(e,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,h):e)}function m(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(m(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&s.set(t,e)}).catch(()=>{}),d.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=f(e);return t!==e&&(u.set(e,t),d.set(t,e)),t}const g=e=>d.get(e);function y(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=m(a);return r&&a.addEventListener("upgradeneeded",e=>{r(m(a.result),e.oldVersion,e.newVersion,m(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}const v=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],w=new Map;function k(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!v.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),i&&t.done]))[0]};return w.set(t,o),o}h=(e=>(0,r.A)((0,r.A)({},e),{},{get:(t,n,r)=>k(t,n)||e.get(t,n,r),has:(t,n)=>!!k(t,n)||e.has(t,n)}))(h)},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,k(e),!m)if(null!==r(c))m=!0,E||(E=!0,S());else{var t=r(u);null!==t&&P(x,t.startTime-e)}}var S,E=!1,T=-1,C=5,_=-1;function D(){return!!y||!(t.unstable_now()-_<C)}function A(){if(y=!1,E){var e=t.unstable_now();_=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(T),T=-1),f=!0;var o=p;try{t:{for(k(e),h=r(c);null!==h&&!(h.expirationTime>e&&D());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var s=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){h.callback=s,k(e),n=!0;break t}h===r(c)&&i(c),k(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&P(x,l.startTime-e),n=!1}}break e}finally{h=null,p=o,f=!1}n=void 0}}finally{n?S():E=!1}}}if("function"===typeof w)S=function(){w(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,I=R.port2;R.port1.onmessage=A,S=function(){I.postMessage(null)}}else S=function(){v(A,0)};function P(e,n){T=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(b(T),T=-1):g=!0,P(x,o-a))):(e.sortIndex=s,n(c,e),m||f||(m=!0,E||(E=!0,S()))),e},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},965:(e,t,n)=>{n.d(t,{$b:()=>i,Vy:()=>c});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const o={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},a=i.INFO,s={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=s[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?o[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}},986:(e,t,n)=>{function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,{A:()=>r})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r](o,o.exports,n),o.loaded=!0,o.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".6069e135.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="run-plus-plans:";n.l=(r,i,o,a)=>{if(e[r])e[r].push(i);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach(e=>e(n)),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,o,a=r[0],s=r[1],l=r[2],c=0;if(a.some(t=>0!==e[t])){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)o=a[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkrun_plus_plans=self.webpackChunkrun_plus_plans||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r,i=n(43),o=n.t(i,2),a=n(391),s=n(379);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const c="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,t,n,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:a=!1}=i,s=o.history,d=r.Pop,m=null,g=y();function y(){return(s.state||{idx:null}).idx}function v(){d=r.Pop;let e=y(),t=null==e?null:e-g;g=e,m&&m({action:d,location:w.location,delta:t})}function b(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,s.replaceState(l({},s.state,{idx:g}),""));let w={get action(){return d},get location(){return e(o,s)},listen(e){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(c,v),m=e,()=>{o.removeEventListener(c,v),m=null}},createHref:e=>t(o,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){d=r.Push;let i=p(w.location,e,t);n&&n(i,e),g=y()+1;let l=h(i,g),c=w.createHref(i);try{s.pushState(l,"",c)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;o.location.assign(c)}a&&m&&m({action:d,location:w.location,delta:1})},replace:function(e,t){d=r.Replace;let i=p(w.location,e,t);n&&n(i,e),g=y();let o=h(i,g),l=w.createHref(i);s.replaceState(o,"",l),a&&m&&m({action:d,location:w.location,delta:0})},go:e=>s.go(e)};return w}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){return void 0===n&&(n="/"),b(e,t,n,!1)}function b(e,t,n,r){let i=M(("string"===typeof t?m(t):t).pathname||"/",n);if(null==i)return null;let o=w(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let a=null;for(let s=0;null==a&&s<o.length;++s){let e=P(i);a=R(o[s],e,r)}return a}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(u(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=L([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),w(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:A(s,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of k(e.path))i(e,t,r);else i(e,t)}),t}function k(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=k(r.join("/")),s=[];return s.push(...a.map(e=>""===e?o:[o,e].join("/"))),i&&s.push(...a),s.map(t=>e.startsWith("/")&&""===t?"/":t)}const x=/^:[\w-]+$/,S=3,E=2,T=1,C=10,_=-2,D=e=>"*"===e;function A(e,t){let n=e.split("/"),r=n.length;return n.some(D)&&(r+=_),t&&(r+=E),n.filter(e=>!D(e)).reduce((e,t)=>e+(x.test(t)?S:""===t?T:C),r)}function R(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:L([o,u.pathname]),pathnameBase:W(L([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=L([o,u.pathnameBase]))}return a}function I(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:o,pathnameBase:a,pattern:e}}function P(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function N(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function j(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function O(e,t){let n=j(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function F(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=l({},e),u(!i.pathname||!i.pathname.includes("?"),N("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),N("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),N("#","search","hash",i)));let o,a=""===e||""===i.pathname,s=a?"/":i.pathname;if(null==s)o=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:B(r),hash:U(i)}}(i,o),d=s&&"/"!==s&&s.endsWith("/"),h=(a||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!h||(c.pathname+="/"),c}const L=e=>e.join("/").replace(/\/\/+/g,"/"),W=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],H=(new Set(q),["get",...q]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)}const K=i.createContext(null);const Y=i.createContext(null);const G=i.createContext(null);const Q=i.createContext(null);const X=i.createContext({outlet:null,matches:[],isDataRoute:!1});const J=i.createContext(null);function $(){return null!=i.useContext(Q)}function Z(){return $()||u(!1),i.useContext(Q).location}function ee(e){i.useContext(G).static||i.useLayoutEffect(e)}function te(){let{isDataRoute:e}=i.useContext(X);return e?function(){let{router:e}=ue(le.UseNavigateStable),t=he(ce.UseNavigateStable),n=i.useRef(!1);return ee(()=>{n.current=!0}),i.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,V({fromRouteId:t},i)))},[e,t])}():function(){$()||u(!1);let e=i.useContext(K),{basename:t,future:n,navigator:r}=i.useContext(G),{matches:o}=i.useContext(X),{pathname:a}=Z(),s=JSON.stringify(O(o,n.v7_relativeSplatPath)),l=i.useRef(!1);ee(()=>{l.current=!0});let c=i.useCallback(function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let o=F(n,JSON.parse(s),a,"path"===i.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:L([t,o.pathname])),(i.replace?r.replace:r.push)(o,i.state,i)},[t,r,s,a,e]);return c}()}function ne(e,t,n,o){$()||u(!1);let{navigator:a}=i.useContext(G),{matches:s}=i.useContext(X),l=s[s.length-1],c=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,p=Z();if(t){var f;let e="string"===typeof t?m(t):t;"/"===d||(null==(f=e.pathname)?void 0:f.startsWith(d))||u(!1),h=e}else h=p;let g=h.pathname||"/",y=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=v(e,{pathname:y});let w=se(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:L([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:L([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,n,o);return t&&w?i.createElement(Q.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},w):w}function re(){let e=function(){var e;let t=i.useContext(J),n=de(ce.UseRouteError),r=he(ce.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:o},n):null,null)}const ie=i.createElement(re,null);class oe extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(X.Provider,{value:this.props.routeContext},i.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:n,children:r}=e,o=i.useContext(K);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(X.Provider,{value:t},r)}function se(e,t,n,r){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let s=e,l=null==(o=n)?void 0:o.errors;if(null!=l){let e=s.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||u(!1),s=s.slice(0,Math.min(s.length,e+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<s.length;i++){let e=s[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,s=d>=0?s.slice(0,d+1):[s[0]];break}}}return s.reduceRight((e,r,o)=>{let a,u=!1,h=null,p=null;var f;n&&(a=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||ie,c&&(d<0&&0===o?(f="route-fallback",!1||pe[f]||(pe[f]=!0),u=!0,p=null):d===o&&(u=!0,p=r.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,o+1)),g=()=>{let t;return t=a?h:u?p:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(ae,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===o)?i.createElement(oe,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function ue(e){let t=i.useContext(K);return t||u(!1),t}function de(e){let t=i.useContext(Y);return t||u(!1),t}function he(e){let t=function(){let e=i.useContext(X);return e||u(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const pe={};function fe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}o.startTransition;function me(e){let{to:t,replace:n,state:r,relative:o}=e;$()||u(!1);let{future:a,static:s}=i.useContext(G),{matches:l}=i.useContext(X),{pathname:c}=Z(),d=te(),h=F(t,O(l,a.v7_relativeSplatPath),c,"path"===o),p=JSON.stringify(h);return i.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:o}),[d,p,o,n,r]),null}function ge(e){u(!1)}function ye(e){let{basename:t="/",children:n=null,location:o,navigationType:a=r.Pop,navigator:s,static:l=!1,future:c}=e;$()&&u(!1);let d=t.replace(/^\/*/,"/"),h=i.useMemo(()=>({basename:d,navigator:s,static:l,future:V({v7_relativeSplatPath:!1},c)}),[d,c,s,l]);"string"===typeof o&&(o=m(o));let{pathname:p="/",search:f="",hash:g="",state:y=null,key:v="default"}=o,b=i.useMemo(()=>{let e=M(p,d);return null==e?null:{location:{pathname:e,search:f,hash:g,state:y,key:v},navigationType:a}},[d,p,f,g,y,v,a]);return null==b?null:i.createElement(G.Provider,{value:h},i.createElement(Q.Provider,{children:n,value:b}))}function ve(e){let{children:t,location:n}=e;return ne(be(t),n)}new Promise(()=>{});i.Component;function be(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,(e,r)=>{if(!i.isValidElement(e))return;let o=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,be(e.props.children,o));e.type!==ge&&u(!1),e.props.index&&e.props.children&&u(!1);let a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=be(e.props.children,o)),n.push(a)}),n}var we=n(950),ke=n.t(we,2);function xe(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(gh){}new Map;const Se=o.startTransition;ke.flushSync,o.useId;function Ee(e){let{basename:t,children:n,future:r,window:o}=e,a=i.useRef();var s;null==a.current&&(a.current=(void 0===(s={window:o,v5Compat:!0})&&(s={}),g(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return p("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:f(t)},null,s)));let l=a.current,[c,u]=i.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},h=i.useCallback(e=>{d&&Se?Se(()=>u(e)):u(e)},[u,d]);return i.useLayoutEffect(()=>l.listen(h),[l,h]),i.useEffect(()=>fe(r),[r]),i.createElement(ye,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Te,Ce;function _e(e){let t=i.useRef(xe(e)),n=i.useRef(!1),r=Z(),o=i.useMemo(()=>function(e,t){let n=xe(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(r.search,n.current?null:t.current),[r.search]),a=te(),s=i.useCallback((e,t)=>{const r=xe("function"===typeof e?e(o):e);n.current=!0,a("?"+r,t)},[a,o]);return[o,s]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Te||(Te={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ce||(Ce={}));var De=n(144),Ae=n(667),Re=n(121);function Ie(e){if(null===e||void 0===e)return null;if(Array.isArray(e))return e.map(e=>Ie(e));if("object"===typeof e){const t={};for(const[n,r]of Object.entries(e))void 0!==r&&(t[n]=Ie(r));return t}return e}const Pe=new class{async saveUserProfile(e,t){try{const n=(0,Ae.doc)(Re.db,"users",e),r=Ie(t);return await(0,Ae.setDoc)(n,{profile:(0,s.A)((0,s.A)({},r),{},{createdAt:(0,Ae.serverTimestamp)(),updatedAt:(0,Ae.serverTimestamp)()})},{merge:!0}),console.log("\u2705 User profile saved to Firestore"),{success:!0}}catch(n){return console.error("\u274c Error saving user profile:",n),{success:!1,error:n.message}}}async saveTrainingPlan(e,t){try{const n=(0,Ae.doc)(Re.db,"users",e),r=Ie(t);return console.log("\ud83e\uddf9 Cleaned training plan (removed undefined values)"),await(0,Ae.setDoc)(n,{trainingPlan:(0,s.A)((0,s.A)({},r),{},{savedAt:(0,Ae.serverTimestamp)()}),updatedAt:(0,Ae.serverTimestamp)()},{merge:!0}),console.log("\u2705 Training plan saved to Firestore"),{success:!0}}catch(n){return console.error("\u274c Error saving training plan:",n),{success:!1,error:n.message}}}async getUserData(e){try{const t=(0,Ae.doc)(Re.db,"users",e),n=await(0,Ae.getDoc)(t);return n.exists()?(console.log("\u2705 User data loaded from Firestore"),{success:!0,data:n.data()}):(console.log("\u2139\ufe0f No user data found (new user)"),{success:!0,data:null})}catch(t){return console.error("\u274c Error loading user data:",t),{success:!1,error:t.message}}}async markWorkoutComplete(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{var a;(0,Ae.doc)(Re.db,"users",e);const s=await this.getUserData(e);if(!s.success||null===(a=s.data)||void 0===a||!a.trainingPlan)throw new Error("No training plan found");const l=s.data.trainingPlan,c=l.weeks.find(e=>e.week===t);if(c){const e=c.workouts.find(e=>e.day===n);e&&(e.completed=r,e.completedAt=r?(new Date).toISOString():null,r?(null!==i&&(e.actualDistance=i),null!==o&&(e.notes=o)):(delete e.actualDistance,delete e.notes))}return await this.saveTrainingPlan(e,l),console.log("\u2705 Workout marked as ".concat(r?"complete":"incomplete").concat(i?" (".concat(i," miles)"):"")),{success:!0}}catch(s){return console.error("\u274c Error updating workout:",s),{success:!1,error:s.message}}}async saveModifiedWorkout(e,t,n,r){try{const i=(0,Ae.doc)(Re.db,"users",e);return await(0,Ae.updateDoc)(i,{["modifiedWorkouts.".concat(t,"-").concat(n)]:(0,s.A)((0,s.A)({},r),{},{modifiedAt:(0,Ae.serverTimestamp)()}),updatedAt:(0,Ae.serverTimestamp)()}),console.log("\u2705 Modified workout saved"),{success:!0}}catch(i){return console.error("\u274c Error saving modified workout:",i),{success:!1,error:i.message}}}async getModifiedWorkouts(e){try{var t;const n=await this.getUserData(e);return n.success&&null!==(t=n.data)&&void 0!==t&&t.modifiedWorkouts?{success:!0,data:n.data.modifiedWorkouts}:{success:!0,data:{}}}catch(n){return console.error("\u274c Error loading modified workouts:",n),{success:!1,error:n.message}}}async clearUserData(e){try{const t=(0,Ae.doc)(Re.db,"users",e);return await(0,Ae.setDoc)(t,{clearedAt:(0,Ae.serverTimestamp)()}),console.log("\u2705 User data cleared"),{success:!0}}catch(t){return console.error("\u274c Error clearing user data:",t),{success:!1,error:t.message}}}},Me={log:function(){0},info:function(){0},warn:function(){console.warn(...arguments)},error:function(){console.error(...arguments)}};var Ne=n(579);const je=function(){const[e,t]=(0,i.useState)(!0),[n,r]=(0,i.useState)(""),[o,a]=(0,i.useState)(""),[s,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(""),[d,h]=(0,i.useState)(!1),[p,f]=(0,i.useState)(!1);return(0,Ne.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"20px"},children:(0,Ne.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"40px",maxWidth:"400px",width:"100%",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,Ne.jsxs)("div",{style:{textAlign:"center",marginBottom:"32px"},children:[(0,Ne.jsx)("img",{src:"/logo.png",alt:"Run+ Plans",style:{maxWidth:"200px",height:"auto",marginBottom:"16px"}}),(0,Ne.jsx)("p",{style:{color:"#AAAAAA",fontSize:"0.95rem",lineHeight:"1.4"},children:"Smart training that adapts to injuries, equipment, and real life"})]}),p?(0,Ne.jsxs)("div",{style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:"8px",padding:"16px",color:"#00D4FF",textAlign:"center",marginBottom:"20px"},children:[(0,Ne.jsx)("p",{style:{margin:0},children:"\u2705 Password reset email sent! Check your inbox."}),(0,Ne.jsx)("button",{onClick:()=>f(!1),style:{background:"transparent",border:"none",color:"#00D4FF",textDecoration:"underline",cursor:"pointer",marginTop:"12px"},children:"Back to login"})]}):(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),u(""),h(!0);try{if(e)await(0,De.x9)(Re.j2,n,o),console.log("\u2705 Logged in successfully");else{const e=await(0,De.eJ)(Re.j2,n,o);s&&await(0,De.r7)(e.user,{displayName:s}),await(0,Ae.setDoc)((0,Ae.doc)(Re.db,"users",e.user.uid),{email:n,displayName:s||"",approvalStatus:"pending",createdAt:(0,Ae.serverTimestamp)(),approvedAt:null,approvedBy:null}),console.log("\u2705 Account created successfully - pending approval")}}catch(r){switch(console.error("\u274c Auth error:",r),r.code){case"auth/email-already-in-use":u("This email is already registered. Please login instead.");break;case"auth/weak-password":u("Password must be at least 8 characters with 1 uppercase, 1 lowercase, and 1 special character.");break;case"auth/invalid-email":u("Please enter a valid email address.");break;case"auth/user-not-found":case"auth/wrong-password":u("Invalid email or password.");break;case"auth/too-many-requests":u("Too many failed attempts. Please try again later.");break;default:r.message?u(r.message):u("An error occurred. Please try again.")}}finally{h(!1)}},children:[!e&&(0,Ne.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,Ne.jsx)("label",{style:{display:"block",color:"#CCCCCC",marginBottom:"8px"},children:"Name"}),(0,Ne.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),autoComplete:"name",placeholder:"Your name",style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#FFFFFF",fontSize:"1rem"}})]}),(0,Ne.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,Ne.jsx)("label",{style:{display:"block",color:"#CCCCCC",marginBottom:"8px"},children:"Email"}),(0,Ne.jsx)("input",{type:"email",value:n,onChange:e=>r(e.target.value),required:!0,autoComplete:"email",placeholder:"you@example.com",style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#FFFFFF",fontSize:"1rem"}})]}),(0,Ne.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,Ne.jsx)("label",{style:{display:"block",color:"#CCCCCC",marginBottom:"8px"},children:"Password"}),(0,Ne.jsx)("input",{type:"password",value:o,onChange:e=>a(e.target.value),required:!0,autoComplete:e?"current-password":"new-password",placeholder:e?"Enter your password":"Create a strong password",style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#FFFFFF",fontSize:"1rem"}}),!e&&(0,Ne.jsxs)("div",{style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:"6px",padding:"12px",marginTop:"8px"},children:[(0,Ne.jsx)("p",{style:{fontSize:"0.875rem",color:"#00D4FF",fontWeight:"600",marginBottom:"6px"},children:"Password Requirements:"}),(0,Ne.jsxs)("ul",{style:{fontSize:"0.8rem",color:"#CCCCCC",margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[(0,Ne.jsx)("li",{children:"At least 8 characters"}),(0,Ne.jsx)("li",{children:"1 uppercase letter (A-Z)"}),(0,Ne.jsx)("li",{children:"1 lowercase letter (a-z)"}),(0,Ne.jsx)("li",{children:"1 special character (!@#$%^&*)"})]})]})]}),c&&(0,Ne.jsx)("div",{style:{background:"rgba(229, 62, 62, 0.1)",border:"1px solid rgba(229, 62, 62, 0.3)",borderRadius:"6px",padding:"12px",color:"#FC8181",marginBottom:"16px",fontSize:"0.9rem"},children:c}),(0,Ne.jsx)("button",{type:"submit",disabled:d,style:{width:"100%",padding:"14px",background:d?"#666666":"#00D4FF",border:"none",borderRadius:"6px",color:"#000000",fontSize:"1rem",fontWeight:"bold",cursor:d?"not-allowed":"pointer",marginBottom:"16px"},children:d?"Loading...":e?"Login":"Create Account"}),e&&(0,Ne.jsx)("button",{type:"button",onClick:async()=>{if(n){u(""),h(!0);try{await(0,De.J1)(Re.j2,n),f(!0),console.log("\u2705 Password reset email sent")}catch(e){console.error("\u274c Password reset error:",e),u("Could not send reset email. Please check your email address.")}finally{h(!1)}}else u("Please enter your email address first.")},disabled:d,style:{background:"transparent",border:"none",color:"#00D4FF",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem",display:"block",margin:"0 auto 16px"},children:"Forgot password?"})]}),(0,Ne.jsx)("div",{style:{textAlign:"center",paddingTop:"16px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,Ne.jsx)("button",{onClick:()=>{t(!e),u("")},style:{background:"transparent",border:"none",color:"#AAAAAA",cursor:"pointer",fontSize:"0.9rem"},children:e?(0,Ne.jsxs)(Ne.Fragment,{children:["Don't have an account? ",(0,Ne.jsx)("span",{style:{color:"#00D4FF"},children:"Sign up"})]}):(0,Ne.jsxs)(Ne.Fragment,{children:["Already have an account? ",(0,Ne.jsx)("span",{style:{color:"#00D4FF"},children:"Login"})]})})})]})]})})};const Oe=function(){const e=te(),[t,n]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{const e=localStorage.getItem("runeq_userProfile"),t=localStorage.getItem("runeq_trainingPlan");n(!!e&&!!t)},[]),(0,Ne.jsxs)("div",{className:"fade-in",style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[(0,Ne.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:(0,Ne.jsx)("div",{className:"container",children:(0,Ne.jsxs)("div",{style:{textAlign:"center",padding:"60px 0"},children:[(0,Ne.jsx)("img",{src:"/logo.png",alt:"Run+ Plans",style:{maxWidth:"300px",height:"auto",marginBottom:"24px"}}),(0,Ne.jsxs)("p",{style:{fontSize:"1.35rem",color:"#AAAAAA",marginBottom:"32px",maxWidth:"700px",margin:"0 auto 32px",lineHeight:"1.6"},children:["Smart training that adapts to injuries, equipment, and real life.",(0,Ne.jsx)("br",{}),"Built for runners who refuse to stop, even when the plan needs to change."]}),(0,Ne.jsxs)("div",{className:"card-grid",style:{marginBottom:"40px",textAlign:"left"},children:[(0,Ne.jsxs)("div",{className:"card slide-up",style:{animationDelay:"0.1s"},children:[(0,Ne.jsx)("div",{className:"equipment-icon",children:"\ud83d\udeb4\u200d\u2642\ufe0f"}),(0,Ne.jsx)("h3",{style:{color:"#AAAAAA",marginBottom:"8px"},children:"Equipment Specific"}),(0,Ne.jsx)("p",{style:{fontSize:"0.9rem",margin:0},children:'Cyclete and ElliptiGO workouts with motion-specific training. No more generic "bike conversion" - real equipment intelligence.'})]}),(0,Ne.jsxs)("div",{className:"card slide-up",style:{animationDelay:"0.2s"},children:[(0,Ne.jsx)("div",{className:"equipment-icon",children:"\ud83c\udf21\ufe0f"}),(0,Ne.jsx)("h3",{style:{color:"#AAAAAA",marginBottom:"8px"},children:"Climate Smart"}),(0,Ne.jsx)("p",{style:{fontSize:"0.9rem",margin:0},children:"Automatic pace adjustments for heat, humidity, and altitude. No more impossible paces in tropical climates."})]}),(0,Ne.jsxs)("div",{className:"card slide-up",style:{animationDelay:"0.3s"},children:[(0,Ne.jsx)("div",{className:"equipment-icon",children:"\ud83d\udd04"}),(0,Ne.jsx)("h3",{style:{color:"#AAAAAA",marginBottom:"8px"},children:"Life Flexible"}),(0,Ne.jsx)("p",{style:{fontSize:"0.9rem",margin:0},children:"Miss a workout? Change your mind? We adapt without penalty. Real training for real life."})]})]}),(0,Ne.jsxs)("div",{className:"card",style:{marginBottom:"32px",textAlign:"left"},children:[(0,Ne.jsx)("h3",{style:{textAlign:"center",marginBottom:"20px"},children:"Why Run+ Plans vs Others?"}),(0,Ne.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"12px"},children:[(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Ne.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,Ne.jsxs)("span",{children:[(0,Ne.jsx)("strong",{children:"80+ workout varieties"})," vs repetitive formats"]})]}),(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Ne.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,Ne.jsxs)("span",{children:[(0,Ne.jsx)("strong",{children:"Cross-platform access"})," - phone, tablet, and web"]})]}),(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Ne.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,Ne.jsxs)("span",{children:[(0,Ne.jsx)("strong",{children:"Equipment-specific training"})," nobody else offers"]})]}),(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Ne.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,Ne.jsxs)("span",{children:[(0,Ne.jsx)("strong",{children:"Smart workout substitution"})," that counts properly"]})]}),(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Ne.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,Ne.jsxs)("span",{children:[(0,Ne.jsx)("strong",{children:"Future Garmin integration"})," - instant workout sync"]})]})]})]}),(0,Ne.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"16px",maxWidth:"400px",margin:"0 auto"},children:t?(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("button",{className:"btn btn-success btn-full-width",onClick:()=>e("/dashboard"),style:{fontSize:"1.1rem",padding:"20px"},children:"\ud83d\udcc5 Continue Your Training Plan"}),(0,Ne.jsx)("button",{className:"btn btn-secondary btn-full-width",onClick:()=>e("/onboarding"),style:{fontSize:"1rem",padding:"16px"},children:"\ud83d\ude80 Start New Training Plan"}),(0,Ne.jsx)("button",{className:"btn",onClick:()=>{localStorage.clear(),window.location.reload()},style:{fontSize:"0.9rem",padding:"12px",background:"transparent",border:"1px solid #666",color:"#999"},children:"\ud83d\uddd1\ufe0f Clear All Data & Start Fresh"}),(0,Ne.jsx)("p",{style:{fontSize:"0.9rem",color:"#888888",margin:"8px 0"},children:"Welcome back! Continue where you left off or create a new plan."})]}):(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("button",{className:"btn btn-success btn-full-width",onClick:()=>e("/onboarding"),style:{fontSize:"1.1rem",padding:"20px"},children:"\ud83d\ude80 Start Your Training Plan"}),(0,Ne.jsx)("p",{style:{fontSize:"0.9rem",color:"#888888",margin:"8px 0"},children:"Create a personalized training plan tailored to your goals, experience, and equipment."}),(0,Ne.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",fontSize:"0.8rem",color:"#666666"},children:[(0,Ne.jsx)("span",{children:"\u2713 No credit card"}),(0,Ne.jsx)("span",{children:"\u2713 Full preview"}),(0,Ne.jsx)("span",{children:"\u2713 All features"})]})]})})]})})}),(0,Ne.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderTop:"1px solid rgba(255, 255, 255, 0.1)",color:"#AAAAAA",padding:"20px 0",textAlign:"center"},children:(0,Ne.jsx)("div",{className:"container",children:(0,Ne.jsx)("p",{style:{margin:"0",fontSize:"0.9rem",color:"#888888"},children:"Built by runners, for runners. Research-based workouts from McMillan, Hal Higdon, Ben Parkes, and more."})})})]})};var Fe=n(986);class Le{constructor(){this.tempoIntensityGuidelines={comfortablyHard:{description:"Controlled breathing, can speak in short sentences",heartRate:"86-90% max HR",effort:"Medium-hard effort, sustainable for 20-60 minutes"},thresholdPace:{description:"Lactate threshold pace - usually around 1-hour race pace",heartRate:"88-92% max HR",effort:"Controlled discomfort, rhythmic breathing"},tempoPlus:{description:"Slightly faster than threshold - 10K to 15K pace",heartRate:"90-94% max HR",effort:"Harder breathing, shorter sustainable durations"}},this.workoutLibrary={TRADITIONAL_TEMPO:[{name:"Classic Tempo Run",duration:"20-40 minutes",structure:"15-20 min easy warmup + 20-40 min tempo + 10-15 min easy cooldown",intensity:"comfortablyHard",source:"Hal Higdon / McMillan",description:"Continuous run at lactate threshold pace",benefits:"Improves lactate clearance, race pacing, mental toughness",progression:{beginner:"Start with 15-20 min tempo, build by 3-5 min weekly",intermediate:"20-30 min tempo, focus on consistent pacing",advanced:"30-40 min tempo, practice race-specific scenarios"}},{name:"Sandwich Tempo",duration:"30-45 minutes total",structure:"10-15 min easy + 15-20 min tempo + 5-10 min easy",intensity:"comfortablyHard",source:"Hal Higdon adaptation",description:"Tempo effort sandwiched between easy running",benefits:"Teaches body to settle into tempo rhythm, race simulation"}],TEMPO_INTERVALS:[{name:"McMillan 2x2 Miles",duration:"45-50 minutes total",structure:"Warmup + 2x2 miles @ tempo with 3 min recovery + Cooldown",intensity:"thresholdPace",source:"McMillan Running",description:"Two 2-mile repeats at threshold pace",benefits:"Mental preparation for longer races, pacing practice",variations:["2x3 miles for marathon training","3x2 miles for advanced athletes","2x1.5 miles for beginners"]},{name:"Cruise Intervals",duration:"30-40 minutes total",structure:"Warmup + 4-6 x 3-8 min @ tempo with 1-2 min recovery + Cooldown",intensity:"thresholdPace",source:"Jack Daniels / McMillan",description:"Multiple medium-length intervals at threshold pace",benefits:"Accumulates time at threshold, teaches recovery between efforts",examples:["4 x 5 min with 90 sec recovery","5 x 4 min with 2 min recovery","6 x 3 min with 60 sec recovery"]},{name:"Cutdown Tempo Intervals",duration:"40-45 minutes total",structure:"Warmup + 5 min + 4 min + 3 min + 2 min @ tempo (2 min recovery) + Cooldown",intensity:"thresholdPace",source:"Advanced coaching adaptation",description:"Descending interval lengths at consistent tempo pace",benefits:"Mental strength, teaches pace discipline under fatigue"}],ALTERNATING_TEMPO:[{name:"McMillan Minutes Workout",duration:"20-60 minutes total",structure:"Warmup + Alternate 1 min tempo / 1 min easy x 10-30 + Cooldown",intensity:"comfortablyHard",source:"McMillan Running",description:"Alternate tempo and easy minutes without stopping",benefits:"Avoids going too fast, accumulates threshold time",progression:{week1:"10 x (1 min on / 1 min easy)",week4:"20 x (1 min on / 1 min easy)",week8:"25-30 x (1 min on / 1 min easy)"},notes:"Easy minutes naturally get faster as workout progresses"},{name:"2 Minutes On/Off",duration:"32-48 minutes total",structure:"Warmup + 8-12 x (2 min tempo / 2 min easy) + Cooldown",intensity:"comfortablyHard",source:"Tempo progression adaptation",description:"Longer alternating segments for advanced athletes",benefits:"Extended time in tempo zone, teaches rhythm"},{name:"Tempo Fartlek",duration:"25-35 minutes total",structure:"Warmup + 15-20 min of varied tempo surges (30sec-3min) + Cooldown",intensity:"comfortablyHard to tempoPlus",source:"Swedish fartlek adaptation",description:"Unstructured tempo efforts based on feel and terrain",benefits:"Teaches pace variety, mental flexibility, fun factor"}],PROGRESSIVE_TEMPO:[{name:"Build-Up Tempo",duration:"25-35 minutes",structure:"Warmup + 20 min building from easy to tempo + Cooldown",intensity:"easy to comfortablyHard",source:"Progressive training philosophy",description:"Gradually build from easy pace to tempo over 20 minutes",benefits:"Smooth transition to tempo, teaches pacing, less jarring"},{name:"Negative Split Tempo",duration:"30-40 minutes",structure:"Warmup + 2 x 10-15 min (first @ easy-moderate, second @ tempo) + Cooldown",intensity:"moderate to comfortablyHard",source:"Race pacing strategy",description:"Two equal segments with second half at tempo pace",benefits:"Race strategy practice, controlled progression"},{name:"Tempo Ladder",duration:"35-45 minutes",structure:"Warmup + 3-5-7-5-3 min @ tempo (2 min recovery) + Cooldown",intensity:"thresholdPace",source:"Pyramid training adaptation",description:"Ladder format building to longer tempo effort",benefits:"Mental preparation, variety in interval lengths"}],RACE_SPECIFIC:[{name:"Marathon Pace Tempo",duration:"40-70 minutes",structure:"Warmup + 6-13 miles @ marathon pace + Cooldown",intensity:"Slightly easier than comfortablyHard",source:"Ben Parkes / Marathon specific",description:"Extended runs at goal marathon pace",benefits:"Marathon pace practice, aerobic development",progression:"Start at 6 miles, build by 1-2 miles every 2-3 weeks"},{name:"Half Marathon Simulation",duration:"50-60 minutes",structure:"Warmup + 3-4 miles easy + 6-8 miles @ half pace + 2-3 miles easy",intensity:"comfortablyHard",source:"Race simulation training",description:"Practice middle portion of half marathon at race pace",benefits:"Race pacing, fueling practice, confidence building"},{name:"10K Tempo Simulation",duration:"35-45 minutes",structure:"Warmup + 2 miles easy + 4 miles @ 10K pace + 1-2 miles easy",intensity:"tempoPlus",source:"Race pace training",description:"Simulate 10K race effort within longer run",benefits:"10K pacing, mental preparation, race confidence"}]}}prescribeTempoWorkout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{runEqPreference:n=0,paces:r=null}=t;let i=null,o=null;for(const[s,c]of Object.entries(this.workoutLibrary)){const t=c.find(t=>t.name.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(t.name.toLowerCase()));if(t){i=t,o=s;break}}if(!i)throw new Error('Workout "'.concat(e,'" not found'));const a=this.tempoIntensityGuidelines[i.intensity],l=(0,s.A)((0,s.A)({},i),{},{category:o,intensityGuidance:a,runEqOptions:this.generateRunEqOptions(i,n),safetyNotes:this.getTempoSafetyNotes(i),paceGuidance:this.getPaceGuidance(i.intensity),alternatives:this.getTempoAlternatives(i)});return r&&(l.paces=r,l.name=this.injectPacesIntoName(i.name,r),l.structure=this.injectPacesIntoStructure(i.structure,r),l.description=this.injectPacesIntoDescription(i.description,r)),l}injectPacesIntoName(e,t){let n=e;return t.threshold&&(n="".concat(e," (").concat(t.threshold.pace,"/mi)")),n}injectPacesIntoStructure(e,t){let n=e;return t.threshold&&(n=n.replace(/@ tempo/g,"@ ".concat(t.threshold.pace,"/mile")),n=n.replace(/\bmin tempo\b/g,"min @ ".concat(t.threshold.pace,"/mile")),n=n.replace(/tempo pace/g,"".concat(t.threshold.pace,"/mile"))),t.easy&&(n=n.replace(/\beasy warmup\b/g,"easy (".concat(t.easy.min,"-").concat(t.easy.max,"/mile) warmup")),n=n.replace(/\beasy cooldown\b/g,"easy (".concat(t.easy.min,"-").concat(t.easy.max,"/mile) cooldown")),n=n.replace(/(\d+)(-\d+)? min easy\b/g,"$1$2 min easy (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)"))),t.marathon&&(n=n.replace(/@ marathon pace/g,"@ ".concat(t.marathon.pace,"/mile")),n=n.replace(/@ half pace/g,"@ ".concat(t.marathon.pace,"/mile")),n=n.replace(/@ MP/g,"@ ".concat(t.marathon.pace,"/mile"))),n}injectPacesIntoDescription(e,t){return e}generateRunEqOptions(e,t){const n={optionA:"Full running workout",optionB:"First half running, second half riding (Cyclete/Elliptigo)",optionC:"Alternate running/riding every interval or segment",optionD:"Full Cyclete/Elliptigo ride (use Garmin RunEQ data field to track equivalent miles)"};return n.recommendation=t>=70?"Full Cyclete/Elliptigo ride":t>=40?"Split workout - start running, finish riding":t>=20?"Alternate segments between running and riding":"Full running workout",n}getTempoSafetyNotes(e){const t=["Start conservatively - tempo should feel 'controlled discomfort'","If breathing becomes labored, slow down slightly","Better to run slightly too easy than too hard","Recovery between intervals should be easy jogging or walking"];return(e.name.includes("Minutes")||e.name.includes("Alternating"))&&t.push("Let easy segments naturally speed up as workout progresses"),(e.duration.includes("40")||e.duration.includes("50"))&&(t.push("Fuel appropriately for longer tempo sessions"),t.push("Stay hydrated throughout the workout")),t}getPaceGuidance(e){const t={comfortablyHard:{description:"Half marathon to 10-mile race pace",breathingTest:"Can speak 3-5 words at a time",effortLevel:"7-8 out of 10",commonMistake:"Running too fast - this should feel controlled"},thresholdPace:{description:"15K to 1-hour race pace",breathingTest:"Can speak 2-3 words with some difficulty",effortLevel:"8 out of 10",commonMistake:"Going anaerobic - keep it at threshold level"},tempoPlus:{description:"10K to 8K race pace",breathingTest:"Difficult to speak in sentences",effortLevel:"8-9 out of 10",commonMistake:"Unsustainable pace - should feel hard but controlled"}};return t[e]||t.comfortablyHard}getTempoAlternatives(e){return{treadmill:"Use slight incline (1-2%) to simulate outdoor effort",track:"4-6 laps for every mile of tempo running",badWeather:"Indoor track, treadmill, or covered area like parking garage",injury:"Pool running, elliptical, or Cyclete/Elliptigo ride maintaining same effort level",noTime:"Shorten warmup/cooldown, focus on quality tempo portion",tooHard:"Reduce intensity to comfortable-moderate effort, build gradually",tooEasy:"Slightly increase pace, but avoid going anaerobic"}}getWorkoutsByCategory(e){return this.workoutLibrary[e]||[]}getCategories(){return Object.keys(this.workoutLibrary)}getRandomWorkout(e){const t=this.getWorkoutsByCategory(e);if(0===t.length)throw new Error("No workouts found in category: ".concat(e));return t[Math.floor(Math.random()*t.length)]}searchWorkouts(e){const t=[],n=e.toLowerCase();for(const[r,i]of Object.entries(this.workoutLibrary))for(const e of i)(e.name.toLowerCase().includes(n)||e.description.toLowerCase().includes(n)||e.source.toLowerCase().includes(n))&&t.push((0,s.A)((0,s.A)({},e),{},{category:r}));return t}}class We{constructor(){this.intervalIntensityGuidelines={shortSpeed:{description:"All-out sprint efforts, neuromuscular power",pace:"800m to mile race pace",heartRate:"105%+ max HR",effort:"Maximum sustainable for 15-90 seconds",recovery:"Complete recovery between reps (walk/jog)"},vo2Max:{description:"VO2 max development, aerobic power",pace:"3K to 5K race pace",heartRate:"90-100% max HR",effort:"Hard but sustainable for 2-8 minutes",recovery:"Equal time recovery (light jog)"},longIntervals:{description:"Sustained speed, race-specific preparation",pace:"5K to 10K race pace",heartRate:"85-95% max HR",effort:"Controlled hard effort for 4+ minutes",recovery:"50-75% of work interval (easy jog)"}},this.workoutLibrary={SHORT_SPEED:[{name:"Classic 200m Repeats",distance:"200m",repetitions:"6-12 x 200m",intensity:"shortSpeed",recovery:"200m walk/jog (2-3 minutes)",source:"Hal Higdon",description:"Short speed bursts for neuromuscular development",pace:"800m race pace",benefits:"Leg turnover, running economy, speed development",progression:"Start 6 reps, add 1-2 per week to 12 reps"},{name:"400m Speed Intervals",distance:"400m",repetitions:"5-10 x 400m",intensity:"shortSpeed",recovery:"400m jog (3-4 minutes)",source:"Hal Higdon / Track training",description:"Classic one-lap speed intervals",pace:"Mile to 5K race pace",benefits:"Speed endurance, lactate tolerance, mental toughness",progression:"Start 5 reps, build by 1 every 2 weeks to 10"},{name:"Flying 100s",distance:"100m",repetitions:"6-10 x 100m",intensity:"shortSpeed",recovery:"Full recovery (3-5 minutes walk)",source:"Speed development training",description:"Accelerate 30m, sprint 100m, decelerate 30m",pace:"Faster than mile race pace",benefits:"Top-end speed, form at speed, confidence"},{name:"30-Second Strides",distance:"30 seconds",repetitions:"8-12 x 30 seconds",intensity:"shortSpeed",recovery:"90 seconds easy walk/jog",source:"General speed development",description:"Time-based speed intervals",pace:"5K pace or slightly faster",benefits:"Speed without track access, time-efficient"}],VO2_MAX:[{name:"1000m VO2 Max Intervals",distance:"1000m",repetitions:"3-6 x 1000m",intensity:"vo2Max",recovery:"Equal time recovery (3-4 minutes jog)",source:"Runner's World",description:"Classic VO2 max development intervals",pace:"5K race pace",benefits:"Aerobic power, VO2 max improvement, race preparation"},{name:"2-Minute VO2 Intervals",distance:"2 minutes",repetitions:"4-8 x 2 minutes",intensity:"vo2Max",recovery:"2 minutes easy jog",source:"Runner's World",description:"Time-based VO2 max intervals",pace:"5K effort",benefits:"VO2 max development without track access"},{name:"800m Track Intervals",distance:"800m",repetitions:"4-8 x 800m",intensity:"vo2Max",recovery:"400m jog (2-3 minutes)",source:"Classic track training",description:"Two-lap intervals at VO2 max intensity",pace:"3K to 5K race pace",benefits:"Speed endurance, lactate processing, mental strength"},{name:"1200m Extended VO2",distance:"1200m",repetitions:"3-5 x 1200m",intensity:"vo2Max",recovery:"400m jog (3-4 minutes)",source:"Extended VO2 max training",description:"Longer VO2 max intervals for advanced athletes",pace:"5K race pace",benefits:"Extended time at VO2 max, mental toughness"},{name:"Ladder Intervals",distance:"Variable",repetitions:"400-800-1200-800-400m",intensity:"vo2Max",recovery:"Half distance jog between reps",source:"Pyramid training",description:"Ascending and descending interval distances",pace:"5K race pace throughout",benefits:"Variety, mental engagement, comprehensive VO2 stimulus"}],LONG_INTERVALS:[{name:"Mile Repeats",distance:"1 mile",repetitions:"2-5 x 1 mile",intensity:"longIntervals",recovery:"3-4 minutes easy jog",source:"Distance training classic",description:"Sustained speed over longer distance",pace:"5K to 10K race pace",benefits:"Race-specific speed, sustained effort, pacing practice"},{name:"2K Intervals",distance:"2000m",repetitions:"3-4 x 2K",intensity:"longIntervals",recovery:"800m jog (4-5 minutes)",source:"International distance training",description:"Extended intervals for 5K/10K preparation",pace:"10K race pace",benefits:"Race-specific endurance, sustained speed"},{name:"6-Minute Intervals",distance:"6 minutes",repetitions:"3-5 x 6 minutes",intensity:"longIntervals",recovery:"3 minutes easy jog",source:"Time-based distance training",description:"Extended time-based intervals",pace:"10K effort",benefits:"Sustained speed without distance pressure"},{name:"1K-2K-1K Sandwich",distance:"Variable",repetitions:"1K + 2K + 1K",intensity:"longIntervals",recovery:"600m jog between reps",source:"Varied distance training",description:"Build to longer effort, then recover with shorter",pace:"5K-10K race pace",benefits:"Mental challenge, varied stimulus, race simulation"}],MIXED_INTERVALS:[{name:"Progressive Pyramid",distance:"Variable",repetitions:"2:30-3:30-4:30 @ 10K, then repeat @ 5K pace",intensity:"vo2Max to longIntervals",recovery:"Same time recovery as work interval",source:"Runner's World",description:"Build effort, then repeat at higher intensity",pace:"10K pace, then 5K pace",benefits:"Progressive overload, mental toughness, pace variety"},{name:"Fartlek Intervals",distance:"Variable",repetitions:"20-30 minutes of varied surges",intensity:"shortSpeed to longIntervals",recovery:"Easy running between surges",source:"Swedish training method",description:"Unstructured speed play based on feel",pace:"Varies from 5K to 10K effort",benefits:"Mental flexibility, fun factor, natural terrain adaptation"},{name:"Mona Fartlek",distance:"Variable",repetitions:"90s-3min-90s-60s-30s-30s hard efforts",intensity:"vo2Max",recovery:"90 seconds easy between all efforts",source:"Steve Moneghetti training",description:"Structured fartlek with specific time intervals",pace:"5K effort for all intervals",benefits:"Structured variety, comprehensive speed stimulus"}],RACE_SIMULATION:[{name:"5K Simulation Intervals",distance:"1K",repetitions:"5 x 1K",intensity:"longIntervals",recovery:"200m jog (90 seconds)",source:"Race-specific training",description:"Simulate 5K race with brief recoveries",pace:"Goal 5K race pace",benefits:"Race pacing, confidence, mental preparation"},{name:"10K Tempo-Speed Mix",distance:"Variable",repetitions:"2 x (2K @ 10K pace + 4 x 400m @ 5K pace)",intensity:"longIntervals to vo2Max",recovery:"2 min between sets, 90s between 400s",source:"10K race preparation",description:"Combine race pace with speed finish",pace:"10K pace + 5K pace",benefits:"Race-specific fitness, finishing kick practice"},{name:"Cut-Down Intervals",distance:"Variable",repetitions:"1200m-1000m-800m-600m-400m",intensity:"longIntervals to shortSpeed",recovery:"400m jog between reps",source:"Descending interval training",description:"Get faster as intervals get shorter",pace:"Start at 10K pace, end at 3K pace",benefits:"Finishing kick, mental toughness, speed development"}]}}prescribeIntervalWorkout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{runEqPreference:n=0,paces:r=null,trackIntervals:i=null,specificReps:o=null}=t;let a=null,l=null;for(const[s,h]of Object.entries(this.workoutLibrary)){const t=h.find(t=>t.name.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(t.name.toLowerCase()));if(t){a=t,l=s;break}}if(!a)throw new Error('Workout "'.concat(e,'" not found'));const c=this.intervalIntensityGuidelines[a.intensity],u=o||a.repetitions,d=(0,s.A)((0,s.A)({},a),{},{repetitions:u,category:l,intensityGuidance:c,totalWorkout:this.calculateTotalWorkout(a,r,u),runEqOptions:this.generateRunEqOptions(a,n),safetyNotes:this.getIntervalSafetyNotes(a),alternatives:this.getIntervalAlternatives(a),warmupCooldown:this.getWarmupCooldown(a.intensity,r)});return r&&(d.paces=r,d.trackIntervals=i,d.name=this.injectPacesIntoName(a.name,u,r,i),d.repetitions=this.injectPacesIntoReps(u,r,i),d.description=this.injectPacesIntoDescription(a.description,a.pace,r)),d}convertToMilePace(e,t){const n=e.split(":"),r=(60*parseInt(n[0],10)+parseInt(n[1],10))/t*1609.34,i=Math.floor(r/60),o=Math.round(r%60);return"".concat(i,":").concat(o.toString().padStart(2,"0"),"/mi")}injectPacesIntoName(e,t,n,r){let i=e;if(n.interval&&r&&r.interval)if(t.includes("400m")&&r.interval["400m"]){const t=this.convertToMilePace(r.interval["400m"],400);i="".concat(e," (").concat(r.interval["400m"],"/400m = ").concat(t,")")}else if(t.includes("800m")&&r.threshold&&r.threshold["800m"]){const t=this.convertToMilePace(r.threshold["800m"],800);i="".concat(e," (").concat(r.threshold["800m"],"/800m = ").concat(t,")")}else if(t.includes("1200m")&&r.threshold&&r.threshold["1200m"]){const t=this.convertToMilePace(r.threshold["1200m"],1200);i="".concat(e," (").concat(r.threshold["1200m"],"/1200m = ").concat(t,")")}else if(t.includes("200m")&&r.interval["200m"]){const t=this.convertToMilePace(r.interval["200m"],200);i="".concat(e," (").concat(r.interval["200m"],"/200m = ").concat(t,")")}else i="".concat(e," (").concat(n.interval.pace,"/mi)");else n.interval&&(i="".concat(e," (").concat(n.interval.pace,"/mi)"));return i}injectPacesIntoReps(e,t,n){let r=e;return n&&n.interval&&(r.includes("400m")&&n.interval["400m"]&&(r=r.replace(/(\d+)\s*x\s*400m/g,"$1 x 400m (".concat(n.interval["400m"]," each)"))),r.includes("800m")&&n.threshold&&n.threshold["800m"]&&(r=r.replace(/(\d+)\s*x\s*800m/g,"$1 x 800m (".concat(n.threshold["800m"]," each)"))),r.includes("1200m")&&n.threshold&&n.threshold["1200m"]&&(r=r.replace(/(\d+)\s*x\s*1200m/g,"$1 x 1200m (".concat(n.threshold["1200m"]," each)"))),r.includes("200m")&&n.interval["200m"]&&(r=r.replace(/(\d+)\s*x\s*200m/g,"$1 x 200m (".concat(n.interval["200m"]," each)")))),t.interval&&(r=r.replace(/(\d+)\s*x\s*1\s*mile/g,"$1 x 1 mile @ ".concat(t.interval.pace,"/mile")),r=r.replace(/(\d+)\s*x\s*2\s*mile/g,"$1 x 2 miles @ ".concat(t.interval.pace,"/mile"))),r}injectPacesIntoDescription(e,t,n){let r=e;return n.interval&&(t.includes("5K")||t.includes("VO2"))&&(r=r.replace(/5K race pace/g,"".concat(n.interval.pace,"/mile (5K race pace)")),r=r.replace(/5K pace/g,"".concat(n.interval.pace,"/mile"))),n.threshold&&(t.includes("10K")||t.includes("threshold"))&&(r=r.replace(/10K race pace/g,"".concat(n.threshold.pace,"/mile (10K/threshold pace)")),r=r.replace(/10K pace/g,"".concat(n.threshold.pace,"/mile"))),r}calculateTotalWorkout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r="15-20 minutes easy + dynamic warmup + 3-4 strides",i="15-20 minutes easy";t&&t.easy&&(r="15-20 minutes easy (".concat(t.easy.min,"-").concat(t.easy.max,"/mile) + dynamic warmup + 3-4 strides"),i="15-20 minutes easy (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)"));const o=n||e.repetitions;let a="50-70 minutes total";return"shortSpeed"===e.intensity?a="45-60 minutes total":(o.includes("x 6")||o.includes("x 8"))&&(a="60-75 minutes total"),{structure:"".concat(r," + ").concat(o," + ").concat(i),estimatedTime:a,focusPhase:"Main interval set should take 15-30 minutes"}}generateRunEqOptions(e,t){const n={optionA:"Full running workout",optionB:"First half of intervals running, second half riding (Cyclete/Elliptigo)",optionC:"Alternate each interval between running and riding",optionD:"Full Cyclete/Elliptigo ride (use Garmin RunEQ data field to track equivalent miles)"};return n.recommendation=t>=70?"Full Cyclete/Elliptigo ride":t>=40?"Split intervals - some running, some riding":t>=20?"Alternate every other interval":"Full running workout",n}getIntervalSafetyNotes(e){const t=["Proper warmup is CRUCIAL - never skip the full warmup routine","Start conservatively - first interval should feel controlled","Recovery should be truly easy - avoid rushing between intervals","Stop workout if form breaks down significantly"];return"shortSpeed"===e.intensity?(t.push("Complete recovery between reps - walk or very easy jog only"),t.push("Focus on form and efficiency over pure speed")):"vo2Max"===e.intensity?(t.push("Should reach breathing heavily but not gasping"),t.push("Equal time recovery allows partial recovery while maintaining stimulus")):(t.push("Maintain consistent pace across all intervals"),t.push("These should feel 'comfortably hard' not all-out")),t}getWarmupCooldown(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n={warmup:"15-20 minutes easy running + 5 minutes dynamic exercises + 3-4 x 20-second strides",cooldown:"15-20 minutes easy running + stretching"};return t&&t.easy&&(n.warmup="15-20 minutes easy running (".concat(t.easy.min,"-").concat(t.easy.max,"/mile) + 5 minutes dynamic exercises + 3-4 x 20-second strides"),n.cooldown="15-20 minutes easy running (".concat(t.easy.min,"-").concat(t.easy.max,"/mile) + stretching")),"shortSpeed"===e&&(t&&t.easy?n.warmup="20-25 minutes easy running (".concat(t.easy.min,"-").concat(t.easy.max,"/mile) + 10 minutes dynamic warmup + 4-6 progressive strides"):n.warmup="20-25 minutes easy running + 10 minutes dynamic warmup + 4-6 progressive strides",n.notes="Extra warmup time crucial for speed work"),n}getIntervalAlternatives(e){return{noTrack:{"200m":"20-30 second hard efforts on any surface","400m":"60-90 second hard efforts","800m":"2.5-3 minute hard efforts","1000m":"3-4 minute hard efforts","1 mile":"5-7 minute hard efforts"},badWeather:"Treadmill (use 1% incline), indoor track, or covered parking garage",injury:"Pool running, elliptical, or Cyclete/Elliptigo ride maintaining same effort level",altitude:"Reduce pace by 15-30 seconds per mile, extend recovery time",heat:"Run early morning, extend recovery, focus on effort over pace",beginners:"Start with fewer reps, longer recovery, slightly easier pace"}}getWorkoutsByCategory(e){return this.workoutLibrary[e]||[]}getCategories(){return Object.keys(this.workoutLibrary)}getRandomWorkout(e){const t=this.getWorkoutsByCategory(e);if(0===t.length)throw new Error("No workouts found in category: ".concat(e));return t[Math.floor(Math.random()*t.length)]}searchWorkouts(e){const t=[],n=e.toLowerCase();for(const[r,i]of Object.entries(this.workoutLibrary))for(const e of i)(e.name.toLowerCase().includes(n)||e.description.toLowerCase().includes(n)||e.source.toLowerCase().includes(n))&&t.push((0,s.A)((0,s.A)({},e),{},{category:r}));return t}}class Be{constructor(){this.hillGradeGuidelines={gentle:{min:2,max:4,description:"2-4% grade - sustainable for longer efforts"},moderate:{min:4,max:7,description:"4-7% grade - challenging but manageable"},steep:{min:7,max:12,description:"7-12% grade - short, intense efforts"},very_steep:{min:12,max:20,description:"12-20% grade - power/strength focus"}},this.workoutLibrary=this.buildWorkoutLibrary()}buildWorkoutLibrary(){return{short_power:[{name:"Hill Strides",duration:"10-15 seconds",hillRequirement:{grade:"moderate",distance:"50-100 meters",description:"Find a 4-7% grade hill, at least 50m long"},workout:{warmup:"15 min easy + 4x20sec strides on flat",main:"6-8 x 12sec hill strides @ 90% effort",recovery:"Walk/jog down + 1 min easy",cooldown:"10-15 min easy"},focus:"Neuromuscular power, running form, leg turnover",intensity:"Very High (TE 4.0+)",runEqOptions:{optionA:"Full running workout as prescribed",optionB:"Warmup riding (Cyclete/Elliptigo), hill reps running, cooldown riding",optionC:"Hill power intervals on Cyclete/Elliptigo (same RunEQ miles)",optionD:"Full Cyclete/Elliptigo ride (use Garmin RunEQ data field)"}},{name:"Stadium Steps Simulation",duration:"20-30 seconds",hillRequirement:{grade:"steep",distance:"75-150 meters",description:"Find a 7-12% grade hill, stadium steps, or parking garage ramp"},workout:{warmup:"20 min easy + dynamic drills",main:"5-8 x 25sec explosive hill climbs @ 95% effort",recovery:"Walk down + 2 min easy jog",cooldown:"15 min easy"},focus:"Explosive power, anaerobic capacity, mental toughness",intensity:"Maximum (TE 4.5+)"}],medium_vo2:[{name:"Classic Hill Repeats",duration:"2-3 minutes",hillRequirement:{grade:"moderate",distance:"400-800 meters",description:"Find a steady 4-7% grade, like your 0.75-mile hill"},workout:{warmup:"20 min easy + 3x30sec pickups",main:"4-6 x 2.5 min uphill @ threshold effort",recovery:"Jog/walk down + 90sec easy",cooldown:"15 min easy"},focus:"VO2 max, lactate threshold, hill running economy",intensity:"Hard (TE 3.5-4.0)",progression:{week1:"4 x 2 min",week2:"5 x 2 min",week3:"4 x 2.5 min",week4:"5 x 2.5 min"}},{name:"Hill Pyramid",duration:"Variable (1-4 min)",hillRequirement:{grade:"moderate",distance:"600+ meters",description:"Long steady hill - your 0.75-mile hill is perfect"},workout:{warmup:"20 min easy",main:"1-2-3-4-3-2-1 min uphill @ building effort",recovery:"Equal time easy jog/walk down between reps",cooldown:"15 min easy"},focus:"Progressive effort, mental strength, pacing discipline",intensity:"Progressive (TE 3.0-4.0)"}],long_strength:[{name:"Tempo Hills",duration:"6-12 minutes",hillRequirement:{grade:"gentle",distance:"1+ miles",description:"Find a long 2-4% grade - perfect for your 0.75-mile hill!"},workout:{warmup:"15-20 min easy",main:"2-3 x 8-10 min uphill @ tempo effort",recovery:"5 min easy (jog down + flat)",cooldown:"15 min easy"},focus:"Sustained power, aerobic strength, mental endurance",intensity:"Moderately Hard (TE 3.0-3.5)",runEqOptions:{optionA:"Full running workout",optionB:"First rep running, second rep riding (Cyclete/Elliptigo)",optionC:"Alternate running/riding every 2-3 minutes",optionD:"Full Cyclete/Elliptigo ride (use Garmin RunEQ data field)"}},{name:"Long Hill Progression",duration:"8-15 minutes",hillRequirement:{grade:"gentle_to_moderate",distance:"1.5+ miles",description:"Long gradual climb - multiple loops of your hill work great"},workout:{warmup:"20 min easy",main:"12 min continuous uphill: 4min easy\u21924min moderate\u21924min hard",recovery:"Walk/easy jog down",repeat:"1-2 more times depending on fitness",cooldown:"15-20 min easy"},focus:"Progressive effort, race simulation, mental toughness"}],hill_circuits:[{name:"Hill Circuit Training",duration:"30-45 minutes",hillRequirement:{grade:"moderate",distance:"Circuit of 1-2 miles",description:"Perfect for your 2-mile loop with 0.75-mile climb!"},workout:{warmup:"15 min easy + dynamic drills",main:"4-6 complete loops:\n\u2022 0.75mi climb @ steady effort\n\u2022 Downhill recovery @ controlled pace\n\u2022 0.25mi flat @ easy pace",effort:"Build effort each loop (start 70%, finish 85%)",cooldown:"10-15 min easy"},focus:"Hill-specific endurance, downhill control, circuit training",intensity:"Moderate-Hard (TE 3.0-3.5)",seasonal:"Great for base building and hill marathon prep"},{name:"Hill Fartlek",duration:"25-35 minutes",hillRequirement:{grade:"rolling_terrain",distance:"Varied",description:"Rolling hills or repeated loops with varied efforts"},workout:{warmup:"15 min easy",main:"20 min continuous fartlek on hills:\n\u2022 Up hills: surge to moderate-hard\n\u2022 Down hills: controlled but not easy\n\u2022 Flats: settle to steady tempo",style:"Unstructured - respond to terrain",cooldown:"15 min easy"},focus:"Terrain adaptation, variable pacing, race preparation"}],downhill_specific:[{name:"Controlled Downhill Repeats",duration:"1-3 minutes",hillRequirement:{grade:"moderate",distance:"400-800 meters downhill",description:"The downhill section of your 2-mile loop is ideal"},workout:{warmup:"20 min easy + leg swings",main:"5-8 x 90sec controlled fast downhill",technique:"Quick cadence, lean slightly forward, land on forefoot",recovery:"Walk/jog up hill + 1 min easy",cooldown:"15 min easy + stretching"},focus:"Eccentric strength, downhill speed, injury prevention",intensity:"Moderate (TE 2.5-3.0)",caution:"Start conservative - high injury risk if overdone"}],specialty:[{name:"Hill Progression Run",duration:"45-60 minutes",hillRequirement:{grade:"rolling_or_repeatable",distance:"Multiple miles",description:"Your 2-mile loop repeated, or rolling terrain course"},workout:{warmup:"15 min easy",main:"30-40 min progression:\n\u2022 First 10 min: easy on hills\n\u2022 Middle 15-20 min: moderate effort on climbs\n\u2022 Final 10-15 min: strong effort on all uphills",approach:"Gradual effort increase, maintain form",cooldown:"10-15 min easy"},focus:"Progressive loading, race preparation, mental preparation"},{name:"Over-Under Hills",duration:"Variable",hillRequirement:{grade:"moderate",distance:"Long steady climb",description:"Single long hill or multiple loops of your 0.75-mile climb"},workout:{warmup:"20 min easy",main:"3-4 x 6 min on hill: 3min @ threshold, 3min @ slightly above threshold",pattern:"Switch effort every 3 minutes without stopping",recovery:"4-5 min easy between sets",cooldown:"15 min easy"},focus:"Lactate clearance, threshold power, race-pace variability"}]}}getWorkoutsForTerrain(e){"loop_with_climb"===e&&[].push(...this.workoutLibrary.long_strength.filter(e=>e.name.includes("Tempo")),...this.workoutLibrary.hill_circuits,...this.workoutLibrary.medium_vo2.filter(e=>e.name.includes("Pyramid")));return{short_steep:[...this.workoutLibrary.short_power],medium_steady:[...this.workoutLibrary.medium_vo2],long_gentle:[...this.workoutLibrary.long_strength],rolling_terrain:[...this.workoutLibrary.specialty,...this.workoutLibrary.hill_circuits]}[e]||[]}prescribeHillWorkout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{runEqPreference:n=0,paces:r=null}=t;let i=null,o=null;for(const[s,l]of Object.entries(this.workoutLibrary)){const t=l.find(t=>t.name.toLowerCase().includes(e.toLowerCase()));if(t){i=t,o=s;break}}if(!i)return null;const a=(0,s.A)((0,s.A)({},i),{},{terrainInstructions:this.generateTerrainInstructions(i.hillRequirement),runEqAdaptation:this.adaptForRunEq(i,n),safetyNotes:this.generateSafetyNotes(o,i),alternatives:this.suggestAlternatives(i.hillRequirement)});return r&&(a.paces=r,a.name=this.injectPacesIntoName(i.name,r)),a}injectPacesIntoName(e,t){let n=e;return t.threshold?n="".concat(e," (").concat(t.threshold.pace,"/mi)"):t.interval&&(n="".concat(e," (").concat(t.interval.pace,"/mi)")),n}generateTerrainInstructions(e){if(!e||!e.grade)return{findHill:"Look for a moderate hill with 4-7% grade",measurement:"Use your phone's inclinometer app or estimate: you should feel challenged but able to maintain form",distance:"Hill should be at least 100 meters long",examples:["Neighborhood hills","Park paths","Treadmill incline"],backup:"If no ideal hill available, use treadmill at appropriate incline or find closest available grade"};const t=this.hillGradeGuidelines[e.grade];return t?{findHill:"Look for a hill with ".concat(t.description),measurement:"Use your phone's inclinometer app or estimate: you should feel challenged but able to maintain form",distance:"Hill should be at least ".concat(e.distance),examples:this.getTerrainExamples(e.grade),backup:"If no ideal hill available, use treadmill at appropriate incline or find closest available grade"}:this.generateTerrainInstructions(null)}getTerrainExamples(e){return{gentle:["Long highway on-ramps","Gradual neighborhood streets","Park paths with slight incline","Treadmill at 2-4% incline"],moderate:["Typical neighborhood hills","Multi-story parking garage ramps","Bridge approaches","Treadmill at 4-7% incline"],steep:["Short neighborhood climbs","Stadium stairs","Steep parking garage ramps","Treadmill at 7-12% incline"],very_steep:["Stadium steps","Ski slope access roads","Short power line hills","Treadmill at 12%+ incline"]}[e]||[]}adaptForRunEq(e,t){return 0===t?{note:"Full running workout as prescribed"}:e.runEqOptions?t<=25?{recommendation:e.runEqOptions.optionA}:t<=50?{recommendation:e.runEqOptions.optionB}:t<=75?{recommendation:e.runEqOptions.optionC}:{recommendation:e.runEqOptions.optionD}:{lowPreference:"Consider doing warmup/cooldown on Cyclete/Elliptigo",mediumPreference:"Alternate running and Cyclete/Elliptigo intervals",highPreference:"Full Cyclete/Elliptigo ride (use Garmin RunEQ data field to track equivalent miles)"}}generateSafetyNotes(e,t){return["Start conservatively and build intensity gradually","Focus on form - don't let hills break down your running mechanics","Stay hydrated and fuel appropriately for longer hill sessions",...{short_power:["Very high intensity - ensure adequate recovery","Perfect form is critical at high speeds"],medium_vo2:["Monitor effort level - hills amplify perceived exertion","Don't start too fast on first rep"],long_strength:["Pace should feel sustainable for the full duration","Mental focus is as important as physical strength"],downhill_specific:["HIGH INJURY RISK - start very conservatively","Focus on quick cadence, not long strides","Stop if you feel excessive quad/knee stress"],hill_circuits:["Monitor cumulative fatigue across multiple loops","Adjust effort based on conditions and fatigue"]}[e]||[]]}suggestAlternatives(e){return{noHill:"Use treadmill with appropriate incline setting",hillTooShort:"Repeat shorter hill multiple times with brief recovery",hillTooLong:"Use only portion of longer hill, mark turnaround point",wrongGrade:"Adjust effort level to compensate - easier on steeper hills, harder on gentler grades",indoorOption:"StairMaster, stadium stairs, or parking garage ramps can substitute"}}getWorkoutsByCategory(e){return this.workoutLibrary[e]||[]}getCategories(){return Object.keys(this.workoutLibrary)}getRandomWorkout(e){const t=this.getWorkoutsByCategory(e);if(0===t.length)throw new Error("No workouts found in category: ".concat(e));return t[Math.floor(Math.random()*t.length)]}searchWorkouts(e){const t=[],n=e.toLowerCase();for(const[r,i]of Object.entries(this.workoutLibrary))for(const e of i)(e.name.toLowerCase().includes(n)||e.focus.toLowerCase().includes(n))&&t.push((0,s.A)((0,s.A)({},e),{},{category:r}));return t}}class Ue{constructor(){this.longRunIntensityGuidelines={easy:{description:"Conversational pace, can speak in full sentences",pace:"30-90 seconds slower than marathon pace",heartRate:"65-78% max HR",effort:"Comfortable, sustainable for hours"},steadyState:{description:"Sustained aerobic effort, controlled breathing",pace:"1:15:00 to 2:30:00 race pace (usually 15-45 sec slower than marathon pace)",heartRate:"83-87% max HR",effort:"Moderate effort, what you can sustain for 2-2.5 hours"},marathonPace:{description:"Goal marathon race pace",pace:"Marathon race pace",heartRate:"80-85% max HR",effort:"Controlled hard effort, race-specific"},fastFinish:{description:"Faster than marathon pace for finishing segments",pace:"Half marathon to 10K pace",heartRate:"85-90% max HR",effort:"Strong finish, practice racing on tired legs"}},this.workoutLibrary={TRADITIONAL_EASY:[{name:"Classic Easy Long Run",duration:"60-150 minutes",structure:"Entire run at easy, conversational pace",intensity:"easy",source:"Hal Higdon foundation",description:"Traditional base-building long run",benefits:"Aerobic development, time on feet, mental endurance",progression:"Increase by 1-2 miles per week, stepback every 3rd week",notes:"30-90 seconds slower than marathon pace, finish refreshed"},{name:"Conversational Long Run",duration:"75-120 minutes",structure:"Run with partner/group, maintain conversation throughout",intensity:"easy",source:"Social running philosophy",description:"Easy long run emphasizing conversational pace",benefits:"Aerobic base, social aspect, pace discipline",notes:"If you can't hold a conversation, you're going too fast"}],PROGRESSIVE_RUNS:[{name:"Thirds Progression",duration:"45-90 minutes",structure:"First 1/3 easy, middle 1/3 moderate, final 1/3 strong",intensity:"easy to fastFinish",source:"McMillan Running",description:"Equal time segments with increasing intensity",benefits:"Teaches finishing speed, energy conservation",example:"60 min run: 20 min easy + 20 min moderate + 20 min strong",notes:"Final third at steady state or tempo pace, not all-out"},{name:"DUSA Progression",duration:"50-90 minutes",structure:"75-90% easy pace, final 10-25% strong pace",intensity:"easy to fastFinish",source:"McMillan Running (Discovery USA)",description:"Majority easy with extended fast finish",benefits:"Teaches racing on fatigued legs, builds confidence",example:"60 min run: 45 min easy + 15 min strong pace",notes:"Used by elite marathoners, builds race-specific fitness"},{name:"Super Fast Finish",duration:"50-90 minutes",structure:"Normal easy run + final 3-6 minutes at 5K race effort",intensity:"easy to fastFinish",source:"McMillan (Paul Tergat method)",description:"Easy run with explosive final minutes",benefits:"Finishing kick practice, confidence, speed on tired legs",notes:"Used by Paul Tergat for world record marathon buildup"},{name:"10-Second Dropdowns",duration:"45-75 minutes",structure:"Drop pace by 10 seconds every mile (or every 10 minutes)",intensity:"easy to marathonPace",source:"Runner's World progression method",description:"Gradual, systematic pace progression",benefits:"Smooth pace control, negative split practice",example:"Start 8:30 pace, drop to 8:20, 8:10, 8:00, etc."}],STEADY_STATE_LONG:[{name:"Marathon Pace Long Run",duration:"60-120 minutes",structure:"15-20 min easy warmup + 20-60 min @ marathon pace + 10-15 min easy",intensity:"marathonPace",source:"Marathon-specific training",description:"Extended time at goal marathon pace",benefits:"Race pace practice, aerobic power, confidence",progression:"Start with 20 min MP, build by 5-10 min weekly",notes:"Practice fueling and pacing strategies"},{name:"Steady State Long Run",duration:"50-95 minutes",structure:"15 min easy warmup + 25-75 min steady state + 10 min easy",intensity:"steadyState",source:"McMillan Running",description:"Extended aerobic effort at steady state pace",benefits:"Aerobic power, endurance, lactate clearance",notes:"Pace between 1:15:00 and 2:30:00 race pace"},{name:"Half Marathon Pace Long Run",duration:"60-90 minutes",structure:"15 min easy + 30-60 min @ half marathon pace + 15 min easy",intensity:"steadyState",source:"Half marathon training",description:"Extended half marathon pace practice",benefits:"Race-specific fitness, sustained speed"}],MIXED_PACE_LONG:[{name:"Fast-Slow Long Run",duration:"60-120 minutes",structure:"Alternate fast and easy segments (e.g., 2 min fast / 3 min easy)",intensity:"easy to marathonPace",source:"Varied pace training",description:"Alternating pace segments throughout long run",benefits:"Pace variety, teaches recovery while running, mental engagement",variations:["2 min fast / 3 min easy for entire run","5 min fast / 5 min easy x 6-12 sets","1 mile fast / 2 miles easy pattern"]},{name:"Surge Long Run",duration:"60-120 minutes",structure:"Easy base pace with 30-60 second surges every 5-10 minutes",intensity:"easy to fastFinish",source:"Fartlek adaptation for long runs",description:"Easy long run with regular speed surges",benefits:"Simulates race surges, mental toughness, speed on tired legs",notes:"Surges should be strong but controlled, return to easy pace"},{name:"Out-and-Back Negative Split",duration:"60-120 minutes",structure:"Run out easy, return faster (aim for 30-60 sec negative split)",intensity:"easy to marathonPace",source:"Negative split training",description:"Practice negative splitting over long distance",benefits:"Pacing discipline, finishing strength, race strategy",notes:"Turn around at halfway point, aim to return 30-60 sec faster"}],RACE_SIMULATION:[{name:"Marathon Dress Rehearsal",duration:"120-180 minutes",structure:"20-26 mile run at planned marathon paces with race fueling",intensity:"easy to marathonPace",source:"Marathon preparation",description:"Full marathon simulation 3-4 weeks before race",benefits:"Race day practice, fueling test, confidence",structure_example:"6 easy + 13-16 @ MP + 1-3 easy cooldown",notes:"Practice everything: clothing, fueling, pacing, mindset"},{name:"Half Marathon Simulation",duration:"90-120 minutes",structure:"15 min easy + 8-10 miles @ half pace + 15 min easy",intensity:"easy to marathonPace",source:"Half marathon preparation",description:"Simulate middle miles of half marathon",benefits:"Race pace confidence, fueling practice",notes:"Practice race day routine and mindset"},{name:"Goal Pace Sandwich",duration:"75-120 minutes",structure:"Easy miles + goal pace block + easy miles (mimic race splits)",intensity:"easy to marathonPace",source:"Race-specific training",description:"Practice goal pace within context of longer run",benefits:"Race pacing, mental preparation, confidence",example:"3 easy + 6 @ goal pace + 3 easy for 12-mile long run"}],TERRAIN_SPECIFIC:[{name:"Rolling Hills Long Run",duration:"60-120 minutes",structure:"Long run on rolling terrain, maintain effort (not pace)",intensity:"easy to steadyState",source:"Terrain-specific training",description:"Long run emphasizing varied terrain",benefits:"Hill strength, effort-based pacing, race preparation",notes:"Focus on consistent effort, let pace vary with terrain"},{name:"Trail Long Run",duration:"75-150 minutes",structure:"Long run on trails, emphasis on time not distance",intensity:"easy",source:"Trail running adaptation",description:"Time-based long run on trail terrain",benefits:"Mental break, varied muscle recruitment, adventure",notes:"Time-based rather than distance-based due to terrain"}],RECOVERY_LONG:[{name:"Aerobic Base Long Run",duration:"90-150 minutes",structure:"Very easy pace, focus on time on feet not speed",intensity:"easy",source:"Base building philosophy",description:"Ultra-easy long run for aerobic development",benefits:"Aerobic base, active recovery, mental endurance",notes:"Should feel refreshed after, not fatigued"},{name:"Social Long Run",duration:"75-120 minutes",structure:"Group long run with conversation throughout",intensity:"easy",source:"Social running",description:"Easy long run with group, emphasizing social aspect",benefits:"Mental break, social connection, pace discipline"}]}}prescribeLongRunWorkout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{runEqPreference:n=0,distance:r=null,duration:i=null,paces:o=null}=t;let a=null,l=null;for(const[s,u]of Object.entries(this.workoutLibrary)){const t=u.find(t=>t.name.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(t.name.toLowerCase()));if(t){a=t,l=s;break}}if(!a)throw new Error('Workout "'.concat(e,'" not found'));const c=(0,s.A)((0,s.A)({},a),{},{category:l,intensityGuidance:this.getIntensityGuidance(a),runEqOptions:this.generateRunEqOptions(a,n),customization:this.getCustomizationOptions(a,r,i,o),safetyNotes:this.getLongRunSafetyNotes(a),fuelingGuidance:this.getFuelingGuidance(a),alternatives:this.getLongRunAlternatives(a)});return o&&(c.paces=o,c.name=this.injectPacesIntoName(a.name,r,o),c.structure=this.injectPacesIntoStructure(a.structure,o),c.description=this.injectPacesIntoDescription(a.description,o)),c}injectPacesIntoName(e,t,n){let r=e;return t&&n.easy?r="".concat(t,"-Mile ").concat(e," (").concat(n.easy.min,"-").concat(n.easy.max,"/mi)"):t?r="".concat(t,"-Mile ").concat(e):n.easy&&(r="".concat(e," (").concat(n.easy.min,"-").concat(n.easy.max,"/mi)")),r}injectPacesIntoStructure(e,t){let n=e;return t.easy&&(n=n.replace(/easy pace/g,"easy pace (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)")),n=n.replace(/easy warmup/g,"easy warmup (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)")),n=n.replace(/\bmin easy/g,"min easy (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)")),n=n.replace(/easy cooldown/g,"easy cooldown (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)")),n=n.replace(/\bmiles easy/g,"miles easy (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)"))),t.marathon&&(n=n.replace(/@ marathon pace/g,"@ ".concat(t.marathon.pace,"/mile marathon pace")),n=n.replace(/@ MP/g,"@ ".concat(t.marathon.pace,"/mile")),n=n.replace(/@ half pace/g,"@ ".concat(t.marathon.pace,"/mile pace"))),t.threshold&&(n=n.replace(/steady state/g,"steady state (".concat(t.threshold.pace,"/mile)")),n=n.replace(/strong pace/g,"strong pace (".concat(t.threshold.pace,"/mile)"))),n}injectPacesIntoDescription(e,t){let n=e;return t.easy&&(n=n.replace(/easy pace/g,"easy pace (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)")),n=n.replace(/conversational pace/g,"conversational pace (".concat(t.easy.min,"-").concat(t.easy.max,"/mile)"))),t.marathon&&(n=n.replace(/marathon pace/g,"marathon pace (".concat(t.marathon.pace,"/mile)")),n=n.replace(/goal pace/g,"goal pace (".concat(t.marathon.pace,"/mile)"))),n}getIntensityGuidance(e){let t=e.intensity;return"string"===typeof e.intensity&&e.intensity.includes(" to ")&&(t=e.intensity.split(" to ")[0]),this.longRunIntensityGuidelines[t]||this.longRunIntensityGuidelines.easy}generateRunEqOptions(e,t){const n={optionA:"Full running workout",optionB:"First half running, second half on stand-up bike",optionC:"Alternate segments between running and biking (if structured workout)",optionD:"Full stand-up bike workout (".concat(2,"x time conversion for easy pace)"),conversionFactor:2};return(e.intensity.includes("marathonPace")||e.intensity.includes("steadyState"))&&(n.optionD="Full stand-up bike workout (2x easy pace, 2.5x marathon pace)",n.conversionNotes="Use 2.5x conversion for marathon pace segments, 2x for easy segments"),n.recommendation=t>=70?"Full stand-up bike workout":t>=40?"Split workout - first half running, second half biking":t>=20?"Alternate major segments if structured workout":"Full running workout",n}getCustomizationOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const i={distanceOptions:{short:"45-75 minutes or 6-10 miles",medium:"75-120 minutes or 10-16 miles",long:"120-180 minutes or 16-26 miles"},adaptForDistance:{},adaptForTime:{}};return(e.name.includes("Progression")||e.name.includes("Progressive"))&&(r&&r.easy&&r.threshold?i.adaptForDistance={"6-8 miles":"2-3 miles easy (".concat(r.easy.min,"-").concat(r.easy.max,"/mile), 2-3 miles moderate, 2 miles strong (").concat(r.threshold.pace,"/mile)"),"10-12 miles":"4 miles easy (".concat(r.easy.min,"-").concat(r.easy.max,"/mile), 4 miles moderate, 4 miles strong (").concat(r.threshold.pace,"/mile)"),"16-18 miles":"6 miles easy (".concat(r.easy.min,"-").concat(r.easy.max,"/mile), 6 miles moderate, 6 miles strong (").concat(r.threshold.pace,"/mile)")}:i.adaptForDistance={"6-8 miles":"2-3 miles easy, 2-3 miles moderate, 2 miles strong","10-12 miles":"4 miles easy, 4 miles moderate, 4 miles strong","16-18 miles":"6 miles easy, 6 miles moderate, 6 miles strong"}),e.name.includes("Marathon Pace")&&(r&&r.easy&&r.marathon?i.adaptForDistance={"10-12 miles":"3 miles easy (".concat(r.easy.min,"-").concat(r.easy.max,"/mile) + 6 miles @ ").concat(r.marathon.pace,"/mile + 2 miles easy"),"14-16 miles":"3 miles easy (".concat(r.easy.min,"-").concat(r.easy.max,"/mile) + 10 miles @ ").concat(r.marathon.pace,"/mile + 3 miles easy"),"18-20 miles":"3 miles easy (".concat(r.easy.min,"-").concat(r.easy.max,"/mile) + 13 miles @ ").concat(r.marathon.pace,"/mile + 4 miles easy")}:i.adaptForDistance={"10-12 miles":"3 miles easy + 6 miles MP + 2 miles easy","14-16 miles":"3 miles easy + 10 miles MP + 3 miles easy","18-20 miles":"3 miles easy + 13 miles MP + 4 miles easy"}),i}getLongRunSafetyNotes(e){const t=["Start conservatively - long runs should feel sustainable","Focus on effort over pace, especially in varying weather/terrain","Plan hydration strategy for runs over 90 minutes","Carry identification and emergency contact information","Know your route and have bailout options"];return(e.intensity.includes("marathonPace")||e.intensity.includes("fastFinish"))&&(t.push("Save faster segments for when you're warmed up (after 15+ minutes)"),t.push("If pace becomes unsustainable, dial back to easy effort")),(e.duration.includes("120")||e.duration.includes("150"))&&(t.push("Practice race-day fueling for runs over 2 hours"),t.push("Consider electrolyte replacement for extended efforts")),(e.name.includes("Progression")||e.name.includes("Progressive"))&&(t.push("Build pace gradually - avoid sudden speed changes"),t.push("Final segments should feel strong but controlled, not all-out")),t}getFuelingGuidance(e){const t=[];return(e.duration.includes("120")||e.duration.includes("150")||e.duration.includes("180"))&&(t.push("This is a key fueling practice opportunity"),t.push("Test gels, sports drinks, or real food you plan to use in races"),t.push("Practice taking fuel while maintaining pace/effort")),{baseFueling:{under60min:"Generally no fueling needed, just hydration","60-90min":"Consider sports drink or small fuel if hot weather","90-120min":"Practice race fueling - 30-60g carbs per hour after first hour",over120min:"Definitely fuel - practice exact race day strategy"},notes:t}}getLongRunAlternatives(e){return{badWeather:{treadmill:"Use 1% incline, break into segments if needed for mental engagement",indoor:"Mall walking, indoor track (expect many laps)",postpone:"Better to move day than compromise safety"},timeConstraints:{shortenDistance:"Maintain workout structure but reduce total time/distance",focusOnQuality:"Keep key pace segments, reduce easy portions",splitAcrossDays:"Not ideal, but could split very long runs across 2 days"},injury:{pool:"Aqua jogging maintaining same effort and time",bike:"Stand-up bike or regular bike with appropriate time conversion",elliptical:"Good alternative maintaining effort level"},terrain:{noHills:"Use treadmill incline or find bridges/overpasses",onlyTrack:"Long run on track requires mental strategies, audiobooks/podcasts help",onlyTreadmill:"Break into segments, vary incline/pace for mental engagement"}}}getWorkoutsByCategory(e){return this.workoutLibrary[e]||[]}getCategories(){return Object.keys(this.workoutLibrary)}getRandomWorkout(e){const t=this.getWorkoutsByCategory(e);if(0===t.length)throw new Error("No workouts found in category: ".concat(e));return t[Math.floor(Math.random()*t.length)]}searchWorkouts(e){const t=[],n=e.toLowerCase();for(const[r,i]of Object.entries(this.workoutLibrary))for(const e of i)(e.name.toLowerCase().includes(n)||e.description.toLowerCase().includes(n)||e.source.toLowerCase().includes(n))&&t.push((0,s.A)((0,s.A)({},e),{},{category:r}));return t}}class ze{constructor(){this.equipmentSpecs={cyclete:{name:"cyclete",description:"Fluid, powerful running-like motion",strengths:["Long distance","Running simulation","Endurance training"],optimalDurations:"Extended sessions (60+ minutes)",resistanceType:"Variable terrain simulation"},elliptigo:{name:"elliptiGO",description:"Smooth elliptical motion, up to 26-inch adjustable stride",strengths:["Full body workout","Interval training","Recovery sessions"],optimalDurations:"Varied (20-120 minutes)",resistanceType:"Gear-based resistance"}},this.workoutLibrary={TEMPO_BIKE:[{name:"Sustained Threshold Effort",duration:"50-70 minutes",equipment:"both",description:"Continuous steady hard effort at lactate threshold",structure:"10 min easy warmup + 20-40 min @ threshold effort + 10 min easy cooldown",intensity:"tempo",benefits:"Lactate threshold development, sustained power, mental toughness",cycleteNotes:"Excellent for building race-pace endurance on natural motion",elliptigoNotes:"Use moderate-long stride, maintain steady resistance throughout",effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard, can speak in short sentences"},roadConsiderations:"Find a flat, uninterrupted stretch of bike path or quiet road for sustained effort"},{name:"Tempo Intervals",duration:"60-75 minutes",equipment:"both",description:"Repeated threshold efforts with short recovery",structure:"10 min warmup + 3-4 x 8 min @ threshold with 3 min easy recovery + 10 min cooldown",intensity:"tempo",benefits:"Threshold power, recovery management, pacing practice",cycleteNotes:"Perfect for building powerful sustained efforts",elliptigoNotes:"Maintain consistent stride pattern across intervals",effort:{heartRate:"Zone 3-4 during intervals (80-90% max HR)",perceived:"Hard but sustainable, recovery is truly easy"},roadConsiderations:"Out-and-back route or loop works well, recovery is active (keep moving)"},{name:"Progressive Tempo Build",duration:"55-70 minutes",equipment:"both",description:"Gradually building effort to threshold and beyond",structure:"15 min easy + 10 min moderate + 10 min threshold + 5 min hard + 15 min easy cooldown",intensity:"tempo",benefits:"Graduated effort adaptation, race simulation, finishing strength",cycleteNotes:"Natural motion allows smooth power progression",elliptigoNotes:"Increase resistance and/or cadence to build effort",effort:{heartRate:"Building from Zone 2 \u2192 Zone 4 \u2192 Zone 5",perceived:"Starting comfortable, finishing hard"},roadConsiderations:"Slight uphill finish helps with progressive build"},{name:"Cruise Intervals",duration:"60-80 minutes",equipment:"both",description:"Classic lactate threshold intervals with short recovery",structure:"15 min warmup + 5-6 x 5 min @ threshold with 2 min easy + 10 min cooldown",intensity:"tempo",benefits:"Threshold efficiency, power sustainability, mental resilience",cycleteNotes:"Maintain smooth natural rhythm throughout efforts",elliptigoNotes:"Focus on consistent resistance and stride pattern",effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard, short recovery keeps you honest"},roadConsiderations:"Timer-based intervals work anywhere, don't need specific landmarks"},{name:"Tempo Sandwich",duration:"60-75 minutes",equipment:"both",description:"Two threshold blocks separated by easy riding",structure:"10 min warmup + 15 min @ threshold + 10 min easy + 15 min @ threshold + 10 min cooldown",intensity:"tempo",benefits:"Threshold endurance, mid-ride recovery practice, race pacing",cycleteNotes:"Second effort teaches pacing discipline",elliptigoNotes:"Maintain form quality into second block",effort:{heartRate:"Zone 3-4 during blocks",perceived:"First block strong, second block requires focus"},roadConsiderations:"Out-and-back route ideal (turnaround during easy section)"},{name:"Fast Finish Tempo",duration:"50-65 minutes",equipment:"both",description:"Steady effort with strong closing surge",structure:"10 min warmup + 25 min @ steady moderate + 10 min @ threshold + 5 min hard + 10 min cooldown",intensity:"tempo",benefits:"Finishing strength, race simulation, mental toughness",cycleteNotes:"Teaches finishing power when fatigued",elliptigoNotes:"Final surge requires full body engagement",effort:{heartRate:"Building to Zone 4-5 at finish",perceived:"Start controlled, finish strong"},roadConsiderations:"Plan route so final hard section is on good road surface"},{name:"Threshold Pyramid",duration:"70-85 minutes",equipment:"both",description:"Ascending and descending threshold intervals",structure:"15 min warmup + 5-7-10-7-5 min @ threshold with 3 min easy recovery + 10 min cooldown",intensity:"tempo",benefits:"Variable effort management, mental engagement, threshold development",cycleteNotes:"Varied interval lengths prevent mental monotony",elliptigoNotes:"Practice pacing across different interval durations",effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Maintain same effort despite changing durations"},roadConsiderations:"Timer-based, works on any reasonable road"},{name:"Cutdown Tempo",duration:"55-70 minutes",equipment:"both",description:"Progressively faster tempo intervals",structure:"10 min warmup + 10 min @ moderate + 8 min @ threshold + 6 min @ hard + 4 min @ very hard with 3 min recovery between + 10 min cooldown",intensity:"tempo",benefits:"Pace judgment, variable effort training, finishing power",cycleteNotes:"Progressive resistance or cadence increase",elliptigoNotes:"Combine resistance and stride adjustments",effort:{heartRate:"Building from Zone 3 \u2192 Zone 5",perceived:"Each interval harder than previous"},roadConsiderations:"Descending intervals keep mental engagement high"},{name:"Steady State Tempo",duration:"60-80 minutes",equipment:"both",description:"Extended time at threshold for endurance adaptation",structure:"15 min warmup + 30-40 min @ steady threshold + 15 min cooldown",intensity:"tempo",benefits:"Threshold endurance, mental training, race-specific work",cycleteNotes:"Long sustained natural motion builds race fitness",elliptigoNotes:"Maintain consistent form over extended effort",effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Comfortably hard for extended duration"},roadConsiderations:"Need long uninterrupted stretch, bike path or quiet country road ideal"},{name:"Tempo with Surges",duration:"55-70 minutes",equipment:"both",description:"Threshold effort with periodic hard surges",structure:"10 min warmup + 20 min @ threshold with 6 x 30 sec surges every 3 min + 10 min cooldown",intensity:"tempo",benefits:"Race simulation, surge recovery, variable pace training",cycleteNotes:"Surges mimic race attacks or traffic situations",elliptigoNotes:"Quick resistance/cadence changes develop responsiveness",effort:{heartRate:"Zone 3-4 baseline, Zone 5 during surges",perceived:"Hard base with brief very hard surges"},roadConsiderations:"Surges work well at intersections or road features"}],INTERVAL_BIKE:[{name:"Short Power Repeats",duration:"50-65 minutes",equipment:"both",description:"High-intensity short intervals for power development",structure:"15 min warmup + 10-12 x 2 min hard with 2 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"VO2max development, neuromuscular power, aerobic capacity",cycleteNotes:"Explosive power in natural motion pattern",elliptigoNotes:"Quick stride and resistance changes",effort:{heartRate:"Zone 4-5 during intervals (90-100% max HR)",perceived:"Hard effort, breathing heavy, full recovery needed"},roadConsiderations:"Timer-based, any safe road works, recovery is active (keep moving)"},{name:"Classic 5-Minute Repeats",duration:"65-80 minutes",equipment:"both",description:"VO2max intervals at hard sustainable effort",structure:"15 min warmup + 4-6 x 5 min @ VO2max with 3-4 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"Aerobic power, VO2max improvement, sustained speed work",cycleteNotes:"5 minutes allows rhythm development at high power",elliptigoNotes:"Find sustainable high resistance for full duration",effort:{heartRate:"Zone 5 (95-100% max HR)",perceived:"Very hard but sustainable for 5 minutes"},roadConsiderations:"Flat section preferred to maintain consistent power output"},{name:"Ladder Intervals",duration:"70-90 minutes",equipment:"both",description:"Variable duration intervals ascending and descending",structure:"15 min warmup + 2-3-4-5-4-3-2 min hard with equal recovery + 10 min cooldown",intensity:"intervals",benefits:"Variable effort training, mental engagement, comprehensive stimulus",cycleteNotes:"Varied durations prevent monotony",elliptigoNotes:"Adjust pacing for different interval lengths",effort:{heartRate:"Zone 4-5 during intervals",perceived:"Hard throughout, adjust effort for interval duration"},roadConsiderations:"Timer-based pyramid keeps mental focus high"},{name:"Tabata-Style Power Blasts",duration:"40-55 minutes",equipment:"both",description:"Ultra-short maximal efforts for neuromuscular power",structure:"15 min warmup + 2-3 sets of 8 x 20 sec maximal with 10 sec easy (4 min recovery between sets) + 10 min cooldown",intensity:"intervals",benefits:"Explosive power, anaerobic capacity, neuromuscular recruitment",cycleteNotes:"Explosive natural motion develops race finishing speed",elliptigoNotes:"Maximum resistance and cadence for 20 seconds",effort:{heartRate:"Zone 5+ (maximal)",perceived:"All-out effort, 10 seconds barely enough recovery"},roadConsiderations:"Need very safe road/path, minimal traffic, good surface"},{name:"Long Intervals",duration:"75-95 minutes",equipment:"both",description:"Extended hard efforts for sustained power",structure:"15 min warmup + 4-5 x 8 min hard with 4 min recovery + 15 min cooldown",intensity:"intervals",benefits:"Sustained VO2max work, mental toughness, race-specific power",cycleteNotes:"Long intervals build race-day sustained power",elliptigoNotes:"Form maintenance critical over 8-minute efforts",effort:{heartRate:"Zone 4-5 (90-95% max HR)",perceived:"Very hard, requires pacing discipline"},roadConsiderations:"8 minutes is long enough to use out-and-back landmarks"},{name:"Pyramid Power",duration:"60-75 minutes",equipment:"both",description:"Ascending and descending power intervals",structure:"15 min warmup + 1-2-3-4-3-2-1 min hard with 1 min easy recovery + 10 min cooldown",intensity:"intervals",benefits:"Variable power training, mental focus, comprehensive development",cycleteNotes:"Varied efforts keep engagement high",elliptigoNotes:"Manage effort across different durations",effort:{heartRate:"Zone 4-5",perceived:"Hard throughout, short recoveries"},roadConsiderations:"Timer-based, works anywhere safe"},{name:"Over-Under Intervals",duration:"60-75 minutes",equipment:"both",description:"Alternating just below and just above threshold",structure:"15 min warmup + 4 x 8 min (alternating 2 min @ threshold, 1 min @ VO2max) with 4 min recovery + 10 min cooldown",intensity:"intervals",benefits:"Lactate tolerance, recovery under duress, race simulation",cycleteNotes:"Teaches power management and recovery while working",elliptigoNotes:"Quick resistance changes between under/over efforts",effort:{heartRate:"Zone 3-4 during under, Zone 5 during over",perceived:"Alternating hard and very hard within same interval"},roadConsiderations:"No true recovery during 8-min blocks, need good road surface"},{name:"Fartlek Intervals",duration:"50-70 minutes",equipment:"both",description:"Unstructured speed play using landmarks and feel",structure:"15 min warmup + 20-30 min continuous riding with surges of varying duration (30 sec to 5 min) + 10 min cooldown",intensity:"intervals",benefits:"Variable pace training, mental freedom, responsive power",cycleteNotes:"Natural motion allows spontaneous surges",elliptigoNotes:"Use road features as surge cues",effort:{heartRate:"Variable Zone 2-5",perceived:"Playful hard efforts based on feel"},roadConsiderations:"Use mailboxes, signs, hills, etc. as surge markers"},{name:"30-30 Repeats",duration:"50-65 minutes",equipment:"both",description:"Equal hard and recovery for sustained intensity",structure:"15 min warmup + 3-4 sets of 10 x 30 sec hard / 30 sec easy (5 min recovery between sets) + 10 min cooldown",intensity:"intervals",benefits:"VO2max development, anaerobic capacity, efficient recovery",cycleteNotes:"Short recoveries develop resilience",elliptigoNotes:"Quick rhythm changes improve responsiveness",effort:{heartRate:"Zone 5 during hard sections",perceived:"Hard but repeatable, 30 sec recovery is enough"},roadConsiderations:"Timer-based, any safe stretch works"},{name:"Descending Intervals",duration:"65-80 minutes",equipment:"both",description:"Progressively shorter intervals at increasing intensity",structure:"15 min warmup + 5-4-3-2-1 min with effort increasing each interval (3 min recovery) x 2 sets + 10 min cooldown",intensity:"intervals",benefits:"Progressive intensity training, mental toughness, finishing power",cycleteNotes:"Teaches finishing speed when fatigued",elliptigoNotes:"Max power on final 1-minute effort",effort:{heartRate:"Building from Zone 4 \u2192 Zone 5+",perceived:"Each interval harder than previous"},roadConsiderations:"Final 1-minute effort is near-maximal"},{name:"400m Repeats",duration:"60-80 minutes",equipment:"both",description:"Short, fast intervals for speed and lactic tolerance",structure:"15 min warmup + 20 x 400m at target HR with 0:45-1:30 recovery + 10 min cooldown",intensity:"intervals",benefits:"Speed endurance, lactic tolerance, VO2max development",cycleteNotes:"Quick turnover mimics running stride frequency",elliptigoNotes:"Maintain high cadence and moderate resistance",effort:{heartRate:"Zone 4-5 (87-92% max HR)",perceived:"Hard but repeatable, recovery should feel brief"},roadConsiderations:"Can be done on track outer lanes or measured road segments"},{name:"800m Repeats",duration:"60-85 minutes",equipment:"both",description:"Classic VO2max intervals at sustained hard effort",structure:"15 min warmup + 10 x 800m at target HR with 1:00-2:00 recovery + 10 min cooldown",intensity:"intervals",benefits:"VO2max development, sustained speed, aerobic power",cycleteNotes:"Longer intervals allow rhythm and power development",elliptigoNotes:"Balance resistance and cadence for sustainable effort",effort:{heartRate:"Zone 4-5 (87-92% max HR)",perceived:"Hard sustainable effort, need full recovery between"},roadConsiderations:"Track outer lanes or 2-3 minute road segments work well"}],POWER_RESISTANCE:[{name:"Hill Power Repeats",duration:"55-70 minutes",equipment:"both",description:"Short explosive hill repeats for power development",structure:"15 min warmup + 8-10 x 2 min hard uphill with easy coast down + 10 min cooldown",intensity:"power",benefits:"Power development, muscular strength, explosive capacity",cycleteNotes:"Powerful natural motion up sustained grades",elliptigoNotes:"High resistance, explosive stride pattern",effort:{heartRate:"Zone 4-5 (90-100% max HR)",perceived:"Very hard uphill effort, easy coast down recovery"},roadConsiderations:"Need actual hill or sustained grade - 4-6% grade ideal, safe descent"},{name:"Resistance Strength Intervals",duration:"60-75 minutes",equipment:"both",description:"High resistance intervals on flat terrain",structure:"15 min warmup + 6-8 x 3 min @ high resistance with 3 min easy + 10 min cooldown",intensity:"power",benefits:"Muscular strength, grinding power, force production",cycleteNotes:"High resistance develops grinding strength",elliptigoNotes:"Maximum resistance, controlled cadence",effort:{heartRate:"Zone 4 (muscular not cardiovascular limiter)",perceived:"Legs burning, powerful effort"},roadConsiderations:"Works on flat roads - resistance creates difficulty"},{name:"Long Strength Climbs",duration:"70-90 minutes",equipment:"both",description:"Extended hill climbs for sustained power",structure:"15 min warmup + 4-6 x 5 min sustained climb with full recovery down + 10 min cooldown",intensity:"power",benefits:"Sustained climbing power, mental toughness, muscular endurance",cycleteNotes:"Extended natural motion on grades",elliptigoNotes:"Maintain form quality through long climbs",effort:{heartRate:"Zone 4 (80-90% max HR)",perceived:"Hard sustained uphill effort"},roadConsiderations:"Need sustained grade of 3-5%, safe descent for recovery"},{name:"Resistance Pyramid",duration:"65-80 minutes",equipment:"both",description:"Variable duration high-resistance intervals",structure:"15 min warmup + 2-3-4-5-4-3-2 min @ high resistance with 2 min easy + 10 min cooldown",intensity:"power",benefits:"Variable strength training, muscular endurance, mental engagement",cycleteNotes:"Varied durations with high resistance",elliptigoNotes:"Maximum resistance, controlled cadence throughout",effort:{heartRate:"Zone 3-4 (muscular effort)",perceived:"Powerful grinding effort"},roadConsiderations:"Resistance-based, works on any safe road"},{name:"Mixed Terrain Circuit",duration:"60-80 minutes",equipment:"both",description:"Repeated circuit with varied terrain challenges",structure:"15 min warmup + 4-5 laps of circuit with hills, flats, descents + 10 min cooldown",intensity:"power",benefits:"Variable terrain adaptation, comprehensive power development",cycleteNotes:"Natural motion adapts to terrain changes",elliptigoNotes:"Resistance and stride adjustments for terrain",effort:{heartRate:"Variable Zones 3-5",perceived:"Hard on climbs, recovery on descents"},roadConsiderations:"Find 2-3 mile circuit with varied terrain, good for repeats"},{name:"Hill Blasts",duration:"50-65 minutes",equipment:"both",description:"Short explosive hill repeats for power",structure:"15 min warmup + 12-15 x 1 min maximal uphill with easy recovery down + 10 min cooldown",intensity:"power",benefits:"Explosive power, anaerobic capacity, neuromuscular training",cycleteNotes:"Maximum power in natural motion",elliptigoNotes:"Explosive stride, maximum resistance",effort:{heartRate:"Zone 5 (95-100% max HR)",perceived:"Near-maximal effort, full recovery needed"},roadConsiderations:"Short steep hill ideal (6-8% grade), safe descent"},{name:"Tempo Climb",duration:"65-85 minutes",equipment:"both",description:"Sustained threshold effort on extended climb",structure:"15 min warmup + 2-3 x 15 min sustained climb @ threshold with recovery descent + 10 min cooldown",intensity:"power",benefits:"Climbing endurance, sustained power, race-specific strength",cycleteNotes:"Extended climbing in natural motion",elliptigoNotes:"Maintain consistent rhythm on long climbs",effort:{heartRate:"Zone 3-4 (80-90% max HR)",perceived:"Hard sustained climbing effort"},roadConsiderations:"Need long gradual climb (3-5% grade for 15 minutes)"},{name:"Resistance Fartlek",duration:"55-70 minutes",equipment:"both",description:"Playful variable resistance efforts",structure:"15 min warmup + 25-35 min continuous with surges at varying resistance levels + 10 min cooldown",intensity:"power",benefits:"Variable power training, responsive strength, mental engagement",cycleteNotes:"Quick resistance changes develop versatility",elliptigoNotes:"Play with resistance and stride combinations",effort:{heartRate:"Variable Zones 2-5",perceived:"Playful hard efforts with varying resistance"},roadConsiderations:"Use terrain features to vary resistance naturally"},{name:"Hill Sprint Repeats",duration:"50-65 minutes",equipment:"both",description:"Short explosive sprints up moderate hill for power and lactic tolerance",structure:"15 min warmup + 8-12 x 0:30 sprint up 4-6% grade with 1:30 coast down recovery + 10 min cooldown",intensity:"power",benefits:"Explosive power, motor recruitment, lactic acid tolerance, posterior chain strength",cycleteNotes:"Maximum power output in natural running motion up hill",elliptigoNotes:"High resistance, explosive stride, full body engagement",effort:{heartRate:"Zone 5+ (100% max HR)",perceived:"Maximum effort, fighting lactic acid by end of session"},roadConsiderations:"Need consistent 4-6% grade hill with safe descent for recovery"},{name:"Power Sprint Buildups",duration:"55-70 minutes",equipment:"both",description:"High-end lactate workout with buildup into maximum sprint",structure:"15 min warmup + 3-5 x (200m buildup into 400m max sprint) with full recovery + 10 min cooldown",intensity:"power",benefits:"Maximum power development, lactic tolerance, sprint speed",cycleteNotes:"Progressive acceleration into all-out sprint effort",elliptigoNotes:"Build through gears, max resistance and cadence on sprint",effort:{heartRate:"Zone 5+ on sprint (100% max HR)",perceived:"Maximum sprint effort, stop when 400m time drops 3+ seconds"},roadConsiderations:"Need flat safe stretch, full recovery between efforts (3-5 min)"},{name:"Steady State Hill Climb",duration:"60-90 minutes",equipment:"both",description:"Continuous climb for sustained threshold and mental toughness",structure:"10 min easy warmup on flat + 60-90 min continuous climb @ steady effort (no coasting)",intensity:"power",benefits:"Aerobic threshold development, muscular endurance, mental toughness, climbing strength",cycleteNotes:"Extended natural motion climb builds race-specific fitness",elliptigoNotes:"Focus on high turnover in lower gears (3-5), maintain rhythm",effort:{heartRate:"Zone 3-4 (80-90% max HR sustained)",perceived:"Steady hard effort, forced to stay engaged throughout"},roadConsiderations:"Need long consistent 5-10% grade climb - canyon roads or mountain climbs ideal"}],LONG_ENDURANCE_RIDES:[{name:"Progressive Long Ride",duration:"90-180 minutes",equipment:"both",description:"Start easy, gradually build to moderate-hard finish",structure:"First 70% @ easy conversational pace, final 30% @ moderate-hard effort",intensity:"long",benefits:"Progressive endurance, finishing strength, aerobic development",cycleteNotes:"Natural motion allows smooth effort progression",elliptigoNotes:"Gradually increase resistance through ride",effort:{heartRate:"Starting Zone 2, finishing Zone 3-4",perceived:"Starting easy, finishing strong"},roadConsiderations:"Plan route with good roads for harder finish"},{name:"Steady State Long Ride",duration:"90-180 minutes",equipment:"both",description:"Maintain consistent aerobic pace throughout",structure:"After warmup, maintain steady moderate effort for full duration",intensity:"long",benefits:"Aerobic endurance, consistent pacing, mental discipline",cycleteNotes:"Excellent for building aerobic base",elliptigoNotes:"Find sustainable rhythm and maintain it",effort:{heartRate:"Zone 2-3 (70-80% max HR)",perceived:"Steady, sustainable, conversational"},roadConsiderations:"Longer rides need route planning, hydration, nutrition"},{name:"Fast Finish Long Ride",duration:"90-150 minutes",equipment:"both",description:"Easy-moderate ride with strong final portion",structure:"First 80% @ easy-moderate, final 20% @ threshold effort",intensity:"long",benefits:"Finishing strength when fatigued, race simulation, mental toughness",cycleteNotes:"Teaches racing speed when tired",elliptigoNotes:"Strong finish requires full body engagement",effort:{heartRate:"Zone 2-3, finishing Zone 4",perceived:"Comfortable becoming hard at finish"},roadConsiderations:"Plan route so final hard section is on good road"},{name:"Negative Split Long Ride",duration:"90-150 minutes",equipment:"both",description:"Second half faster than first half",structure:"Ride out easy-moderate, return moderate-hard (same route out/back)",intensity:"long",benefits:"Pacing discipline, progressive endurance, race strategy practice",cycleteNotes:"Natural motion allows controlled pace progression",elliptigoNotes:"Monitor effort - start conservative",effort:{heartRate:"Zone 2-3 out, Zone 3-4 back",perceived:"Starting controlled, finishing strong"},roadConsiderations:"Out-and-back route ideal for comparison"},{name:"Variable Terrain Long Ride",duration:"100-180 minutes",equipment:"both",description:"Extended ride over varied terrain",structure:"Mix of flats, rollers, climbs at moderate overall effort",intensity:"long",benefits:"Terrain adaptation, comprehensive fitness, real-world preparation",cycleteNotes:"Natural motion handles terrain changes well",elliptigoNotes:"Adjust resistance and stride for terrain",effort:{heartRate:"Variable Zone 2-4 depending on terrain",perceived:"Moderate overall with terrain-driven variations"},roadConsiderations:"Choose hilly or rolling route for natural variation"},{name:"Out-and-Back Endurance",duration:"90-180 minutes",equipment:"both",description:"Simple out-and-back at steady aerobic pace",structure:"Ride to turnaround point, return at same effort level",intensity:"long",benefits:"Aerobic base, simple execution, mental simplicity",cycleteNotes:"Straightforward endurance building",elliptigoNotes:"Maintain consistent effort regardless of wind",effort:{heartRate:"Zone 2-3 (70-80% max HR)",perceived:"Steady, sustainable throughout"},roadConsiderations:"Single good road with turnaround point, watch for wind direction"},{name:"Long Ride with Tempo Finish",duration:"100-180 minutes",equipment:"both",description:"Aerobic ride with sustained threshold finish",structure:"Long easy-moderate ride + final 20-30 min @ threshold effort",intensity:"long",benefits:"Race-specific endurance, finishing power, mental toughness",cycleteNotes:"Builds race-day finishing strength",elliptigoNotes:"Strong finish after long aerobic work",effort:{heartRate:"Zone 2-3, finishing Zone 4",perceived:"Comfortable becoming hard"},roadConsiderations:"Plan route for good finish roads"},{name:"Exploration Ride",duration:"90-180 minutes",equipment:"both",description:"Easy-moderate exploration of new routes",structure:"Relaxed pace, enjoy scenery, build time on equipment",intensity:"long",benefits:"Aerobic base, mental freshness, route discovery",cycleteNotes:"Great way to find new training routes",elliptigoNotes:"Enjoy the ride quality and scenery",effort:{heartRate:"Zone 1-2 (60-75% max HR)",perceived:"Easy, conversational, enjoyable"},roadConsiderations:"Explore new roads/paths, have phone/GPS for navigation"}],AEROBIC_BASE:[{name:"Conversational Pace Cruise",duration:"45-120 minutes",equipment:"both",description:"Long steady effort at conversational intensity",structure:"Maintain steady effort throughout, should be able to hold conversation",intensity:"easy",benefits:"Aerobic base building, fat adaptation, endurance",cycleteNotes:"Excellent for long distance preparation, very running-like feel",elliptigoNotes:"Use moderate stride length, focus on smooth rhythm",effort:{heartRate:"Zone 1-2 (65-75% max HR)",perceived:"Easy, conversational effort"}},{name:"Recovery Ride",duration:"30-60 minutes",equipment:"both",description:"Very easy effort for active recovery",structure:"Easy riding, minimal resistance, focus on movement quality",intensity:"recovery",benefits:"Active recovery, blood flow, movement practice",cycleteNotes:"Perfect for recovery days, gentle fluid motion",elliptigoNotes:"Ideal for joint mobility and muscle activation",effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Very easy, relaxed effort"}}],TECHNIQUE_SPECIFIC:[{name:"Movement Development",duration:"35-50 minutes",equipment:"both",description:"Focus on optimal movement pattern and efficiency",structure:"15 min warmup + 4-6 x 5 min varied effort focus + 10 min cooldown",intensity:"easy to moderate",benefits:"Movement efficiency, technique improvement, neuromuscular training",cycleteNotes:"Perfect natural motion at all efforts",elliptigoNotes:"Practice stride length adjustments with effort changes",effort:{heartRate:"Zone 1-3 varied (65-85% max HR)",perceived:"Easy to moderate varied efforts"}},{name:"Form Focus Session",duration:"40-60 minutes",equipment:"both",description:"Technical session emphasizing movement quality",structure:"Extended warmup + form drills + easy-moderate effort with technique focus",intensity:"easy to moderate",benefits:"Movement quality, efficiency, injury prevention",cycleteNotes:"Focus on smooth natural pattern, avoid bouncing",elliptigoNotes:"Emphasize full stride extension and smooth upper body motion",techniques:{cyclete:["Smooth natural motion","Avoid upper body tension","Focus on forward drive"],elliptigo:["Full stride extension","Coordinated arm swing","Stable core engagement"]}}],RECOVERY_SPECIFIC:[{name:"Active Recovery Flow",duration:"30-45 minutes",equipment:"both",description:"Gentle movement for recovery days",structure:"Very easy effort throughout, focus on movement quality",intensity:"recovery",benefits:"Blood flow, active recovery, movement maintenance",cycleteNotes:"Gentle natural motion perfect for recovery",elliptigoNotes:"Low-impact full body movement aids recovery",effort:{heartRate:"Zone 1 (60-70% max HR)",perceived:"Very easy, relaxed recovery effort"}},{name:"Injury Prevention Session",duration:"25-40 minutes",equipment:"both",description:"Low-intensity session for injury-prone periods",structure:"Extended warmup + very easy effort + extended cooldown",intensity:"recovery",benefits:"Maintains fitness while allowing healing, joint mobility",cycleteNotes:"Zero-impact alternative when running not possible",elliptigoNotes:"Gentle full-body movement without ground impact"}]}}prescribeStandUpBikeWorkout(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{duration:r=null,experience:i="intermediate",targetDistance:o=null,hasGarmin:a=!0}=n;let l=null,c=null;for(const[s,f]of Object.entries(this.workoutLibrary)){const n=f.find(n=>(n.name.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(n.name.toLowerCase()))&&(n.equipment===t||"both"===n.equipment));if(n){l=n,c=s;break}}if(!l)throw new Error('Workout "'.concat(e,'" not found for ').concat(t));const u=this.equipmentSpecs[t];let d=l.name,h=l.description,p=null;if(o)if(p=o,a)d="".concat(p," RunEQ Miles - ").concat(l.name),h="Ride until your Garmin shows ".concat(p," RunEQ miles - ").concat(l.description);else{const e=Math.round(3*p),t=Math.round(9*p);d="".concat(t," min / ~").concat(e," mi - ").concat(l.name),h="Ride for approximately ".concat(t," minutes or ").concat(e," miles - ").concat(l.description)}return(0,s.A)((0,s.A)({},l),{},{name:d,description:h,category:c,equipmentSpec:u,prescribedRunEqMiles:p,garminNote:"Ride until your Garmin RunEQ data field shows the prescribed RunEQ miles. Your actual bike distance will vary based on your riding intensity.",equipmentSpecificNotes:this.getEquipmentNotes(l,t),safetyGuidance:this.getSafetyGuidance(t,l),alternatives:this.getAlternatives(t,l),progressions:this.getProgressions(l,i)})}getGarminDataFieldNote(){return{title:"RunEQ Garmin Data Field",description:"Install the companion Garmin data field to see your RunEQ miles in real-time while riding",how_it_works:"The data field automatically converts your riding distance to running equivalency based on YOUR riding intensity",why_it_matters:"Everyone rides differently - prescribing actual bike miles would be inaccurate. RunEQ miles ensure equivalent training stimulus regardless of how hard you ride.",example:"If prescribed 5 RunEQ miles: A harder rider might complete it in 12 actual bike miles. An easier rider might need 14 actual bike miles. Both get the same training effect."}}getEquipmentNotes(e,t){var n,r;return"cyclete"===t?{motion:"Focus on smooth natural motion pattern",strengths:e.cycleteNotes||"Excellent running simulation",effort:(null===(n=e.effort)||void 0===n?void 0:n.heartRate)||"Monitor by heart rate or perceived effort"}:{motion:"Utilize full stride length and upper body engagement",strengths:e.elliptigoNotes||"Full-body workout with adjustable stride",effort:(null===(r=e.effort)||void 0===r?void 0:r.heartRate)||"Monitor by heart rate or perceived effort"}}getSafetyGuidance(e,t){const n=["Start with proper warmup to prepare for stand-up motion","Focus on smooth, controlled movement throughout","Stay hydrated, especially during longer sessions"];return"cyclete"===e?n.push("Maintain natural natural motion, avoid forcing the pattern","Keep upper body relaxed to allow efficient power transfer"):n.push("Adjust stride length appropriately for intensity level","Coordinate upper and lower body movement smoothly","Use handles for balance, not to pull yourself forward"),"interval"!==t.intensity&&"tempo"!==t.intensity||n.push("Monitor effort level - equipment amplifies intensity compared to running"),n}getAlternatives(e,t){return{weatherOptions:{indoor:"elliptigo"===e?"elliptiGO can be used on indoor trainer":"cyclete is outdoor-specific",outdoor:"Both excellent for outdoor training in various conditions"},intensityAdjustments:{tooHard:"Reduce resistance or effort level, maintain smooth motion",tooEasy:"Increase resistance or effort level, extend duration",injury:"Both are excellent low-impact alternatives to running"},durationMods:{timeConstraint:"Focus on quality intervals, maintain warmup/cooldown",extended:"Both platforms excel at longer endurance sessions"}}}getProgressions(e,t){const n={beginner:"Start conservative, focus on movement quality over intensity",intermediate:"Standard prescription as written",advanced:"Can extend duration or add complexity to intervals"};return"interval"===e.intensity&&(n.weeklyProgression="Week 1: Shorter intervals, Week 2-3: Build, Week 4: Recovery"),n[t]}getWorkoutsForEquipment(e){const t=[];for(const[n,r]of Object.entries(this.workoutLibrary))for(const i of r)i.equipment!==e&&"both"!==i.equipment||t.push((0,s.A)((0,s.A)({},i),{},{category:n}));return t}getCategories(){return Object.keys(this.workoutLibrary)}searchWorkouts(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[],r=e.toLowerCase();for(const[i,o]of Object.entries(this.workoutLibrary))for(const e of o)t&&e.equipment!==t&&"both"!==e.equipment||(e.name.toLowerCase().includes(r)||e.description.toLowerCase().includes(r)||e.benefits.toLowerCase().includes(r))&&n.push((0,s.A)((0,s.A)({},e),{},{category:i}));return n}}var qe=n(578);class He{constructor(){this.hillLibrary=new Be,this.tempoLibrary=new Le,this.intervalLibrary=new We,this.longRunLibrary=new Ue,this.standUpBikeLibrary=new ze,this.paceCalculator=new qe.O,this.planTemplates={"5K":{weeksRecommended:8,runsPerWeek:[3,4,5],focusAreas:["speed","vo2max","lactateThreshold"],workoutDistribution:{intervals:30,tempo:25,hills:20,longRuns:25},peakWeeklyMileage:[15,25,35],longRunMax:[8,10,12]},"10K":{weeksRecommended:10,runsPerWeek:[3,4,5,6],focusAreas:["vo2max","lactateThreshold","aerobicPower"],workoutDistribution:{intervals:25,tempo:30,hills:20,longRuns:25},peakWeeklyMileage:[20,30,40,50],longRunMax:[10,12,15,18]},Half:{weeksRecommended:12,runsPerWeek:[4,5,6,7],focusAreas:["lactateThreshold","aerobicPower","endurance"],workoutDistribution:{intervals:20,tempo:35,hills:20,longRuns:25},peakWeeklyMileage:[25,35,45,55],longRunMax:[13,15,18,20]},Marathon:{weeksRecommended:16,runsPerWeek:[4,5,6,7],focusAreas:["endurance","lactateThreshold","aerobicPower"],workoutDistribution:{intervals:15,tempo:30,hills:20,longRuns:35},peakWeeklyMileage:[35,45,60,70],longRunMax:[20,22,24,26]}},this.trainingPhases={base:{name:"Base Building",focus:"Aerobic development, easy miles",workoutIntensity:"low",longRunEmphasis:"easy",hillFocus:"long_strength"},build:{name:"Build Phase",focus:"Lactate threshold, tempo work",workoutIntensity:"moderate",longRunEmphasis:"progressive",hillFocus:"medium_vo2"},peak:{name:"Peak/Sharpening",focus:"Race-specific speed and power",workoutIntensity:"high",longRunEmphasis:"raceSimulation",hillFocus:"short_power"},taper:{name:"Taper",focus:"Maintain fitness, reduce volume",workoutIntensity:"moderate",longRunEmphasis:"traditional_easy",hillFocus:"short_power"}}}generateTrainingPlan(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{raceDistance:t="10K",raceTime:n=null,raceDate:r=null,currentPaces:i=null,runsPerWeek:o=4,runEqPreference:a=0,weeksAvailable:l=null,experienceLevel:c,standUpBikeType:u=null,runningStatus:d="active",currentWeeklyMileage:h=null,hasGarmin:p=!0,availableDays:f=null,hardSessionDays:m=null,longRunDay:g=null,preferredBikeDays:y=null,startDay:v=null}=e;Me.log("\ud83c\udfc3 Training Plan Generator Options:"),Me.log("  runningStatus:",d),Me.log("  currentWeeklyMileage:",h),Me.log("  availableDays:",f),Me.log("  hardSessionDays:",m),Me.log("  longRunDay:",g),Me.log("  preferredBikeDays:",y);const b=this.planTemplates[t];if(!b)throw new Error("Race distance ".concat(t," not supported"));let w=null,k=null,x=null;if(i)x=i,Me.log("\ud83d\udcca Using provided current paces");else{if(!n)throw new Error("Either currentPaces or raceTime must be provided");{const r=e.currentRaceDistance||t;if(Me.log("\ud83c\udfaf Calculating GOAL paces: ".concat(r," in ").concat(n)),k=this.paceCalculator.calculateFromGoal(r,n),Me.log("  Goal paces:",k.paces),h||e.currentLongRunDistance){const t=parseInt(e.currentLongRunDistance)||0,n=parseInt(h)||0;Me.log("\ud83d\udcca Estimating CURRENT fitness from:"),Me.log("   Long run: ".concat(t," miles")),Me.log("   Weekly mileage: ".concat(n," miles")),w=this.paceCalculator.calculateFromCurrentFitness(t,n,r),Me.log("  Current fitness paces:",w.paces),Me.log("  \ud83d\udcc8 Progressive training: Week 1 at current fitness \u2192 Final week at goal pace"),x={current:w,goal:k,useProgression:!0}}else console.warn("\u26a0\ufe0f No current fitness data provided - using goal paces from Week 1"),console.warn("   This may prescribe paces that are too fast for current fitness level"),x=k}}const S=l||b.weeksRecommended,E=this.calculateWeeklyStructure(b,o,c,f,m,g,y,h,v),T=this.createPeriodization(S,t),C=[];for(let s=1;s<=S;s++){const e=this.generateWeekPlan(s,S,b,E,T,x,a,c,u,d,p);C.push(e)}if(r&&C.length>0){const e=C[C.length-1],n=E.longRunDay||"Saturday";Me.log("\ud83c\udfc1 Race Day Feature:"),Me.log("  Race Date:",r),Me.log("  Long Run Day Name:",n),Me.log("  Final Week Workouts:",e.workouts.map(e=>{var t;return{day:e.day,type:e.type,distance:e.distance,workoutName:null===(t=e.workout)||void 0===t?void 0:t.name}}));let i=e.workouts.findIndex(e=>"longRun"===e.type);if(Me.log("  Strategy 1 (type=longRun): index =",i),-1===i&&(i=e.workouts.findIndex(e=>e.day===n),Me.log("  Strategy 2 (day="+n+"): index =",i)),-1===i){let t=0;e.workouts.forEach((e,n)=>{"rest"!==e.type&&e.distance>t&&(t=e.distance,i=n)}),Me.log("  Strategy 3 (longest distance): index =",i)}if(-1!==i){const n=this.generateRaceDayWorkout(t,r);Me.log("  Replacing workout at index",i,"with Race Day"),Me.log("  Old workout:",e.workouts[i]),e.workouts[i]={day:e.workouts[i].day,type:n.type,distance:n.distance,focus:n.focus,workout:{name:n.name,description:n.description,structure:n.structure,about:n.about,notes:n.notes,equipment:n.equipment}},Me.log("  New workout:",e.workouts[i]),Me.log("\u2705 Race Day workout added to final week on ".concat(e.workouts[i].day))}else console.error("\u274c Could not find suitable workout to replace with Race Day in final week!"),console.error("   This is a bug - please report this issue")}else r||Me.log("\u2139\ufe0f No race date provided - skipping Race Day feature");return{planOverview:(0,s.A)({raceDistance:t,raceTime:n,runsPerWeek:o,totalWeeks:S,runEqPreference:a,experienceLevel:c,standUpBikeType:u},x.useProgression&&{paceProgression:{currentFitnessPaces:x.current.paces,goalPaces:x.goal.paces,strategy:"Progressive blending from current fitness to goal paces"}}),trainingPaces:x.useProgression?x.goal.paces:x.paces||x,currentFitnessPaces:x.useProgression?x.current.paces:null,trackIntervals:x.useProgression?x.goal.trackIntervals:x.trackIntervals||null,periodization:T,weeklyStructure:E,weeks:C,planSummary:this.generatePlanSummary(C,b)}}calculateWeeklyStructure(e,t,n,r,i,o,a,s,l){const c=e.runsPerWeek.indexOf(t);if(-1===c)throw new Error("".concat(t," runs per week not supported for this distance"));Me.log("\ud83d\udcca calculateWeeklyStructure received:"),Me.log("  hardSessionDays:",i),Me.log("  availableDays:",r),Me.log("  longRunDay:",o),Me.log("  preferredBikeDays:",a),Me.log("  currentWeeklyMileage:",s);const u={runsPerWeek:t,peakMileage:e.peakWeeklyMileage[c],longRunMax:e.longRunMax[c],currentWeeklyMileage:s,availableDays:r||this.getDefaultAvailableDays(t),hardSessionDays:i||[],longRunDay:o||"Saturday",preferredBikeDays:a||[],restDays:7-t,startDay:l};return u.easyDays=u.availableDays.filter(e=>!u.hardSessionDays.includes(e)&&!u.preferredBikeDays.includes(e)&&e!==u.longRunDay),"beginner"===n?(u.peakMileage*=.8,u.longRunMax*=.9):"advanced"===n&&(u.peakMileage*=1.15,u.longRunMax*=1.1),u}getDefaultAvailableDays(e){const t={3:["Monday","Wednesday","Saturday"],4:["Monday","Wednesday","Friday","Saturday"],5:["Monday","Wednesday","Thursday","Friday","Saturday"],6:["Monday","Tuesday","Wednesday","Friday","Saturday","Sunday"],7:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]};return t[e]||t[4]}createPeriodization(e,t){const n=[],r=Math.max(2,Math.ceil(.1*e));if(e<=8){const t=e-r;n.push({phase:"base",weeks:Math.ceil(.5*t)}),n.push({phase:"build",weeks:Math.floor(.35*t)}),n.push({phase:"peak",weeks:Math.floor(.15*t)}),n.push({phase:"taper",weeks:r})}else if(e<=12){const t=e-r;n.push({phase:"base",weeks:Math.ceil(.45*t)}),n.push({phase:"build",weeks:Math.ceil(.35*t)}),n.push({phase:"peak",weeks:Math.floor(.2*t)}),n.push({phase:"taper",weeks:r})}else{const t=e-r;n.push({phase:"base",weeks:Math.ceil(.4*t)}),n.push({phase:"build",weeks:Math.ceil(.35*t)}),n.push({phase:"peak",weeks:Math.floor(.25*t)}),n.push({phase:"taper",weeks:r})}let i=0;return n.forEach(e=>{e.startWeek=i+1,e.endWeek=i+e.weeks,i+=e.weeks}),n}generateWeekPlan(e,t,n,r,i,o,a,s,l){let c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"active",u=!(arguments.length>10&&void 0!==arguments[10])||arguments[10];this.workoutHistory||(this.workoutHistory={intervals:[],tempo:[],hills:[]});const d=i.find(t=>e>=t.startWeek&&e<=t.endWeek);let h;d&&(d.weekInPhase=e-d.startWeek+1),o.useProgression?(h=this.paceCalculator.blendPaces(o.current,o.goal,e,t),Me.log("\ud83c\udfaf Week ".concat(e," pace blend: ").concat(Math.round(100*h.progressionRatio),"% toward goal"))):h=o;const p=e%4===0&&e<t-2,f=r.currentWeeklyMileage||Math.round(.5*r.peakMileage),m=t-2;let g;if(Me.log("\ud83d\udcd0 Week ".concat(e," mileage calculation:"),{weekNumber:e,weekNumberType:typeof e,startingMileage:f,peakMileage:r.peakMileage,buildWeeks:m,checkWeek1:1===e,currentWeeklyMileage:r.currentWeeklyMileage}),1===e)g=f,Me.log("   \u2705 Week 1 detected - using startingMileage: ".concat(g));else if(e>=t-1)g=Math.round(r.peakMileage*(e===t?.6:.7));else if(p){const t=f+(r.peakMileage-f)*(e/m);g=Math.round(.75*t)}else g=Math.round(f+(r.peakMileage-f)*(e/m));Me.log("\ud83d\udcc5 Week ".concat(e,": ").concat(g," miles (start: ").concat(f,", peak: ").concat(r.peakMileage,", isRest: ").concat(p,", phase: ").concat(d.phase,")"));const y=this.generateWeekWorkouts(r.runsPerWeek,g,d,n,h,a,s,e,t,l,r,c,u);return{week:e,phase:d.phase,isRestWeek:p,totalMileage:g,workouts:y,weekFocus:this.getWeekFocus(d.phase,n.focusAreas),notes:this.generateWeekNotes(d.phase,p,e,t)}}generateWeekWorkouts(e,t,n,r,i,o,a,s,l,c,u){let d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"active",h=!(arguments.length>12&&void 0!==arguments[12])||arguments[12];const p=[],f=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],{availableDays:m,hardSessionDays:g,longRunDay:y,preferredBikeDays:v,easyDays:b}=u;Me.log("\n\ud83d\uddd3\ufe0f Week ".concat(s," Workout Generation:")),Me.log("  runningStatus:",d),Me.log("  availableDays:",m),Me.log("  hardSessionDays:",g),Me.log("  longRunDay:",y),Me.log("  preferredBikeDays:",v),Me.log("  easyDays:",b);const w=this.calculateLongRunDistance(t,e),k=t-w,x=Math.round(k/(e-1)),S=e=>{switch(e){case"tempo":return Math.round(1.4*x);case"intervals":return Math.round(1.25*x);case"hills":return Math.round(1.2*x);case"bike":case"recovery":return Math.round(.8*x);default:return x}};let E=0;const T=u.startDay,C=1===s&&T?f.slice(f.indexOf(T)):f;return Me.log("\ud83d\udcc5 Week ".concat(s," - Generating workouts for:"),C.join(", ")),C.forEach(e=>{if(Me.log("\n  \ud83d\udccd Processing ".concat(e,":")),Me.log("     availableDays.includes('".concat(e,"'):"),m.includes(e)),Me.log("     hardSessionDays.includes('".concat(e,"'):"),g.includes(e)),Me.log("     preferredBikeDays.includes('".concat(e,"'):"),v.includes(e)),Me.log("     day === longRunDay ('".concat(y,"'):"),e===y),!m.includes(e))return Me.log("     \u26d4 Result: REST DAY (not in availableDays)"),void p.push({day:e,type:"rest",workout:{name:"Rest Day",description:"Complete rest or light cross-training"},distance:0,focus:"Recovery"});if(e===y)if("bikeOnly"===d)Me.log("     \u2705 Result: LONG BIKE RIDE (bike-only mode)"),p.push({day:e,type:"bike",workout:this.selectStandUpBikeWorkout("long_endurance",n,c,w,h),distance:w,focus:"Endurance",equipmentSpecific:!0});else{Me.log("     \u2705 Result: LONG RUN");const t=i.paces||i;p.push({day:e,type:"longRun",workout:this.selectLongRunWorkout(n,w,o,t),distance:w,focus:"Endurance"})}else if(g.includes(e)&&v.includes(e)&&c&&(s!==l-1||"taper"!==n.phase)){Me.log("     \u2705 Result: HARD BIKE SESSION (hard day + bike day, hardSessionIndex: ".concat(E,")"));const t=["tempo","intervals","aerobic_power"],r=t[E%t.length],i=S(r);p.push({day:e,type:"bike",workout:this.selectStandUpBikeWorkout(r,n,c,i,h),distance:i,focus:"tempo"===r?"Lactate Threshold":"Speed & Power",equipmentSpecific:!0}),E++}else if(!g.includes(e)||s===l-1&&"taper"===n.phase)if(v.includes(e)&&c){Me.log("     \u2705 Result: BIKE DAY");const t="aerobic_base",r=S("bike");p.push({day:e,type:"bike",workout:this.selectStandUpBikeWorkout(t,n,c,r),distance:r,focus:"Aerobic Base",equipmentSpecific:!0})}else if("bikeOnly"===d){Me.log("     \u2705 Result: EASY BIKE RIDE (bike-only mode)");const t=S("recovery");p.push({day:e,type:"bike",workout:this.selectStandUpBikeWorkout("recovery",n,c,t),distance:t,focus:"Recovery",equipmentSpecific:!0})}else{Me.log("     \u2705 Result: EASY RUN");const t=i.paces||i,n=S("easy");p.push({day:e,type:"easy",workout:this.generateEasyRun(n,o,t),distance:n,focus:"Recovery"})}else if("bikeOnly"===d){Me.log("     \u2705 Result: HARD BIKE SESSION (bike-only mode, hardSessionIndex: ".concat(E,")"));const t=["tempo","intervals","aerobic_power"],r=t[E%t.length],i=S(r);p.push({day:e,type:"bike",workout:this.selectStandUpBikeWorkout(r,n,c,i,h),distance:i,focus:"tempo"===r?"Lactate Threshold":"Speed & Power",equipmentSpecific:!0}),E++}else{Me.log("     \u2705 Result: HARD RUN SESSION (hardSessionIndex: ".concat(E,")"));const t=this.selectWorkoutType(E,n,r),a=S(t);p.push({day:e,type:t,workout:this.selectQualityWorkout(t,n,a,o,i,s,l),distance:a,focus:this.getWorkoutFocus(t)}),E++}}),p}selectWorkoutType(e,t,n){this.trainingPhases[t.phase];const r=t.weekInPhase||1,i=r/(t.endWeek-t.startWeek+1);let o;switch(t.phase){case"base":o=r<=3?["tempo","hills","tempo"]:r<=5?["tempo","hills","intervals"]:["tempo","intervals","hills"];break;case"build":o=i<.5?["tempo","intervals","hills"]:["intervals","tempo","hills"];break;case"peak":o=["intervals","tempo","intervals"];break;case"taper":o=["tempo","intervals"];break;default:o=["tempo","intervals","hills"]}return o[e%o.length]}selectQualityWorkout(e,t,n,r,i,o,a){this.trainingPhases[t.phase];const s=i.paces||i,l=i.trackIntervals||null;switch(e){case"hills":return this.selectHillWorkout(t,r,s,o,a);case"tempo":return this.selectTempoWorkout(t,r,s,o,a);case"intervals":return this.selectIntervalWorkout(t,r,s,l,o,a);default:return this.generateEasyRun(n,r,s)}}selectHillWorkout(e,t,n,r,i){const o=this.trainingPhases[e.phase].hillFocus,a=this.hillLibrary.getWorkoutsByCategory(o);if(0===a.length){const e=Object.values(this.hillLibrary.workoutLibrary).flat(),r=this.selectWorkoutAvoidingRepetition(e,"hills");return this.hillLibrary.prescribeHillWorkout(r.name,{runEqPreference:t,paces:n})}const s=this.selectWorkoutAvoidingRepetition(a,"hills");return this.hillLibrary.prescribeHillWorkout(s.name,{runEqPreference:t,paces:n})}selectTempoWorkout(e,t,n,r,i){this.trainingPhases[e.phase];const o={base:"TRADITIONAL_TEMPO",build:"TEMPO_INTERVALS",peak:"RACE_SPECIFIC",taper:"ALTERNATING_TEMPO"}[e.phase],a=this.tempoLibrary.getWorkoutsByCategory(o),s=this.selectWorkoutAvoidingRepetition(a,"tempo");return this.tempoLibrary.prescribeTempoWorkout(s.name,{runEqPreference:t,paces:n})}selectIntervalWorkout(e,t,n,r,i,o){this.trainingPhases[e.phase];const a={base:"LONG_INTERVALS",build:"VO2_MAX",peak:"SHORT_SPEED",taper:"MIXED_INTERVALS"}[e.phase],s=this.intervalLibrary.getWorkoutsByCategory(a),l=this.selectWorkoutAvoidingRepetition(s,"intervals"),c=this.calculateSpecificReps(l.repetitions,i,o);return this.intervalLibrary.prescribeIntervalWorkout(l.name,{runEqPreference:t,paces:n,trackIntervals:r,specificReps:c})}selectLongRunWorkout(e,t,n,r){const i={easy:"TRADITIONAL_EASY",progressive:"PROGRESSIVE_RUNS",raceSimulation:"RACE_SIMULATION",traditional_easy:"TRADITIONAL_EASY"}[this.trainingPhases[e.phase].longRunEmphasis]||"TRADITIONAL_EASY",o=this.longRunLibrary.getWorkoutsByCategory(i),a=o[Math.floor(Math.random()*o.length)];return this.longRunLibrary.prescribeLongRunWorkout(a.name,{runEqPreference:n,distance:t,paces:r})}generateEasyRun(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r={optionA:"Full easy running",optionB:"First half running, second half stand-up bike",optionC:"Full stand-up bike (2x time conversion)",recommendation:t>=50?"Split or full bike workout":"Full running"};let i="".concat(e," miles at easy pace"),o="Conversational pace, aerobic base building";return n&&n.easy&&(i="".concat(e," miles at easy pace (").concat(n.easy.min,"-").concat(n.easy.max,"/mile)"),o="Conversational pace (".concat(n.easy.min,"-").concat(n.easy.max,"/mile), aerobic base building")),{name:"Easy Run",description:o,structure:i,intensity:"easy",benefits:"Aerobic development, recovery, base building",runEqOptions:r,paces:n,notes:"Should feel refreshed after this run, not fatigued"}}calculateLongRunDistance(e,t){const n=t<=4?.35:.3;return Math.round(e*n)}getWorkoutFocus(e){return{hills:"Power & Strength",tempo:"Lactate Threshold",intervals:"VO2 Max & Speed",easy:"Aerobic Base",longRun:"Endurance"}[e]||"General Fitness"}getWeekFocus(e,t){const n=this.trainingPhases[e];return"".concat(n.name,": ").concat(n.focus)}generateWeekNotes(e,t,n,r){const i=[];t&&i.push("RECOVERY WEEK: Reduced volume to allow adaptation and recovery");const o=this.trainingPhases[e];return i.push("Focus: ".concat(o.focus)),"peak"===e&&n>r-4&&i.push("Peak phase: Focus on race-specific workouts and maintaining sharpness"),"taper"===e&&i.push("Taper phase: Maintain intensity but reduce volume for race readiness"),i}generatePlanSummary(e,t){const n=e.reduce((e,t)=>e+t.workouts.filter(e=>"rest"!==e.type).length,0),r=e.reduce((e,t)=>(t.workouts.forEach(t=>{e[t.type]=(e[t.type]||0)+1}),e),{}),i=e.reduce((e,t)=>e+t.totalMileage,0);return{totalWorkouts:n,totalMiles:i,workoutBreakdown:r,averageWeeklyMiles:Math.round(i/e.length),peakWeekMiles:Math.max(...e.map(e=>e.totalMileage)),varietyScore:Object.keys(r).length}}selectWorkoutAvoidingRepetition(e,t){if(!e||0===e.length)throw new Error("No workouts available for type: ".concat(t));if(e.length<=2){const n=this.workoutHistory[t][this.workoutHistory[t].length-1],r=e.filter(e=>e.name!==n);if(r.length>0){const e=r[Math.floor(Math.random()*r.length)];return this.workoutHistory[t].push(e.name),e}const i=e[Math.floor(Math.random()*e.length)];return this.workoutHistory[t].push(i.name),i}const n=this.workoutHistory[t].slice(-2),r=e.filter(e=>!n.includes(e.name));if(0===r.length){this.workoutHistory[t]=[];const n=e[Math.floor(Math.random()*e.length)];return this.workoutHistory[t].push(n.name),n}const i=r[Math.floor(Math.random()*r.length)];return this.workoutHistory[t].push(i.name),this.workoutHistory[t].length>5&&this.workoutHistory[t].shift(),i}calculateSpecificReps(e,t,n){const r=e.match(/(\d+)-(\d+)/);if(!r)return e;const i=parseInt(r[1],10),o=parseInt(r[2],10),a=Math.min(1,t/(.75*n)),s=Math.round(i+a*(o-i));return e.replace(/(\d+)-(\d+)/,s.toString())}selectStandUpBikeWorkoutType(e,t,n){this.trainingPhases[t.phase];const r={base:["aerobic_base","tempo_efforts","recovery_specific"],build:["tempo_efforts","high_intensity","technique_specific"],peak:["high_intensity","race_specific","tempo_efforts"],taper:["technique_specific","recovery_specific","race_specific"]}[t.phase];return r[e%r.length]}selectStandUpBikeWorkout(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const o={tempo:"TEMPO_BIKE",intervals:"INTERVAL_BIKE",aerobic_power:"POWER_RESISTANCE",long_endurance:"LONG_ENDURANCE_RIDES",recovery:"RECOVERY_SPECIFIC",aerobic_base:"AEROBIC_BASE",technique_specific:"TECHNIQUE_SPECIFIC"}[e]||"AEROBIC_BASE",a=this.standUpBikeLibrary.workoutLibrary[o];if(!a||0===a.length){const e=Object.values(this.standUpBikeLibrary.workoutLibrary).flat().filter(e=>e.equipment===n||"both"===e.equipment);if(e.length>0){const t=e[Math.floor(Math.random()*e.length)];return this.standUpBikeLibrary.prescribeStandUpBikeWorkout(t.name,n,{targetDistance:r,hasGarmin:i})}}const s=a.filter(e=>e.equipment===n||"both"===e.equipment);if(0===s.length){const e=a.filter(e=>"both"===e.equipment);if(e.length>0){const t=e[Math.floor(Math.random()*e.length)];return this.standUpBikeLibrary.prescribeStandUpBikeWorkout(t.name,n,{targetDistance:r,hasGarmin:i})}}const l=s[Math.floor(Math.random()*s.length)];return this.standUpBikeLibrary.prescribeStandUpBikeWorkout(l.name,n,{targetDistance:r,hasGarmin:i})}generateRaceDayWorkout(e,t){const n={"5K":{miles:3.1,name:"5K"},"10K":{miles:6.2,name:"10K"},Half:{miles:13.1,name:"Half Marathon"},Marathon:{miles:26.2,name:"Marathon"}}[e]||{miles:parseFloat(e)||13.1,name:e},r={"5K":["\ud83c\udfaf Race Strategy: Start controlled, hit race pace by mile 1, build through mile 2, empty the tank in the final 800m","\u23f1\ufe0f Pacing: This is a fast race - don't go out too hard, but don't be afraid to hurt","\ud83d\udcaa Mental Game: Pain is temporary, your PR time is forever","\ud83d\udd25 The last mile is where races are won - stay strong and finish fast!"],"10K":["\ud83c\udfaf Race Strategy: First 5K controlled at goal pace, second 5K at effort (pace will feel harder but stay consistent)","\u23f1\ufe0f Pacing: Even splits are your friend - negative splits are magic","\ud83d\udcaa Mental Game: The middle miles (2-4) are where mental toughness counts","\ud83c\udfc1 Final kilometer: Give everything you've got left!"],Half:["\ud83c\udfaf Race Strategy: Miles 1-6 feel easy, 7-10 at goal pace, 11-13 dig deep","\u23f1\ufe0f Pacing: First half should feel controlled - if you're working hard before mile 8, you went too fast","\ud83d\udcaa Mental Game: Mile 10 is the real start of the race - this is where your training pays off","\ud83d\udd25 The final 5K is all guts - trust your training and push through","\ud83d\udca7 Hydration: Take water at every aid station, even if just a sip"],Marathon:["\ud83c\udfaf Race Strategy: Miles 1-16 should feel easy and controlled, 17-20 maintain focus, 21-26 is the real race","\u23f1\ufe0f Pacing: The first 20 miles are the warmup for the last 6 miles",'\ud83d\udcaa Mental Game: "The wall" at mile 20 is real - but your training prepared you for this',"\ud83d\udd25 When it gets hard around mile 20, remember: this is why you trained","\ud83d\udca7 Hydration & Fuel: Take water/electrolytes at every station, fuel every 45min starting at mile 6","\ud83e\udde0 Break it down: Focus on one mile at a time, not the distance remaining","\u2728 You've got this - you've already done the hard work in training!"]}[e]||["\ud83c\udfaf Race Strategy: Start controlled, settle into your pace, finish strong","\u23f1\ufe0f Pacing: Even effort throughout, trust your training","\ud83d\udcaa Mental Game: Stay present, stay strong, stay focused","\ud83d\udd25 This is your day - go get it!"],i=t?new Date(t+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Race Day";return{name:"\ud83c\udfc1 RACE DAY - ".concat(n.name),type:"race",distance:n.miles,structure:"Your ".concat(n.name," race - ").concat(n.miles," miles"),description:r.join("\n\n"),about:"Today is what you've been training for! Trust your preparation, execute your race plan, and leave it all out there. You're ready for this.",focus:"Race Performance",notes:"Race Date: ".concat(i),equipment:"running"}}}const Ve=class{constructor(){this.transitionGuidelines={quick:{time:"30-60 seconds",description:"Simulate race conditions"},standard:{time:"60-90 seconds",description:"Equipment change + brief recovery"},recovery:{time:"2-3 minutes",description:"Hydration + equipment adjustment"},full:{time:"5+ minutes",description:"Complete recovery between segments"}},this.equipmentTransitions={cyclete:{setup:"30-45 seconds",notes:"Quick height adjustment, similar running position",advantages:"Minimal setup, running-like feel"},elliptigo:{setup:"60-90 seconds",notes:"Stride adjustment, gear selection",advantages:"Full body engagement after running"}},this.brickWorkouts={aerobic:[{name:"Base Building Brick",totalDuration:"60-90 minutes",difficulty:"beginner",runeqRatio:"moderate",structure:[{type:"run",duration:"20 min",intensity:"easy",description:"Easy warm-up run"},{type:"transition",duration:"90 sec",activity:"equipment change"},{type:"bike",duration:"30 min",intensity:"easy",description:"Steady aerobic effort"},{type:"transition",duration:"90 sec",activity:"equipment change"},{type:"run",duration:"15 min",intensity:"easy",description:"Easy finish run"}],purpose:"Develop aerobic fitness with equipment familiarity"},{name:"Long Aerobic Brick",totalDuration:"90-120 minutes",difficulty:"intermediate",runeqRatio:"balanced",structure:[{type:"run",duration:"30 min",intensity:"easy",description:"Extended warm-up"},{type:"transition",duration:"2 min",activity:"hydration + equipment"},{type:"bike",duration:"45 min",intensity:"easy",description:"Sustained aerobic effort"},{type:"transition",duration:"2 min",activity:"hydration + equipment"},{type:"run",duration:"20 min",intensity:"easy",description:"Finish strong"}],purpose:"Extended aerobic development, mental toughness"}],tempo:[{name:"Alternating Tempo Brick",totalDuration:"45-60 minutes",difficulty:"intermediate",runeqRatio:"run-focused",structure:[{type:"run",duration:"15 min",intensity:"easy",description:"Warm-up"},{type:"run",duration:"10 min",intensity:"tempo",description:"Threshold effort"},{type:"transition",duration:"60 sec",activity:"quick change"},{type:"bike",duration:"15 min",intensity:"tempo",description:"Maintain threshold"},{type:"transition",duration:"60 sec",activity:"quick change"},{type:"run",duration:"8 min",intensity:"tempo",description:"Final threshold"},{type:"run",duration:"10 min",intensity:"easy",description:"Cool down"}],purpose:"Lactate threshold development with equipment variety"},{name:"Sandwich Tempo Brick",totalDuration:"50-65 minutes",difficulty:"advanced",runeqRatio:"balanced",structure:[{type:"run",duration:"12 min",intensity:"easy",description:"Warm-up"},{type:"bike",duration:"20 min",intensity:"tempo",description:"Strong tempo effort"},{type:"transition",duration:"90 sec",activity:"equipment change"},{type:"run",duration:"15 min",intensity:"tempo",description:"Run off the bike"},{type:"run",duration:"12 min",intensity:"easy",description:"Cool down"}],purpose:"Practice running after hard bike effort"}],speed:[{name:"Speed Transition Brick",totalDuration:"35-45 minutes",difficulty:"advanced",runeqRatio:"balanced",structure:[{type:"run",duration:"15 min",intensity:"easy",description:"Warm-up with strides"},{type:"intervals",description:"4x (2min run hard + 45sec transition + 2min bike hard + 45sec transition)",recovery:"2 min easy run between sets"},{type:"run",duration:"10 min",intensity:"easy",description:"Cool down"}],purpose:"Speed endurance, equipment mastery"}],recovery:[{name:"Active Recovery Brick",totalDuration:"30-45 minutes",difficulty:"recovery",runeqRatio:"balanced",structure:[{type:"run",duration:"10 min",intensity:"easy",description:"Gentle start"},{type:"transition",duration:"2 min",activity:"relaxed change"},{type:"bike",duration:"15 min",intensity:"recovery",description:"Very easy spinning"},{type:"transition",duration:"2 min",activity:"relaxed change"},{type:"run",duration:"10 min",intensity:"easy",description:"Easy finish"}],purpose:"Active recovery, movement variety"}]}}getBrickWorkoutTypes(){return Object.keys(this.brickWorkouts)}getBrickWorkoutsByType(e){return this.brickWorkouts[e]||[]}generateBrickWorkout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{type:t="aerobic",difficulty:n="intermediate",equipment:r="cyclete"}=e,i=this.brickWorkouts[t]||this.brickWorkouts.aerobic;let o=i;"any"!==n&&(o=i.filter(e=>e.difficulty===n||"any"===e.difficulty),0===o.length&&(o=i));const a=o[Math.floor(Math.random()*o.length)];return this.formatBrickWorkoutForUI(a,r)}formatBrickWorkoutForUI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cyclete";return(0,s.A)((0,s.A)({},e),{},{type:"brick",category:"Brick Workout",runeqFeatures:{equipmentUsed:t,transitionPractice:!0,uniqueFeature:"\ud83e\uddf1 Run+Bike Combination",alternatives:this.getBrickAlternatives(e)},equipmentNotes:this.equipmentTransitions[t]||this.equipmentTransitions.cyclete,safetyNotes:["Practice transitions in training before using in workouts","Stay hydrated during equipment changes","Start with longer transition times, speed up as you improve","Listen to your body - brick workouts are demanding"],paceGuidance:{easy:"Conversational pace, 65-75% max HR",tempo:"Comfortably hard, 85-90% max HR",hard:"Hard effort, 90-95% max HR",recovery:"Very easy, 60-70% max HR"}})}getBrickAlternatives(e){return[{category:"\ud83c\udf21\ufe0f Weather Alternatives",options:[{name:"Hot Weather Adaptation",description:"Extend transition times for hydration and cooling",intensity:e.difficulty},{name:"Cold Weather Adaptation",description:"Minimize transition time to maintain body temperature",intensity:e.difficulty}]},{category:"\u26a1 Equipment Alternatives",options:[{name:"No Bike Available",description:"Replace bike segments with hill running at equivalent effort",intensity:e.difficulty},{name:"No Transitions",description:"Combine segments into continuous workout",intensity:e.difficulty},{name:"Indoor Alternative",description:"Use treadmill incline to simulate bike resistance",intensity:e.difficulty}]},{category:"\u2b07\ufe0f Make It Easier",options:[{name:"Extended Recovery Brick",description:"Longer transition times, lower intensity",intensity:"recovery"},{name:"Single Transition Brick",description:"Just one run\u2192bike or bike\u2192run transition",intensity:"easy"}]},{category:"\u2b06\ufe0f Make It Harder",options:[{name:"Quick Transition Brick",description:"Minimize transition times, race-like pace",intensity:"hard"},{name:"Multi-Transition Brick",description:"Add more run\u2194bike switches throughout workout",intensity:"advanced"}]}]}getRandomBrickWorkout(){const e=this.getBrickWorkoutTypes(),t=e[Math.floor(Math.random()*e.length)];return this.generateBrickWorkout({type:t})}isBrickWorkout(e){var t;return"brick"===(null===e||void 0===e?void 0:e.type)||"Brick Workout"===(null===e||void 0===e?void 0:e.category)||(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes("brick"))}formatBrickStructure(e){return e.map((e,t)=>({step:t+1,type:e.type,duration:e.duration||e.description,intensity:e.intensity||"standard",description:e.description||e.activity,isTransition:"transition"===e.type}))}},Ke=["actualDate"];const Ye=class{constructor(){this.trainingPlanGenerator=new He,this.tempoLibrary=new Le,this.intervalLibrary=new We,this.hillLibrary=new Be,this.longRunLibrary=new Ue,this.brickWorkoutService=new Ve,this.planTemplates={"5K":{weeks:8,focusAreas:["speed","vo2max"]},"10K":{weeks:10,focusAreas:["vo2max","lactateThreshold"]},Half:{weeks:12,focusAreas:["lactateThreshold","endurance"]},Marathon:{weeks:16,focusAreas:["endurance","lactateThreshold"]}}}convertOnboardingToOptions(e){const{distance:t,time:n}=this.parseRaceTimeWithDistance(e.currentRaceTime),r=this.calculateRunEqPreference(e);let i=null;if(e.startDate&&e.raceDate){const t=6048e5;i=Math.ceil((new Date(e.raceDate+"T00:00:00")-new Date(e.startDate+"T00:00:00"))/t)}Me.log("\ud83d\udd0d Converting onboarding to options:"),Me.log("  currentRaceTime:",e.currentRaceTime),Me.log("  parsedDistance:",t),Me.log("  parsedTime:",n),Me.log("  currentWeeklyMileage:",e.currentWeeklyMileage),Me.log("  currentLongRunDistance:",e.currentLongRunDistance),Me.log("  availableDays:",e.availableDays),Me.log("  hardSessionDays:",e.hardSessionDays),Me.log("  longRunDay:",e.longRunDay),Me.log("  preferredBikeDays:",e.preferredBikeDays);const o=e.startDate?new Date(e.startDate+"T00:00:00"):null,a=o?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][o.getDay()]:null;return{raceDistance:e.raceDistance,currentRaceDistance:t,raceTime:n,raceDate:e.raceDate,currentPaces:null,runsPerWeek:e.runsPerWeek,runEqPreference:r,weeksAvailable:i,experienceLevel:e.experienceLevel,standUpBikeType:e.standUpBikeType,runningStatus:e.runningStatus||"active",hasGarmin:!1!==e.hasGarmin,currentWeeklyMileage:parseInt(e.currentWeeklyMileage)||null,startDay:a,currentLongRunDistance:parseInt(e.currentLongRunDistance)||null,availableDays:e.availableDays,hardSessionDays:e.hardSessionDays,longRunDay:e.longRunDay,preferredBikeDays:e.preferredBikeDays}}parseRaceTimeWithDistance(e){if(!e)return{distance:null,time:null};const t=e.split("-");return 2!==t.length?{distance:null,time:null}:{distance:t[0],time:t[1]}}parseRaceTime(e){if(!e)return null;const t=e.split("-");return 2!==t.length?null:t[1]}calculateRunEqPreference(e){let t=0;return e.standUpBikeType&&(t+=30,e.runsPerWeek>=5&&(t+=20),e.runsPerWeek>=6&&(t+=20)),"advanced"!==e.experienceLevel&&"elite"!==e.experienceLevel||(t+=10),Math.min(t,80)}async generatePlanFromOnboarding(e){try{Me.log("Generating training plan for:",e);const t=this.convertOnboardingToOptions(e),n=this.trainingPlanGenerator.generateTrainingPlan(t);Me.log("\u2705 TrainingPlanGenerator created plan with",n.weeks.length,"weeks");const r=this.addDatesAndReorderWorkouts(n.weeks,e.startDate);return{success:!0,plan:{planOverview:{raceDistance:e.raceDistance,raceTime:e.currentRaceTime,totalWeeks:n.planOverview.totalWeeks,runsPerWeek:e.runsPerWeek,standUpBikeType:e.standUpBikeType,runningStatus:e.runningStatus||"active",experienceLevel:e.experienceLevel,runEqPreference:this.calculateRunEqPreference(e),startDate:e.startDate,raceDate:e.raceDate,trainingPhilosophy:e.trainingPhilosophy||"Zone-Based Training"},weeks:r,trainingPaces:n.trainingPaces,periodization:n.periodization,planSummary:(0,s.A)((0,s.A)({},n.planSummary),{},{workoutVariety:"80+ different workouts with proper periodization",equipmentIntegration:e.standUpBikeType?"".concat(e.standUpBikeType," specific with smart brick integration"):"Running focused with optional equipment integration",coachingPhilosophy:"Research-based training with 4 ways to complete every workout",runeqAdvantage:"Every workout offers 4 ways to complete it - pure running, brick combinations, mixed segments, or full equipment",ageBasedGuidance:this.getAgeBasedGuidance(e),flexibilityMessage:"Remember: it's pretty much impossible to follow any plan exactly - life gets in the way, and that's completely okay. This serves as your guide that you can build around your life."})},userProfile:e}}catch(t){return console.error("Error generating training plan:",t),{success:!1,error:t.message,plan:this.generateFallbackPlan(e)}}}generateWeeks(e,t){const n=[],r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)||e.weeks;for(let i=1;i<=r;i++){const o=this.generateWeekWorkouts(i,e,t,r),a=this.getWeekDateRange(t.startDate,i);n.push({week:i,weekDates:a,phase:this.getPhase(i,r),totalMileage:this.calculateWeeklyMileage(i,e,t),workouts:o,isRestWeek:i%4===0&&i<r-2,coachingNote:this.generateCoachingNote(i,e,t),weeklyFocus:this.getWeeklyFocus(i,r),motivation:this.getWeeklyMotivation(i,r)})}return n}addDatesAndReorderWorkouts(e,t){if(!t)return console.warn("\u26a0\ufe0f No start date provided, workouts will remain in Monday-Sunday order"),e;const n=new Date(t+"T00:00:00"),r={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6};return Me.log("\ud83d\udcc5 Training plan start date: ".concat(n.toDateString()," (").concat(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][n.getDay()],")")),e.map((e,t)=>{let i;if(0===t)i=new Date(n);else{const e=n.getDay(),r=0===e?0:7-e,o=new Date(n);o.setDate(n.getDate()+r+1),i=new Date(o),i.setDate(o.getDate()+7*(t-1))}const o=e.workouts.map(e=>{const t=r[e.day],n=new Date(i);let o=t-i.getDay();return o<0&&(o+=7),n.setDate(i.getDate()+o),(0,s.A)((0,s.A)({},e),{},{date:n.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),fullDate:n.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),actualDate:n,dateString:n.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})});let a;if(0===t){const e=n.getDay(),t=0===e?0:7-e,r=new Date(n);r.setDate(n.getDate()+t),r.setHours(23,59,59,999),a=o.filter(e=>e.actualDate>=n&&e.actualDate<=r)}else a=o;a.sort((e,t)=>e.actualDate-t.actualDate);const l=a.map(e=>{const{actualDate:t}=e;return(0,Fe.A)(e,Ke)});return Me.log("\ud83d\udcc5 Week ".concat(e.week," workouts reordered:"),l.map(e=>"".concat(e.day," (").concat(e.date,")")).join(", ")),(0,s.A)((0,s.A)({},e),{},{workouts:l})})}getWeekDateRange(e,t){if(!e)return{start:"Week ".concat(t),end:"Week ".concat(t),displayText:"Week ".concat(t)};const n=new Date(e+"T00:00:00");if(1===t){const e=n.getDay(),r=0===e?0:7-e,i=new Date(n);return i.setDate(n.getDate()+r),{start:n.toLocaleDateString("en-US",{month:"short",day:"numeric"}),end:i.toLocaleDateString("en-US",{month:"short",day:"numeric"}),displayText:"".concat(n.toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ").concat(i.toLocaleDateString("en-US",{month:"short",day:"numeric"})),weekNumber:t}}{const e=n.getDay(),r=0===e?0:7-e,i=new Date(n);i.setDate(n.getDate()+r+1);const o=new Date(i);o.setDate(i.getDate()+7*(t-2));const a=new Date(o);return a.setDate(o.getDate()+6),{start:o.toLocaleDateString("en-US",{month:"short",day:"numeric"}),end:a.toLocaleDateString("en-US",{month:"short",day:"numeric"}),displayText:"".concat(o.toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ").concat(a.toLocaleDateString("en-US",{month:"short",day:"numeric"})),weekNumber:t}}}calculateCalendarDates(e,t,n){if(!e||!t||0===t.length)return["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];const r=new Date(e+"T00:00:00"),i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=[];if(1===n){const e=r.getDay(),n=0===e?0:7-e;for(let a=0;a<=n;a++){const e=new Date(r);e.setDate(r.getDate()+a);const n=i[e.getDay()];o.push({dayName:n,date:e,dateString:e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),fullDate:e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),isAvailable:t.includes(n)})}Me.log("\ud83d\udcc5 Week 1 partial week: ".concat(o.map(e=>"".concat(e.dayName," ").concat(e.dateString)).join(", ")))}else{const e=r.getDay(),a=0===e?0:7-e,s=new Date(r);s.setDate(r.getDate()+a+1);const l=new Date(s);l.setDate(s.getDate()+7*(n-2));for(let n=0;n<7;n++){const e=new Date(l);e.setDate(l.getDate()+n);const r=i[e.getDay()];o.push({dayName:r,date:e,dateString:e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),fullDate:e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),isAvailable:t.includes(r)})}Me.log("\ud83d\udcc5 Week ".concat(n," (Monday-Sunday): ").concat(o.map(e=>"".concat(e.dayName," ").concat(e.dateString)).join(", ")))}return o}generateWeekWorkouts(e,t,n){const r=[],i=this.calculateCalendarDates(n.startDate,n.availableDays,e),o=this.getWorkoutPattern(n);return i.forEach(t=>{const i=o[t.dayName];if("rest"!==i&&t.isAvailable){if(n.preferredBikeDays&&n.preferredBikeDays.includes(t.dayName)&&"Sunday"!==t.dayName&&n.standUpBikeType){const e=this.generateCycleteWorkout(i,n);r.push({day:t.dayName,date:t.dateString,fullDate:t.fullDate,actualDate:t.date,type:"bike",workout:e,focus:this.getCycleteWorkoutFocus(i),completed:!1,equipmentSpecific:!0,workoutDetails:e,coachingGuidance:this.getCycleteCoachingGuidance(i,n),runEqOptions:this.generateCycleteRunEqOptions(i,e,n)})}else{const o=this.selectWorkout(i,e,n);r.push({day:t.dayName,date:t.dateString,fullDate:t.fullDate,actualDate:t.date,type:i,workout:o,focus:this.getWorkoutFocus(i),completed:!1,equipmentSpecific:n.standUpBikeType&&this.shouldUseEquipment(i,n),workoutDetails:o,coachingGuidance:this.getWorkoutCoachingGuidance(i,n),runEqOptions:this.generateRunEqOptions(i,o,n)})}}else r.push({day:t.dayName,date:t.dateString,fullDate:t.fullDate,actualDate:t.date,type:"rest",workout:{name:t.isAvailable?"Rest Day":"Scheduled Rest",description:t.isAvailable?"Complete rest or light cross-training":"Rest day - not available for training"},focus:"Recovery",completed:!1})}),r}getWorkoutPattern(e){const{runsPerWeek:t,availableDays:n,preferredBikeDays:r=[],longRunDay:i}=e;let o={};["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].forEach(e=>{o[e]="rest"});let a=[];if(t>=3&&(a=["tempo","intervals","longRun"]),t>=4&&a.push("easy"),t>=5){const t=this.getElevationSpecificWorkout(e.raceElevationProfile);a.push(t)}if(t>=6&&a.push("easy"),t>=7&&a.push("easy"),e.raceElevationProfile&&t>=4&&(a=this.adjustForElevationProfile(a,e.raceElevationProfile)),i&&n.includes(i)&&(o[i]="longRun",a=a.filter(e=>"longRun"!==e)),r.length>0){const e=r.filter(e=>n.includes(e)&&"rest"===o[e]);for(const t of e)if("rest"===o[t]&&a.length>0){const e=a[0];e&&(o[t]=e,a=a.filter(t=>t!==e))}}const s=n.filter(e=>"rest"===o[e]).sort(()=>Math.random()-.5);for(let l=0;l<Math.min(s.length,a.length);l++)o[s[l]]=a[l];return o}selectWorkout(e,t,n){var r;const i=(null===(r=this.planTemplates[n.raceDistance])||void 0===r?void 0:r.weeks)||12,o=(this.getPhase(t,i),this.calculateWeeklyMileage(t,n));let a,l;switch(e){case"tempo":a=this.tempoLibrary.getRandomWorkout("TRADITIONAL_TEMPO"),l=Math.max(4,Math.min(8,Math.round(.12*o)));break;case"intervals":a=this.intervalLibrary.getRandomWorkout("VO2_MAX"),l=Math.max(3,Math.min(6,Math.round(.1*o)));break;case"hills":a=this.hillLibrary.getRandomWorkout("short_power"),l=Math.max(3,Math.min(6,Math.round(.1*o)));break;case"longRun":return this.selectProgressiveLongRun(t,n);case"bike":return this.selectBikeWorkout(t,n);case"brick":return this.selectBrickWorkout(t,n);case"brickLongRun":return this.selectBrickLongRun(t,n);case"easy":l=Math.max(3,Math.min(6,Math.round(.17*o))),a={name:"Easy Run",description:"Conversational pace, aerobic base building",duration:"".concat(10*l,"-").concat(12*l," minutes"),intensity:"Easy"};break;default:l=Math.max(3,Math.min(4,Math.round(.12*o))),a={name:"Recovery Run",description:"Very easy pace, active recovery",duration:"".concat(11*l,"-").concat(13*l," minutes"),intensity:"Recovery"}}return(0,s.A)((0,s.A)({},a),{},{distance:l})}selectBrickWorkout(e,t){var n;let r="aerobic";switch(this.getPhase(e,(null===(n=this.planTemplates[t.raceDistance])||void 0===n?void 0:n.weeks)||12)){case"Base":r=Math.random()<.7?"aerobic":"recovery";break;case"Build":r=Math.random()<.5?"tempo":"aerobic";break;case"Peak":r=Math.random()<.4?"speed":"tempo";break;case"Taper":r="recovery";break;default:r="aerobic"}return this.brickWorkoutService.generateBrickWorkout({type:r,equipment:t.standUpBikeType||"cyclete",difficulty:this.mapExperienceTodifficulty(t.experienceLevel)})}selectBrickLongRun(e,t){const n=this.calculateBaseDistance(e,t.raceDistance,t.experienceLevel),r=Math.round(.6*n),i=Math.round(.4*n*2.5);return{name:"Brick Long Run",description:"".concat(r," mile run + ").concat(i," mile ").concat(t.standUpBikeType||"bike"),duration:"".concat(Math.round(9*r)," minutes total"),intensity:"Easy-Moderate",segments:[{type:"run",distance:r,description:"Steady aerobic run"},{type:"transition",duration:"2-3 minutes",description:"Equipment change and setup"},{type:"bike",distance:i,description:"Moderate effort ".concat(t.standUpBikeType||"bike"," ride")}],safetyNotes:["Take your time with the transition","Keep both portions conversational","Stay hydrated throughout"],equipmentSpecific:!0}}calculateBaseDistance(e,t,n){let r=6;return"marathon"===t?r=Math.min(8+Math.floor(e/2),16):"halfMarathon"===t&&(r=Math.min(6+Math.floor(e/2),12)),"beginner"===n?r=Math.max(4,r-2):"elite"===n&&(r=Math.min(r+2,16)),r}mapExperienceTodifficulty(e){const t={beginner:"beginner",recreational:"intermediate",competitive:"advanced",elite:"advanced"};if(!t[e])throw new Error("Invalid experience level: ".concat(e,". Must be one of: ").concat(Object.keys(t).join(", ")));return t[e]}selectProgressiveLongRun(e,t){var n,r;const i=t.raceDistance,o=t.experienceLevel,a=(null===(n=this.planTemplates[i])||void 0===n?void 0:n.weeks)||12,s=this.getPhase(e,a),l=e%4===0&&e<a-2,c={"5K":{beginner:{min:3,max:6,peak:8},recreational:{min:4,max:8,peak:10},competitive:{min:5,max:10,peak:12},elite:{min:6,max:12,peak:15}},"10K":{beginner:{min:4,max:8,peak:10},recreational:{min:5,max:10,peak:12},competitive:{min:6,max:12,peak:15},elite:{min:7,max:15,peak:18}},Half:{beginner:{min:5,max:10,peak:13},recreational:{min:6,max:12,peak:15},competitive:{min:7,max:14,peak:16},elite:{min:8,max:16,peak:16}},Marathon:{beginner:{min:6,max:12,peak:16},recreational:{min:7,max:14,peak:16},competitive:{min:8,max:16,peak:16},elite:{min:10,max:16,peak:16}}},u=(null===(r=c[i])||void 0===r?void 0:r[o])||c.Marathon.recreational;let d;if(l)d=Math.max(u.min,Math.round(.7*this.getPreviousLongRunDistance(e,u)));else{const t=e/a;switch(s){case"Base":const n=u.min+(.75*u.peak-u.min)*(t/.4);d=Math.round(n);break;case"Build":const r=(t-.4)/.3;d=Math.round(.75*u.peak+(u.peak-.75*u.peak)*r);break;case"Peak":d=e%2===0?u.peak:Math.round(.85*u.peak);break;case"Taper":const i=(t-.9)/.1;d=Math.round(u.peak*(.6-.3*i));break;default:d=u.min+2}}return d=Math.max(u.min,Math.min(u.peak,d)),this.generateSpecificLongRun(d,s,e,t)}getPreviousLongRunDistance(e,t){if(e<=1)return t.min;const n=(e-1)/16;return t.min+(t.peak-t.min)*n*.8}generateSpecificLongRun(e,t,n,r){const i=this.getLongRunPaceGuidance(e,t),o=this.getLongRunCoaching(e,t,n);return{name:"".concat(e,"-Mile Long Run"),distance:e,duration:"".concat(Math.round(8.5*e),"-").concat(Math.round(11*e)," minutes"),description:"".concat(e," mile long run - ").concat(i.effort),structure:"".concat(o.warmup," + ").concat(e," miles @ ").concat(i.pace," + ").concat(o.cooldown),intensity:"Easy to Moderate",paceGuidance:i,coachingNotes:o.notes,phase:t,weekNumber:n,benefits:this.getLongRunBenefits(e,t),fuelingGuidance:e>=10?"Practice race fueling every 45-60 minutes":"Water as needed",runEqOptions:this.generateLongRunRunEqOptions(e,r)}}getLongRunPaceGuidance(e,t){return e<=6?{pace:"Easy conversational pace",effort:"should feel comfortable throughout",heartRate:"Zone 1-2 (65-75% max HR)"}:e<=12?{pace:"Easy pace with optional faster finish",effort:"conversational for 80%, can build last 2-3 miles",heartRate:"Zone 1-2, building to Zone 3 if feeling strong"}:{pace:"Marathon pace practice in middle miles",effort:"easy start, marathon pace middle, easy finish",heartRate:"Zone 1-2 building to Zone 3 for middle segment"}}getLongRunCoaching(e,t,n){const r=e>=12;return{warmup:r?"10-15 min easy":"5-10 min easy",cooldown:"10 min easy + stretching",notes:["Week ".concat(n,": ").concat(e," miles is perfect for your current fitness level"),r?"This is a key workout - focus on steady effort and fueling practice":"Build your aerobic base with relaxed, comfortable running","Peak"===t&&e>=14?"Practice your race day routine - gear, fueling, pacing":"Stay relaxed and enjoy the longer effort",e>=16?"Smart 16-mile cap - gets all endurance benefits without the injury risk of 20+ mile runs":""].filter(Boolean)}}getLongRunBenefits(e,t){return e<=8?"Aerobic base building, fat adaptation, capillary development":e<=12?"Endurance building, mental toughness, glycogen storage improvement":"Race-specific endurance, fueling practice, confidence building"}generateLongRunRunEqOptions(e,t){const n=t.standUpBikeType,r=Math.round(2.2*e);return{optionA:{name:"Full Run",description:"Complete ".concat(e," mile run as planned"),approach:"Traditional long run approach"},optionB:{name:"Run/Bike Brick",description:n?"".concat(Math.round(.6*e)," mile run + ").concat(Math.round(.4*r)," miles ").concat(n):"".concat(Math.round(.6*e)," mile run + bike portion"),approach:"Build endurance while saving legs"},optionC:{name:"Alternating Segments",description:n?"Alternate running and ".concat(n," every 20-30 minutes"):"Alternate running and biking every 20-30 minutes",approach:"Maximum freshness with full training benefit"},optionD:{name:n?"Full ".concat(n):"Full Bike",description:n?"".concat(r," miles on ").concat(n):"".concat(r," miles biking"),approach:"Zero impact endurance - perfect for recovery or tired legs"}}}getPhase(e,t){const n=e/t;return n<=.4?"Base":n<=.7?"Build":n<=.9?"Peak":"Taper"}calculateWeeklyMileage(e,t,n){const r=4*n.runsPerWeek,i=1.5*r,o=e/t.weeks;return o<=.7?Math.round(r+o/.7*(i-r)):Math.round(i*(1-.5*(o-.7)))}getWorkoutFocus(e){return{tempo:"Lactate Threshold",intervals:"Speed & Power",hills:"Strength & Power",longRun:"Endurance",bike:"Equipment Training",brick:"RunEQ Brick Training",brickLongRun:"Brick Endurance",easy:"Recovery"}[e]||"Aerobic Base"}shouldUseEquipment(e,t){if(!t.standUpBikeType)return!1;if("bike"===e||"brick"===e||"brickLongRun"===e)return!0;return this.calculateRunEqPreference(t)>30&&("tempo"===e||"easy"===e)}calculateTrainingPaces(e){return{easy:"8:30-9:00 min/mile",tempo:"7:00-7:30 min/mile",intervals:"6:00-6:30 min/mile",recovery:"9:00-9:30 min/mile"}}generateCoachingNote(e,t,n){const r=this.getPhase(e,t.weeks),i=e/t.weeks,o=e%4===0&&e<t.weeks-2,a=n.standUpBikeType;if(1===e)return"Here we go - week 1 of your training journey! We're laying down the base and preparing you for what's to come. ".concat(a?"Since you have a ".concat(a,", we'll use it strategically to keep you fresh while building fitness."):""," Remember, it's pretty much impossible to follow any plan exactly - life gets in the way, and that's completely okay. This serves as your guide that you can build around your life.");if(o)return"This week is a recovery week where we see a reduction in overall training. This lets your body adapt and rebuild stronger. Listen to your body - these easier weeks are where the magic happens. You can achieve way more than you think, and this foundation week will set you up perfectly for what's ahead.";switch(r){case"Base":return e<=3?"We're building your aerobic foundation - think of this as constructing the base of your fitness pyramid. Your long runs at the weekend are so important for building the endurance you'll need. ".concat(a?"Your stand-up bike isn't just cross-training, it's performance training that counts just as much as pure running.":""," Focus on effort over pace right now."):"Your body is adapting beautifully to the training! You should be feeling stronger and more comfortable with the weekly rhythm. ".concat(a?"Those brick workouts are your secret weapon - your body gets more benefit from mixed training than pure running alone.":""," Keep building that strong foundation.");case"Build":return i<=.55?"Time to step things up! Your body is ready to handle more challenge. You'll notice some harder workouts creeping in - this is where we start sharpening that speed and power. There will be tough moments over the next few weeks, but many more highs as you get fitter and stronger.":"The biggest weeks are coming! Your fitness is really developing now. ".concat(e>=.6*t.weeks?"Time to start fueling during your long runs - around every 30-45 minutes is a good starting point.":""," Trust the process, you've got this.");case"Peak":return"These are the biggest weeks - trust the process, you've got this! Your body has been preparing for this volume. Remember to stay flexible with your schedule and listen to your body. Every workout doesn't have to be perfect - consistency over perfection wins every time.";case"Taper":return i>=.95?"Here we go - race week is here! Time to shine and show what you're made of. The hard work is done, now we trust in all that training. Stay relaxed, get good sleep, and remember - you're so much stronger than when you started this journey.":"The hard work is done! Now we're letting your body absorb all that training and get ready to perform. It might feel weird to do less, but this is how we peak properly. Your legs will feel fresh and fast by race day.";default:return"I'm here to help you on your journey to get where you want to be. Every week builds on the last, and you're making great progress even when it doesn't feel like it."}}getWeeklyFocus(e,t){const n=this.getPhase(e,t);if(e%4===0&&e<t-2)return"Recovery & Adaptation";switch(n){case"Base":return e<=2?"Foundation Building":"Aerobic Development";case"Build":return"Strength & Speed Development";case"Peak":return"Race Simulation & Peak Fitness";case"Taper":return e>=t-1?"Race Preparation":"Recovery & Sharpening";default:return"Balanced Training"}}getWeeklyMotivation(e,t){const n={Base:["Every mile is building your foundation \ud83d\udcaa","Consistency is your superpower right now \u26a1","Your future racing self will thank you for this base work \ud83d\ude4f","Strong foundations create breakthrough performances \ud83c\udfd7\ufe0f"],Build:["Time to discover what you're capable of! \ud83d\ude80","Challenge accepted - your body is ready for this \ud83d\udcaa","Every hard workout is making you stronger \ud83d\udcc8","You're building the fitness that will carry you to your goal \ud83c\udfaf"],Peak:["This is what all that base work was preparing you for! \u26f0\ufe0f","Your biggest weeks - embrace the challenge \ud83d\udcaa","Peak fitness is within reach - trust the process \ud83c\udfaf","You're stronger than you think you are \ud83d\udcaa"],Taper:["The hard work is done - time to sharpen up! \u2728","Your body is absorbing all that training magic \ud83e\ude84","Race day confidence is building with every easy step \ud83d\ude0a","You've earned this taper - enjoy feeling fresh! \ud83c\udf1f"]},r=n[this.getPhase(e,t)]||n.Base;return r[e%r.length]}getWorkoutCoachingGuidance(e,t){const n=t.standUpBikeType,r={tempo:{purpose:"This tempo workout builds your lactate threshold - the pace you can hold for about an hour.",encouragement:"Aim for 'comfortably hard' - you should be breathing rhythmically but able to speak in short sentences.",equipment:n?"Your ".concat(n," is perfect for tempo work - the smooth motion lets you focus on sustained effort without impact stress."):""},intervals:{purpose:"These intervals develop your VO2 max and speed - this is where we build your top-end power.",encouragement:"These will feel challenging, but that's exactly what makes you faster. Focus on form and smooth breathing.",equipment:n?"Short, intense efforts translate beautifully to your ".concat(n," - you'll maintain the same training effect with less impact."):""},hills:{purpose:"Hill training builds power, strength, and mental toughness - the complete package for better running.",encouragement:"Think 'power up, float down' - drive with your arms going up, then relax and let gravity help on the way down.",equipment:n?"Hill repeats on your ".concat(n," let you focus purely on power without worrying about footing or downhill impact."):""},longRun:{purpose:"Your long run builds the endurance foundation everything else sits on - this is your most important weekly workout.",encouragement:"Keep it conversational - you should be able to chat with a training partner throughout most of this run.",equipment:n?"Long efforts on your ".concat(n," give you the same endurance benefits while keeping your legs fresher for the week ahead."):""},brick:{purpose:"Brick workouts teach your body to transition between activities while maintaining effort - pure RunEQ magic.",encouragement:"The transitions might feel weird at first, but this is where you develop true fitness versatility. Take your time with equipment changes.",equipment:n?"This is what your ".concat(n," was made for - seamless run/bike combinations that no traditional plan can offer."):""},easy:{purpose:"Easy runs build your aerobic base and promote recovery - they're harder to pace correctly than they seem!",encouragement:"Truly easy - err on the side of too slow rather than too fast. This is active recovery that makes you stronger.",equipment:n?"Perfect recovery day for your ".concat(n," - get the blood flowing without the impact stress."):""}},i=r[e]||r.easy;return{purpose:i.purpose,encouragement:i.encouragement,equipmentNote:i.equipment}}generateRunEqOptions(e,t,n){const r=n.standUpBikeType,i={optionA:{name:"Full Run",description:"Complete the workout as a traditional run",approach:"Pure running - stick to the classic approach"},optionB:{name:"Run/Bike Brick",description:r?"Start running, switch to ".concat(r," mid-workout, finish running"):"Start running, switch to bike mid-workout, finish running",approach:"Best of both worlds - get variety while hitting your training zones"},optionC:{name:"Mixed Segments",description:r?"Alternate between running and ".concat(r," every 10-15 minutes"):"Alternate between running and biking every 10-15 minutes",approach:"Keep it fresh - your body adapts better to variety"},optionD:{name:r?"Full ".concat(r):"Full Bike",description:r?"Complete the entire workout on your ".concat(r):"Complete the entire workout on bike",approach:"Low impact, high benefit - perfect for recovery or when your legs need a break"}};return i.coachingNote="tempo"===e?"Today's workout gives you four ways to get it done - pick what works for your body and schedule.":"intervals"===e?"Want to switch things up? All four options deliver the same speed benefits - choose what feels right today.":"brick"===e?"This is pure RunEQ training - experiment with different transitions to find your rhythm.":"Feeling tired? Options B, C, or D give you the same training benefit while being kinder to your legs.",i}getAgeBasedGuidance(e){const t={beginner:{guidance:"Starting your running journey at any age is something to celebrate! Focus on consistency over intensity.",longRunCap:"Long runs should feel comfortable and conversational - quality over extreme distance."},recreational:{guidance:"Your experience gives you great body awareness - trust those instincts about when to push and when to back off.",longRunCap:"Smart long run approach - we cap at 16 miles to protect your joints while building the endurance you need."},competitive:{guidance:"Your competitive experience is a huge asset - you know the difference between discomfort and danger.",longRunCap:"At your level, we focus on quality over quantity - 16-mile long runs with smart pacing beats body-destroying 20+ mile slogs."},elite:{guidance:"Your advanced fitness allows for higher training loads, but smart recovery remains crucial.",longRunCap:"Elite-level training with RunEQ intelligence - even at your level, 16-mile caps with brick options provide superior training stimulus."}},n=t[e.experienceLevel]||t.recreational;return{message:n.guidance,longRunPhilosophy:n.longRunCap,recoveryFocus:"Recovery weeks are where the magic happens - your body adapts and gets stronger during these easier periods."}}generateFallbackPlan(e){return{planOverview:{raceDistance:e.raceDistance,totalWeeks:12,runsPerWeek:e.runsPerWeek,standUpBikeType:e.standUpBikeType,experienceLevel:e.experienceLevel},weeks:[],message:"Using simplified plan - full generator temporarily unavailable"}}selectBikeWorkout(e,t){var n;const r=this.getPhase(e,(null===(n=this.planTemplates[t.raceDistance])||void 0===n?void 0:n.weeks)||12),i=t.standUpBikeType||"bike";let o="Easy",a="45-60 minutes",s="Conversational pace ".concat(i," ride");switch(r){case"Base":o="Easy",a="45-75 minutes",s="Long aerobic ".concat(i," ride, building endurance");break;case"Build":o="Easy-Moderate",a="60-90 minutes",s="Steady ".concat(i," ride with some moderate efforts");break;case"Peak":o="Moderate",a="45-60 minutes",s="Race-pace ".concat(i," ride for sharpening")}return{name:"".concat("cyclete"===i?"Cyclete":"elliptigo"===i?"ElliptiGO":"Bike"," Long Ride"),description:s,duration:a,intensity:o,equipmentSpecific:!0,safetyNotes:["Focus on smooth ".concat("cyclete"===i?"teardrop motion":"elliptigo"===i?"elliptical motion":"pedaling technique"),"Maintain steady effort throughout","Stay hydrated and fuel as needed for longer sessions","Practice race-day equipment setup"],technique:"cyclete"===i?"Focus on forward drive phase of teardrop motion, maintain 70-85 RPM":"elliptigo"===i?"Use full stride extension with coordinated upper body movement":"Standard cycling technique"}}generateCycleteWorkout(e,t){var n;const r=t.standUpBikeType||"cyclete",i=(this.getPhase(1,(null===(n=this.planTemplates[t.raceDistance])||void 0===n?void 0:n.weeks)||12),{tempo:{name:"".concat("cyclete"===r?"Cyclete":"ElliptiGO"," Tempo Ride"),description:"20-25 minutes @ comfortably hard sustained effort",duration:"45-50 minutes",intensity:"Medium-Hard",structure:"10min easy warmup + 20-25min @ tempo effort + 10min easy cooldown",focus:"Lactate Threshold",safetyNotes:["Maintain consistent cadence throughout tempo segment","Focus on smooth motion pattern","Keep core engaged for stability"]},intervals:{name:"".concat("cyclete"===r?"Cyclete":"ElliptiGO"," Speed Intervals"),description:"6x3min @ hard effort (90sec easy recovery)",duration:"40-45 minutes",intensity:"Hard",structure:"10min easy warmup + 6x3min @ hard effort (90sec easy) + 10min easy cooldown",focus:"VO2 Max Development",safetyNotes:["Focus on power through the drive phase","Keep smooth motion even at high intensity","Recover fully between intervals"]},hills:{name:"".concat("cyclete"===r?"Cyclete":"ElliptiGO"," Power Intervals"),description:"8x90sec @ high resistance/power (jog/coast recovery)",duration:"40-45 minutes",intensity:"Hard",structure:"10min easy warmup + 8x90sec @ high resistance (90sec easy) + 10min easy cooldown",focus:"Power Development",safetyNotes:["Increase resistance/incline for power work","Drive hard through full motion range","Focus on form over pure speed"]},longRun:{name:"".concat("cyclete"===r?"Cyclete":"ElliptiGO"," Long Ride"),description:"60-90 minutes @ conversational effort",duration:"60-90 minutes",intensity:"Easy",structure:"60-90min @ steady conversational effort",focus:"Aerobic Endurance",safetyNotes:["Maintain conversational effort throughout","Practice nutrition timing for longer efforts","Focus on efficient motion pattern"]},easy:{name:"".concat("cyclete"===r?"Cyclete":"ElliptiGO"," Recovery Ride"),description:"30-40 minutes @ very easy effort",duration:"30-40 minutes",intensity:"Very Easy",structure:"30-40min @ recovery effort",focus:"Active Recovery",safetyNotes:["Keep effort truly easy","Focus on smooth, relaxed motion","Perfect for recovery days"]},brick:{name:"".concat("cyclete"===r?"Cyclete":"ElliptiGO","/Run Brick"),description:"20min bike + 15min run @ steady effort",duration:"45-50 minutes",intensity:"Medium",structure:"20min ".concat(r," @ steady + quick transition + 15min run @ steady"),focus:"Transition Training",safetyNotes:["Practice quick equipment transitions","Start run portion slightly easier","Focus on form during transition"]}}),o=i[e]||i.easy;return(0,s.A)((0,s.A)({},o),{},{type:"bike",equipmentSpecific:!0,equipment:r,technique:"cyclete"===r?"Focus on forward drive phase of teardrop motion, maintain 70-85 RPM":"Use full stride extension with coordinated upper body movement"})}getCycleteWorkoutFocus(e){return{tempo:"Lactate Threshold",intervals:"VO2 Max Development",hills:"Power Development",longRun:"Aerobic Endurance",easy:"Active Recovery",brick:"Transition Training"}[e]||"Aerobic Base"}getCycleteCoachingGuidance(e,t){const n=t.standUpBikeType||"cyclete",r={tempo:{purpose:"This tempo workout builds your lactate threshold using your ".concat(n," - same training benefit with less impact stress."),encouragement:"Focus on sustained effort and smooth motion. Your breathing should be rhythmic but controlled.",equipment:"The ".concat(n,"'s smooth motion is perfect for tempo work - you can maintain consistent effort without worrying about ground impact.")},intervals:{purpose:"These intervals develop your VO2 max and power on the ".concat(n," - high-intensity training with smart recovery."),encouragement:"Push hard during the work intervals, then truly recover. Focus on maintaining form even at high intensity.",equipment:"Your ".concat(n," lets you hit these intensities while protecting your legs for the rest of the week.")},hills:{purpose:"Power intervals on your ".concat(n," build strength and neuromuscular power - the same benefits as hill running without the downhill impact."),encouragement:"Drive hard through the power phase, focusing on full range of motion. This builds real running strength.",equipment:"Increase resistance or incline to simulate hill work - your ".concat(n," gives you perfect control over the training stimulus.")},longRun:{purpose:"This long ride builds the same endurance foundation as a long run while keeping your legs fresher for the week ahead.",encouragement:"Keep it conversational and enjoy the longer effort. This is building your aerobic engine.",equipment:"Long efforts on your ".concat(n," give you all the endurance benefits while reducing weekly impact load - smart training.")},easy:{purpose:"Easy recovery ride promotes blood flow and adaptation while giving your running muscles a break.",encouragement:"Keep this truly easy - it's active recovery that makes you stronger for tomorrow's workout.",equipment:"Perfect recovery day use of your ".concat(n," - get the movement benefits without impact stress.")},brick:{purpose:"Brick training teaches your body to transition between activities while maintaining effort - this is pure RunEQ methodology.",encouragement:"Take your time with transitions and expect the run to feel different at first. This builds real fitness versatility.",equipment:"This is what your ".concat(n," was designed for - seamless training combinations that traditional plans can't offer.")}},i=r[e]||r.easy;return{purpose:i.purpose,encouragement:i.encouragement,equipmentNote:i.equipment}}generateCycleteRunEqOptions(e,t,n){const r=n.standUpBikeType||"cyclete";return{optionA:{name:"Full ".concat("cyclete"===r?"Cyclete":"ElliptiGO"),description:"Complete the workout entirely on your ".concat(r),approach:"Pure equipment training - maximum impact reduction while maintaining training effect"},optionB:{name:"".concat("cyclete"===r?"Cyclete":"ElliptiGO","/Run Brick"),description:"Start on ".concat(r,", transition to running for final portion"),approach:"Best of both worlds - equipment benefits plus running specificity"},optionC:{name:"Mixed Segments",description:"Alternate between ".concat(r," and running every 10-15 minutes"),approach:"Maximum variety - keeps workout fresh and engaging"},optionD:{name:"Traditional Run",description:"Convert to equivalent running workout if preferred",approach:"Classic approach - pure running with traditional structure"},coachingNote:"Your ".concat(r," gives you training options that no traditional plan can offer - choose what feels right for your body today.")}}getElevationSpecificWorkout(e){switch(e){case"flat":case"moderate":default:return"intervals";case"rolling":case"hilly":return"hills"}}adjustForElevationProfile(e,t){const n=e.filter(e=>"intervals"===e).length,r=(e.filter(e=>"tempo"===e).length,e.filter(e=>"hills"===e).length),i=e.filter(e=>"easy"===e).length;switch(t){case"flat":if(r>0&&n<2&&i>0){const t=e.findIndex(e=>"hills"===e||"easy"===e);-1!==t&&(e[t]="intervals")}break;case"rolling":break;case"moderate":if(0===r&&i>0){const t=e.findIndex(e=>"easy"===e);-1!==t&&(e[t]="hills")}break;case"hilly":if(r<2&&i>0){const t=e.findIndex(e=>"easy"===e);-1!==t&&(e[t]="hills")}if(r<2&&e.filter(e=>"easy"===e).length>1){const t=e.findLastIndex(e=>"easy"===e);-1!==t&&(e[t]="hills")}}return e}async regeneratePlanFromCurrentWeek(e,t,n){Me.log("\u2699\ufe0f Regenerating plan from week",n),Me.log("  Preserving weeks 1-"+(n-1)),Me.log("  New settings:",{runsPerWeek:t.runsPerWeek,trainingDays:t.trainingDays,hardDays:t.hardDays,longRunDay:t.longRunDay,bikeDays:t.bikeDays});const r=(null===e||void 0===e?void 0:e.weeklyPlans)||(null===e||void 0===e?void 0:e.weeks);if(!r)throw new Error("Training plan structure is invalid - missing weeklyPlans/weeks array");const i=r.slice(0,n-1);Me.log("  Preserved",i.length,"completed weeks");const o=(0,s.A)((0,s.A)((0,s.A)({},e.planOverview),t),{},{startDate:e.planOverview.startDate,raceDate:e.planOverview.raceDate,targetRace:e.planOverview.targetRace,currentRaceTime:e.planOverview.raceTime,raceDistance:e.planOverview.raceDistance});Me.log("  Generating new plan with updated settings...");const a=await this.generatePlanFromOnboarding(o);if(!a.success||!a.plan)throw new Error("Failed to generate new plan");const l=a.plan,c=l.weeks;if(!c)throw new Error("Generated plan has no weeks array");const u=c.slice(n-1);Me.log("  Generated",u.length,"new weeks starting from week",n);const d=[...i,...u];return Me.log("  \u2705 Plan regenerated successfully"),Me.log("    Total weeks:",d.length),Me.log("    Completed weeks:",i.length),Me.log("    New weeks:",u.length),(0,s.A)((0,s.A)({},l),{},{weeks:d})}};function Ge(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Ge(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Qe(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Ge(e))&&(r&&(r+=" "),r+=t);return r}Math.pow(10,8);const Xe=6048e5,Je=6e4,$e=36e5,Ze=Symbol.for("constructDateFrom");function et(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&Ze in e?e[Ze](t):e instanceof Date?new e.constructor(t):new Date(t)}function tt(e,t){return et(t||e,e)}function nt(e,t){var n;const r=()=>et(null===t||void 0===t?void 0:t.in,NaN),i=null!==(n=null===t||void 0===t?void 0:t.additionalDigits)&&void 0!==n?n:2,o=function(e){const t={},n=e.split(rt.dateTimeDelimiter);let r;if(n.length>2)return t;/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],rt.timeZoneDelimiter.test(t.date)&&(t.date=e.split(rt.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length)));if(r){const e=rt.timezone.exec(r);e?(t.time=r.replace(e[1],""),t.timezone=e[1]):t.time=r}return t}(e);let a;if(o.date){const e=function(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:null===o?i:100*o,restDateString:e.slice((r[1]||r[2]).length)}}(o.date,i);a=function(e,t){if(null===t)return new Date(NaN);const n=e.match(it);if(!n)return new Date(NaN);const r=!!n[4],i=st(n[1]),o=st(n[2])-1,a=st(n[3]),s=st(n[4]),l=st(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,s,l)?function(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,o=7*(t-1)+n+1-i;return r.setUTCDate(r.getUTCDate()+o),r}(t,s,l):new Date(NaN);{const e=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(ct[t]||(ut(e)?29:28))}(t,o,a)&&function(e,t){return t>=1&&t<=(ut(e)?366:365)}(t,i)?(e.setUTCFullYear(t,o,Math.max(i,a)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!a||isNaN(+a))return r();const s=+a;let l,c=0;if(o.time&&(c=function(e){const t=e.match(ot);if(!t)return NaN;const n=lt(t[1]),r=lt(t[2]),i=lt(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,i))return NaN;return n*$e+r*Je+1e3*i}(o.time),isNaN(c)))return r();if(!o.timezone){const e=new Date(s+c),n=tt(0,null===t||void 0===t?void 0:t.in);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}return l=function(e){if("Z"===e)return 0;const t=e.match(at);if(!t)return 0;const n="+"===t[1]?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,i))return NaN;return n*(r*$e+i*Je)}(o.timezone),isNaN(l)?r():tt(s+c+l,null===t||void 0===t?void 0:t.in)}const rt={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},it=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ot=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,at=/^([+-])(\d{2})(?::?(\d{2}))?$/;function st(e){return e?parseInt(e):1}function lt(e){return e&&parseFloat(e.replace(",","."))||0}const ct=[31,null,31,30,31,30,31,31,30,31,30,31];function ut(e){return e%400===0||e%4===0&&e%100!==0}const dt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function ht(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const pt={date:ht({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:ht({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:ht({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ft={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function mt(e){return(t,n)=>{let r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=null!==n&&void 0!==n&&n.width?String(n.width):t;r=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[i]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const gt={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:mt({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:mt({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:mt({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:mt({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:mt({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function yt(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;const a=o[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(s)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(s,e=>e.test(a)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(s,e=>e.test(a));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(a.length)}}}const vt={ordinalNumber:(bt={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(bt.matchPattern);if(!n)return null;const r=n[0],i=e.match(bt.parsePattern);if(!i)return null;let o=bt.valueCallback?bt.valueCallback(i[0]):i[0];return o=t.valueCallback?t.valueCallback(o):o,{value:o,rest:e.slice(r.length)}}),era:yt({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:yt({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:yt({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:yt({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:yt({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var bt;const wt={code:"en-US",formatDistance:(e,t,n)=>{let r;const i=dt[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:pt,formatRelative:(e,t,n,r)=>ft[e],localize:gt,match:vt,options:{weekStartsOn:0,firstWeekContainsDate:1}},kt=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},xt=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},St={p:xt,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return kt(e,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;default:o=t.dateTime({width:"full"})}return o.replace("{{date}}",kt(r,t)).replace("{{time}}",xt(i,t))}},Et=/^D+$/,Tt=/^Y+$/,Ct=["D","DD","YY","YYYY"];function _t(e){return Et.test(e)}function Dt(e){return Tt.test(e)}function At(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(r),Ct.includes(e))throw new RangeError(r)}let Rt={};function It(){return Rt}function Pt(){return Object.assign({},It())}var Mt=n(705);function Nt(e,t){const n=function(e){var t;return"function"===typeof e&&(null===(t=e.prototype)||void 0===t?void 0:t.constructor)===e}(t)?new t(0):et(t,0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}class jt{constructor(){(0,Mt.A)(this,"subPriority",0)}validate(e,t){return!0}}class Ot extends jt{constructor(e,t,n,r,i){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=r,i&&(this.subPriority=i)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class Ft extends jt{constructor(e,t){super(),(0,Mt.A)(this,"priority",10),(0,Mt.A)(this,"subPriority",-1),this.context=e||(e=>et(t,e))}set(e,t){return t.timestampIsSet?e:et(e,Nt(e,this.context))}}class Lt{run(e,t,n,r){const i=this.parse(e,t,n,r);return i?{setter:new Ot(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,t,n){return!0}}const Wt=/^(1[0-2]|0?\d)/,Bt=/^(3[0-1]|[0-2]?\d)/,Ut=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,zt=/^(5[0-3]|[0-4]?\d)/,qt=/^(2[0-3]|[0-1]?\d)/,Ht=/^(2[0-4]|[0-1]?\d)/,Vt=/^(1[0-1]|0?\d)/,Kt=/^(1[0-2]|0?\d)/,Yt=/^[0-5]?\d/,Gt=/^[0-5]?\d/,Qt=/^\d/,Xt=/^\d{1,2}/,Jt=/^\d{1,3}/,$t=/^\d{1,4}/,Zt=/^-?\d+/,en=/^-?\d/,tn=/^-?\d{1,2}/,nn=/^-?\d{1,3}/,rn=/^-?\d{1,4}/,on=/^([+-])(\d{2})(\d{2})?|Z/,an=/^([+-])(\d{2})(\d{2})|Z/,sn=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,ln=/^([+-])(\d{2}):(\d{2})|Z/,cn=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function un(e,t){return e?{value:t(e.value),rest:e.rest}:e}function dn(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function hn(e,t){const n=t.match(e);if(!n)return null;if("Z"===n[0])return{value:0,rest:t.slice(1)};const r="+"===n[1]?1:-1,i=n[2]?parseInt(n[2],10):0,o=n[3]?parseInt(n[3],10):0,a=n[5]?parseInt(n[5],10):0;return{value:r*(i*$e+o*Je+1e3*a),rest:t.slice(n[0].length)}}function pn(e){return dn(Zt,e)}function fn(e,t){switch(e){case 1:return dn(Qt,t);case 2:return dn(Xt,t);case 3:return dn(Jt,t);case 4:return dn($t,t);default:return dn(new RegExp("^\\d{1,"+e+"}"),t)}}function mn(e,t){switch(e){case 1:return dn(en,t);case 2:return dn(tn,t);case 3:return dn(nn,t);case 4:return dn(rn,t);default:return dn(new RegExp("^-?\\d{1,"+e+"}"),t)}}function gn(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function yn(e,t){const n=t>0,r=n?t:1-t;let i;if(r<=50)i=e||100;else{const t=r+50;i=e+100*Math.trunc(t/100)-(e>=t%100?100:0)}return n?i:1-i}function vn(e){return e%400===0||e%4===0&&e%100!==0}function bn(e,t){var n,r,i,o,a,s;const l=It(),c=null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:l.weekStartsOn)&&void 0!==r?r:null===(s=l.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==n?n:0,u=tt(e,null===t||void 0===t?void 0:t.in),d=u.getDay(),h=(d<c?7:0)+d-c;return u.setDate(u.getDate()-h),u.setHours(0,0,0,0),u}function wn(e,t){var n,r,i,o,a,s;const l=tt(e,null===t||void 0===t?void 0:t.in),c=l.getFullYear(),u=It(),d=null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:u.firstWeekContainsDate)&&void 0!==r?r:null===(s=u.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==n?n:1,h=et((null===t||void 0===t?void 0:t.in)||e,0);h.setFullYear(c+1,0,d),h.setHours(0,0,0,0);const p=bn(h,t),f=et((null===t||void 0===t?void 0:t.in)||e,0);f.setFullYear(c,0,d),f.setHours(0,0,0,0);const m=bn(f,t);return+l>=+p?c+1:+l>=+m?c:c-1}function kn(e,t){return bn(e,(0,s.A)((0,s.A)({},t),{},{weekStartsOn:1}))}function xn(e,t){var n,r,i,o,a,s;const l=It(),c=null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:l.firstWeekContainsDate)&&void 0!==r?r:null===(s=l.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==n?n:1,u=wn(e,t),d=et((null===t||void 0===t?void 0:t.in)||e,0);d.setFullYear(u,0,c),d.setHours(0,0,0,0);return bn(d,t)}function Sn(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in),r=+bn(n,t)-+xn(n,t);return Math.round(r/Xe)+1}function En(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in),i=Sn(r,n)-t;return r.setDate(r.getDate()-7*i),tt(r,null===n||void 0===n?void 0:n.in)}function Tn(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in),r=n.getFullYear(),i=et(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const o=kn(i),a=et(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const s=kn(a);return n.getTime()>=o.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function Cn(e,t){const n=Tn(e,t),r=et((null===t||void 0===t?void 0:t.in)||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),kn(r)}function _n(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in),r=+kn(n)-+Cn(n);return Math.round(r/Xe)+1}function Dn(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in),i=_n(r,n)-t;return r.setDate(r.getDate()-7*i),r}const An=[31,28,31,30,31,30,31,31,30,31,30,31],Rn=[31,29,31,30,31,30,31,31,30,31,30,31];function In(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in);return isNaN(t)?et((null===n||void 0===n?void 0:n.in)||e,NaN):t?(r.setDate(r.getDate()+t),r):r}function Pn(e,t,n){var r,i,o,a,s,l;const c=It(),u=null!==(r=null!==(i=null!==(o=null!==(a=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==a?a:null===n||void 0===n||null===(s=n.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==o?o:c.weekStartsOn)&&void 0!==i?i:null===(l=c.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==r?r:0,d=tt(e,null===n||void 0===n?void 0:n.in),h=d.getDay(),p=7-u;return In(d,t<0||t>6?t-(h+p)%7:((t%7+7)%7+p)%7-(h+p)%7,n)}function Mn(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in).getDay();return 0===n?7:n}function Nn(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in);return In(r,t-Mn(r,n),n)}function jn(e){const t=tt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}const On={G:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",140),(0,Mt.A)(this,"incompatibleTokens",["R","u","t","T"])}parse(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,t,n){return t.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}},y:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",130),(0,Mt.A)(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,t,n){const r=e=>({year:e,isTwoDigitYear:"yy"===t});switch(t){case"y":return un(fn(4,e),r);case"yo":return un(n.ordinalNumber(e,{unit:"year"}),r);default:return un(fn(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n){const r=e.getFullYear();if(n.isTwoDigitYear){const t=yn(n.year,r);return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}const i="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}},Y:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",130),(0,Mt.A)(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,t,n){const r=e=>({year:e,isTwoDigitYear:"YY"===t});switch(t){case"Y":return un(fn(4,e),r);case"Yo":return un(n.ordinalNumber(e,{unit:"year"}),r);default:return un(fn(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n,r){const i=wn(e,r);if(n.isTwoDigitYear){const t=yn(n.year,i);return e.setFullYear(t,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),bn(e,r)}const o="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(o,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),bn(e,r)}},R:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",130),(0,Mt.A)(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,t){return mn("R"===t?4:t.length,e)}set(e,t,n){const r=et(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),kn(r)}},u:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",130),(0,Mt.A)(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,t){return mn("u"===t?4:t.length,e)}set(e,t,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}},Q:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",120),(0,Mt.A)(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"Q":case"QQ":return fn(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}},q:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",120),(0,Mt.A)(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"q":case"qq":return fn(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}},M:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),(0,Mt.A)(this,"priority",110)}parse(e,t,n){const r=e=>e-1;switch(t){case"M":return un(dn(Wt,e),r);case"MM":return un(fn(2,e),r);case"Mo":return un(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}},L:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",110),(0,Mt.A)(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,t,n){const r=e=>e-1;switch(t){case"L":return un(dn(Wt,e),r);case"LL":return un(fn(2,e),r);case"Lo":return un(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}},w:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",100),(0,Mt.A)(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,t,n){switch(t){case"w":return dn(zt,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return fn(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n,r){return bn(En(e,n,r),r)}},I:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",100),(0,Mt.A)(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,t,n){switch(t){case"I":return dn(zt,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return fn(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n){return kn(Dn(e,n))}},d:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",90),(0,Mt.A)(this,"subPriority",1),(0,Mt.A)(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"d":return dn(Bt,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return fn(t.length,e)}}validate(e,t){const n=vn(e.getFullYear()),r=e.getMonth();return n?t>=1&&t<=Rn[r]:t>=1&&t<=An[r]}set(e,t,n){return e.setDate(n),e.setHours(0,0,0,0),e}},D:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",90),(0,Mt.A)(this,"subpriority",1),(0,Mt.A)(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,t,n){switch(t){case"D":case"DD":return dn(Ut,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return fn(t.length,e)}}validate(e,t){return vn(e.getFullYear())?t>=1&&t<=366:t>=1&&t<=365}set(e,t,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}},E:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",90),(0,Mt.A)(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=Pn(e,n,r)).setHours(0,0,0,0),e}},e:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",90),(0,Mt.A)(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,t,n,r){const i=e=>{const t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return un(fn(t.length,e),i);case"eo":return un(n.ordinalNumber(e,{unit:"day"}),i);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=Pn(e,n,r)).setHours(0,0,0,0),e}},c:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",90),(0,Mt.A)(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,t,n,r){const i=e=>{const t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return un(fn(t.length,e),i);case"co":return un(n.ordinalNumber(e,{unit:"day"}),i);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=Pn(e,n,r)).setHours(0,0,0,0),e}},i:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",90),(0,Mt.A)(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,t,n){const r=e=>0===e?7:e;switch(t){case"i":case"ii":return fn(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return un(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return un(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return un(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return un(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,t){return t>=1&&t<=7}set(e,t,n){return(e=Nn(e,n)).setHours(0,0,0,0),e}},a:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",80),(0,Mt.A)(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(gn(n),0,0,0),e}},b:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",80),(0,Mt.A)(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(gn(n),0,0,0),e}},B:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",80),(0,Mt.A)(this,"incompatibleTokens",["a","b","t","T"])}parse(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(gn(n),0,0,0),e}},h:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",70),(0,Mt.A)(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,t,n){switch(t){case"h":return dn(Kt,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return fn(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,n){const r=e.getHours()>=12;return r&&n<12?e.setHours(n+12,0,0,0):r||12!==n?e.setHours(n,0,0,0):e.setHours(0,0,0,0),e}},H:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",70),(0,Mt.A)(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,t,n){switch(t){case"H":return dn(qt,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return fn(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,n){return e.setHours(n,0,0,0),e}},K:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",70),(0,Mt.A)(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,t,n){switch(t){case"K":return dn(Vt,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return fn(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}},k:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",70),(0,Mt.A)(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,t,n){switch(t){case"k":return dn(Ht,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return fn(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,n){const r=n<=24?n%24:n;return e.setHours(r,0,0,0),e}},m:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",60),(0,Mt.A)(this,"incompatibleTokens",["t","T"])}parse(e,t,n){switch(t){case"m":return dn(Yt,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return fn(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setMinutes(n,0,0),e}},s:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",50),(0,Mt.A)(this,"incompatibleTokens",["t","T"])}parse(e,t,n){switch(t){case"s":return dn(Gt,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return fn(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setSeconds(n,0),e}},S:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",30),(0,Mt.A)(this,"incompatibleTokens",["t","T"])}parse(e,t){return un(fn(t.length,e),e=>Math.trunc(e*Math.pow(10,3-t.length)))}set(e,t,n){return e.setMilliseconds(n),e}},X:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",10),(0,Mt.A)(this,"incompatibleTokens",["t","T","x"])}parse(e,t){switch(t){case"X":return hn(on,e);case"XX":return hn(an,e);case"XXXX":return hn(sn,e);case"XXXXX":return hn(cn,e);default:return hn(ln,e)}}set(e,t,n){return t.timestampIsSet?e:et(e,e.getTime()-jn(e)-n)}},x:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",10),(0,Mt.A)(this,"incompatibleTokens",["t","T","X"])}parse(e,t){switch(t){case"x":return hn(on,e);case"xx":return hn(an,e);case"xxxx":return hn(sn,e);case"xxxxx":return hn(cn,e);default:return hn(ln,e)}}set(e,t,n){return t.timestampIsSet?e:et(e,e.getTime()-jn(e)-n)}},t:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",40),(0,Mt.A)(this,"incompatibleTokens","*")}parse(e){return pn(e)}set(e,t,n){return[et(e,1e3*n),{timestampIsSet:!0}]}},T:new class extends Lt{constructor(){super(...arguments),(0,Mt.A)(this,"priority",20),(0,Mt.A)(this,"incompatibleTokens","*")}parse(e){return pn(e)}set(e,t,n){return[et(e,n),{timestampIsSet:!0}]}}},Fn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ln=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Wn=/^'([^]*?)'?$/,Bn=/''/g,Un=/\S/,zn=/[a-zA-Z]/;function qn(e,t,n,r){var i,o,a,s,l,c,u,d,h,p,f,m,g,y;const v=()=>et((null===r||void 0===r?void 0:r.in)||n,NaN),b=Pt(),w=null!==(i=null!==(o=null===r||void 0===r?void 0:r.locale)&&void 0!==o?o:b.locale)&&void 0!==i?i:wt,k=null!==(a=null!==(s=null!==(l=null!==(c=null===r||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==c?c:null===r||void 0===r||null===(u=r.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==l?l:b.firstWeekContainsDate)&&void 0!==s?s:null===(d=b.locale)||void 0===d||null===(d=d.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==a?a:1,x=null!==(h=null!==(p=null!==(f=null!==(m=null===r||void 0===r?void 0:r.weekStartsOn)&&void 0!==m?m:null===r||void 0===r||null===(g=r.locale)||void 0===g||null===(g=g.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==f?f:b.weekStartsOn)&&void 0!==p?p:null===(y=b.locale)||void 0===y||null===(y=y.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==h?h:0;if(!t)return e?v():tt(n,null===r||void 0===r?void 0:r.in);const S={firstWeekContainsDate:k,weekStartsOn:x,locale:w},E=[new Ft(null===r||void 0===r?void 0:r.in,n)],T=t.match(Ln).map(e=>{const t=e[0];if(t in St){return(0,St[t])(e,w.formatLong)}return e}).join("").match(Fn),C=[];for(let R of T){null!==r&&void 0!==r&&r.useAdditionalWeekYearTokens||!Dt(R)||At(R,t,e),null!==r&&void 0!==r&&r.useAdditionalDayOfYearTokens||!_t(R)||At(R,t,e);const n=R[0],i=On[n];if(i){const{incompatibleTokens:t}=i;if(Array.isArray(t)){const e=C.find(e=>t.includes(e.token)||e.token===n);if(e)throw new RangeError("The format string mustn't contain `".concat(e.fullToken,"` and `").concat(R,"` at the same time"))}else if("*"===i.incompatibleTokens&&C.length>0)throw new RangeError("The format string mustn't contain `".concat(R,"` and any other token at the same time"));C.push({token:n,fullToken:R});const r=i.run(e,R,w.match,S);if(!r)return v();E.push(r.setter),e=r.rest}else{if(n.match(zn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===R?R="'":"'"===n&&(R=Hn(R)),0!==e.indexOf(R))return v();e=e.slice(R.length)}}if(e.length>0&&Un.test(e))return v();const _=E.map(e=>e.priority).sort((e,t)=>t-e).filter((e,t,n)=>n.indexOf(e)===t).map(e=>E.filter(t=>t.priority===e).sort((e,t)=>t.subPriority-e.subPriority)).map(e=>e[0]);let D=tt(n,null===r||void 0===r?void 0:r.in);if(isNaN(+D))return v();const A={};for(const R of _){if(!R.validate(D,S))return v();const e=R.set(D,A,S);Array.isArray(e)?(D=e[0],Object.assign(A,e[1])):D=e}return D}function Hn(e){return e.match(Wn)[1].replace(Bn,"'")}function Vn(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function Kn(e){return!(!Vn(e)&&"number"!==typeof e||isNaN(+tt(e)))}function Yn(e,t){return+tt(e)<+tt(t)}function Gn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=et.bind(null,e||n.find(e=>"object"===typeof e));return n.map(i)}function Qn(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in);return n.setHours(0,0,0,0),n}function Xn(e,t,n){const[r,i]=Gn(null===n||void 0===n?void 0:n.in,e,t),o=Qn(r),a=Qn(i),s=+o-jn(o),l=+a-jn(a);return Math.round((s-l)/864e5)}function Jn(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function $n(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in);return Xn(n,Jn(n))+1}function Zn(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const er={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Zn("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):Zn(n+1,2)},d:(e,t)=>Zn(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>Zn(e.getHours()%12||12,t.length),H:(e,t)=>Zn(e.getHours(),t.length),m:(e,t)=>Zn(e.getMinutes(),t.length),s:(e,t)=>Zn(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return Zn(Math.trunc(r*Math.pow(10,n-3)),t.length)}},tr="midnight",nr="noon",rr="morning",ir="afternoon",or="evening",ar="night",sr={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return er.y(e,t)},Y:function(e,t,n,r){const i=wn(e,r),o=i>0?i:1-i;if("YY"===t){return Zn(o%100,2)}return"Yo"===t?n.ordinalNumber(o,{unit:"year"}):Zn(o,t.length)},R:function(e,t){return Zn(Tn(e),t.length)},u:function(e,t){return Zn(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Zn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Zn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return er.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Zn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=Sn(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):Zn(i,t.length)},I:function(e,t,n){const r=_n(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Zn(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):er.d(e,t)},D:function(e,t,n){const r=$n(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Zn(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Zn(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Zn(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return Zn(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(i=12===r?nr:0===r?tr:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(i=r>=17?or:r>=12?ir:r>=4?rr:ar,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return er.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):er.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Zn(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Zn(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):er.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):er.s(e,t)},S:function(e,t){return er.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return cr(r);case"XXXX":case"XX":return ur(r);default:return ur(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return cr(r);case"xxxx":case"xx":return ur(r);default:return ur(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+lr(r,":");default:return"GMT"+ur(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+lr(r,":");default:return"GMT"+ur(r,":")}},t:function(e,t,n){return Zn(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return Zn(+e,t.length)}};function lr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),o=r%60;return 0===o?n+String(i):n+String(i)+t+Zn(o,2)}function cr(e,t){if(e%60===0){return(e>0?"-":"+")+Zn(Math.abs(e)/60,2)}return ur(e,t)}function ur(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e);return n+Zn(Math.trunc(r/60),2)+t+Zn(r%60,2)}const dr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,pr=/^'([^]*?)'?$/,fr=/''/g,mr=/[a-zA-Z]/;function gr(e,t,n){var r,i,o,a,s,l,c,u,d,h,p,f,m,g;const y=It(),v=null!==(r=null!==(i=null===n||void 0===n?void 0:n.locale)&&void 0!==i?i:y.locale)&&void 0!==r?r:wt,b=null!==(o=null!==(a=null!==(s=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==s?s:y.firstWeekContainsDate)&&void 0!==a?a:null===(u=y.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==o?o:1,w=null!==(d=null!==(h=null!==(p=null!==(f=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==f?f:null===n||void 0===n||null===(m=n.locale)||void 0===m||null===(m=m.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==p?p:y.weekStartsOn)&&void 0!==h?h:null===(g=y.locale)||void 0===g||null===(g=g.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==d?d:0,k=tt(e,null===n||void 0===n?void 0:n.in);if(!Kn(k))throw new RangeError("Invalid time value");let x=t.match(hr).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,St[t])(e,v.formatLong)}return e}).join("").match(dr).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:yr(e)};if(sr[t])return{isToken:!0,value:e};if(t.match(mr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});v.localize.preprocessor&&(x=v.localize.preprocessor(k,x));const S={firstWeekContainsDate:b,weekStartsOn:w,locale:v};return x.map(r=>{if(!r.isToken)return r.value;const i=r.value;(null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!Dt(i))&&(null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!_t(i))||At(i,t,String(e));return(0,sr[i[0]])(k,i,v.localize,S)}).join("")}function yr(e){const t=e.match(pr);return t?t[1].replace(fr,"'"):e}function vr(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in);return r.setHours(t),r}function br(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in);return r.setMinutes(t),r}function wr(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in);return r.setSeconds(t),r}function kr(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function xr(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in),r=n.getMonth(),i=r-r%3;return n.setMonth(i,1),n.setHours(0,0,0,0),n}function Sr(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in);return n.setHours(23,59,59,999),n}function Er(e,t){var n,r,i,o,a,s;const l=It(),c=null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:l.weekStartsOn)&&void 0!==r?r:null===(s=l.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==n?n:0,u=tt(e,null===t||void 0===t?void 0:t.in),d=u.getDay(),h=6+(d<c?-7:0)-(d-c);return u.setDate(u.getDate()+h),u.setHours(23,59,59,999),u}function Tr(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Cr(e,t,n){const[r,i]=Gn(null===n||void 0===n?void 0:n.in,e,t);return r.getFullYear()===i.getFullYear()}function _r(e,t,n){const[r,i]=Gn(null===n||void 0===n?void 0:n.in,e,t);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function Dr(e,t,n){const[r,i]=Gn(null===n||void 0===n?void 0:n.in,e,t);return+xr(r)===+xr(i)}function Ar(e,t,n){const[r,i]=Gn(null===n||void 0===n?void 0:n.in,e,t);return+Qn(r)===+Qn(i)}function Rr(e,t){return+tt(e)===+tt(t)}function Ir(e,t,n){const r=+tt(e,null===n||void 0===n?void 0:n.in),[i,o]=[+tt(t.start,null===n||void 0===n?void 0:n.in),+tt(t.end,null===n||void 0===n?void 0:n.in)].sort((e,t)=>e-t);return r>=i&&r<=o}function Pr(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in),r=n.getFullYear(),i=n.getMonth(),o=et(n,0);return o.setFullYear(r,i+1,0),o.setHours(0,0,0,0),o.getDate()}function Mr(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in),i=r.getFullYear(),o=r.getDate(),a=et((null===n||void 0===n?void 0:n.in)||e,0);a.setFullYear(i,t,15),a.setHours(0,0,0,0);const s=Pr(a);return r.setMonth(t,Math.min(o,s)),r}function Nr(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in),i=t-(Math.trunc(r.getMonth()/3)+1);return Mr(r,r.getMonth()+3*i)}function jr(e,t){return tt(e,null===t||void 0===t?void 0:t.in).getFullYear()}function Or(e,t){return tt(e,null===t||void 0===t?void 0:t.in).getMonth()}function Fr(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function Lr(e,t){const n=tt(e,null===t||void 0===t?void 0:t.in);return Math.trunc(n.getMonth()/3)+1}function Wr(e,t){return tt(e,null===t||void 0===t?void 0:t.in).getHours()}function Br(e,t){return tt(e,null===t||void 0===t?void 0:t.in).getMinutes()}function Ur(e){return tt(e).getSeconds()}function zr(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in);if(isNaN(t))return et((null===n||void 0===n?void 0:n.in)||e,NaN);if(!t)return r;const i=r.getDate(),o=et((null===n||void 0===n?void 0:n.in)||e,r.getTime());o.setMonth(r.getMonth()+t+1,0);return i>=o.getDate()?o:(r.setFullYear(o.getFullYear(),o.getMonth(),i),r)}function qr(e,t,n){return zr(e,-t,n)}function Hr(e,t,n){const[r,i]=Gn(null===n||void 0===n?void 0:n.in,e,t);return 12*(r.getFullYear()-i.getFullYear())+(r.getMonth()-i.getMonth())}function Vr(e,t,n){return zr(e,3*t,n)}function Kr(e,t,n){return Vr(e,-t,n)}function Yr(e,t,n){const[r,i]=Gn(null===n||void 0===n?void 0:n.in,e,t);return 4*(r.getFullYear()-i.getFullYear())+(Lr(r)-Lr(i))}function Gr(e,t,n){return zr(e,12*t,n)}function Qr(e,t,n){return Gr(e,-t,n)}function Xr(e,t,n){const[r,i]=Gn(null===n||void 0===n?void 0:n.in,e,t);return r.getFullYear()-i.getFullYear()}function Jr(e,t){let n,r=null===t||void 0===t?void 0:t.in;return e.forEach(e=>{r||"object"!==typeof e||(r=et.bind(null,e));const t=tt(e,r);(!n||n>t||isNaN(+t))&&(n=t)}),et(r,n||NaN)}function $r(e,t){let n,r=null===t||void 0===t?void 0:t.in;return e.forEach(e=>{r||"object"!==typeof e||(r=et.bind(null,e));const t=tt(e,r);(!n||n<t||isNaN(+t))&&(n=t)}),et(r,n||NaN)}function Zr(e,t,n){return et((null===n||void 0===n?void 0:n.in)||e,+tt(e)+t)}function ei(e,t,n){return Zr(e,t*$e,n)}function ti(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in);return r.setTime(r.getTime()+t*Je),r}function ni(e,t,n){return Zr(e,1e3*t,n)}function ri(e,t){return+tt(e)>+tt(t)}function ii(e,t){return tt(e,null===t||void 0===t?void 0:t.in).getDay()}function oi(e,t){return tt(e,null===t||void 0===t?void 0:t.in).getDate()}function ai(e,t,n){return In(e,7*t,n)}function si(e){return+tt(e)}function li(e,t,n){const r=tt(e,null===n||void 0===n?void 0:n.in);return isNaN(+r)?et((null===n||void 0===n?void 0:n.in)||e,NaN):(r.setFullYear(t),r)}function ci(e,t,n){const[r,i]=Gn(null===n||void 0===n?void 0:n.in,e,t),o=ui(r,i),a=Math.abs(Xn(r,i));r.setDate(r.getDate()-o*a);const s=o*(a-Number(ui(r,i)===-o));return 0===s?0:s}function ui(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function di(e,t,n){return ai(e,-t,n)}function hi(e,t,n){return In(e,-t,n)}var pi="undefined"!==typeof document?i.useLayoutEffect:function(){};const fi=(0,s.A)({},o).useInsertionEffect||(e=>e());function mi(){return"undefined"!==typeof window}function gi(e){return bi(e)?(e.nodeName||"").toLowerCase():"#document"}function yi(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function vi(e){var t;return null==(t=(bi(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function bi(e){return!!mi()&&(e instanceof Node||e instanceof yi(e).Node)}function wi(e){return!!mi()&&(e instanceof Element||e instanceof yi(e).Element)}function ki(e){return!!mi()&&(e instanceof HTMLElement||e instanceof yi(e).HTMLElement)}function xi(e){return!(!mi()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof yi(e).ShadowRoot)}const Si=new Set(["inline","contents"]);function Ei(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Oi(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Si.has(i)}const Ti=new Set(["table","td","th"]);function Ci(e){return Ti.has(gi(e))}const _i=[":popover-open",":modal"];function Di(e){return _i.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const Ai=["transform","translate","scale","rotate","perspective"],Ri=["transform","translate","scale","rotate","perspective","filter"],Ii=["paint","layout","strict","content"];function Pi(e){const t=Mi(),n=wi(e)?Oi(e):e;return Ai.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||Ri.some(e=>(n.willChange||"").includes(e))||Ii.some(e=>(n.contain||"").includes(e))}function Mi(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const Ni=new Set(["html","body","#document"]);function ji(e){return Ni.has(gi(e))}function Oi(e){return yi(e).getComputedStyle(e)}function Fi(e){return wi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Li(e){if("html"===gi(e))return e;const t=e.assignedSlot||e.parentNode||xi(e)&&e.host||vi(e);return xi(t)?t.host:t}function Wi(e){const t=Li(e);return ji(t)?e.ownerDocument?e.ownerDocument.body:e.body:ki(t)&&Ei(t)?t:Wi(t)}function Bi(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=Wi(e),o=i===(null==(r=e.ownerDocument)?void 0:r.body),a=yi(i);if(o){const e=Ui(a);return t.concat(a,a.visualViewport||[],Ei(i)?i:[],e&&n?Bi(e):[])}return t.concat(i,Bi(i,[],n))}function Ui(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const zi=Math.min,qi=Math.max,Hi=Math.round,Vi=Math.floor,Ki=e=>({x:e,y:e}),Yi={left:"right",right:"left",bottom:"top",top:"bottom"},Gi={start:"end",end:"start"};function Qi(e,t){return"function"===typeof e?e(t):e}function Xi(e){return e.split("-")[0]}function Ji(e){return e.split("-")[1]}function $i(e){return"y"===e?"height":"width"}const Zi=new Set(["top","bottom"]);function eo(e){return Zi.has(Xi(e))?"y":"x"}function to(e){return"x"===eo(e)?"y":"x"}function no(e){return e.replace(/start|end/g,e=>Gi[e])}const ro=["left","right"],io=["right","left"],oo=["top","bottom"],ao=["bottom","top"];function so(e,t,n,r){const i=Ji(e);let o=function(e,t,n){switch(e){case"top":case"bottom":return n?t?io:ro:t?ro:io;case"left":case"right":return t?oo:ao;default:return[]}}(Xi(e),"start"===n,r);return i&&(o=o.map(e=>e+"-"+i),t&&(o=o.concat(o.map(no)))),o}function lo(e){return e.replace(/left|right|bottom|top/g,e=>Yi[e])}function co(e){return"number"!==typeof e?function(e){return(0,s.A)({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function uo(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}const ho=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"];function po(e,t,n){let{reference:r,floating:i}=e;const o=eo(t),a=to(t),s=$i(a),l=Xi(t),c="y"===o,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[s]/2-i[s]/2;let p;switch(l){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(Ji(t)){case"start":p[a]-=h*(n&&c?-1:1);break;case"end":p[a]+=h*(n&&c?-1:1)}return p}async function fo(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:o,rects:a,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=Qi(t,e),f=co(p),m=s[h?"floating"===d?"reference":"floating":d],g=uo(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(m)))||n?m:m.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(s.floating)),boundary:c,rootBoundary:u,strategy:l})),y="floating"===d?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,v=await(null==o.getOffsetParent?void 0:o.getOffsetParent(s.floating)),b=await(null==o.isElement?void 0:o.isElement(v))&&await(null==o.getScale?void 0:o.getScale(v))||{x:1,y:1},w=uo(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:y,offsetParent:v,strategy:l}):y);return{top:(g.top-w.top+f.top)/b.y,bottom:(w.bottom-g.bottom+f.bottom)/b.y,left:(g.left-w.left+f.left)/b.x,right:(w.right-g.right+f.right)/b.x}}const mo=new Set(["left","top"]);function go(e){const t=Oi(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=ki(e),o=i?e.offsetWidth:n,a=i?e.offsetHeight:r,s=Hi(n)!==o||Hi(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}function yo(e){return wi(e)?e:e.contextElement}function vo(e){const t=yo(e);if(!ki(t))return Ki(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=go(t);let a=(o?Hi(n.width):n.width)/r,s=(o?Hi(n.height):n.height)/i;return a&&Number.isFinite(a)||(a=1),s&&Number.isFinite(s)||(s=1),{x:a,y:s}}const bo=Ki(0);function wo(e){const t=yi(e);return Mi()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:bo}function ko(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),o=yo(e);let a=Ki(1);t&&(r?wi(r)&&(a=vo(r)):a=vo(e));const s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==yi(e))&&t}(o,n,r)?wo(o):Ki(0);let l=(i.left+s.x)/a.x,c=(i.top+s.y)/a.y,u=i.width/a.x,d=i.height/a.y;if(o){const e=yi(o),t=r&&wi(r)?yi(r):r;let n=e,i=Ui(n);for(;i&&r&&t!==n;){const e=vo(i),t=i.getBoundingClientRect(),r=Oi(i),o=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,a=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=o,c+=a,n=yi(i),i=Ui(n)}}return uo({width:u,height:d,x:l,y:c})}function xo(e,t){const n=Fi(e).scrollLeft;return t?t.left+n:ko(vi(e)).left+n}function So(e,t){const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-xo(e,n),y:n.top+t.scrollTop}}const Eo=new Set(["absolute","fixed"]);function To(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=yi(e),r=vi(e),i=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;const e=Mi();(!e||e&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}const c=xo(r);if(c<=0){const e=r.ownerDocument,t=e.body,n=getComputedStyle(t),i="CSS1Compat"===e.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,a=Math.abs(r.clientWidth-t.clientWidth-i);a<=25&&(o-=a)}else c<=25&&(o+=c);return{width:o,height:a,x:s,y:l}}(e,n);else if("document"===t)r=function(e){const t=vi(e),n=Fi(e),r=e.ownerDocument.body,i=qi(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=qi(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+xo(e);const s=-n.scrollTop;return"rtl"===Oi(r).direction&&(a+=qi(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:s}}(vi(e));else if(wi(t))r=function(e,t){const n=ko(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=ki(e)?vo(e):Ki(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:i*o.x,y:r*o.y}}(t,n);else{const n=wo(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return uo(r)}function Co(e,t){const n=Li(e);return!(n===t||!wi(n)||ji(n))&&("fixed"===Oi(n).position||Co(n,t))}function _o(e,t,n){const r=ki(t),i=vi(t),o="fixed"===n,a=ko(e,!0,o,t);let s={scrollLeft:0,scrollTop:0};const l=Ki(0);function c(){l.x=xo(i)}if(r||!r&&!o)if(("body"!==gi(t)||Ei(i))&&(s=Fi(t)),r){const e=ko(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&c();o&&!r&&i&&c();const u=!i||r||o?Ki(0):So(i,s);return{x:a.left+s.scrollLeft-l.x-u.x,y:a.top+s.scrollTop-l.y-u.y,width:a.width,height:a.height}}function Do(e){return"static"===Oi(e).position}function Ao(e,t){if(!ki(e)||"fixed"===Oi(e).position)return null;if(t)return t(e);let n=e.offsetParent;return vi(e)===n&&(n=n.ownerDocument.body),n}function Ro(e,t){const n=yi(e);if(Di(e))return n;if(!ki(e)){let t=Li(e);for(;t&&!ji(t);){if(wi(t)&&!Do(t))return t;t=Li(t)}return n}let r=Ao(e,t);for(;r&&Ci(r)&&Do(r);)r=Ao(r,t);return r&&ji(r)&&Do(r)&&!Pi(r)?n:r||function(e){let t=Li(e);for(;ki(t)&&!ji(t);){if(Pi(t))return t;if(Di(t))return null;t=Li(t)}return null}(e)||n}const Io={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o="fixed"===i,a=vi(r),s=!!t&&Di(t.floating);if(r===a||s&&o)return n;let l={scrollLeft:0,scrollTop:0},c=Ki(1);const u=Ki(0),d=ki(r);if((d||!d&&!o)&&(("body"!==gi(r)||Ei(a))&&(l=Fi(r)),ki(r))){const e=ko(r);c=vo(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!a||d||o?Ki(0):So(a,l);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:vi,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[..."clippingAncestors"===n?Di(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=Bi(e,[],!1).filter(e=>wi(e)&&"body"!==gi(e)),i=null;const o="fixed"===Oi(e).position;let a=o?Li(e):e;for(;wi(a)&&!ji(a);){const t=Oi(a),n=Pi(a);n||"fixed"!==t.position||(i=null),(o?!n&&!i:!n&&"static"===t.position&&i&&Eo.has(i.position)||Ei(a)&&!n&&Co(e,a))?r=r.filter(e=>e!==a):i=t,a=Li(a)}return t.set(e,r),r}(t,this._c):[].concat(n),r],a=o[0],s=o.reduce((e,n)=>{const r=To(t,n,i);return e.top=qi(r.top,e.top),e.right=zi(r.right,e.right),e.bottom=zi(r.bottom,e.bottom),e.left=qi(r.left,e.left),e},To(t,a,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:Ro,getElementRects:async function(e){const t=this.getOffsetParent||Ro,n=this.getDimensions,r=await n(e.floating);return{reference:_o(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=go(e);return{width:t,height:n}},getScale:vo,isElement:wi,isRTL:function(e){return"rtl"===Oi(e).direction}};function Po(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Mo(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a="function"===typeof ResizeObserver,layoutShift:l="function"===typeof IntersectionObserver,animationFrame:c=!1}=r,u=yo(e),d=i||o?[...u?Bi(u):[],...Bi(t)]:[];d.forEach(e=>{i&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)});const h=u&&l?function(e,t){let n,r=null;const i=vi(e);function o(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function a(l,c){void 0===l&&(l=!1),void 0===c&&(c=1),o();const u=e.getBoundingClientRect(),{left:d,top:h,width:p,height:f}=u;if(l||t(),!p||!f)return;const m={rootMargin:-Vi(h)+"px "+-Vi(i.clientWidth-(d+p))+"px "+-Vi(i.clientHeight-(h+f))+"px "+-Vi(d)+"px",threshold:qi(0,zi(1,c))||1};let g=!0;function y(t){const r=t[0].intersectionRatio;if(r!==c){if(!g)return a();r?a(!1,r):n=setTimeout(()=>{a(!1,1e-7)},1e3)}1!==r||Po(u,e.getBoundingClientRect())||a(),g=!1}try{r=new IntersectionObserver(y,(0,s.A)((0,s.A)({},m),{},{root:i.ownerDocument}))}catch(v){r=new IntersectionObserver(y,m)}r.observe(e)}(!0),o}(u,n):null;let p,f=-1,m=null;a&&(m=new ResizeObserver(e=>{let[r]=e;r&&r.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=m)||e.observe(t)})),n()}),u&&!c&&m.observe(u),m.observe(t));let g=c?ko(e):null;return c&&function t(){const r=ko(e);g&&!Po(g,r)&&n();g=r,p=requestAnimationFrame(t)}(),n(),()=>{var e;d.forEach(e=>{i&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)}),null==h||h(),null==(e=m)||e.disconnect(),m=null,c&&cancelAnimationFrame(p)}}const No=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:a,middlewareData:l}=t,c=await async function(e,t){const{placement:n,platform:r,elements:i}=e,o=await(null==r.isRTL?void 0:r.isRTL(i.floating)),a=Xi(n),s=Ji(n),l="y"===eo(n),c=mo.has(a)?-1:1,u=o&&l?-1:1,d=Qi(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:f}="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&"number"===typeof f&&(p="end"===s?-1*f:f),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}(t,e);return a===(null==(n=l.offset)?void 0:n.placement)&&null!=(r=l.arrow)&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:(0,s.A)((0,s.A)({},c),{},{placement:a})}}}},jo=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:l,elements:c}=t,u=Qi(e,t),{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0}=u,y=(0,Fe.A)(u,ho);if(null!=(n=o.arrow)&&n.alignmentOffset)return{};const v=Xi(i),b=eo(s),w=Xi(s)===s,k=await(null==l.isRTL?void 0:l.isRTL(c.floating)),x=p||(w||!g?[lo(s)]:function(e){const t=lo(e);return[no(e),t,no(t)]}(s)),S="none"!==m;!p&&S&&x.push(...so(s,g,m,k));const E=[s,...x],T=await fo(t,y),C=[];let _=(null==(r=o.flip)?void 0:r.overflows)||[];if(d&&C.push(T[v]),h){const e=function(e,t,n){void 0===n&&(n=!1);const r=Ji(e),i=to(e),o=$i(i);let a="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=lo(a)),[a,lo(a)]}(i,a,k);C.push(T[e[0]],T[e[1]])}if(_=[..._,{placement:i,overflows:C}],!C.every(e=>e<=0)){var D,A;const e=((null==(D=o.flip)?void 0:D.index)||0)+1,t=E[e];if(t){if(!("alignment"===h&&b!==eo(t))||_.every(e=>eo(e.placement)!==b||e.overflows[0]>0))return{data:{index:e,overflows:_},reset:{placement:t}}}let n=null==(A=_.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:A.placement;if(!n)switch(f){case"bestFit":{var R;const e=null==(R=_.filter(e=>{if(S){const t=eo(e.placement);return t===b||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:R[0];e&&(n=e);break}case"initialPlacement":n=s}if(i!==n)return{reset:{placement:n}}}return{}}}},Oo=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=Qi(e,t)||{};if(null==u)return{};const h=co(d),p={x:n,y:r},f=to(i),m=$i(f),g=await a.getDimensions(u),y="y"===f,v=y?"top":"left",b=y?"bottom":"right",w=y?"clientHeight":"clientWidth",k=o.reference[m]+o.reference[f]-p[f]-o.floating[m],x=p[f]-o.reference[f],S=await(null==a.getOffsetParent?void 0:a.getOffsetParent(u));let E=S?S[w]:0;E&&await(null==a.isElement?void 0:a.isElement(S))||(E=l.floating[w]||o.floating[m]);const T=k/2-x/2,C=E/2-g[m]/2-1,_=zi(h[v],C),D=zi(h[b],C),A=_,R=E-g[m]-D,I=E/2-g[m]/2+T,P=qi(A,zi(I,R));const M=!c.arrow&&null!=Ji(i)&&I!==P&&o.reference[m]/2-(I<A?_:D)-g[m]/2<0,N=M?I<A?I-A:I-R:0;return{[f]:p[f]+N,data:(0,s.A)({[f]:P,centerOffset:I-P-N},M&&{alignmentOffset:N}),reset:M}}}),Fo=(e,t,n)=>{const r=new Map,i=(0,s.A)({platform:Io},n),o=(0,s.A)((0,s.A)({},i.platform),{},{_c:r});return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,l=o.filter(Boolean),c=await(null==a.isRTL?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:h}=po(u,r,c),p=r,f={},m=0;for(let g=0;g<l.length;g++){const{name:n,fn:o}=l[g],{x:y,y:v,data:b,reset:w}=await o({x:d,y:h,initialPlacement:r,placement:p,strategy:i,middlewareData:f,rects:u,platform:a,elements:{reference:e,floating:t}});d=null!=y?y:d,h=null!=v?v:h,f=(0,s.A)((0,s.A)({},f),{},{[n]:(0,s.A)((0,s.A)({},f[n]),b)}),w&&m<=50&&(m++,"object"===typeof w&&(w.placement&&(p=w.placement),w.rects&&(u=!0===w.rects?await a.getElementRects({reference:e,floating:t,strategy:i}):w.rects),({x:d,y:h}=po(u,p,c))),g=-1)}return{x:d,y:h,placement:p,strategy:i,middlewareData:f}})(e,t,(0,s.A)((0,s.A)({},i),{},{platform:o}))};var Lo="undefined"!==typeof document?i.useLayoutEffect:function(){};function Wo(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!Wo(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){const n=i[r];if(("_owner"!==n||!e.$$typeof)&&!Wo(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function Bo(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Uo(e,t){const n=Bo(e);return Math.round(t*n)/n}function zo(e){const t=i.useRef(e);return Lo(()=>{t.current=e}),t}const qo=(e,t)=>(0,s.A)((0,s.A)({},No(e)),{},{options:[e,t]}),Ho=(e,t)=>(0,s.A)((0,s.A)({},(e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"===typeof e?e(t):e;return n&&(i=n,{}.hasOwnProperty.call(i,"current"))?null!=n.current?Oo({element:n.current,padding:r}).fn(t):{}:n?Oo({element:n,padding:r}).fn(t):{};var i}}))(e)),{},{options:[e,t]}),Vo=["transform"],Ko=["context","width","height","tipRadius","strokeWidth","staticOffset","stroke","d","style"];const Yo="ArrowLeft",Go="ArrowRight",Qo="ArrowUp",Xo="ArrowDown";const Jo=[Yo,Go],$o=[Qo,Xo],Zo=(0,s.A)({},o);let ea=!1,ta=0;const na=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+ta++;const ra=Zo.useId||function(){const[e,t]=i.useState(()=>ea?na():void 0);return pi(()=>{null==e&&t(na())},[]),i.useEffect(()=>{ea=!0},[]),e};const ia=i.forwardRef(function(e,t){const{context:{placement:n,elements:{floating:r},middlewareData:{arrow:o,shift:a}},width:l=14,height:c=7,tipRadius:u=0,strokeWidth:d=0,staticOffset:h,stroke:p,d:f,style:{transform:m}={}}=e,g=(0,Fe.A)(e.style,Vo),y=(0,Fe.A)(e,Ko);const v=ra(),[b,w]=i.useState(!1);if(pi(()=>{if(!r)return;"rtl"===Oi(r).direction&&w(!0)},[r]),!r)return null;const[k,x]=n.split("-"),S="top"===k||"bottom"===k;let E=h;(S&&null!=a&&a.x||!S&&null!=a&&a.y)&&(E=null);const T=2*d,C=T/2,_=l/2*(u/-8+1),D=c/2*u/4,A=!!f,R=E&&"end"===x?"bottom":"top";let I=E&&"end"===x?"right":"left";E&&b&&(I="end"===x?"left":"right");const P=null!=(null==o?void 0:o.x)?E||o.x:"",M=null!=(null==o?void 0:o.y)?E||o.y:"",N=f||"M0,0 H"+l+" L"+(l-_)+","+(c-D)+" Q"+l/2+","+c+" "+_+","+(c-D)+" Z",j={top:A?"rotate(180deg)":"",left:A?"rotate(90deg)":"rotate(-90deg)",bottom:A?"":"rotate(180deg)",right:A?"rotate(-90deg)":"rotate(90deg)"}[k];return(0,Ne.jsxs)("svg",(0,s.A)((0,s.A)({},y),{},{"aria-hidden":!0,ref:t,width:A?l:l+T,height:l,viewBox:"0 0 "+l+" "+(c>l?c:l),style:(0,s.A)({position:"absolute",pointerEvents:"none",[I]:P,[R]:M,[k]:S||A?"100%":"calc(100% - "+T/2+"px)",transform:[j,m].filter(e=>!!e).join(" ")},g),children:[T>0&&(0,Ne.jsx)("path",{clipPath:"url(#"+v+")",fill:"none",stroke:p,strokeWidth:T+(f?0:1),d:N}),(0,Ne.jsx)("path",{stroke:T&&!f?y.fill:"none",d:N}),(0,Ne.jsx)("clipPath",{id:v,children:(0,Ne.jsx)("rect",{x:-C,y:C*(A?-1:1),width:l+T,height:l})})]}))});function oa(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach(e=>e(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;null==(r=e.get(t))||r.delete(n)}}}const aa=i.createContext(null),sa=i.createContext(null),la=()=>{var e;return(null==(e=i.useContext(aa))?void 0:e.id)||null},ca=()=>i.useContext(sa);function ua(e){const{open:t=!1,onOpenChange:n,elements:r}=e,o=ra(),a=i.useRef({}),[s]=i.useState(()=>oa()),l=null!=la();const[c,u]=i.useState(r.reference),d=function(e){const t=i.useRef(()=>{});return fi(()=>{t.current=e}),i.useCallback(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}((e,t,r)=>{a.current.openEvent=e?t:void 0,s.emit("openchange",{open:e,event:t,reason:r,nested:l}),null==n||n(e,t,r)}),h=i.useMemo(()=>({setPositionReference:u}),[]),p=i.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return i.useMemo(()=>({dataRef:a,open:t,onOpenChange:d,elements:p,events:s,floatingId:o,refs:h}),[t,d,p,s,o,h])}function da(e){void 0===e&&(e={});const{nodeId:t}=e,n=ua((0,s.A)((0,s.A)({},e),{},{elements:(0,s.A)({reference:null,floating:null},e.elements)})),r=e.rootContext||n,o=r.elements,[a,l]=i.useState(null),[c,u]=i.useState(null),d=(null==o?void 0:o.domReference)||a,h=i.useRef(null),p=ca();pi(()=>{d&&(h.current=d)},[d]);const f=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:a,floating:l}={},transform:c=!0,whileElementsMounted:u,open:d}=e,[h,p]=i.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,m]=i.useState(r);Wo(f,r)||m(r);const[g,y]=i.useState(null),[v,b]=i.useState(null),w=i.useCallback(e=>{e!==E.current&&(E.current=e,y(e))},[]),k=i.useCallback(e=>{e!==T.current&&(T.current=e,b(e))},[]),x=a||g,S=l||v,E=i.useRef(null),T=i.useRef(null),C=i.useRef(h),_=null!=u,D=zo(u),A=zo(o),R=zo(d),I=i.useCallback(()=>{if(!E.current||!T.current)return;const e={placement:t,strategy:n,middleware:f};A.current&&(e.platform=A.current),Fo(E.current,T.current,e).then(e=>{const t=(0,s.A)((0,s.A)({},e),{},{isPositioned:!1!==R.current});P.current&&!Wo(C.current,t)&&(C.current=t,we.flushSync(()=>{p(t)}))})},[f,t,n,A,R]);Lo(()=>{!1===d&&C.current.isPositioned&&(C.current.isPositioned=!1,p(e=>(0,s.A)((0,s.A)({},e),{},{isPositioned:!1})))},[d]);const P=i.useRef(!1);Lo(()=>(P.current=!0,()=>{P.current=!1}),[]),Lo(()=>{if(x&&(E.current=x),S&&(T.current=S),x&&S){if(D.current)return D.current(x,S,I);I()}},[x,S,I,D,_]);const M=i.useMemo(()=>({reference:E,floating:T,setReference:w,setFloating:k}),[w,k]),N=i.useMemo(()=>({reference:x,floating:S}),[x,S]),j=i.useMemo(()=>{const e={position:n,left:0,top:0};if(!N.floating)return e;const t=Uo(N.floating,h.x),r=Uo(N.floating,h.y);return c?(0,s.A)((0,s.A)({},e),{},{transform:"translate("+t+"px, "+r+"px)"},Bo(N.floating)>=1.5&&{willChange:"transform"}):{position:n,left:t,top:r}},[n,c,N.floating,h.x,h.y]);return i.useMemo(()=>(0,s.A)((0,s.A)({},h),{},{update:I,refs:M,elements:N,floatingStyles:j}),[h,I,M,N,j])}((0,s.A)((0,s.A)({},e),{},{elements:(0,s.A)((0,s.A)({},o),c&&{reference:c})})),m=i.useCallback(e=>{const t=wi(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),getClientRects:()=>e.getClientRects(),contextElement:e}:e;u(t),f.refs.setReference(t)},[f.refs]),g=i.useCallback(e=>{(wi(e)||null===e)&&(h.current=e,l(e)),(wi(f.refs.reference.current)||null===f.refs.reference.current||null!==e&&!wi(e))&&f.refs.setReference(e)},[f.refs]),y=i.useMemo(()=>(0,s.A)((0,s.A)({},f.refs),{},{setReference:g,setPositionReference:m,domReference:h}),[f.refs,g,m]),v=i.useMemo(()=>(0,s.A)((0,s.A)({},f.elements),{},{domReference:d}),[f.elements,d]),b=i.useMemo(()=>(0,s.A)((0,s.A)((0,s.A)({},f),r),{},{refs:y,elements:v,nodeId:t}),[f,y,v,t,r]);return pi(()=>{r.dataRef.current.floatingContext=b;const e=null==p?void 0:p.nodesRef.current.find(e=>e.id===t);e&&(e.context=b)}),i.useMemo(()=>(0,s.A)((0,s.A)({},f),{},{context:b,refs:y,elements:v}),[f,y,v,b])}var ha=function(e,t){return ha=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},ha(e,t)};function pa(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ha(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var fa=function(){return fa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},fa.apply(this,arguments)};function ma(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}"function"===typeof SuppressedError&&SuppressedError;var ga,ya=function(e){var t=e.showTimeSelectOnly,n=void 0!==t&&t,r=e.showTime,o=void 0!==r&&r,a=e.className,s=e.children,l=n?"Choose Time":"Choose Date".concat(o?" and Time":"");return i.createElement("div",{className:a,role:"dialog","aria-label":l,"aria-modal":"true"},s)},va=function(e){var t=e.children,n=e.onClickOutside,r=e.className,o=e.containerRef,a=e.style,s=function(e,t){var n=(0,i.useRef)(null),r=(0,i.useRef)(e);r.current=e;var o=(0,i.useCallback)(function(e){var i,o=e.composed&&e.composedPath&&e.composedPath().find(function(e){return e instanceof Node})||e.target;n.current&&!n.current.contains(o)&&(t&&o instanceof HTMLElement&&o.classList.contains(t)||null===(i=r.current)||void 0===i||i.call(r,e))},[t]);return(0,i.useEffect)(function(){return document.addEventListener("mousedown",o),function(){document.removeEventListener("mousedown",o)}},[o]),n}(n,e.ignoreClass);return i.createElement("div",{className:r,style:a,ref:function(e){s.current=e,o&&(o.current=e)}},t)};function ba(){return"undefined"!==typeof window?window:globalThis}!function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"}(ga||(ga={}));function wa(e){if(null==e)return new Date;var t="string"===typeof e?nt(e):tt(e);return xa(t)?t:new Date}function ka(e,t,n,r,i){void 0===i&&(i=wa());for(var o=Ua(n)||Ua(Ba()),a=0,s=Array.isArray(t)?t:[t];a<s.length;a++){var l=s[a],c=qn(e,l,i,{locale:o,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});if(xa(c)&&(!r||e===Sa(c,l,n)))return c}return null}function xa(e,t){return Kn(e)&&!Yn(e,new Date("1/1/1800"))}function Sa(e,t,n){if("en"===n)return gr(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=n?Ua(n):void 0;return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),gr(e,t,{locale:r=r||Ua(Ba()),useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Ea(e,t){var n=t.dateFormat,r=t.locale,i=Array.isArray(n)&&n.length>0?n[0]:n;return e&&Sa(e,i,r)||""}function Ta(e,t){var n=t.hour,r=void 0===n?0:n,i=t.minute,o=void 0===i?0:i,a=t.second;return vr(br(wr(e,void 0===a?0:a),o),r)}function Ca(e){return Qn(e)}function _a(e,t,n){return bn(e,{locale:Ua(t||Ba()),weekStartsOn:n})}function Da(e){return kr(e)}function Aa(e){return Jn(e)}function Ra(e){return xr(e)}function Ia(){return Qn(wa())}function Pa(e){return Sr(e)}function Ma(e){return Tr(e)}function Na(e,t){return e&&t?Cr(e,t):!e&&!t}function ja(e,t){return e&&t?_r(e,t):!e&&!t}function Oa(e,t){return e&&t?Dr(e,t):!e&&!t}function Fa(e,t){return e&&t?Ar(e,t):!e&&!t}function La(e,t){return e&&t?Rr(e,t):!e&&!t}function Wa(e,t,n){var r,i=Qn(t),o=Sr(n);try{r=Ir(e,{start:i,end:o})}catch(a){r=!1}return r}function Ba(){return ba().__localeId__}function Ua(e){if("string"===typeof e){var t=ba();return t.__localeData__?t.__localeData__[e]:void 0}return e}function za(e,t){return Sa(Mr(wa(),e),"LLLL",t)}function qa(e,t){return Sa(Mr(wa(),e),"LLL",t)}function Ha(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.maxDate,o=n.excludeDates,a=n.excludeDateIntervals,s=n.includeDates,l=n.includeDateIntervals,c=n.filterDate;return Za(e,{minDate:r,maxDate:i})||o&&o.some(function(t){return t instanceof Date?Fa(e,t):Fa(e,t.date)})||a&&a.some(function(t){var n=t.start,r=t.end;return Ir(e,{start:n,end:r})})||s&&!s.some(function(t){return Fa(e,t)})||l&&!l.some(function(t){var n=t.start,r=t.end;return Ir(e,{start:n,end:r})})||c&&!c(wa(e))||!1}function Va(e,t){var n=void 0===t?{}:t,r=n.excludeDates,i=n.excludeDateIntervals;return i&&i.length>0?i.some(function(t){var n=t.start,r=t.end;return Ir(e,{start:n,end:r})}):r&&r.some(function(t){var n;return t instanceof Date?Fa(e,t):Fa(e,null!==(n=t.date)&&void 0!==n?n:new Date)})||!1}function Ka(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.maxDate,o=n.excludeDates,a=n.includeDates,s=n.filterDate;return Za(e,{minDate:r?kr(r):void 0,maxDate:i?Tr(i):void 0})||(null===o||void 0===o?void 0:o.some(function(t){return ja(e,t instanceof Date?t:t.date)}))||a&&!a.some(function(t){return ja(e,t)})||s&&!s(wa(e))||!1}function Ya(e,t,n,r){var i=jr(e),o=Or(e),a=jr(t),s=Or(t),l=jr(r);return i===a&&i===l?o<=n&&n<=s:i<a&&(l===i&&o<=n||l===a&&s>=n||l<a&&l>i)}function Ga(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.maxDate,o=n.excludeDates,a=n.includeDates;return Za(e,{minDate:r,maxDate:i})||o&&o.some(function(t){return ja(t instanceof Date?t:t.date,e)})||a&&!a.some(function(t){return ja(t,e)})||!1}function Qa(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.maxDate,o=n.excludeDates,a=n.includeDates,s=n.filterDate;return Za(e,{minDate:r,maxDate:i})||(null===o||void 0===o?void 0:o.some(function(t){return Oa(e,t instanceof Date?t:t.date)}))||a&&!a.some(function(t){return Oa(e,t)})||s&&!s(wa(e))||!1}function Xa(e,t,n){if(!t||!n)return!1;if(!Kn(t)||!Kn(n))return!1;var r=jr(t),i=jr(n);return r<=e&&i>=e}function Ja(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.maxDate,o=n.excludeDates,a=n.includeDates,s=n.filterDate,l=new Date(e,0,1);return Za(l,{minDate:r?Jn(r):void 0,maxDate:i?Fr(i):void 0})||(null===o||void 0===o?void 0:o.some(function(e){return Na(l,e instanceof Date?e:e.date)}))||a&&!a.some(function(e){return Na(l,e)})||s&&!s(wa(l))||!1}function $a(e,t,n,r){var i=jr(e),o=Lr(e),a=jr(t),s=Lr(t),l=jr(r);return i===a&&i===l?o<=n&&n<=s:i<a&&(l===i&&o<=n||l===a&&s>=n||l<a&&l>i)}function Za(e,t){var n,r=void 0===t?{}:t,i=r.minDate,o=r.maxDate;return null!==(n=i&&Xn(e,i)<0||o&&Xn(e,o)>0)&&void 0!==n&&n}function es(e,t){return t.some(function(t){return Wr(t)===Wr(e)&&Br(t)===Br(e)&&Ur(t)===Ur(e)})}function ts(e,t){var n=void 0===t?{}:t,r=n.excludeTimes,i=n.includeTimes,o=n.filterTime;return r&&es(e,r)||i&&!es(e,i)||o&&!o(e)||!1}function ns(e,t){var n=t.minTime,r=t.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var i=wa();i=wr(i=br(i=vr(i,Wr(e)),Br(e)),Ur(e));var o=wa();o=wr(o=br(o=vr(o,Wr(n)),Br(n)),Ur(n));var a,s=wa();s=wr(s=br(s=vr(s,Wr(r)),Br(r)),Ur(r));try{a=!Ir(i,{start:o,end:s})}catch(l){a=!1}return a}function rs(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.includeDates,o=qr(e,1);return r&&Hr(r,o)>0||i&&i.every(function(e){return Hr(e,o)>0})||!1}function is(e,t){var n=void 0===t?{}:t,r=n.maxDate,i=n.includeDates,o=zr(e,1);return r&&Hr(o,r)>0||i&&i.every(function(e){return Hr(o,e)>0})||!1}function os(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.includeDates,o=Qr(e,1);return r&&Xr(r,o)>0||i&&i.every(function(e){return Xr(e,o)>0})||!1}function as(e,t){var n=void 0===t?{}:t,r=n.maxDate,i=n.includeDates,o=Gr(e,1);return r&&Xr(o,r)>0||i&&i.every(function(e){return Xr(o,e)>0})||!1}function ss(e){var t=e.minDate,n=e.includeDates;return n&&t?Jr(n.filter(function(e){return Xn(e,t)>=0})):n?Jr(n):t}function ls(e){var t=e.maxDate,n=e.includeDates;return n&&t?$r(n.filter(function(e){return Xn(e,t)<=0})):n?$r(n):t}function cs(e,t){var n;void 0===e&&(e=[]),void 0===t&&(t="react-datepicker__day--highlighted");for(var r=new Map,i=0,o=e.length;i<o;i++){var a=e[i];if(Vn(a)){var s=Sa(a,"MM.dd.yyyy");(p=r.get(s)||[]).includes(t)||(p.push(t),r.set(s,p))}else if("object"===typeof a){var l=null!==(n=Object.keys(a)[0])&&void 0!==n?n:"",c=a[l];if("string"===typeof l&&Array.isArray(c))for(var u=0,d=c.length;u<d;u++){var h=c[u];if(h){var p;s=Sa(h,"MM.dd.yyyy");(p=r.get(s)||[]).includes(l)||(p.push(l),r.set(s,p))}}}}return r}function us(e,t){void 0===e&&(e=[]),void 0===t&&(t="react-datepicker__day--holidays");var n=new Map;return e.forEach(function(e){var r=e.date,i=e.holidayName;if(Vn(r)){var o=Sa(r,"MM.dd.yyyy"),a=n.get(o)||{className:"",holidayNames:[]};if(!("className"in a)||a.className!==t||(s=a.holidayNames,l=[i],s.length!==l.length||!s.every(function(e,t){return e===l[t]}))){var s,l;a.className=t;var c=a.holidayNames;a.holidayNames=c?ma(ma([],c,!0),[i],!1):[i],n.set(o,a)}}}),n}function ds(e,t,n,r,i){for(var o=i.length,a=[],s=0;s<o;s++){var l=e,c=i[s];c&&(l=ni(l=ti(l=ei(l,Wr(c)),Br(c)),Ur(c)));var u=ti(e,(n+1)*r);ri(l,t)&&Yn(l,u)&&void 0!=c&&a.push(c)}return a}function hs(e){return e<10?"0".concat(e):"".concat(e)}function ps(e,t){void 0===t&&(t=12);var n=Math.ceil(jr(e)/t)*t;return{startPeriod:n-(t-1),endPeriod:n}}function fs(e){var t=e.getSeconds(),n=e.getMilliseconds();return tt(e.getTime()-1e3*t-n)}function ms(e){if(!Vn(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function gs(e,t){if(!Vn(e)||!Vn(t))throw new Error("Invalid date received");return Yn(ms(e),ms(t))}function ys(e){return e.key===ga.Space}var vs,bs=function(e){function t(t){var n=e.call(this,t)||this;return n.inputRef=i.createRef(),n.onTimeChange=function(e){var t,r;n.setState({time:e});var i=n.props.date,o=i instanceof Date&&!isNaN(+i)?i:new Date;if(null===e||void 0===e?void 0:e.includes(":")){var a=e.split(":"),s=a[0],l=a[1];o.setHours(Number(s)),o.setMinutes(Number(l))}null===(r=(t=n.props).onChange)||void 0===r||r.call(t,o)},n.renderTimeInput=function(){var e=n.state.time,t=n.props,r=t.date,o=t.timeString,a=t.customTimeInput;return a?(0,i.cloneElement)(a,{date:r,value:e,onChange:n.onTimeChange}):i.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var e;null===(e=n.inputRef.current)||void 0===e||e.focus()},required:!0,value:e,onChange:function(e){n.onTimeChange(e.target.value||o)}})},n.state={time:n.props.timeString},n}return pa(t,e),t.getDerivedStateFromProps=function(e,t){return e.timeString!==t.time?{time:e.timeString}:null},t.prototype.render=function(){return i.createElement("div",{className:"react-datepicker__input-time-container"},i.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),i.createElement("div",{className:"react-datepicker-time__input-container"},i.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(i.Component),ws=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dayEl=(0,i.createRef)(),t.handleClick=function(e){!t.isDisabled()&&t.props.onClick&&t.props.onClick(e)},t.handleMouseEnter=function(e){!t.isDisabled()&&t.props.onMouseEnter&&t.props.onMouseEnter(e)},t.handleOnKeyDown=function(e){var n,r;e.key===ga.Space&&(e.preventDefault(),e.key=ga.Enter),null===(r=(n=t.props).handleOnKeyDown)||void 0===r||r.call(n,e)},t.isSameDay=function(e){return Fa(t.props.day,e)},t.isKeyboardSelected=function(){var e;if(t.props.disabledKeyboardNavigation)return!1;var n=t.props.selectsMultiple?null===(e=t.props.selectedDates)||void 0===e?void 0:e.some(function(e){return t.isSameDayOrWeek(e)}):t.isSameDayOrWeek(t.props.selected),r=t.props.preSelection&&t.isDisabled(t.props.preSelection);return!n&&t.isSameDayOrWeek(t.props.preSelection)&&!r},t.isDisabled=function(e){return void 0===e&&(e=t.props.day),Ha(e,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.isExcluded=function(){return Va(t.props.day,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.isStartOfWeek=function(){return Fa(t.props.day,_a(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameWeek=function(e){return t.props.showWeekPicker&&Fa(e,_a(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameDayOrWeek=function(e){return t.isSameDay(e)||t.isSameWeek(e)},t.getHighLightedClass=function(){var e=t.props,n=e.day,r=e.highlightDates;if(!r)return!1;var i=Sa(n,"MM.dd.yyyy");return r.get(i)},t.getHolidaysClass=function(){var e,n=t.props,r=n.day,i=n.holidays;if(!i)return[void 0];var o=Sa(r,"MM.dd.yyyy");return i.has(o)?[null===(e=i.get(o))||void 0===e?void 0:e.className]:[void 0]},t.isInRange=function(){var e=t.props,n=e.day,r=e.startDate,i=e.endDate;return!(!r||!i)&&Wa(n,r,i)},t.isInSelectingRange=function(){var e,n=t.props,r=n.day,i=n.selectsStart,o=n.selectsEnd,a=n.selectsRange,s=n.selectsDisabledDaysInRange,l=n.startDate,c=n.swapRange,u=n.endDate,d=null!==(e=t.props.selectingDate)&&void 0!==e?e:t.props.preSelection;if(!(i||o||a)||!d||!s&&t.isDisabled())return!1;if(i&&u&&(Yn(d,u)||La(d,u)))return Wa(r,d,u);if(o&&l&&(ri(d,l)||La(d,l)))return Wa(r,l,d);if(a&&l&&!u){if(La(d,l))return Wa(r,l,d);if(ri(d,l))return Wa(r,l,d);if(c&&Yn(d,l))return Wa(r,d,l)}return!1},t.isSelectingRangeStart=function(){var e;if(!t.isInSelectingRange())return!1;var n=t.props,r=n.day,i=n.startDate,o=n.selectsStart,a=n.swapRange,s=n.selectsRange,l=null!==(e=t.props.selectingDate)&&void 0!==e?e:t.props.preSelection;return Fa(r,o||s&&a&&i&&l&&Yn(l,i)?l:i)},t.isSelectingRangeEnd=function(){var e;if(!t.isInSelectingRange())return!1;var n=t.props,r=n.day,i=n.endDate,o=n.selectsEnd,a=n.selectsRange,s=n.swapRange,l=n.startDate,c=null!==(e=t.props.selectingDate)&&void 0!==e?e:t.props.preSelection;return Fa(r,o?c:a&&s&&l&&c?Yn(c,l)?l:c:a?c:i)},t.isRangeStart=function(){var e=t.props,n=e.day,r=e.startDate,i=e.endDate;return!(!r||!i)&&Fa(r,n)},t.isRangeEnd=function(){var e=t.props,n=e.day,r=e.startDate,i=e.endDate;return!(!r||!i)&&Fa(i,n)},t.isWeekend=function(){var e=ii(t.props.day);return 0===e||6===e},t.isAfterMonth=function(){return void 0!==t.props.month&&(t.props.month+1)%12===Or(t.props.day)},t.isBeforeMonth=function(){return void 0!==t.props.month&&(Or(t.props.day)+1)%12===t.props.month},t.isCurrentDay=function(){return t.isSameDay(wa())},t.isSelected=function(){var e;return t.props.selectsMultiple?null===(e=t.props.selectedDates)||void 0===e?void 0:e.some(function(e){return t.isSameDayOrWeek(e)}):t.isSameDayOrWeek(t.props.selected)},t.getClassNames=function(e){var n;return Qe("react-datepicker__day",t.props.dayClassName?t.props.dayClassName(e):void 0,"react-datepicker__day--"+Sa(t.props.day,"ddd",n),{"react-datepicker__day--disabled":t.isDisabled(),"react-datepicker__day--excluded":t.isExcluded(),"react-datepicker__day--selected":t.isSelected(),"react-datepicker__day--keyboard-selected":t.isKeyboardSelected(),"react-datepicker__day--range-start":t.isRangeStart(),"react-datepicker__day--range-end":t.isRangeEnd(),"react-datepicker__day--in-range":t.isInRange(),"react-datepicker__day--in-selecting-range":t.isInSelectingRange(),"react-datepicker__day--selecting-range-start":t.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":t.isSelectingRangeEnd(),"react-datepicker__day--today":t.isCurrentDay(),"react-datepicker__day--weekend":t.isWeekend(),"react-datepicker__day--outside-month":t.isAfterMonth()||t.isBeforeMonth()},t.getHighLightedClass(),t.getHolidaysClass())},t.getAriaLabel=function(){var e=t.props,n=e.day,r=e.ariaLabelPrefixWhenEnabled,i=void 0===r?"Choose":r,o=e.ariaLabelPrefixWhenDisabled,a=void 0===o?"Not available":o,s=t.isDisabled()||t.isExcluded()?a:i;return"".concat(s," ").concat(Sa(n,"PPPP",t.props.locale))},t.getTitle=function(){var e=t.props,n=e.day,r=e.holidays,i=void 0===r?new Map:r,o=e.excludeDates,a=Sa(n,"MM.dd.yyyy"),s=[];return i.has(a)&&s.push.apply(s,i.get(a).holidayNames),t.isExcluded()&&s.push(null===o||void 0===o?void 0:o.filter(function(e){return e instanceof Date?Fa(e,n):Fa(null===e||void 0===e?void 0:e.date,n)}).map(function(e){if(!(e instanceof Date))return null===e||void 0===e?void 0:e.message})),s.join(", ")},t.getTabIndex=function(){var e=t.props.selected,n=t.props.preSelection;return(!t.props.showWeekPicker||!t.props.showWeekNumber&&t.isStartOfWeek())&&(t.isKeyboardSelected()||t.isSameDay(e)&&Fa(n,e))?0:-1},t.handleFocusDay=function(){var e;t.shouldFocusDay()&&(null===(e=t.dayEl.current)||void 0===e||e.focus({preventScroll:!0}))},t.renderDayContents=function(){return t.props.monthShowsDuplicateDaysEnd&&t.isAfterMonth()||t.props.monthShowsDuplicateDaysStart&&t.isBeforeMonth()?null:t.props.renderDayContents?t.props.renderDayContents(oi(t.props.day),t.props.day):oi(t.props.day)},t.render=function(){return i.createElement("div",{ref:t.dayEl,className:t.getClassNames(t.props.day),onKeyDown:t.handleOnKeyDown,onClick:t.handleClick,onMouseEnter:t.props.usePointerEvent?void 0:t.handleMouseEnter,onPointerEnter:t.props.usePointerEvent?t.handleMouseEnter:void 0,tabIndex:t.getTabIndex(),"aria-label":t.getAriaLabel(),role:"gridcell",title:t.getTitle(),"aria-disabled":t.isDisabled(),"aria-current":t.isCurrentDay()?"date":void 0,"aria-selected":t.isSelected()||t.isInRange()},t.renderDayContents(),""!==t.getTitle()&&i.createElement("span",{className:"overlay"},t.getTitle()))},t}return pa(t,e),t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var e=!1;return 0===this.getTabIndex()&&this.isSameDay(this.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(e=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(e=!1),this.isDayActiveElement()&&(e=!0),this.isDuplicateDay()&&(e=!1)),e},t.prototype.isDayActiveElement=function(){var e,t,n;return(null===(t=null===(e=this.props.containerRef)||void 0===e?void 0:e.current)||void 0===t?void 0:t.contains(document.activeElement))&&(null===(n=document.activeElement)||void 0===n?void 0:n.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(i.Component),ks=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.weekNumberEl=(0,i.createRef)(),t.handleClick=function(e){t.props.onClick&&t.props.onClick(e)},t.handleOnKeyDown=function(e){var n,r;e.key===ga.Space&&(e.preventDefault(),e.key=ga.Enter),null===(r=(n=t.props).handleOnKeyDown)||void 0===r||r.call(n,e)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!Fa(t.props.date,t.props.selected)&&Fa(t.props.date,t.props.preSelection)},t.getTabIndex=function(){return t.props.showWeekPicker&&t.props.showWeekNumber&&(t.isKeyboardSelected()||Fa(t.props.date,t.props.selected)&&Fa(t.props.preSelection,t.props.selected))?0:-1},t.handleFocusWeekNumber=function(e){var n=!1;0===t.getTabIndex()&&!(null===e||void 0===e?void 0:e.isInputFocused)&&Fa(t.props.date,t.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(n=!0),t.props.inline&&!t.props.shouldFocusDayInline&&(n=!1),t.props.containerRef&&t.props.containerRef.current&&t.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(n=!0)),n&&t.weekNumberEl.current&&t.weekNumberEl.current.focus({preventScroll:!0})},t}return pa(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(e){this.handleFocusWeekNumber(e)},t.prototype.render=function(){var e=this.props,n=e.weekNumber,r=e.isWeekDisabled,o=e.ariaLabelPrefix,a=void 0===o?t.defaultProps.ariaLabelPrefix:o,s=e.onClick,l={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!s&&!r,"react-datepicker__week-number--selected":!!s&&Fa(this.props.date,this.props.selected)};return i.createElement("div",{ref:this.weekNumberEl,className:Qe(l),"aria-label":"".concat(a," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex(),role:"gridcell"},n)},t}(i.Component),xs=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.isDisabled=function(e){return Ha(e,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.handleDayClick=function(e,t){n.props.onDayClick&&n.props.onDayClick(e,t)},n.handleDayMouseEnter=function(e){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(e)},n.handleWeekClick=function(e,r,i){for(var o,a,s,l=new Date(e),c=0;c<7;c++){var u=new Date(e);if(u.setDate(u.getDate()+c),!n.isDisabled(u)){l=u;break}}"function"===typeof n.props.onWeekSelect&&n.props.onWeekSelect(l,r,i),n.props.showWeekPicker&&n.handleDayClick(l,i),(null!==(o=n.props.shouldCloseOnSelect)&&void 0!==o?o:t.defaultProps.shouldCloseOnSelect)&&(null===(s=(a=n.props).setOpen)||void 0===s||s.call(a,!1))},n.formatWeekNumber=function(e){return n.props.formatWeekNumber?n.props.formatWeekNumber(e):function(e){return _n(e)}(e)},n.isWeekDisabled=function(){for(var e=n.startOfWeek(),t=In(e,6),r=new Date(e);r<=t;){if(!n.isDisabled(r))return!1;r=In(r,1)}return!0},n.renderDays=function(){var e=n.startOfWeek(),r=[],o=n.formatWeekNumber(e);if(n.props.showWeekNumber){var a=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,e,o):void 0;r.push(i.createElement(ks,fa({key:"W"},t.defaultProps,n.props,{weekNumber:o,isWeekDisabled:n.isWeekDisabled(),date:e,onClick:a})))}return r.concat([0,1,2,3,4,5,6].map(function(r){var o=In(e,r);return i.createElement(ws,fa({},t.defaultProps,n.props,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:o.valueOf(),day:o,onClick:n.handleDayClick.bind(n,o),onMouseEnter:n.handleDayMouseEnter.bind(n,o)}))}))},n.startOfWeek=function(){return _a(n.props.day,n.props.locale,n.props.calendarStartDay)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!Fa(n.startOfWeek(),n.props.selected)&&Fa(n.startOfWeek(),n.props.preSelection)},n}return pa(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e={"react-datepicker__week":!0,"react-datepicker__week--selected":Fa(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()},t=this.props.weekClassName?this.props.weekClassName(this.startOfWeek()):void 0;return i.createElement("div",{className:Qe(e,t),role:"row"},this.renderDays())},t}(i.Component),Ss="two_columns",Es="three_columns",Ts="four_columns",Cs=((vs={})[Ss]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},vs[Es]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},vs[Ts]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},vs);function _s(e,t){return e?Ts:t?Ss:Es}var Ds=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MONTH_REFS=ma([],Array(12),!0).map(function(){return(0,i.createRef)()}),t.QUARTER_REFS=ma([],Array(4),!0).map(function(){return(0,i.createRef)()}),t.isDisabled=function(e){return Ha(e,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.isExcluded=function(e){return Va(e,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.handleDayClick=function(e,n){var r,i;null===(i=(r=t.props).onDayClick)||void 0===i||i.call(r,e,n,t.props.orderInDisplay)},t.handleDayMouseEnter=function(e){var n,r;null===(r=(n=t.props).onDayMouseEnter)||void 0===r||r.call(n,e)},t.handleMouseLeave=function(){var e,n;null===(n=(e=t.props).onMouseLeave)||void 0===n||n.call(e)},t.isRangeStartMonth=function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&ja(Mr(r,e),i)},t.isRangeStartQuarter=function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&Oa(Nr(r,e),i)},t.isRangeEndMonth=function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&ja(Mr(r,e),o)},t.isRangeEndQuarter=function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&Oa(Nr(r,e),o)},t.isInSelectingRangeMonth=function(e){var n,r=t.props,i=r.day,o=r.selectsStart,a=r.selectsEnd,s=r.selectsRange,l=r.startDate,c=r.endDate,u=null!==(n=t.props.selectingDate)&&void 0!==n?n:t.props.preSelection;return!(!(o||a||s)||!u)&&(o&&c?Ya(u,c,e,i):(a&&l||!(!s||!l||c))&&Ya(l,u,e,i))},t.isSelectingMonthRangeStart=function(e){var n;if(!t.isInSelectingRangeMonth(e))return!1;var r=t.props,i=r.day,o=r.startDate,a=r.selectsStart,s=Mr(i,e),l=null!==(n=t.props.selectingDate)&&void 0!==n?n:t.props.preSelection;return ja(s,a?l:o)},t.isSelectingMonthRangeEnd=function(e){var n;if(!t.isInSelectingRangeMonth(e))return!1;var r=t.props,i=r.day,o=r.endDate,a=r.selectsEnd,s=r.selectsRange,l=Mr(i,e),c=null!==(n=t.props.selectingDate)&&void 0!==n?n:t.props.preSelection;return ja(l,a||s?c:o)},t.isInSelectingRangeQuarter=function(e){var n,r=t.props,i=r.day,o=r.selectsStart,a=r.selectsEnd,s=r.selectsRange,l=r.startDate,c=r.endDate,u=null!==(n=t.props.selectingDate)&&void 0!==n?n:t.props.preSelection;return!(!(o||a||s)||!u)&&(o&&c?$a(u,c,e,i):(a&&l||!(!s||!l||c))&&$a(l,u,e,i))},t.isWeekInMonth=function(e){var n=t.props.day,r=In(e,6);return ja(e,n)||ja(r,n)},t.isCurrentMonth=function(e,t){return jr(e)===jr(wa())&&t===Or(wa())},t.isCurrentQuarter=function(e,t){return jr(e)===jr(wa())&&t===Lr(wa())},t.isSelectedMonth=function(e,t,n){return Or(n)===t&&jr(e)===jr(n)},t.isSelectMonthInList=function(e,n,r){return r.some(function(r){return t.isSelectedMonth(e,n,r)})},t.isSelectedQuarter=function(e,t,n){return Lr(e)===t&&jr(e)===jr(n)},t.isMonthSelected=function(){var e=t.props,n=e.day,r=e.selected,i=e.selectedDates,o=e.selectsMultiple,a=Or(n);return o?null===i||void 0===i?void 0:i.some(function(e){return t.isSelectedMonth(n,a,e)}):!!r&&t.isSelectedMonth(n,a,r)},t.renderWeeks=function(){for(var e=[],n=t.props.fixedHeight,r=0,o=!1,a=_a(Da(t.props.day),t.props.locale,t.props.calendarStartDay),s=t.props.selected?function(e){return t.props.showWeekPicker?_a(e,t.props.locale,t.props.calendarStartDay):t.props.selected}(t.props.selected):void 0,l=t.props.preSelection?function(e){return t.props.showWeekPicker?_a(e,t.props.locale,t.props.calendarStartDay):t.props.preSelection}(t.props.preSelection):void 0;e.push(i.createElement(xs,fa({},t.props,{ariaLabelPrefix:t.props.weekAriaLabelPrefix,key:r,day:a,month:Or(t.props.day),onDayClick:t.handleDayClick,onDayMouseEnter:t.handleDayMouseEnter,selected:s,preSelection:l,showWeekNumber:t.props.showWeekNumbers}))),!o;){r++,a=ai(a,1);var c=n&&r>=6,u=!n&&!t.isWeekInMonth(a);if(c||u){if(!t.props.peekNextMonth)break;o=!0}}return e},t.onMonthClick=function(e,n){var r=t.isMonthDisabledForLabelDate(n),i=r.isDisabled,o=r.labelDate;i||t.handleDayClick(Da(o),e)},t.onMonthMouseEnter=function(e){var n=t.isMonthDisabledForLabelDate(e),r=n.isDisabled,i=n.labelDate;r||t.handleDayMouseEnter(Da(i))},t.handleMonthNavigation=function(e,n){var r,i,o,a;null===(i=(r=t.props).setPreSelection)||void 0===i||i.call(r,n),null===(a=null===(o=t.MONTH_REFS[e])||void 0===o?void 0:o.current)||void 0===a||a.focus()},t.handleKeyboardNavigation=function(e,n,r){var i,o=t.props,a=o.selected,s=o.preSelection,l=o.setPreSelection,c=o.minDate,u=o.maxDate,d=o.showFourColumnMonthYearPicker,h=o.showTwoColumnMonthYearPicker;if(s){var p=_s(d,h),f=t.getVerticalOffset(p),m=null===(i=Cs[p])||void 0===i?void 0:i.grid,g=function(e,t,n){var r,i,o=t,a=n;switch(e){case ga.ArrowRight:o=zr(t,1),a=11===n?0:n+1;break;case ga.ArrowLeft:o=qr(t,1),a=0===n?11:n-1;break;case ga.ArrowUp:o=qr(t,f),a=(null===(r=null===m||void 0===m?void 0:m[0])||void 0===r?void 0:r.includes(n))?n+12-f:n-f;break;case ga.ArrowDown:o=zr(t,f),a=(null===(i=null===m||void 0===m?void 0:m[m.length-1])||void 0===i?void 0:i.includes(n))?n-12+f:n+f}return{newCalculatedDate:o,newCalculatedMonth:a}};if(n!==ga.Enter){var y=function(e,n,r){for(var i=e,o=!1,a=0,s=g(i,n,r),l=s.newCalculatedDate,d=s.newCalculatedMonth;!o;){if(a>=40){l=n,d=r;break}var h;if(c&&l<c)i=ga.ArrowRight,l=(h=g(i,l,d)).newCalculatedDate,d=h.newCalculatedMonth;if(u&&l>u)i=ga.ArrowLeft,l=(h=g(i,l,d)).newCalculatedDate,d=h.newCalculatedMonth;if(Ga(l,t.props))l=(h=g(i,l,d)).newCalculatedDate,d=h.newCalculatedMonth;else o=!0;a++}return{newCalculatedDate:l,newCalculatedMonth:d}}(n,s,r),v=y.newCalculatedDate,b=y.newCalculatedMonth;switch(n){case ga.ArrowRight:case ga.ArrowLeft:case ga.ArrowUp:case ga.ArrowDown:t.handleMonthNavigation(b,v)}}else t.isMonthDisabled(r)||(t.onMonthClick(e,r),null===l||void 0===l||l(a))}},t.getVerticalOffset=function(e){var t,n;return null!==(n=null===(t=Cs[e])||void 0===t?void 0:t.verticalNavigationOffset)&&void 0!==n?n:0},t.onMonthKeyDown=function(e,n){var r=t.props,i=r.disabledKeyboardNavigation,o=r.handleOnMonthKeyDown,a=e.key;a!==ga.Tab&&e.preventDefault(),i||t.handleKeyboardNavigation(e,a,n),o&&o(e)},t.onQuarterClick=function(e,n){var r=Nr(t.props.day,n);Qa(r,t.props)||t.handleDayClick(Ra(r),e)},t.onQuarterMouseEnter=function(e){var n=Nr(t.props.day,e);Qa(n,t.props)||t.handleDayMouseEnter(Ra(n))},t.handleQuarterNavigation=function(e,n){var r,i,o,a;t.isDisabled(n)||t.isExcluded(n)||(null===(i=(r=t.props).setPreSelection)||void 0===i||i.call(r,n),null===(a=null===(o=t.QUARTER_REFS[e-1])||void 0===o?void 0:o.current)||void 0===a||a.focus())},t.onQuarterKeyDown=function(e,n){var r,i,o=e.key;if(!t.props.disabledKeyboardNavigation)switch(o){case ga.Enter:t.onQuarterClick(e,n),null===(i=(r=t.props).setPreSelection)||void 0===i||i.call(r,t.props.selected);break;case ga.ArrowRight:if(!t.props.preSelection)break;t.handleQuarterNavigation(4===n?1:n+1,Vr(t.props.preSelection,1));break;case ga.ArrowLeft:if(!t.props.preSelection)break;t.handleQuarterNavigation(1===n?4:n-1,Kr(t.props.preSelection,1))}},t.isMonthDisabledForLabelDate=function(e){var n,r=t.props,i=r.day,o=r.minDate,a=r.maxDate,s=r.excludeDates,l=r.includeDates,c=Mr(i,e);return{isDisabled:null!==(n=(o||a||s||l)&&Ka(c,t.props))&&void 0!==n&&n,labelDate:c}},t.isMonthDisabled=function(e){return t.isMonthDisabledForLabelDate(e).isDisabled},t.getMonthClassNames=function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate,a=n.preSelection,s=n.monthClassName,l=s?s(Mr(r,e)):void 0,c=t.getSelection();return Qe("react-datepicker__month-text","react-datepicker__month-".concat(e),l,{"react-datepicker__month-text--disabled":t.isMonthDisabled(e),"react-datepicker__month-text--selected":c?t.isSelectMonthInList(r,e,c):void 0,"react-datepicker__month-text--keyboard-selected":!t.props.disabledKeyboardNavigation&&a&&t.isSelectedMonth(r,e,a)&&!t.isMonthSelected()&&!t.isMonthDisabled(e),"react-datepicker__month-text--in-selecting-range":t.isInSelectingRangeMonth(e),"react-datepicker__month-text--in-range":i&&o?Ya(i,o,e,r):void 0,"react-datepicker__month-text--range-start":t.isRangeStartMonth(e),"react-datepicker__month-text--range-end":t.isRangeEndMonth(e),"react-datepicker__month-text--selecting-range-start":t.isSelectingMonthRangeStart(e),"react-datepicker__month-text--selecting-range-end":t.isSelectingMonthRangeEnd(e),"react-datepicker__month-text--today":t.isCurrentMonth(r,e)})},t.getTabIndex=function(e){if(null==t.props.preSelection)return"-1";var n=Or(t.props.preSelection),r=t.isMonthDisabledForLabelDate(n).isDisabled;return e!==n||r||t.props.disabledKeyboardNavigation?"-1":"0"},t.getQuarterTabIndex=function(e){if(null==t.props.preSelection)return"-1";var n=Lr(t.props.preSelection),r=Qa(t.props.day,t.props);return e!==n||r||t.props.disabledKeyboardNavigation?"-1":"0"},t.getAriaLabel=function(e){var n=t.props,r=n.chooseDayAriaLabelPrefix,i=void 0===r?"Choose":r,o=n.disabledDayAriaLabelPrefix,a=void 0===o?"Not available":o,s=n.day,l=n.locale,c=Mr(s,e),u=t.isDisabled(c)||t.isExcluded(c)?a:i;return"".concat(u," ").concat(Sa(c,"MMMM yyyy",l))},t.getQuarterClassNames=function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate,a=n.selected,s=n.minDate,l=n.maxDate,c=n.excludeDates,u=n.includeDates,d=n.filterDate,h=n.preSelection,p=n.disabledKeyboardNavigation,f=(s||l||c||u||d)&&Qa(Nr(r,e),t.props);return Qe("react-datepicker__quarter-text","react-datepicker__quarter-".concat(e),{"react-datepicker__quarter-text--disabled":f,"react-datepicker__quarter-text--selected":a?t.isSelectedQuarter(r,e,a):void 0,"react-datepicker__quarter-text--keyboard-selected":!p&&h&&t.isSelectedQuarter(r,e,h)&&!f,"react-datepicker__quarter-text--in-selecting-range":t.isInSelectingRangeQuarter(e),"react-datepicker__quarter-text--in-range":i&&o?$a(i,o,e,r):void 0,"react-datepicker__quarter-text--range-start":t.isRangeStartQuarter(e),"react-datepicker__quarter-text--range-end":t.isRangeEndQuarter(e),"react-datepicker__quarter-text--today":t.isCurrentQuarter(r,e)})},t.getMonthContent=function(e){var n=t.props,r=n.showFullMonthYearPicker,i=n.renderMonthContent,o=n.locale,a=n.day,s=qa(e,o),l=za(e,o);return i?i(e,s,l,a):r?l:s},t.getQuarterContent=function(e){var n,r=t.props,i=r.renderQuarterContent,o=function(e,t){return Sa(Nr(wa(),e),"QQQ",t)}(e,r.locale);return null!==(n=null===i||void 0===i?void 0:i(e,o))&&void 0!==n?n:o},t.renderMonths=function(){var e,n=t.props,r=n.showTwoColumnMonthYearPicker,o=n.showFourColumnMonthYearPicker,a=n.day,s=n.selected,l=null===(e=Cs[_s(o,r)])||void 0===e?void 0:e.grid;return null===l||void 0===l?void 0:l.map(function(e,n){return i.createElement("div",{className:"react-datepicker__month-wrapper",key:n},e.map(function(e,n){return i.createElement("div",{ref:t.MONTH_REFS[e],key:n,onClick:function(n){t.onMonthClick(n,e)},onKeyDown:function(n){ys(n)&&(n.preventDefault(),n.key=ga.Enter),t.onMonthKeyDown(n,e)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onMonthMouseEnter(e)},onPointerEnter:t.props.usePointerEvent?function(){return t.onMonthMouseEnter(e)}:void 0,tabIndex:Number(t.getTabIndex(e)),className:t.getMonthClassNames(e),"aria-disabled":t.isMonthDisabled(e),role:"option","aria-label":t.getAriaLabel(e),"aria-current":t.isCurrentMonth(a,e)?"date":void 0,"aria-selected":s?t.isSelectedMonth(a,e,s):void 0},t.getMonthContent(e))}))})},t.renderQuarters=function(){var e=t.props,n=e.day,r=e.selected;return i.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map(function(e,o){return i.createElement("div",{key:o,ref:t.QUARTER_REFS[o],role:"option",onClick:function(n){t.onQuarterClick(n,e)},onKeyDown:function(n){t.onQuarterKeyDown(n,e)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onQuarterMouseEnter(e)},onPointerEnter:t.props.usePointerEvent?function(){return t.onQuarterMouseEnter(e)}:void 0,className:t.getQuarterClassNames(e),"aria-selected":r?t.isSelectedQuarter(n,e,r):void 0,tabIndex:Number(t.getQuarterTabIndex(e)),"aria-current":t.isCurrentQuarter(n,e)?"date":void 0},t.getQuarterContent(e))}))},t.getClassNames=function(){var e=t.props,n=e.selectingDate,r=e.selectsStart,i=e.selectsEnd;return Qe("react-datepicker__month",{"react-datepicker__month--selecting-range":n&&(r||i)},{"react-datepicker__monthPicker":e.showMonthYearPicker},{"react-datepicker__quarterPicker":e.showQuarterYearPicker},{"react-datepicker__weekPicker":e.showWeekPicker})},t}return pa(t,e),t.prototype.getSelection=function(){var e=this.props,t=e.selected,n=e.selectedDates;return e.selectsMultiple?n:t?[t]:void 0},t.prototype.render=function(){var e=this.props,t=e.showMonthYearPicker,n=e.showQuarterYearPicker,r=e.day,o=e.ariaLabelPrefix,a=void 0===o?"Month ":o,s=a?a.trim()+" ":"";return t||n?i.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(s).concat(Sa(r,"MMMM, yyyy",this.props.locale)),role:"listbox"},t?this.renderMonths():this.renderQuarters()):i.createElement("div",{role:"table"},this.props.dayNamesHeader&&i.createElement("div",{role:"rowgroup"},this.props.dayNamesHeader),i.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(s).concat(Sa(r,"MMMM, yyyy",this.props.locale)),role:"rowgroup"},this.renderWeeks()))},t}(i.Component),As=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.monthOptionButtonsRef={},t.isSelectedMonth=function(e){return t.props.month===e},t.handleOptionKeyDown=function(e,n){var r;switch(n.key){case"Enter":n.preventDefault(),t.onChange(e);break;case"Escape":n.preventDefault(),t.props.onCancel();break;case"ArrowUp":case"ArrowDown":n.preventDefault();var i=(e+("ArrowUp"===n.key?-1:1)+t.props.monthNames.length)%t.props.monthNames.length;null===(r=t.monthOptionButtonsRef[i])||void 0===r||r.focus()}},t.renderOptions=function(){return t.monthOptionButtonsRef={},t.props.monthNames.map(function(e,n){return i.createElement("div",{ref:function(e){t.monthOptionButtonsRef[n]=e,t.isSelectedMonth(n)&&(null===e||void 0===e||e.focus())},role:"button",tabIndex:0,className:t.isSelectedMonth(n)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:e,onClick:t.onChange.bind(t,n),onKeyDown:t.handleOptionKeyDown.bind(t,n),"aria-selected":t.isSelectedMonth(n)?"true":void 0},t.isSelectedMonth(n)?i.createElement("span",{className:"react-datepicker__month-option--selected"},"\u2713"):"",e)})},t.onChange=function(e){return t.props.onChange(e)},t.handleClickOutside=function(){return t.props.onCancel()},t}return pa(t,e),t.prototype.render=function(){return i.createElement(va,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(i.Component),Rs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(e){return e.map(function(e,t){return i.createElement("option",{key:e,value:t},e)})},t.renderSelectMode=function(e){return i.createElement("select",{value:t.props.month,className:"react-datepicker__month-select",onChange:function(e){return t.onChange(parseInt(e.target.value))}},t.renderSelectOptions(e))},t.renderReadView=function(e,n){return i.createElement("button",{key:"read",type:"button",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:t.toggleDropdown},i.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),i.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},n[t.props.month]))},t.renderDropdown=function(e){return i.createElement(As,fa({key:"dropdown"},t.props,{monthNames:e,onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(e){var n=t.state.dropdownVisible,r=[t.renderReadView(!n,e)];return n&&r.unshift(t.renderDropdown(e)),r},t.onChange=function(e){t.toggleDropdown(),e!==t.props.month&&t.props.onChange(e)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return pa(t,e),t.prototype.render=function(){var e,t=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(e){return qa(e,t.props.locale)}:function(e){return za(e,t.props.locale)});switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode(n);break;case"select":e=this.renderSelectMode(n)}return i.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},e)},t}(i.Component);function Is(e,t){for(var n=[],r=Da(e),i=Da(t);!ri(r,i);)n.push(wa(r)),r=zr(r,1);return n}var Ps=function(e){function t(t){var n=e.call(this,t)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(e){var t=si(e),r=Na(n.props.date,e)&&ja(n.props.date,e);return i.createElement("div",{className:r?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:t,onClick:n.onChange.bind(n,t),"aria-selected":r?"true":void 0},r?i.createElement("span",{className:"react-datepicker__month-year-option--selected"},"\u2713"):"",Sa(e,n.props.dateFormat,n.props.locale))})},n.onChange=function(e){return n.props.onChange(e)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:Is(n.props.minDate,n.props.maxDate)},n}return pa(t,e),t.prototype.render=function(){var e=Qe({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return i.createElement(va,{className:e,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(i.Component),Ms=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var e=Da(t.props.minDate),n=Da(t.props.maxDate),r=[];!ri(e,n);){var o=si(e);r.push(i.createElement("option",{key:o,value:o},Sa(e,t.props.dateFormat,t.props.locale))),e=zr(e,1)}return r},t.onSelectChange=function(e){t.onChange(parseInt(e.target.value))},t.renderSelectMode=function(){return i.createElement("select",{value:si(Da(t.props.date)),className:"react-datepicker__month-year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(e){var n=Sa(t.props.date,t.props.dateFormat,t.props.locale);return i.createElement("div",{key:"read",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:t.toggleDropdown},i.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),i.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},n))},t.renderDropdown=function(){return i.createElement(Ps,fa({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var e=t.state.dropdownVisible,n=[t.renderReadView(!e)];return e&&n.unshift(t.renderDropdown()),n},t.onChange=function(e){t.toggleDropdown();var n=wa(e);Na(t.props.date,n)&&ja(t.props.date,n)||t.props.onChange(n)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return pa(t,e),t.prototype.render=function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return i.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},e)},t}(i.Component),Ns=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var e,r,i;n.list&&(n.list.scrollTop=null!==(i=n.centerLi&&t.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-(null!==(r=null===(e=n.header)||void 0===e?void 0:e.clientHeight)&&void 0!==r?r:0):n.list.clientHeight,n.centerLi))&&void 0!==i?i:0)})},n.handleClick=function(e){var t,r;(n.props.minTime||n.props.maxTime)&&ns(e,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&ts(e,n.props)||null===(r=(t=n.props).onChange)||void 0===r||r.call(t,e)},n.isSelectedTime=function(e){return n.props.selected&&(t=n.props.selected,r=e,fs(t).getTime()===fs(r).getTime());var t,r},n.isDisabledTime=function(e){return(n.props.minTime||n.props.maxTime)&&ns(e,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&ts(e,n.props)},n.liClasses=function(e){var r,i=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(e):void 0];return n.isSelectedTime(e)&&i.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(e)&&i.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(3600*Wr(e)+60*Br(e)+Ur(e))%(60*(null!==(r=n.props.intervals)&&void 0!==r?r:t.defaultProps.intervals))!==0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")},n.handleOnKeyDown=function(e,t){var r,i;e.key===ga.Space&&(e.preventDefault(),e.key=ga.Enter),(e.key===ga.ArrowUp||e.key===ga.ArrowLeft)&&e.target instanceof HTMLElement&&e.target.previousSibling&&(e.preventDefault(),e.target.previousSibling instanceof HTMLElement&&e.target.previousSibling.focus()),(e.key===ga.ArrowDown||e.key===ga.ArrowRight)&&e.target instanceof HTMLElement&&e.target.nextSibling&&(e.preventDefault(),e.target.nextSibling instanceof HTMLElement&&e.target.nextSibling.focus()),e.key===ga.Enter&&n.handleClick(t),null===(i=(r=n.props).handleOnKeyDown)||void 0===i||i.call(r,e)},n.renderTimes=function(){for(var e,r=[],o="string"===typeof n.props.format?n.props.format:"p",a=null!==(e=n.props.intervals)&&void 0!==e?e:t.defaultProps.intervals,s=n.props.selected||n.props.openToDate||wa(),l=Ca(s),c=n.props.injectTimes&&n.props.injectTimes.sort(function(e,t){return e.getTime()-t.getTime()}),u=60*function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+n-+t)/36e5)}(s),d=u/a,h=0;h<d;h++){var p=ti(l,h*a);if(r.push(p),c){var f=ds(l,p,h,a,c);r=r.concat(f)}}var m=r.reduce(function(e,t){return t.getTime()<=s.getTime()?t:e},r[0]);return r.map(function(e){return i.createElement("li",{key:e.valueOf(),onClick:n.handleClick.bind(n,e),className:n.liClasses(e),ref:function(t){e===m&&(n.centerLi=t)},onKeyDown:function(t){n.handleOnKeyDown(t,e)},tabIndex:e===m?0:-1,role:"option","aria-selected":n.isSelectedTime(e)?"true":void 0,"aria-disabled":n.isDisabledTime(e)?"true":void 0},Sa(e,o,n.props.locale))})},n.renderTimeCaption=function(){return!1===n.props.showTimeCaption?i.createElement(i.Fragment,null):i.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(n.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(e){n.header=e}},i.createElement("div",{className:"react-datepicker-time__header"},n.props.timeCaption))},n}return pa(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var e;null===(e=this.resizeObserver)||void 0===e||e.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var e=this,t=this.props.monthRef;this.updateContainerHeight(),t&&(this.resizeObserver=new ResizeObserver(function(){e.updateContainerHeight()}),this.resizeObserver.observe(t))},t.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var e,n=this,r=this.state.height;return i.createElement("div",{className:"react-datepicker__time-container ".concat((null!==(e=this.props.todayButton)&&void 0!==e?e:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),i.createElement("div",{className:"react-datepicker__time"},i.createElement("div",{className:"react-datepicker__time-box"},i.createElement("ul",{className:"react-datepicker__time-list",ref:function(e){n.list=e},style:r?{height:r}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(e,t){return t.offsetTop-(e/2-t.clientHeight/2)},t}(i.Component),js=function(e){function t(t){var n=e.call(this,t)||this;return n.YEAR_REFS=ma([],Array(n.props.yearItemNumber),!0).map(function(){return(0,i.createRef)()}),n.isDisabled=function(e){return Ha(e,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(e){return Va(e,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var e;return null!==(e=n.props.selectingDate)&&void 0!==e?e:n.props.preSelection},n.updateFocusOnPaginate=function(e){window.requestAnimationFrame(function(){var t,r;null===(r=null===(t=n.YEAR_REFS[e])||void 0===t?void 0:t.current)||void 0===r||r.focus()})},n.handleYearClick=function(e,t){n.props.onDayClick&&n.props.onDayClick(e,t)},n.handleYearNavigation=function(e,t){var r,i,o,a,s=n.props,l=s.date,c=s.yearItemNumber;if(void 0!==l&&void 0!==c){var u=ps(l,c).startPeriod;n.isDisabled(t)||n.isExcluded(t)||(null===(i=(r=n.props).setPreSelection)||void 0===i||i.call(r,t),e-u<0?n.updateFocusOnPaginate(c-(u-e)):e-u>=c?n.updateFocusOnPaginate(Math.abs(c-(e-u))):null===(a=null===(o=n.YEAR_REFS[e-u])||void 0===o?void 0:o.current)||void 0===a||a.focus())}},n.isSameDay=function(e,t){return Fa(e,t)},n.isCurrentYear=function(e){return e===jr(wa())},n.isRangeStart=function(e){return n.props.startDate&&n.props.endDate&&Na(li(wa(),e),n.props.startDate)},n.isRangeEnd=function(e){return n.props.startDate&&n.props.endDate&&Na(li(wa(),e),n.props.endDate)},n.isInRange=function(e){return Xa(e,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(e){var t=n.props,r=t.selectsStart,i=t.selectsEnd,o=t.selectsRange,a=t.startDate,s=t.endDate;return!(!(r||i||o)||!n.selectingDate())&&(r&&s?Xa(e,n.selectingDate(),s):(i&&a||!(!o||!a||s))&&Xa(e,a,n.selectingDate()))},n.isSelectingRangeStart=function(e){var t;if(!n.isInSelectingRange(e))return!1;var r=n.props,i=r.startDate,o=r.selectsStart,a=li(wa(),e);return Na(a,o?null!==(t=n.selectingDate())&&void 0!==t?t:null:null!==i&&void 0!==i?i:null)},n.isSelectingRangeEnd=function(e){var t;if(!n.isInSelectingRange(e))return!1;var r=n.props,i=r.endDate,o=r.selectsEnd,a=r.selectsRange,s=li(wa(),e);return Na(s,o||a?null!==(t=n.selectingDate())&&void 0!==t?t:null:null!==i&&void 0!==i?i:null)},n.isKeyboardSelected=function(e){if(!n.props.disabledKeyboardNavigation&&void 0!==n.props.date&&null!=n.props.preSelection){var t=n.props,r=t.minDate,i=t.maxDate,o=t.excludeDates,a=t.includeDates,s=t.filterDate,l=t.selected,c=Aa(li(n.props.date,e)),u=(r||i||o||a||s)&&Ja(e,n.props),d=!!l&&Fa(c,Aa(l)),h=Fa(c,Aa(n.props.preSelection));return!n.props.inline&&!d&&h&&!u}},n.isSelectedYear=function(e){var t=n.props,r=t.selectsMultiple,i=t.selected,o=t.selectedDates;return r?null===o||void 0===o?void 0:o.some(function(t){return e===jr(t)}):!!i&&e===jr(i)},n.onYearClick=function(e,t){var r=n.props.date;void 0!==r&&n.handleYearClick(Aa(li(r,t)),e)},n.onYearKeyDown=function(e,t){var r,i,o=e.key,a=n.props,s=a.date,l=a.yearItemNumber,c=a.handleOnKeyDown;if(o!==ga.Tab&&e.preventDefault(),!n.props.disabledKeyboardNavigation)switch(o){case ga.Enter:if(null==n.props.selected)break;n.onYearClick(e,t),null===(i=(r=n.props).setPreSelection)||void 0===i||i.call(r,n.props.selected);break;case ga.ArrowRight:if(null==n.props.preSelection)break;n.handleYearNavigation(t+1,Gr(n.props.preSelection,1));break;case ga.ArrowLeft:if(null==n.props.preSelection)break;n.handleYearNavigation(t-1,Qr(n.props.preSelection,1));break;case ga.ArrowUp:if(void 0===s||void 0===l||null==n.props.preSelection)break;var u=ps(s,l).startPeriod;if((p=t-(h=3))<u){var d=l%h;t>=u&&t<u+d?h=d:h+=d,p=t-h}n.handleYearNavigation(p,Qr(n.props.preSelection,h));break;case ga.ArrowDown:if(void 0===s||void 0===l||null==n.props.preSelection)break;var h,p,f=ps(s,l).endPeriod;if((p=t+(h=3))>f){d=l%h;t<=f&&t>f-d?h=d:h+=d,p=t+h}n.handleYearNavigation(p,Gr(n.props.preSelection,h))}c&&c(e)},n.getYearClassNames=function(e){var t=n.props,r=t.date,i=t.minDate,o=t.maxDate,a=t.excludeDates,s=t.includeDates,l=t.filterDate,c=t.yearClassName;return Qe("react-datepicker__year-text","react-datepicker__year-".concat(e),r?null===c||void 0===c?void 0:c(li(r,e)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(e),"react-datepicker__year-text--disabled":(i||o||a||s||l)&&Ja(e,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(e),"react-datepicker__year-text--range-start":n.isRangeStart(e),"react-datepicker__year-text--range-end":n.isRangeEnd(e),"react-datepicker__year-text--in-range":n.isInRange(e),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(e),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(e),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(e),"react-datepicker__year-text--today":n.isCurrentYear(e)})},n.getYearTabIndex=function(e){if(n.props.disabledKeyboardNavigation||null==n.props.preSelection)return"-1";var t=jr(n.props.preSelection),r=Ja(e,n.props);return e!==t||r?"-1":"0"},n.getYearContent=function(e){return n.props.renderYearContent?n.props.renderYearContent(e):e},n}return pa(t,e),t.prototype.render=function(){var e=this,t=[],n=this.props,r=n.date,o=n.yearItemNumber,a=n.onYearMouseEnter,s=n.onYearMouseLeave;if(void 0===r)return null;for(var l=ps(r,o),c=l.startPeriod,u=l.endPeriod,d=function(n){t.push(i.createElement("div",{ref:h.YEAR_REFS[n-c],onClick:function(t){e.onYearClick(t,n)},onKeyDown:function(t){ys(t)&&(t.preventDefault(),t.key=ga.Enter),e.onYearKeyDown(t,n)},tabIndex:Number(h.getYearTabIndex(n)),className:h.getYearClassNames(n),onMouseEnter:h.props.usePointerEvent?void 0:function(e){return a(e,n)},onPointerEnter:h.props.usePointerEvent?function(e){return a(e,n)}:void 0,onMouseLeave:h.props.usePointerEvent?void 0:function(e){return s(e,n)},onPointerLeave:h.props.usePointerEvent?function(e){return s(e,n)}:void 0,key:n,"aria-current":h.isCurrentYear(n)?"date":void 0},h.getYearContent(n)))},h=this,p=c;p<=u;p++)d(p);return i.createElement("div",{className:"react-datepicker__year"},i.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},t))},t}(i.Component);function Os(e,t,n,r){for(var i=[],o=0;o<2*t+1;o++){var a=e+t-o,s=!0;n&&(s=jr(n)<=a),r&&s&&(s=jr(r)>=a),s&&i.push(a)}return i}var Fs=function(e){function t(t){var n=e.call(this,t)||this;n.yearOptionButtonsRef={},n.handleOptionKeyDown=function(e,t){var r;switch(t.key){case"Enter":t.preventDefault(),n.onChange(e);break;case"Escape":t.preventDefault(),n.props.onCancel();break;case"ArrowUp":case"ArrowDown":t.preventDefault();var i=e+("ArrowUp"===t.key?1:-1);n.yearOptionButtonsRef[i]&&(null===(r=n.yearOptionButtonsRef[i])||void 0===r||r.focus())}},n.renderOptions=function(){n.yearOptionButtonsRef={};var e=n.props.year,t=n.state.yearsList.map(function(t){return i.createElement("div",{ref:function(r){n.yearOptionButtonsRef[t]=r,t===e&&(null===r||void 0===r||r.focus())},role:"button",tabIndex:0,className:e===t?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:t,onClick:n.onChange.bind(n,t),onKeyDown:n.handleOptionKeyDown.bind(n,t),"aria-selected":e===t?"true":void 0},e===t?i.createElement("span",{className:"react-datepicker__year-option--selected"},"\u2713"):"",t)}),r=n.props.minDate?jr(n.props.minDate):null,o=n.props.maxDate?jr(n.props.maxDate):null;return o&&n.state.yearsList.find(function(e){return e===o})||t.unshift(i.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},i.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),r&&n.state.yearsList.find(function(e){return e===r})||t.push(i.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},i.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),t},n.onChange=function(e){n.props.onChange(e)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(e){var t=n.state.yearsList.map(function(t){return t+e});n.setState({yearsList:t})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var r=t.yearDropdownItemNumber,o=t.scrollableYearDropdown,a=r||(o?10:5);return n.state={yearsList:Os(n.props.year,a,n.props.minDate,n.props.maxDate)},n.dropdownRef=(0,i.createRef)(),n}return pa(t,e),t.prototype.componentDidMount=function(){var e=this.dropdownRef.current;if(e){var t=e.children?Array.from(e.children):null,n=t?t.find(function(e){return e.ariaSelected}):null;e.scrollTop=n&&n instanceof HTMLElement?n.offsetTop+(n.clientHeight-e.clientHeight)/2:(e.scrollHeight-e.clientHeight)/2}},t.prototype.render=function(){var e=Qe({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return i.createElement(va,{className:e,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(i.Component),Ls=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var e=t.props.minDate?jr(t.props.minDate):1900,n=t.props.maxDate?jr(t.props.maxDate):2100,r=[],o=e;o<=n;o++)r.push(i.createElement("option",{key:o,value:o},o));return r},t.onSelectChange=function(e){t.onChange(parseInt(e.target.value))},t.renderSelectMode=function(){return i.createElement("select",{value:t.props.year,className:"react-datepicker__year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(e){return i.createElement("button",{key:"read",type:"button",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:t.toggleDropdown},i.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),i.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},t.props.year))},t.renderDropdown=function(){return i.createElement(Fs,fa({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var e=t.state.dropdownVisible,n=[t.renderReadView(!e)];return e&&n.unshift(t.renderDropdown()),n},t.onChange=function(e){t.toggleDropdown(),e!==t.props.year&&t.props.onChange(e)},t.toggleDropdown=function(e){t.setState({dropdownVisible:!t.state.dropdownVisible},function(){t.props.adjustDateOnChange&&t.handleYearChange(t.props.date,e)})},t.handleYearChange=function(e,n){var r;null===(r=t.onSelect)||void 0===r||r.call(t,e,n),t.setOpen()},t.onSelect=function(e,n){var r,i;null===(i=(r=t.props).onSelect)||void 0===i||i.call(r,e,n)},t.setOpen=function(){var e,n;null===(n=(e=t.props).setOpen)||void 0===n||n.call(e,!0)},t}return pa(t,e),t.prototype.render=function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return i.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},e)},t}(i.Component),Ws=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],Bs="react-datepicker-ignore-onclickoutside",Us=function(e){function t(n){var r=e.call(this,n)||this;return r.monthContainer=void 0,r.handleClickOutside=function(e){r.props.onClickOutside(e)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(e){var t,n;(function(e){var t=(e.className||"").split(/\s+/);return Ws.some(function(e){return t.indexOf(e)>=0})})(e.target)&&(null===(n=(t=r.props).onDropdownFocus)||void 0===n||n.call(t,e))},r.getDateInView=function(){var e=r.props,t=e.preSelection,n=e.selected,i=e.openToDate,o=ss(r.props),a=ls(r.props),s=wa(),l=i||n||t;return l||(o&&Yn(s,o)?o:a&&ri(s,a)?a:s)},r.increaseMonth=function(){r.setState(function(e){return{date:zr(e.date,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(e){return{date:qr(e.date,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(e,t,n){r.props.onSelect(e,t,n),r.props.setPreSelection&&r.props.setPreSelection(e)},r.handleDayMouseEnter=function(e){r.setState({selectingDate:e}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(e)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(e,t){r.setState({selectingDate:li(wa(),t)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(e,t)},r.handleYearMouseLeave=function(e,t){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(e,t)},r.handleYearChange=function(e){var t,n,i,o;null===(n=(t=r.props).onYearChange)||void 0===n||n.call(t,e),r.setState({isRenderAriaLiveMessage:!0}),r.props.adjustDateOnChange&&(r.props.onSelect(e),null===(o=(i=r.props).setOpen)||void 0===o||o.call(i,!0)),r.props.setPreSelection&&r.props.setPreSelection(e)},r.getEnabledPreSelectionDateForMonth=function(e){if(!Ha(e,r.props))return e;for(var t=Da(e),n=ci(Ma(e),t),i=null,o=0;o<=n;o++){var a=In(t,o);if(!Ha(a,r.props)){i=a;break}}return i},r.handleMonthChange=function(e){var t,n,i,o=null!==(t=r.getEnabledPreSelectionDateForMonth(e))&&void 0!==t?t:e;r.handleCustomMonthChange(o),r.props.adjustDateOnChange&&(r.props.onSelect(o),null===(i=(n=r.props).setOpen)||void 0===i||i.call(n,!0)),r.props.setPreSelection&&r.props.setPreSelection(o)},r.handleCustomMonthChange=function(e){var t,n;null===(n=(t=r.props).onMonthChange)||void 0===n||n.call(t,e),r.setState({isRenderAriaLiveMessage:!0})},r.handleMonthYearChange=function(e){r.handleYearChange(e),r.handleMonthChange(e)},r.changeYear=function(e){r.setState(function(t){return{date:li(t.date,Number(e))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(e){r.setState(function(t){return{date:Mr(t.date,Number(e))}},function(){return r.handleMonthChange(r.state.date)})},r.changeMonthYear=function(e){r.setState(function(t){return{date:li(Mr(t.date,Or(e)),jr(e))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(e){void 0===e&&(e=r.state.date);var t=_a(e,r.props.locale,r.props.calendarStartDay),n=[];return r.props.showWeekNumbers&&n.push(i.createElement("div",{key:"W",className:"react-datepicker__day-name",role:"columnheader"},i.createElement("span",{className:"react-datepicker__sr-only"},"Week number"),i.createElement("span",{"aria-hidden":"true"},r.props.weekLabel||"#"))),n.concat([0,1,2,3,4,5,6].map(function(e){var n=In(t,e),o=r.formatWeekday(n,r.props.locale),a=r.props.weekDayClassName?r.props.weekDayClassName(n):void 0;return i.createElement("div",{key:e,role:"columnheader",className:Qe("react-datepicker__day-name",a)},i.createElement("span",{className:"react-datepicker__sr-only"},Sa(n,"EEEE",r.props.locale)),i.createElement("span",{"aria-hidden":"true"},o))}))},r.formatWeekday=function(e,t){return r.props.formatWeekDay?function(e,t,n){return t(Sa(e,"EEEE",n))}(e,r.props.formatWeekDay,t):r.props.useWeekdaysShort?function(e,t){return Sa(e,"EEE",t)}(e,t):function(e,t){return Sa(e,"EEEEEE",t)}(e,t)},r.decreaseYear=function(){r.setState(function(e){var n;return{date:Qr(e.date,r.props.showYearPicker?null!==(n=r.props.yearItemNumber)&&void 0!==n?n:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var e,n,o;if(!r.props.renderCustomHeader){var a,s=null!==(e=r.props.monthsShown)&&void 0!==e?e:t.defaultProps.monthsShown,l=r.props.showPreviousMonths?s-1:0,c=null!==(n=r.props.monthSelectedIn)&&void 0!==n?n:l,u=qr(r.state.date,c);switch(!0){case r.props.showMonthYearPicker:a=os(r.state.date,r.props);break;case r.props.showYearPicker:a=function(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.yearItemNumber,o=void 0===i?12:i,a=ps(Aa(Qr(e,o)),o).endPeriod,s=r&&jr(r);return s&&s>a||!1}(r.state.date,r.props);break;case r.props.showQuarterYearPicker:a=function(e,t){var n=void 0===t?{}:t,r=n.minDate,i=n.includeDates,o=Kr(Jn(e),1);return r&&Yr(r,o)>0||i&&i.every(function(e){return Yr(e,o)>0})||!1}(r.state.date,r.props);break;default:a=rs(u,r.props)}if(((null!==(o=r.props.forceShowMonthNavigation)&&void 0!==o?o:t.defaultProps.forceShowMonthNavigation)||r.props.showDisabledMonthNavigation||!a)&&!r.props.showTimeSelectOnly){var d=["react-datepicker__navigation","react-datepicker__navigation--previous"],h=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(h=r.decreaseYear),a&&r.props.showDisabledMonthNavigation&&(d.push("react-datepicker__navigation--previous--disabled"),h=void 0);var p=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,f=r.props,m=f.previousMonthButtonLabel,g=void 0===m?t.defaultProps.previousMonthButtonLabel:m,y=f.previousYearButtonLabel,v=void 0===y?t.defaultProps.previousYearButtonLabel:y,b=r.props,w=b.previousMonthAriaLabel,k=void 0===w?"string"===typeof g?g:"Previous Month":w,x=b.previousYearAriaLabel,S=void 0===x?"string"===typeof v?v:"Previous Year":x;return i.createElement("button",{type:"button",className:d.join(" "),onClick:h,onKeyDown:r.props.handleOnKeyDown,"aria-label":p?S:k},i.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},p?v:g))}}},r.increaseYear=function(){r.setState(function(e){var n;return{date:Gr(e.date,r.props.showYearPicker?null!==(n=r.props.yearItemNumber)&&void 0!==n?n:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var e;if(!r.props.renderCustomHeader){var n;switch(!0){case r.props.showMonthYearPicker:n=as(r.state.date,r.props);break;case r.props.showYearPicker:n=function(e,t){var n=void 0===t?{}:t,r=n.maxDate,i=n.yearItemNumber,o=void 0===i?12:i,a=ps(Gr(e,o),o).startPeriod,s=r&&jr(r);return s&&s<a||!1}(r.state.date,r.props);break;case r.props.showQuarterYearPicker:n=function(e,t){var n=void 0===t?{}:t,r=n.maxDate,i=n.includeDates,o=Vr(Fr(e),1);return r&&Yr(o,r)>0||i&&i.every(function(e){return Yr(o,e)>0})||!1}(r.state.date,r.props);break;default:n=is(r.state.date,r.props)}if(((null!==(e=r.props.forceShowMonthNavigation)&&void 0!==e?e:t.defaultProps.forceShowMonthNavigation)||r.props.showDisabledMonthNavigation||!n)&&!r.props.showTimeSelectOnly){var o=["react-datepicker__navigation","react-datepicker__navigation--next"];r.props.showTimeSelect&&o.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&o.push("react-datepicker__navigation--next--with-today-button");var a=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(a=r.increaseYear),n&&r.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--next--disabled"),a=void 0);var s=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,l=r.props,c=l.nextMonthButtonLabel,u=void 0===c?t.defaultProps.nextMonthButtonLabel:c,d=l.nextYearButtonLabel,h=void 0===d?t.defaultProps.nextYearButtonLabel:d,p=r.props,f=p.nextMonthAriaLabel,m=void 0===f?"string"===typeof u?u:"Next Month":f,g=p.nextYearAriaLabel,y=void 0===g?"string"===typeof h?h:"Next Year":g;return i.createElement("button",{type:"button",className:o.join(" "),onClick:a,onKeyDown:r.props.handleOnKeyDown,"aria-label":s?y:m},i.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},s?h:u))}}},r.renderCurrentMonth=function(e){void 0===e&&(e=r.state.date);var t=["react-datepicker__current-month"];return r.props.showYearDropdown&&t.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&t.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&t.push("react-datepicker__current-month--hasMonthYearDropdown"),i.createElement("h2",{className:t.join(" ")},Sa(e,r.props.dateFormat,r.props.locale))},r.renderYearDropdown=function(e){if(void 0===e&&(e=!1),r.props.showYearDropdown&&!e)return i.createElement(Ls,fa({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:jr(r.state.date)}))},r.renderMonthDropdown=function(e){if(void 0===e&&(e=!1),r.props.showMonthDropdown&&!e)return i.createElement(Rs,fa({},t.defaultProps,r.props,{month:Or(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(e){if(void 0===e&&(e=!1),r.props.showMonthYearDropdown&&!e)return i.createElement(Ms,fa({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(e){r.props.onSelect(Ia(),e),r.props.setPreSelection&&r.props.setPreSelection(Ia())},r.renderTodayButton=function(){if(r.props.todayButton&&!r.props.showTimeSelectOnly)return i.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDayNamesHeader=function(e){return i.createElement("div",{className:"react-datepicker__day-names",role:"row"},r.header(e))},r.renderDefaultHeader=function(e){var t=e.monthDate,n=e.i;return i.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(t),i.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(0!==n),r.renderMonthYearDropdown(0!==n),r.renderYearDropdown(0!==n)))},r.renderCustomHeader=function(e){var t,n,o=e.monthDate,a=e.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var s,l=r.props,c=l.showYearPicker,u=l.yearItemNumber;if(c){var d=ps(o,u);s={startYear:d.startPeriod,endYear:d.endPeriod}}var h=rs(r.state.date,r.props),p=is(r.state.date,r.props),f=os(r.state.date,r.props),m=as(r.state.date,r.props);return i.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},null===(n=(t=r.props).renderCustomHeader)||void 0===n?void 0:n.call(t,fa(fa(fa({},r.state),c&&{visibleYearsRange:s}),{customHeaderCount:a,monthDate:o,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:h,nextMonthButtonDisabled:p,prevYearButtonDisabled:f,nextYearButtonDisabled:m})))},r.renderYearHeader=function(e){var n=e.monthDate,o=r.props,a=o.showYearPicker,s=o.yearItemNumber,l=ps(n,void 0===s?t.defaultProps.yearItemNumber:s),c=l.startPeriod,u=l.endPeriod;return i.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},a?"".concat(c," - ").concat(u):jr(n))},r.renderHeader=function(e){var t=e.monthDate,n=e.i,i={monthDate:t,i:void 0===n?0:n};switch(!0){case void 0!==r.props.renderCustomHeader:return r.renderCustomHeader(i);case r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker:return r.renderYearHeader(i);default:return r.renderDefaultHeader(i)}},r.renderMonths=function(){var e,n;if(!r.props.showTimeSelectOnly&&!r.props.showYearPicker){for(var o=[],a=null!==(e=r.props.monthsShown)&&void 0!==e?e:t.defaultProps.monthsShown,s=r.props.showPreviousMonths?a-1:0,l=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Gr(r.state.date,s):qr(r.state.date,s),c=null!==(n=r.props.monthSelectedIn)&&void 0!==n?n:s,u=0;u<a;++u){var d=u-c+s,h=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Gr(l,d):zr(l,d),p="month-".concat(u),f=u<a-1,m=u>0;o.push(i.createElement("div",{key:p,ref:function(e){r.monthContainer=null!==e&&void 0!==e?e:void 0},className:"react-datepicker__month-container"},r.renderHeader({monthDate:h,i:u}),i.createElement(Ds,fa({},t.defaultProps,r.props,{containerRef:r.containerRef,ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:h,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:u,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:f,monthShowsDuplicateDaysStart:m,dayNamesHeader:r.renderDayNamesHeader(h)}))))}return o}},r.renderYears=function(){if(!r.props.showTimeSelectOnly)return r.props.showYearPicker?i.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),i.createElement(js,fa({},t.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave}))):void 0},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return i.createElement(Ns,fa({},t.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var e=r.props.selected?new Date(r.props.selected):void 0,n=e&&xa(e)&&Boolean(r.props.selected)?"".concat(hs(e.getHours()),":").concat(hs(e.getMinutes())):"";if(r.props.showTimeInput)return i.createElement(bs,fa({},t.defaultProps,r.props,{date:e,timeString:n,onChange:r.props.onTimeChange}))},r.renderAriaLiveRegion=function(){var e,n,o=ps(r.state.date,null!==(e=r.props.yearItemNumber)&&void 0!==e?e:t.defaultProps.yearItemNumber),a=o.startPeriod,s=o.endPeriod;return n=r.props.showYearPicker?"".concat(a," - ").concat(s):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?jr(r.state.date):"".concat(za(Or(r.state.date),r.props.locale)," ").concat(jr(r.state.date)),i.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&n)},r.renderChildren=function(){if(r.props.children)return i.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=(0,i.createRef)(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return pa(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,outsideClickIgnoreClass:Bs,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:12}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var e=this;this.props.showTimeSelect&&(this.assignMonthContainer=void e.setState({monthContainer:e.monthContainer}))},t.prototype.componentDidUpdate=function(e){var t=this;if(!this.props.preSelection||Fa(this.props.preSelection,e.preSelection)&&this.props.monthSelectedIn===e.monthSelectedIn)this.props.openToDate&&!Fa(this.props.openToDate,e.openToDate)&&this.setState({date:this.props.openToDate});else{var n=!ja(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return n&&t.handleCustomMonthChange(t.state.date)})}},t.prototype.render=function(){var e=this.props.container||ya;return i.createElement(va,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},i.createElement("div",{style:{display:"contents"},ref:this.containerRef},i.createElement(e,{className:Qe("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t}(i.Component),zs=function(e){var t=e.icon,n=e.className,r=void 0===n?"":n,o=e.onClick,a="react-datepicker__calendar-icon";if("string"===typeof t)return i.createElement("i",{className:"".concat(a," ").concat(t," ").concat(r),"aria-hidden":"true",onClick:o});if(i.isValidElement(t)){var s=t;return i.cloneElement(s,{className:"".concat(s.props.className||""," ").concat(a," ").concat(r),onClick:function(e){"function"===typeof s.props.onClick&&s.props.onClick(e),"function"===typeof o&&o(e)}})}return i.createElement("svg",{className:"".concat(a," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:o},i.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},qs=function(e){function t(t){var n=e.call(this,t)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return pa(t,e),t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return we.createPortal(this.props.children,this.el)},t}(i.Component),Hs=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&-1!==e.tabIndex},Vs=function(e){function t(t){var n=e.call(this,t)||this;return n.getTabChildren=function(){var e;return Array.prototype.slice.call(null===(e=n.tabLoopRef.current)||void 0===e?void 0:e.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(Hs)},n.handleFocusStart=function(){var e=n.getTabChildren();e&&e.length>1&&e[e.length-1].focus()},n.handleFocusEnd=function(){var e=n.getTabChildren();e&&e.length>1&&e[0].focus()},n.tabLoopRef=(0,i.createRef)(),n}return pa(t,e),t.prototype.render=function(){var e;return(null!==(e=this.props.enableTabLoop)&&void 0!==e?e:t.defaultProps.enableTabLoop)?i.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},i.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,i.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(i.Component);var Ks=function(e){function t(t){var n,r,o,a="boolean"!==typeof t.hidePopper||t.hidePopper,l=(0,i.useRef)(null),c=da(fa({open:!a,whileElementsMounted:Mo,placement:t.popperPlacement,middleware:ma([(r={padding:15},(0,s.A)((0,s.A)({},jo(r)),{},{options:[r,o]})),qo(10),Ho({element:l})],null!==(n=t.popperModifiers)&&void 0!==n?n:[],!0)},t.popperProps)),u=fa(fa({},t),{hidePopper:a,popperProps:fa(fa({},c),{arrowRef:l})});return i.createElement(e,fa({},u))}return t.displayName="withFloating(".concat(e.displayName||e.name||"Component",")"),t}(function(e){var t=e.className,n=e.wrapperClassName,r=e.hidePopper,o=void 0===r||r,a=e.popperComponent,s=e.targetComponent,l=e.enableTabLoop,c=e.popperOnKeyDown,u=e.portalId,d=e.portalHost,h=e.popperProps,p=e.showArrow,f=void 0;if(!o){var m=Qe("react-datepicker-popper",t);f=i.createElement(Vs,{enableTabLoop:l},i.createElement("div",{ref:h.refs.setFloating,style:h.floatingStyles,className:m,"data-placement":h.placement,onKeyDown:c},a,p&&i.createElement(ia,{ref:h.arrowRef,context:h.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}e.popperContainer&&(f=(0,i.createElement)(e.popperContainer,{},f)),u&&!o&&(f=i.createElement(qs,{portalId:u,portalHost:d},f));var g=Qe("react-datepicker-wrapper",n);return i.createElement(i.Fragment,null,i.createElement("div",{ref:h.refs.setReference,className:g},s),f)});var Ys="Date input not valid.",Gs=function(e){function t(n){var r=e.call(this,n)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:wa()},r.modifyHolidays=function(){var e;return null===(e=r.props.holidays)||void 0===e?void 0:e.reduce(function(e,t){var n=new Date(t.date);return xa(n)?ma(ma([],e,!0),[fa(fa({},t),{date:n})],!1):e},[])},r.calcInitialState=function(){var e,t=r.getPreSelection(),n=ss(r.props),i=ls(r.props),o=n&&Yn(t,Ca(n))?n:i&&ri(t,Pa(i))?i:t;return{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:null!==(e=r.props.selectsRange?r.props.startDate:r.props.selected)&&void 0!==e?e:o,highlightDates:cs(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.getInputValue=function(){var e,n=r.props,i=n.locale,o=n.startDate,a=n.endDate,s=n.rangeSeparator,l=n.selected,c=n.selectedDates,u=n.selectsMultiple,d=n.selectsRange,h=n.value,p=null!==(e=r.props.dateFormat)&&void 0!==e?e:t.defaultProps.dateFormat,f=r.state.inputValue;return"string"===typeof h?h:"string"===typeof f?f:d?function(e,t,n){if(!e&&!t)return"";var r=e?Ea(e,n):"",i=t?Ea(t,n):"",o=n.rangeSeparator||" - ";return"".concat(r).concat(o).concat(i)}(o,a,{dateFormat:p,locale:i,rangeSeparator:s}):u?function(e,t){if(!(null===e||void 0===e?void 0:e.length))return"";var n=e[0]?Ea(e[0],t):"";if(1===e.length)return n;if(2===e.length&&e[1]){var r=Ea(e[1],t);return"".concat(n,", ").concat(r)}var i=e.length-1;return"".concat(n," (+").concat(i,")")}(null!==c&&void 0!==c?c:[],{dateFormat:p,locale:i}):Ea(l,{dateFormat:p,locale:i})},r.resetHiddenStatus=function(){r.setState(fa(fa({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(fa(fa({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){"hidden"===document.visibilityState&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.setFocus=function(){var e,t;null===(t=null===(e=r.input)||void 0===e?void 0:e.focus)||void 0===t||t.call(e,{preventScroll:!0})},r.setBlur=function(){var e,t;null===(t=null===(e=r.input)||void 0===e?void 0:e.blur)||void 0===t||t.call(e),r.cancelFocusInput()},r.deferBlur=function(){requestAnimationFrame(function(){r.setBlur()})},r.setOpen=function(e,t){void 0===t&&(t=!1),r.setState({open:e,preSelection:e&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:Xs},function(){e||r.setState(function(e){return{focused:!!t&&e.focused}},function(){!t&&r.deferBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return Vn(r.state.preSelection)},r.isCalendarOpen=function(){return void 0===r.props.open?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(e){var t,n,i=r.state.wasHidden,o=!i||r.state.open;i&&r.resetHiddenStatus(),r.state.preventFocus||(null===(n=(t=r.props).onFocus)||void 0===n||n.call(t,e),!o||r.props.preventOpenOnFocus||r.props.readOnly||r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.resetInputValue=function(){r.setState(fa(fa({},r.state),{inputValue:null}))},r.handleBlur=function(e){var t,n;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&(null===(n=(t=r.props).onBlur)||void 0===n||n.call(t,e)),r.resetInputValue(),r.state.open&&!1===r.props.open&&r.setOpen(!1),r.setState({focused:!1})},r.handleCalendarClickOutside=function(e){var t,n;r.props.inline||r.setOpen(!1),null===(n=(t=r.props).onClickOutside)||void 0===n||n.call(t,e),r.props.withPortal&&e.preventDefault()},r.handleChange=function(){for(var e,n,i,o,a,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var c=s[0];if(!r.props.onChangeRaw||(r.props.onChangeRaw.apply(r,s),c&&"function"===typeof c.isDefaultPrevented&&!c.isDefaultPrevented())){r.setState({inputValue:(null===c||void 0===c?void 0:c.target)instanceof HTMLInputElement?c.target.value:null,lastPreSelectChange:Qs});var u=r.props,d=u.selectsRange,h=u.startDate,p=u.endDate,f=null!==(e=r.props.dateFormat)&&void 0!==e?e:t.defaultProps.dateFormat,m=null!==(n=r.props.strictParsing)&&void 0!==n?n:t.defaultProps.strictParsing,g=(null===c||void 0===c?void 0:c.target)instanceof HTMLInputElement?c.target.value:"";if(d){var y=r.props.rangeSeparator,v=y.trim(),b=g.split(f.includes(v)?y:v,2).map(function(e){return e.trim()}),w=b[0],k=b[1],x=ka(null!==w&&void 0!==w?w:"",f,r.props.locale,m),S=x?ka(null!==k&&void 0!==k?k:"",f,r.props.locale,m):null,E=(null===h||void 0===h?void 0:h.getTime())!==(null===x||void 0===x?void 0:x.getTime()),T=(null===p||void 0===p?void 0:p.getTime())!==(null===S||void 0===S?void 0:S.getTime());if(!E&&!T)return;if(x&&Ha(x,r.props))return;if(S&&Ha(S,r.props))return;null===(o=(i=r.props).onChange)||void 0===o||o.call(i,[x,S],c)}else{var C=ka(g,f,r.props.locale,m,null!==(a=r.props.selected)&&void 0!==a?a:void 0);!C&&g||r.setSelected(C,c,!0)}}},r.handleSelect=function(e,t,n){if(!r.props.readOnly){var i=r.props,o=i.selectsRange,a=i.startDate,s=i.endDate,l=i.swapRange,c=!o||a&&!s&&(l||!gs(e,a));r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&c&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(t),r.setSelected(e,t,!1,n),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect?r.setPreSelection(e):c&&r.setOpen(!1)}},r.setSelected=function(e,t,n,i){var o,a,s=e;if(r.props.showYearPicker){if(null!==s&&Ja(jr(s),r.props))return}else if(r.props.showMonthYearPicker){if(null!==s&&Ka(s,r.props))return}else if(null!==s&&Ha(s,r.props))return;var l=r.props,c=l.onChange,u=l.selectsRange,d=l.startDate,h=l.endDate,p=l.selectsMultiple,f=l.selectedDates,m=l.minTime,g=l.swapRange;if(!La(r.props.selected,s)||r.props.allowSameDay||u||p)if(null!==s&&(!r.props.selected||n&&(r.props.showTimeSelect||r.props.showTimeSelectOnly||r.props.showTimeInput)||(s=Ta(s,{hour:Wr(r.props.selected),minute:Br(r.props.selected),second:Ur(r.props.selected)})),n||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly||m&&(s=Ta(s,{hour:m.getHours(),minute:m.getMinutes(),second:m.getSeconds()})),r.props.inline||r.setState({preSelection:s}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:i})),u){var y=d&&!h,v=!d&&!!h,b=d&&h;!d&&!h?null===c||void 0===c||c([s,null],t):y?null===s?null===c||void 0===c||c([null,null],t):gs(s,d)?g?null===c||void 0===c||c([s,d],t):null===c||void 0===c||c([s,null],t):null===c||void 0===c||c([d,s],t):v&&(s&&gs(s,h)?null===c||void 0===c||c([s,h],t):null===c||void 0===c||c([s,null],t)),b&&(null===c||void 0===c||c([s,null],t))}else if(p){if(null!==s)if(null===f||void 0===f?void 0:f.length)if(f.some(function(e){return Fa(e,s)})){var w=f.filter(function(e){return!Fa(e,s)});null===c||void 0===c||c(w,t)}else null===c||void 0===c||c(ma(ma([],f,!0),[s],!1),t);else null===c||void 0===c||c([s],t)}else null===c||void 0===c||c(s,t);n||(null===(a=(o=r.props).onSelect)||void 0===a||a.call(o,s,t),r.setState({inputValue:null}))},r.setPreSelection=function(e){if(!r.props.readOnly){var t=Vn(r.props.minDate),n=Vn(r.props.maxDate),i=!0;if(e){var o=Ca(e);if(t&&n)i=Wa(e,r.props.minDate,r.props.maxDate);else if(t){var a=Ca(r.props.minDate);i=ri(e,a)||La(o,a)}else if(n){var s=Pa(r.props.maxDate);i=Yn(e,s)||La(o,s)}}i&&r.setState({preSelection:e})}},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(e){var t,n;if(!r.props.selectsRange&&!r.props.selectsMultiple){var i=r.props.selected?r.props.selected:r.getPreSelection(),o=r.props.selected?e:Ta(i,{hour:Wr(e),minute:Br(e)});r.setState({preSelection:o}),null===(n=(t=r.props).onChange)||void 0===n||n.call(t,o),r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var e,t;r.props.disabled||r.props.readOnly||r.setOpen(!0),null===(t=(e=r.props).onInputClick)||void 0===t||t.call(e)},r.onInputKeyDown=function(e){var t,n,i,o,a,s;null===(n=(t=r.props).onKeyDown)||void 0===n||n.call(t,e);var l=e.key;if(r.state.open||r.props.inline||r.props.preventOpenOnFocus){if(r.state.open){if(l===ga.ArrowDown||l===ga.ArrowUp){e.preventDefault();var c=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',u=(null===(o=r.calendar)||void 0===o?void 0:o.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(c);return void(u instanceof HTMLElement&&u.focus({preventScroll:!0}))}var d=wa(r.state.preSelection);l===ga.Enter?(e.preventDefault(),e.target.blur(),r.inputOk()&&r.state.lastPreSelectChange===Xs?(r.handleSelect(d,e),!r.props.shouldCloseOnSelect&&r.setPreSelection(d)):r.setOpen(!1)):l===ga.Escape?(e.preventDefault(),e.target.blur(),r.sendFocusBackToInput(),r.setOpen(!1)):l===ga.Tab&&r.setOpen(!1),r.inputOk()||null===(s=(a=r.props).onInputError)||void 0===s||s.call(a,{code:1,msg:Ys})}}else l!==ga.ArrowDown&&l!==ga.ArrowUp&&l!==ga.Enter||null===(i=r.onInputClick)||void 0===i||i.call(r)},r.onPortalKeyDown=function(e){e.key===ga.Escape&&(e.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(e){var t,n,i,o,a,s,l=r.props,c=l.minDate,u=l.maxDate,d=l.disabledKeyboardNavigation,h=l.showWeekPicker,p=l.shouldCloseOnSelect,f=l.locale,m=l.calendarStartDay,g=l.adjustDateOnChange,y=l.inline;if(null===(n=(t=r.props).onKeyDown)||void 0===n||n.call(t,e),!d){var v=e.key,b=e.shiftKey,w=wa(r.state.preSelection),k=function(e,t){var n=t;switch(e){case ga.ArrowRight:n=h?ai(t,1):In(t,1);break;case ga.ArrowLeft:n=h?di(t,1):hi(t,1);break;case ga.ArrowUp:n=di(t,1);break;case ga.ArrowDown:n=ai(t,1);break;case ga.PageUp:n=b?Qr(t,1):qr(t,1);break;case ga.PageDown:n=b?Gr(t,1):zr(t,1);break;case ga.Home:n=_a(t,f,m);break;case ga.End:n=function(e){return Er(e)}(t)}return n};if(v===ga.Enter)return e.preventDefault(),r.handleSelect(w,e),void(!p&&r.setPreSelection(w));if(v===ga.Escape)return e.preventDefault(),r.setOpen(!1),void(r.inputOk()||null===(o=(i=r.props).onInputError)||void 0===o||o.call(i,{code:1,msg:Ys}));var x=null;switch(v){case ga.ArrowLeft:case ga.ArrowRight:case ga.ArrowUp:case ga.ArrowDown:case ga.PageUp:case ga.PageDown:case ga.Home:case ga.End:x=function(e,t){for(var n=e,i=!1,o=0,a=k(e,t);!i;){if(o>=40){a=t;break}c&&a<c&&(n=ga.ArrowRight,a=Ha(c,r.props)?k(n,a):c),u&&a>u&&(n=ga.ArrowLeft,a=Ha(u,r.props)?k(n,a):u),Ha(a,r.props)?(n!==ga.PageUp&&n!==ga.Home||(n=ga.ArrowRight),n!==ga.PageDown&&n!==ga.End||(n=ga.ArrowLeft),a=k(n,a)):i=!0,o++}return a}(v,w)}if(x){if(e.preventDefault(),r.setState({lastPreSelectChange:Xs}),g&&r.setSelected(x),r.setPreSelection(x),y){var S=Or(w),E=Or(x),T=jr(w),C=jr(x);S!==E||T!==C?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}else null===(s=(a=r.props).onInputError)||void 0===s||s.call(a,{code:1,msg:Ys})}},r.onPopperKeyDown=function(e){e.key===ga.Escape&&(e.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1))},r.onClearClick=function(e){e&&e.preventDefault&&e.preventDefault(),r.sendFocusBackToInput();var t=r.props,n=t.selectsRange,i=t.onChange;n?null===i||void 0===i||i([null,null],e):null===i||void 0===i||i(null,e),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(e){"boolean"===typeof r.props.closeOnScroll&&r.props.closeOnScroll?e.target!==document&&e.target!==document.documentElement&&e.target!==document.body||r.setOpen(!1):"function"===typeof r.props.closeOnScroll&&r.props.closeOnScroll(e)&&r.setOpen(!1)},r.renderCalendar=function(){var e,n;return r.props.inline||r.isCalendarOpen()?i.createElement(Us,fa({showMonthYearDropdown:void 0,ref:function(e){r.calendar=e}},r.props,r.state,{setOpen:r.setOpen,dateFormat:null!==(e=r.props.dateFormatCalendar)&&void 0!==e?e:t.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:us(r.modifyHolidays()),outsideClickIgnoreClass:r.props.outsideClickIgnoreClass,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:null!==(n=r.props.dropdownMode)&&void 0!==n?n:t.defaultProps.dropdownMode}),r.props.children):null},r.renderAriaLiveRegion=function(){var e,n,o=r.props.locale,a=null!==(e=r.props.dateFormat)&&void 0!==e?e:t.defaultProps.dateFormat,s=r.props.showTimeInput||r.props.showTimeSelect?"PPPPp":"PPPP";return n=r.props.selectsRange?"Selected start date: ".concat(Ea(r.props.startDate,{dateFormat:s,locale:o}),". ").concat(r.props.endDate?"End date: "+Ea(r.props.endDate,{dateFormat:s,locale:o}):""):r.props.showTimeSelectOnly?"Selected time: ".concat(Ea(r.props.selected,{dateFormat:a,locale:o})):r.props.showYearPicker?"Selected year: ".concat(Ea(r.props.selected,{dateFormat:"yyyy",locale:o})):r.props.showMonthYearPicker?"Selected month: ".concat(Ea(r.props.selected,{dateFormat:"MMMM yyyy",locale:o})):r.props.showQuarterYearPicker?"Selected quarter: ".concat(Ea(r.props.selected,{dateFormat:"yyyy, QQQ",locale:o})):"Selected date: ".concat(Ea(r.props.selected,{dateFormat:s,locale:o})),i.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n)},r.renderDateInput=function(){var e,n,o=Qe(r.props.className,((e={})[r.props.outsideClickIgnoreClass||t.defaultProps.outsideClickIgnoreClass]=r.state.open,e)),a=r.props.customInput||i.createElement("input",{type:"text"}),s=r.props.customInputRef||"ref";return(0,i.cloneElement)(a,((n={})[s]=function(e){r.input=e},n.value=r.getInputValue(),n.onBlur=r.handleBlur,n.onChange=r.handleChange,n.onClick=r.onInputClick,n.onFocus=r.handleFocus,n.onKeyDown=r.onInputKeyDown,n.id=r.props.id,n.name=r.props.name,n.form=r.props.form,n.autoFocus=r.props.autoFocus,n.placeholder=r.props.placeholderText,n.disabled=r.props.disabled,n.autoComplete=r.props.autoComplete,n.className=Qe(a.props.className,o),n.title=r.props.title,n.readOnly=r.props.readOnly,n.required=r.props.required,n.tabIndex=r.props.tabIndex,n["aria-describedby"]=r.props.ariaDescribedBy,n["aria-invalid"]=r.props.ariaInvalid,n["aria-labelledby"]=r.props.ariaLabelledBy,n["aria-required"]=r.props.ariaRequired,n))},r.renderClearButton=function(){var e=r.props,t=e.isClearable,n=e.disabled,o=e.selected,a=e.startDate,s=e.endDate,l=e.clearButtonTitle,c=e.clearButtonClassName,u=void 0===c?"":c,d=e.ariaLabelClose,h=void 0===d?"Close":d,p=e.selectedDates,f=e.readOnly;return!t||f||null==o&&null==a&&null==s&&!(null===p||void 0===p?void 0:p.length)?null:i.createElement("button",{type:"button",className:Qe("react-datepicker__close-icon",u,{"react-datepicker__close-icon--disabled":n}),disabled:n,"aria-label":h,onClick:r.onClearClick,title:l,tabIndex:-1})},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return pa(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,outsideClickIgnoreClass:Bs,readOnly:!1,rangeSeparator:" - ",withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:12,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(e,t){var n,r,i,o,a,s;e.inline&&(a=e.selected,s=this.props.selected,a&&s?Or(a)!==Or(s)||jr(a)!==jr(s):a!==s)&&this.setPreSelection(this.props.selected),void 0!==this.state.monthSelectedIn&&e.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),e.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:cs(this.props.highlightDates)}),t.focused||La(e.selected,this.props.selected)||this.setState({inputValue:null}),t.open!==this.state.open&&(!1===t.open&&!0===this.state.open&&(null===(r=(n=this.props).onCalendarOpen)||void 0===r||r.call(n)),!0===t.open&&!1===this.state.open&&(null===(o=(i=this.props).onCalendarClose)||void 0===o||o.call(i)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var e=this.props,t=e.showIcon,n=e.icon,r=e.calendarIconClassname,o=e.calendarIconClassName,a=e.toggleCalendarOnIconClick,s=this.state.open;return r&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),i.createElement("div",{className:"react-datepicker__input-container".concat(t?" react-datepicker__view-calendar-icon":"")},t&&i.createElement(zs,fa({icon:n,className:Qe(o,!o&&r,s&&"react-datepicker-ignore-onclickoutside")},a?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var e=this.renderCalendar();if(this.props.inline)return e;if(this.props.withPortal){var t=this.state.open?i.createElement(Vs,{enableTabLoop:this.props.enableTabLoop},i.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},e)):null;return this.state.open&&this.props.portalId&&(t=i.createElement(qs,fa({portalId:this.props.portalId},this.props),t)),i.createElement("div",null,this.renderInputContainer(),t)}return i.createElement(Ks,fa({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:e,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t}(i.Component),Qs="input",Xs="navigate";const Js={TRAINING_SYSTEMS:{practical_periodization:"Practical Periodization",high_volume:"High Volume Training",polarized:"Polarized Training",base_building:"Base Building",competitive:"Competitive Training"},EQUIPMENT:{cyclete:"Cyclete",elliptigo:"ElliptiGO",runeq:"RunEQ",running:"Running",bike:"Bike",standup_bike:"Stand-up Bike"},PHASES:{base:"Base Phase",build:"Build Phase",peak:"Peak Phase",taper:"Taper Phase",recovery:"Recovery Phase"},WORKOUT_TYPES:{easy:"Easy Run",tempo:"Tempo Run",intervals:"Intervals",long_run:"Long Run",hills:"Hill Workout",recovery:"Recovery",brick:"Brick Workout",bike:"Bike Workout"},INTENSITY_LABELS:{easy:"Easy",moderate:"Moderate",comfortablyHard:"Comfortably Hard",comfortably_hard:"Comfortably Hard",thresholdPace:"Threshold Pace",threshold_pace:"Threshold Pace",tempoPlus:"Tempo Plus",tempo_plus:"Tempo Plus",hard:"Hard",very_hard:"Very Hard",veryHard:"Very Hard",max_effort:"Maximum Effort",maxEffort:"Maximum Effort"}};function $s(e){if(!e)return"";const t=e.toLowerCase();return Js.EQUIPMENT[t]||el(e)}function Zs(e){return e?Js.PHASES[e.toLowerCase()]||el(e):""}function el(e){if(!e)return"";const t=["a","an","and","as","at","but","by","for","in","of","on","or","the","to","with"];return e.toLowerCase().split(" ").map((e,n)=>0===n?e.charAt(0).toUpperCase()+e.slice(1):t.includes(e)?e:e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function tl(e){let{selected:t,onChange:n,minDate:r,maxDate:i,placeholder:o}=e;return(0,Ne.jsx)(Gs,{selected:t,onChange:n,minDate:r,maxDate:i,placeholderText:o,className:"modern-date-input",wrapperClassName:"modern-date-wrapper",calendarClassName:"modern-calendar",popperClassName:"modern-popper",showPopperArrow:!1,dateFormat:"MMMM d, yyyy",popperPlacement:"bottom-start",style:{fontSize:"1.1rem",padding:"14px 16px",minWidth:"220px",border:"2px solid rgba(0, 212, 255, 0.3)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.05)",color:"#fff",cursor:"pointer"}})}function nl(e){let{value:t,onChange:n,maxValue:r,unit:o,zones:a}=e;const[s,l]=(0,i.useState)(!1),c=i.useRef(null),u=225,d=(u+t/r*270)*Math.PI/180,h=150,p=150,f=120,m=h+f*Math.cos(d),g=p+f*Math.sin(d),y=a.find(e=>t>=e.min&&t<=e.max)||a[0],v=e=>{l(!0),e.preventDefault()},b=i.useCallback(e=>{if(!s||!c.current)return;e.preventDefault();const t=c.current.getBoundingClientRect(),i=e.clientX||e.touches&&e.touches[0].clientX,o=e.clientY||e.touches&&e.touches[0].clientY,a=i-t.left-h,l=o-t.top-p;let u,d=180*Math.atan2(l,a)/Math.PI;if(d<0&&(d+=360),d>=225||d<=135){u=d>=225?d-225:d+135;const e=Math.round(u/270*r);n(Math.max(0,Math.min(r,e)))}},[s,h,p,r,n]),w=i.useCallback(()=>{l(!1)},[]);return i.useEffect(()=>{if(s)return document.addEventListener("mousemove",b),document.addEventListener("mouseup",w),document.addEventListener("touchmove",b,{passive:!1}),document.addEventListener("touchend",w),()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",w),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",w)}},[s,b,w]),(0,Ne.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"20px 0",userSelect:"none"},children:[(0,Ne.jsxs)("div",{ref:c,style:{position:"relative",width:"300px",height:"300px",cursor:s?"grabbing":"grab",touchAction:"none"},onMouseDown:v,onTouchStart:v,children:[(0,Ne.jsxs)("svg",{width:"300",height:"300",style:{position:"absolute"},children:[a.map((e,t)=>{const n=u+e.min/r*270,i=u+e.max/r*270,o=n*Math.PI/180,a=i*Math.PI/180,s=h+f*Math.cos(o),l=p+f*Math.sin(o),c=h+f*Math.cos(a),d=p+f*Math.sin(a),m=i-n>180?1:0;return(0,Ne.jsx)("path",{d:"M ".concat(s," ").concat(l," A ").concat(f," ").concat(f," 0 ").concat(m," 1 ").concat(c," ").concat(d),stroke:e.color,strokeWidth:"20",fill:"none",opacity:.3},t)}),t>0&&(0,Ne.jsx)("path",{d:"M ".concat(h+f*Math.cos(u*Math.PI/180)," ").concat(p+f*Math.sin(u*Math.PI/180)," A ").concat(f," ").concat(f," 0 ").concat(t/r*270>180?1:0," 1 ").concat(m," ").concat(g),stroke:y.color,strokeWidth:"8",fill:"none"})]}),(0,Ne.jsx)("div",{style:{position:"absolute",left:m-15,top:g-15,width:"30px",height:"30px",borderRadius:"50%",backgroundColor:y.color,border:"3px solid white",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",cursor:"grab",zIndex:10}}),(0,Ne.jsxs)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",textAlign:"center",pointerEvents:"none"},children:[(0,Ne.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:y.color},children:t}),(0,Ne.jsx)("div",{style:{fontSize:"0.9rem",color:"#D1D5DB",marginTop:"4px"},children:o}),(0,Ne.jsx)("div",{style:{fontSize:"0.8rem",color:y.color,marginTop:"8px",fontWeight:"500"},children:y.label})]})]}),(0,Ne.jsx)("div",{style:{display:"flex",gap:"8px",marginTop:"16px",flexWrap:"wrap",justifyContent:"center"},children:a.map((e,r)=>(0,Ne.jsx)("button",{onClick:()=>n(Math.floor((e.min+e.max)/2)),style:{padding:"6px 12px",borderRadius:"20px",border:"2px solid ".concat(e.color),backgroundColor:t>=e.min&&t<=e.max?e.color:"transparent",color:t>=e.min&&t<=e.max?"white":e.color,fontSize:"0.8rem",cursor:"pointer",transition:"all 0.2s ease"},children:e.label},r))})]})}const rl=function(e){let{onComplete:t}=e;const n=te(),[r,o]=(0,i.useState)(1),[a,l]=(0,i.useState)({goal:"",raceDistance:"",raceElevationProfile:"",experienceLevel:"",currentRaceTime:"",currentWeeklyMileage:"",currentLongRunDistance:"",runsPerWeek:"",availableDays:[],preferredBikeDays:[],longRunDay:"",hardSessionsPerWeek:"",hardSessionDays:[],startDate:"",raceDate:"",missedWorkoutPreference:"modify",standUpBikeType:null,runningStatus:"active",location:"",climate:"",trainingStyle:"adventure",trainingPhilosophy:"practical_periodization",hasGarmin:null}),c=(e,t)=>{l(n=>(0,s.A)((0,s.A)({},n),{},{[e]:t}))},u=e=>5!==e,d=async()=>{try{if(!a.currentRaceTime)return void alert("Goal race time is required to calculate your training paces. Please select your target race time.");const e=((e,t)=>{if(!e||!t||0===t.length)return{adjustedDate:e,wasAdjusted:!1};const n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r=new Date(e+"T00:00:00"),i=new Date(r);let o=0;for(;o<7;){const a=n[r.getDay()];if(t.includes(a)){const t=r.getFullYear(),o=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0"),l="".concat(t,"-").concat(o,"-").concat(s),c=r.getTime()!==i.getTime();return c&&Me.log("\ud83d\udcc5 Start date adjusted from ".concat(e," (").concat(n[i.getDay()],") to ").concat(l," (").concat(a,") - original date was a rest day")),{adjustedDate:l,wasAdjusted:c,originalDayName:n[i.getDay()],newDayName:a}}r.setDate(r.getDate()+1),o++}return{adjustedDate:e,wasAdjusted:!1}})(a.startDate,a.availableDays);if(e.wasAdjusted){a.startDate=e.adjustedDate;const t="Your start date has been automatically adjusted from ".concat(e.originalDayName," to ").concat(e.newDayName," because ").concat(e.originalDayName," is marked as a rest day in your schedule.");Me.log("\u26a0\ufe0f ".concat(t)),alert(t)}Me.log("\ud83d\udd27 Creating training plan service...");const r=new Ye;Me.log("\ud83d\udccb Converting form data to training plan profile...",a);const i=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].filter(e=>!a.availableDays.includes(e)),o=a.hardSessionDays;Me.log("\ud83d\udd0d User selections:"),Me.log("   \ud83d\udcc5 Available training days:",a.availableDays),Me.log("   \ud83d\ude34 Rest days:",i),Me.log("   \ud83d\udeb4 Cyclete days:",a.preferredBikeDays),Me.log("   \ud83d\udcaa Hard session days:",o),Me.log("   \ud83c\udfc3 Long run day:",a.longRunDay),Me.log("   \ud83d\udccf Current weekly mileage:",parseInt(a.currentWeeklyMileage)||"NOT PROVIDED","miles"),Me.log("\ud83d\ude80 Generating training plan with user profile");const s=await r.generatePlanFromOnboarding(a);if(Me.log("\u2705 Training plan created successfully"),s&&s.plan)Me.log("Generated training plan:",s),await t(a,s.plan),Me.log("\u2705 Plan saved successfully, navigating to dashboard..."),n("/dashboard");else{console.error("Failed to generate plan");const e=h(a);await t(a,e),Me.log("\u2705 Mock plan saved successfully, navigating to dashboard..."),n("/dashboard")}}catch(e){console.error("Error in plan generation or saving:",e),alert("There was a problem creating or saving your plan. Please try again. Error: "+e.message)}},h=e=>({planOverview:{raceDistance:e.raceDistance,raceDate:e.raceDate,startDate:e.startDate,totalWeeks:e.raceDate&&e.startDate?Math.ceil((new Date(e.raceDate)-new Date(e.startDate))/6048e5):12,runsPerWeek:e.runsPerWeek,standUpBikeType:e.standUpBikeType,location:e.location},weeks:[{week:1,phase:"base",totalMileage:15,workouts:[{day:"Tuesday",type:"tempo",workout:{name:"Sandwich Tempo"},focus:"Lactate Threshold"},{day:"Thursday",type:"easy",workout:{name:"Easy Run"},focus:"Recovery"},{day:"Sunday",type:"longRun",workout:{name:"Conversational Long Run"},focus:"Endurance"}]}]});return(0,Ne.jsx)("div",{style:{minHeight:"100vh",padding:"20px 0"},children:(0,Ne.jsxs)("div",{className:"container",children:[(0,Ne.jsx)("div",{className:"progress-bar",style:{marginBottom:"20px"},children:(0,Ne.jsx)("div",{className:"progress-fill",style:{width:"".concat(r/7*100,"%")}})}),(0,Ne.jsx)("div",{style:{textAlign:"center",marginBottom:"20px"},children:(0,Ne.jsxs)("p",{style:{color:"#E5E7EB",margin:0},children:["Step ",r," of ",7]})}),(0,Ne.jsxs)("div",{className:"card fade-in",children:[function(){switch(r){case 1:return(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h2",{style:{color:"#FFFFFF",fontWeight:"700",fontSize:"1.75rem",marginBottom:"16px"},children:"Training Goals & Background"}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"\ud83c\udfaf Let's understand your running journey!"})," We'll collect your basic info to create the perfect plan."]}),(0,Ne.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,Ne.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"What's your main training goal?"}),(0,Ne.jsx)("div",{className:"card-grid",children:[{id:"race",name:"Train for a race",icon:"\ud83c\udfc6"},{id:"distance",name:"Run a specific distance",icon:"\ud83d\udccf"},{id:"fitness",name:"General fitness",icon:"\ud83d\udcaa"},{id:"return",name:"Return to running",icon:"\ud83d\udd04"}].map(e=>(0,Ne.jsxs)("div",{className:"equipment-card ".concat(a.goal===e.id?"selected":""),onClick:()=>c("goal",e.id),children:[(0,Ne.jsx)("div",{className:"equipment-icon",children:e.icon}),(0,Ne.jsx)("p",{className:"equipment-name",children:e.name})]},e.id))})]}),(0,Ne.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,Ne.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"What distance are you training for?"}),(0,Ne.jsx)("div",{className:"card-grid",children:[{id:"5K",name:"5K",popular:!0},{id:"10K",name:"10K",popular:!0},{id:"Half",name:"Half Marathon",popular:!0},{id:"Marathon",name:"Marathon",popular:!0},{id:"Ultra",name:"Ultra Marathon",badge:"We support 50K+!"},{id:"Custom",name:"Custom Distance",badge:"Any distance!"}].map(e=>(0,Ne.jsxs)("div",{className:"equipment-card ".concat(a.raceDistance===e.id?"selected":""),onClick:()=>c("raceDistance",e.id),children:[(0,Ne.jsx)("p",{className:"equipment-name",children:e.name}),e.popular&&(0,Ne.jsx)("div",{className:"badge badge-success",children:"Popular"}),e.badge&&(0,Ne.jsx)("div",{className:"badge badge-info",children:e.badge})]},e.id))})]}),(0,Ne.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,Ne.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"What's the elevation profile of your race?"}),(0,Ne.jsx)("p",{children:"This helps us customize your hill training for your specific race demands!"}),(0,Ne.jsx)("div",{className:"card-grid",children:[{id:"flat",name:"\ud83c\udfd9\ufe0f Flat",desc:"Minimal elevation change",badge:"Speed Focus"},{id:"rolling",name:"\ud83c\udf0a Rolling",desc:"Gentle hills throughout",badge:"Balanced"},{id:"moderate",name:"\u26f0\ufe0f Moderate",desc:"Some significant hills",badge:"Hill Training"},{id:"hilly",name:"\ud83c\udfd4\ufe0f Hilly",desc:"Major elevation challenges",badge:"Power Focus"}].map(e=>(0,Ne.jsxs)("div",{className:"card ".concat(a.raceElevationProfile===e.id?"selected":""),onClick:()=>c("raceElevationProfile",e.id),style:{cursor:"pointer",padding:"16px",textAlign:"center"},children:[(0,Ne.jsx)("h4",{style:{margin:"0 0 8px 0",fontSize:"1.1rem"},children:e.name}),(0,Ne.jsx)("p",{style:{margin:"0 0 8px 0",fontSize:"0.85rem",color:"#ccc"},children:e.desc}),(0,Ne.jsx)("div",{className:"badge badge-info",style:{fontSize:"0.75rem"},children:e.badge})]},e.id))}),(0,Ne.jsx)("div",{className:"card",style:{background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)",marginTop:"16px"},children:(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,Ne.jsx)("strong",{children:"\ud83c\udfaf Smart Training:"})," We'll adjust your hill workout frequency based on your race profile. Flat races get speed focus, hilly races get power development!"]})})]}),(0,Ne.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,Ne.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"How would you rate your running ability?"}),(0,Ne.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"16px"},children:[{id:"beginner",name:"Beginner",desc:"New to running or returning after a break"},{id:"intermediate",name:"Intermediate",desc:"Running regularly, some race experience"},{id:"advanced",name:"Advanced",desc:"Experienced with structured training"},{id:"elite",name:"Elite",desc:"Competitive athlete with advanced training needs"}].map(e=>(0,Ne.jsxs)("div",{className:"card ".concat(a.experienceLevel===e.id?"selected":""),onClick:()=>c("experienceLevel",e.id),style:{cursor:"pointer",padding:"20px"},children:[(0,Ne.jsx)("h4",{style:{margin:"0 0 8px 0"},children:e.name}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"0.9rem"},children:e.desc})]},e.id))})]}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"What's your GOAL race time?"}),(0,Ne.jsx)("p",{style:{fontSize:"0.95rem",color:"#D1D5DB",marginBottom:"16px"},children:"\ud83d\udcaa Be ambitious! We'll build your training paces around your target finish time."}),(0,Ne.jsx)("div",{style:{marginBottom:"20px"},children:(0,Ne.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[(0,Ne.jsx)("button",{className:"btn ".concat(a.customTimeEntry?"btn-secondary":"btn-primary"),onClick:()=>{c("customTimeEntry",!1),c("currentRaceTime","")},type:"button",children:"\ud83d\udccb Quick Pick"}),(0,Ne.jsx)("button",{className:"btn ".concat(a.customTimeEntry?"btn-primary":"btn-secondary"),onClick:()=>{c("customTimeEntry",!0),c("currentRaceTime","")},type:"button",children:"\u2328\ufe0f Enter My Goal"})]})}),a.customTimeEntry?(0,Ne.jsxs)("div",{children:[(0,Ne.jsxs)("div",{className:"form-group",children:[(0,Ne.jsx)("label",{className:"form-label",children:"Race Distance"}),(0,Ne.jsxs)("select",{className:"form-input form-select",value:a.customRaceDistance||"",onChange:e=>c("customRaceDistance",e.target.value),children:[(0,Ne.jsx)("option",{value:"",children:"Select distance"}),(0,Ne.jsx)("option",{value:"5K",children:"5K"}),(0,Ne.jsx)("option",{value:"10K",children:"10K"}),(0,Ne.jsx)("option",{value:"15K",children:"15K"}),(0,Ne.jsx)("option",{value:"Half",children:"Half Marathon"}),(0,Ne.jsx)("option",{value:"25K",children:"25K"}),(0,Ne.jsx)("option",{value:"30K",children:"30K"}),(0,Ne.jsx)("option",{value:"Marathon",children:"Marathon"}),(0,Ne.jsx)("option",{value:"50K",children:"50K"}),(0,Ne.jsx)("option",{value:"Other",children:"Other Distance"})]})]}),(0,Ne.jsxs)("div",{className:"form-group",children:[(0,Ne.jsx)("label",{className:"form-label",children:"Your Goal Time (HH:MM:SS or MM:SS)"}),(0,Ne.jsx)("input",{type:"text",className:"form-input",placeholder:"e.g., 1:45:30 or 25:45",value:a.customRaceTime||"",onChange:e=>{c("customRaceTime",e.target.value),a.customRaceDistance&&e.target.value&&c("currentRaceTime","".concat(a.customRaceDistance,"-").concat(e.target.value))}})]})]}):(0,Ne.jsxs)("div",{className:"form-group",children:[(0,Ne.jsxs)("label",{className:"form-label",children:["Select Your Goal ",a.raceDistance||"Race"," Time"]}),(0,Ne.jsxs)("select",{className:"form-input form-select",value:a.currentRaceTime,onChange:e=>c("currentRaceTime",e.target.value),required:!0,disabled:!a.raceDistance,children:[(0,Ne.jsx)("option",{value:"",children:a.raceDistance?"Select your ".concat(a.raceDistance," goal time"):"Select race distance first"}),"5K"===a.raceDistance&&(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("option",{value:"5K-15:00",children:"15:00 (Elite)"}),(0,Ne.jsx)("option",{value:"5K-18:00",children:"18:00 (Fast)"}),(0,Ne.jsx)("option",{value:"5K-20:00",children:"20:00 (Strong)"}),(0,Ne.jsx)("option",{value:"5K-22:00",children:"22:00 (Solid)"}),(0,Ne.jsx)("option",{value:"5K-25:00",children:"25:00 (Good)"}),(0,Ne.jsx)("option",{value:"5K-28:00",children:"28:00 (Steady)"}),(0,Ne.jsx)("option",{value:"5K-30:00",children:"30:00 (Building)"}),(0,Ne.jsx)("option",{value:"5K-35:00",children:"35:00 (Developing)"}),(0,Ne.jsx)("option",{value:"5K-40:00",children:"40:00 (Starting)"})]}),"10K"===a.raceDistance&&(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("option",{value:"10K-32:00",children:"32:00 (Elite)"}),(0,Ne.jsx)("option",{value:"10K-38:00",children:"38:00 (Fast)"}),(0,Ne.jsx)("option",{value:"10K-42:00",children:"42:00 (Strong)"}),(0,Ne.jsx)("option",{value:"10K-45:00",children:"45:00 (Solid)"}),(0,Ne.jsx)("option",{value:"10K-50:00",children:"50:00 (Good)"}),(0,Ne.jsx)("option",{value:"10K-55:00",children:"55:00 (Steady)"}),(0,Ne.jsx)("option",{value:"10K-60:00",children:"60:00 (Building)"}),(0,Ne.jsx)("option",{value:"10K-70:00",children:"70:00 (Developing)"}),(0,Ne.jsx)("option",{value:"10K-80:00",children:"80:00 (Starting)"})]}),"Half"===a.raceDistance&&(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("option",{value:"Half-1:10:00",children:"1:10:00 (Elite)"}),(0,Ne.jsx)("option",{value:"Half-1:25:00",children:"1:25:00 (Fast)"}),(0,Ne.jsx)("option",{value:"Half-1:35:00",children:"1:35:00 (Strong)"}),(0,Ne.jsx)("option",{value:"Half-1:45:00",children:"1:45:00 (Solid)"}),(0,Ne.jsx)("option",{value:"Half-2:00:00",children:"2:00:00 (Good)"}),(0,Ne.jsx)("option",{value:"Half-2:15:00",children:"2:15:00 (Steady)"}),(0,Ne.jsx)("option",{value:"Half-2:30:00",children:"2:30:00 (Building)"}),(0,Ne.jsx)("option",{value:"Half-2:45:00",children:"2:45:00 (Developing)"}),(0,Ne.jsx)("option",{value:"Half-3:00:00",children:"3:00:00 (Starting)"})]}),"Marathon"===a.raceDistance&&(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("option",{value:"Marathon-2:30:00",children:"2:30:00 (Elite)"}),(0,Ne.jsx)("option",{value:"Marathon-3:00:00",children:"3:00:00 (Fast)"}),(0,Ne.jsx)("option",{value:"Marathon-3:30:00",children:"3:30:00 (Strong)"}),(0,Ne.jsx)("option",{value:"Marathon-4:00:00",children:"4:00:00 (Solid)"}),(0,Ne.jsx)("option",{value:"Marathon-4:30:00",children:"4:30:00 (Good)"}),(0,Ne.jsx)("option",{value:"Marathon-5:00:00",children:"5:00:00 (Steady)"}),(0,Ne.jsx)("option",{value:"Marathon-5:30:00",children:"5:30:00 (Building)"}),(0,Ne.jsx)("option",{value:"Marathon-6:00:00",children:"6:00:00 (Developing)"}),(0,Ne.jsx)("option",{value:"Marathon-6:30:00",children:"6:30:00 (Starting)"})]})]}),!a.raceDistance&&(0,Ne.jsx)("p",{style:{fontSize:"0.85rem",color:"#FFB366",marginTop:"8px"},children:"\u2b06\ufe0f Please select your race distance first"})]}),a.currentRaceTime&&(0,Ne.jsx)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,Ne.jsx)("strong",{children:"\ud83c\udfaf Goal set!"})," All your training paces will be calculated to help you achieve this time.",(0,Ne.jsx)("br",{}),(0,Ne.jsx)("span",{style:{fontSize:"0.85rem",color:"#D1D5DB"},children:"\ud83d\udca1 Workouts feeling too hard? You can always adjust your goal later!"})]})})]}),(0,Ne.jsxs)("div",{style:{marginBottom:"32px",marginTop:"40px"},children:[(0,Ne.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Current Training Assessment"}),(0,Ne.jsx)("p",{children:"Tell us about your current training so we can create a safe, progressive plan."}),(0,Ne.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,Ne.jsx)("h4",{style:{color:"#F8F9FA",fontWeight:"600",fontSize:"1.1rem",marginBottom:"10px"},children:"What's your current weekly mileage?"}),(0,Ne.jsx)("p",{style:{fontSize:"0.9rem",margin:"0 0 24px 0",color:"#ccc"},children:"Include all running and running-equivalent activities (cycling at 3:1 ratio, elliptical at 2:1)"}),(0,Ne.jsx)(nl,{value:parseInt(a.currentWeeklyMileage)||0,onChange:e=>c("currentWeeklyMileage",e.toString()),maxValue:80,unit:"miles/week",zones:[{min:0,max:10,label:"Building Base",color:"#4CAF50"},{min:11,max:25,label:"Light Base",color:"#2196F3"},{min:26,max:40,label:"Solid Base",color:"#FF9800"},{min:41,max:60,label:"High Volume",color:"#F44336"},{min:61,max:80,label:"Elite Volume",color:"#9C27B0"}]})]}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h4",{style:{color:"#F8F9FA",fontWeight:"600",fontSize:"1.1rem",marginBottom:"10px"},children:"What's your current long run distance?"}),(0,Ne.jsx)("p",{style:{fontSize:"0.9rem",margin:"0 0 24px 0",color:"#ccc"},children:"Your longest single run in the past 4 weeks"}),(0,Ne.jsx)(nl,{value:parseInt(a.currentLongRunDistance)||0,onChange:e=>c("currentLongRunDistance",e.toString()),maxValue:26,unit:"miles",zones:[{min:0,max:3,label:"Building Base",color:"#4CAF50"},{min:4,max:8,label:"5K-10K Ready",color:"#2196F3"},{min:9,max:13,label:"Half Base",color:"#FF9800"},{min:14,max:18,label:"Strong Endurance",color:"#F44336"},{min:19,max:26,label:"Marathon Ready",color:"#9C27B0"}]})]})]})]});case 2:return(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h2",{style:{color:"#FFFFFF",fontWeight:"700",fontSize:"1.75rem",marginBottom:"16px"},children:"Training Schedule & Frequency"}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"\ud83d\uddd3\ufe0f Let's plan your training week!"})," Tell us about your schedule and preferences."]}),(0,Ne.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,Ne.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"How many days per week would you like to train?"}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"\ud83d\ude80 Unlike other apps, we don't restrict your choices!"})," Pick what works for your schedule."]}),(0,Ne.jsx)("div",{className:"card-grid",children:[{days:3,desc:"Minimal time commitment",good:"Busy schedules, recovery focus",recommended:"beginner"===a.experienceLevel},{days:4,desc:"Balanced approach",good:"Most popular, sustainable",recommended:"intermediate"===a.experienceLevel},{days:5,desc:"Serious training",good:"Race goals, fitness gains",recommended:"advanced"===a.experienceLevel},{days:6,desc:"High volume",good:"Perfect for stand-up bike integration",recommended:!1},{days:7,desc:"Maximum frequency",good:"Elite athletes, varied intensities",recommended:"elite"===a.experienceLevel}].map(e=>(0,Ne.jsxs)("div",{className:"card ".concat(a.runsPerWeek===e.days?"selected":""),onClick:()=>c("runsPerWeek",e.days),style:{cursor:"pointer",textAlign:"center"},children:[(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",marginBottom:"6px"},children:[(0,Ne.jsx)("h4",{style:{fontSize:"1.4rem",margin:0,color:"#00D4FF"},children:e.days}),e.recommended&&(0,Ne.jsx)("span",{style:{fontSize:"0.8rem"},children:"\u2b50"})]}),(0,Ne.jsx)("p",{style:{margin:"0 0 8px 0",fontWeight:"600"},children:e.desc}),(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"0.8rem",color:"#D1D5DB"},children:["Good for: ",e.good]}),e.recommended&&(0,Ne.jsxs)("div",{className:"badge badge-success",style:{marginTop:"8px"},children:["Recommended for ","advanced"===a.experienceLevel?"advanced runners":"".concat(a.experienceLevel," runners")]})]},e.days))})]}),a.runsPerWeek&&(0,Ne.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,Ne.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Which days are you available to train?"}),(0,Ne.jsxs)("p",{children:["Select ",a.runsPerWeek," days that work best for your schedule."]}),(0,Ne.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"10px",maxWidth:"500px",margin:"0 auto"},children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(e=>{const t=a.availableDays.includes(e),n=a.availableDays.length>=a.runsPerWeek,r=!t&&n;return(0,Ne.jsxs)("div",{className:"equipment-card ".concat(t?"selected":""," ").concat(r?"disabled":""),onClick:()=>{if(a.availableDays.includes(e)){const t=a.availableDays.filter(t=>t!==e);c("availableDays",t)}else if(a.availableDays.length<a.runsPerWeek){const t=[...a.availableDays,e];c("availableDays",t)}},style:{opacity:r?.4:1,cursor:r?"not-allowed":"pointer"},children:[(0,Ne.jsx)("p",{className:"equipment-name",children:e}),r&&(0,Ne.jsx)("span",{style:{fontSize:"0.7rem",color:"#D1D5DB"},children:"Limit reached"})]},e)})}),(0,Ne.jsx)("div",{className:"card",style:{background:a.availableDays.length===a.runsPerWeek?"rgba(0, 255, 136, 0.1)":"rgba(255, 184, 0, 0.1)",border:a.availableDays.length===a.runsPerWeek?"1px solid rgba(0, 255, 136, 0.3)":"1px solid rgba(255, 184, 0, 0.3)",marginTop:"16px"},children:(0,Ne.jsx)("p",{style:{margin:0,fontSize:"0.9rem"},children:a.availableDays.length===a.runsPerWeek?"\u2705 Perfect! Selected all ".concat(a.runsPerWeek," training days."):"Selected: ".concat(a.availableDays.length,"/").concat(a.runsPerWeek," days ").concat(a.availableDays.length<a.runsPerWeek?"(select more)":"")})})]}),a.availableDays.length===a.runsPerWeek&&(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Which day do you prefer for your long run?"}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"\ud83c\udfc3\u200d\u2642\ufe0f Personal preference matters!"})," Pick the day that works best for your schedule."]}),(0,Ne.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"10px",maxWidth:"500px",margin:"0 auto"},children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].filter(e=>a.availableDays.includes(e)).map(e=>(0,Ne.jsxs)("div",{className:"equipment-card ".concat(a.longRunDay===e?"selected":""),onClick:()=>c("longRunDay",e),children:[(0,Ne.jsx)("p",{className:"equipment-name",children:e}),("Saturday"===e||"Sunday"===e)&&(0,Ne.jsx)("div",{className:"badge badge-success",style:{marginTop:"4px",fontSize:"0.7rem"},children:"Popular choice"})]},e))}),a.longRunDay&&(0,Ne.jsx)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,Ne.jsx)("strong",{children:"\ud83c\udfaf Great choice!"})," Your long runs will be scheduled on ",a.longRunDay,"s."]})})]}),a.longRunDay&&(0,Ne.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,Ne.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Let's talk about your hard sessions!"}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"\ud83c\udfc3\u200d\u2642\ufe0f Coach's question:"})," In addition to your long run, how many hard sessions (speed, tempo, hills) would you like per week?"]}),(0,Ne.jsx)("div",{style:{display:"flex",gap:"16px",justifyContent:"center"},children:[1,2].map(e=>(0,Ne.jsxs)("div",{className:"card ".concat(a.hardSessionsPerWeek===e?"selected":""),onClick:()=>c("hardSessionsPerWeek",e),style:{cursor:"pointer",textAlign:"center",minWidth:"120px"},children:[(0,Ne.jsx)("h4",{style:{fontSize:"2rem",margin:"0 0 8px 0",color:"#00D4FF"},children:e}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"0.9rem"},children:1===e?"One hard session":"Two hard sessions"}),(0,Ne.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#D1D5DB"},children:1===e?"Focus & recovery":"Balanced training"})]},e))}),a.hardSessionsPerWeek&&(0,Ne.jsx)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,Ne.jsx)("strong",{children:"\ud83c\udfaf Perfect!"})," You'll get ",a.hardSessionsPerWeek," quality ",1===a.hardSessionsPerWeek?"session":"sessions"," per week, plus your long run for a total of ",a.hardSessionsPerWeek+1," focused training days."]})})]}),a.hardSessionsPerWeek&&(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"What days do you want your hard sessions?"}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"\ud83d\udcaa Your preference matters!"})," Pick the days that work best for your energy and schedule."]}),(0,Ne.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"10px",maxWidth:"500px",margin:"0 auto"},children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].filter(e=>a.availableDays.includes(e)&&e!==a.longRunDay).map(e=>{const t=a.hardSessionDays.includes(e),n=a.hardSessionDays.length>=a.hardSessionsPerWeek,r=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].indexOf(e),i=a.hardSessionDays.some(e=>{const t=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].indexOf(e);return 1===Math.abs(r-t)}),o=!t&&n||!t&&i,s=!t&&i?"Hard sessions need recovery days between them":null;return(0,Ne.jsxs)("div",{className:"equipment-card ".concat(t?"selected":""," ").concat(o?"disabled":""),onClick:()=>{if(a.hardSessionDays.includes(e)){const t=a.hardSessionDays.filter(t=>t!==e);c("hardSessionDays",t)}else if(a.hardSessionDays.length<a.hardSessionsPerWeek&&!i){const t=[...a.hardSessionDays,e];c("hardSessionDays",t)}},style:{opacity:o?.4:1,cursor:o?"not-allowed":"pointer",position:"relative"},title:s||"",children:[(0,Ne.jsx)("p",{className:"equipment-name",children:e}),s&&(0,Ne.jsx)("div",{style:{position:"absolute",bottom:"2px",left:"50%",transform:"translateX(-50%)",fontSize:"0.65rem",color:"#FF6B6B",textAlign:"center",lineHeight:"1.1",whiteSpace:"nowrap"},children:"\u26a0\ufe0f Need recovery"}),o&&!s&&(0,Ne.jsx)("span",{style:{fontSize:"0.7rem",color:"#D1D5DB"},children:"Limit reached"})]},e)})}),(0,Ne.jsx)("div",{className:"card",style:{background:a.hardSessionDays.length===a.hardSessionsPerWeek?"rgba(0, 255, 136, 0.1)":"rgba(255, 184, 0, 0.1)",border:a.hardSessionDays.length===a.hardSessionsPerWeek?"1px solid rgba(0, 255, 136, 0.3)":"1px solid rgba(255, 184, 0, 0.3)",marginTop:"16px"},children:(0,Ne.jsx)("p",{style:{margin:0,fontSize:"0.9rem"},children:a.hardSessionDays.length===a.hardSessionsPerWeek?"\u2705 Excellent! Your hard sessions will be on ".concat(a.hardSessionDays.join(" and "),", with your long run on ").concat(a.longRunDay,"."):"Selected: ".concat(a.hardSessionDays.length,"/").concat(a.hardSessionsPerWeek," hard session days ").concat(a.hardSessionDays.length<a.hardSessionsPerWeek?"(select more)":"")})}),a.hardSessionDays.length===a.hardSessionsPerWeek&&(0,Ne.jsx)("div",{className:"card",style:{background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)",marginTop:"8px"},children:(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,Ne.jsx)("strong",{children:"\ud83c\udfaf Smart scheduling!"})," This gives you proper recovery between hard efforts and sets you up for training success."]})})]})]});case 3:return(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h2",{style:{color:"#FFFFFF",fontWeight:"700",fontSize:"1.75rem",marginBottom:"16px"},children:"Training Dates"}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"\ud83d\udcc5 Real dates, real planning!"})," Unlike other apps, we give you actual calendar dates."]}),(0,Ne.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,Ne.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"When would you like to start training?"}),(0,Ne.jsxs)("div",{className:"form-group",children:[(0,Ne.jsx)("label",{className:"form-label",children:"Start Date"}),(0,Ne.jsx)(tl,{selected:a.startDate?new Date(a.startDate+"T00:00:00"):null,onChange:e=>{if(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");c("startDate","".concat(t,"-").concat(n,"-").concat(r))}else c("startDate","")},minDate:new Date,placeholder:"Select your training start date"})]}),a.startDate&&(0,Ne.jsx)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)"},children:(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,Ne.jsx)("strong",{children:"\ud83c\udfaf Perfect!"})," Your training will begin on ",new Date(a.startDate+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),".",(0,Ne.jsx)("br",{}),"We'll schedule workouts on your selected days starting from this date."]})})]}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"When is your race?"}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"\ud83c\udfc1 Goal-oriented training!"})," We'll work backwards from your race date to optimize your preparation."]}),(0,Ne.jsxs)("div",{className:"form-group",style:{marginBottom:"24px"},children:[(0,Ne.jsx)("label",{className:"form-label",children:"Race Date"}),(0,Ne.jsx)(tl,{selected:a.raceDate?new Date(a.raceDate+"T00:00:00"):null,onChange:e=>{if(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");c("raceDate","".concat(t,"-").concat(n,"-").concat(r))}else c("raceDate","")},minDate:a.startDate?new Date(a.startDate+"T00:00:00"):new Date,placeholder:"Select your race date"})]}),(0,Ne.jsx)("div",{style:{minHeight:"120px",marginTop:"16px"},children:a.raceDate&&a.startDate&&(()=>{const e=Math.ceil((new Date(a.raceDate)-new Date(a.startDate))/6048e5),t=a.raceDistance,n={"5K":6,"10K":8,Half:10,Marathon:12}[t]||12,r={"5K":8,"10K":10,Half:12,Marathon:16}[t]||16;let i,o;return e<n?(i={background:"rgba(255, 107, 107, 0.1)",border:"1px solid rgba(255, 107, 107, 0.5)"},o=(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("strong",{children:"\u26a0\ufe0f That's quite ambitious!"})," Your race is on ",new Date(a.raceDate+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),".",(0,Ne.jsx)("br",{}),"With only ",e," weeks, you'll need an aggressive plan. Most coaches recommend at least ",n," weeks for a ",t,".",(0,Ne.jsx)("br",{}),(0,Ne.jsx)("em",{style:{color:"#FFB366"},children:"\ud83d\udca1 Consider moving your start date earlier or choosing a later race for safer preparation."})]})):e<r?(i={background:"rgba(255, 179, 102, 0.1)",border:"1px solid rgba(255, 179, 102, 0.5)"},o=(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("strong",{children:"\ud83d\udcaa Challenging timeline!"})," Your race is on ",new Date(a.raceDate+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),".",(0,Ne.jsx)("br",{}),"With ",e," weeks, it's doable but you'll need to stay consistent. Most coaches prefer ",r," weeks for optimal ",t," preparation."]})):(i={background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)"},o=(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("strong",{children:"\ud83c\udfaf Perfect timeline!"})," Your race is on ",new Date(a.raceDate+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),".",(0,Ne.jsx)("br",{}),"With ",e," weeks to prepare, you'll have time for proper base building and peak training!"]})),(0,Ne.jsx)("div",{className:"card",style:i,children:(0,Ne.jsx)("p",{style:{margin:0,fontSize:"0.9rem"},children:o})})})()}),(0,Ne.jsx)("div",{className:"card",style:{background:"rgba(255, 165, 0, 0.1)",border:"1px solid rgba(255, 165, 0, 0.3)",marginTop:"16px"},children:(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,Ne.jsx)("strong",{children:"\ud83d\udca1 Pro tip:"})," Don't have a specific race yet? Pick a target date 12-16 weeks out - you can always adjust later!"]})})]})]});case 4:return(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h2",{style:{color:"#FFFFFF",fontWeight:"700",fontSize:"1.75rem",marginBottom:"16px"},children:"Equipment & Training Preferences"}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"\ud83d\ude80 Unique to Run+ Plans!"})," We're the only app with equipment-specific training."]}),(0,Ne.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,Ne.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Do you have a Garmin device?"}),(0,Ne.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",maxWidth:"400px",margin:"0 auto"},children:[(0,Ne.jsxs)("div",{className:"card ".concat(!0===a.hasGarmin?"selected":""),onClick:()=>c("hasGarmin",!0),style:{cursor:"pointer",textAlign:"center",padding:"24px"},children:[(0,Ne.jsx)("h4",{style:{margin:"0 0 8px 0",fontSize:"1.2rem"},children:"Yes"}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#D1D5DB"},children:"I have a Garmin"})]}),(0,Ne.jsxs)("div",{className:"card ".concat(!1===a.hasGarmin?"selected":""),onClick:()=>c("hasGarmin",!1),style:{cursor:"pointer",textAlign:"center",padding:"24px"},children:[(0,Ne.jsx)("h4",{style:{margin:"0 0 8px 0",fontSize:"1.2rem"},children:"No"}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#D1D5DB"},children:"I don't have one"})]})]}),!0===a.hasGarmin&&(0,Ne.jsxs)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:[(0,Ne.jsx)("h4",{style:{margin:"0 0 12px 0",color:"#FFFFFF",fontWeight:"600",fontSize:"1.1rem"},children:"Download the RunEQ Data Field"}),(0,Ne.jsx)("p",{style:{margin:"0 0 16px 0",fontSize:"0.95rem",color:"#E5E7EB"},children:"Track your bike workouts with RunEQ miles on your Garmin device."}),(0,Ne.jsx)("a",{href:"https://apps.garmin.com/apps/2327f1b2-a481-4c9e-b529-852e9989cf55",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"12px 24px",background:"rgba(0, 212, 255, 0.2)",border:"2px solid #00D4FF",borderRadius:"8px",color:"#00D4FF",textDecoration:"none",fontWeight:"600",fontSize:"1rem",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.background="rgba(0, 212, 255, 0.3)"},onMouseLeave:e=>{e.target.style.background="rgba(0, 212, 255, 0.2)"},children:"Get RunEQ Data Field"}),(0,Ne.jsx)("p",{style:{margin:"12px 0 0 0",fontSize:"0.85rem",color:"#D1D5DB"},children:"Your bike workouts will show RunEQ miles in the training plan"})]}),!1===a.hasGarmin&&(0,Ne.jsx)("div",{className:"card",style:{background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)",marginTop:"16px"},children:(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,Ne.jsx)("strong",{children:"No problem!"})," Your bike workouts will show time and distance instead."]})})]}),(0,Ne.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,Ne.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Do you have any stand-up bikes?"}),(0,Ne.jsx)("div",{className:"equipment-grid",children:[{id:"cyclete",name:"Cyclete",desc:"Teardrop motion, excellent for distance training",badge:"Running-like motion"},{id:"elliptigo",name:"ElliptiGO",desc:"Elliptical motion, great for full-body workouts",badge:"Full body engagement"},{id:null,name:"Neither",desc:"Pure running training with basic cross-training options",badge:"Traditional approach"}].map(e=>(0,Ne.jsxs)("div",{className:"card ".concat(a.standUpBikeType===e.id?"selected":""),onClick:()=>c("standUpBikeType",e.id),style:{cursor:"pointer",textAlign:"center",display:"flex",flexDirection:"column",minHeight:"140px"},children:[(0,Ne.jsx)("h4",{style:{margin:"0 0 12px 0",color:"var(--runeq-primary)",fontSize:"1.2rem",minHeight:"28px"},children:e.name}),(0,Ne.jsx)("p",{style:{margin:"0 0 12px 0",fontSize:"0.9rem",flex:"1",minHeight:"40px"},children:e.desc}),(0,Ne.jsx)("div",{className:"badge badge-info",style:{alignSelf:"center"},children:e.badge})]},e.id||"none"))}),a.standUpBikeType&&(0,Ne.jsx)("div",{className:"card",style:{background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)"},children:(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,Ne.jsx)("strong",{children:"\ud83c\udfaf Great choice!"})," You'll get ",$s(a.standUpBikeType),"-specific workouts with motion-optimized training and equipment-specific conversion factors."]})})]}),a.standUpBikeType&&(0,Ne.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,Ne.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.3rem",marginBottom:"12px"},children:"Can you run right now?"}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"\ud83c\udfe5 We support injured runners too!"})," Tell us about your current running status."]}),(0,Ne.jsx)("div",{style:{display:"grid",gap:"16px"},children:[{id:"active",name:"Yes - I can run",icon:"\ud83c\udfc3",desc:"Mix running with stand-up bike cross-training"},{id:"bikeOnly",name:"No - Bike only for now",icon:"\ud83d\udeb4",desc:"Injured or transitioning - bike workouts only until ready to run"},{id:"transitioning",name:"Transitioning back",icon:"\ud83d\udd04",desc:"Returning from injury - gradually add running to bike base"}].map(e=>(0,Ne.jsxs)("div",{className:"card ".concat(a.runningStatus===e.id?"selected":""),onClick:()=>c("runningStatus",e.id),style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"16px",padding:"16px"},children:[(0,Ne.jsx)("div",{style:{fontSize:"1.5rem"},children:e.icon}),(0,Ne.jsxs)("div",{style:{flex:1},children:[(0,Ne.jsx)("h4",{style:{margin:"0 0 4px 0"},children:e.name}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#D1D5DB"},children:e.desc})]})]},e.id))}),"bikeOnly"===a.runningStatus&&(0,Ne.jsx)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,Ne.jsx)("strong",{children:"\ud83d\udcaa Perfect for injury recovery!"})," You'll get a complete ",$s(a.standUpBikeType)," training plan with tempo rides, intervals, long rides, and recovery days - all the training stimulus without the impact stress. When you're ready to run again, just update your profile!"]})}),"transitioning"===a.runningStatus&&(0,Ne.jsx)("div",{className:"card",style:{background:"rgba(255, 179, 102, 0.1)",border:"1px solid rgba(255, 179, 102, 0.3)",marginTop:"16px"},children:(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,Ne.jsx)("strong",{children:"\ud83d\udd04 Smart transition approach!"})," We'll start with mostly ",$s(a.standUpBikeType)," training and gradually reintroduce running over the first 4 weeks. This gives your body time to adapt safely."]})}),"active"===a.runningStatus&&(0,Ne.jsx)("div",{className:"card",style:{background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)",marginTop:"16px"},children:(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,Ne.jsx)("strong",{children:"\ud83c\udfaf Best of both worlds!"})," You'll get a mix of running and ",$s(a.standUpBikeType)," training for maximum aerobic development with reduced impact stress."]})})]}),a.standUpBikeType&&"bikeOnly"!==a.runningStatus&&a.availableDays.length>0&&(0,Ne.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,Ne.jsxs)("h3",{children:["Which days do you prefer for ",$s(a.standUpBikeType)," rides?"]}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"\ud83d\udeb4\u200d\u2642\ufe0f Smart scheduling!"})," Perfect for road closures, traffic patterns, or personal preference."]}),(0,Ne.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"10px",maxWidth:"500px",margin:"0 auto"},children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(e=>(0,Ne.jsx)("div",{className:"equipment-card ".concat(a.preferredBikeDays.includes(e)?"selected":""," ").concat(a.availableDays.includes(e)?"":"disabled"),onClick:()=>{if(!a.availableDays.includes(e))return;const t=a.preferredBikeDays.includes(e)?a.preferredBikeDays.filter(t=>t!==e):[...a.preferredBikeDays,e];c("preferredBikeDays",t)},style:{opacity:a.availableDays.includes(e)?1:.3,cursor:a.availableDays.includes(e)?"pointer":"not-allowed"},children:(0,Ne.jsxs)("p",{className:"equipment-name",children:[e,!a.availableDays.includes(e)&&(0,Ne.jsx)("span",{style:{fontSize:"0.7rem",display:"block"},children:"(Not available)"})]})},e))}),a.preferredBikeDays.length>0&&(0,Ne.jsx)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,Ne.jsx)("strong",{children:"\ud83c\udfaf Perfect!"})," Selected ",a.preferredBikeDays.length," ",$s(a.standUpBikeType)," days: ",a.preferredBikeDays.join(", ")]})})]})]});case 5:return(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h2",{children:"Training Philosophy & Missed Workout Handling"}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"\ud83c\udfaf Let's customize your training approach!"})," We'll adapt to your philosophy and real life."]}),(0,Ne.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,Ne.jsx)("h3",{children:"What happens when you miss a workout?"}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"\ud83d\udd25 This is where other apps fail!"})," We adapt to your real life."]}),(0,Ne.jsx)("div",{style:{display:"grid",gap:"16px"},children:[{id:"reschedule",name:"Reschedule it",desc:"Move the workout to another day this week",icon:"\ud83d\udd04"},{id:"modify",name:"Modify the plan",desc:"Adjust upcoming workouts to keep me on track",icon:"\u26a1"},{id:"skip",name:"Skip and continue",desc:"Move on with the original schedule",icon:"\u23ed\ufe0f"}].map(e=>(0,Ne.jsxs)("div",{className:"card ".concat(a.missedWorkoutPreference===e.id?"selected":""),onClick:()=>c("missedWorkoutPreference",e.id),style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"16px"},children:[(0,Ne.jsx)("div",{style:{fontSize:"1.5rem"},children:e.icon}),(0,Ne.jsxs)("div",{style:{flex:1},children:[(0,Ne.jsx)("h4",{style:{margin:"0 0 4px 0"},children:e.name}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"0.9rem"},children:e.desc})]})]},e.id))})]}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h3",{style:{color:"#FFFFFF",fontWeight:"600",fontSize:"1.5rem",marginBottom:"12px"},children:"Choose Your Training System"}),(0,Ne.jsxs)("p",{style:{color:"#E5E7EB",fontSize:"1rem"},children:[(0,Ne.jsx)("strong",{style:{color:"#F8F9FA"},children:"\ud83c\udfaf Run+ Plans Advantage:"})," Multiple proven methodologies coming soon!"]}),(0,Ne.jsx)("div",{style:{display:"grid",gap:"16px"},children:[{id:"practical_periodization",name:"Real World Training",desc:"Life-first approach with clear phases and injury prevention focus",good:"Perfect for busy runners, proven results, real-world flexibility",icon:"\ud83c\udfe0",available:!0},{id:"80_20",name:"80/20 Training",desc:"80% easy running, 20% hard - sustainable approach",good:"Injury prevention, long-term development, elite-proven",icon:"\ud83d\udee1\ufe0f",available:!1},{id:"zone_based",name:"Zone-Based Training",desc:"Scientific approach using 5 intensity zones and pace targets",good:"Precise, data-driven, works for all distances",icon:"\ud83d\udd2c",available:!1},{id:"high_mileage",name:"High Mileage System",desc:"Build endurance through volume and strength runs",good:"Marathon-focused, builds durability and speed",icon:"\ud83d\udcaa",available:!1},{id:"time_trial",name:"Fitness Test Driven",desc:"Monthly time trials guide all your training paces",good:"Real-time fitness tracking, highly responsive",icon:"\ud83c\udfaf",available:!1}].map(e=>(0,Ne.jsxs)("div",{className:"card ".concat(a.trainingPhilosophy===e.id?"selected":""),onClick:()=>e.available&&c("trainingPhilosophy",e.id),style:{cursor:e.available?"pointer":"not-allowed",padding:"20px",opacity:e.available?1:.6,position:"relative"},children:[(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[(0,Ne.jsx)("span",{style:{fontSize:"1.5rem"},children:e.icon}),(0,Ne.jsx)("h4",{style:{margin:0,color:"#FFFFFF",fontWeight:"600"},children:e.name}),!e.available&&(0,Ne.jsx)("div",{style:{marginLeft:"auto",padding:"4px 8px",background:"rgba(255, 179, 102, 0.2)",border:"1px solid rgba(255, 179, 102, 0.4)",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"600",color:"#FFB366"},children:"\ud83d\ude80 Coming Soon"})]}),(0,Ne.jsx)("p",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"#E5E7EB"},children:e.desc}),(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"0.8rem",color:"#D1D5DB"},children:[(0,Ne.jsx)("strong",{style:{color:"#F8F9FA"},children:"Good for:"})," ",e.good]})]},e.id))})]})]});case 6:return(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h2",{children:"Location & Climate"}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"\ud83c\udf21\ufe0f Climate-smart training!"})," We adjust paces for your local conditions."]}),(0,Ne.jsxs)("div",{className:"form-group",children:[(0,Ne.jsxs)("label",{className:"form-label",children:["City, State/Country ",(0,Ne.jsx)("span",{style:{color:"#D1D5DB",fontWeight:"400"},children:"(optional)"})]}),(0,Ne.jsx)("input",{type:"text",className:"form-input",placeholder:"e.g., Darwin, Australia or Phoenix, Arizona",value:a.location,onChange:e=>c("location",e.target.value)})]}),(0,Ne.jsxs)("div",{className:"form-group",children:[(0,Ne.jsx)("label",{className:"form-label",children:"Climate Type"}),(0,Ne.jsxs)("select",{className:"form-input form-select",value:a.climate,onChange:e=>c("climate",e.target.value),children:[(0,Ne.jsx)("option",{value:"",children:"Select your climate"}),(0,Ne.jsx)("option",{value:"temperate",children:"Temperate (mild seasons)"}),(0,Ne.jsx)("option",{value:"hot_dry",children:"Hot & Dry (desert-like)"}),(0,Ne.jsx)("option",{value:"hot_humid",children:"Hot & Humid (tropical/subtropical)"}),(0,Ne.jsx)("option",{value:"cold",children:"Cold (long winters)"}),(0,Ne.jsx)("option",{value:"variable",children:"Variable (extreme seasons)"})]})]}),a.climate&&(0,Ne.jsxs)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",marginTop:"16px"},children:[(0,Ne.jsxs)("h4",{style:{margin:"0 0 8px 0",color:"#FFFFFF",fontWeight:"600"},children:["temperate"===a.climate&&"\ud83c\udf24\ufe0f Temperate Climate Adjustments","hot_dry"===a.climate&&"\ud83c\udfdc\ufe0f Hot & Dry Climate Adjustments","hot_humid"===a.climate&&"\ud83c\udf34 Hot & Humid Climate Adjustments","cold"===a.climate&&"\u2744\ufe0f Cold Climate Adjustments","variable"===a.climate&&"\ud83c\udf26\ufe0f Variable Climate Adjustments"]}),(0,Ne.jsxs)("div",{style:{fontSize:"0.9rem",color:"#E5E7EB"},children:["temperate"===a.climate&&(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,Ne.jsx)("strong",{children:"Seasonal pace adjustments"})," for spring/summer heat and winter cold"]}),(0,Ne.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,Ne.jsx)("strong",{children:"Moderate hydration guidance"})," during warmer months"]}),(0,Ne.jsxs)("p",{style:{margin:0},children:["\u2713 ",(0,Ne.jsx)("strong",{children:"Gear recommendations"})," for changing conditions"]})]}),"hot_dry"===a.climate&&(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,Ne.jsx)("strong",{children:"Aggressive pace reductions"})," during peak heat hours (10am-4pm)"]}),(0,Ne.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,Ne.jsx)("strong",{children:"Enhanced hydration protocols"})," with electrolyte guidance"]}),(0,Ne.jsxs)("p",{style:{margin:0},children:["\u2713 ",(0,Ne.jsx)("strong",{children:"Early morning scheduling"})," to avoid dangerous temperatures"]})]}),"hot_humid"===a.climate&&(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,Ne.jsx)("strong",{children:"Heat index calculations"})," - humidity makes 80\xb0F feel like 95\xb0F"]}),(0,Ne.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,Ne.jsx)("strong",{children:"Sweat rate adjustments"})," for reduced cooling efficiency"]}),(0,Ne.jsxs)("p",{style:{margin:0},children:["\u2713 ",(0,Ne.jsx)("strong",{children:"Recovery-focused pacing"})," to prevent heat exhaustion"]})]}),"cold"===a.climate&&(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,Ne.jsx)("strong",{children:"Extended warm-up protocols"})," for muscle activation"]}),(0,Ne.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,Ne.jsx)("strong",{children:"Layering strategies"})," for temperature regulation"]}),(0,Ne.jsxs)("p",{style:{margin:0},children:["\u2713 ",(0,Ne.jsx)("strong",{children:"Ice/snow safety"})," adjustments for footing and pace"]})]}),"variable"===a.climate&&(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,Ne.jsx)("strong",{children:"Adaptive training plans"})," that flex with seasonal extremes"]}),(0,Ne.jsxs)("p",{style:{margin:"0 0 8px 0"},children:["\u2713 ",(0,Ne.jsx)("strong",{children:"Multi-season gear guidance"})," for year-round training"]}),(0,Ne.jsxs)("p",{style:{margin:0},children:["\u2713 ",(0,Ne.jsx)("strong",{children:"Weather-based workout swaps"})," when conditions are unsafe"]})]})]})]}),!a.climate&&(0,Ne.jsx)("div",{className:"card",style:{background:"rgba(255, 184, 0, 0.1)",border:"1px solid rgba(255, 184, 0, 0.3)"},children:(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"0.9rem",color:"#E5E7EB"},children:[(0,Ne.jsx)("strong",{children:"\ud83d\udca1 Why this matters:"}),' A runner in Darwin, Australia complained that other apps gave "ridiculous paces" for tropical heat. We automatically adjust for your climate!']})})]});case 7:return(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h2",{children:"\ud83c\udf89 Your Personalized Plan is Ready!"}),(0,Ne.jsx)("p",{children:"Based on your preferences, here's what makes your plan unique:"}),(0,Ne.jsxs)("div",{className:"card",style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)"},children:[(0,Ne.jsx)("h3",{children:"Your Run+ Plans Profile"}),(0,Ne.jsxs)("div",{style:{display:"grid",gap:"12px",textAlign:"left"},children:[(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("strong",{children:"Goal:"})," ",a.raceDistance," race training"]}),a.raceElevationProfile&&(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("strong",{children:"Race Profile:"})," ",a.raceElevationProfile.charAt(0).toUpperCase()+a.raceElevationProfile.slice(1)," course"]}),a.raceDate&&(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("strong",{children:"Race Date:"})," ",new Date(a.raceDate+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),a.startDate&&a.raceDate&&(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("strong",{children:"Training Duration:"})," ",Math.ceil((new Date(a.raceDate)-new Date(a.startDate))/6048e5)," weeks"]}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("strong",{children:"Experience:"})," ",a.experienceLevel]}),a.currentWeeklyMileage&&(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("strong",{children:"Current weekly mileage:"})," ",a.currentWeeklyMileage," miles"]}),a.currentLongRunDistance&&(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("strong",{children:"Current long run:"})," ",a.currentLongRunDistance," miles"]}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("strong",{children:"Schedule:"})," ",a.runsPerWeek," days/week"]}),a.hardSessionsPerWeek&&(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("strong",{children:"Hard Sessions:"})," ",a.hardSessionsPerWeek," per week",a.hardSessionDays.length>0?" (".concat(a.hardSessionDays.join(", "),")"):""]}),a.standUpBikeType&&(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("strong",{children:"Equipment:"})," ",$s(a.standUpBikeType)," specific workouts"]}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("strong",{children:"Climate:"})," ",a.climate," adapted paces"]})]})]}),(0,Ne.jsxs)("div",{className:"card",style:{background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)"},children:[(0,Ne.jsx)("h3",{children:"\ud83d\ude80 What You Get"}),(0,Ne.jsxs)("div",{style:{display:"grid",gap:"8px",textAlign:"left"},children:[(0,Ne.jsxs)("div",{children:["\u2713 ",(0,Ne.jsx)("strong",{children:"80+ workout varieties"})," vs repetitive formats"]}),(0,Ne.jsxs)("div",{children:["\u2713 ",(0,Ne.jsx)("strong",{children:"Climate-adjusted paces"})," for your location"]}),(0,Ne.jsxs)("div",{children:["\u2713 ",(0,Ne.jsx)("strong",{children:"Equipment-specific training"})," for your gear"]}),(0,Ne.jsxs)("div",{children:["\u2713 ",(0,Ne.jsx)("strong",{children:"Flexible schedule"})," that adapts to missed workouts"]}),(0,Ne.jsxs)("div",{children:["\u2713 ",(0,Ne.jsx)("strong",{children:"Cross-platform access"})," - phone, tablet, web"]}),(0,Ne.jsxs)("div",{children:["\u2713 ",(0,Ne.jsx)("strong",{children:"Smart workout substitution"})," that counts properly"]})]})]}),(0,Ne.jsx)("p",{style:{fontSize:"0.9rem",color:"#E5E7EB"},children:'Click "Create My Plan" to see your complete training plan preview - no payment required!'})]});default:return(0,Ne.jsx)("div",{children:"Step not found"})}}(),(0,Ne.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"32px",gap:"16px"},children:[r>1&&(0,Ne.jsx)("button",{className:"btn btn-secondary",onClick:()=>{const e=(e=>{let t=e-1;for(;t>=1&&!u(t);)t--;return t})(r);e>=1&&(o(e),window.scrollTo({top:0,behavior:"smooth"}))},children:"\u2190 Back"}),(0,Ne.jsx)("button",{className:"btn btn-primary",onClick:()=>{const e=(e=>{let t=e+1;for(;t<=7&&!u(t);)t++;return t})(r);e<=7?(o(e),window.scrollTo({top:0,behavior:"smooth"})):d()},style:{marginLeft:"auto"},children:7===r?"\ud83c\udf89 Create My Plan":"Continue \u2192"})]})]})]})})};const il=new class{calculateRunningCalories(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=e*(t?.63*t:100);return{estimate:Math.round(n),min:Math.round(.85*n),max:Math.round(1.15*n),range:"".concat(Math.round(.85*n),"-").concat(Math.round(1.15*n))}}calculateBikeCalories(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.calculateRunningCalories(e,t)}calculateWorkoutCalories(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&e.distance&&0!==e.distance&&("bike"===e.type||e.equipmentSpecific)?this.calculateBikeCalories(e.distance,t):null}};const ol=function(e){let{userProfile:t,trainingPlan:n}=e;const r=te(),i=(0,s.A)((0,s.A)({},n),{},{weeks:[{week:1,phase:"base",totalMileage:15,isRestWeek:!1,workouts:[{day:"Monday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Tuesday",type:"tempo",workout:{name:"Sandwich Tempo",description:"Tempo effort sandwiched between easy running"},focus:"Lactate Threshold",equipmentSpecific:!1},{day:"Wednesday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Thursday",type:"easy",workout:{name:"Easy Run",description:"Conversational pace, aerobic base building"},focus:"Recovery"},{day:"Friday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Saturday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Sunday",type:"longRun",workout:{name:"Conversational Long Run",description:"Easy long run emphasizing conversational pace"},focus:"Endurance"}]},{week:2,phase:"base",totalMileage:18,isRestWeek:!1,workouts:[{day:"Monday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Tuesday",type:"hills",workout:{name:"Long Hill Progression",description:"Build power on sustained grades"},focus:"Power & Strength"},{day:"Wednesday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Thursday",type:"tempo",workout:{name:"Classic Tempo Run",description:"Continuous run at lactate threshold pace"},focus:"Lactate Threshold"},{day:"Friday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Saturday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Sunday",type:"longRun",workout:{name:"Thirds Progression",description:"Equal time segments with increasing intensity"},focus:"Endurance"}]},{week:5,phase:"build",totalMileage:25,isRestWeek:!1,workouts:[{day:"Monday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Tuesday",type:"intervals",workout:{name:"1000m VO2 Max Intervals",description:"Classic VO2 max development intervals"},focus:"VO2 Max & Speed"},{day:"Wednesday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Thursday",type:"tempo",workout:{name:"McMillan 2x2 Miles",description:"Two 2-mile repeats at threshold pace"},focus:"Lactate Threshold"},{day:"Friday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Saturday",type:"rest",workout:{name:"Rest Day"},focus:"Recovery"},{day:"Sunday",type:"longRun",workout:{name:"Marathon Pace Long Run",description:"Extended time at goal marathon pace"},focus:"Endurance"}]}],varietyShowcase:["Sandwich Tempo","Long Hill Progression","Classic Tempo Run","Conversational Long Run","Thirds Progression","1000m VO2 Max Intervals","McMillan 2x2 Miles","Marathon Pace Long Run","Hill Strides","Cruise Intervals","Super Fast Finish","Tempo Hills","Ladder Intervals","DUSA Progression","Cut-Down Intervals","Progressive Build Session"]});t.standUpBikeType&&(i.weeks[0].workouts[1]=(0,s.A)((0,s.A)({},i.weeks[0].workouts[1]),{},{type:"bike",workout:{name:"Progressive Build Session",description:"".concat(t.standUpBikeType,"-specific teardrop/elliptical motion workout")},equipmentSpecific:!0,distance:4}),i.weeks[1].workouts[1]=(0,s.A)((0,s.A)({},i.weeks[1].workouts[1]),{},{type:"bike",equipmentSpecific:!0,distance:5}),i.weeks[2].workouts[1]=(0,s.A)((0,s.A)({},i.weeks[2].workouts[1]),{},{type:"bike",equipmentSpecific:!0,distance:6}));const o=e=>({tempo:"#4299e1",intervals:"#e53e3e",hills:"#38a169",longRun:"#805ad5",easy:"#718096",rest:"#a0aec0",bike:"#FF9500"}[e]||"#718096");return(0,Ne.jsxs)("div",{style:{minHeight:"100vh",paddingBottom:"40px"},children:[(0,Ne.jsx)("div",{style:{color:"#AAAAAA",padding:"30px 0"},children:(0,Ne.jsxs)("div",{className:"container",children:[(0,Ne.jsx)("h1",{style:{margin:"0 0 16px 0"},children:"\ud83c\udf89 Your RunEQ Plan Preview"}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"1.1rem",opacity:.9},children:"See how we've personalized training for your goals and equipment"})]})}),(0,Ne.jsxs)("div",{className:"container",style:{padding:"20px 16px"},children:[(0,Ne.jsxs)("div",{className:"card",style:{marginBottom:"20px"},children:[(0,Ne.jsx)("div",{className:"card-header",children:(0,Ne.jsx)("h2",{style:{margin:0},children:"Your Personalized Plan"})}),(0,Ne.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h3",{style:{color:"#AAAAAA",margin:"0 0 8px 0"},children:"Goal"}),(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600"},children:[n.planOverview.raceDistance," Training"]})]}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h3",{style:{color:"#AAAAAA",margin:"0 0 8px 0"},children:"Duration"}),(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600"},children:[n.planOverview.totalWeeks," weeks"]})]}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h3",{style:{color:"#AAAAAA",margin:"0 0 8px 0"},children:"Training Days"}),(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600"},children:[n.planOverview.runsPerWeek," days/week"]})]}),t.standUpBikeType&&(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h3",{style:{color:"#AAAAAA",margin:"0 0 8px 0"},children:"Equipment"}),(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600"},children:[t.standUpBikeType," optimized",(0,Ne.jsx)("span",{className:"badge badge-success",style:{marginLeft:"8px"},children:"Unique!"})]})]})]})]}),(0,Ne.jsxs)("div",{className:"card",style:{marginBottom:"20px",background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)"},children:[(0,Ne.jsx)("h3",{style:{margin:"0 0 16px 0",color:"#00FF88"},children:"\ud83d\ude80 Why Your Plan is Superior"}),(0,Ne.jsxs)("div",{style:{display:"grid",gap:"12px"},children:[(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Ne.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,Ne.jsxs)("span",{children:[(0,Ne.jsx)("strong",{children:"Climate adapted:"})," Paces adjusted for ",t.climate," conditions"]})]}),(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Ne.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,Ne.jsxs)("span",{children:[(0,Ne.jsx)("strong",{children:"Workout variety:"})," ",i.varietyShowcase.length,"+ different workouts vs repetitive formats"]})]}),(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Ne.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,Ne.jsxs)("span",{children:[(0,Ne.jsx)("strong",{children:"Life flexible:"})," ",t.missedWorkoutPreference," approach to missed workouts"]})]}),t.standUpBikeType&&(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Ne.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,Ne.jsxs)("span",{children:[(0,Ne.jsx)("strong",{children:"Equipment specific:"})," ",t.standUpBikeType," motion-optimized workouts"]})]}),(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Ne.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),(0,Ne.jsxs)("span",{children:[(0,Ne.jsx)("strong",{children:"Philosophy aligned:"})," ",t.trainingPhilosophy.replace("_","/")," training approach"]})]})]})]}),(0,Ne.jsxs)("div",{className:"card",style:{marginBottom:"20px"},children:[(0,Ne.jsxs)("div",{className:"card-header",children:[(0,Ne.jsx)("h2",{style:{margin:0},children:"Sample Training Weeks"}),(0,Ne.jsx)("p",{style:{margin:"8px 0 0 0",color:"#666"},children:"See how varied and intelligent your workouts are"})]}),i.weeks.map((e,n)=>{const{totalCalories:r,bikeWorkoutCount:a}=(e=>{var t;let n={min:0,max:0};const r=(null===(t=e.workouts)||void 0===t?void 0:t.filter(e=>("bike"===e.type||e.equipmentSpecific)&&e.distance&&e.distance>0))||[];return r.forEach(e=>{const t=il.calculateWorkoutCalories(e);t&&(n.min+=t.min,n.max+=t.max)}),{totalCalories:n,bikeWorkoutCount:r.length}})(e);return(0,Ne.jsxs)("div",{style:{marginBottom:n<i.weeks.length-1?"32px":0},children:[(0,Ne.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",flexWrap:"wrap",gap:"12px"},children:[(0,Ne.jsxs)("h3",{style:{margin:0,color:"#AAAAAA"},children:["Week ",e.week," - ",e.phase.toUpperCase()," Phase"]}),(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[(0,Ne.jsxs)("span",{className:"badge badge-info",children:[e.totalMileage," miles"]}),a>0&&(0,Ne.jsxs)("span",{className:"badge",style:{background:"rgba(255, 149, 0, 0.15)",color:"#FF9500",border:"1px solid rgba(255, 149, 0, 0.3)",padding:"6px 12px",fontWeight:"600"},children:["\ud83d\udd25 ",Math.round(r.min),"-",Math.round(r.max)," cal"]}),e.isRestWeek&&(0,Ne.jsx)("span",{className:"badge badge-warning",children:"Recovery Week"})]})]}),(0,Ne.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"12px"},children:e.workouts.filter(e=>"rest"!==e.type).map(e=>(0,Ne.jsxs)("div",{className:"card",style:{background:e.equipmentSpecific?"rgba(0, 212, 255, 0.1)":"rgba(255, 255, 255, 0.05)",border:"2px solid ".concat(o(e.type),"20"),borderLeft:"4px solid ".concat(o(e.type)),padding:"16px"},children:[(0,Ne.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[(0,Ne.jsx)("h4",{style:{margin:0,color:"#AAAAAA"},children:e.day}),(0,Ne.jsxs)("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:[(0,Ne.jsx)("span",{className:"badge",style:{background:"".concat(o(e.type),"20"),color:o(e.type),fontSize:"0.7rem"},children:e.focus}),e.equipmentSpecific&&(0,Ne.jsx)("span",{className:"badge badge-warning",style:{fontSize:"0.7rem"},children:t.standUpBikeType})]})]}),(0,Ne.jsx)("h4",{style:{margin:"0 0 4px 0",fontSize:"1rem"},children:e.workout.name}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"0.85rem",color:"#666",lineHeight:1.4},children:e.workout.description})]},e.day))})]},e.week)})]}),(0,Ne.jsxs)("div",{className:"card",style:{marginBottom:"20px"},children:[(0,Ne.jsxs)("div",{className:"card-header",children:[(0,Ne.jsx)("h2",{style:{margin:0},children:"\ud83c\udfa8 Workout Variety Showcase"}),(0,Ne.jsx)("p",{style:{margin:"8px 0 0 0",color:"#666"},children:"No more boring, repetitive training!"})]}),(0,Ne.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,Ne.jsx)("h3",{style:{color:"#AAAAAA",marginBottom:"12px"},children:"Your Plan Includes:"}),(0,Ne.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:i.varietyShowcase.map((e,t)=>(0,Ne.jsx)("span",{className:"badge",style:{background:"#ebf8ff",color:"#00D4FF",padding:"6px 12px",fontSize:"0.8rem"},children:e},t))})]}),(0,Ne.jsx)("div",{className:"card",style:{background:"rgba(255, 184, 0, 0.1)",border:"1px solid rgba(255, 184, 0, 0.3)"},children:(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"0.9rem"},children:[(0,Ne.jsx)("strong",{children:"\ud83d\udd25 Compare to Other Apps:"})," Most training apps repeat the same 5-10 workouts endlessly. Your RunEQ plan includes research-based workouts from McMillan Running, Hal Higdon, Ben Parkes, and Runner's World."]})})]}),(0,Ne.jsxs)("div",{className:"card",style:{marginBottom:"20px",background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)"},children:[(0,Ne.jsx)("h3",{style:{margin:"0 0 16px 0",color:"#c05621"},children:'\ud83d\udd04 "Something Else" Button'}),(0,Ne.jsxs)("p",{style:{marginBottom:"16px",color:"#744210"},children:[(0,Ne.jsx)("strong",{children:"Tired of rigid apps?"}),' Every workout has our signature "Something Else" button:']}),(0,Ne.jsxs)("div",{className:"card",style:{background:"rgba(255, 255, 255, 0.05)",padding:"16px",margin:"0 0 16px 0"},children:[(0,Ne.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[(0,Ne.jsx)("span",{style:{fontWeight:"600"},children:"Today: Tempo Run - 6 miles"}),(0,Ne.jsx)("button",{className:"btn btn-secondary",style:{fontSize:"0.8rem",padding:"8px 16px"},children:"Something Else"})]}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"0.8rem",color:"#666"},children:"Click to see alternatives based on weather, energy level, time, or just wanting variety!"})]}),(0,Ne.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("strong",{style:{color:"#744210"},children:"Feeling Tired:"}),(0,Ne.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"0.8rem"},children:"Easy recovery options"})]}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("strong",{style:{color:"#744210"},children:"Too Hot:"}),(0,Ne.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"0.8rem"},children:"Indoor or easier alternatives"})]}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("strong",{style:{color:"#744210"},children:"Want Variety:"}),(0,Ne.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"0.8rem"},children:"Different workout types"})]}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("strong",{style:{color:"#744210"},children:"Time Crunch:"}),(0,Ne.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"0.8rem"},children:"Shorter, efficient options"})]})]}),(0,Ne.jsx)("p",{style:{margin:"12px 0 0 0",fontSize:"0.8rem",fontStyle:"italic",color:"#744210"},children:"And unlike other apps, we COUNT IT PROPERLY in your weekly training load!"})]}),(0,Ne.jsxs)("div",{className:"card",style:{textAlign:"center",background:"rgba(0, 212, 255, 0.1)",color:"#AAAAAA",border:"1px solid rgba(0, 212, 255, 0.3)"},children:[(0,Ne.jsx)("h2",{style:{margin:"0 0 16px 0"},children:"Ready to Start Training Smarter?"}),(0,Ne.jsx)("p",{style:{margin:"0 0 24px 0",opacity:.9},children:"You've seen how RunEQ adapts to YOUR equipment, climate, and lifestyle. No more rigid, one-size-fits-all training!"}),(0,Ne.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px",maxWidth:"400px",margin:"0 auto"},children:[(0,Ne.jsx)("button",{className:"btn btn-success btn-full-width",onClick:()=>r("/dashboard"),style:{background:"rgba(255, 255, 255, 0.05)",color:"#AAAAAA",fontSize:"1.1rem"},children:"\ud83c\udfaf Start My Training Plan"}),(0,Ne.jsx)("p",{style:{fontSize:"0.9rem",margin:"8px 0 0 0",opacity:.8},children:"Free preview \u2022 Try all features \u2022 Subscribe when ready"})]})]})]})]})};const al=class{getSpeedOptions(e,t){return[{id:"classic-track",name:"\ud83c\udfc3\u200d\u2642\ufe0f Classic Track Session",shortName:"Track Intervals",description:"6x800m @ 5K pace (2min rest)",duration:"45-55 minutes",intensity:"Hard",structure:"2mi warmup + 6x800m @ 5K pace (2min rest) + 2mi cooldown",focus:"VO2 Max Development",location:"Track preferred",equipment:"None",difficulty:"High",timeRequired:"45-55 minutes",benefits:"Improves oxygen uptake, running economy, speed endurance"},{id:"hill-sprints",name:"\ud83c\udfd4\ufe0f Hill Sprint Power",shortName:"Hill Sprints",description:"8x30sec uphill @ max effort (jog down recovery)",duration:"35-45 minutes",intensity:"Very Hard",structure:"2mi warmup + 8x30sec uphill sprints (jog down) + 2mi cooldown",focus:"Neuromuscular Power",location:"Hills required",equipment:"None",difficulty:"Very High",timeRequired:"35-45 minutes",benefits:"Builds power, strength, running economy, mental toughness"},{id:"fartlek-fun",name:"\u26a1 Fartlek Freedom",shortName:"Fartlek",description:"20min fartlek: fast when you feel it, easy when you need it",duration:"40-50 minutes",intensity:"Variable",structure:"2mi easy + 20min fartlek (surge when you feel good, recover when you need) + 2mi easy",focus:"Speed Endurance",location:"Anywhere",equipment:"None",difficulty:"Moderate-High",timeRequired:"40-50 minutes",benefits:"Improves speed, teaches pacing, mentally engaging"},{id:"pyramid-power",name:"\ud83d\udd04 Pyramid Progression",shortName:"Pyramid",description:"400-800-1200-800-400m @ 5K pace (90sec rest)",duration:"50-60 minutes",intensity:"Hard",structure:"2mi warmup + 400-800-1200-800-400m @ 5K pace (90sec rest) + 2mi cooldown",focus:"Progressive Speed",location:"Track or measured route",equipment:"None",difficulty:"High",timeRequired:"50-60 minutes",benefits:"Progressive challenge, mental focus, speed development"}]}getTempoOptions(e,t){return[{id:"classic-tempo",name:"\ud83c\udfaf Classic Tempo Run",shortName:"Tempo Run",description:"4 miles @ comfortably hard pace",duration:"45-55 minutes",intensity:"Medium-Hard",structure:"2mi easy warmup + 4mi @ tempo pace + 1mi easy cooldown",focus:"Lactate Threshold",location:"Flat, measured route",equipment:"None",difficulty:"Moderate-High",timeRequired:"45-55 minutes",benefits:"Improves lactate clearance, race pace fitness"},{id:"cruise-intervals",name:"\ud83d\udd00 Cruise Intervals",shortName:"Cruise Intervals",description:"3x1 mile @ tempo pace (90sec rest)",duration:"45-50 minutes",intensity:"Medium-Hard",structure:"2mi warmup + 3x1mi @ tempo pace (90sec jog) + 2mi cooldown",focus:"Threshold Power",location:"Any measured route",equipment:"None",difficulty:"Moderate-High",timeRequired:"45-50 minutes",benefits:"Mental break during rest, maintains pace discipline"},{id:"progressive-build",name:"\ud83d\udcc8 Progressive Tempo Build",shortName:"Progressive",description:"5 miles: start easy, finish at tempo pace",duration:"50-55 minutes",intensity:"Progressive",structure:"1mi easy + 5mi progressive (easy to tempo) + 1mi easy cooldown",focus:"Progressive Effort",location:"Any route",equipment:"None",difficulty:"Moderate",timeRequired:"50-55 minutes",benefits:"Teaches effort progression, confidence building"},{id:"tempo-sandwich",name:"\ud83e\udd6a Tempo Sandwich",shortName:"Sandwich",description:"2mi easy + 3mi tempo + 2mi easy",duration:"50-60 minutes",intensity:"Medium-Hard",structure:"2mi easy + 3mi @ tempo pace + 2mi easy",focus:"Sustained Threshold",location:"Any route",equipment:"None",difficulty:"Moderate-High",timeRequired:"50-60 minutes",benefits:"Practices running fast when tired, mental toughness"}]}getLongRunOptions(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return[{id:"conversational-long",name:"\ud83c\udfc3\u200d\u2642\ufe0f Classic Conversational",shortName:"Easy Long Run",description:"".concat(n," miles @ easy, conversational pace"),duration:"".concat(Math.round(9*n),"-").concat(Math.round(10.5*n)," minutes"),intensity:"Easy",structure:"".concat(n," miles @ conversational pace throughout"),focus:"Aerobic Base",location:"Any route",equipment:"None",difficulty:"Low-Moderate",timeRequired:"".concat(Math.round(9*n),"-").concat(Math.round(10.5*n)," minutes"),benefits:"Builds aerobic capacity, fat burning, mental endurance"},{id:"negative-split-long",name:"\ud83d\udcc8 Negative Split Challenge",shortName:"Negative Split",description:"".concat(n," miles: second half faster than first"),duration:"".concat(Math.round(8.5*n),"-").concat(Math.round(10*n)," minutes"),intensity:"Easy-Moderate",structure:"".concat(n/2,"mi easy + ").concat(n/2,"mi moderate (30-45sec/mi faster)"),focus:"Pacing Discipline",location:"Measured route preferred",equipment:"None",difficulty:"Moderate",timeRequired:"".concat(Math.round(8.5*n),"-").concat(Math.round(10*n)," minutes"),benefits:"Teaches pacing control, finishes strong, race simulation"},{id:"long-with-pickups",name:"\u26a1 Long Run + Pickups",shortName:"Long + Pickups",description:"".concat(n-1," miles easy + 4x30sec pickups in final mile"),duration:"".concat(Math.round(9*n),"-").concat(Math.round(10*n)," minutes"),intensity:"Easy with surges",structure:"".concat(n-1,"mi easy + 4x30sec @ 5K pace (30sec recovery) + easy finish"),focus:"Neuromuscular Readiness",location:"Any route",equipment:"None",difficulty:"Moderate",timeRequired:"".concat(Math.round(9*n),"-").concat(Math.round(10*n)," minutes"),benefits:"Keeps legs sharp, practices running fast when tired"},{id:"progressive-long",name:"\ud83c\udfaf Marathon Pace Progression",shortName:"Progressive",description:"".concat(Math.round(.6*n),"mi easy + ").concat(Math.round(.4*n),"mi @ marathon pace"),duration:"".concat(Math.round(8.5*n),"-").concat(Math.round(9.5*n)," minutes"),intensity:"Easy-Moderate",structure:"".concat(Math.round(.6*n),"mi easy + ").concat(Math.round(.4*n),"mi @ marathon pace"),focus:"Race Pace Practice",location:"Flat, measured route",equipment:"None",difficulty:"Moderate-High",timeRequired:"".concat(Math.round(8.5*n),"-").concat(Math.round(9.5*n)," minutes"),benefits:"Practices goal race pace, builds confidence"}]}getHillOptions(e,t){return[{id:"classic-hills",name:"\ud83c\udfd4\ufe0f Classic Hill Repeats",shortName:"Hill Repeats",description:"6x90sec uphill @ hard effort (jog down recovery)",duration:"40-50 minutes",intensity:"Hard",structure:"2mi warmup + 6x90sec uphill @ 5K effort (jog down) + 2mi cooldown",focus:"Hill Strength",location:"Steady 4-6% grade hill",equipment:"None",difficulty:"High",timeRequired:"40-50 minutes",benefits:"Builds leg strength, power, running economy"},{id:"variable-hills",name:"\ud83c\udfa2 Variable Hill Circuit",shortName:"Variable Hills",description:"4x(30sec hard + 60sec moderate + 30sec hard) uphill",duration:"45-50 minutes",intensity:"Variable Hard",structure:"2mi warmup + 4x(30sec hard + 60sec moderate + 30sec hard) + jog down + 2mi cooldown",focus:"Power Endurance",location:"Long hill or multiple hills",equipment:"None",difficulty:"Very High",timeRequired:"45-50 minutes",benefits:"Varied stimulus, mental toughness, power development"},{id:"rolling-hills",name:"\ud83c\udf0a Rolling Hill Tempo",shortName:"Rolling Tempo",description:"25min tempo effort on rolling hills",duration:"45-55 minutes",intensity:"Medium-Hard",structure:"2mi easy + 25min @ tempo effort on rolling terrain + 2mi easy",focus:"Hill Endurance",location:"Rolling hills course",equipment:"None",difficulty:"Moderate-High",timeRequired:"45-55 minutes",benefits:"Teaches effort management on varied terrain"}]}getEasyOptions(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;return[{id:"classic-easy",name:"\ud83d\ude0c Classic Recovery Run",shortName:"Easy Run",description:"".concat(n," miles @ easy, conversational pace"),duration:"".concat(Math.round(9.5*n),"-").concat(Math.round(11*n)," minutes"),intensity:"Very Easy",structure:"".concat(n," miles @ recovery pace throughout"),focus:"Active Recovery",location:"Any route",equipment:"None",difficulty:"Low",timeRequired:"".concat(Math.round(9.5*n),"-").concat(Math.round(11*n)," minutes"),benefits:"Promotes recovery, maintains aerobic fitness"},{id:"easy-with-strides",name:"\u26a1 Easy + Strides",shortName:"Easy + Strides",description:"".concat(n," miles easy + 4x20sec strides"),duration:"".concat(Math.round(9.5*n),"-").concat(Math.round(10.5*n)," minutes"),intensity:"Easy with pickups",structure:"".concat(n-.5,"mi easy + 4x20sec strides (40sec recovery) + 0.5mi easy"),focus:"Neuromuscular Activation",location:"Any route with straight section",equipment:"None",difficulty:"Low-Moderate",timeRequired:"".concat(Math.round(9.5*n),"-").concat(Math.round(10.5*n)," minutes"),benefits:"Maintains speed while recovering, improves running form"}]}};const sl=function(e){let{isOpen:t,onClose:n,currentWorkout:r,userProfile:o,trainingPlan:a,onWorkoutSelect:l,weather:c=null,mode:u="replace"}=e;const[d,h]=(0,i.useState)(null),[p,f]=(0,i.useState)(null),m=new Le,g=new We,y=new Be,v=new Ue,b=new ze,w=new Ve,k=(null===a||void 0===a?void 0:a.trainingPaces)||null,x=(null===a||void 0===a?void 0:a.trackIntervals)||null;if(!t)return null;const S=()=>{const e=[];return e.push({id:"light-easy",title:"\ud83d\ude0c Light & Easy",subtitle:"Gentle movement that won't interfere with recovery",icon:"\ud83c\udf31",workouts:E()}),e.push({id:"active-recovery",title:"\ud83d\udd04 Active Recovery",subtitle:"Movement that actually helps recovery",icon:"\u267b\ufe0f",workouts:T()}),o.standUpBikeType&&e.push({id:"equipment-easy",title:"\ud83d\udeb4\u200d\u2642\ufe0f Easy ".concat($s(o.standUpBikeType)),subtitle:"Low-impact equipment workout",icon:"\u26a1",workouts:C()}),e.push({id:"cross-training",title:"\ud83c\udfca\u200d\u2642\ufe0f Cross-Training",subtitle:"Non-running activities for variety",icon:"\ud83c\udfaf",workouts:_()}),e.push({id:"short-sweet",title:"\u23f0 Short & Sweet",subtitle:"15-30 minutes max - just enough to move",icon:"\u26a1",workouts:D()}),e},E=()=>[{name:"Easy 20-Minute Jog",description:"Very light conversational pace - just shake out the legs",duration:"20 minutes",intensity:"Very Easy",reason:"feeling energetic",benefits:"Promotes blood flow and maintains routine"},{name:"Walk-Run Intervals",description:"1 min easy jog, 2 min walk - perfect rest day movement",duration:"25-30 minutes",intensity:"Recovery",reason:"want light movement",benefits:"Active recovery without stress"},{name:"Easy Mile",description:"Just one easy mile to keep the legs moving",duration:"8-12 minutes",intensity:"Very Easy",reason:"minimal time commitment",benefits:"Maintains routine without fatigue"}],T=()=>[{name:"Dynamic Stretching Session",description:"20 minutes of movement-based stretches and mobility work",duration:"20 minutes",intensity:"Recovery",reason:"improve flexibility",benefits:"Enhances recovery and prevents injury"},{name:"Yoga Flow",description:"Gentle yoga focused on hip flexibility and core strength",duration:"25-30 minutes",intensity:"Recovery",reason:"mental relaxation",benefits:"Flexibility, balance, and mental clarity"},{name:"Foam Rolling + Light Movement",description:"15 min foam rolling + 10 min easy walking",duration:"25 minutes",intensity:"Recovery",reason:"muscle maintenance",benefits:"Improves tissue quality and circulation"}],C=()=>[{name:"Easy ".concat($s(o.standUpBikeType)," Spin"),description:"Light 30-minute ride at conversational effort",duration:"30 minutes",intensity:"Easy",equipment:$s(o.standUpBikeType),reason:"low impact variety",benefits:"Aerobic maintenance without running impact"},{name:"Recovery ".concat($s(o.standUpBikeType)," Ride"),description:"Very easy 20-minute ride focusing on leg turnover",duration:"20 minutes",intensity:"Recovery",equipment:$s(o.standUpBikeType),reason:"active recovery",benefits:"Promotes blood flow and recovery"}],_=()=>[{name:"Swimming (Easy)",description:"20-30 minutes easy swimming - excellent for recovery",duration:"20-30 minutes",intensity:"Easy",reason:"full body, low impact",benefits:"Complete body workout with minimal stress"},{name:"Elliptical Easy",description:"25 minutes easy effort on elliptical machine",duration:"25 minutes",intensity:"Easy",reason:"gym alternative",benefits:"Cardio maintenance without impact"},{name:"Strength Training (Light)",description:"Light strength work focusing on running-specific muscles",duration:"30-40 minutes",intensity:"Light",reason:"strength maintenance",benefits:"Maintains strength without fatigue"}],D=()=>[{name:"15-Minute Walk",description:"Brisk walk around the neighborhood - minimal time commitment",duration:"15 minutes",intensity:"Very Easy",reason:"time constraint",benefits:"Mental break and light movement"},{name:"10-Minute Core Work",description:"Quick core strengthening session - runner-specific exercises",duration:"10 minutes",intensity:"Light",reason:"minimal time",benefits:"Core strength for better running"},{name:"5-Minute Stretch",description:"Quick targeted stretching for tight spots",duration:"5 minutes",intensity:"Recovery",reason:"very minimal time",benefits:"Maintains flexibility"}],A=(e,t,n)=>{var r;const i=(null===(r={tempo:{TRADITIONAL_TEMPO:"Sustained lactate threshold effort - builds race pace endurance",ALTERNATING_TEMPO:"Varied tempo segments - teaches pace changes and mental toughness",PROGRESSIVE_TEMPO:"Building tempo effort - develops pacing skills and confidence"},interval:{SHORT_SPEED:"Quick speed bursts - develops neuromuscular power and turnover",VO2_MAX:"Hard aerobic intervals - builds maximum oxygen uptake and speed",LONG_INTERVALS:"Extended speed work - race pace practice with recovery"},hill:{short_power:"Power hill repeats - builds leg strength and running power",long_strength:"Endurance hill training - develops climbing stamina and mental toughness",hill_circuits:"Mixed hill workout - combines power, strength, and endurance"},longRun:{TRADITIONAL_EASY:"Steady aerobic run - builds endurance base and fat adaptation",PROGRESSIVE_RUNS:"Building effort long run - develops race-day pacing skills",MIXED_PACE_LONG:"Mixed pace long run - practices energy system transitions"},brick:{aerobic:"Run+bike endurance combo - builds aerobic fitness with variety",tempo:"Run+bike threshold workout - lactate threshold with equipment changes",speed:"Run+bike intervals - develops speed with transition practice",recovery:"Easy run+bike combo - active recovery with movement variety"}}[t])||void 0===r?void 0:r[n])||e.description;return(0,s.A)((0,s.A)({},e),{},{description:i,originalDescription:e.description,category:n,library:t})},R=()=>{var e;const t=[];switch(r.type){case"tempo":["TRADITIONAL_TEMPO","ALTERNATING_TEMPO","PROGRESSIVE_TEMPO"].forEach(e=>{const n=m.getRandomWorkout(e);if(n&&n.name!==r.workout.name){const r=m.prescribeTempoWorkout(n.name,{runEqPreference:(null===o||void 0===o?void 0:o.runEqPreference)||0,paces:k});t.push(A(r,"tempo",e))}});break;case"intervals":["SHORT_SPEED","VO2_MAX","LONG_INTERVALS"].forEach(e=>{const n=g.getRandomWorkout(e);if(n&&n.name!==r.workout.name){const r=g.prescribeIntervalWorkout(n.name,{runEqPreference:(null===o||void 0===o?void 0:o.runEqPreference)||0,paces:k,trackIntervals:x});t.push(A(r,"interval",e))}});break;case"hills":["short_power","long_strength","hill_circuits"].forEach(e=>{const n=y.getRandomWorkout(e);if(n&&n.name!==r.workout.name){const r=y.prescribeHillWorkout(n.name,{runEqPreference:(null===o||void 0===o?void 0:o.runEqPreference)||0,paces:k});t.push(A(r,"hill",e))}});break;case"longRun":const n=O((null===(e=r.workout)||void 0===e?void 0:e.name)||"")||O(r.name||"")||8;["TRADITIONAL_EASY","PROGRESSIVE_RUNS","MIXED_PACE_LONG"].forEach(e=>{const i=v.getRandomWorkout(e);if(i&&i.name!==r.workout.name){const r=v.prescribeLongRunWorkout(i.name,{runEqPreference:(null===o||void 0===o?void 0:o.runEqPreference)||0,distance:n,paces:k});t.push(A(r,"longRun",e))}});break;case"brick":["aerobic","tempo","speed","recovery"].forEach(e=>{var n;const i=w.generateBrickWorkout({type:e,equipment:o.standUpBikeType||"cyclete",difficulty:"intermediate"});i&&i.name!==(null===(n=r.workout)||void 0===n?void 0:n.name)&&t.push(A(i,"brick",e))});break;default:t.push({name:"Conversational Run",description:"Easy pace, focus on breathing and form",duration:"30-45 minutes",library:"easy"})}return t.slice(0,6)},I=()=>[{name:"Easy Recovery Run",description:"Very easy pace, active recovery focus",duration:"20-30 minutes",intensity:"Recovery"},{name:"Walk-Run Intervals",description:"2 min run, 1 min walk intervals",duration:"30 minutes",intensity:"Easy"},{name:"Yoga Flow",description:"Active recovery with stretching",duration:"20-30 minutes",intensity:"Recovery"}],P=()=>{const e=[];if("easy"===r.type||"tempo"===r.type){const t=g.getRandomWorkout("SHORT_SPEED");if(t){const n=g.prescribeIntervalWorkout(t.name,{runEqPreference:(null===o||void 0===o?void 0:o.runEqPreference)||0,paces:k,trackIntervals:x});e.push(A(n,"interval","SHORT_SPEED"))}}if("hills"!==r.type){const t=y.getRandomWorkout("short_power");if(t){const n=y.prescribeHillWorkout(t.name,{runEqPreference:(null===o||void 0===o?void 0:o.runEqPreference)||0,paces:k});e.push(A(n,"hill","short_power"))}}return e.push({name:"Fartlek Run",description:"Playful speed play - develops speed and mental toughness with varied surges",duration:"30-40 minutes",intensity:"Moderate-Hard"}),e.push({name:"Progressive Run",description:"Building effort run - starts easy, finishes strong, develops pacing control",duration:"35-45 minutes",intensity:"Easy to Hard"}),e.filter(Boolean).slice(0,4)},M=()=>{const e=[],t=r.type;if("tempo"===t||"intervals"===t){(b.workoutLibrary.TEMPO_BIKE||[]).slice(0,3).forEach(t=>{e.push((0,s.A)((0,s.A)({},t),{},{type:"bike",library:"bike",equipment:o.standUpBikeType,equipmentSpecific:!0}))});(b.workoutLibrary.INTERVAL_BIKE||[]).slice(0,2).forEach(t=>{e.push((0,s.A)((0,s.A)({},t),{},{type:"bike",library:"bike",equipment:o.standUpBikeType,equipmentSpecific:!0}))})}else if("hills"===t){(b.workoutLibrary.POWER_RESISTANCE||[]).slice(0,3).forEach(t=>{e.push((0,s.A)((0,s.A)({},t),{},{type:"bike",library:"bike",equipment:o.standUpBikeType,equipmentSpecific:!0}))})}else if("longRun"===t){(b.workoutLibrary.LONG_ENDURANCE_RIDES||[]).slice(0,3).forEach(t=>{e.push((0,s.A)((0,s.A)({},t),{},{type:"bike",library:"bike",equipment:o.standUpBikeType,equipmentSpecific:!0}))})}else{const t=b.workoutLibrary.LONG_ENDURANCE_RIDES||[],n=b.workoutLibrary.TEMPO_BIKE||[];t.length>0&&e.push((0,s.A)((0,s.A)({},t[0]),{},{type:"bike",library:"bike",equipment:o.standUpBikeType,equipmentSpecific:!0})),n.length>0&&e.push((0,s.A)((0,s.A)({},n[n.length-1]),{},{type:"bike",library:"bike",equipment:o.standUpBikeType,equipmentSpecific:!0}))}return e.slice(0,6)},N=()=>{var e;const t=O((null===(e=r.workout)||void 0===e?void 0:e.name)||"")||12,n=Math.round(t/3);return[{name:"".concat(n,"-Mile Easy Run"),description:"Equivalent running distance for today's bike workout - same aerobic benefit",duration:"".concat(8*n,"-").concat(10*n," minutes"),intensity:"Easy"},{name:"".concat(Math.max(3,n-2),"-Mile Tempo Run"),description:"Shorter but higher intensity - builds lactate threshold",duration:"".concat(7*Math.max(3,n-2),"-").concat(8*Math.max(3,n-2)," minutes"),intensity:"Moderate-Hard"},{name:"Fartlek Run",description:"Playful speed play - develops speed and mental toughness",duration:"30-40 minutes",intensity:"Variable"},{name:"".concat(Math.max(2,n-1)," Miles Progressive"),description:"Start easy, build to moderate-hard finish",duration:"".concat(7*Math.max(2,n-1),"-").concat(9*Math.max(2,n-1)," minutes"),intensity:"Easy to Moderate-Hard"}]},j=()=>{var e;const t=r.type,n=(null===(e=r.workout)||void 0===e?void 0:e.name)||"Workout",i=[];if("intervals"===t||n.toLowerCase().includes("interval")||n.toLowerCase().includes("speed")||n.toLowerCase().includes("track"))i.push({name:"Treadmill Speed Work",description:"Same intervals on treadmill - 6x800m @ 5K pace (2min rest)",duration:"45-50 minutes",reason:"no track available",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"},{name:"Hill Sprints Alternative",description:"8x30sec uphill @ max effort - builds same speed without track",duration:"35-40 minutes",reason:"no track available",icon:"\ud83c\udfd4\ufe0f"},{name:"Fartlek Speed Session",description:"20min fartlek: fast when you feel it, easy when you need it",duration:"40-45 minutes",reason:"too hot / no track",icon:"\u26a1"},{name:"Shortened Speed Work",description:"4x400m @ 5K pace instead of full session",duration:"30-35 minutes",reason:"time constraint",icon:"\u23f0"});else if("tempo"===t||n.toLowerCase().includes("tempo")||n.toLowerCase().includes("threshold"))i.push({name:"Treadmill Tempo",description:"3 miles @ comfortably hard pace on 1% incline",duration:"35-40 minutes",reason:"too hot / weather",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"},{name:"Cruise Intervals Indoor",description:"3x1 mile @ tempo pace (90sec rest) - easier to pace indoors",duration:"40-45 minutes",reason:"too hot / pacing issues",icon:"\ud83d\udd00"},{name:"Easy Tempo",description:"2 miles @ marathon pace instead of tempo - still builds endurance",duration:"25-30 minutes",reason:"too tired",icon:"\ud83d\ude0c"},{name:"Short Tempo Burst",description:"15min tempo run instead of full session",duration:"25-30 minutes",reason:"time constraint",icon:"\u23f0"});else if("longRun"===t||n.toLowerCase().includes("long")||n.toLowerCase().includes("endurance")){const e=O(n)||10;i.push({name:"".concat(e," Miles on Treadmill"),description:"Complete long run indoors with A/C and entertainment - same endurance benefit",duration:"".concat(Math.round(8.5*e),"-").concat(Math.round(10*e)," minutes"),reason:"too hot / weather",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"},{name:"Split Long Run",description:"".concat(Math.round(e/2)," miles morning + ").concat(Math.round(e/2)," miles evening"),duration:"Split sessions",reason:"too hot / time constraint",icon:"\ud83d\udd04"},{name:"".concat(Math.round(.75*e)," Mile Moderate"),description:"Shorter distance but at marathon pace for last ".concat(Math.round(.25*e)," miles"),duration:"".concat(Math.round(6.5*e),"-").concat(Math.round(8*e)," minutes"),reason:"time constraint",icon:"\u23f0"},{name:"Easy Long Walk/Run",description:"".concat(e," miles with walk breaks every 2 miles - active recovery style"),duration:"".concat(Math.round(10*e),"-").concat(Math.round(12*e)," minutes"),reason:"too tired",icon:"\ud83d\udeb6\u200d\u2642\ufe0f"})}else"hills"===t||n.toLowerCase().includes("hill")||n.toLowerCase().includes("incline")?i.push({name:"Treadmill Hill Repeats",description:"6x90sec @ 6-8% incline, 5K effort (walk down recovery)",duration:"40-45 minutes",reason:"no hills available",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"},{name:"Parking Garage Hills",description:"8x30sec up parking garage ramps - urban hill alternative",duration:"35-40 minutes",reason:"no hills available",icon:"\ud83c\udfe2"},{name:"Stadium Stairs",description:"6x60sec stadium/building stairs @ hard effort",duration:"30-35 minutes",reason:"no hills available",icon:"\ud83c\udfdf\ufe0f"},{name:"Flat Tempo Instead",description:"20min tempo run - still builds lactate threshold without hills",duration:"35-40 minutes",reason:"no hills / too tired",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"}):("easy"===t||n.toLowerCase().includes("easy")||n.toLowerCase().includes("recovery"))&&i.push({name:"Indoor Easy Run",description:"Same easy pace on treadmill with entertainment",duration:r.duration||"30-40 minutes",reason:"weather",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"},{name:"Easy Walk",description:"Brisk walk for same duration - active recovery",duration:r.duration||"30-40 minutes",reason:"too tired",icon:"\ud83d\udeb6\u200d\u2642\ufe0f"},{name:"Short Easy Run",description:"20min easy jog - better than nothing",duration:"20 minutes",reason:"time constraint",icon:"\u23f0"});return 0===i.length&&i.push({name:"Rest Day",description:"Complete rest - sometimes the best choice for your body",duration:"0 minutes",reason:"too tired / injury risk",icon:"\ud83d\udecc"},{name:"Light Cross Training",description:"20-30min easy bike, elliptical, or swimming",duration:"20-30 minutes",reason:"need something different",icon:"\ud83d\udeb4\u200d\u2642\ufe0f"}),i},O=e=>{const t=e.match(/(\d+)\s*(mile|miles|mi)/i);return t?parseInt(t[1]):null},F=()=>[{name:"Treadmill Version",description:"Climate-controlled indoor version - same workout, perfect conditions",location:"Indoor"},{name:"Mall/Parking Garage Run",description:"Weather-protected option - stay dry and maintain your schedule",location:"Covered"},{name:"Early Morning Run",description:"Beat the heat/weather - cooler temps and quieter roads",timing:"Pre-dawn"},{name:"Split Session",description:"Break into 2 shorter runs - work around weather windows",timing:"Flexible"}],L=()=>{var e,t;const n=[],i=O((null===(e=r.workout)||void 0===e?void 0:e.name)||"")||O(r.name||"")||0,a=(null===(t=r.workout)||void 0===t?void 0:t.duration)||r.duration||0;let l=[];return l=i<5||"number"===typeof a&&a<30?["recovery"]:i<10||"number"===typeof a&&a<60?["recovery","aerobic"]:["recovery","aerobic","tempo","speed"],l.forEach(e=>{const t=w.generateBrickWorkout({type:e,equipment:o.standUpBikeType||"cyclete",difficulty:"intermediate"}),r=A(t,"brick",e);n.push((0,s.A)((0,s.A)({},r),{},{type:"brick",library:"brick"}))}),n},W=e=>{return"tempo"===e.library?"Lactate Threshold":"interval"===e.library?"Speed & Power":"hill"===e.library?"Strength & Power":"longRun"===e.library?"Endurance":"bike"===e.library?null!==(t=e.effort)&&void 0!==t&&null!==(n=t.perceived)&&void 0!==n&&n.includes("threshold")||null!==(r=e.name)&&void 0!==r&&r.toLowerCase().includes("tempo")?"Lactate Threshold":null!==(i=e.effort)&&void 0!==i&&null!==(o=i.perceived)&&void 0!==o&&o.includes("hard")||null!==(a=e.name)&&void 0!==a&&a.toLowerCase().includes("interval")?"Speed & Power":null!==(s=e.name)&&void 0!==s&&s.toLowerCase().includes("endurance")||null!==(l=e.name)&&void 0!==l&&l.toLowerCase().includes("long")?"Endurance":"Aerobic Power":"Recovery"===e.intensity?"Recovery":"Easy"===e.intensity?"Aerobic Base":"Training Focus";var t,n,r,i,o,a,s,l},B=(()=>{const e=[];return"rest"===r.type?S():(e.push({id:"same-intensity",title:"\ud83c\udfc3\u200d\u2642\ufe0f Keep Running - Same Intensity",subtitle:"Alternative ".concat(r.type," workouts"),icon:"\ud83d\udd04",workouts:R()}),e.push({id:"easier",title:"\ud83d\ude0c Make It Easier",subtitle:"Lower intensity alternatives",icon:"\u2b07\ufe0f",workouts:I()}),e.push({id:"harder",title:"\ud83d\udcaa Make It Harder",subtitle:"Higher intensity challenges",icon:"\u2b06\ufe0f",workouts:P()}),o.standUpBikeType&&("bike"===r.type?e.push({id:"run-instead",title:"\ud83c\udfc3\u200d\u2642\ufe0f Switch to Running",subtitle:"Run instead of bike",icon:"\ud83d\udc5f",workouts:N()}):e.push({id:"equipment",title:"\ud83d\udeb4\u200d\u2642\ufe0f Switch to ".concat($s(o.standUpBikeType)),subtitle:"Equipment-specific alternatives",icon:"\u26a1",workouts:M()})),e.push({id:"contextual",title:"\ud83d\udd04 Quick Adaptations",subtitle:"Situational alternatives for real life",icon:"\ud83d\udee0\ufe0f",workouts:j()}),null!==c&&void 0!==c&&c.isExtreme&&e.push({id:"weather",title:"\ud83c\udf21\ufe0f Weather Alternatives",subtitle:"Safe options for ".concat(c.condition),icon:"\ud83d\udee1\ufe0f",workouts:F()}),o.standUpBikeType&&e.push({id:"brick",title:"\ud83e\uddf1 Brick Workouts",subtitle:"Run + bike combinations",icon:"\ud83d\udd04",workouts:L()}),e)})();return(0,Ne.jsx)("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,Ne.jsxs)("div",{className:"modal-content card",style:{width:"90%",maxWidth:"800px",maxHeight:"90vh",overflow:"auto",margin:"var(--space-4)"},children:[(0,Ne.jsxs)("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-6)"},children:[(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h2",{style:{margin:0,color:"var(--runeq-primary)"},children:"add"===u?"\u2795 Add Second Workout":"\ud83d\udd04 Life Adaptations"}),(0,Ne.jsx)("p",{style:{margin:"var(--space-2) 0 0 0",color:"#CCCCCC"},children:"add"===u?(0,Ne.jsxs)(Ne.Fragment,{children:["Add a second workout to ",(0,Ne.jsx)("strong",{children:r.day})]}):(0,Ne.jsxs)(Ne.Fragment,{children:["Your plan adapts when life happens \u2022 Scheduled: ",(0,Ne.jsx)("strong",{children:r.workout.name})," \u2022 ",r.day]})})]}),(0,Ne.jsx)("button",{onClick:n,className:"btn btn-secondary",style:{minWidth:"auto",padding:"var(--space-2)"},children:"\u2715"})]}),d?(0,Ne.jsxs)("div",{children:[(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)",marginBottom:"var(--space-4)"},children:[(0,Ne.jsx)("button",{onClick:()=>h(null),className:"btn btn-secondary",children:"\u2190 Back"}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h3",{style:{margin:0,color:"#FFFFFF"},children:d.title}),(0,Ne.jsx)("p",{style:{margin:0,color:"#CCCCCC",fontSize:"0.9rem"},children:d.subtitle})]})]}),(0,Ne.jsx)("div",{className:"card-grid",children:d.workouts.map((e,t)=>(0,Ne.jsxs)("div",{className:"card card-interactive ".concat(p===e?"selected":""),onClick:()=>(e=>{f(e)})(e),style:{cursor:"pointer",background:p===e?"linear-gradient(135deg, rgba(0, 212, 255, 0.3) 0%, rgba(0, 255, 136, 0.2) 100%)":"linear-gradient(135deg, rgba(0, 212, 255, 0.12) 0%, rgba(0, 255, 136, 0.08) 100%)",border:p===e?"2px solid rgba(0, 212, 255, 0.8)":"2px solid rgba(0, 212, 255, 0.3)",transition:"all 0.3s ease"},onMouseEnter:t=>{p!==e&&(t.currentTarget.style.background="linear-gradient(135deg, rgba(0, 212, 255, 0.2) 0%, rgba(0, 255, 136, 0.15) 100%)",t.currentTarget.style.border="2px solid rgba(0, 212, 255, 0.5)",t.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:t=>{p!==e&&(t.currentTarget.style.background="linear-gradient(135deg, rgba(0, 212, 255, 0.12) 0%, rgba(0, 255, 136, 0.08) 100%)",t.currentTarget.style.border="2px solid rgba(0, 212, 255, 0.3)",t.currentTarget.style.transform="translateY(0)")},children:[(0,Ne.jsx)("h4",{style:{margin:"0 0 var(--space-2) 0",color:"#FFFFFF",fontSize:"1.05rem"},children:e.name}),(0,Ne.jsx)("p",{style:{margin:"0 0 var(--space-3) 0",fontSize:"0.9rem",color:"#CCCCCC"},children:"string"===typeof e.description?e.description:"object"===typeof e.description?JSON.stringify(e.description):"Workout description"}),(0,Ne.jsxs)("div",{style:{display:"flex",gap:"var(--space-2)",flexWrap:"wrap"},children:[e.duration&&(0,Ne.jsx)("div",{className:"badge badge-info",children:"string"===typeof e.duration?e.duration:"object"===typeof e.duration?JSON.stringify(e.duration):"Duration"}),e.intensity&&(0,Ne.jsx)("div",{className:"badge badge-warning",children:"string"===typeof e.intensity?e.intensity:"object"===typeof e.intensity?JSON.stringify(e.intensity):"Intensity"}),e.equipment&&(0,Ne.jsx)("div",{className:"badge badge-success",children:$s(e.equipment)}),e.location&&(0,Ne.jsx)("div",{className:"badge badge-info",children:e.location})]})]},t))}),p&&(0,Ne.jsxs)("div",{style:{marginTop:"var(--space-6)",padding:"var(--space-4)",background:"var(--gray-50)",borderRadius:"var(--radius-lg)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Ne.jsxs)("div",{children:[(0,Ne.jsxs)("p",{style:{margin:0,fontWeight:600},children:["add"===u?"Add: ":"Replace with: ",(0,Ne.jsx)("strong",{children:p.name})]}),(0,Ne.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"0.9rem",color:"var(--gray-600)"},children:"add"===u?"This will add a second workout to ".concat(r.day," for a two-a-day training session."):"This will update your ".concat(r.day," workout and maintain your training load.")})]}),(0,Ne.jsx)("button",{onClick:()=>{if(p){const e=(0,s.A)((0,s.A)({},r),{},{workout:(0,s.A)((0,s.A)({},p),{},{name:p.name,description:p.description,duration:p.duration||p.repetitions||"Variable"}),type:p.library||p.type||r.type,focus:W(p),equipmentSpecific:p.equipmentSpecific||!!p.equipment,workoutDetails:p,replacementReason:null===d||void 0===d?void 0:d.title});l(e),n()}},className:"btn btn-primary",children:"add"===u?"\u2795 Add Workout":"\ud83d\udd04 Replace Workout"})]})]}):(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h3",{style:{marginBottom:"var(--space-4)",color:"#FFFFFF"},children:"Choose Your Adventure"}),(0,Ne.jsx)("div",{className:"card-grid",children:B.map(e=>(0,Ne.jsxs)("div",{className:"card card-interactive",onClick:()=>(e=>{h(e),f(null)})(e),style:{textAlign:"center",cursor:"pointer",background:"linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(0, 255, 136, 0.1) 100%)",border:"2px solid rgba(0, 212, 255, 0.4)",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, rgba(0, 212, 255, 0.25) 0%, rgba(0, 255, 136, 0.2) 100%)",e.currentTarget.style.border="2px solid rgba(0, 212, 255, 0.6)",e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, rgba(0, 212, 255, 0.15) 0%, rgba(0, 255, 136, 0.1) 100%)",e.currentTarget.style.border="2px solid rgba(0, 212, 255, 0.4)",e.currentTarget.style.transform="translateY(0)"},children:[(0,Ne.jsx)("div",{style:{fontSize:"2.5rem",marginBottom:"var(--space-2)"},children:e.icon}),(0,Ne.jsx)("h4",{style:{margin:"0 0 var(--space-2) 0",color:"#FFFFFF",fontSize:"1.1rem"},children:e.title}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#CCCCCC"},children:e.subtitle}),(0,Ne.jsxs)("div",{className:"badge",style:{marginTop:"var(--space-3)",background:"rgba(0, 255, 136, 0.2)",color:"#00FF88",border:"1px solid rgba(0, 255, 136, 0.4)",fontWeight:"600"},children:[e.workouts.length," options"]})]},e.id))})]})]})})},ll=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];const cl=function(e){var t;let{isOpen:n,onClose:r,userProfile:o,trainingPlan:a,currentWeek:l}=e;const[c,u]=(0,i.useState)(5),[d,h]=(0,i.useState)([]),[p,f]=(0,i.useState)([]),[m,g]=(0,i.useState)("Saturday"),[y,v]=(0,i.useState)([]),[b,w]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{if(n&&Re.j2.currentUser){const e=async()=>{try{Me.log("\u2699\ufe0f ManagePlanModal: Loading fresh data from Firestore...");const e=await Pe.getUserData(Re.j2.currentUser.uid);if(Me.log("  userData:",e),Me.log("  userData.data keys:",null!==e&&void 0!==e&&e.data?Object.keys(e.data):"no data"),null!==e&&void 0!==e&&e.success&&null!==e&&void 0!==e&&e.data){const t=e.data.profile,n=e.data.trainingPlan;Me.log("  Profile keys:",t?Object.keys(t):"no profile"),Me.log("  Plan keys:",n?Object.keys(n):"no plan"),Me.log("  Plan overview:",null===n||void 0===n?void 0:n.planOverview);const r=t||{};Me.log("  Loading settings:"),Me.log("    runsPerWeek:",r.runsPerWeek),Me.log("    availableDays:",r.availableDays),Me.log("    hardSessionDays:",r.hardSessionDays),Me.log("    longRunDay:",r.longRunDay),Me.log("    preferredBikeDays:",r.preferredBikeDays),u(r.runsPerWeek||5),h(r.availableDays||[]),f(r.hardSessionDays||[]),g(r.longRunDay||"Sunday"),v(r.preferredBikeDays||[]),Me.log("  \u2705 Settings loaded successfully")}}catch(e){Me.error("\u274c Error loading settings:",e)}};e()}},[n]),!n)return null;const k=(null===a||void 0===a||null===(t=a.planOverview)||void 0===t?void 0:t.raceDistance)||"Half",x={"5K":[3,4,5,6],"10K":[3,4,5,6],Half:[4,5,6,7],Marathon:[4,5,6,7]}[k]||[4,5,6];return(0,Ne.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},children:(0,Ne.jsxs)("div",{style:{background:"linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%)",border:"1px solid #333",borderRadius:"12px",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",padding:"24px"},children:[(0,Ne.jsxs)("div",{style:{borderBottom:"1px solid #333",paddingBottom:"16px",marginBottom:"24px"},children:[(0,Ne.jsx)("h2",{style:{margin:0,fontSize:"1.5rem",color:"#fff",display:"flex",alignItems:"center",gap:"8px"},children:"\u2699\ufe0f Manage Plan"}),(0,Ne.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.9rem",color:"#999"},children:"Adjust your training schedule. Your completed weeks will be preserved."})]}),(0,Ne.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,Ne.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"Runs per week"}),(0,Ne.jsx)("div",{style:{display:"flex",gap:"8px"},children:[3,4,5,6].map(e=>{const t=x.includes(e);return(0,Ne.jsx)("button",{onClick:()=>t&&u(e),disabled:!t,title:t?"":"".concat(e," days not supported for ").concat(k," training"),style:{flex:1,padding:"12px",fontSize:"1rem",fontWeight:"500",border:c===e?"2px solid #3b82f6":"1px solid #333",background:t?c===e?"rgba(59, 130, 246, 0.1)":"#1a1a1a":"#0a0a0a",color:t?c===e?"#3b82f6":"#999":"#444",borderRadius:"6px",cursor:t?"pointer":"not-allowed",opacity:t?1:.4},children:e},e)})}),!x.includes(3)&&(0,Ne.jsxs)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#666"},children:[k," training requires minimum 4 runs per week"]})]}),(0,Ne.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,Ne.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"Training days"}),(0,Ne.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:ll.map(e=>(0,Ne.jsxs)("button",{onClick:()=>(e=>{if(d.includes(e)){const t=d.filter(t=>t!==e);h(t),p.includes(e)&&f(p.filter(t=>t!==e)),m===e&&t.length>0&&g(t[t.length-1])}else h([...d,e].sort((e,t)=>ll.indexOf(e)-ll.indexOf(t)))})(e),style:{padding:"10px",fontSize:"0.9rem",border:d.includes(e)?"2px solid #22c55e":"1px solid #333",background:d.includes(e)?"rgba(34, 197, 94, 0.1)":"#1a1a1a",color:d.includes(e)?"#22c55e":"#999",borderRadius:"6px",cursor:"pointer"},children:[d.includes(e)?"\u2713 ":"",e.substring(0,3)]},e))}),(0,Ne.jsxs)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#666"},children:["Selected: ",d.length," days"]})]}),(0,Ne.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,Ne.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"Hard workout days"}),(0,Ne.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:d.filter(e=>e!==m).map(e=>(0,Ne.jsxs)("button",{onClick:()=>(e=>{d.includes(e)&&(p.includes(e)?f(p.filter(t=>t!==e)):f([...p,e]))})(e),style:{padding:"10px",fontSize:"0.9rem",border:p.includes(e)?"2px solid #f97316":"1px solid #333",background:p.includes(e)?"rgba(249, 115, 22, 0.1)":"#1a1a1a",color:p.includes(e)?"#f97316":"#999",borderRadius:"6px",cursor:"pointer"},children:[p.includes(e)?"\u26a1 ":"",e.substring(0,3)]},e))}),(0,Ne.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#666"},children:"Tempo runs, intervals, or hill workouts"})]}),(0,Ne.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,Ne.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:"Long run day"}),(0,Ne.jsx)("select",{value:m,onChange:e=>g(e.target.value),style:{width:"100%",padding:"12px",fontSize:"0.9rem",background:"#1a1a1a",color:"#fff",border:"1px solid #333",borderRadius:"6px",cursor:"pointer"},children:d.map(e=>(0,Ne.jsx)("option",{value:e,children:e},e))})]}),(null===o||void 0===o?void 0:o.standUpBikeType)&&(0,Ne.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,Ne.jsxs)("label",{style:{display:"block",color:"#fff",fontSize:"0.9rem",fontWeight:"500",marginBottom:"12px"},children:["cyclete"===o.standUpBikeType?"Cyclete":"ElliptiGO"," days (optional)"]}),(0,Ne.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:d.map(e=>(0,Ne.jsxs)("button",{onClick:()=>(e=>{d.includes(e)&&(y.includes(e)?v(y.filter(t=>t!==e)):v([...y,e]))})(e),style:{padding:"10px",fontSize:"0.9rem",border:y.includes(e)?"2px solid #8b5cf6":"1px solid #333",background:y.includes(e)?"rgba(139, 92, 246, 0.1)":"#1a1a1a",color:y.includes(e)?"#8b5cf6":"#999",borderRadius:"6px",cursor:"pointer"},children:[y.includes(e)?"\ud83d\udeb4 ":"",e.substring(0,3)]},e))}),(0,Ne.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"#666"},children:"Cross-training alternative to running"})]}),(0,Ne.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"32px",paddingTop:"24px",borderTop:"1px solid #333"},children:[(0,Ne.jsx)("button",{onClick:r,disabled:b,style:{flex:1,padding:"14px",fontSize:"1rem",fontWeight:"500",background:"#1a1a1a",color:"#999",border:"1px solid #333",borderRadius:"8px",cursor:b?"not-allowed":"pointer",opacity:b?.5:1},children:"Cancel"}),(0,Ne.jsx)("button",{onClick:async()=>{try{w(!0),Me.log("\u2699\ufe0f Updating training plan..."),Me.log("  Current week:",l),Me.log("  New settings:",{runsPerWeek:c,trainingDays:d,hardDays:p,longRunDay:m,bikeDays:y});const e=new Ye,t=(0,s.A)((0,s.A)({},o),{},{runsPerWeek:c,availableDays:d,hardSessionDays:p,longRunDay:m,preferredBikeDays:y}),n=await e.regeneratePlanFromCurrentWeek(a,t,l);Me.log("  \u2705 Plan regenerated successfully"),await Pe.saveTrainingPlan(Re.j2.currentUser.uid,n),await Pe.saveUserProfile(Re.j2.currentUser.uid,t),Me.log("  \u2705 Saved to Firestore"),window.location.reload()}catch(e){Me.error("\u274c Error updating plan:",e),alert("Error updating plan. Please try again."),w(!1)}},disabled:b,style:{flex:1,padding:"14px",fontSize:"1rem",fontWeight:"500",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#fff",border:"none",borderRadius:"8px",cursor:b?"not-allowed":"pointer",opacity:b?.5:1},children:b?"Updating...":"Update Plan"})]})]})})},ul={clientId:"185232",clientSecret:"12593efdb60e3ffa5f7cf67949e5dcdf060ae25e",redirectUri:"".concat(window.location.origin,"/auth/strava/callback"),authorizationUrl:"https://www.strava.com/oauth/authorize",apiBaseUrl:"https://www.strava.com/api/v3",scope:"activity:read_all"};const dl=new class{getAuthorizationUrl(){const e=new URLSearchParams({client_id:ul.clientId,redirect_uri:ul.redirectUri,response_type:"code",approval_prompt:"auto",scope:ul.scope});return"".concat(ul.authorizationUrl,"?").concat(e.toString())}async exchangeToken(e){const t=await fetch("https://www.strava.com/oauth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:ul.clientId,client_secret:ul.clientSecret,code:e,grant_type:"authorization_code"})});if(!t.ok){const e=await t.json();throw new Error("Strava token exchange failed: ".concat(e.message||t.statusText))}return t.json()}async refreshAccessToken(e){const t=await fetch("https://www.strava.com/oauth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:ul.clientId,client_secret:ul.clientSecret,refresh_token:e,grant_type:"refresh_token"})});if(!t.ok)throw new Error("Failed to refresh Strava access token");return t.json()}async getActivities(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const r=new URLSearchParams({page:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1).toString(),per_page:t.toString()});if(n){const e=Math.floor(n.getTime()/1e3);r.append("after",e.toString()),Me.log("\ud83d\udcc5 Filtering activities after: ".concat(n.toLocaleDateString()," (").concat(e,")"))}const i=await fetch("".concat(ul.apiBaseUrl,"/athlete/activities?").concat(r.toString()),{headers:{Authorization:"Bearer ".concat(e)}});if(!i.ok){if(401===i.status)throw new Error("STRAVA_TOKEN_EXPIRED");throw new Error("Failed to fetch Strava activities: ".concat(i.statusText))}return i.json()}async getActivity(e,t){const n=await fetch("".concat(ul.apiBaseUrl,"/activities/").concat(t),{headers:{Authorization:"Bearer ".concat(e)}});if(!n.ok){if(401===n.status)throw new Error("STRAVA_TOKEN_EXPIRED");throw new Error("Failed to fetch Strava activity: ".concat(n.statusText))}return n.json()}async getActivityStreams(e,t){const n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:["time","distance","altitude","heartrate","cadence","watts","temp","moving","grade_smooth"]).join(","),r=await fetch("".concat(ul.apiBaseUrl,"/activities/").concat(t,"/streams?keys=").concat(n,"&key_by_type=true"),{headers:{Authorization:"Bearer ".concat(e)}});if(!r.ok){if(401===r.status)throw new Error("STRAVA_TOKEN_EXPIRED");if(404===r.status)return Me.log("\u26a0\ufe0f No stream data available for this activity"),null;throw new Error("Failed to fetch activity streams: ".concat(r.statusText))}return r.json()}async getAthlete(e){const t=await fetch("".concat(ul.apiBaseUrl,"/athlete"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok){if(401===t.status)throw new Error("STRAVA_TOKEN_EXPIRED");throw new Error("Failed to fetch Strava athlete: ".concat(t.statusText))}return t.json()}isTokenExpired(e){return e-Math.floor(Date.now()/1e3)<3600}matchActivity(e,t){const n=new Date(e.start_date_local),r=new Date(t.date);if(n.getFullYear()!==r.getFullYear()||n.getMonth()!==r.getMonth()||n.getDate()!==r.getDate())return!1;if(!["Ride","VirtualRide","EBikeRide"].includes(e.type))return!1;if(t.distance){const n=e.distance/1609.34,r=t.distance;if(Math.abs(n-r)>.2*r)return!1}return!0}convertToRunEQCompletion(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=e.distance/1609.34,r=Math.round(e.moving_time/60);let i=null;if(["Run","VirtualRun"].includes(e.type)&&n>0){const t=e.moving_time/n,r=Math.floor(t/60),o=Math.round(t%60);i="".concat(r,":").concat(o.toString().padStart(2,"0"),"/mi")}let o=null;e.splits_standard&&e.splits_standard.length>0?o=e.splits_standard.map((e,t)=>({lap:t+1,distance:(e.distance/1609.34).toFixed(2)+" mi",distanceMiles:(e.distance/1609.34).toFixed(2),time:this.formatTime(e.moving_time),pace:e.average_speed?this.calculatePaceFromSpeed(e.average_speed):null,elevationGain:e.elevation_difference?Math.round(3.28084*e.elevation_difference):null,avgHeartRate:e.average_heartrate||null})):e.splits_metric&&e.splits_metric.length>0&&(o=e.splits_metric.map((e,t)=>({lap:t+1,distance:(e.distance/1e3).toFixed(2)+" km",distanceMiles:(e.distance/1609.34).toFixed(2),time:this.formatTime(e.moving_time),pace:e.average_speed?this.calculatePaceFromSpeed(e.average_speed):null,elevationGain:e.elevation_difference?Math.round(3.28084*e.elevation_difference):null,avgHeartRate:e.average_heartrate||null})));const a={distance:n.toFixed(2),duration:r,pace:i,notes:"Synced from Strava: ".concat(e.name),avgHeartRate:e.average_heartrate||null,maxHeartRate:e.max_heartrate||null,cadence:e.average_cadence||null,elevationGain:e.total_elevation_gain?Math.round(3.28084*e.total_elevation_gain):null,stravaActivityId:e.id,stravaActivityUrl:"https://www.strava.com/activities/".concat(e.id)};return o&&(a.laps=o),e.suffer_score&&(a.sufferScore=e.suffer_score),e.device_name&&(a.device=e.device_name),e.calories&&(a.calories=e.calories),t&&(a.streams=this.processStreams(t)),a}processStreams(e){const t={};return e.altitude&&(t.elevation=e.altitude.data),e.heartrate&&(t.heartRate=e.heartrate.data),e.distance&&(t.distance=e.distance.data),e.time&&(t.time=e.time.data),t}formatTime(e){const t=Math.floor(e/60),n=Math.round(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))}calculatePaceFromSpeed(e){if(!e||0===e)return null;const t=1609.34/e,n=Math.floor(t/60),r=Math.round(t%60);return"".concat(n,":").concat(r.toString().padStart(2,"0"),"/mi")}};const hl=new class{async syncActivities(e,t,n,r){if(Me.log("\ud83d\udd04 Starting Strava sync...",{userId:e,currentWeek:r}),!t.stravaConnected)return Me.log("\u26a0\ufe0f Strava not connected - skipping sync"),{success:!1,error:"Strava not connected"};try{var i;let a=t.stravaAccessToken;const l=t.stravaTokenExpiresAt;if(dl.isTokenExpired(l)){Me.log("\ud83d\udd04 Access token expired - refreshing...");const n=await dl.refreshAccessToken(t.stravaRefreshToken),r=(0,Ae.doc)(Re.db,"users",e);await(0,Ae.updateDoc)(r,{stravaAccessToken:n.access_token,stravaRefreshToken:n.refresh_token,stravaTokenExpiresAt:n.expires_at}),a=n.access_token,Me.log("\u2705 Token refreshed successfully")}const c=null!==n&&void 0!==n&&null!==(i=n.planOverview)&&void 0!==i&&i.startDate?new Date(n.planOverview.startDate+"T00:00:00"):null;c||Me.log("\u26a0\ufe0f No plan start date found - fetching all recent activities");const u=await dl.getActivities(a,1,50,c);Me.log("\ud83d\udce5 Fetched ".concat(u.length," Strava activities ").concat(c?"since ".concat(c.toLocaleDateString()):""));const d=n.weeks[r-1];if(!d||!d.workouts)return Me.log("\u26a0\ufe0f No workouts found for current week"),{success:!1,error:"No workouts in current week"};const h=[r];r>1&&h.push(r-1),r>2&&h.push(r-2);let p=[];h.forEach(e=>{const t=n.weeks[e-1];t&&t.workouts&&t.workouts.forEach(t=>{p.push((0,s.A)((0,s.A)({},t),{},{weekNumber:e,workoutIndex:0}))})}),Me.log("\ud83d\udd0d Checking ".concat(p.length," workouts across ").concat(h.length," weeks"));const f=[],m=await this.getCompletedWorkouts(e);for(const e of u){Me.log('\ud83d\udccb Activity: "'.concat(e.name,'" - Type: "').concat(e.type,'" - Date: ').concat(e.start_date_local));if(!["Ride","VirtualRide","EBikeRide","Run","VirtualRun"].includes(e.type)){Me.log("  \u23ed\ufe0f Skipping - unsupported type: ".concat(e.type));continue}const t=this.findMatchingWorkout(e,p,m);var o;if(t)Me.log("\u2705 Matched Strava activity ".concat(e.id," to workout:"),{day:t.day,week:t.weekNumber,workout:null===(o=t.workout)||void 0===o?void 0:o.name,type:e.type}),f.push({activity:e,workout:t})}Me.log("\ud83c\udfaf Found ".concat(f.length," matching workouts"));let g=0;for(const t of f){await this.completeWorkout(e,t.workout,t.activity,a)&&g++}return Me.log("\u2705 Strava sync complete: ".concat(g,"/").concat(f.length," workouts auto-completed")),{success:!0,activitiesFetched:u.length,matchesFound:f.length,workoutsCompleted:g}}catch(a){return console.error("\u274c Strava sync error:",a),"STRAVA_TOKEN_EXPIRED"===a.message?{success:!1,error:"Token expired - please reconnect Strava"}:{success:!1,error:a.message}}}findMatchingWorkout(e,t,n){const r=new Date(e.start_date_local),i=e.distance/1609.34;Me.log("\ud83d\udd0d Matching activity:",{name:e.name,type:e.type,date:e.start_date_local,activityDate:r.toLocaleDateString(),distance:i.toFixed(2)+" mi"});const o=["Ride","VirtualRide","EBikeRide"].includes(e.type),a=["Run","VirtualRun"].includes(e.type);for(const s of t){const e="".concat(s.weekNumber,"-").concat(s.day,"-").concat(s.workoutIndex||0);if(Me.log("  \ud83d\udd11 Generated workout key: ".concat(e),{weekNumber:s.weekNumber,day:s.day,workoutIndex:s.workoutIndex,hasWorkoutIndex:s.hasOwnProperty("workoutIndex")}),Me.log("  \ud83d\udccb Completed workouts keys:",n.map(e=>e.key)),n.some(t=>t.key===e)){Me.log("  \u23ed\ufe0f Skipping ".concat(s.day," - already completed"));continue}const t="bike"===s.type||s.equipmentSpecific,i=["tempo","intervals","hills","longRun","easy"].includes(s.type),l=new Date(s.date+" 00:00:00");if(Me.log("  \ud83d\udcc5 Checking ".concat(s.day,":"),{workoutDate:l.toLocaleDateString(),rawDate:s.date,workoutType:s.type,isBikeWorkout:t,isRunWorkout:i,activityIsBike:o,activityIsRun:a}),!o||t)if(!a||i){if(r.getFullYear()===l.getFullYear()&&r.getMonth()===l.getMonth()&&r.getDate()===l.getDate())return Me.log("    \u2705 MATCH FOUND!"),s;Me.log("    \u274c Date mismatch")}else Me.log("    \u274c Type mismatch: run activity but not run workout");else Me.log("    \u274c Type mismatch: bike activity but not bike workout")}return Me.log("  \u274c No match found for this activity"),null}async getCompletedWorkouts(e){try{const{doc:t,getDoc:r}=await Promise.resolve().then(n.bind(n,667)),{db:i}=await Promise.resolve().then(n.bind(n,121)),o=t(i,"users",e),a=await r(o);if(!a.exists())return Me.log("\ud83d\udce6 getCompletedWorkouts: User doc does not exist"),[];const s=a.data().completedWorkouts||{};Me.log("\ud83d\udce6 getCompletedWorkouts: Raw data from Firebase:",s),Me.log("\ud83d\udce6 getCompletedWorkouts: Number of completed workouts:",Object.keys(s).length);const l=Object.keys(s).map(e=>({key:e,data:s[e]}));return Me.log("\ud83d\udce6 getCompletedWorkouts: Returning array:",l),l}catch(t){return console.error("Error fetching completed workouts:",t),[]}}async completeWorkout(e,t,r,i){try{Me.log("\ud83d\udce5 Fetching detailed activity data for ".concat(r.id,"..."));const a=await dl.getActivity(i,r.id);Me.log("  \u2705 Got detailed activity data");let l=null;try{l=await dl.getActivityStreams(i,r.id),l&&Me.log("  \u2705 Got activity streams (elevation profile, HR data, etc.)")}catch(o){Me.log("  \u26a0\ufe0f Could not fetch streams (not critical):",o.message)}const c=dl.convertToRunEQCompletion(a,l),u="".concat(t.weekNumber,"-").concat(t.day,"-").concat(t.workoutIndex||0),{doc:d,updateDoc:h,arrayUnion:p}=await Promise.resolve().then(n.bind(n,667)),{db:f}=await Promise.resolve().then(n.bind(n,121)),m=d(f,"users",e);return await h(m,{["completedWorkouts.".concat(u)]:(0,s.A)((0,s.A)({completedAt:(new Date).toISOString(),completed:!0},c),{},{autoCompletedFromStrava:!0})}),Me.log("\u2705 Auto-completed workout: ".concat(u)),c.laps&&Me.log("  \ud83d\udcca Stored ".concat(c.laps.length," lap splits")),c.streams&&Me.log("  \ud83d\udcc8 Stored elevation and HR profile data"),!0}catch(o){return console.error("\u274c Error completing workout:",o),!1}}getSyncStatus(e){if(!e.stravaConnected)return{connected:!1,status:"not_connected",message:"Connect Strava to enable automatic workout tracking"};const t=e.stravaLastSync;if(!t)return{connected:!0,status:"never_synced",message:"Connected - sync will happen automatically"};const n=new Date(t),r=(new Date-n)/36e5;return r<1?{connected:!0,status:"recent",message:"Synced recently",lastSync:n}:{connected:!0,status:"ready",message:"Last synced ".concat(Math.round(r)," hours ago"),lastSync:n}}};const pl=function(e){var t,r,o,a,l,c,u,d,h,p;let{userProfile:f,trainingPlan:m,completedWorkouts:g,clearAllData:y}=e;const v=te(),[b,w]=(0,i.useState)(!1),[k,x]=(0,i.useState)(()=>{var e;const t=(()=>{var e,t;if(null===m||void 0===m||null===(e=m.planOverview)||void 0===e||!e.startDate)return 1;const n=new Date,r=new Date(m.planOverview.startDate+"T00:00:00"),i=r.getDay(),o=0===i?6:i-1,a=new Date(r.getTime()-864e5*o);if(n<a)return 1;const s=Math.floor((n-a)/6048e5);return Math.min(s+1,(null===m||void 0===m||null===(t=m.planOverview)||void 0===t?void 0:t.totalWeeks)||12)})(),n=localStorage.getItem("runeq_currentWeek"),r=localStorage.getItem("runeq_startDate");var i;if((null===m||void 0===m||null===(e=m.planOverview)||void 0===e?void 0:e.startDate)!==r)return Me.log("\ud83d\udcc5 New plan detected - using calculated week:",t),localStorage.setItem("runeq_startDate",null===m||void 0===m||null===(i=m.planOverview)||void 0===i?void 0:i.startDate),t;if(n){var o;const e=parseInt(n,10);if(e>=1&&e<=((null===m||void 0===m||null===(o=m.planOverview)||void 0===o?void 0:o.totalWeeks)||12))return e}return t});(0,i.useEffect)(()=>{localStorage.setItem("runeq_currentWeek",k.toString())},[k]);const[S,E]=(0,i.useState)({isOpen:!1,workout:null}),[T,C]=(0,i.useState)({}),[_,D]=(0,i.useState)({}),[A,R]=(0,i.useState)({}),[I,P]=(0,i.useState)({}),[M,N]=(0,i.useState)({}),[j,O]=(0,i.useState)(!1),[F,L]=(0,i.useState)({}),[W,B]=(0,i.useState)(!1),[U,z]=(0,i.useState)({isOpen:!1,workout:null,distance:"",notes:""});(0,i.useEffect)(()=>{try{const e=localStorage.getItem("runeq_modifiedWorkouts");if(Me.log("\ud83d\udce6 Dashboard loading from localStorage:",e),e){const t=JSON.parse(e);Me.log("\ud83d\udce6 Dashboard parsed data:",t),C(t)}H(!0)}catch(e){console.warn("Error loading modified workouts:",e),localStorage.removeItem("runeq_modifiedWorkouts"),H(!0)}},[]),(0,i.useEffect)(()=>{(async()=>{if(Re.j2.currentUser)try{const e=await Pe.getModifiedWorkouts(Re.j2.currentUser.uid);e.success&&e.data&&Object.keys(e.data).length>0&&(Me.log("\ud83d\udce6 Loaded modified workouts from Firestore:",e.data),C(e.data),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(e.data)))}catch(e){console.warn("Error loading modified workouts from Firestore:",e)}})()},[null===(t=Re.j2.currentUser)||void 0===t?void 0:t.uid]);const[q,H]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(q)try{Me.log("\ud83d\udcbe Dashboard saving to localStorage:",T),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(T))}catch(e){console.warn("Error saving modified workouts:",e)}},[T,q]),(0,i.useEffect)(()=>{g?(Me.log("\ud83d\udce6 Dashboard: Loading completions from Firebase:",g),N(g)):N({})},[g]);const V=new Le,K=new We,Y=new Ue,G=new Be,Q=new al,X=(new Ve,e=>{var t,n,r,i;if(e.distance)return"\ud83d\udccf ".concat(e.distance);const o=null===(t=e.workout)||void 0===t||null===(n=t.name)||void 0===n?void 0:n.match(/(\d+(?:\.\d+)?)\s*-?\s*(mile|miles|mi|RunEQ|km)/i);if(o)return"\ud83d\udccf ".concat(o[1]," ").concat(o[2]);if(null!==(r=e.workoutDetails)&&void 0!==r&&r.repetitions)return"\ud83d\udd01 ".concat(e.workoutDetails.repetitions);if(null!==(i=e.workoutDetails)&&void 0!==i&&i.duration)return"\u23f1\ufe0f ".concat(e.workoutDetails.duration);switch(e.type){case"longRun":return"\ud83d\udccf 10+ miles";case"tempo":return"\u23f1\ufe0f 20-40 min";case"intervals":return"\ud83d\udd01 Multiple reps";case"hills":return"\u26f0\ufe0f Hill session";case"easy":return"\ud83d\udccf 4-6 miles";case"bike":return"\ud83d\udeb4 12+ RunEQ miles";default:return null}}),J=(e,t)=>{var n,r,i,o,a,s,l,c,u,d,h,p,f,m,g,y,v,b,w,k,x,S,E,T,C,_,D,A,R,I;Me.log("\ud83d\udd0d generateWeekWorkouts - profile:",t),Me.log("\ud83d\udeb4 preferredBikeDays:",null===t||void 0===t?void 0:t.preferredBikeDays),Me.log("\ud83d\udcc0 localStorage userProfile:",localStorage.getItem("runeq_userProfile")),Me.log("\ud83d\udcc5 localStorage trainingPlan:",localStorage.getItem("runeq_trainingPlan"));const P={tempo:[V.getRandomWorkout("TRADITIONAL_TEMPO"),V.getRandomWorkout("ALTERNATING_TEMPO"),V.getRandomWorkout("PROGRESSIVE_TEMPO"),V.getRandomWorkout("TEMPO_INTERVALS")],intervals:[K.getRandomWorkout("SHORT_SPEED"),K.getRandomWorkout("VO2_MAX"),K.getRandomWorkout("LONG_INTERVALS")],hills:[G.getRandomWorkout("short_power"),G.getRandomWorkout("long_strength"),G.getRandomWorkout("hill_circuits")],longRuns:[Y.getRandomWorkout("TRADITIONAL_EASY"),Y.getRandomWorkout("PROGRESSIVE_RUNS"),Y.getRandomWorkout("MIXED_PACE_LONG"),Y.getRandomWorkout("RACE_SIMULATION")]},M=function(e){const n={Easy:8,Moderate:12,Hard:16,"Very Hard":20}[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Moderate"]||12;return{name:"".concat(n,"-Mile ").concat($s(t.standUpBikeType)," Ride"),description:"".concat(n," miles on ").concat($s(t.standUpBikeType)," @ steady aerobic effort")}},N=[{tuesday:"tempo",saturday:"intervals",sunday:"longRuns"},{tuesday:"hills",saturday:"tempo",sunday:"longRuns"},{tuesday:"intervals",saturday:"hills",sunday:"longRuns"},{tuesday:"tempo",saturday:"intervals",sunday:"longRuns"}],j=N[(e-1)%N.length],O=P[j.tuesday][(e-1)%P[j.tuesday].length],F=P[j.saturday][(e-1)%P[j.saturday].length],L=P[j.sunday][(e-1)%P[j.sunday].length],W=e=>({tempo:{type:"tempo",focus:"Lactate Threshold"},intervals:{type:"intervals",focus:"Speed & Power"},hills:{type:"hills",focus:"Strength & Power"},longRuns:{type:"longRun",focus:"Endurance"}}[e]||{type:"easy",focus:"Recovery"}),B=W(j.tuesday),U=W(j.saturday),z=W(j.sunday);return Me.log("\ud83d\udeb4 Checking bike days for each day:"),Me.log("  Monday bike day?",null===t||void 0===t||null===(n=t.preferredBikeDays)||void 0===n?void 0:n.includes("Monday")),Me.log("  Tuesday bike day?",null===t||void 0===t||null===(r=t.preferredBikeDays)||void 0===r?void 0:r.includes("Tuesday")),Me.log("  Wednesday bike day?",null===t||void 0===t||null===(i=t.preferredBikeDays)||void 0===i?void 0:i.includes("Wednesday")),Me.log("  Thursday bike day?",null===t||void 0===t||null===(o=t.preferredBikeDays)||void 0===o?void 0:o.includes("Thursday")),Me.log("  Friday bike day?",null===t||void 0===t||null===(a=t.preferredBikeDays)||void 0===a?void 0:a.includes("Friday")),Me.log("  Saturday bike day?",null===t||void 0===t||null===(s=t.preferredBikeDays)||void 0===s?void 0:s.includes("Saturday")),Me.log("  Sunday bike day?",null===t||void 0===t||null===(l=t.preferredBikeDays)||void 0===l?void 0:l.includes("Sunday")),[{day:"Monday",type:null!==t&&void 0!==t&&null!==(c=t.preferredBikeDays)&&void 0!==c&&c.includes("Monday")?"bike":"rest",workout:null!==t&&void 0!==t&&null!==(u=t.preferredBikeDays)&&void 0!==u&&u.includes("Monday")?M("Monday","Easy"):{name:"Rest Day",description:"Complete rest or light cross-training"},focus:null!==t&&void 0!==t&&null!==(d=t.preferredBikeDays)&&void 0!==d&&d.includes("Monday")?"Active Recovery":"Recovery",completed:!1,equipmentSpecific:(null===t||void 0===t||null===(h=t.preferredBikeDays)||void 0===h?void 0:h.includes("Monday"))&&!(null===t||void 0===t||!t.standUpBikeType)},{day:"Tuesday",type:null!==t&&void 0!==t&&null!==(p=t.preferredBikeDays)&&void 0!==p&&p.includes("Tuesday")?"bike":B.type,workout:null!==t&&void 0!==t&&null!==(f=t.preferredBikeDays)&&void 0!==f&&f.includes("Tuesday")?M("Tuesday","Moderate"):{name:O.name,description:O.description},focus:null!==t&&void 0!==t&&null!==(m=t.preferredBikeDays)&&void 0!==m&&m.includes("Tuesday")?"Aerobic Base":B.focus,completed:!1,equipmentSpecific:(null===t||void 0===t||null===(g=t.preferredBikeDays)||void 0===g?void 0:g.includes("Tuesday"))&&!(null===t||void 0===t||!t.standUpBikeType),workoutDetails:O},{day:"Wednesday",type:null!==t&&void 0!==t&&null!==(y=t.preferredBikeDays)&&void 0!==y&&y.includes("Wednesday")?"bike":"rest",workout:null!==t&&void 0!==t&&null!==(v=t.preferredBikeDays)&&void 0!==v&&v.includes("Wednesday")?M("Wednesday","Easy"):{name:"Rest Day",description:"Complete rest or light cross-training"},focus:null!==t&&void 0!==t&&null!==(b=t.preferredBikeDays)&&void 0!==b&&b.includes("Wednesday")?"Active Recovery":"Recovery",completed:!1,equipmentSpecific:(null===t||void 0===t||null===(w=t.preferredBikeDays)||void 0===w?void 0:w.includes("Wednesday"))&&!(null===t||void 0===t||!t.standUpBikeType)},{day:"Thursday",type:null!==t&&void 0!==t&&null!==(k=t.preferredBikeDays)&&void 0!==k&&k.includes("Thursday")?"bike":"easy",workout:null!==t&&void 0!==t&&null!==(x=t.preferredBikeDays)&&void 0!==x&&x.includes("Thursday")?M("Thursday","Easy"):{name:"Easy Run",description:"Conversational pace, aerobic base building"},focus:"Recovery",completed:!1,equipmentSpecific:(null===t||void 0===t||null===(S=t.preferredBikeDays)||void 0===S?void 0:S.includes("Thursday"))&&!(null===t||void 0===t||!t.standUpBikeType)},{day:"Friday",type:null!==t&&void 0!==t&&null!==(E=t.preferredBikeDays)&&void 0!==E&&E.includes("Friday")?"bike":"rest",workout:null!==t&&void 0!==t&&null!==(T=t.preferredBikeDays)&&void 0!==T&&T.includes("Friday")?M("Friday","Easy"):{name:"Rest Day",description:"Complete rest or light cross-training"},focus:null!==t&&void 0!==t&&null!==(C=t.preferredBikeDays)&&void 0!==C&&C.includes("Friday")?"Active Recovery":"Recovery",completed:!1,equipmentSpecific:(null===t||void 0===t||null===(_=t.preferredBikeDays)||void 0===_?void 0:_.includes("Friday"))&&!(null===t||void 0===t||!t.standUpBikeType)},{day:"Saturday",type:null!==t&&void 0!==t&&null!==(D=t.preferredBikeDays)&&void 0!==D&&D.includes("Saturday")?"bike":U.type,workout:null!==t&&void 0!==t&&null!==(A=t.preferredBikeDays)&&void 0!==A&&A.includes("Saturday")?M("Saturday","Hard"):{name:F.name,description:F.description},focus:null!==t&&void 0!==t&&null!==(R=t.preferredBikeDays)&&void 0!==R&&R.includes("Saturday")?"Aerobic Power":U.focus,completed:!1,equipmentSpecific:(null===t||void 0===t||null===(I=t.preferredBikeDays)||void 0===I?void 0:I.includes("Saturday"))&&!(null===t||void 0===t||!t.standUpBikeType),workoutDetails:F},{day:"Sunday",type:z.type,workout:{name:L.name,description:L.description},focus:z.focus,completed:!1,workoutDetails:L}]},$=(()=>{if(k<=0){var e;const t=new Date((null===m||void 0===m||null===(e=m.planOverview)||void 0===e?void 0:e.startDate)+"T00:00:00");return{week:0,weekDates:{displayText:"Training starts ".concat(t.toLocaleDateString())},phase:"preparation",totalMileage:0,workouts:[{day:"Preparation",type:"preparation",workout:{name:"Training Starts Soon!",description:"Your RunEQ training plan will begin on ".concat(t.toLocaleDateString(),". Get ready!")},focus:"Preparation",completed:!1}]}}if(m&&m.weeks&&m.weeks.length>0){const e=m.weeks[k-1];if(e&&e.workouts&&e.workouts.length>0)return Me.log("Using training plan data for week",k,"with",e.workouts.length,"workouts"),e.workouts.forEach(e=>{var t;"brickLongRun"===e.type&&Me.log("Found brick workout:",e.day,null===(t=e.workout)||void 0===t?void 0:t.name)}),e}return Me.log("Falling back to generated workouts for week",k),{week:k,weekDates:{displayText:"Week ".concat(k)},phase:"base",totalMileage:15,workouts:J(k,f)}})(),Z=e=>({tempo:"#4299e1",intervals:"#e53e3e",hills:"#38a169",longRun:"#805ad5",bike:"#ff9500",brick:"#ff6b6b",brickLongRun:"#ff6b6b",easy:"#718096",rest:"#a0aec0",preparation:"#ffd700"}[e]||"#718096"),ee=function(e){E({isOpen:!0,workout:e,mode:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"replace"})},ne=()=>{E({isOpen:!1,workout:null})},re=async e=>{var t;if(Re.j2.currentUser){if(e.completed){const t=!1,r=e.workoutIndex||0,i="".concat(k,"-").concat(e.day,"-").concat(r);N(e=>(0,s.A)((0,s.A)({},e),{},{[i]:{completed:t,completedAt:null,actualDistance:null,notes:null}}));try{(await Pe.markWorkoutComplete(Re.j2.currentUser.uid,k,e.day,t,null,null)).success||(console.error("Failed to save completion status"),N(e=>{const t=(0,s.A)({},e);return delete t[i],t}),alert("Failed to save. Please try again."))}catch(n){console.error("Error uncompleting workout:",n)}return}if("rest"===e.type){const t=!0,r=e.workoutIndex||0,i="".concat(k,"-").concat(e.day,"-").concat(r);N(e=>(0,s.A)((0,s.A)({},e),{},{[i]:{completed:t,completedAt:(new Date).toISOString()}}));try{await Pe.markWorkoutComplete(Re.j2.currentUser.uid,k,e.day,t)}catch(n){console.error("Error completing rest day:",n)}return}z({isOpen:!0,workout:e,distance:(null===(t=e.distance)||void 0===t?void 0:t.toString())||"",notes:""})}else console.error("No user logged in")},ie=e=>{const t="".concat(k,"-").concat(e.day,"-").concat(e.workoutIndex||0);L(e=>(0,s.A)((0,s.A)({},e),{},{[t]:!0}))},oe=e=>{const t="".concat(k,"-").concat(e.day,"-").concat(e.workoutIndex||0);L(e=>(0,s.A)((0,s.A)({},e),{},{[t]:!1}))},ae=e=>{const t=e.workoutIndex||0,n="".concat(k,"-").concat(e.day,"-").concat(t);C(e=>{const t=(0,s.A)({},e);return delete t[n],t})},se=e=>{const t=[],n="".concat(k,"-").concat(e.day);let r=0,i=!0;for(;i;){const o="".concat(n,"-").concat(r),a=T[o];if(a){const e=M[o];t.push((0,s.A)((0,s.A)({},a),{},{completed:(null===e||void 0===e?void 0:e.completed)||!1,completedAt:(null===e||void 0===e?void 0:e.completedAt)||null,workoutIndex:r})),r++}else if(0===r){const n=M[o];t.push((0,s.A)((0,s.A)({},e),{},{completed:(null===n||void 0===n?void 0:n.completed)||!1,completedAt:(null===n||void 0===n?void 0:n.completedAt)||null,workoutIndex:0})),i=!1}else i=!1}return t},le=e=>se(e)[0]||e;return"pending"===(null===f||void 0===f?void 0:f.approvalStatus)?(0,Ne.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"20px"},children:(0,Ne.jsxs)("div",{style:{maxWidth:"500px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"40px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,Ne.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:"\u23f3"}),(0,Ne.jsx)("h1",{style:{color:"#00D4FF",marginBottom:"16px"},children:"Account Pending Approval"}),(0,Ne.jsx)("p",{style:{color:"#AAAAAA",fontSize:"1.1rem",lineHeight:"1.6",marginBottom:"24px"},children:"Thank you for signing up! Your account is currently pending approval."}),(0,Ne.jsxs)("p",{style:{color:"#AAAAAA",fontSize:"0.95rem",lineHeight:"1.6"},children:["You'll receive an email at ",(0,Ne.jsx)("strong",{style:{color:"#FFFFFF"},children:null===f||void 0===f?void 0:f.email})," once your account has been approved. This usually takes less than 24 hours."]}),(0,Ne.jsx)("button",{onClick:async()=>{await(0,De.CI)(Re.j2),v("/")},style:{marginTop:"32px",padding:"12px 24px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"#FFFFFF",cursor:"pointer",fontSize:"1rem"},children:"Sign Out"})]})}):(0,Ne.jsx)(Ne.Fragment,{children:(0,Ne.jsxs)("div",{style:{minHeight:"100vh"},children:[(0,Ne.jsx)("div",{style:{color:"#AAAAAA",padding:"20px 0"},children:(0,Ne.jsxs)("div",{className:"container",children:[(0,Ne.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,Ne.jsxs)("h1",{style:{margin:"0",lineHeight:"1.2"},children:["Week ",k]}),(()=>{const e=(e=>{var t;if(null===m||void 0===m||null===(t=m.planOverview)||void 0===t||!t.startDate)return null;const n=new Date(m.planOverview.startDate+"T00:00:00"),r=864e5,i=n.getDay(),o=0===i?6:i-1,a=new Date(n.getTime()-o*r),s=new Date(a.getTime()+7*(e-1)*r),l=new Date(s.getTime()+5184e5),c={month:"short",day:"numeric"},u=s.toLocaleDateString("en-US",c),d=l.toLocaleDateString("en-US",c);return"".concat(u," - ").concat(d)})(k);return e?(0,Ne.jsxs)("div",{style:{fontSize:"0.9rem",color:"#AAAAAA",marginTop:"4px"},children:["Week of ",e]}):null})()]}),(0,Ne.jsxs)("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap",marginBottom:"16px"},children:[(()=>{const e=(e=>{if(null===e||void 0===e||!e.workouts)return{runMiles:0,bikeMiles:0,ellipticalMiles:0,runEqMiles:0,totalMiles:0,equivalentMiles:0};Me.log("\ud83d\udd22 Calculating mileage for week:",e.week),Me.log("\ud83d\udccb Workouts:",e.workouts);let t=0,n=0,r=0,i=0;e.workouts.forEach(e=>{const o=se(e);Me.log("\ud83c\udfc3 ".concat(e.day,": ").concat(o.length," workout(s)")),o.forEach((e,o)=>{var a,s,l,c,u,d,h,p,f,m,g;if(Me.log("   Workout ".concat(o+1,": ").concat(null===(a=e.workout)||void 0===a?void 0:a.name," (type: ").concat(e.type,")")),"brick"===e.type){var y,v,b,w;const r=null===(y=e.workout)||void 0===y||null===(v=y.description)||void 0===v?void 0:v.match(/(\d+(?:\.\d+)?)\s*mi.*run/i),i=null===(b=e.workout)||void 0===b||null===(w=b.description)||void 0===w?void 0:w.match(/(\d+(?:\.\d+)?)\s*mi.*bike/i);r&&(t+=parseFloat(r[1])),i&&(n+=parseFloat(i[1]))}else if(null!==(s=e.workout)&&void 0!==s&&null!==(l=s.name)&&void 0!==l&&l.match(/(\d+(?:\.\d+)?)\s*RunEQ\s*Miles?/i)){var k,x;const t=null===(k=e.workout)||void 0===k||null===(x=k.name)||void 0===x?void 0:x.match(/(\d+(?:\.\d+)?)\s*RunEQ\s*Miles?/i);if(t){var S;const n=parseFloat(t[1]);Me.log("   \u2705 Extracted ".concat(n,' RunEQ miles from "').concat(null===(S=e.workout)||void 0===S?void 0:S.name,'" (already equivalent)')),i+=n}}else if(null!==(c=e.workout)&&void 0!==c&&null!==(u=c.name)&&void 0!==u&&u.includes("Bike")||null!==(d=e.workout)&&void 0!==d&&null!==(h=d.name)&&void 0!==h&&h.includes("Cycling")){var E,T;const t=null===(E=e.workout)||void 0===E||null===(T=E.name)||void 0===T?void 0:T.match(/(\d+(?:\.\d+)?)/);t&&(n+=parseFloat(t[1]))}else if(null!==(p=e.workout)&&void 0!==p&&null!==(f=p.name)&&void 0!==f&&f.includes("Elliptical")||null!==(m=e.workout)&&void 0!==m&&null!==(g=m.name)&&void 0!==g&&g.includes("ElliptiGO")){var C,_;const t=null===(C=e.workout)||void 0===C||null===(_=C.name)||void 0===_?void 0:_.match(/(\d+(?:\.\d+)?)/);t&&(r+=parseFloat(t[1]))}else{var D,A,R,I;const n=(null===(D=e.workout)||void 0===D||null===(A=D.name)||void 0===A?void 0:A.match(/(\d+(?:\.\d+)?)\s*-?\s*(mile|miles|mi)\b/i))||(null===(R=e.workout)||void 0===R||null===(I=R.name)||void 0===I?void 0:I.match(/^(\d+(?:\.\d+)?)\s*(mile|miles|mi)/i));if(n){var P;const r=parseFloat(n[1]);Me.log("   \ud83d\udccf Extracted ".concat(r,' miles from "').concat(null===(P=e.workout)||void 0===P?void 0:P.name,'"')),t+=r}else{var M;let n=0;switch(e.type){case"rest":n=0;break;case"longRun":n=10;break;case"tempo":n=6;break;case"intervals":case"hills":n=5;break;default:n=4}Me.log("   \ud83d\udccf Using default ".concat(n," miles for ").concat(e.type,' workout "').concat(null===(M=e.workout)||void 0===M?void 0:M.name,'"')),t+=n}}})});const o=n/3,a=r/2,s=o+a+i,l=t+s;Me.log("\ud83d\udcca Final mileage calculation:"),Me.log("   Running: ".concat(t," miles")),Me.log("   Biking: ".concat(n," miles (").concat(o," equivalent)")),Me.log("   Elliptical: ".concat(r," miles (").concat(a," equivalent)")),Me.log("   RunEQ: ".concat(i," miles (already equivalent)")),Me.log("   Total: ".concat(l," miles"));const c={runMiles:Math.round(10*t)/10,bikeMiles:Math.round(10*n)/10,ellipticalMiles:Math.round(10*r)/10,runEqMiles:Math.round(10*i)/10,equivalentMiles:Math.round(10*s)/10,totalMiles:Math.round(10*l)/10};return Me.log("\ud83d\udcca Rounded result:",c),c})($),t=e.equivalentMiles>0;return(0,Ne.jsxs)("div",{style:{background:"rgba(0, 212, 255, 0.2)",color:"#00D4FF",padding:"8px 14px",borderRadius:"10px",fontWeight:"600",fontSize:"1.1rem",border:"1px solid rgba(0, 212, 255, 0.3)"},children:["\ud83d\udcca ",e.totalMiles," Miles This Week",t&&(0,Ne.jsxs)("div",{style:{fontSize:"0.85rem",fontWeight:"500",marginTop:"4px",color:"#66E8FF"},children:[e.runMiles,"mi run",e.bikeMiles>0&&" + ".concat(e.bikeMiles,"mi bike"),e.ellipticalMiles>0&&" + ".concat(e.ellipticalMiles,"mi elliptical"),(0,Ne.jsxs)("span",{style:{fontSize:"0.75rem",opacity:.8,display:"block",marginTop:"2px"},children:["(",e.equivalentMiles,"mi equivalent activity)"]})]})]})})(),(e=>{let t={min:0,max:0};const n=(null===(e=$.workouts)||void 0===e?void 0:e.filter(e=>("bike"===e.type||e.equipmentSpecific)&&e.distance&&e.distance>0))||[];return n.forEach(e=>{const n=il.calculateWorkoutCalories(e);n&&(t.min+=n.min,t.max+=n.max)}),0===n.length?null:(0,Ne.jsxs)("div",{style:{background:"rgba(255, 149, 0, 0.15)",color:"#FF9500",padding:"8px 14px",borderRadius:"10px",fontWeight:"600",fontSize:"1.1rem",border:"1px solid rgba(255, 149, 0, 0.3)"},children:["\ud83d\udd25 ",Math.round(t.min),"-",Math.round(t.max)," Cal This Week",(0,Ne.jsxs)("div",{style:{fontSize:"0.8rem",fontWeight:"500",marginTop:"4px",color:"#FFB84D"},children:[n.length," bike workout",1!==n.length?"s":""]})]})})(),(()=>{const e=(()=>{if(null===m||void 0===m||!m.weeks)return{last7Days:0,last30Days:0,allTime:0};const e=new Date,t=new Date(e.getTime()-6048e5),n=new Date(e.getTime()-2592e6);let r=0,i=0,o=0;return m.weeks.forEach(e=>{e.workouts&&e.workouts.forEach(a=>{se(a).forEach(a=>{var s,l;const c=a.completed||(null===(s=M["".concat(e.week,"-").concat(a.day,"-").concat(a.workoutIndex||0)])||void 0===s?void 0:s.completed),u=a.actualDistance||(null===(l=M["".concat(e.week,"-").concat(a.day,"-").concat(a.workoutIndex||0)])||void 0===l?void 0:l.actualDistance);if(c&&u){var d;const s=a.completedAt||(null===(d=M["".concat(e.week,"-").concat(a.day,"-").concat(a.workoutIndex||0)])||void 0===d?void 0:d.completedAt),l=s?new Date(s):null;o+=u,l&&(l>=t&&(r+=u),l>=n&&(i+=u))}})})}),{last7Days:Math.round(10*r)/10,last30Days:Math.round(10*i)/10,allTime:Math.round(10*o)/10}})();return e.allTime>0?(0,Ne.jsxs)("div",{style:{background:"rgba(34, 197, 94, 0.15)",color:"#22c55e",padding:"8px 14px",borderRadius:"10px",fontWeight:"600",fontSize:"1.1rem",border:"1px solid rgba(34, 197, 94, 0.3)"},children:["\ud83c\udfc3 ",e.last7Days," Miles (7 days)",(0,Ne.jsxs)("div",{style:{fontSize:"0.8rem",fontWeight:"500",marginTop:"4px",color:"#4ade80"},children:[e.last30Days,"mi last 30 days \u2022 ",e.allTime,"mi total"]})]}):null})()]}),(()=>{const e=$.phase||"base",t={base:{color:"#3b82f6",bgColor:"rgba(59, 130, 246, 0.15)",borderColor:"rgba(59, 130, 246, 0.4)",icon:"\ud83c\udfc3",message:"Building your aerobic foundation - consistency over intensity"},build:{color:"#f59e0b",bgColor:"rgba(245, 158, 11, 0.15)",borderColor:"rgba(245, 158, 11, 0.4)",icon:"\ud83c\udfd7\ufe0f",message:"Building strength and speed - time to push harder"},peak:{color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.15)",borderColor:"rgba(239, 68, 68, 0.4)",icon:"\ud83c\udfd4\ufe0f",message:"Peak fitness - your hardest workouts are here"},taper:{color:"#8b5cf6",bgColor:"rgba(139, 92, 246, 0.15)",borderColor:"rgba(139, 92, 246, 0.4)",icon:"\u26a1",message:"Tapering for race day - trust your training"},recovery:{color:"#22c55e",bgColor:"rgba(34, 197, 94, 0.15)",borderColor:"rgba(34, 197, 94, 0.4)",icon:"\ud83c\udf31",message:"Recovery week - let your body adapt and rebuild"}},n=t[e]||t.base;return(0,Ne.jsxs)("div",{style:{background:n.bgColor,border:"2px solid ".concat(n.borderColor),borderRadius:"12px",padding:"14px 18px",marginTop:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[(0,Ne.jsx)("div",{style:{fontSize:"1.8rem",lineHeight:"1"},children:n.icon}),(0,Ne.jsxs)("div",{style:{flex:1},children:[(0,Ne.jsx)("div",{style:{color:n.color,fontSize:"1rem",fontWeight:"700",marginBottom:"2px"},children:Zs(e)}),(0,Ne.jsx)("div",{style:{color:"#CCCCCC",fontSize:"0.85rem",fontWeight:"500"},children:n.message})]})]})})(),(0,Ne.jsxs)("div",{style:{display:"flex",gap:"8px",marginTop:"16px",flexWrap:"wrap",alignItems:"center"},children:[(0,Ne.jsx)("button",{className:"btn btn-secondary",onClick:()=>x(Math.max(1,k-1)),disabled:k<=1,style:{background:"rgba(255,255,255,0.1)",color:"#AAAAAA",border:"1px solid rgba(255,255,255,0.2)",fontSize:"0.8rem",padding:"6px 12px",borderRadius:"4px"},children:"\u2190 Prev"}),(0,Ne.jsx)("select",{value:k,onChange:e=>x(parseInt(e.target.value,10)),style:{background:"rgba(0, 212, 255, 0.15)",color:"#00D4FF",border:"2px solid rgba(0, 212, 255, 0.4)",borderRadius:"8px",padding:"6px 12px",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer",minWidth:"100px"},children:Array.from({length:(null===m||void 0===m||null===(r=m.planOverview)||void 0===r?void 0:r.totalWeeks)||12},(e,t)=>t+1).map(e=>(0,Ne.jsxs)("option",{value:e,style:{background:"#1a1a1a",color:"#00D4FF"},children:["Week ",e]},e))}),(0,Ne.jsx)("button",{className:"btn btn-secondary",onClick:()=>{var e;return x(Math.min((null===m||void 0===m||null===(e=m.planOverview)||void 0===e?void 0:e.totalWeeks)||12,k+1))},disabled:k===((null===m||void 0===m||null===(o=m.planOverview)||void 0===o?void 0:o.totalWeeks)||12),style:{background:"rgba(255,255,255,0.1)",color:"#AAAAAA",border:"1px solid rgba(255,255,255,0.2)",fontSize:"0.8rem",padding:"6px 12px",borderRadius:"4px"},children:"Next \u2192"}),(0,Ne.jsx)("button",{onClick:()=>w(!0),style:{background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",border:"1px solid rgba(59, 130, 246, 0.3)",fontSize:"0.8rem",padding:"6px 12px",borderRadius:"4px",cursor:"pointer"},title:"Adjust training schedule, days, and preferences",children:"\u2699\ufe0f Manage Plan"}),null!==f&&void 0!==f&&f.stravaConnected?(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("button",{style:{background:"rgba(252, 76, 2, 0.1)",color:"#FC4C02",border:"1px solid rgba(252, 76, 2, 0.3)",fontSize:"0.8rem",padding:"6px 12px",borderRadius:"4px",cursor:"pointer"},title:"Connected as ".concat(f.stravaAthleteName||"Strava athlete"),children:"\u2713 Strava Connected"}),(0,Ne.jsx)("button",{onClick:e=>{Me.log("\ud83d\udd18 BUTTON CLICKED INLINE - Event:",e),Me.log("\ud83d\udd18 stravaSyncing:",W),Me.log("\ud83d\udd18 userProfile?.stravaConnected:",null===f||void 0===f?void 0:f.stravaConnected),Me.log("\ud83d\udd18 auth.currentUser:",Re.j2.currentUser),Me.log("\ud83d\udd18 trainingPlan:",m),e.preventDefault(),e.stopPropagation(),(async()=>{if(Me.log("\ud83d\udd18 BUTTON CLICKED - handleManualStravaSync called"),null!==f&&void 0!==f&&f.stravaConnected&&Re.j2.currentUser&&m){B(!0),Me.log("\ud83d\udd04 Manual Strava sync triggered...");try{const e=await hl.syncActivities(Re.j2.currentUser.uid,f,m,k);e.success?(Me.log("\u2705 Strava sync successful:",e),localStorage.setItem("runeq_stravaLastSync",(new Date).toISOString()),e.workoutsCompleted>0?(Me.log("\ud83d\udd04 ".concat(e.workoutsCompleted," workouts auto-completed - refreshing...")),window.location.reload()):(alert("Sync complete! Found ".concat(e.activitiesFetched," activities, ").concat(e.matchesFound," matched workouts.")),B(!1))):(console.warn("\u26a0\ufe0f Strava sync failed:",e.error),alert("Sync failed: ".concat(e.error)),B(!1))}catch(e){console.error("\u274c Strava sync error:",e),alert("Sync error: ".concat(e.message)),B(!1)}}else Me.log("\u274c Cannot sync - missing requirements:",{stravaConnected:null===f||void 0===f?void 0:f.stravaConnected,hasUser:!!Re.j2.currentUser,hasTrainingPlan:!!m})})()},disabled:W,style:{background:W?"rgba(100, 100, 100, 0.1)":"rgba(252, 76, 2, 0.2)",color:W?"#666":"#FC4C02",border:"1px solid ".concat(W?"rgba(100, 100, 100, 0.3)":"rgba(252, 76, 2, 0.4)"),fontSize:"0.8rem",padding:"6px 12px",borderRadius:"4px",cursor:W?"not-allowed":"pointer",opacity:W?.6:1,pointerEvents:W?"none":"auto"},title:"Manually sync your Strava activities",children:W?"\u23f3 Syncing...":"\ud83d\udd04 Sync Now"}),(0,Ne.jsx)("button",{onClick:async()=>{if(window.confirm("Delete ALL workout completions? This cannot be undone!"))try{const{doc:e,updateDoc:t,deleteField:r,getDoc:i}=await Promise.resolve().then(n.bind(n,667)),{db:o}=await Promise.resolve().then(n.bind(n,121)),a=e(o,"users",Re.j2.currentUser.uid);Me.log("\ud83d\uddd1\ufe0f Before delete - checking Firebase...");const s=await i(a);Me.log("  completedWorkouts:",s.data().completedWorkouts),await t(a,{completedWorkouts:r()}),Me.log("\u2705 Delete command sent to Firebase");const l=await i(a);Me.log("\ud83d\udd0d After delete - checking Firebase..."),Me.log("  completedWorkouts:",l.data().completedWorkouts),l.data().completedWorkouts?Me.log("\u26a0\ufe0f WARNING: completedWorkouts still exists after delete!"):Me.log("\u2705 Confirmed: completedWorkouts field removed from Firestore"),Me.log('\ud83d\udd04 Reloading page - use "Sync Now" button to re-sync from Strava'),window.location.reload()}catch(e){console.error("\u274c Error deleting completions:",e),alert("Error deleting completions: "+e.message)}},style:{background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",fontSize:"0.8rem",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",marginLeft:"8px"},title:"DEBUG: Delete all workout completions",children:"\ud83d\uddd1\ufe0f Clear All"})]}):(0,Ne.jsx)("button",{onClick:()=>{const e=dl.getAuthorizationUrl();window.location.href=e},style:{background:"rgba(252, 76, 2, 0.1)",color:"#FC4C02",border:"1px solid rgba(252, 76, 2, 0.3)",fontSize:"0.8rem",padding:"6px 12px",borderRadius:"4px",cursor:"pointer"},children:"\ud83d\udd17 Connect Strava"}),(0,Ne.jsx)("button",{onClick:()=>{window.confirm("Clear all data and start over? This will reset your profile and training plan.")&&y()},style:{background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",fontSize:"0.8rem",padding:"6px 12px",borderRadius:"4px",cursor:"pointer"},title:"Clear all data and restart onboarding",children:"\ud83d\uddd1\ufe0f Reset"}),(0,Ne.jsx)("button",{onClick:async()=>{window.confirm("Logout? Your data is saved and will be here when you log back in.")&&await(0,De.CI)(Re.j2)},style:{background:"rgba(156, 163, 175, 0.1)",color:"#9ca3af",border:"1px solid rgba(156, 163, 175, 0.3)",fontSize:"0.8rem",padding:"6px 12px",borderRadius:"4px",cursor:"pointer"},title:"Logout (your data is saved)",children:"\ud83d\udeaa Logout"})]})]})}),(0,Ne.jsxs)("div",{className:"container",style:{padding:"20px 16px"},children:[(0,Ne.jsxs)("div",{className:"card",style:{marginBottom:"20px",background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)"},children:[(0,Ne.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,Ne.jsx)("h3",{style:{margin:"0 0 4px 0",color:"#00D4FF"},children:"Current Training System"}),(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Ne.jsx)("span",{style:{fontSize:"1.2rem"},children:"\ud83d\udd2c"}),(0,Ne.jsx)("span",{style:{fontSize:"1.1rem",fontWeight:"bold"},children:(ce=(null===m||void 0===m||null===(a=m.planOverview)||void 0===a?void 0:a.trainingPhilosophy)||(null===f||void 0===f?void 0:f.trainingPhilosophy)||"Zone-Based Training",ce?Js.TRAINING_SYSTEMS[ce]||el(ce.replace(/_/g," ")):"")})]}),(0,Ne.jsxs)("p",{style:{margin:"4px 0 0 0",fontSize:"0.9rem",color:"#00D4FF"},children:["Week ",k," of ",(null===m||void 0===m||null===(l=m.planOverview)||void 0===l?void 0:l.totalWeeks)||16," \u2022 Periodized training system"]})]}),(0,Ne.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px",fontSize:"0.85rem"},children:[(0,Ne.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",padding:"8px",borderRadius:"6px"},children:[(0,Ne.jsx)("strong",{children:"Focus:"})," ",$.phase?$.phase.charAt(0).toUpperCase()+$.phase.slice(1)+" Phase":"Periodized Training"]}),(0,Ne.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",padding:"8px",borderRadius:"6px"},children:[(0,Ne.jsx)("strong",{children:"Current Phase:"})," ",($.phase||"base").toUpperCase()]})]})]}),(0,Ne.jsxs)("div",{className:"card",style:{marginBottom:"20px"},children:[(0,Ne.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[(0,Ne.jsx)("h2",{style:{margin:0},children:"Week Progress"}),(0,Ne.jsx)("span",{className:"badge badge-info",children:(()=>{const e=$.workouts.filter(e=>le(e).completed).length,t=$.workouts.filter(e=>"rest"!==e.type).length;return"".concat(e,"/").concat(t," completed")})()})]}),(0,Ne.jsx)("div",{className:"progress-bar",children:(0,Ne.jsx)("div",{className:"progress-fill",style:{width:"".concat($.workouts.filter(e=>le(e).completed).length/$.workouts.filter(e=>"rest"!==e.type).length*100,"%")}})})]}),"hot_humid"===f.climate&&(0,Ne.jsx)("div",{className:"card",style:{marginBottom:"20px",background:"rgba(255, 184, 0, 0.1)",border:"1px solid rgba(255, 184, 0, 0.3)"},children:(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Ne.jsx)("span",{style:{fontSize:"1.5rem"},children:"\ud83c\udf21\ufe0f"}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h3",{style:{margin:"0 0 4px 0",color:"#c05621"},children:"Climate Adjustment Active"}),(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"0.9rem",color:"#744210"},children:["Paces automatically adjusted for ",f.climate.replace("_"," ")," conditions. Add 30-60 seconds per mile to easy runs when very humid."]})]})]})}),(0,Ne.jsxs)("div",{className:"card",style:{marginBottom:"20px"},children:[(0,Ne.jsxs)("div",{className:"card-header",children:[(0,Ne.jsx)("h2",{style:{margin:0},children:"This Week's Workouts"}),(0,Ne.jsx)("p",{style:{margin:"8px 0 0 0",color:"#666"},children:f.standUpBikeType&&"Equipment-specific workouts marked with \u26a1"})]}),(0,Ne.jsx)("div",{style:{display:"grid",gap:"16px"},children:$.workouts.map(e=>{const t=se(e);return(0,Ne.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t.map((n,r)=>{var i,o,a,l;return(0,Ne.jsxs)("div",{className:"card",style:{background:"rest"===n.type?"rgba(255, 255, 255, 0.03)":"rgba(255, 255, 255, 0.05)",border:"2px solid ".concat(Z(n.type),"20"),borderLeft:"4px solid ".concat(Z(n.type)),opacity:"rest"===n.type?.7:1,cursor:"rest"===n.type?"default":"pointer",position:"relative"},onClick:()=>(e=>{if("rest"===e.type||"preparation"===e.type)return;const t=(e.day||"unknown").toLowerCase().replace(/\s+/g,"-");v("/workout/".concat(t),{state:{workout:e,userProfile:f,currentWeek:k,weekData:$}})})(n),children:[(0,Ne.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px",flexWrap:"wrap",gap:"12px"},children:[(0,Ne.jsxs)("div",{style:{flex:"1 1 auto",minWidth:"200px"},children:[(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[(0,Ne.jsx)("div",{children:(0,Ne.jsxs)("h3",{style:{margin:0,color:"#EEEEEE",fontSize:"1.1rem",fontWeight:"600"},children:[n.day,n.date&&(0,Ne.jsx)("span",{style:{fontSize:"0.85rem",marginLeft:"8px",color:"#AAAAAA",fontWeight:"400"},children:n.date}),t.length>1&&(0,Ne.jsxs)("span",{style:{fontSize:"0.75rem",marginLeft:"8px",background:"rgba(0, 212, 255, 0.2)",color:"#00D4FF",padding:"2px 8px",borderRadius:"12px",fontWeight:"700",border:"1px solid rgba(0, 212, 255, 0.4)"},children:["Workout ",r+1,"/",t.length]})]})}),n.equipmentSpecific&&(0,Ne.jsx)("span",{style:{fontSize:"1rem"},children:"\u26a1"}),"bike"===n.type&&(0,Ne.jsx)("span",{style:{fontSize:"1rem",color:"#ff9500"},title:"Pure bike workout",children:"\ud83d\udeb4"}),("brick"===n.type||"brickLongRun"===n.type)&&(0,Ne.jsx)("span",{style:{fontSize:"1rem",color:"#ff6b6b"},title:"Brick workout (Run + Bike combination)",children:"\ud83e\uddf1"}),n.completed&&(0,Ne.jsx)("span",{style:{color:"#00FF88",fontSize:"1.2rem"},children:"\u2713"}),n.replacementReason&&(0,Ne.jsx)("span",{style:{color:"var(--runeq-accent)",fontSize:"1.2rem"},title:"Changed: ".concat(n.replacementReason),children:"\ud83d\udd04"})]}),(0,Ne.jsx)("h4",{style:{margin:"0 0 4px 0",fontSize:"1.1rem",color:Z(n.type)},children:(null===(i=n.workout)||void 0===i?void 0:i.name)||n.name||"Workout"}),X(n)&&(0,Ne.jsx)("div",{style:{display:"inline-block",background:"rgba(0, 212, 255, 0.15)",color:"#00D4FF",padding:"4px 10px",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"8px",border:"1px solid rgba(0, 212, 255, 0.3)"},children:X(n)}),("bike"===n.type||n.equipmentSpecific)&&(()=>{const e=il.calculateWorkoutCalories(n);return e?(0,Ne.jsxs)("div",{style:{display:"inline-block",background:"rgba(255, 149, 0, 0.15)",color:"#FF9500",padding:"4px 10px",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"8px",marginLeft:"8px",border:"1px solid rgba(255, 149, 0, 0.3)"},children:["\ud83d\udd25 ",e.range," cal"]}):null})(),((null===(o=n.workout)||void 0===o?void 0:o.description)||n.description)&&(0,Ne.jsx)("p",{style:{margin:"0 0 12px 0",fontSize:"1rem",color:"#CCCCCC",lineHeight:"1.4"},children:(null===(a=n.workout)||void 0===a?void 0:a.description)||n.description}),n.completed&&(()=>{const e="".concat(k,"-").concat(n.day,"-").concat(n.workoutIndex||0),t=M[e];if(!t)return null;t.pace||t.avgHeartRate||t.cadence||t.elevationGain;return(0,Ne.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(0, 255, 136, 0.15) 0%, rgba(0, 212, 255, 0.15) 100%)",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:"12px",padding:"12px",marginBottom:"12px"},children:[(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"8px"},children:[(0,Ne.jsx)("span",{style:{fontSize:"1rem"},children:"\u2713"}),(0,Ne.jsx)("span",{style:{color:"#00FF88",fontSize:"0.85rem",fontWeight:"700",letterSpacing:"0.5px"},children:t.autoCompletedFromStrava?"\ud83d\udd17 SYNCED FROM STRAVA":"COMPLETED"})]}),(0,Ne.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"8px",fontSize:"0.85rem"},children:[t.distance&&(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("div",{style:{color:"#999",fontSize:"0.75rem"},children:"Distance"}),(0,Ne.jsxs)("div",{style:{color:"#FFF",fontWeight:"600"},children:[t.distance," mi"]})]}),t.duration&&(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("div",{style:{color:"#999",fontSize:"0.75rem"},children:"Duration"}),(0,Ne.jsxs)("div",{style:{color:"#FFF",fontWeight:"600"},children:[t.duration," min"]})]}),t.pace&&(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("div",{style:{color:"#999",fontSize:"0.75rem"},children:"Pace"}),(0,Ne.jsx)("div",{style:{color:"#FFF",fontWeight:"600"},children:t.pace})]}),t.avgHeartRate&&(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("div",{style:{color:"#999",fontSize:"0.75rem"},children:"Avg HR"}),(0,Ne.jsxs)("div",{style:{color:"#FFF",fontWeight:"600"},children:[t.avgHeartRate," bpm"]})]}),t.cadence&&(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("div",{style:{color:"#999",fontSize:"0.75rem"},children:"Cadence"}),(0,Ne.jsxs)("div",{style:{color:"#FFF",fontWeight:"600"},children:[Math.round(t.cadence)," spm"]})]}),t.elevationGain&&(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("div",{style:{color:"#999",fontSize:"0.75rem"},children:"Elevation"}),(0,Ne.jsxs)("div",{style:{color:"#FFF",fontWeight:"600"},children:[t.elevationGain," ft"]})]})]}),t.notes&&(0,Ne.jsxs)("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,Ne.jsx)("div",{style:{color:"#999",fontSize:"0.75rem",marginBottom:"4px"},children:"Notes"}),(0,Ne.jsx)("div",{style:{color:"#CCC",fontSize:"0.85rem"},children:t.notes})]}),t.stravaActivityUrl&&(0,Ne.jsx)("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,Ne.jsx)("a",{href:t.stravaActivityUrl,target:"_blank",rel:"noopener noreferrer",style:{color:"#FC4C02",fontSize:"0.85rem",fontWeight:"600",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"4px"},onClick:e=>e.stopPropagation(),children:"View on Strava \u2192"})})]})})(),(0,Ne.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[(0,Ne.jsx)("span",{className:"badge",style:{background:"".concat(Z(n.type),"30"),color:Z(n.type),fontSize:"0.8rem",fontWeight:"500"},children:n.focus}),n.equipmentSpecific&&(null===f||void 0===f||null===(l=f.preferredBikeDays)||void 0===l?void 0:l.includes(n.day))&&(0,Ne.jsx)("span",{className:"badge badge-warning",style:{fontSize:"0.8rem",fontWeight:"500"},children:$s(f.standUpBikeType)})]})]}),"rest"===n.type?(0,Ne.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",minWidth:"140px",flexShrink:0},children:[(0,Ne.jsx)("button",{className:"btn",style:{fontSize:"0.85rem",padding:"10px 12px",fontWeight:"600",background:n.completed?"rgba(156, 163, 175, 0.1)":"rgba(0, 255, 136, 0.1)",color:n.completed?"#9ca3af":"#00FF88",border:n.completed?"1px solid rgba(156, 163, 175, 0.3)":"1px solid rgba(0, 255, 136, 0.3)",textAlign:"center"},onClick:e=>{e.stopPropagation(),re(n)},children:n.completed?"\u23ea Undo Rest":"\u2705 Rested"}),(0,Ne.jsx)("button",{className:"btn",style:{fontSize:"0.8rem",padding:"8px 12px",background:"rgba(34, 197, 94, 0.1)",color:"#22c55e",border:"1px solid rgba(34, 197, 94, 0.3)",fontWeight:"600",textAlign:"center"},onClick:e=>{e.stopPropagation(),ee(n)},children:"\ud83c\udf1f Add Workout"})]}):"rest"!==n.type&&(0,Ne.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",minWidth:"140px",flexShrink:0},children:[(0,Ne.jsx)("button",{className:"btn",style:{fontSize:"0.85rem",padding:"10px 12px",fontWeight:"600",background:n.completed?"rgba(156, 163, 175, 0.1)":null!==f&&void 0!==f&&f.stravaConnected?"rgba(0, 212, 255, 0.1)":"rgba(0, 255, 136, 0.1)",color:n.completed?"#9ca3af":null!==f&&void 0!==f&&f.stravaConnected?"#00D4FF":"#00FF88",border:n.completed?"1px solid rgba(156, 163, 175, 0.3)":null!==f&&void 0!==f&&f.stravaConnected?"1px solid rgba(0, 212, 255, 0.3)":"1px solid rgba(0, 255, 136, 0.3)",textAlign:"center",cursor:n.completed?"pointer":null!==f&&void 0!==f&&f.stravaConnected?"default":"pointer",opacity:null!==f&&void 0!==f&&f.stravaConnected&&!n.completed?.7:1},onClick:e=>{e.stopPropagation(),null!==f&&void 0!==f&&f.stravaConnected&&!n.completed||re(n)},children:n.completed?"\u23ea Undo":null!==f&&void 0!==f&&f.stravaConnected?(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("svg",{viewBox:"0 0 24 24",style:{width:"16px",height:"16px",display:"inline-block",marginRight:"6px",verticalAlign:"middle"},children:(0,Ne.jsx)("path",{fill:"#FC4C02",d:"M15.387 17.944l-2.089-4.116h-3.065L15.387 24l5.15-10.172h-3.066m-7.008-5.599l2.836 5.598h4.172L10.463 0l-7 13.828h4.169"})}),"Strava Sync"]}):"\ud83d\udcdd Log Workout"}),("adventure"===(null===f||void 0===f?void 0:f.trainingStyle)||"flexible"===(null===f||void 0===f?void 0:f.trainingStyle)&&["tempo","intervals","longRun","hills"].includes(n.type))&&["tempo","intervals","longRun","hills","easy"].includes(n.type)&&!(()=>{const e="".concat(k,"-").concat(n.day,"-").concat(n.workoutIndex||0),t=M[e];return null===t||void 0===t?void 0:t.autoCompletedFromStrava})()&&(0,Ne.jsx)("button",{className:"btn btn-primary",style:{fontSize:"0.8rem",padding:"8px 12px",background:"#4299e1",border:"1px solid #4299e1",textAlign:"center"},onClick:e=>{e.stopPropagation();const t="".concat(k,"-").concat(n.day);A[t]?(e=>{const t="".concat(k,"-").concat(e.day);R(e=>(0,s.A)((0,s.A)({},e),{},{[t]:!1}))})(n):(e=>{var t,n,r;const i="".concat(k,"-").concat(e.day);let o=[];const a=parseFloat(null===(t=e.workout)||void 0===t||null===(n=t.name)||void 0===n||null===(r=n.match(/\d+/))||void 0===r?void 0:r[0])||8;switch(e.type){case"intervals":o=Q.getSpeedOptions(k,f);break;case"tempo":o=Q.getTempoOptions(k,f);break;case"longRun":o=Q.getLongRunOptions(k,f,a);break;case"hills":o=Q.getHillOptions(k,f);break;case"easy":o=Q.getEasyOptions(k,f,4);break;default:o=[]}D(e=>(0,s.A)((0,s.A)({},e),{},{[i]:o})),R(e=>(0,s.A)((0,s.A)({},e),{},{[i]:!0}))})(n)},children:(()=>{const e="".concat(k,"-").concat(n.day);return A[e]?"\ud83d\udccb Hide":"\ud83c\udfb2 Choose Adventure"})()}),("longRun"===n.type||"brickLongRun"===n.type)&&(null===f||void 0===f?void 0:f.standUpBikeType)&&"Sunday"===n.day&&!(()=>{const e="".concat(k,"-").concat(n.day,"-").concat(n.workoutIndex||0),t=M[e];return null===t||void 0===t?void 0:t.autoCompletedFromStrava})()&&(0,Ne.jsx)("button",{className:"btn",style:{fontSize:"0.8rem",padding:"8px 12px",fontWeight:"600",background:"brickLongRun"===n.type?"#48bb78":"#ed8936",color:"white",border:"1px solid ".concat("brickLongRun"===n.type?"#48bb78":"#ed8936"),textAlign:"center"},onClick:e=>{if(e.stopPropagation(),"brickLongRun"===n.type)ae(n);else{const e="".concat(k,"-").concat(n.day,"-").concat(n.workoutIndex||0);F[e]?oe(n):ie(n)}},children:"brickLongRun"===n.type?"\ud83c\udfc3 Run Only":"\ud83e\uddf1 Make Brick"}),("longRun"===n.type||"brickLongRun"===n.type)&&(null===f||void 0===f?void 0:f.standUpBikeType)&&"Sunday"!==n.day&&!(()=>{const e="".concat(k,"-").concat(n.day,"-").concat(n.workoutIndex||0),t=M[e];return null===t||void 0===t?void 0:t.autoCompletedFromStrava})()&&(0,Ne.jsx)("button",{className:"btn btn-success",style:{fontSize:"0.8rem",padding:"8px 12px",fontWeight:"600",background:"brickLongRun"===n.type?"#805ad5":"#ff6b6b",color:"white",border:"1px solid ".concat("brickLongRun"===n.type?"#805ad5":"#ff6b6b"),textAlign:"center"},onClick:e=>{if(e.stopPropagation(),"brickLongRun"===n.type)ae(n);else{const e="".concat(k,"-").concat(n.day,"-").concat(n.workoutIndex||0);F[e]?oe(n):ie(n)}},children:"brickLongRun"===n.type?"\ud83c\udfc3 Run Only":"\ud83e\uddf1 Make Brick"}),!(()=>{const e="".concat(k,"-").concat(n.day,"-").concat(n.workoutIndex||0),t=M[e];return null===t||void 0===t?void 0:t.autoCompletedFromStrava})()&&(0,Ne.jsx)("button",{className:"btn",style:{fontSize:"0.8rem",padding:"8px 14px",textAlign:"center",background:"linear-gradient(135deg, rgba(0, 212, 255, 0.25) 0%, rgba(0, 255, 136, 0.2) 100%)",border:"2px solid rgba(0, 212, 255, 0.5)",color:"#00D4FF",fontWeight:"600",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, rgba(0, 212, 255, 0.35) 0%, rgba(0, 255, 136, 0.3) 100%)",e.currentTarget.style.border="2px solid rgba(0, 212, 255, 0.8)",e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, rgba(0, 212, 255, 0.25) 0%, rgba(0, 255, 136, 0.2) 100%)",e.currentTarget.style.border="2px solid rgba(0, 212, 255, 0.5)",e.currentTarget.style.transform="translateY(0)"},onClick:e=>{e.stopPropagation(),ee(n)},children:"Life Adaptations"}),n.replacementReason&&0===r&&(0,Ne.jsx)("button",{className:"btn",style:{fontSize:"0.8rem",padding:"6px 12px",background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",border:"1px solid rgba(59, 130, 246, 0.3)",fontWeight:"600",textAlign:"center"},onClick:e=>{e.stopPropagation(),ae(n)},title:"Restore the original scheduled workout",children:"\u21a9\ufe0f Revert to Original"}),r>0&&(0,Ne.jsx)("button",{className:"btn",style:{fontSize:"0.8rem",padding:"6px 12px",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",fontWeight:"600",textAlign:"center"},onClick:t=>{t.stopPropagation(),window.confirm("Remove this workout?")&&((e,t)=>{if(0===t)return void alert("Cannot remove the primary workout. Use 'Something Else' to replace it instead.");const n="".concat(k,"-").concat(e.day,"-").concat(t),r=(0,s.A)({},T);delete r[n];const i="".concat(k,"-").concat(e.day),o=[];Object.keys(r).forEach(e=>{if(e.startsWith(i)){const n=parseInt(e.split("-").pop());n>t&&(o.push({key:e,index:n,workout:r[e]}),delete r[e])}}),o.sort((e,t)=>e.index-t.index).forEach((e,n)=>{const o="".concat(i,"-").concat(t+n);r[o]=e.workout}),C(r),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(r))})(e,r)},children:"\ud83d\uddd1\ufe0f Remove"})]})]}),((e,t,r)=>{const i="".concat(k,"-").concat(n.day,"-").concat(n.workoutIndex||0),o=F[i],a=parseFloat(null===(e=n.workout)||void 0===e||null===(t=e.name)||void 0===t||null===(r=t.match(/\d+/))||void 0===r?void 0:r[0])||10;if(!o||"longRun"!==n.type)return null;const l=[{key:"heavy-run",emoji:"\ud83c\udfc3\u200d\u2642\ufe0f",label:"Heavy Run",runMiles:Math.round(.8*a),bikeMiles:Math.round(.2*a),description:"Feeling strong - mostly running",color:"#4299e1"},{key:"balanced",emoji:"\u2696\ufe0f",label:"Balanced",runMiles:Math.round(.6*a),bikeMiles:Math.round(.4*a),description:"Standard brick workout",color:"#ed8936"},{key:"heavy-bike",emoji:"\ud83d\udeb4",label:"Heavy Bike",runMiles:Math.round(.4*a),bikeMiles:Math.round(.6*a),description:"Legs need a break - more biking",color:"#9f7aea"},{key:"light-run",emoji:"\ud83d\udeb4\u200d\u2642\ufe0f",label:"Light Run",runMiles:Math.round(.2*a),bikeMiles:Math.round(.8*a),description:"Recovery mode - minimal running",color:"#48bb78"}];return(0,Ne.jsx)("div",{style:{marginTop:"12px"},children:(0,Ne.jsxs)("div",{style:{background:"transparent",border:"none",padding:"0"},children:[(0,Ne.jsx)("h4",{style:{margin:"0 0 16px 0",color:"#f59e0b",display:"flex",alignItems:"center",gap:"8px",fontSize:"1.2rem",fontWeight:"700"},children:"\ud83e\uddf1 Choose Your Brick Workout Split"}),(0,Ne.jsxs)("p",{style:{margin:"0 0 16px 0",fontSize:"0.9rem",color:"#CCCCCC"},children:["All options = ",a," miles total training load. Pick based on how your legs feel today:"]}),(0,Ne.jsx)("div",{style:{display:"grid",gap:"12px"},children:l.map(e=>(0,Ne.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"2px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"16px",cursor:"pointer",transition:"all 0.2s ease"},onClick:t=>{t.stopPropagation(),function(e){var t,n,r;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"balanced";const o=parseFloat(null===(t=e.workout)||void 0===t||null===(n=t.name)||void 0===n||null===(r=n.match(/\d+/))||void 0===r?void 0:r[0])||8;let a,l,c;switch(i){case"heavy-run":a=Math.round(.8*o),l=Math.round(.2*o),c="Heavy Run";break;case"balanced":default:a=Math.round(.6*o),l=Math.round(.4*o),c="Balanced";break;case"heavy-bike":a=Math.round(.4*o),l=Math.round(.6*o),c="Heavy Bike";break;case"light-run":a=Math.round(.2*o),l=Math.round(.8*o),c="Light Run"}const u=(0,s.A)((0,s.A)({},e),{},{type:"brickLongRun",workout:{name:"Brick Long Run (".concat(a,"mi run + ").concat(l," RunEQ Miles ").concat($s(null===f||void 0===f?void 0:f.standUpBikeType),")"),description:"".concat(c," brick: ").concat(a," mile run + ").concat(l," RunEQ miles on ").concat($s(null===f||void 0===f?void 0:f.standUpBikeType))},focus:"Brick Endurance",equipmentSpecific:!0,replacementReason:"Converted to ".concat(c.toLowerCase()," brick workout")}),d=e.workoutIndex||0,h="".concat(k,"-").concat(e.day,"-").concat(d);C(e=>(0,s.A)((0,s.A)({},e),{},{[h]:u})),oe(e)}(n,e.key)},onMouseEnter:t=>{t.currentTarget.style.borderColor=e.color,t.currentTarget.style.background="".concat(e.color,"15")},onMouseLeave:e=>{e.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)",e.currentTarget.style.background="rgba(255, 255, 255, 0.05)"},children:[(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Ne.jsx)("span",{style:{fontSize:"1.5rem"},children:e.emoji}),(0,Ne.jsx)("strong",{style:{color:e.color,fontSize:"1.1rem"},children:e.label})]}),(0,Ne.jsxs)("span",{style:{fontSize:"0.9rem",color:"#00D4FF",fontWeight:"bold"},children:[e.runMiles,"mi + ",e.bikeMiles," RunEQ"]})]}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#aaa"},children:e.description})]},e.key))}),(0,Ne.jsx)("button",{onClick:e=>{e.stopPropagation(),oe(n)},style:{marginTop:"16px",padding:"8px 16px",background:"rgba(156, 163, 175, 0.1)",color:"#9ca3af",border:"1px solid rgba(156, 163, 175, 0.3)",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",cursor:"pointer",width:"100%"},children:"Cancel"})]})})})(),(()=>{const e="".concat(k,"-").concat(n.day),t=_[e];return A[e]&&t&&0!==t.length?(0,Ne.jsx)("div",{style:{marginTop:"12px"},children:(0,Ne.jsxs)("div",{style:{background:"transparent",border:"none",padding:"0"},children:[(0,Ne.jsxs)("h4",{style:{margin:"0 0 16px 0",color:"#00D4FF",display:"flex",alignItems:"center",gap:"8px",fontSize:"1.2rem",fontWeight:"700"},children:["\ud83c\udfb2 Choose Your ","longRun"===n.type?"Long Run":"intervals"===n.type?"Speed":"tempo"===n.type?"Tempo":"hills"===n.type?"Hill":"Easy Run"," Adventure"]}),(0,Ne.jsx)("div",{style:{display:"grid",gap:"12px"},children:t.map((e,t)=>{var r;const i=((e,t)=>{const n={"Very Easy":{bg:"rgba(34, 197, 94, 0.4)",border:"rgba(34, 197, 94, 0.8)",accent:"#22c55e",icon:"\ud83d\ude0c"},Easy:{bg:"rgba(34, 197, 94, 0.45)",border:"rgba(34, 197, 94, 0.9)",accent:"#22c55e",icon:"\ud83d\udfe2"},"Easy-Moderate":{bg:"rgba(245, 158, 11, 0.4)",border:"rgba(245, 158, 11, 0.8)",accent:"#f59e0b",icon:"\ud83d\udfe1"},Moderate:{bg:"rgba(245, 158, 11, 0.45)",border:"rgba(245, 158, 11, 0.9)",accent:"#f59e0b",icon:"\ud83d\udd36"},"Medium-Hard":{bg:"rgba(239, 68, 68, 0.4)",border:"rgba(239, 68, 68, 0.8)",accent:"#ef4444",icon:"\ud83d\udd38"},Hard:{bg:"rgba(239, 68, 68, 0.45)",border:"rgba(239, 68, 68, 0.9)",accent:"#ef4444",icon:"\ud83d\udd25"},"Very Hard":{bg:"rgba(220, 38, 127, 0.4)",border:"rgba(220, 38, 127, 0.8)",accent:"#dc2626",icon:"\ud83d\udca5"},Variable:{bg:"rgba(168, 85, 247, 0.4)",border:"rgba(168, 85, 247, 0.8)",accent:"#a855f7",icon:"\u26a1"},"Variable Hard":{bg:"rgba(168, 85, 247, 0.45)",border:"rgba(168, 85, 247, 0.9)",accent:"#a855f7",icon:"\u26a1"},Progressive:{bg:"rgba(59, 130, 246, 0.4)",border:"rgba(59, 130, 246, 0.8)",accent:"#3b82f6",icon:"\ud83d\udcc8"}};if(!n[e]&&t)return{Low:n.Easy,"Low-Moderate":n["Easy-Moderate"],Moderate:n.Moderate,"Moderate-High":n["Medium-Hard"],High:n.Hard,"Very High":n["Very Hard"]}[t]||n.Moderate;return n[e]||n.Moderate})(e.intensity,e.difficulty),o="".concat(k,"-").concat(n.day),a=(null===(r=I[o])||void 0===r?void 0:r.id)===e.id;return(0,Ne.jsxs)("div",{className:"card",style:{cursor:"pointer",background:a?"rgba(74, 222, 128, 0.2)":i.bg,border:a?"3px solid #4ade80":"2px solid ".concat(i.border),borderLeft:a?"6px solid #22c55e":"6px solid ".concat(i.accent),transition:"all 0.2s ease",backdropFilter:"blur(3px)",boxShadow:a?"0 4px 20px rgba(74, 222, 128, 0.4)":"0 4px 16px ".concat(i.accent,"20"),transform:a?"scale(1.02)":"scale(1)"},onClick:t=>{t.preventDefault(),t.stopPropagation(),((e,t)=>{const n="".concat(k,"-").concat(e.day);Me.log("\ud83c\udfaf Option selected:",{workoutKey:n,selectedOption:t.shortName,workout:e.day,currentWeek:k,selectedOptionObject:t});try{const e=(0,s.A)((0,s.A)({},I),{},{[n]:t});Me.log("\ud83d\udcdd Direct state update:",{oldState:I,newState:e,workoutKey:n,selectedOption:t.shortName}),P(e),Me.log("\u2728 State update dispatched, should see confirmation buttons next")}catch(r){console.error("\u274c Error in handleSelectOption:",r)}})(n,e)},onMouseEnter:e=>{e.currentTarget.style.background=i.bg.replace("0.1","0.2").replace("0.15","0.25"),e.currentTarget.style.border="2px solid ".concat(i.accent),e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 12px ".concat(i.accent,"40")},onMouseLeave:e=>{e.currentTarget.style.background=i.bg,e.currentTarget.style.border="2px solid ".concat(i.border),e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:[(0,Ne.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[(0,Ne.jsxs)("div",{style:{flex:1},children:[(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[(0,Ne.jsx)("span",{style:{fontSize:"1.2rem"},children:i.icon}),(0,Ne.jsx)("h5",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600",color:"#FFFFFF"},children:e.name}),a&&(0,Ne.jsx)("span",{style:{background:"#22c55e",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"0.7rem",fontWeight:"600"},children:"\u2713 SELECTED"})]}),(0,Ne.jsx)("p",{style:{margin:"0 0 10px 0",fontSize:"0.9rem",color:"#FFFFFF",lineHeight:"1.4",opacity:"1"},children:e.description}),(0,Ne.jsxs)("div",{style:{display:"flex",gap:"12px",fontSize:"0.8rem",color:"#FFFFFF",opacity:"1",marginBottom:"8px"},children:[(0,Ne.jsxs)("span",{children:["\u23f1\ufe0f ",e.timeRequired]}),(0,Ne.jsxs)("span",{children:["\ud83d\udccd ",e.location]}),(0,Ne.jsxs)("span",{children:["\ud83d\udcaa ",e.difficulty]})]})]}),(0,Ne.jsx)("div",{style:{background:i.accent+"20",color:"#FFFFFF",padding:"6px 12px",borderRadius:"16px",fontSize:"0.8rem",fontWeight:"600",whiteSpace:"nowrap",marginLeft:"12px",border:"1px solid ".concat(i.accent,"40")},children:e.focus})]}),(0,Ne.jsxs)("div",{style:{background:i.accent+"15",color:"#FFFFFF",padding:"8px 12px",borderRadius:"8px",fontSize:"0.85rem",fontWeight:"500",border:"1px solid ".concat(i.accent,"30")},children:["\ud83d\udca1 ",e.benefits]})]},e.id)})}),(0,Ne.jsx)("div",{style:{marginTop:"12px",padding:"8px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px"},children:(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"0.8rem",color:"#CCCCCC",fontStyle:"italic"},children:["\ud83d\udca1 ",(0,Ne.jsx)("strong",{children:"All options target the same training system"})," - choose based on your mood, time, and location!"]})}),(()=>{const e="".concat(k,"-").concat(n.day),t=I[e];return Me.log("\ud83d\udd0d Checking confirmation buttons:",{workoutKey:e,selectedOption:(null===t||void 0===t?void 0:t.shortName)||"none",hasSelection:!!t,selectedOptionsState:I}),t?(Me.log("\u2705 Showing confirmation buttons for:",t.shortName),Me.log("   Confirmation buttons should be visible now!"),console.warn("\ud83d\udea8 BUTTONS RENDERING NOW - they should be bright green and obvious!"),(0,Ne.jsxs)("div",{style:{marginTop:"16px",padding:"20px",background:"linear-gradient(135deg, rgba(74, 222, 128, 0.3), rgba(34, 197, 94, 0.2))",border:"3px solid #22c55e",borderRadius:"12px",boxShadow:"0 8px 25px rgba(34, 197, 94, 0.4)",position:"relative",zIndex:1e3},children:[(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[(0,Ne.jsx)("span",{style:{fontSize:"1.2rem"},children:"\u2705"}),(0,Ne.jsxs)("span",{style:{color:"#4ade80",fontWeight:"600",fontSize:"0.9rem"},children:["Selected: ",t.shortName]})]}),(0,Ne.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,Ne.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),(async e=>{const t="".concat(k,"-").concat(e.day),n=I[t];if(!n)return;const r=(0,s.A)((0,s.A)({},e),{},{workout:(0,s.A)({},n),focus:n.focus||e.focus,replacementReason:"Choose Your Adventure selection"}),i=(0,s.A)((0,s.A)({},T),{},{[t]:r});C(i),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(i)),Re.j2.currentUser&&(await Pe.saveModifiedWorkout(Re.j2.currentUser.uid,k,e.day,r),Me.log("\u2705 SAVED to Firestore:",n.name,"for",e.day)),P({}),R(e=>(0,s.A)((0,s.A)({},e),{},{[t]:!1}))})(n)},style:{flex:1,padding:"12px 20px",background:"linear-gradient(135deg, #22c55e, #16a34a)",color:"white",border:"2px solid #16a34a",borderRadius:"8px",fontSize:"1rem",fontWeight:"700",cursor:"pointer",transition:"all 0.2s ease",textShadow:"0 1px 2px rgba(0,0,0,0.3)",boxShadow:"0 4px 12px rgba(34, 197, 94, 0.4)"},onMouseEnter:e=>e.target.style.background="#22c55e",onMouseLeave:e=>e.target.style.background="#4ade80",children:"\u2713 Confirm Selection"}),(0,Ne.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),(e=>{const t="".concat(k,"-").concat(e.day);P(e=>{const n=(0,s.A)({},e);return delete n[t],n})})(n)},style:{padding:"8px 16px",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.background="rgba(239, 68, 68, 0.2)",e.target.style.borderColor="#ef4444"},onMouseLeave:e=>{e.target.style.background="rgba(239, 68, 68, 0.1)",e.target.style.borderColor="rgba(239, 68, 68, 0.3)"},children:"\u2717 Cancel"})]})]})):(Me.log("\u274c No selectedOption found for key:",e),Me.log("   Available keys:",Object.keys(I)),null)})()]})}):null})()]},"".concat(e.day,"-").concat(r))}),(0,Ne.jsx)("button",{className:"btn",style:{width:"100%",fontSize:"0.9rem",padding:"12px",background:"rgba(34, 197, 94, 0.1)",color:"#22c55e",border:"2px dashed rgba(34, 197, 94, 0.3)",fontWeight:"600",marginTop:t.length>1?"0":"8px"},onClick:t=>{t.stopPropagation(),(e=>{ee(e,"add")})(e)},children:"\u2795 Add Second Workout (Two-a-Day)"})]},e.day)})})]})]}),(0,Ne.jsx)(sl,{isOpen:S.isOpen,onClose:ne,currentWorkout:S.workout,userProfile:f,trainingPlan:m,onWorkoutSelect:e=>{const t=S.mode||"replace",n="".concat(k,"-").concat(e.day);if("add"===t){var r;let t=0;for(;T["".concat(n,"-").concat(t)];)t++;0===t&&(t=1);const i="".concat(n,"-").concat(t),o=(0,s.A)((0,s.A)({},T),{},{[i]:e});C(o),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(o)),Me.log("\ud83d\udcbe Added second workout:",i,null===(r=e.workout)||void 0===r?void 0:r.name)}else{var i;const t="".concat(n,"-0"),r=(0,s.A)((0,s.A)({},T),{},{[t]:e});C(r),localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(r)),Me.log("\ud83d\udcbe Replaced workout:",t,null===(i=e.workout)||void 0===i?void 0:i.name)}ne()},weather:null,mode:S.mode||"replace"}),(0,Ne.jsx)(cl,{isOpen:b,onClose:()=>w(!1),userProfile:f,trainingPlan:m,currentWeek:k}),U.isOpen&&(0,Ne.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:"20px"},children:(0,Ne.jsxs)("div",{style:{background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",borderRadius:"12px",padding:"30px",maxWidth:"500px",width:"100%",border:"2px solid rgba(0, 212, 255, 0.3)"},children:[(0,Ne.jsx)("h2",{style:{color:"#00D4FF",marginTop:0,marginBottom:"20px"},children:"Mark Workout Complete"}),(0,Ne.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,Ne.jsx)("h3",{style:{color:"#FFFFFF",fontSize:"16px",marginBottom:"8px"},children:(null===(c=U.workout)||void 0===c||null===(u=c.workout)||void 0===u?void 0:u.name)||(null===(d=U.workout)||void 0===d?void 0:d.name)}),(0,Ne.jsxs)("p",{style:{color:"#AAAAAA",fontSize:"14px",margin:0},children:[null===(h=U.workout)||void 0===h?void 0:h.type," - ",null===(p=U.workout)||void 0===p?void 0:p.focus]})]}),(0,Ne.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,Ne.jsx)("label",{style:{display:"block",color:"#CCCCCC",fontSize:"14px",marginBottom:"8px",fontWeight:"500"},children:"Distance Completed (miles)"}),(0,Ne.jsx)("input",{type:"number",step:"0.1",value:U.distance,onChange:e=>z(t=>(0,s.A)((0,s.A)({},t),{},{distance:e.target.value})),placeholder:"Enter distance",style:{width:"100%",padding:"12px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#FFFFFF",fontSize:"16px",boxSizing:"border-box"}})]}),(0,Ne.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,Ne.jsx)("label",{style:{display:"block",color:"#CCCCCC",fontSize:"14px",marginBottom:"8px",fontWeight:"500"},children:"Notes (optional)"}),(0,Ne.jsx)("textarea",{value:U.notes,onChange:e=>z(t=>(0,s.A)((0,s.A)({},t),{},{notes:e.target.value})),placeholder:"How did it feel? Any observations?",rows:3,style:{width:"100%",padding:"12px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#FFFFFF",fontSize:"14px",fontFamily:"inherit",resize:"vertical",boxSizing:"border-box"}})]}),(0,Ne.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,Ne.jsx)("button",{onClick:async()=>{const{workout:e,distance:t,notes:n}=U;if(!e||!Re.j2.currentUser)return;const r=!0,i=e.workoutIndex||0,o="".concat(k,"-").concat(e.day,"-").concat(i);N(e=>(0,s.A)((0,s.A)({},e),{},{[o]:{completed:r,completedAt:(new Date).toISOString(),actualDistance:t?parseFloat(t):null,notes:n||null}})),z({isOpen:!1,workout:null,distance:"",notes:""});try{(await Pe.markWorkoutComplete(Re.j2.currentUser.uid,k,e.day,r,t?parseFloat(t):null,n||null)).success||(console.error("Failed to save completion status"),N(e=>{const t=(0,s.A)({},e);return delete t[o],t}),alert("Failed to save. Please try again."))}catch(a){console.error("Error saving completion:",a),N(e=>{const t=(0,s.A)({},e);return delete t[o],t}),alert("Failed to save. Please try again.")}},style:{flex:1,padding:"15px",background:"#00D4FF",color:"#000000",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},children:"Save"}),(0,Ne.jsx)("button",{onClick:()=>z({isOpen:!1,workout:null,distance:"",notes:""}),style:{padding:"15px 30px",background:"rgba(156, 163, 175, 0.1)",color:"#9CA3AF",border:"1px solid rgba(156, 163, 175, 0.3)",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},children:"Cancel"})]})]})}),j&&(0,Ne.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:"20px"},children:(0,Ne.jsxs)("div",{style:{background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",borderRadius:"12px",padding:"40px",maxWidth:"600px",width:"100%",border:"2px solid rgba(0, 212, 255, 0.3)",maxHeight:"90vh",overflowY:"auto"},children:[(0,Ne.jsx)("h2",{style:{color:"#00D4FF",marginTop:0},children:"\ud83c\udfab Setup Beta Codes"}),(0,Ne.jsx)("p",{style:{color:"#AAAAAA",marginBottom:"20px"},children:"This will add 10 unique single-use beta codes to Firestore."}),(0,Ne.jsxs)("div",{style:{background:"rgba(0, 0, 0, 0.3)",padding:"20px",borderRadius:"8px",marginBottom:"30px",fontFamily:"monospace",fontSize:"14px"},children:[(0,Ne.jsx)("strong",{style:{color:"#00D4FF"},children:"Your 10 Beta Codes:"}),(0,Ne.jsxs)("div",{style:{marginTop:"10px"},children:[(0,Ne.jsx)("div",{children:"1. VVVFRS"}),(0,Ne.jsx)("div",{children:"2. SVTQHH"}),(0,Ne.jsx)("div",{children:"3. EN88AQ"}),(0,Ne.jsx)("div",{children:"4. H8RXZ6"}),(0,Ne.jsx)("div",{children:"5. 69JUVC"}),(0,Ne.jsx)("div",{children:"6. XJXHZM"}),(0,Ne.jsx)("div",{children:"7. 2EHTS9"}),(0,Ne.jsx)("div",{children:"8. ZWNVSS"}),(0,Ne.jsx)("div",{children:"9. KFCHAK"}),(0,Ne.jsx)("div",{children:"10. 8E685H"})]})]}),(0,Ne.jsxs)("div",{style:{background:"rgba(255, 184, 0, 0.1)",border:"1px solid rgba(255, 184, 0, 0.3)",borderRadius:"8px",padding:"16px",marginBottom:"20px",color:"#FFB800"},children:[(0,Ne.jsx)("strong",{children:"\u26a0\ufe0f Before clicking:"}),(0,Ne.jsxs)("ol",{style:{margin:"10px 0 0 0",paddingLeft:"20px"},children:[(0,Ne.jsx)("li",{children:"Make sure Firestore security rules are updated"}),(0,Ne.jsx)("li",{children:"This only needs to be done once"}),(0,Ne.jsx)("li",{children:"Each code can only be used once"})]})]}),(0,Ne.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,Ne.jsx)("button",{onClick:async()=>{const e=["VVVFRS","SVTQHH","EN88AQ","H8RXZ6","69JUVC","XJXHZM","2EHTS9","ZWNVSS","KFCHAK","8E685H"];try{let t=0;const{doc:r,setDoc:i,serverTimestamp:o}=await Promise.resolve().then(n.bind(n,667)),{db:a}=await Promise.resolve().then(n.bind(n,121));for(const n of e){const e=r(a,"betaCodes",n);await i(e,{code:n,used:!1,usedBy:null,usedAt:null,createdAt:o(),createdFor:"",notes:""}),t++}alert("\u2705 Success!\n\nAll ".concat(t," beta codes added to Firestore!\n\nYou can now:\n1. Check Firebase Console \u2192 Firestore \u2192 betaCodes\n2. Update Firestore security rules (see FIRESTORE_RULES.md)\n3. Start sending codes to beta testers!")),O(!1)}catch(t){console.error("Error adding beta codes:",t),alert("\u274c Error adding beta codes:\n\n".concat(t.message,"\n\nMake sure Firestore security rules allow writes for authenticated users."))}},style:{flex:1,padding:"15px",background:"#00D4FF",color:"#000000",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},children:"\ud83d\ude80 Add Codes to Firestore"}),(0,Ne.jsx)("button",{onClick:()=>O(!1),style:{padding:"15px 30px",background:"rgba(156, 163, 175, 0.1)",color:"#9CA3AF",border:"1px solid rgba(156, 163, 175, 0.3)",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},children:"Cancel"})]})]})})]})});var ce};function fl(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}function ml(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}let gl=function(){const{crypto:e}=globalThis;if(null!==e&&void 0!==e&&e.randomUUID)return gl=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^n()&15>>+e/4).toString(16))};function yl(e){return"object"===typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const vl=e=>{if(e instanceof Error)return e;if("object"===typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch(t){}try{return new Error(JSON.stringify(e))}catch(n){}}return new Error(e)};class bl extends Error{}class wl extends bl{constructor(e,t,n,r){super("".concat(wl.makeMessage(e,t,n))),this.status=e,this.headers=r,this.requestID=null===r||void 0===r?void 0:r.get("request-id"),this.error=t}static makeMessage(e,t,n){const r=null!==t&&void 0!==t&&t.message?"string"===typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?"".concat(e," ").concat(r):e?"".concat(e," status code (no body)"):r||"(no status code or body)"}static generate(e,t,n,r){if(!e||!r)return new xl({message:n,cause:vl(t)});const i=t;return 400===e?new El(e,i,n,r):401===e?new Tl(e,i,n,r):403===e?new Cl(e,i,n,r):404===e?new _l(e,i,n,r):409===e?new Dl(e,i,n,r):422===e?new Al(e,i,n,r):429===e?new Rl(e,i,n,r):e>=500?new Il(e,i,n,r):new wl(e,i,n,r)}}class kl extends wl{constructor(){let{message:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(void 0,void 0,e||"Request was aborted.",void 0)}}class xl extends wl{constructor(e){let{message:t,cause:n}=e;super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class Sl extends xl{constructor(){let{message:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({message:null!==e&&void 0!==e?e:"Request timed out."})}}class El extends wl{}class Tl extends wl{}class Cl extends wl{}class _l extends wl{}class Dl extends wl{}class Al extends wl{}class Rl extends wl{}class Il extends wl{}const Pl=/^[a-z][a-z0-9+.-]*:/i;let Ml=e=>(Ml=Array.isArray,Ml(e)),Nl=Ml;function jl(e){return"object"!==typeof e?{}:null!==e&&void 0!==e?e:{}}const Ol=e=>{try{return JSON.parse(e)}catch(t){return}},Fl="0.69.0";const Ll=()=>{const e="undefined"!==typeof Deno&&null!=Deno.build?"deno":"undefined"!==typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call("undefined"!==typeof globalThis.process?globalThis.process:0)?"node":"unknown";var t,n,r,i,o;if("deno"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fl,"X-Stainless-OS":Bl(Deno.build.os),"X-Stainless-Arch":Wl(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"===typeof Deno.version?Deno.version:null!==(t=null===(n=Deno.version)||void 0===n?void 0:n.deno)&&void 0!==t?t:"unknown"};if("undefined"!==typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"other:".concat(EdgeRuntime),"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fl,"X-Stainless-OS":Bl(null!==(r=globalThis.process.platform)&&void 0!==r?r:"unknown"),"X-Stainless-Arch":Wl(null!==(i=globalThis.process.arch)&&void 0!==i?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":null!==(o=globalThis.process.version)&&void 0!==o?o:"unknown"};const a=function(){if("undefined"===typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const e=n.exec(navigator.userAgent);if(e){const n=e[1]||0,r=e[2]||0,i=e[3]||0;return{browser:t,version:"".concat(n,".").concat(r,".").concat(i)}}}return null}();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"browser:".concat(a.browser),"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};const Wl=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?"other:".concat(e):"unknown",Bl=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?"Other:".concat(e):"Unknown";let Ul;function zl(){const e=globalThis.ReadableStream;if("undefined"===typeof e)throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new e(...n)}function ql(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return zl({start(){},async pull(e){const{done:n,value:r}=await t.next();n?e.close():e.enqueue(r)},async cancel(){var e;await(null===(e=t.return)||void 0===e?void 0:e.call(t))}})}function Hl(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return null!==e&&void 0!==e&&e.done&&t.releaseLock(),e}catch(gh){throw t.releaseLock(),gh}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const Vl=e=>{let{headers:t,body:n}=e;return{bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(n)}};function Kl(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Yl(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Yl(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Yl=function(e){this.s=e,this.n=e.next},Yl.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Yl(e)}function Gl(e,t){this.v=e,this.k=t}function Ql(e){return new Gl(e,0)}function Xl(e){return function(){return new Jl(e.apply(this,arguments))}}function Jl(e){var t,n;function r(t,n){try{var o=e[t](n),a=o.value,s=a instanceof Gl;Promise.resolve(s?a.v:a).then(function(n){if(s){var l="return"===t?"return":"next";if(!a.k||n.done)return r(l,n);n=e[l](n).value}i(o.done?"return":"normal",n)},function(e){r("throw",e)})}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise(function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,i))})},"function"!=typeof e.return&&(this.return=void 0)}let $l,Zl;function ec(e){let t;return(null!==$l&&void 0!==$l?$l:(t=new globalThis.TextEncoder,$l=t.encode.bind(t)))(e)}function tc(e){let t;return(null!==Zl&&void 0!==Zl?Zl:(t=new globalThis.TextDecoder,Zl=t.decode.bind(t)))(e)}var nc,rc;Jl.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Jl.prototype.next=function(e){return this._invoke("next",e)},Jl.prototype.throw=function(e){return this._invoke("throw",e)},Jl.prototype.return=function(e){return this._invoke("return",e)};class ic{constructor(){nc.set(this,void 0),rc.set(this,void 0),fl(this,nc,new Uint8Array,"f"),fl(this,rc,null,"f")}decode(e){if(null==e)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"===typeof e?ec(e):e;fl(this,nc,function(e){let t=0;for(const i of e)t+=i.length;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}([ml(this,nc,"f"),t]),"f");const n=[];let r;for(;null!=(r=oc(ml(this,nc,"f"),ml(this,rc,"f")));){if(r.carriage&&null==ml(this,rc,"f")){fl(this,rc,r.index,"f");continue}if(null!=ml(this,rc,"f")&&(r.index!==ml(this,rc,"f")+1||r.carriage)){n.push(tc(ml(this,nc,"f").subarray(0,ml(this,rc,"f")-1))),fl(this,nc,ml(this,nc,"f").subarray(ml(this,rc,"f")),"f"),fl(this,rc,null,"f");continue}const e=null!==ml(this,rc,"f")?r.preceding-1:r.preceding,t=tc(ml(this,nc,"f").subarray(0,e));n.push(t),fl(this,nc,ml(this,nc,"f").subarray(r.index),"f"),fl(this,rc,null,"f")}return n}flush(){return ml(this,nc,"f").length?this.decode("\n"):[]}}function oc(e,t){for(let n=null!==t&&void 0!==t?t:0;n<e.length;n++){if(10===e[n])return{preceding:n,index:n+1,carriage:!1};if(13===e[n])return{preceding:n,index:n+1,carriage:!0}}return null}function ac(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1}nc=new WeakMap,rc=new WeakMap,ic.NEWLINE_CHARS=new Set(["\n","\r"]),ic.NEWLINE_REGEXP=/\r\n|[\n\r]/g;const sc={off:0,error:200,warn:300,info:400,debug:500},lc=(e,t,n)=>{var r,i;if(e)return r=sc,i=e,Object.prototype.hasOwnProperty.call(r,i)?e:void pc(n).warn("".concat(t," was set to ").concat(JSON.stringify(e),", expected one of ").concat(JSON.stringify(Object.keys(sc))))};function cc(){}function uc(e,t,n){return!t||sc[e]>sc[n]?cc:t[e].bind(t)}const dc={error:cc,warn:cc,info:cc,debug:cc};let hc=new WeakMap;function pc(e){var t;const n=e.logger,r=null!==(t=e.logLevel)&&void 0!==t?t:"off";if(!n)return dc;const i=hc.get(n);if(i&&i[0]===r)return i[1];const o={error:uc("error",n,r),warn:uc("warn",n,r),info:uc("info",n,r),debug:uc("debug",n,r)};return hc.set(n,[r,o]),o}const fc=e=>(e.options&&(e.options=(0,s.A)({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(e=>{let[t,n]=e;return[t,"x-api-key"===t.toLowerCase()||"authorization"===t.toLowerCase()||"cookie"===t.toLowerCase()||"set-cookie"===t.toLowerCase()?"***":n]}))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);var mc,gc,yc;class vc{constructor(e,t,n){this.iterator=e,mc.set(this,void 0),this.controller=t,fl(this,mc,n,"f")}static fromSSEResponse(e,t,n){let r=!1;const i=n?pc(n):console;function o(){return o=Xl(function*(){if(r)throw new bl("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let n=!1;try{var o,a=!1,s=!1;try{for(var l,c=Kl(function(e,t){return bc.apply(this,arguments)}(e,t));a=!(l=yield Ql(c.next())).done;a=!1){const t=l.value;if("completion"===t.event)try{yield JSON.parse(t.data)}catch(gh){throw i.error("Could not parse message into JSON:",t.data),i.error("From chunk:",t.raw),gh}if("message_start"===t.event||"message_delta"===t.event||"message_stop"===t.event||"content_block_start"===t.event||"content_block_delta"===t.event||"content_block_stop"===t.event)try{yield JSON.parse(t.data)}catch(gh){throw i.error("Could not parse message into JSON:",t.data),i.error("From chunk:",t.raw),gh}var u;if("ping"!==t.event)if("error"===t.event)throw new wl(void 0,null!==(u=Ol(t.data))&&void 0!==u?u:t.data,void 0,e.headers)}}catch(d){s=!0,o=d}finally{try{a&&null!=c.return&&(yield Ql(c.return()))}finally{if(s)throw o}}n=!0}catch(gh){if(yl(gh))return;throw gh}finally{n||t.abort()}}),o.apply(this,arguments)}return new vc(function(){return o.apply(this,arguments)},t,n)}static fromReadableStream(e,t,n){let r=!1;function i(){return(i=Xl(function*(){const t=new ic,n=Hl(e);var r,i=!1,o=!1;try{for(var a,s=Kl(n);i=!(a=yield Ql(s.next())).done;i=!1){const e=a.value;for(const n of t.decode(e))yield n}}catch(l){o=!0,r=l}finally{try{i&&null!=s.return&&(yield Ql(s.return()))}finally{if(o)throw r}}for(const e of t.flush())yield e})).apply(this,arguments)}function o(){return o=Xl(function*(){if(r)throw new bl("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let e=!1;try{var n,o=!1,a=!1;try{for(var s,l=Kl(function(){return i.apply(this,arguments)}());o=!(s=yield Ql(l.next())).done;o=!1){const t=s.value;e||t&&(yield JSON.parse(t))}}catch(c){a=!0,n=c}finally{try{o&&null!=l.return&&(yield Ql(l.return()))}finally{if(a)throw n}}e=!0}catch(gh){if(yl(gh))return;throw gh}finally{e||t.abort()}}),o.apply(this,arguments)}return new vc(function(){return o.apply(this,arguments)},t,n)}[(mc=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=r=>({next:()=>{if(0===r.length){const r=n.next();e.push(r),t.push(r)}return r.shift()}});return[new vc(()=>r(e),this.controller,ml(this,mc,"f")),new vc(()=>r(t),this.controller,ml(this,mc,"f"))]}toReadableStream(){const e=this;let t;return zl({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:n,done:r}=await t.next();if(r)return e.close();const i=ec(JSON.stringify(n)+"\n");e.enqueue(i)}catch(n){e.error(n)}},async cancel(){var e,n;await(null===(e=(n=t).return)||void 0===e?void 0:e.call(n))}})}}function bc(){return bc=Xl(function*(e,t){if(!e.body){if(t.abort(),"undefined"!==typeof globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new bl("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new bl("Attempted to iterate over a response with no body")}const n=new kc,r=new ic,i=Hl(e.body);var o,a=!1,s=!1;try{for(var l,c=Kl(function(e){return wc.apply(this,arguments)}(i));a=!(l=yield Ql(c.next())).done;a=!1){const e=l.value;for(const t of r.decode(e)){const e=n.decode(t);e&&(yield e)}}}catch(u){s=!0,o=u}finally{try{a&&null!=c.return&&(yield Ql(c.return()))}finally{if(s)throw o}}for(const d of r.flush()){const e=n.decode(d);e&&(yield e)}}),bc.apply(this,arguments)}function wc(){return wc=Xl(function*(e){let t=new Uint8Array;var n,r=!1,i=!1;try{for(var o,a=Kl(e);r=!(o=yield Ql(a.next())).done;r=!1){const e=o.value;{if(null==e)continue;const n=e instanceof ArrayBuffer?new Uint8Array(e):"string"===typeof e?ec(e):e;let r,i=new Uint8Array(t.length+n.length);for(i.set(t),i.set(n,t.length),t=i;-1!==(r=ac(t));)yield t.slice(0,r),t=t.slice(r)}}}catch(s){i=!0,n=s}finally{try{r&&null!=a.return&&(yield Ql(a.return()))}finally{if(i)throw n}}t.length>0&&(yield t)}),wc.apply(this,arguments)}class kc{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=function(e,t){const n=e.indexOf(t);if(-1!==n)return[e.substring(0,n),t,e.substring(n+t.length)];return[e,"",""]}(e,":");return r.startsWith(" ")&&(r=r.substring(1)),"event"===t?this.event=r:"data"===t&&this.data.push(r),null}}async function xc(e,t){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=t,a=await(async r=>{if(t.options.stream)return pc(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller):vc.fromSSEResponse(n,t.controller);if(204===n.status)return null;if(t.options.__binaryResponse)return n;const i=n.headers.get("content-type"),o=null===i||void 0===i||null===(r=i.split(";")[0])||void 0===r?void 0:r.trim();if((null===o||void 0===o?void 0:o.includes("application/json"))||(null===o||void 0===o?void 0:o.endsWith("+json"))){return Sc(await n.json(),n)}return await n.text()})();return pc(e).debug("[".concat(r,"] response parsed"),fc({retryOfRequestLogID:i,url:n.url,status:n.status,body:a,durationMs:Date.now()-o})),a}function Sc(e,t){return!e||"object"!==typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("request-id"),enumerable:!1})}class Ec extends Promise{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xc;super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=n,gc.set(this,void 0),fl(this,gc,e,"f")}_thenUnwrap(e){return new Ec(ml(this,gc,"f"),this.responsePromise,async(t,n)=>Sc(e(await this.parseResponse(t,n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(ml(this,gc,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}gc=new WeakMap;class Tc{constructor(e,t,n,r){yc.set(this,void 0),fl(this,yc,e,"f"),this.options=r,this.response=t,this.body=n}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageRequestOptions()}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new bl("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await ml(this,yc,"f").requestAPIList(this.constructor,e)}iterPages(){var e=this;return Xl(function*(){let t=e;for(yield t;t.hasNextPage();)t=yield Ql(t.getNextPage()),yield t})()}[(yc=new WeakMap,Symbol.asyncIterator)](){var e=this;return Xl(function*(){var t,n=!1,r=!1;try{for(var i,o=Kl(e.iterPages());n=!(i=yield Ql(o.next())).done;n=!1){const e=i.value;for(const t of e.getPaginatedItems())yield t}}catch(a){r=!0,t=a}finally{try{n&&null!=o.return&&(yield Ql(o.return()))}finally{if(r)throw t}}})()}}class Cc extends Ec{constructor(e,t,n){super(e,t,async(e,t)=>new n(e,t.response,await xc(e,t),t.options))}[Symbol.asyncIterator](){var e=this;return Xl(function*(){const t=yield Ql(e);var n,r=!1,i=!1;try{for(var o,a=Kl(t);r=!(o=yield Ql(a.next())).done;r=!1){const e=o.value;yield e}}catch(s){i=!0,n=s}finally{try{r&&null!=a.return&&(yield Ql(a.return()))}finally{if(i)throw n}}})()}}class _c extends Tc{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1,this.first_id=n.first_id||null,this.last_id=n.last_id||null}getPaginatedItems(){var e;return null!==(e=this.data)&&void 0!==e?e:[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){var e;if(null!==(e=this.options.query)&&void 0!==e&&e.before_id){const e=this.first_id;return e?(0,s.A)((0,s.A)({},this.options),{},{query:(0,s.A)((0,s.A)({},jl(this.options.query)),{},{before_id:e})}):null}const t=this.last_id;return t?(0,s.A)((0,s.A)({},this.options),{},{query:(0,s.A)((0,s.A)({},jl(this.options.query)),{},{after_id:t})}):null}}class Dc extends Tc{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1,this.next_page=n.next_page||null}getPaginatedItems(){var e;return null!==(e=this.data)&&void 0!==e?e:[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){const e=this.next_page;return e?(0,s.A)((0,s.A)({},this.options),{},{query:(0,s.A)((0,s.A)({},jl(this.options.query)),{},{page:e})}):null}}const Ac=()=>{if("undefined"===typeof File){var e;const{process:t}=globalThis,n="string"===typeof(null===t||void 0===t||null===(e=t.versions)||void 0===e?void 0:e.node)&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Rc(e,t,n){return Ac(),new File(e,null!==t&&void 0!==t?t:"unknown_file",n)}function Ic(e){return("object"===typeof e&&null!==e&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const Pc=e=>null!=e&&"object"===typeof e&&"function"===typeof e[Symbol.asyncIterator],Mc=async(e,t)=>(0,s.A)((0,s.A)({},e),{},{body:await jc(e.body,t)}),Nc=new WeakMap;const jc=async(e,t)=>{if(!await function(e){const t="function"===typeof e?e:e.fetch,n=Nc.get(t);if(n)return n;const r=(async()=>{try{const e="Response"in t?t.Response:(await t("data:,")).constructor,n=new FormData;return n.toString()!==await new e(n).text()}catch(e){return!0}})();return Nc.set(t,r),r}(t))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(e||{}).map(e=>{let[t,r]=e;return Fc(n,t,r)})),n},Oc=e=>e instanceof Blob&&"name"in e,Fc=async(e,t,n)=>{if(void 0!==n){if(null==n)throw new TypeError('Received null for "'.concat(t,"\"; to pass null in FormData, you must use the string 'null'"));if("string"===typeof n||"number"===typeof n||"boolean"===typeof n)e.append(t,String(n));else if(n instanceof Response){let r={};const i=n.headers.get("Content-Type");i&&(r={type:i}),e.append(t,Rc([await n.blob()],Ic(n),r))}else if(Pc(n))e.append(t,Rc([await new Response(ql(n)).blob()],Ic(n)));else if(Oc(n))e.append(t,Rc([n],Ic(n),{type:n.type}));else if(Array.isArray(n))await Promise.all(n.map(n=>Fc(e,t+"[]",n)));else{if("object"!==typeof n)throw new TypeError("Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ".concat(n," instead"));await Promise.all(Object.entries(n).map(n=>{let[r,i]=n;return Fc(e,"".concat(t,"[").concat(r,"]"),i)}))}}},Lc=e=>null!=e&&"object"===typeof e&&"number"===typeof e.size&&"string"===typeof e.type&&"function"===typeof e.text&&"function"===typeof e.slice&&"function"===typeof e.arrayBuffer;async function Wc(e){let t=[];if("string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(Lc(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else{if(!Pc(e)){var n;const t=null===e||void 0===e||null===(n=e.constructor)||void 0===n?void 0:n.name;throw new Error("Unexpected data type: ".concat(typeof e).concat(t?"; constructor: ".concat(t):"").concat(function(e){if("object"!==typeof e||null===e)return"";const t=Object.getOwnPropertyNames(e);return"; props: [".concat(t.map(e=>'"'.concat(e,'"')).join(", "),"]")}(e)))}var r,i=!1,o=!1;try{for(var a,s=Kl(e);i=!(a=await s.next()).done;i=!1){const e=a.value;t.push(...await Wc(e))}}catch(l){o=!0,r=l}finally{try{i&&null!=s.return&&await s.return()}finally{if(o)throw r}}}return t}class Bc{constructor(e){this._client=e}}function Uc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const zc=Symbol.for("brand.privateNullableHeaders");function*qc(e){if(!e)return;if(zc in e){const{values:t,nulls:n}=e;yield*t.entries();for(const e of n)yield[e,null];return}let t,n=!1;e instanceof Headers?t=e.entries():Nl(e)?t=e:(n=!0,t=Object.entries(null!==e&&void 0!==e?e:{}));for(let r of t){const e=r[0];if("string"!==typeof e)throw new TypeError("expected header name to be a string");const t=Nl(r[1])?r[1]:[r[1]];let i=!1;for(const r of t)void 0!==r&&(n&&!i&&(i=!0,yield[e,null]),yield[e,r])}}const Hc=e=>{const t=new Headers,n=new Set;for(const r of e){const e=new Set;for(const[i,o]of qc(r)){const r=i.toLowerCase();e.has(r)||(t.delete(i),e.add(r)),null===o?(t.delete(i),n.add(r)):(t.append(i,o),n.delete(r))}}return{[zc]:!0,values:t,nulls:n}};function Vc(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Kc=Object.freeze(Object.create(null)),Yc=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vc;return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(1===t.length)return t[0];let o=!1;const a=[],s=t.reduce((t,n,i)=>{var s,l,c;/[?#]/.test(n)&&(o=!0);const u=r[i];let d=(o?encodeURIComponent:e)(""+u);return i!==r.length&&(null==u||"object"===typeof u&&u.toString===(null===(s=Object.getPrototypeOf(null!==(l=Object.getPrototypeOf(null!==(c=u.hasOwnProperty)&&void 0!==c?c:Kc))&&void 0!==l?l:Kc))||void 0===s?void 0:s.toString))&&(d=u+"",a.push({start:t.length+n.length,length:d.length,error:"Value of type ".concat(Object.prototype.toString.call(u).slice(8,-1)," is not a valid path parameter")})),t+n+(i===r.length?"":d)},""),l=s.split(/[?#]/,1)[0],c=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;let u;for(;null!==(u=c.exec(l));)a.push({start:u.index,length:u[0].length,error:'Value "'.concat(u[0],"\" can't be safely passed as a path parameter")});if(a.sort((e,t)=>e.start-t.start),a.length>0){let e=0;const t=a.reduce((t,n)=>{const r=" ".repeat(n.start-e),i="^".repeat(n.length);return e=n.start+n.length,t+r+i},"");throw new bl("Path parameters result in path with invalid segments:\n".concat(a.map(e=>e.error).join("\n"),"\n").concat(s,"\n").concat(t))}return s}},Gc=Yc(Vc);var Qc,Xc,Jc;const $c=["betas"],Zc=["betas"];class eu extends Bc{list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=null!==e&&void 0!==e?e:{},{betas:r}=n,i=(0,Fe.A)(n,$c);return this._client.getAPIList("/v1/files",_c,(0,s.A)((0,s.A)({query:i},t),{},{headers:Hc([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"files-api-2025-04-14"].toString()},null===t||void 0===t?void 0:t.headers])}))}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.delete(Gc(Qc||(Qc=Uc(["/v1/files/",""])),e),(0,s.A)((0,s.A)({},n),{},{headers:Hc([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"files-api-2025-04-14"].toString()},null===n||void 0===n?void 0:n.headers])}))}download(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.get(Gc(Xc||(Xc=Uc(["/v1/files/","/content"])),e),(0,s.A)((0,s.A)({},n),{},{headers:Hc([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},null===n||void 0===n?void 0:n.headers]),__binaryResponse:!0}))}retrieveMetadata(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.get(Gc(Jc||(Jc=Uc(["/v1/files/",""])),e),(0,s.A)((0,s.A)({},n),{},{headers:Hc([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"files-api-2025-04-14"].toString()},null===n||void 0===n?void 0:n.headers])}))}upload(e,t){const{betas:n}=e,r=(0,Fe.A)(e,Zc);return this._client.post("/v1/files",Mc((0,s.A)((0,s.A)({body:r},t),{},{headers:Hc([{"anthropic-beta":[...null!==n&&void 0!==n?n:[],"files-api-2025-04-14"].toString()},null===t||void 0===t?void 0:t.headers])}),this._client))}}const tu=["betas"];var nu;class ru extends Bc{retrieve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.get(Gc(nu||(nu=Uc(["/v1/models/","?beta=true"])),e),(0,s.A)((0,s.A)({},n),{},{headers:Hc([(0,s.A)({},null!=(null===r||void 0===r?void 0:r.toString())?{"anthropic-beta":null===r||void 0===r?void 0:r.toString()}:void 0),null===n||void 0===n?void 0:n.headers])}))}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=null!==e&&void 0!==e?e:{},{betas:r}=n,i=(0,Fe.A)(n,tu);return this._client.getAPIList("/v1/models?beta=true",_c,(0,s.A)((0,s.A)({query:i},t),{},{headers:Hc([(0,s.A)({},null!=(null===r||void 0===r?void 0:r.toString())?{"anthropic-beta":null===r||void 0===r?void 0:r.toString()}:void 0),null===t||void 0===t?void 0:t.headers])}))}}const iu={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192,"claude-opus-4-1-20250805":8192,"anthropic.claude-opus-4-1-20250805-v1:0":8192,"claude-opus-4-1@20250805":8192};function ou(e,t){var n;return t&&"parse"in(null!==(n=t.output_format)&&void 0!==n?n:{})?au(e,t):(0,s.A)((0,s.A)({},e),{},{content:e.content.map(e=>"text"===e.type?(0,s.A)((0,s.A)({},e),{},{parsed:null}):e),parsed_output:null})}function au(e,t){let n=null;const r=e.content.map(e=>{if("text"===e.type){const r=function(e,t){var n;if("json_schema"!==(null===(n=e.output_format)||void 0===n?void 0:n.type))return null;try{return"parse"in e.output_format?e.output_format.parse(t):JSON.parse(t)}catch(r){throw new bl("Failed to parse structured output: ".concat(r))}}(t,e.text);return null===n&&(n=r),(0,s.A)((0,s.A)({},e),{},{parsed:r})}return e});return(0,s.A)((0,s.A)({},e),{},{content:r,parsed_output:n})}const su=e=>{if(0===e.length)return e;let t=e[e.length-1];switch(t.type){case"separator":return e=e.slice(0,e.length-1),su(e);case"number":let n=t.value[t.value.length-1];if("."===n||"-"===n)return e=e.slice(0,e.length-1),su(e);case"string":let r=e[e.length-2];if("delimiter"===(null===r||void 0===r?void 0:r.type))return e=e.slice(0,e.length-1),su(e);if("brace"===(null===r||void 0===r?void 0:r.type)&&"{"===r.value)return e=e.slice(0,e.length-1),su(e);break;case"delimiter":return e=e.slice(0,e.length-1),su(e)}return e},lu=e=>JSON.parse((e=>{let t="";return e.map(e=>{"string"===e.type?t+='"'+e.value+'"':t+=e.value}),t})((e=>{let t=[];return e.map(e=>{"brace"===e.type&&("{"===e.value?t.push("}"):t.splice(t.lastIndexOf("}"),1)),"paren"===e.type&&("["===e.value?t.push("]"):t.splice(t.lastIndexOf("]"),1))}),t.length>0&&t.reverse().map(t=>{"}"===t?e.push({type:"brace",value:"}"}):"]"===t&&e.push({type:"paren",value:"]"})}),e})(su((e=>{let t=0,n=[];for(;t<e.length;){let r=e[t];if("\\"===r){t++;continue}if("{"===r){n.push({type:"brace",value:"{"}),t++;continue}if("}"===r){n.push({type:"brace",value:"}"}),t++;continue}if("["===r){n.push({type:"paren",value:"["}),t++;continue}if("]"===r){n.push({type:"paren",value:"]"}),t++;continue}if(":"===r){n.push({type:"separator",value:":"}),t++;continue}if(","===r){n.push({type:"delimiter",value:","}),t++;continue}if('"'===r){let i="",o=!1;for(r=e[++t];'"'!==r;){if(t===e.length){o=!0;break}if("\\"===r){if(t++,t===e.length){o=!0;break}i+=r+e[t],r=e[++t]}else i+=r,r=e[++t]}r=e[++t],o||n.push({type:"string",value:i});continue}if(r&&/\s/.test(r)){t++;continue}let i=/[0-9]/;if(r&&i.test(r)||"-"===r||"."===r){let o="";for("-"===r&&(o+=r,r=e[++t]);r&&i.test(r)||"."===r;)o+=r,r=e[++t];n.push({type:"number",value:o});continue}let o=/[a-z]/i;if(r&&o.test(r)){let i="";for(;r&&o.test(r)&&t!==e.length;)i+=r,r=e[++t];if("true"!=i&&"false"!=i&&"null"!==i){t++;continue}n.push({type:"name",value:i});continue}t++}return n})(e)))));var cu,uu,du,hu,pu,fu,mu,gu,yu,vu,bu,wu,ku,xu,Su,Eu,Tu,Cu,_u,Du,Au,Ru,Iu;const Pu="__json_buf";function Mu(e){return"tool_use"===e.type||"server_tool_use"===e.type||"mcp_tool_use"===e.type}class Nu{constructor(e){cu.add(this),this.messages=[],this.receivedMessages=[],uu.set(this,void 0),du.set(this,null),this.controller=new AbortController,hu.set(this,void 0),pu.set(this,()=>{}),fu.set(this,()=>{}),mu.set(this,void 0),gu.set(this,()=>{}),yu.set(this,()=>{}),vu.set(this,{}),bu.set(this,!1),wu.set(this,!1),ku.set(this,!1),xu.set(this,!1),Su.set(this,void 0),Eu.set(this,void 0),_u.set(this,e=>{if(fl(this,wu,!0,"f"),yl(e)&&(e=new kl),e instanceof kl)return fl(this,ku,!0,"f"),this._emit("abort",e);if(e instanceof bl)return this._emit("error",e);if(e instanceof Error){const t=new bl(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new bl(String(e)))}),fl(this,hu,new Promise((e,t)=>{fl(this,pu,e,"f"),fl(this,fu,t,"f")}),"f"),fl(this,mu,new Promise((e,t)=>{fl(this,gu,e,"f"),fl(this,yu,t,"f")}),"f"),ml(this,hu,"f").catch(()=>{}),ml(this,mu,"f").catch(()=>{}),fl(this,du,e,"f")}get response(){return ml(this,Su,"f")}get request_id(){return ml(this,Eu,"f")}async withResponse(){const e=await ml(this,hu,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const t=new Nu(null);return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,n){const r=new Nu(t);for(const i of t.messages)r._addMessageParam(i);return fl(r,du,(0,s.A)((0,s.A)({},t),{},{stream:!0}),"f"),r._run(()=>r._createMessage(e,(0,s.A)((0,s.A)({},t),{},{stream:!0}),(0,s.A)((0,s.A)({},n),{},{headers:(0,s.A)((0,s.A)({},null===n||void 0===n?void 0:n.headers),{},{"X-Stainless-Helper-Method":"stream"})}))),r}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},ml(this,_u,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,n){const r=null===n||void 0===n?void 0:n.signal;let i;r&&(r.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),r.addEventListener("abort",i));try{var o;ml(this,cu,"m",Du).call(this);const{response:r,data:i}=await e.create((0,s.A)((0,s.A)({},t),{},{stream:!0}),(0,s.A)((0,s.A)({},n),{},{signal:this.controller.signal})).withResponse();this._connected(r);var a,l=!1,c=!1;try{for(var u,d=Kl(i);l=!(u=await d.next()).done;l=!1){const e=u.value;ml(this,cu,"m",Au).call(this,e)}}catch(h){c=!0,a=h}finally{try{l&&null!=d.return&&await d.return()}finally{if(c)throw a}}if(null!==(o=i.controller.signal)&&void 0!==o&&o.aborted)throw new kl;ml(this,cu,"m",Ru).call(this)}finally{r&&i&&r.removeEventListener("abort",i)}}_connected(e){this.ended||(fl(this,Su,e,"f"),fl(this,Eu,null===e||void 0===e?void 0:e.headers.get("request-id"),"f"),ml(this,pu,"f").call(this,e),this._emit("connect"))}get ended(){return ml(this,bu,"f")}get errored(){return ml(this,wu,"f")}get aborted(){return ml(this,ku,"f")}abort(){this.controller.abort()}on(e,t){return(ml(this,vu,"f")[e]||(ml(this,vu,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=ml(this,vu,"f")[e];if(!n)return this;const r=n.findIndex(e=>e.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(ml(this,vu,"f")[e]||(ml(this,vu,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{fl(this,xu,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)})}async done(){fl(this,xu,!0,"f"),await ml(this,mu,"f")}get currentMessage(){return ml(this,uu,"f")}async finalMessage(){return await this.done(),ml(this,cu,"m",Tu).call(this)}async finalText(){return await this.done(),ml(this,cu,"m",Cu).call(this)}_emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(ml(this,bu,"f"))return;"end"===e&&(fl(this,bu,!0,"f"),ml(this,gu,"f").call(this));const i=ml(this,vu,"f")[e];if(i&&(ml(this,vu,"f")[e]=i.filter(e=>!e.once),i.forEach(e=>{let{listener:t}=e;return t(...n)})),"abort"===e){const e=n[0];return ml(this,xu,"f")||null!==i&&void 0!==i&&i.length||Promise.reject(e),ml(this,fu,"f").call(this,e),ml(this,yu,"f").call(this,e),void this._emit("end")}if("error"===e){const e=n[0];ml(this,xu,"f")||null!==i&&void 0!==i&&i.length||Promise.reject(e),ml(this,fu,"f").call(this,e),ml(this,yu,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",ml(this,cu,"m",Tu).call(this))}async _fromReadableStream(e,t){const n=null===t||void 0===t?void 0:t.signal;let r;n&&(n.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),n.addEventListener("abort",r));try{var i;ml(this,cu,"m",Du).call(this),this._connected(null);const t=vc.fromReadableStream(e,this.controller);var o,a=!1,s=!1;try{for(var l,c=Kl(t);a=!(l=await c.next()).done;a=!1){const e=l.value;ml(this,cu,"m",Au).call(this,e)}}catch(u){s=!0,o=u}finally{try{a&&null!=c.return&&await c.return()}finally{if(s)throw o}}if(null!==(i=t.controller.signal)&&void 0!==i&&i.aborted)throw new kl;ml(this,cu,"m",Ru).call(this)}finally{n&&r&&n.removeEventListener("abort",r)}}[(uu=new WeakMap,du=new WeakMap,hu=new WeakMap,pu=new WeakMap,fu=new WeakMap,mu=new WeakMap,gu=new WeakMap,yu=new WeakMap,vu=new WeakMap,bu=new WeakMap,wu=new WeakMap,ku=new WeakMap,xu=new WeakMap,Su=new WeakMap,Eu=new WeakMap,_u=new WeakMap,cu=new WeakSet,Tu=function(){if(0===this.receivedMessages.length)throw new bl("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},Cu=function(){if(0===this.receivedMessages.length)throw new bl("stream ended without producing a Message with role=assistant");const e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new bl("stream ended without producing a content block with type=text");return e.join(" ")},Du=function(){this.ended||fl(this,uu,void 0,"f")},Au=function(e){if(this.ended)return;const t=ml(this,cu,"m",Iu).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{const r=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===r.type&&this._emit("text",e.delta.text,r.text||"");break;case"citations_delta":var n;if("text"===r.type)this._emit("citation",e.delta.citation,null!==(n=r.citations)&&void 0!==n?n:[]);break;case"input_json_delta":Mu(r)&&r.input&&this._emit("inputJson",e.delta.partial_json,r.input);break;case"thinking_delta":"thinking"===r.type&&this._emit("thinking",e.delta.thinking,r.thinking);break;case"signature_delta":"thinking"===r.type&&this._emit("signature",r.signature);break;default:e.delta}break}case"message_stop":this._addMessageParam(t),this._addMessage(ou(t,ml(this,du,"f")),!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":fl(this,uu,t,"f")}},Ru=function(){if(this.ended)throw new bl("stream has ended, this shouldn't happen");const e=ml(this,uu,"f");if(!e)throw new bl("request ended without sending any chunks");return fl(this,uu,void 0,"f"),ou(e,ml(this,du,"f"))},Iu=function(e){let t=ml(this,uu,"f");if("message_start"===e.type){if(t)throw new bl("Unexpected event order, got ".concat(e.type,' before receiving "message_stop"'));return e.message}if(!t)throw new bl("Unexpected event order, got ".concat(e.type,' before "message_start"'));switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.container=e.delta.container,t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,t.context_management=e.context_management,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push(e.content_block),t;case"content_block_delta":{const i=t.content.at(e.index);switch(e.delta.type){case"text_delta":"text"===(null===i||void 0===i?void 0:i.type)&&(t.content[e.index]=(0,s.A)((0,s.A)({},i),{},{text:(i.text||"")+e.delta.text}));break;case"citations_delta":var n;if("text"===(null===i||void 0===i?void 0:i.type))t.content[e.index]=(0,s.A)((0,s.A)({},i),{},{citations:[...null!==(n=i.citations)&&void 0!==n?n:[],e.delta.citation]});break;case"input_json_delta":if(i&&Mu(i)){let n=i[Pu]||"";n+=e.delta.partial_json;const o=(0,s.A)({},i);if(Object.defineProperty(o,Pu,{value:n,enumerable:!1,writable:!0}),n)try{o.input=lu(n)}catch(r){const e=new bl("Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ".concat(r,". JSON: ").concat(n));ml(this,_u,"f").call(this,e)}t.content[e.index]=o}break;case"thinking_delta":"thinking"===(null===i||void 0===i?void 0:i.type)&&(t.content[e.index]=(0,s.A)((0,s.A)({},i),{},{thinking:i.thinking+e.delta.thinking}));break;case"signature_delta":"thinking"===(null===i||void 0===i?void 0:i.type)&&(t.content[e.index]=(0,s.A)((0,s.A)({},i),{},{signature:e.delta.signature}));break;default:e.delta}return t}}},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("streamEvent",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0});return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new vc(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}const ju=["max_iterations"];var Ou,Fu,Lu,Wu,Bu,Uu,zu,qu,Hu,Vu,Ku,Yu,Gu;function Qu(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}class Xu{constructor(e,t,n){Ou.add(this),this.client=e,Fu.set(this,!1),Lu.set(this,!1),Wu.set(this,void 0),Bu.set(this,void 0),Uu.set(this,void 0),zu.set(this,void 0),qu.set(this,void 0),Hu.set(this,0),fl(this,Wu,{params:(0,s.A)((0,s.A)({},t),{},{messages:structuredClone(t.messages)})},"f"),fl(this,Bu,(0,s.A)((0,s.A)({},n),{},{headers:Hc([{"x-stainless-helper":"BetaToolRunner"},null===n||void 0===n?void 0:n.headers])}),"f"),fl(this,qu,Qu(),"f")}[(Fu=new WeakMap,Lu=new WeakMap,Wu=new WeakMap,Bu=new WeakMap,Uu=new WeakMap,zu=new WeakMap,qu=new WeakMap,Hu=new WeakMap,Ou=new WeakSet,Symbol.asyncIterator)](){var e=this;return Xl(function*(){var t;if(ml(e,Fu,"f"))throw new bl("Cannot iterate over a consumed stream");fl(e,Fu,!0,"f"),fl(e,Lu,!0,"f"),fl(e,zu,void 0,"f");try{for(;;){let n;try{if(ml(e,Wu,"f").params.max_iterations&&ml(e,Hu,"f")>=ml(e,Wu,"f").params.max_iterations)break;fl(e,Lu,!1,"f"),fl(e,Uu,void 0,"f"),fl(e,zu,void 0,"f"),fl(e,Hu,(t=ml(e,Hu,"f"),++t),"f");const r=ml(e,Wu,"f").params,{max_iterations:i}=r,o=(0,Fe.A)(r,ju);if(o.stream?(n=e.client.beta.messages.stream((0,s.A)({},o),ml(e,Bu,"f")),fl(e,Uu,n.finalMessage(),"f"),ml(e,Uu,"f").catch(()=>{}),yield n):(fl(e,Uu,e.client.beta.messages.create((0,s.A)((0,s.A)({},o),{},{stream:!1}),ml(e,Bu,"f")),"f"),yield ml(e,Uu,"f")),!ml(e,Lu,"f")){const{role:t,content:n}=yield Ql(ml(e,Uu,"f"));ml(e,Wu,"f").params.messages.push({role:t,content:n})}const a=yield Ql(ml(e,Ou,"m",Vu).call(e,ml(e,Wu,"f").params.messages.at(-1)));if(a&&ml(e,Wu,"f").params.messages.push(a),!a&&!ml(e,Lu,"f"))break}finally{n&&n.abort()}}if(!ml(e,Uu,"f"))throw new bl("ToolRunner concluded without a message from the server");ml(e,qu,"f").resolve(yield Ql(ml(e,Uu,"f")))}catch(n){throw fl(e,Fu,!1,"f"),ml(e,qu,"f").promise.catch(()=>{}),ml(e,qu,"f").reject(n),fl(e,qu,Qu(),"f"),n}})()}setMessagesParams(e){ml(this,Wu,"f").params="function"===typeof e?e(ml(this,Wu,"f").params):e,fl(this,Lu,!0,"f"),fl(this,zu,void 0,"f")}async generateToolResponse(){var e;const t=null!==(e=await ml(this,Uu,"f"))&&void 0!==e?e:this.params.messages.at(-1);return t?ml(this,Ou,"m",Vu).call(this,t):null}done(){return ml(this,qu,"f").promise}async runUntilDone(){if(!ml(this,Fu,"f")){var e,t=!1,n=!1;try{for(var r,i=Kl(this);t=!(r=await i.next()).done;t=!1){r.value}}catch(o){n=!0,e=o}finally{try{t&&null!=i.return&&await i.return()}finally{if(n)throw e}}}return this.done()}get params(){return ml(this,Wu,"f").params}pushMessages(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.setMessagesParams(e=>(0,s.A)((0,s.A)({},e),{},{messages:[...e.messages,...t]}))}then(e,t){return this.runUntilDone().then(e,t)}}Vu=async function(e){return void 0!==ml(this,zu,"f")||fl(this,zu,async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.messages.at(-1);if(!t||"assistant"!==t.role||!t.content||"string"===typeof t.content)return null;const n=t.content.filter(e=>"tool_use"===e.type);if(0===n.length)return null;const r=await Promise.all(n.map(async t=>{const n=e.tools.find(e=>e.name===t.name);if(!n||!("run"in n))return{type:"tool_result",tool_use_id:t.id,content:"Error: Tool '".concat(t.name,"' not found"),is_error:!0};try{let e=t.input;"parse"in n&&n.parse&&(e=n.parse(e));const r=await n.run(e);return{type:"tool_result",tool_use_id:t.id,content:r}}catch(r){return{type:"tool_result",tool_use_id:t.id,content:"Error: ".concat(r instanceof Error?r.message:String(r)),is_error:!0}}}));return{role:"user",content:r}}(ml(this,Wu,"f").params,e),"f"),ml(this,zu,"f")};class Ju{constructor(e,t){this.iterator=e,this.controller=t}decoder(){var e=this;return Xl(function*(){const t=new ic;var n,r=!1,i=!1;try{for(var o,a=Kl(e.iterator);r=!(o=yield Ql(a.next())).done;r=!1){const e=o.value;for(const n of t.decode(e))yield JSON.parse(n)}}catch(s){i=!0,n=s}finally{try{r&&null!=a.return&&(yield Ql(a.return()))}finally{if(i)throw n}}for(const e of t.flush())yield JSON.parse(e)})()}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,t){if(!e.body){if(t.abort(),"undefined"!==typeof globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new bl("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new bl("Attempted to iterate over a response with no body")}return new Ju(Hl(e.body),t)}}const $u=["betas"],Zu=["betas"];class ed extends Bc{create(e,t){const{betas:n}=e,r=(0,Fe.A)(e,$u);return this._client.post("/v1/messages/batches?beta=true",(0,s.A)((0,s.A)({body:r},t),{},{headers:Hc([{"anthropic-beta":[...null!==n&&void 0!==n?n:[],"message-batches-2024-09-24"].toString()},null===t||void 0===t?void 0:t.headers])}))}retrieve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.get(Gc(Ku||(Ku=Uc(["/v1/messages/batches/","?beta=true"])),e),(0,s.A)((0,s.A)({},n),{},{headers:Hc([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"message-batches-2024-09-24"].toString()},null===n||void 0===n?void 0:n.headers])}))}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=null!==e&&void 0!==e?e:{},{betas:r}=n,i=(0,Fe.A)(n,Zu);return this._client.getAPIList("/v1/messages/batches?beta=true",_c,(0,s.A)((0,s.A)({query:i},t),{},{headers:Hc([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"message-batches-2024-09-24"].toString()},null===t||void 0===t?void 0:t.headers])}))}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.delete(Gc(Yu||(Yu=Uc(["/v1/messages/batches/","?beta=true"])),e),(0,s.A)((0,s.A)({},n),{},{headers:Hc([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"message-batches-2024-09-24"].toString()},null===n||void 0===n?void 0:n.headers])}))}cancel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.post(Gc(Gu||(Gu=Uc(["/v1/messages/batches/","/cancel?beta=true"])),e),(0,s.A)((0,s.A)({},n),{},{headers:Hc([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"message-batches-2024-09-24"].toString()},null===n||void 0===n?void 0:n.headers])}))}async results(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=await this.retrieve(e);if(!r.results_url)throw new bl("No batch `results_url`; Has it finished processing? ".concat(r.processing_status," - ").concat(r.id));const{betas:i}=null!==t&&void 0!==t?t:{};return this._client.get(r.results_url,(0,s.A)((0,s.A)({},n),{},{headers:Hc([{"anthropic-beta":[...null!==i&&void 0!==i?i:[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},null===n||void 0===n?void 0:n.headers]),stream:!0,__binaryResponse:!0}))._thenUnwrap((e,t)=>Ju.fromResponse(t.response,t.controller))}}const td=["betas"],nd=["betas"],rd={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026"};class id extends Bc{constructor(){super(...arguments),this.batches=new ed(this._client)}create(e,t){var n;const{betas:r}=e,i=(0,Fe.A)(e,td);i.model in rd&&console.warn("The model '".concat(i.model,"' is deprecated and will reach end-of-life on ").concat(rd[i.model],"\nPlease migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information."));let o=this._client._options.timeout;if(!i.stream&&null==o){var a;const e=null!==(a=iu[i.model])&&void 0!==a?a:void 0;o=this._client.calculateNonstreamingTimeout(i.max_tokens,e)}return this._client.post("/v1/messages?beta=true",(0,s.A)((0,s.A)({body:i,timeout:null!==o&&void 0!==o?o:6e5},t),{},{headers:Hc([(0,s.A)({},null!=(null===r||void 0===r?void 0:r.toString())?{"anthropic-beta":null===r||void 0===r?void 0:r.toString()}:void 0),null===t||void 0===t?void 0:t.headers]),stream:null!==(n=e.stream)&&void 0!==n&&n}))}parse(e,t){var n,r;return t=(0,s.A)((0,s.A)({},t),{},{headers:Hc([{"anthropic-beta":[...null!==(n=e.betas)&&void 0!==n?n:[],"structured-outputs-2025-09-17"].toString()},null===(r=t)||void 0===r?void 0:r.headers])}),this.create(e,t).then(t=>au(t,e))}stream(e,t){return Nu.createMessage(this,e,t)}countTokens(e,t){const{betas:n}=e,r=(0,Fe.A)(e,nd);return this._client.post("/v1/messages/count_tokens?beta=true",(0,s.A)((0,s.A)({body:r},t),{},{headers:Hc([{"anthropic-beta":[...null!==n&&void 0!==n?n:[],"token-counting-2024-11-01"].toString()},null===t||void 0===t?void 0:t.headers])}))}toolRunner(e,t){return new Xu(this._client,e,t)}}var od,ad,sd,ld;id.Batches=ed,id.BetaToolRunner=Xu;const cd=["betas"],ud=["betas"];class dd extends Bc{create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=null!==t&&void 0!==t?t:{},{betas:i}=r,o=(0,Fe.A)(r,cd);return this._client.post(Gc(od||(od=Uc(["/v1/skills/","/versions?beta=true"])),e),Mc((0,s.A)((0,s.A)({body:o},n),{},{headers:Hc([{"anthropic-beta":[...null!==i&&void 0!==i?i:[],"skills-2025-10-02"].toString()},null===n||void 0===n?void 0:n.headers])}),this._client))}retrieve(e,t,n){const{skill_id:r,betas:i}=t;return this._client.get(Gc(ad||(ad=Uc(["/v1/skills/","/versions/","?beta=true"])),r,e),(0,s.A)((0,s.A)({},n),{},{headers:Hc([{"anthropic-beta":[...null!==i&&void 0!==i?i:[],"skills-2025-10-02"].toString()},null===n||void 0===n?void 0:n.headers])}))}list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=null!==t&&void 0!==t?t:{},{betas:i}=r,o=(0,Fe.A)(r,ud);return this._client.getAPIList(Gc(sd||(sd=Uc(["/v1/skills/","/versions?beta=true"])),e),Dc,(0,s.A)((0,s.A)({query:o},n),{},{headers:Hc([{"anthropic-beta":[...null!==i&&void 0!==i?i:[],"skills-2025-10-02"].toString()},null===n||void 0===n?void 0:n.headers])}))}delete(e,t,n){const{skill_id:r,betas:i}=t;return this._client.delete(Gc(ld||(ld=Uc(["/v1/skills/","/versions/","?beta=true"])),r,e),(0,s.A)((0,s.A)({},n),{},{headers:Hc([{"anthropic-beta":[...null!==i&&void 0!==i?i:[],"skills-2025-10-02"].toString()},null===n||void 0===n?void 0:n.headers])}))}}var hd,pd;const fd=["betas"],md=["betas"];class gd extends Bc{constructor(){super(...arguments),this.versions=new dd(this._client)}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=null!==e&&void 0!==e?e:{},{betas:r}=n,i=(0,Fe.A)(n,fd);return this._client.post("/v1/skills?beta=true",Mc((0,s.A)((0,s.A)({body:i},t),{},{headers:Hc([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"skills-2025-10-02"].toString()},null===t||void 0===t?void 0:t.headers])}),this._client))}retrieve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.get(Gc(hd||(hd=Uc(["/v1/skills/","?beta=true"])),e),(0,s.A)((0,s.A)({},n),{},{headers:Hc([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"skills-2025-10-02"].toString()},null===n||void 0===n?void 0:n.headers])}))}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=null!==e&&void 0!==e?e:{},{betas:r}=n,i=(0,Fe.A)(n,md);return this._client.getAPIList("/v1/skills?beta=true",Dc,(0,s.A)((0,s.A)({query:i},t),{},{headers:Hc([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"skills-2025-10-02"].toString()},null===t||void 0===t?void 0:t.headers])}))}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.delete(Gc(pd||(pd=Uc(["/v1/skills/","?beta=true"])),e),(0,s.A)((0,s.A)({},n),{},{headers:Hc([{"anthropic-beta":[...null!==r&&void 0!==r?r:[],"skills-2025-10-02"].toString()},null===n||void 0===n?void 0:n.headers])}))}}gd.Versions=dd;class yd extends Bc{constructor(){super(...arguments),this.models=new ru(this._client),this.messages=new id(this._client),this.files=new eu(this._client),this.skills=new gd(this._client)}}yd.Models=ru,yd.Messages=id,yd.Files=eu,yd.Skills=gd;const vd=["betas"];class bd extends Bc{create(e,t){var n,r;const{betas:i}=e,o=(0,Fe.A)(e,vd);return this._client.post("/v1/complete",(0,s.A)((0,s.A)({body:o,timeout:null!==(n=this._client._options.timeout)&&void 0!==n?n:6e5},t),{},{headers:Hc([(0,s.A)({},null!=(null===i||void 0===i?void 0:i.toString())?{"anthropic-beta":null===i||void 0===i?void 0:i.toString()}:void 0),null===t||void 0===t?void 0:t.headers]),stream:null!==(r=e.stream)&&void 0!==r&&r}))}}var wd,kd,xd,Sd,Ed,Td,Cd,_d,Dd,Ad,Rd,Id,Pd,Md,Nd,jd,Od,Fd,Ld,Wd,Bd,Ud;const zd="__json_buf";function qd(e){return"tool_use"===e.type||"server_tool_use"===e.type}class Hd{constructor(){wd.add(this),this.messages=[],this.receivedMessages=[],kd.set(this,void 0),this.controller=new AbortController,xd.set(this,void 0),Sd.set(this,()=>{}),Ed.set(this,()=>{}),Td.set(this,void 0),Cd.set(this,()=>{}),_d.set(this,()=>{}),Dd.set(this,{}),Ad.set(this,!1),Rd.set(this,!1),Id.set(this,!1),Pd.set(this,!1),Md.set(this,void 0),Nd.set(this,void 0),Fd.set(this,e=>{if(fl(this,Rd,!0,"f"),yl(e)&&(e=new kl),e instanceof kl)return fl(this,Id,!0,"f"),this._emit("abort",e);if(e instanceof bl)return this._emit("error",e);if(e instanceof Error){const t=new bl(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new bl(String(e)))}),fl(this,xd,new Promise((e,t)=>{fl(this,Sd,e,"f"),fl(this,Ed,t,"f")}),"f"),fl(this,Td,new Promise((e,t)=>{fl(this,Cd,e,"f"),fl(this,_d,t,"f")}),"f"),ml(this,xd,"f").catch(()=>{}),ml(this,Td,"f").catch(()=>{})}get response(){return ml(this,Md,"f")}get request_id(){return ml(this,Nd,"f")}async withResponse(){const e=await ml(this,xd,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const t=new Hd;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,n){const r=new Hd;for(const i of t.messages)r._addMessageParam(i);return r._run(()=>r._createMessage(e,(0,s.A)((0,s.A)({},t),{},{stream:!0}),(0,s.A)((0,s.A)({},n),{},{headers:(0,s.A)((0,s.A)({},null===n||void 0===n?void 0:n.headers),{},{"X-Stainless-Helper-Method":"stream"})}))),r}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},ml(this,Fd,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,n){const r=null===n||void 0===n?void 0:n.signal;let i;r&&(r.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),r.addEventListener("abort",i));try{var o;ml(this,wd,"m",Ld).call(this);const{response:r,data:i}=await e.create((0,s.A)((0,s.A)({},t),{},{stream:!0}),(0,s.A)((0,s.A)({},n),{},{signal:this.controller.signal})).withResponse();this._connected(r);var a,l=!1,c=!1;try{for(var u,d=Kl(i);l=!(u=await d.next()).done;l=!1){const e=u.value;ml(this,wd,"m",Wd).call(this,e)}}catch(h){c=!0,a=h}finally{try{l&&null!=d.return&&await d.return()}finally{if(c)throw a}}if(null!==(o=i.controller.signal)&&void 0!==o&&o.aborted)throw new kl;ml(this,wd,"m",Bd).call(this)}finally{r&&i&&r.removeEventListener("abort",i)}}_connected(e){this.ended||(fl(this,Md,e,"f"),fl(this,Nd,null===e||void 0===e?void 0:e.headers.get("request-id"),"f"),ml(this,Sd,"f").call(this,e),this._emit("connect"))}get ended(){return ml(this,Ad,"f")}get errored(){return ml(this,Rd,"f")}get aborted(){return ml(this,Id,"f")}abort(){this.controller.abort()}on(e,t){return(ml(this,Dd,"f")[e]||(ml(this,Dd,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=ml(this,Dd,"f")[e];if(!n)return this;const r=n.findIndex(e=>e.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(ml(this,Dd,"f")[e]||(ml(this,Dd,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{fl(this,Pd,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)})}async done(){fl(this,Pd,!0,"f"),await ml(this,Td,"f")}get currentMessage(){return ml(this,kd,"f")}async finalMessage(){return await this.done(),ml(this,wd,"m",jd).call(this)}async finalText(){return await this.done(),ml(this,wd,"m",Od).call(this)}_emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(ml(this,Ad,"f"))return;"end"===e&&(fl(this,Ad,!0,"f"),ml(this,Cd,"f").call(this));const i=ml(this,Dd,"f")[e];if(i&&(ml(this,Dd,"f")[e]=i.filter(e=>!e.once),i.forEach(e=>{let{listener:t}=e;return t(...n)})),"abort"===e){const e=n[0];return ml(this,Pd,"f")||null!==i&&void 0!==i&&i.length||Promise.reject(e),ml(this,Ed,"f").call(this,e),ml(this,_d,"f").call(this,e),void this._emit("end")}if("error"===e){const e=n[0];ml(this,Pd,"f")||null!==i&&void 0!==i&&i.length||Promise.reject(e),ml(this,Ed,"f").call(this,e),ml(this,_d,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",ml(this,wd,"m",jd).call(this))}async _fromReadableStream(e,t){const n=null===t||void 0===t?void 0:t.signal;let r;n&&(n.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),n.addEventListener("abort",r));try{var i;ml(this,wd,"m",Ld).call(this),this._connected(null);const t=vc.fromReadableStream(e,this.controller);var o,a=!1,s=!1;try{for(var l,c=Kl(t);a=!(l=await c.next()).done;a=!1){const e=l.value;ml(this,wd,"m",Wd).call(this,e)}}catch(u){s=!0,o=u}finally{try{a&&null!=c.return&&await c.return()}finally{if(s)throw o}}if(null!==(i=t.controller.signal)&&void 0!==i&&i.aborted)throw new kl;ml(this,wd,"m",Bd).call(this)}finally{n&&r&&n.removeEventListener("abort",r)}}[(kd=new WeakMap,xd=new WeakMap,Sd=new WeakMap,Ed=new WeakMap,Td=new WeakMap,Cd=new WeakMap,_d=new WeakMap,Dd=new WeakMap,Ad=new WeakMap,Rd=new WeakMap,Id=new WeakMap,Pd=new WeakMap,Md=new WeakMap,Nd=new WeakMap,Fd=new WeakMap,wd=new WeakSet,jd=function(){if(0===this.receivedMessages.length)throw new bl("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},Od=function(){if(0===this.receivedMessages.length)throw new bl("stream ended without producing a Message with role=assistant");const e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new bl("stream ended without producing a content block with type=text");return e.join(" ")},Ld=function(){this.ended||fl(this,kd,void 0,"f")},Wd=function(e){if(this.ended)return;const t=ml(this,wd,"m",Ud).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{const r=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===r.type&&this._emit("text",e.delta.text,r.text||"");break;case"citations_delta":var n;if("text"===r.type)this._emit("citation",e.delta.citation,null!==(n=r.citations)&&void 0!==n?n:[]);break;case"input_json_delta":qd(r)&&r.input&&this._emit("inputJson",e.delta.partial_json,r.input);break;case"thinking_delta":"thinking"===r.type&&this._emit("thinking",e.delta.thinking,r.thinking);break;case"signature_delta":"thinking"===r.type&&this._emit("signature",r.signature);break;default:e.delta}break}case"message_stop":this._addMessageParam(t),this._addMessage(t,!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":fl(this,kd,t,"f")}},Bd=function(){if(this.ended)throw new bl("stream has ended, this shouldn't happen");const e=ml(this,kd,"f");if(!e)throw new bl("request ended without sending any chunks");return fl(this,kd,void 0,"f"),e},Ud=function(e){let t=ml(this,kd,"f");if("message_start"===e.type){if(t)throw new bl("Unexpected event order, got ".concat(e.type,' before receiving "message_stop"'));return e.message}if(!t)throw new bl("Unexpected event order, got ".concat(e.type,' before "message_start"'));switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push((0,s.A)({},e.content_block)),t;case"content_block_delta":{const r=t.content.at(e.index);switch(e.delta.type){case"text_delta":"text"===(null===r||void 0===r?void 0:r.type)&&(t.content[e.index]=(0,s.A)((0,s.A)({},r),{},{text:(r.text||"")+e.delta.text}));break;case"citations_delta":var n;if("text"===(null===r||void 0===r?void 0:r.type))t.content[e.index]=(0,s.A)((0,s.A)({},r),{},{citations:[...null!==(n=r.citations)&&void 0!==n?n:[],e.delta.citation]});break;case"input_json_delta":if(r&&qd(r)){let n=r[zd]||"";n+=e.delta.partial_json;const i=(0,s.A)({},r);Object.defineProperty(i,zd,{value:n,enumerable:!1,writable:!0}),n&&(i.input=lu(n)),t.content[e.index]=i}break;case"thinking_delta":"thinking"===(null===r||void 0===r?void 0:r.type)&&(t.content[e.index]=(0,s.A)((0,s.A)({},r),{},{thinking:r.thinking+e.delta.thinking}));break;case"signature_delta":"thinking"===(null===r||void 0===r?void 0:r.type)&&(t.content[e.index]=(0,s.A)((0,s.A)({},r),{},{signature:e.delta.signature}));break;default:e.delta}return t}}},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("streamEvent",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0});return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new vc(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}var Vd,Kd,Yd;class Gd extends Bc{create(e,t){return this._client.post("/v1/messages/batches",(0,s.A)({body:e},t))}retrieve(e,t){return this._client.get(Gc(Vd||(Vd=Uc(["/v1/messages/batches/",""])),e),t)}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return this._client.getAPIList("/v1/messages/batches",_c,(0,s.A)({query:e},t))}delete(e,t){return this._client.delete(Gc(Kd||(Kd=Uc(["/v1/messages/batches/",""])),e),t)}cancel(e,t){return this._client.post(Gc(Yd||(Yd=Uc(["/v1/messages/batches/","/cancel"])),e),t)}async results(e,t){const n=await this.retrieve(e);if(!n.results_url)throw new bl("No batch `results_url`; Has it finished processing? ".concat(n.processing_status," - ").concat(n.id));return this._client.get(n.results_url,(0,s.A)((0,s.A)({},t),{},{headers:Hc([{Accept:"application/binary"},null===t||void 0===t?void 0:t.headers]),stream:!0,__binaryResponse:!0}))._thenUnwrap((e,t)=>Ju.fromResponse(t.response,t.controller))}}class Qd extends Bc{constructor(){super(...arguments),this.batches=new Gd(this._client)}create(e,t){var n;e.model in Xd&&console.warn("The model '".concat(e.model,"' is deprecated and will reach end-of-life on ").concat(Xd[e.model],"\nPlease migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information."));let r=this._client._options.timeout;if(!e.stream&&null==r){var i;const t=null!==(i=iu[e.model])&&void 0!==i?i:void 0;r=this._client.calculateNonstreamingTimeout(e.max_tokens,t)}return this._client.post("/v1/messages",(0,s.A)((0,s.A)({body:e,timeout:null!==r&&void 0!==r?r:6e5},t),{},{stream:null!==(n=e.stream)&&void 0!==n&&n}))}stream(e,t){return Hd.createMessage(this,e,t)}countTokens(e,t){return this._client.post("/v1/messages/count_tokens",(0,s.A)({body:e},t))}}const Xd={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026"};Qd.Batches=Gd;const Jd=["betas"];var $d;class Zd extends Bc{retrieve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{betas:r}=null!==t&&void 0!==t?t:{};return this._client.get(Gc($d||($d=Uc(["/v1/models/",""])),e),(0,s.A)((0,s.A)({},n),{},{headers:Hc([(0,s.A)({},null!=(null===r||void 0===r?void 0:r.toString())?{"anthropic-beta":null===r||void 0===r?void 0:r.toString()}:void 0),null===n||void 0===n?void 0:n.headers])}))}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=null!==e&&void 0!==e?e:{},{betas:r}=n,i=(0,Fe.A)(n,Jd);return this._client.getAPIList("/v1/models",_c,(0,s.A)((0,s.A)({query:i},t),{},{headers:Hc([(0,s.A)({},null!=(null===r||void 0===r?void 0:r.toString())?{"anthropic-beta":null===r||void 0===r?void 0:r.toString()}:void 0),null===t||void 0===t?void 0:t.headers])}))}}const eh=e=>{var t,n,r,i;return"undefined"!==typeof globalThis.process?null!==(t=null===(n=globalThis.process.env)||void 0===n||null===(n=n[e])||void 0===n?void 0:n.trim())&&void 0!==t?t:void 0:"undefined"!==typeof globalThis.Deno?null===(r=globalThis.Deno.env)||void 0===r||null===(i=r.get)||void 0===i||null===(i=i.call(r,e))||void 0===i?void 0:i.trim():void 0},th=["baseURL","apiKey","authToken"],nh=["signal","method"];var rh,ih,oh,ah;class sh{constructor(){var e,t,n,r,i,o,a,l;let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{baseURL:u=eh("ANTHROPIC_BASE_URL"),apiKey:d=(null!==(e=eh("ANTHROPIC_API_KEY"))&&void 0!==e?e:null),authToken:h=(null!==(t=eh("ANTHROPIC_AUTH_TOKEN"))&&void 0!==t?t:null)}=c,p=(0,Fe.A)(c,th);rh.add(this),oh.set(this,void 0);const f=(0,s.A)((0,s.A)({apiKey:d,authToken:h},p),{},{baseURL:u||"https://api.anthropic.com"});if(!f.dangerouslyAllowBrowser&&"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof navigator)throw new bl("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew Anthropic({ apiKey, dangerouslyAllowBrowser: true });\n");this.baseURL=f.baseURL,this.timeout=null!==(n=f.timeout)&&void 0!==n?n:ih.DEFAULT_TIMEOUT,this.logger=null!==(r=f.logger)&&void 0!==r?r:console;const m="warn";this.logLevel=m,this.logLevel=null!==(i=null!==(o=lc(f.logLevel,"ClientOptions.logLevel",this))&&void 0!==o?o:lc(eh("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this))&&void 0!==i?i:m,this.fetchOptions=f.fetchOptions,this.maxRetries=null!==(a=f.maxRetries)&&void 0!==a?a:2,this.fetch=null!==(l=f.fetch)&&void 0!==l?l:function(){if("undefined"!==typeof fetch)return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),fl(this,oh,Vl,"f"),this._options=f,this.apiKey=d,this.authToken=h}withOptions(e){return new this.constructor((0,s.A)((0,s.A)({},this._options),{},{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken},e))}defaultQuery(){return this._options.defaultQuery}validateHeaders(e){let{values:t,nulls:n}=e;if((!this.apiKey||!t.get("x-api-key"))&&!n.has("x-api-key")&&(!this.authToken||!t.get("authorization"))&&!n.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}async authHeaders(e){return Hc([await this.apiKeyAuth(e),await this.bearerAuth(e)])}async apiKeyAuth(e){if(null!=this.apiKey)return Hc([{"X-Api-Key":this.apiKey}])}async bearerAuth(e){if(null!=this.authToken)return Hc([{Authorization:"Bearer ".concat(this.authToken)}])}stringifyQuery(e){return Object.entries(e).filter(e=>{let[t,n]=e;return"undefined"!==typeof n}).map(e=>{let[t,n]=e;if("string"===typeof n||"number"===typeof n||"boolean"===typeof n)return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n));if(null===n)return"".concat(encodeURIComponent(t),"=");throw new bl("Cannot stringify type ".concat(typeof n,"; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case."))}).join("&")}getUserAgent(){return"".concat(this.constructor.name,"/JS ").concat(Fl)}defaultIdempotencyKey(){return"stainless-node-retry-".concat(gl())}makeStatusError(e,t,n,r){return wl.generate(e,t,n,r)}buildURL(e,t,n){const r=!ml(this,rh,"m",ah).call(this)&&n||this.baseURL,i=(e=>Pl.test(e))(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return function(e){if(!e)return!0;for(const t in e)return!1;return!0}(o)||(t=(0,s.A)((0,s.A)({},o),t)),"object"===typeof t&&t&&!Array.isArray(t)&&(i.search=this.stringifyQuery(t)),i.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new bl("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 6e5}async prepareOptions(e){}async prepareRequest(e,t){let{url:n,options:r}=t}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(n=>(0,s.A)({method:e,path:t},n)))}request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Ec(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,n){var r,i;const o=await e,a=null!==(r=o.maxRetries)&&void 0!==r?r:this.maxRetries;null==t&&(t=a),await this.prepareOptions(o);const{req:s,url:l,timeout:c}=await this.buildRequest(o,{retryCount:a-t});await this.prepareRequest(s,{url:l,options:o});const u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),d=void 0===n?"":", retryOf: ".concat(n),h=Date.now();if(pc(this).debug("[".concat(u,"] sending request"),fc({retryOfRequestLogID:n,method:o.method,url:l,options:o,headers:s.headers})),null!==(i=o.signal)&&void 0!==i&&i.aborted)throw new kl;const p=new AbortController,f=await this.fetchWithTimeout(l,s,c,p).catch(vl),m=Date.now();if(f instanceof globalThis.Error){var g;const e="retrying, ".concat(t," attempts remaining");if(null!==(g=o.signal)&&void 0!==g&&g.aborted)throw new kl;const r=yl(f)||/timed? ?out/i.test(String(f)+("cause"in f?String(f.cause):""));if(t)return pc(this).info("[".concat(u,"] connection ").concat(r?"timed out":"failed"," - ").concat(e)),pc(this).debug("[".concat(u,"] connection ").concat(r?"timed out":"failed"," (").concat(e,")"),fc({retryOfRequestLogID:n,url:l,durationMs:m-h,message:f.message})),this.retryRequest(o,t,null!==n&&void 0!==n?n:u);if(pc(this).info("[".concat(u,"] connection ").concat(r?"timed out":"failed"," - error; no more retries left")),pc(this).debug("[".concat(u,"] connection ").concat(r?"timed out":"failed"," (error; no more retries left)"),fc({retryOfRequestLogID:n,url:l,durationMs:m-h,message:f.message})),r)throw new Sl;throw new xl({cause:f})}const y=[...f.headers.entries()].filter(e=>{let[t]=e;return"request-id"===t}).map(e=>{let[t,n]=e;return", "+t+": "+JSON.stringify(n)}).join(""),v="[".concat(u).concat(d).concat(y,"] ").concat(s.method," ").concat(l," ").concat(f.ok?"succeeded":"failed"," with status ").concat(f.status," in ").concat(m-h,"ms");if(!f.ok){const e=await this.shouldRetry(f);if(t&&e){const e="retrying, ".concat(t," attempts remaining");return await async function(e){if(null===e||"object"!==typeof e)return;var t,n;if(e[Symbol.asyncIterator])return void await(null===(t=(n=e[Symbol.asyncIterator]()).return)||void 0===t?void 0:t.call(n));const r=e.getReader(),i=r.cancel();r.releaseLock(),await i}(f.body),pc(this).info("".concat(v," - ").concat(e)),pc(this).debug("[".concat(u,"] response error (").concat(e,")"),fc({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,durationMs:m-h})),this.retryRequest(o,t,null!==n&&void 0!==n?n:u,f.headers)}const r=e?"error; no more retries left":"error; not retryable";pc(this).info("".concat(v," - ").concat(r));const i=await f.text().catch(e=>vl(e).message),a=Ol(i),s=a?void 0:i;pc(this).debug("[".concat(u,"] response error (").concat(r,")"),fc({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,message:s,durationMs:Date.now()-h}));throw this.makeStatusError(f.status,a,s,f.headers)}return pc(this).info(v),pc(this).debug("[".concat(u,"] response start"),fc({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,durationMs:m-h})),{response:f,options:o,controller:p,requestLogID:u,retryOfRequestLogID:n,startTime:h}}getAPIList(e,t,n){return this.requestAPIList(t,(0,s.A)({method:"get",path:e},n))}requestAPIList(e,t){const n=this.makeRequest(t,null,void 0);return new Cc(this,n,e)}async fetchWithTimeout(e,t,n,r){const i=t||{},{signal:o,method:a}=i,l=(0,Fe.A)(i,nh);o&&o.addEventListener("abort",()=>r.abort());const c=setTimeout(()=>r.abort(),n),u=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||"object"===typeof l.body&&null!==l.body&&Symbol.asyncIterator in l.body,d=(0,s.A)((0,s.A)({signal:r.signal},u?{duplex:"half"}:{}),{},{method:"GET"},l);a&&(d.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(c)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||(409===e.status||(429===e.status||e.status>=500)))}async retryRequest(e,t,n,r){let i;const o=null===r||void 0===r?void 0:r.get("retry-after-ms");if(o){const e=parseFloat(o);Number.isNaN(e)||(i=e)}const a=null===r||void 0===r?void 0:r.get("retry-after");if(a&&!i){const e=parseFloat(a);i=Number.isNaN(e)?Date.parse(a)-Date.now():1e3*e}if(!(i&&0<=i&&i<6e4)){var s;const n=null!==(s=e.maxRetries)&&void 0!==s?s:this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(t,n)}var l;return await(l=i,new Promise(e=>setTimeout(e,l))),this.makeRequest(e,t-1,n)}calculateDefaultRetryTimeoutMillis(e,t){const n=t-e;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}calculateNonstreamingTimeout(e,t){const n=6e5;if(36e5*e/128e3>n||null!=t&&e>t)throw new bl("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return n}async buildRequest(e){var t,n,r;let{retryCount:i=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=(0,s.A)({},e),{method:a,path:l,query:c,defaultBaseURL:u}=o,d=this.buildURL(l,c,u);"timeout"in o&&((e,t)=>{if("number"!==typeof t||!Number.isInteger(t))throw new bl("".concat(e," must be an integer"));if(t<0)throw new bl("".concat(e," must be a positive integer"))})("timeout",o.timeout),o.timeout=null!==(t=o.timeout)&&void 0!==t?t:this.timeout;const{bodyHeaders:h,body:p}=this.buildBody({options:o}),f=await this.buildHeaders({options:e,method:a,bodyHeaders:h,retryCount:i});return{req:(0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)({method:a,headers:f},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&p instanceof globalThis.ReadableStream&&{duplex:"half"}),p&&{body:p}),null!==(n=this.fetchOptions)&&void 0!==n?n:{}),null!==(r=o.fetchOptions)&&void 0!==r?r:{}),url:d,timeout:o.timeout}}async buildHeaders(e){let{options:t,method:n,bodyHeaders:r,retryCount:i}=e,o={};this.idempotencyHeader&&"get"!==n&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=t.idempotencyKey);const a=Hc([o,(0,s.A)((0,s.A)((0,s.A)((0,s.A)({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),null!==Ul&&void 0!==Ul?Ul:Ul=Ll()),this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0),{},{"anthropic-version":"2023-06-01"}),await this.authHeaders(t),this._options.defaultHeaders,r,t.headers]);return this.validateHeaders(a),a.values}buildBody(e){let{options:{body:t,headers:n}}=e;if(!t)return{bodyHeaders:void 0,body:void 0};const r=Hc([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||"string"===typeof t&&r.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:"object"===typeof t&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&"function"===typeof t.next)?{bodyHeaders:void 0,body:ql(t)}:ml(this,oh,"f").call(this,{body:t,headers:r})}}ih=sh,oh=new WeakMap,rh=new WeakSet,ah=function(){return"https://api.anthropic.com"!==this.baseURL},sh.Anthropic=ih,sh.HUMAN_PROMPT="\\n\\nHuman:",sh.AI_PROMPT="\\n\\nAssistant:",sh.DEFAULT_TIMEOUT=6e5,sh.AnthropicError=bl,sh.APIError=wl,sh.APIConnectionError=xl,sh.APIConnectionTimeoutError=Sl,sh.APIUserAbortError=kl,sh.NotFoundError=_l,sh.ConflictError=Dl,sh.RateLimitError=Rl,sh.BadRequestError=El,sh.AuthenticationError=Tl,sh.InternalServerError=Il,sh.PermissionDeniedError=Cl,sh.UnprocessableEntityError=Al,sh.toFile=async function(e,t,n){var r;if(Ac(),e=await e,t||(t=Ic(e)),(e=>null!=e&&"object"===typeof e&&"string"===typeof e.name&&"number"===typeof e.lastModified&&Lc(e))(e))return e instanceof File&&null==t&&null==n?e:Rc([await e.arrayBuffer()],null!==t&&void 0!==t?t:e.name,(0,s.A)({type:e.type,lastModified:e.lastModified},n));if((e=>null!=e&&"object"===typeof e&&"string"===typeof e.url&&"function"===typeof e.blob)(e)){const r=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),Rc(await Wc(r),t,n)}const i=await Wc(e);if(null===(r=n)||void 0===r||!r.type){const e=i.find(e=>"object"===typeof e&&"type"in e&&e.type);"string"===typeof e&&(n=(0,s.A)((0,s.A)({},n),{},{type:e}))}return Rc(i,t,n)};class lh extends sh{constructor(){super(...arguments),this.completions=new bd(this),this.messages=new Qd(this),this.models=new Zd(this),this.beta=new yd(this)}}lh.Completions=bd,lh.Messages=Qd,lh.Models=Zd,lh.Beta=yd;const ch=new class{constructor(){this.apiKey=null,this.client=null}initialize(e){this.apiKey=e,this.client=new lh({apiKey:this.apiKey,dangerouslyAllowBrowser:!0})}async analyzeWorkout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.client)throw new Error("AICoachService not initialized. Call initialize(apiKey) first.");const n=this.buildCoachingPrompt(e,t);try{return(await this.client.messages.create({model:"claude-sonnet-4-20250514",max_tokens:500,temperature:.7,messages:[{role:"user",content:n}]})).content[0].text}catch(r){throw console.error("\u274c Error calling Claude API:",r),r}}buildCoachingPrompt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{trainingContext:n,injuryContext:r,prescribedWorkout:i,upcomingWorkouts:o}=t,a=("Ride"===e.type||"VirtualRide"===e.type)&&e.standUpBikeType,s="Run"===e.type||"VirtualRun"===e.type;let l="";if(e.laps&&e.laps.length>0){e.laps[0].distance&&e.laps[0].distance.includes("km")?(l="\n\nLap-by-Lap Breakdown (kilometer splits):\n",e.laps.forEach(e=>{const t=null!==e.elevationGain?"".concat(e.elevationGain>0?"+":"").concat(e.elevationGain,"ft"):"flat";l+="Kilometer ".concat(e.lap," (~").concat(e.distanceMiles," mi cumulative): ").concat(e.pace||"N/A"," pace, ").concat(t," elevation, ").concat(e.avgHeartRate||"N/A"," bpm\n")})):(l="\n\nLap-by-Lap Breakdown (mile splits):\n",e.laps.forEach(e=>{const t=null!==e.elevationGain?"".concat(e.elevationGain>0?"+":"").concat(e.elevationGain,"ft"):"flat";l+="Mile ".concat(e.lap,": ").concat(e.pace||"N/A"," pace, ").concat(t," elevation, ").concat(e.avgHeartRate||"N/A"," bpm\n")}))}let c="",u="";if(a){const t="cyclete"===e.standUpBikeType?"Cyclete":"elliptigo"===e.standUpBikeType?"ElliptiGO":"stand-up bike";c="".concat(t," (stand-up bike) - Weight-bearing, NO-IMPACT outdoor cardio"),u='This was completed on a stand-up bike (comes into Strava as "Ride"). Stand-up bikes are weight-bearing but have ZERO impact forces on joints. Quads still work eccentrically controlling descents but without the pounding. Recovery needs: less joint/bone stress than running, but similar muscular fatigue. Can often handle higher volume than running due to no impact.'}else s?(c="Running - Weight-bearing, HIGH-IMPACT activity",u="This was a running workout with full ground impact forces. Every foot strike creates 2-3x bodyweight forces absorbed by joints, bones, and connective tissue. Descents create even higher eccentric loading on quads AND impact stress. Recovery needs: manage both muscular fatigue AND impact-related stress on joints/bones/tendons."):(c="Cycling or other cardio activity",u="This appears to be a traditional cycling workout. Lower body muscular work but minimal impact forces.");return"You are a USATF-certified running coach analyzing a completed workout. Your coaching style is conversational, data-driven, and actionable - like you're coaching someone you know personally.\n\nIMPORTANT GUIDELINES:\n- Keep response to 150-175 words MAXIMUM\n- Use conversational tone (not robotic or generic)\n- Focus on terrain's impact on performance (especially descents and eccentric loading)\n- Provide specific lap-by-lap storytelling when relevant\n- Give actionable next-step advice\n- DO NOT use any real coach names in your response\n- Be concise and insightful, not flowery or generic\n\nWORKOUT TYPE: ".concat(c,"\n\nCRITICAL CONTEXT - RECOVERY IMPLICATIONS:\n").concat(u,"\n\nCOMPLETED WORKOUT:\n- Distance: ").concat(e.distance," miles\n- Duration: ").concat(e.duration," minutes\n- Pace: ").concat(e.pace||"N/A","\n- Total Elevation Gain: ").concat(e.elevationGain||0," feet\n- Avg Heart Rate: ").concat(e.avgHeartRate||"N/A"," bpm\n- Max Heart Rate: ").concat(e.maxHeartRate||"N/A"," bpm\n").concat(l,"\n\n").concat(i?"PRESCRIBED WORKOUT:\n".concat(i,"\n"):"","\n\n").concat(n?"TRAINING CONTEXT:\n".concat(n,"\n"):"","\n\n").concat(o?"UPCOMING WORKOUTS THIS WEEK:\n".concat(o,"\n"):"","\n\n").concat(r?"INJURY/FATIGUE NOTES:\n".concat(r,"\n"):"",'\n\nAnalyze this workout and provide coaching feedback. Focus on how terrain affected performance, whether pacing was appropriate given elevation changes, and what recovery/preparation is needed for the upcoming scheduled workouts. Reference specific upcoming workouts when giving advice (e.g., "Tuesday\'s tempo run", "Thursday\'s intervals").')}};const uh=function(e){var t,r,o,a;let{userProfile:l,trainingPlan:c}=e;const u=te(),{day:d}=function(){let{matches:e}=i.useContext(X),t=e[e.length-1];return t?t.params:{}}(),h=Z(),[p,f]=(0,i.useState)({isOpen:!1,workout:null}),[m,g]=(0,i.useState)(null),[y,v]=(0,i.useState)(null),[b,w]=(0,i.useState)(null),[k,x]=(0,i.useState)(!1),[S,E]=(0,i.useState)(null),T=null===(t=h.state)||void 0===t?void 0:t.workout,C=(null===(r=h.state)||void 0===r?void 0:r.userProfile)||l,_=(null===(o=h.state)||void 0===o?void 0:o.currentWeek)||1,D=null===(a=h.state)||void 0===a?void 0:a.weekData,A=T||(e=>{if(D&&D.workouts)return D.workouts.find(t=>t.day&&t.day.toLowerCase()===e.toLowerCase());if(!c||!c.weeks)return null;const t=Math.min(_-1,c.weeks.length-1),n=c.weeks[t];return n&&n.workouts?n.workouts.find(t=>t.day&&t.day.toLowerCase()===e.toLowerCase()):null})(d);(0,i.useEffect)(()=>{(async()=>{if(Re.j2.currentUser&&A)try{const{doc:e,getDoc:t}=await Promise.resolve().then(n.bind(n,667)),{db:r}=await Promise.resolve().then(n.bind(n,121)),i=e(r,"users",Re.j2.currentUser.uid),o=await t(i);if(o.exists()){const e=o.data().completedWorkouts||{},t=A.workoutIndex||0,n="".concat(_,"-").concat(A.day,"-").concat(t);e[n]&&v(e[n])}}catch(e){console.error("Error fetching completion data:",e)}})()},[A,_]);const R={tuesday:{name:null!==l&&void 0!==l&&l.standUpBikeType?"Progressive Build Session":"Sandwich Tempo",type:"tempo",focus:"Lactate Threshold",duration:"45 minutes",description:null!==l&&void 0!==l&&l.standUpBikeType?"Gradually increasing intensity throughout session on your stand-up bike":"Tempo effort sandwiched between easy running",structure:null!==l&&void 0!==l&&l.standUpBikeType?"20 min easy + 20-40 min progressive build to tempo + 10 min easy":"10-15 min easy warmup + 15-20 min tempo + 5-10 min easy cooldown",equipmentSpecific:!(null===l||void 0===l||!l.standUpBikeType),intensity:"Medium-hard effort, sustainable for 20-60 minutes",heartRate:"86-90% Max HR",paceGuidance:null!==l&&void 0!==l&&l.standUpBikeType?"".concat($s(null===l||void 0===l?void 0:l.standUpBikeType)," specific: Focus on smooth ").concat("cyclete"===(null===l||void 0===l?void 0:l.standUpBikeType)?"teardrop":"elliptical"," motion"):"Half marathon to 10-mile race pace",safetyNotes:['Start conservatively - tempo should feel "controlled discomfort"',"If breathing becomes labored, slow down slightly","Better to run slightly too easy than too hard"],alternatives:{tooHot:"Move indoors or to early morning",tooTired:"Easy run with 4-6 x 1 minute pickups",timeConstraint:"20 min tempo run instead of full session",noEquipment:null!==l&&void 0!==l&&l.standUpBikeType?"Traditional running tempo workout":"Treadmill with 1% incline"}},thursday:{name:"Easy Run",type:"easy",focus:"Recovery",duration:"35-45 minutes",description:"Conversational pace, aerobic base building",structure:"Easy effort throughout, should feel refreshed after",equipmentSpecific:!1,intensity:"Easy conversational pace",heartRate:"65-79% Max HR",paceGuidance:"Should be able to speak in full sentences",safetyNotes:["This should feel easy - not a workout day","Focus on form and relaxation","Cut short if feeling overly fatigued"],alternatives:{tooHot:"Move to air conditioning or pool running",tooTired:"Walk or very easy bike ride",injury:"Cross-training or complete rest",timeConstraint:"20-30 minutes is fine"}},sunday:{name:"Conversational Long Run",type:"longRun",focus:"Endurance",duration:"60-75 minutes",description:"Easy long run emphasizing conversational pace",structure:"Run with partner/group, maintain conversation throughout",equipmentSpecific:!1,intensity:"Easy conversational pace",heartRate:"65-78% Max HR",paceGuidance:"If you can't hold a conversation, you're going too fast",safetyNotes:["Carry water for runs over 60 minutes","Know your route and have bailout options","Focus on time on feet, not speed"],alternatives:{tooHot:"Start very early or split into two shorter runs",timeConstraint:"Run for available time, maintain easy effort",noPartner:"Solo run with audiobook or podcast",injury:"Long bike ride or pool running session"}}},I=function(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").toLowerCase();return t.includes("fartlek")?"Develops speed, mental toughness, and ability to surge during races. Improves VO2 max and teaches body to handle varied paces.":t.includes("progressive")?"Builds mental strength and pacing skills. Teaches body to run strong when tired. Improves lactate clearance and finishing speed.":t.includes("tempo")||"tempo"===e?"Raises lactate threshold, improves race pace endurance, and builds mental toughness. Key workout for half marathon and marathon training.":t.includes("interval")||t.includes("speed")||"intervals"===e?"Increases VO2 max, running economy, and speed. Develops neuromuscular power and teaches body to handle high-intensity efforts.":t.includes("hill")||"hills"===e?"Builds leg strength, power, and running economy. Improves form and reduces injury risk through strength development.":t.includes("long")||"longRun"===e?"Builds aerobic endurance, fat adaptation, and mental toughness. Strengthens bones, tendons, and cardiovascular system.":t.includes("easy")||t.includes("recovery")||"easy"===e?"Promotes recovery, builds aerobic base, and strengthens cardiovascular system without stress. Allows body to adapt to training.":"Develops overall fitness and running ability"},P=A?(e=>{var t,n,r,i,o,a,s,l,c,u,d,h,p,f,m,g;if(!e)return null;const y=e.workoutDetails||e.workout,v=e.type;console.log("\ud83d\udd0d WorkoutDetail - transformWorkoutData:"),console.log("  workoutType:",v),console.log("  workoutData:",e),console.log("  workoutData.workout:",e.workout),console.log("  workoutData.workout.structure:",null===(t=e.workout)||void 0===t?void 0:t.structure),console.log("  workoutLib:",y),console.log("  workoutLib.structure:",null===y||void 0===y?void 0:y.structure),console.log("  workoutLib.totalWorkout:",null===y||void 0===y?void 0:y.totalWorkout),console.log("  workoutLib.totalWorkout.structure:",null===y||void 0===y||null===(n=y.totalWorkout)||void 0===n?void 0:n.structure),console.log("  workoutLib.repetitions:",null===y||void 0===y?void 0:y.repetitions);const b=(e=>{switch(e){case"intervals":return{intensity:"High intensity - 5K to 1-mile race pace",heartRate:"90-100% Max HR"};case"tempo":return{intensity:"Medium-hard effort, sustainable for 20-60 minutes",heartRate:"86-90% Max HR"};case"hills":return{intensity:"Hard effort on hills, easy on recovery",heartRate:"85-95% Max HR"};case"longRun":return{intensity:"Easy conversational pace",heartRate:"70-80% Max HR"};default:return{intensity:"Moderate effort",heartRate:"70-85% Max HR"}}})(v);let w=null;if(null!==(r=e.workout)&&void 0!==r&&r.structure)w=e.workout.structure;else if(null!==y&&void 0!==y&&y.workout)w=y.workout;else if(null!==y&&void 0!==y&&null!==(i=y.totalWorkout)&&void 0!==i&&i.structure){if(w=y.totalWorkout.structure,"intervals"===v&&y.repetitions){const e=/(\d+)-(\d+)\s*x\s*(\S+)/g;w=w.replace(e,(e,t,n,r)=>{if(y.repetitions.includes(r)){const e=y.repetitions.match(/(\d+\s*x\s*\S+)/);if(e)return e[1]}return e})}}else null!==y&&void 0!==y&&y.structure?w=y.structure:null!==y&&void 0!==y&&y.repetitions&&null!==y&&void 0!==y&&y.recovery?w="".concat(y.repetitions," with ").concat(y.recovery):null!==y&&void 0!==y&&y.repetitions?w="".concat(y.repetitions):null!==(o=e.workout)&&void 0!==o&&o.structure&&(w=e.workout.structure);if(!w||"Complete the workout as prescribed"===w){var k,x,S;const t=(null===(k=e.workout)||void 0===k?void 0:k.name)||(null===y||void 0===y?void 0:y.name)||"Workout",n=(null===(x=e.workout)||void 0===x?void 0:x.description)||(null===y||void 0===y?void 0:y.description)||"",r=(null===(S=e.workout)||void 0===S?void 0:S.duration)||(null===y||void 0===y?void 0:y.duration)||"30-45 minutes";w=t.toLowerCase().includes("fartlek")?"10 min warmup + 20-30 min fartlek (surge when you feel strong, recover as needed) + 10 min cooldown":t.toLowerCase().includes("progressive")?"10 min easy + gradually build pace to moderate-hard finish + 5 min cooldown":t.toLowerCase().includes("tempo")?"10-15 min easy warmup + 20-30 min @ comfortably hard pace + 5-10 min cooldown":t.toLowerCase().includes("interval")||t.toLowerCase().includes("speed")?"15 min warmup + intervals at high intensity with recovery + 10 min cooldown":t.toLowerCase().includes("easy")||t.toLowerCase().includes("recovery")?"".concat(r," at conversational pace throughout"):t.toLowerCase().includes("long")?"".concat(r," at steady, easy pace - focus on time on feet"):n||"Complete the workout as prescribed"}const E=(null===(a=e.workout)||void 0===a||null===(s=a.effort)||void 0===s?void 0:s.perceived)||(null===y||void 0===y?void 0:y.intensity)||b.intensity,T=(null===(l=e.workout)||void 0===l||null===(c=l.effort)||void 0===c?void 0:c.heartRate)||(null===y||void 0===y?void 0:y.heartRate)||b.heartRate;let _="Maintain steady effort throughout";var D,A;if(e.equipmentSpecific&&null!==C&&void 0!==C&&C.standUpBikeType)_="cyclete"===C.standUpBikeType&&null!==(D=e.workout)&&void 0!==D&&D.cycleteNotes?e.workout.cycleteNotes:"elliptigo"===C.standUpBikeType&&null!==(A=e.workout)&&void 0!==A&&A.elliptigoNotes?e.workout.elliptigoNotes:"".concat($s(C.standUpBikeType)," specific: Focus on smooth motion and consistent effort");else if(null!==y&&void 0!==y&&y.paces){const e=y.intensity||v;"easy"===e||"recovery"===e&&y.paces.easy?_="".concat(y.paces.easy.min,"-").concat(y.paces.easy.max,"/mile"):"intervals"!==v&&"interval"!==e||!y.paces.interval?"tempo"!==v&&"threshold"!==e||!y.paces.threshold?"marathonPace"===e&&y.paces.marathon?_="".concat(y.paces.marathon.pace,"/mile"):y.paces.easy&&(_="".concat(y.paces.easy.min,"-").concat(y.paces.easy.max,"/mile")):_="".concat(y.paces.threshold.pace,"/mile"):_="".concat(y.paces.interval.pace,"/mile")}else null!==y&&void 0!==y&&y.paceGuidance&&(_="object"===typeof y.paceGuidance?y.paceGuidance.description||"Maintain steady effort throughout":y.paceGuidance);let R=null!==y&&void 0!==y&&y.safetyNotes&&Array.isArray(y.safetyNotes)&&y.safetyNotes.length>0?y.safetyNotes:["Listen to your body and adjust as needed","Stay hydrated throughout the workout","Stop if you feel pain or excessive fatigue"];null!==(u=e.workout)&&void 0!==u&&u.roadConsiderations&&(R=[...R,"Road planning: ".concat(e.workout.roadConsiderations)]);let P=(null===(d=e.workout)||void 0===d?void 0:d.duration)||(null===y||void 0===y?void 0:y.duration)||"30-45 minutes";if("longRun"===v||"easy"===v){var M,N,j;const t=null===(M=e.workout)||void 0===M||null===(N=M.name)||void 0===N?void 0:N.match(/(\d+)-Mile/i);if(t&&null!==y&&void 0!==y&&null!==(j=y.paces)&&void 0!==j&&j.easy){const e=parseFloat(t[1]),n=y.paces.easy.min,r=y.paces.easy.max,i=e=>{const[t,n]=e.split(":").map(Number);return t+n/60},o=Math.round(e*i(n)),a=Math.round(e*i(r));P="".concat(o,"-").concat(a," minutes")}}if(w&&"string"===typeof w){const e=w.match(/(\d+-\d+)\s*minutes?\s*total/i);e?P="".concat(e[1]," minutes total"):w.includes("warmup")&&w.includes("cooldown")&&(P="".concat(P," (main set)"))}return{name:(null===(h=e.workout)||void 0===h?void 0:h.name)||(null===y||void 0===y?void 0:y.name)||"Workout",type:e.type||"easy",focus:e.focus||(null===y||void 0===y?void 0:y.focus)||"Recovery",duration:P,description:(null===(p=e.workout)||void 0===p?void 0:p.description)||(null===y||void 0===y?void 0:y.description)||"Standard workout",structure:w,equipmentSpecific:e.equipmentSpecific||!1,intensity:E,heartRate:T,paceGuidance:_,safetyNotes:R,alternatives:(null===(f=e.workout)||void 0===f?void 0:f.alternatives)||(null===y||void 0===y?void 0:y.alternatives)||{tooHot:"Move indoors or adjust timing",tooTired:"Easy recovery pace instead",timeConstraint:"Reduce duration but maintain intensity",noEquipment:"Bodyweight alternative available"},hillRequirement:null===y||void 0===y?void 0:y.hillRequirement,terrainInstructions:null===y||void 0===y?void 0:y.terrainInstructions,progression:null===y||void 0===y?void 0:y.progression,benefits:(null===(m=e.workout)||void 0===m?void 0:m.benefits)||(null===y||void 0===y?void 0:y.benefits)||I(v,(null===(g=e.workout)||void 0===g?void 0:g.name)||(null===y||void 0===y?void 0:y.name)),variations:null===y||void 0===y?void 0:y.variations,examples:null===y||void 0===y?void 0:y.examples,trackIntervals:null===y||void 0===y?void 0:y.trackIntervals,fueling:null===y||void 0===y?void 0:y.fueling,runEqOptions:e.runEqOptions,coachingGuidance:e.coachingGuidance}})(A):R[d]||R.tuesday,M=m||P,N=()=>{f({isOpen:!1,workout:null})};return(0,Ne.jsxs)("div",{style:{minHeight:"100vh",background:"#0a0a0a"},children:[(0,Ne.jsx)("div",{style:{background:"#1a1a1a",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",padding:"32px 0 48px 0",position:"relative",overflow:"hidden"},children:(0,Ne.jsxs)("div",{className:"container",style:{position:"relative",zIndex:1},children:[(0,Ne.jsxs)("div",{style:{display:"flex",gap:"12px",marginBottom:"24px"},children:[(0,Ne.jsx)("button",{onClick:()=>u(-1),style:{background:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",fontSize:"1.5rem",cursor:"pointer",padding:"8px 16px",borderRadius:"12px",display:"flex",alignItems:"center",fontWeight:"bold"},children:"\u2190 Back"}),(0,Ne.jsx)("button",{onClick:()=>window.location.reload(),style:{background:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.1)",color:"#999",fontSize:"0.9rem",cursor:"pointer",padding:"8px 16px",borderRadius:"12px",display:"flex",alignItems:"center",fontWeight:"600",gap:"6px"},title:"Reload workout data from libraries (useful after code changes)",children:"Refresh"})]}),(0,Ne.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"16px"},children:(0,Ne.jsxs)("div",{style:{flex:1},children:[(0,Ne.jsx)("h1",{style:{margin:0,color:"white",fontSize:"2.5rem",fontWeight:"800",letterSpacing:"-0.5px"},children:"string"===typeof M.name?M.name:"object"===typeof M.name?JSON.stringify(M.name):"Workout"}),(0,Ne.jsxs)("p",{style:{margin:"8px 0 0 0",color:"#999",fontSize:"1.1rem",fontWeight:"500"},children:[d.charAt(0).toUpperCase()+d.slice(1)," \u2022 ","string"===typeof M.duration?M.duration:"object"===typeof M.duration?JSON.stringify(M.duration):"30-45 minutes"]})]})}),(0,Ne.jsxs)("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[(0,Ne.jsx)("span",{style:{background:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.1)",color:"#999",padding:"8px 16px",borderRadius:"20px",fontSize:"0.9rem",fontWeight:"600"},children:M.focus}),M.equipmentSpecific&&(null===l||void 0===l?void 0:l.standUpBikeType)&&(0,Ne.jsx)("span",{style:{background:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.1)",color:"#999",padding:"8px 16px",borderRadius:"20px",fontSize:"0.9rem",fontWeight:"600"},children:$s(l.standUpBikeType)})]})]})}),(0,Ne.jsxs)("div",{className:"container",style:{padding:"24px 16px"},children:[(0,Ne.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px",marginBottom:"24px"},children:[(0,Ne.jsxs)("div",{style:{background:"#1a1a1a",padding:"20px",borderRadius:"16px",border:"2px solid #00D4FF"},children:[(0,Ne.jsx)("div",{style:{color:"#666",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},children:"Target Pace"}),(0,Ne.jsx)("div",{style:{color:"white",fontSize:"1.5rem",fontWeight:"800",lineHeight:"1.2"},children:(e=>{if("string"===typeof e)return e;if("object"===typeof e){const t=Object.entries(e);return 1===t.length?t[0][1]:t.map(e=>{let[t,n]=e;return"".concat(t.charAt(0).toUpperCase()+t.slice(1),": ").concat(n)}).join(" | ")}return"Steady, controlled effort"})(M.paceGuidance)})]}),(0,Ne.jsxs)("div",{style:{background:"#1a1a1a",padding:"20px",borderRadius:"16px",border:"2px solid #00D4FF"},children:[(0,Ne.jsx)("div",{style:{color:"#666",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},children:"Intensity"}),(0,Ne.jsx)("div",{style:{color:"white",fontSize:"1.1rem",fontWeight:"700",lineHeight:"1.3"},children:"string"===typeof M.intensity?(O=M.intensity,O?Js.INTENSITY_LABELS[O]?Js.INTENSITY_LABELS[O]:O.includes(" ")&&!O.includes("_")&&O.charAt(0)===O.charAt(0).toUpperCase()?O:el(O.replace(/_/g," ")):""):"object"===typeof M.intensity?JSON.stringify(M.intensity):"Medium Effort"})]}),(0,Ne.jsxs)("div",{style:{background:"#1a1a1a",padding:"20px",borderRadius:"16px",border:"2px solid #00D4FF"},children:[(0,Ne.jsx)("div",{style:{color:"#666",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},children:"Heart Rate Zone"}),(0,Ne.jsx)("div",{style:{color:"white",fontSize:"1.5rem",fontWeight:"800",lineHeight:"1.2"},children:"string"===typeof M.heartRate?(j=M.heartRate,j?j.replace(/max hr/gi,"Max HR").replace(/max heart rate/gi,"Max Heart Rate").replace(/hr/gi,"HR"):""):"object"===typeof M.heartRate?JSON.stringify(M.heartRate):"70-85% Max HR"})]}),("bike"===A.type||A.equipmentSpecific)&&(()=>{const e=il.calculateWorkoutCalories(A);return e?(0,Ne.jsxs)("div",{style:{background:"#1a1a1a",padding:"20px",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,Ne.jsx)("div",{style:{color:"#666",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},children:"Expected Calorie Burn"}),(0,Ne.jsxs)("div",{style:{color:"white",fontSize:"1.5rem",fontWeight:"800",lineHeight:"1.2"},children:[e.range," cal"]}),(0,Ne.jsx)("div",{style:{color:"#666",fontSize:"0.75rem",marginTop:"6px",fontWeight:"500"},children:"Based on RunEQ equivalency"})]}):null})()]}),(null===A||void 0===A?void 0:A.completed)&&y&&(0,Ne.jsxs)("div",{style:{background:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",padding:"24px",marginBottom:"24px"},children:[(0,Ne.jsx)("h2",{style:{margin:"0 0 20px 0",color:"white",fontSize:"1.8rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"12px"},children:y.autoCompletedFromStrava?"Synced from Strava":"Workout Completed"}),(0,Ne.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"16px",marginBottom:y.notes||y.stravaActivityUrl?"20px":"0"},children:[y.distance&&(0,Ne.jsxs)("div",{style:{background:"#0a0a0a",padding:"16px",borderRadius:"12px",border:"2px solid #00D4FF",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px"},children:[(0,Ne.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Distance"}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:y.distance}),(0,Ne.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"miles"})]})]}),y.duration&&(0,Ne.jsxs)("div",{style:{background:"#0a0a0a",padding:"16px",borderRadius:"12px",border:"2px solid #00D4FF",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px"},children:[(0,Ne.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Duration"}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:y.duration}),(0,Ne.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"minutes"})]})]}),y.pace&&(0,Ne.jsxs)("div",{style:{background:"#0a0a0a",padding:"16px",borderRadius:"12px",border:"2px solid #00D4FF",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px"},children:[(0,Ne.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Pace"}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:y.pace.replace("/mi","")}),(0,Ne.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"per mile"})]})]}),y.avgHeartRate&&(0,Ne.jsxs)("div",{style:{background:"#0a0a0a",padding:"16px",borderRadius:"12px",border:"2px solid #00D4FF",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px"},children:[(0,Ne.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Avg Heart Rate"}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:y.avgHeartRate}),(0,Ne.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"bpm"})]})]}),y.maxHeartRate&&(0,Ne.jsxs)("div",{style:{background:"#0a0a0a",padding:"16px",borderRadius:"12px",border:"2px solid #00D4FF",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px"},children:[(0,Ne.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Max Heart Rate"}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:y.maxHeartRate}),(0,Ne.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"bpm"})]})]}),y.cadence&&(0,Ne.jsxs)("div",{style:{background:"#0a0a0a",padding:"16px",borderRadius:"12px",border:"2px solid #00D4FF",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px"},children:[(0,Ne.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Cadence"}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:Math.round(y.cadence)}),(0,Ne.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"steps/min"})]})]}),y.elevationGain&&(0,Ne.jsxs)("div",{style:{background:"#0a0a0a",padding:"16px",borderRadius:"12px",border:"2px solid #00D4FF",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"110px"},children:[(0,Ne.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Elevation Gain"}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("div",{style:{color:"white",fontSize:"1.8rem",fontWeight:"800",lineHeight:"1"},children:y.elevationGain}),(0,Ne.jsx)("div",{style:{color:"#999",fontSize:"0.85rem",marginTop:"4px"},children:"feet"})]})]})]}),y.notes&&(0,Ne.jsxs)("div",{style:{background:"#0a0a0a",padding:"16px",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.05)",marginBottom:y.stravaActivityUrl?"16px":"0"},children:[(0,Ne.jsx)("div",{style:{color:"#666",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:"Notes"}),(0,Ne.jsx)("div",{style:{color:"#DDD",fontSize:"1rem",lineHeight:"1.6"},children:y.notes})]}),y.stravaActivityUrl&&(0,Ne.jsx)("div",{style:{display:"flex",justifyContent:"center",paddingTop:"8px"},children:(0,Ne.jsxs)("a",{href:y.stravaActivityUrl,target:"_blank",rel:"noopener noreferrer",style:{background:"#FC4C02",color:"white",padding:"12px 24px",borderRadius:"12px",fontSize:"1rem",fontWeight:"700",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(252, 76, 2, 0.4)",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 6px 16px rgba(252, 76, 2, 0.6)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 12px rgba(252, 76, 2, 0.4)"},children:[(0,Ne.jsx)("span",{style:{fontSize:"1.2rem"},children:"\ud83d\udd17"}),"View Full Activity on Strava"]})}),y.laps&&y.laps.length>0&&(0,Ne.jsx)("div",{style:{display:"flex",justifyContent:"center",paddingTop:"16px",marginTop:"16px",borderTop:"1px solid rgba(255, 255, 255, 0.05)"},children:(0,Ne.jsxs)("button",{onClick:async()=>{if(!y)return void alert("No workout data available for analysis");const e=prompt("Enter your Anthropic API key (local dev only):");if(e){x(!0),E(null);try{var t;ch.initialize(e);let r="Run";y.laps&&y.laps.length>0&&y.laps[0].pace||y.pace&&y.pace.includes("/mi")?r="Run":y.laps&&y.laps.length>0&&!y.laps[0].pace&&(r="Ride");const i={type:r,distance:y.distance,duration:y.duration,pace:y.pace,elevationGain:y.elevationGain,avgHeartRate:y.avgHeartRate,maxHeartRate:y.maxHeartRate,laps:y.laps,standUpBikeType:"Ride"===r?null===C||void 0===C?void 0:C.standUpBikeType:null};console.log("\ud83d\udd0d AI Coach Debug:",{actualWorkoutType:r,stravaUrl:y.stravaActivityUrl,standUpBikeType:i.standUpBikeType,fullData:i});let o=null;if(c&&D){const e=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],t=e.indexOf(d.toLowerCase()),r=[];for(let i=t+1;i<Math.min(t+4,e.length);i++){var n;const t=e[i],o=null===(n=D.workouts)||void 0===n?void 0:n[t];if(o&&o.name){const e=t.charAt(0).toUpperCase()+t.slice(1);r.push("".concat(e,": ").concat(o.name))}}r.length>0&&(o=r.join(", "))}const a={prescribedWorkout:M.name?"".concat(M.name,": ").concat(M.description):null,trainingContext:c?"Week ".concat(_," of ").concat((null===(t=c.weeks)||void 0===t?void 0:t.length)||"N/A"," week training plan for ").concat(c.goalRace||"race"):null,upcomingWorkouts:o},s=await ch.analyzeWorkout(i,a);w(s)}catch(r){console.error("Error getting coaching analysis:",r),E(r.message||"Failed to get coaching analysis")}finally{x(!1)}}},disabled:k,style:{background:k?"#1a1a1a":"linear-gradient(135deg, #00D4FF 0%, #0099CC 100%)",color:"white",padding:"14px 28px",borderRadius:"12px",fontSize:"1.05rem",fontWeight:"700",border:"none",cursor:k?"not-allowed":"pointer",display:"inline-flex",alignItems:"center",gap:"10px",boxShadow:k?"none":"0 4px 12px rgba(0, 212, 255, 0.4)",transition:"all 0.2s",opacity:k?.6:1},onMouseEnter:e=>{k||(e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 6px 16px rgba(0, 212, 255, 0.6)")},onMouseLeave:e=>{k||(e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 12px rgba(0, 212, 255, 0.4)")},children:[(0,Ne.jsx)("span",{style:{fontSize:"1.3rem"},children:k?"\u23f3":"\ud83e\udd16"}),k?"Analyzing Workout...":"Get Coaching"]})}),b&&(0,Ne.jsxs)("div",{style:{marginTop:"20px",background:"linear-gradient(135deg, #1a2a3a 0%, #0f1f2f 100%)",padding:"24px",borderRadius:"16px",border:"2px solid #00D4FF"},children:[(0,Ne.jsxs)("h4",{style:{margin:"0 0 16px 0",color:"#00D4FF",fontSize:"1.4rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"10px"},children:[(0,Ne.jsx)("span",{style:{fontSize:"1.5rem"},children:"\ud83d\udca1"}),"Workout Insights"]}),(0,Ne.jsx)("div",{style:{color:"#DDD",fontSize:"1.05rem",lineHeight:"1.8",whiteSpace:"pre-line"},children:b})]}),S&&(0,Ne.jsx)("div",{style:{marginTop:"20px",background:"#2a1a1a",padding:"20px",borderRadius:"12px",border:"1px solid #e53e3e"},children:(0,Ne.jsxs)("div",{style:{color:"#e53e3e",fontSize:"1rem",fontWeight:"600"},children:["Error getting coaching analysis: ",S]})})]}),(0,Ne.jsxs)("div",{style:{background:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",padding:"24px",marginBottom:"24px"},children:[(0,Ne.jsx)("h2",{style:{margin:"0 0 20px 0",color:"white",fontSize:"1.8rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"12px"},children:"Workout Structure"}),(0,Ne.jsx)("div",{style:{background:"#0a0a0a",padding:"20px",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.05)",fontSize:"1.1rem",lineHeight:"2",color:"#ddd",fontWeight:"500",whiteSpace:"pre-line"},children:(e=>{if("string"===typeof e)return e;if(Array.isArray(e))return e.map((e,t)=>{if("object"===typeof e){const t=[];return e.duration&&t.push(e.duration),e.type&&t.push(e.type),e.intensity&&t.push("@ ".concat(e.intensity)),e.description&&t.push("(".concat(e.description,")")),e.activity&&t.push(e.activity),t.join(" ")}return e}).join(" \u2192 ");if("object"===typeof e){const t=[];return e.warmup&&t.push("**Warmup:** ".concat(e.warmup)),e.main&&t.push("**Main Set:** ".concat(e.main)),e.recovery&&t.push("**Recovery:** ".concat(e.recovery)),e.cooldown&&t.push("**Cooldown:** ".concat(e.cooldown)),e.repeat&&t.push("**Repeat:** ".concat(e.repeat)),e.effort&&t.push("**Effort:** ".concat(e.effort)),e.technique&&t.push("**Technique:** ".concat(e.technique)),e.style&&t.push("**Style:** ".concat(e.style)),e.approach&&t.push("**Approach:** ".concat(e.approach)),e.pattern&&t.push("**Pattern:** ".concat(e.pattern)),t.length>0?t.join("\n\n"):Object.entries(e).map(e=>{let[t,n]=e;return"".concat(t,": ").concat(n)}).join(", ")}return"Complete the workout as prescribed"})(M.structure)})]}),M.description&&(0,Ne.jsxs)("div",{style:{background:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",padding:"20px",marginBottom:"24px"},children:[(0,Ne.jsx)("h3",{style:{margin:"0 0 12px 0",color:"white",fontSize:"1.3rem",fontWeight:"700"},children:"About This Workout"}),(0,Ne.jsx)("p",{style:{fontSize:"1rem",margin:0,lineHeight:"1.7",color:"#ddd"},children:"string"===typeof M.description?M.description:"object"===typeof M.description?JSON.stringify(M.description):"Standard workout description"})]}),"hot_humid"===(null===l||void 0===l?void 0:l.climate)&&(0,Ne.jsxs)("div",{style:{background:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",padding:"20px",marginBottom:"24px"},children:[(0,Ne.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.5rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"10px"},children:"Climate Adjustments"}),(0,Ne.jsxs)("div",{style:{display:"grid",gap:"12px"},children:[(0,Ne.jsx)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Pace:"}),(0,Ne.jsx)("span",{style:{color:"#ddd"},children:"Add 30-60 seconds per mile in high humidity"})]})}),(0,Ne.jsx)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Hydration:"}),(0,Ne.jsx)("span",{style:{color:"#ddd"},children:"Drink before feeling thirsty"})]})}),(0,Ne.jsx)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Timing:"}),(0,Ne.jsx)("span",{style:{color:"#ddd"},children:"Early morning (before 7am) or late evening recommended"})]})}),(0,Ne.jsx)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"4px"},children:"Effort:"}),(0,Ne.jsx)("span",{style:{color:"#ddd"},children:"Focus on effort level rather than exact pace"})]})})]})]}),(0,Ne.jsxs)("div",{style:{background:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",padding:"20px",marginBottom:"24px"},children:[(0,Ne.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.5rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"10px"},children:"Safety & Execution Notes"}),(0,Ne.jsx)("div",{style:{display:"grid",gap:"12px"},children:(Array.isArray(M.safetyNotes)?M.safetyNotes:["Listen to your body and adjust as needed","Stay hydrated throughout the workout","Stop if you feel pain or excessive fatigue"]).map((e,t)=>(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"8px 0"},children:[(0,Ne.jsx)("span",{style:{color:"#666",fontSize:"1.5rem",minWidth:"24px"},children:"\u2022"}),(0,Ne.jsx)("span",{style:{fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:"string"===typeof e?e:JSON.stringify(e)})]},t))})]}),M.hillRequirement&&(0,Ne.jsxs)("div",{style:{background:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",padding:"20px",marginBottom:"24px"},children:[(0,Ne.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.5rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"10px"},children:"Hill Requirements"}),(0,Ne.jsxs)("div",{style:{display:"grid",gap:"12px"},children:[M.hillRequirement.description&&(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("strong",{style:{color:"#999",display:"block",marginBottom:"8px",fontSize:"1.1rem"},children:"Description:"}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:M.hillRequirement.description})]}),M.hillRequirement.grade&&(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Ne.jsx)("strong",{style:{color:"#999",fontSize:"1.1rem"},children:"Grade:"}),(0,Ne.jsx)("span",{style:{fontSize:"1rem",color:"#ddd"},children:M.hillRequirement.grade})]}),M.hillRequirement.distance&&(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Ne.jsx)("strong",{style:{color:"#999",fontSize:"1.1rem"},children:"Distance:"}),(0,Ne.jsx)("span",{style:{fontSize:"1rem",color:"#ddd"},children:M.hillRequirement.distance})]})]})]}),M.terrainInstructions&&(0,Ne.jsxs)("div",{style:{background:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",padding:"20px",marginBottom:"24px"},children:[(0,Ne.jsx)("h3",{style:{margin:"0 0 12px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:"Terrain Instructions"}),"string"===typeof M.terrainInstructions?(0,Ne.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:M.terrainInstructions}):"object"===typeof M.terrainInstructions?(0,Ne.jsx)("div",{style:{display:"grid",gap:"16px"},children:Object.entries(M.terrainInstructions).map(e=>{let[t,n]=e;return(0,Ne.jsxs)("div",{children:[(0,Ne.jsxs)("strong",{style:{color:"#999",textTransform:"capitalize",display:"block",marginBottom:"6px",fontSize:"1.1rem"},children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),"string"===typeof n?(0,Ne.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:n}):Array.isArray(n)?(0,Ne.jsx)("div",{style:{paddingLeft:"12px"},children:n.map((e,t)=>(0,Ne.jsxs)("p",{style:{margin:"4px 0",fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:["\u2022 ",e]},t))}):(0,Ne.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:JSON.stringify(n)})]},t)})}):null]}),M.benefits&&(0,Ne.jsxs)("div",{style:{background:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",padding:"20px",marginBottom:"24px"},children:[(0,Ne.jsx)("h3",{style:{margin:"0 0 12px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:"Benefits"}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:M.benefits})]}),M.progression&&(0,Ne.jsxs)("div",{style:{background:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",padding:"20px",marginBottom:"24px"},children:[(0,Ne.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:"Progression"}),"string"===typeof M.progression?(0,Ne.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:M.progression}):"object"===typeof M.progression?(0,Ne.jsx)("div",{style:{display:"grid",gap:"16px"},children:Object.entries(M.progression).map(e=>{let[t,n]=e;return(0,Ne.jsxs)("div",{children:[(0,Ne.jsxs)("strong",{style:{color:"#999",textTransform:"capitalize",display:"block",marginBottom:"6px",fontSize:"1.1rem"},children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:n})]},t)})}):null]}),M.variations&&Array.isArray(M.variations)&&M.variations.length>0&&(0,Ne.jsxs)("div",{style:{background:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",padding:"20px",marginBottom:"24px"},children:[(0,Ne.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:"Variations"}),(0,Ne.jsx)("div",{style:{display:"grid",gap:"12px"},children:M.variations.map((e,t)=>(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"8px 0"},children:[(0,Ne.jsx)("span",{style:{color:"#666",fontSize:"1.5rem",minWidth:"24px"},children:"\u2022"}),(0,Ne.jsx)("span",{style:{fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:e})]},t))})]}),M.examples&&Array.isArray(M.examples)&&M.examples.length>0&&(0,Ne.jsxs)("div",{style:{background:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",padding:"20px",marginBottom:"24px"},children:[(0,Ne.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:"Examples"}),(0,Ne.jsx)("div",{style:{display:"grid",gap:"12px"},children:M.examples.map((e,t)=>(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"8px 0"},children:[(0,Ne.jsx)("span",{style:{color:"#666",fontSize:"1.5rem",minWidth:"24px"},children:"\u2022"}),(0,Ne.jsx)("span",{style:{fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:e})]},t))})]}),M.trackIntervals&&(0,Ne.jsxs)("div",{style:{background:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",padding:"20px",marginBottom:"24px"},children:[(0,Ne.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:"Track Intervals"}),"string"===typeof M.trackIntervals?(0,Ne.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:M.trackIntervals}):"object"===typeof M.trackIntervals?(0,Ne.jsx)("div",{style:{display:"grid",gap:"16px"},children:Object.entries(M.trackIntervals).map(e=>{let[t,n]=e;return(0,Ne.jsxs)("div",{children:[(0,Ne.jsxs)("strong",{style:{color:"#999",textTransform:"capitalize",display:"block",marginBottom:"6px",fontSize:"1.1rem"},children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),"object"===typeof n?(0,Ne.jsx)("div",{style:{paddingLeft:"12px"},children:Object.entries(n).map(e=>{let[t,n]=e;return(0,Ne.jsxs)("p",{style:{margin:"4px 0",fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:[(0,Ne.jsxs)("strong",{style:{color:"#999"},children:[t,":"]})," ","string"===typeof n?n:JSON.stringify(n)]},t)})}):(0,Ne.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:"string"===typeof n?n:JSON.stringify(n)})]},t)})}):null]}),M.fueling&&(0,Ne.jsxs)("div",{style:{background:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",padding:"20px",marginBottom:"24px"},children:[(0,Ne.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.3rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"10px"},children:"Fueling"}),"string"===typeof M.fueling?(0,Ne.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:M.fueling}):"object"===typeof M.fueling?(0,Ne.jsx)("div",{style:{display:"grid",gap:"16px"},children:Object.entries(M.fueling).map(e=>{let[t,n]=e;return(0,Ne.jsxs)("div",{children:[(0,Ne.jsxs)("strong",{style:{color:"#999",textTransform:"capitalize",display:"block",marginBottom:"6px",fontSize:"1.1rem"},children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:n})]},t)})}):null]}),M.runEqOptions&&(0,Ne.jsxs)("div",{style:{background:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",padding:"24px",marginBottom:"24px"},children:[(0,Ne.jsx)("h3",{style:{margin:"0 0 20px 0",color:"white",fontSize:"1.6rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"12px"},children:"RunEQ Options - 4 Ways to Complete This Workout"}),(0,Ne.jsxs)("div",{style:{display:"grid",gap:"16px"},children:[M.runEqOptions.optionA&&(0,Ne.jsxs)("div",{style:{background:"#0a0a0a",padding:"16px",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[(0,Ne.jsx)("strong",{style:{color:"#999",fontSize:"1.1rem",display:"block",marginBottom:"8px"},children:"Option A:"}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:M.runEqOptions.optionA})]}),M.runEqOptions.optionB&&(0,Ne.jsxs)("div",{style:{background:"#0a0a0a",padding:"16px",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[(0,Ne.jsx)("strong",{style:{color:"#999",fontSize:"1.1rem",display:"block",marginBottom:"8px"},children:"Option B:"}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:M.runEqOptions.optionB})]}),M.runEqOptions.optionC&&(0,Ne.jsxs)("div",{style:{background:"#0a0a0a",padding:"16px",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[(0,Ne.jsx)("strong",{style:{color:"#999",fontSize:"1.1rem",display:"block",marginBottom:"8px"},children:"Option C:"}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:M.runEqOptions.optionC})]}),M.runEqOptions.optionD&&(0,Ne.jsxs)("div",{style:{background:"#0a0a0a",padding:"16px",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[(0,Ne.jsx)("strong",{style:{color:"#999",fontSize:"1.1rem",display:"block",marginBottom:"8px"},children:"Option D:"}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:M.runEqOptions.optionD})]}),M.runEqOptions.recommendation&&(0,Ne.jsxs)("div",{style:{background:"#2a2a2a",padding:"16px",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,Ne.jsx)("strong",{style:{color:"white",fontSize:"1.2rem",display:"block",marginBottom:"8px"},children:"Recommended for you:"}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"1.05rem",lineHeight:"1.6",color:"white",fontWeight:"500"},children:M.runEqOptions.recommendation})]})]})]}),M.coachingGuidance&&(0,Ne.jsxs)("div",{style:{background:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",padding:"20px",marginBottom:"24px"},children:[(0,Ne.jsx)("h3",{style:{margin:"0 0 16px 0",color:"white",fontSize:"1.5rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"10px"},children:"Coaching Guidance"}),"string"===typeof M.coachingGuidance?(0,Ne.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.7",color:"#ddd"},children:M.coachingGuidance}):"object"===typeof M.coachingGuidance?(0,Ne.jsx)("div",{style:{display:"grid",gap:"16px"},children:Object.entries(M.coachingGuidance).map(e=>{let[t,n]=e;return(0,Ne.jsxs)("div",{children:[(0,Ne.jsxs)("strong",{style:{color:"#999",textTransform:"capitalize",display:"block",marginBottom:"6px",fontSize:"1.1rem"},children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),(0,Ne.jsx)("p",{style:{margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ddd"},children:n})]},t)})}):null]}),(0,Ne.jsxs)("div",{style:{background:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",padding:"24px",marginBottom:"24px"},children:[(0,Ne.jsx)("button",{onClick:()=>{const e={day:d.charAt(0).toUpperCase()+d.slice(1),type:M.type,workout:{name:M.name,description:M.description},focus:M.focus,equipmentSpecific:M.equipmentSpecific};f({isOpen:!0,workout:e})},style:{width:"100%",background:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",fontSize:"1.2rem",fontWeight:"700",padding:"18px 24px",borderRadius:"16px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},onMouseOver:e=>{e.currentTarget.style.background="#3a3a3a"},onMouseOut:e=>{e.currentTarget.style.background="#2a2a2a"},children:"Something Else (Show Alternatives)"}),(0,Ne.jsx)("div",{style:{marginTop:"20px",textAlign:"center",padding:"16px",background:"#0a0a0a",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.05)"},children:(0,Ne.jsxs)("p",{style:{margin:0,fontSize:"0.95rem",color:"#666",lineHeight:"1.6"},children:[(0,Ne.jsx)("strong",{style:{color:"#999"},children:"Need something different?"}),(0,Ne.jsx)("br",{}),"Click above for all alternatives including contextual adaptations (too hot, too tired, time constraints, etc.)"]})})]})]}),(0,Ne.jsx)(sl,{isOpen:p.isOpen,onClose:N,currentWorkout:p.workout,userProfile:l,trainingPlan:c,onWorkoutSelect:async e=>{const t=(0,s.A)((0,s.A)({},P),{},{workout:(0,s.A)({},e.workout),name:e.workout.name,description:e.workout.description,type:e.type,focus:e.focus,equipmentSpecific:e.equipmentSpecific,replacementReason:e.replacementReason});g(t);const n="".concat(_,"-").concat(d),r={day:d.charAt(0).toUpperCase()+d.slice(1),workout:(0,s.A)({},e.workout),focus:e.focus,type:e.type,equipmentSpecific:e.equipmentSpecific,replacementReason:e.replacementReason},i=JSON.parse(localStorage.getItem("runeq_modifiedWorkouts")||"{}");i[n]=r,localStorage.setItem("runeq_modifiedWorkouts",JSON.stringify(i)),console.log("\ud83d\udcbe WorkoutDetail saved to localStorage:",n,e.workout.name),Re.j2.currentUser&&(await Pe.saveModifiedWorkout(Re.j2.currentUser.uid,_,d,r),console.log("\u2705 SAVED to Firestore:",e.workout.name,"for",d)),N()}})]});var j,O};const dh=function(){var e;const[t,n]=(0,i.useState)([]),[r,o]=(0,i.useState)(!0),[a,l]=(0,i.useState)(""),c=te(),u=null===(e=Re.j2.currentUser)||void 0===e?void 0:e.email,d=["herrenbrad@gmail.com"].includes(u);(0,i.useEffect)(()=>{h()},[]);const h=async()=>{try{o(!0);const e=(0,Ae.rJ)(Re.db,"users"),t=(0,Ae.P)(e,(0,Ae._M)("approvalStatus","==","pending")),r=await(0,Ae.GG)(t),i=[];r.forEach(e=>{i.push((0,s.A)({id:e.id},e.data()))}),i.sort((e,t)=>{var n,r;const i=(null===(n=e.createdAt)||void 0===n?void 0:n.toMillis())||0;return((null===(r=t.createdAt)||void 0===r?void 0:r.toMillis())||0)-i}),n(i),o(!1)}catch(e){console.error("Error loading pending users:",e),l("Error loading pending users: "+e.message),o(!1)}};return d?(0,Ne.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"20px"},children:(0,Ne.jsxs)("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[(0,Ne.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("h1",{style:{color:"#00D4FF",margin:"0 0 8px 0"},children:"Admin: User Approvals"}),(0,Ne.jsx)("p",{style:{color:"#AAAAAA",margin:0},children:"Approve or deny pending user accounts"})]}),(0,Ne.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,Ne.jsx)("button",{onClick:h,disabled:r,style:{padding:"10px 20px",background:"rgba(0, 212, 255, 0.2)",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:"6px",color:"#00D4FF",cursor:r?"not-allowed":"pointer",fontSize:"0.9rem"},children:r?"Loading...":"\ud83d\udd04 Refresh"}),(0,Ne.jsx)("button",{onClick:()=>c("/"),style:{padding:"10px 20px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"#FFFFFF",cursor:"pointer",fontSize:"0.9rem"},children:"Back to Dashboard"})]})]}),a&&(0,Ne.jsx)("div",{style:{background:"rgba(229, 62, 62, 0.1)",border:"1px solid rgba(229, 62, 62, 0.3)",borderRadius:"8px",padding:"16px",color:"#FC8181",marginBottom:"20px"},children:a}),(0,Ne.jsx)("div",{children:r?(0,Ne.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#AAAAAA"},children:"Loading pending users..."}):0===t.length?(0,Ne.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"40px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,Ne.jsx)("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:"\u2705"}),(0,Ne.jsx)("h2",{style:{color:"#00D4FF",marginBottom:"8px"},children:"All Caught Up!"}),(0,Ne.jsx)("p",{style:{color:"#AAAAAA",margin:0},children:"No pending user approvals at this time."})]}):(0,Ne.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:t.map(e=>(0,Ne.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"24px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,Ne.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[(0,Ne.jsxs)("div",{style:{flex:1,minWidth:"250px"},children:[(0,Ne.jsx)("div",{style:{fontSize:"1.2rem",color:"#FFFFFF",marginBottom:"8px",fontWeight:"bold"},children:e.displayName||"No name provided"}),(0,Ne.jsx)("div",{style:{color:"#00D4FF",marginBottom:"8px",fontSize:"0.95rem"},children:e.email}),(0,Ne.jsxs)("div",{style:{color:"#AAAAAA",fontSize:"0.85rem"},children:["Signed up: ",e.createdAt?new Date(e.createdAt.toMillis()).toLocaleString():"Unknown"]})]}),(0,Ne.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,Ne.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm("Approve ".concat(t,"?")))try{const n=(0,Ae.doc)(Re.db,"users",e);await(0,Ae.updateDoc)(n,{approvalStatus:"approved",approvedAt:(0,Ae.serverTimestamp)(),approvedBy:u}),console.log("\u2705 Approved user: ".concat(t)),await h()}catch(n){console.error("Error approving user:",n),alert("Error approving user: "+n.message)}})(e.id,e.email),style:{padding:"10px 24px",background:"#00FF88",border:"none",borderRadius:"6px",color:"#000000",cursor:"pointer",fontSize:"0.95rem",fontWeight:"bold"},children:"\u2705 Approve"}),(0,Ne.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm("Deny ".concat(t,"? They will need to create a new account.")))try{const n=(0,Ae.doc)(Re.db,"users",e);await(0,Ae.updateDoc)(n,{approvalStatus:"denied",deniedAt:(0,Ae.serverTimestamp)(),deniedBy:u}),console.log("\u274c Denied user: ".concat(t)),await h()}catch(n){console.error("Error denying user:",n),alert("Error denying user: "+n.message)}})(e.id,e.email),style:{padding:"10px 24px",background:"rgba(255, 107, 107, 0.2)",border:"1px solid rgba(255, 107, 107, 0.3)",borderRadius:"6px",color:"#FF6B6B",cursor:"pointer",fontSize:"0.95rem",fontWeight:"bold"},children:"\u274c Deny"})]})]})},e.id))})})]})}):(0,Ne.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"20px"},children:(0,Ne.jsxs)("div",{style:{maxWidth:"500px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"40px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,Ne.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:"\ud83d\udd12"}),(0,Ne.jsx)("h1",{style:{color:"#FF6B6B",marginBottom:"16px"},children:"Access Denied"}),(0,Ne.jsx)("p",{style:{color:"#AAAAAA",fontSize:"1.1rem",marginBottom:"24px"},children:"You do not have permission to access this page."}),(0,Ne.jsx)("button",{onClick:()=>c("/"),style:{padding:"12px 24px",background:"#00D4FF",border:"none",borderRadius:"6px",color:"#000000",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:"Go to Dashboard"})]})})};const hh=function(){const[e]=_e(),t=te(),[r,o]=(0,i.useState)("processing"),[a,s]=(0,i.useState)(null);return(0,i.useEffect)(()=>{(async()=>{try{const r=e.get("error");if(r)return s("Strava authorization failed: ".concat(r)),void o("error");const i=e.get("code");if(!i)return s("No authorization code received from Strava"),void o("error");if(!Re.j2.currentUser)return s("You must be logged in to connect Strava"),void o("error");o("exchanging");const a=await dl.exchangeToken(i);o("saving");const{updateDoc:l,doc:c}=await Promise.resolve().then(n.bind(n,667)),{db:u}=await Promise.resolve().then(n.bind(n,121)),d=c(u,"users",Re.j2.currentUser.uid);await l(d,{stravaConnected:!0,stravaAccessToken:a.access_token,stravaRefreshToken:a.refresh_token,stravaTokenExpiresAt:a.expires_at,stravaAthleteId:a.athlete.id,stravaAthleteName:"".concat(a.athlete.firstname," ").concat(a.athlete.lastname),stravaConnectedAt:(new Date).toISOString()}),console.log("\u2705 Strava connected successfully:",a.athlete),o("success"),setTimeout(()=>{t("/dashboard")},2e3)}catch(r){console.error("\u274c Strava callback error:",r),s(r.message||"Failed to connect Strava"),o("error")}})()},[e,t]),(0,Ne.jsxs)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"20px"},children:[(0,Ne.jsxs)("div",{style:{maxWidth:"500px",width:"100%",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",padding:"40px",textAlign:"center"},children:["processing"===r&&(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px",animation:"spin 2s linear infinite"},children:"\u23f3"}),(0,Ne.jsx)("h1",{style:{color:"white",marginBottom:"10px"},children:"Processing..."}),(0,Ne.jsx)("p",{style:{color:"#aaa"},children:"Connecting your Strava account"})]}),"exchanging"===r&&(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px",animation:"pulse 1.5s ease-in-out infinite"},children:"\ud83d\udd04"}),(0,Ne.jsx)("h1",{style:{color:"white",marginBottom:"10px"},children:"Exchanging Tokens..."}),(0,Ne.jsx)("p",{style:{color:"#aaa"},children:"Getting your Strava authorization"})]}),"saving"===r&&(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px",animation:"bounce 1s ease-in-out infinite"},children:"\ud83d\udcbe"}),(0,Ne.jsx)("h1",{style:{color:"white",marginBottom:"10px"},children:"Saving Connection..."}),(0,Ne.jsx)("p",{style:{color:"#aaa"},children:"Almost done!"})]}),"success"===r&&(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:"\u2705"}),(0,Ne.jsx)("h1",{style:{color:"#00FF88",marginBottom:"10px"},children:"Strava Connected!"}),(0,Ne.jsx)("p",{style:{color:"#aaa",marginBottom:"20px"},children:"Your workouts will now sync automatically"}),(0,Ne.jsx)("p",{style:{color:"#666",fontSize:"0.9rem"},children:"Redirecting to dashboard..."})]}),"error"===r&&(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:"\u274c"}),(0,Ne.jsx)("h1",{style:{color:"#ff4444",marginBottom:"10px"},children:"Connection Failed"}),(0,Ne.jsx)("p",{style:{color:"#aaa",marginBottom:"20px"},children:a}),(0,Ne.jsx)("button",{onClick:()=>t("/dashboard"),style:{background:"rgba(255, 255, 255, 0.1)",color:"white",border:"1px solid rgba(255, 255, 255, 0.2)",padding:"12px 24px",borderRadius:"10px",cursor:"pointer",fontSize:"1rem",fontWeight:"600"},children:"Return to Dashboard"})]})]}),(0,Ne.jsx)("style",{children:"\n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n        @keyframes pulse {\n          0%, 100% { opacity: 1; transform: scale(1); }\n          50% { opacity: 0.7; transform: scale(1.1); }\n        }\n        @keyframes bounce {\n          0%, 100% { transform: translateY(0); }\n          50% { transform: translateY(-10px); }\n        }\n      "})]})};function ph(){const{pathname:e}=Z();return(0,i.useEffect)(()=>{window.scrollTo(0,0)},[e]),null}const fh=function(){const e="v2.0-approval-fix-"+(new Date).toISOString();Me.log("\ud83d\ude80 APP VERSION:",e),Me.log("\ud83d\udcc5 Build timestamp:",(new Date).toISOString());const[t,n]=(0,i.useState)(null),[r,o]=(0,i.useState)(null),[a,l]=(0,i.useState)(null),[c,u]=(0,i.useState)(null),[d,h]=(0,i.useState)(!0);(0,i.useEffect)(()=>{const e=(0,De.hg)(Re.j2,e=>{if(Me.log("\ud83d\udd10 Auth state changed:",e?"Logged in":"Logged out"),e)n(e),Me.log("\u2705 User authenticated, real-time listener will load data");else{n(null),o(null),l(null),u(null);const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&n.startsWith("runeq_")&&e.push(n)}e.forEach(e=>localStorage.removeItem(e)),h(!1)}});return()=>e()},[]),(0,i.useEffect)(()=>{if(!t)return;Me.log("\ud83d\udc42 Setting up real-time listener for user:",t.uid);const e=(0,Ae.doc)(Re.db,"users",t.uid),n=(0,Ae.aQ)(e,t=>{if(Me.log("\ud83d\udd04 Snapshot received:",{exists:t.exists()}),t.exists()){const n=t.data();Me.log("\ud83d\udce6 User document data:",{hasProfile:!!n.profile,hasTrainingPlan:!!n.trainingPlan,hasEmail:!!n.email,approvalStatus:n.approvalStatus,allKeys:Object.keys(n)});const i=(0,s.A)((0,s.A)({},n.profile),{},{email:n.email,displayName:n.displayName,approvalStatus:n.approvalStatus,createdAt:n.createdAt,approvedAt:n.approvedAt,approvedBy:n.approvedBy,stravaConnected:n.stravaConnected,stravaAccessToken:n.stravaAccessToken,stravaRefreshToken:n.stravaRefreshToken,stravaTokenExpiresAt:n.stravaTokenExpiresAt,stravaAthleteId:n.stravaAthleteId,stravaAthleteName:n.stravaAthleteName,stravaConnectedAt:n.stravaConnectedAt,stravaLastSync:n.stravaLastSync});i.approvalStatus||(Me.log("\ud83d\udd04 [Realtime] Migrating existing user without approvalStatus - auto-approving"),i.approvalStatus="approved",(0,Ae.updateDoc)(e,{approvalStatus:"approved",approvedAt:new Date,approvedBy:"auto-migration-all-existing-users"}).catch(e=>console.error("Failed to migrate user:",e))),Me.log("\u2705 Setting userProfile with approvalStatus:",i.approvalStatus),"pending"===(null===r||void 0===r?void 0:r.approvalStatus)&&"approved"===i.approvalStatus&&(Me.log("\ud83c\udf89 User approved! Showing notification..."),alert("Great news! Your account has been approved. Welcome to Run+ Plans!")),o(i),n.trainingPlan&&(Me.log("\u2705 Setting training plan"),l(n.trainingPlan)),n.completedWorkouts?(Me.log("\u2705 Setting completed workouts:",Object.keys(n.completedWorkouts).length,"workouts"),u(n.completedWorkouts)):u({})}else Me.log("\u26a0\ufe0f User document does not exist yet - waiting for creation");h(!1)},e=>{console.error("\u274c Error listening to user document:",e),h(!1)});return()=>{Me.log("\ud83d\udd07 Cleaning up real-time listener"),n()}},[t,null===r||void 0===r?void 0:r.approvalStatus]);const p=()=>{const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&n.startsWith("runeq_")&&e.push(n)}e.forEach(e=>localStorage.removeItem(e)),Me.log("\ud83e\uddf9 Cleared localStorage:",e)};return d?(0,Ne.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)"},children:(0,Ne.jsx)("div",{style:{textAlign:"center",color:"#00D4FF"},children:(0,Ne.jsx)("h2",{children:"Loading..."})})}):t?(Me.log("\ud83d\udd0d Checking approval status:",{hasUserProfile:!!r,approvalStatus:null===r||void 0===r?void 0:r.approvalStatus,willShowPendingScreen:"pending"===(null===r||void 0===r?void 0:r.approvalStatus)}),"pending"===(null===r||void 0===r?void 0:r.approvalStatus)?(Me.log("\ud83d\udeab Showing pending approval screen"),(0,Ne.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"20px"},children:(0,Ne.jsxs)("div",{style:{maxWidth:"500px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"40px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,Ne.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:"\u23f3"}),(0,Ne.jsx)("h1",{style:{color:"#00D4FF",marginBottom:"16px"},children:"Account Pending Approval"}),(0,Ne.jsx)("p",{style:{color:"#AAAAAA",fontSize:"1.1rem",lineHeight:"1.6",marginBottom:"24px"},children:"Thank you for signing up! Your account is currently pending approval."}),(0,Ne.jsxs)("p",{style:{color:"#AAAAAA",fontSize:"0.95rem",lineHeight:"1.6"},children:["You'll receive an email at ",(0,Ne.jsx)("strong",{style:{color:"#FFFFFF"},children:null===r||void 0===r?void 0:r.email})," once your account has been approved. This usually takes less than 24 hours."]}),(0,Ne.jsx)("button",{onClick:async()=>{await(0,De.CI)(Re.j2),window.location.href="/"},style:{marginTop:"32px",padding:"12px 24px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"#FFFFFF",cursor:"pointer",fontSize:"1rem"},children:"Sign Out"})]})})):(0,Ne.jsxs)(Ee,{children:[(0,Ne.jsx)(ph,{}),(0,Ne.jsx)("div",{className:"App",children:(0,Ne.jsxs)(ve,{children:[(0,Ne.jsx)(ge,{path:"/",element:a?(0,Ne.jsx)(me,{to:"/dashboard",replace:!0}):(0,Ne.jsx)(Oe,{})}),(0,Ne.jsx)(ge,{path:"/onboarding",element:a?(0,Ne.jsx)(me,{to:"/dashboard",replace:!0}):(0,Ne.jsx)(rl,{onComplete:async(e,n)=>{if(Me.log("\ud83c\udfaf Onboarding complete - received data:",{hasProfile:!!e,hasPlan:!!n,planKeys:n?Object.keys(n):[]}),o(e),l(n),p(),!t)throw console.error("\u274c No user found - cannot save to Firestore"),new Error("User not authenticated");{Me.log("\ud83d\udcbe Saving profile to Firestore...",e);const r=await Pe.saveUserProfile(t.uid,e);if(!r.success)throw console.error("\u274c Failed to save profile:",r.error),alert("Warning: Failed to save your profile. Please try again or contact support."),new Error("Profile save failed: "+r.error);Me.log("\ud83d\udcbe Saving training plan to Firestore...",n);const i=await Pe.saveTrainingPlan(t.uid,n);if(!i.success)throw console.error("\u274c Failed to save training plan:",i.error),alert("Warning: Failed to save your training plan. Please try again or contact support."),new Error("Training plan save failed: "+i.error);Me.log("\u2705 Successfully saved all data to Firestore")}}})}),(0,Ne.jsx)(ge,{path:"/preview",element:a?(0,Ne.jsx)(ol,{userProfile:r,trainingPlan:a}):(0,Ne.jsx)(me,{to:"/onboarding",replace:!0})}),(0,Ne.jsx)(ge,{path:"/dashboard",element:a?(0,Ne.jsx)(pl,{userProfile:r,trainingPlan:a,completedWorkouts:c,clearAllData:async()=>{t&&await Pe.clearUserData(t.uid),o(null),l(null),p(),await(0,De.CI)(Re.j2),window.location.href="/"}}):(0,Ne.jsx)(me,{to:"/onboarding",replace:!0})}),(0,Ne.jsx)(ge,{path:"/workout/:day",element:(0,Ne.jsx)(uh,{userProfile:r,trainingPlan:a})}),(0,Ne.jsx)(ge,{path:"/admin/approvals",element:(0,Ne.jsx)(dh,{})}),(0,Ne.jsx)(ge,{path:"/auth/strava/callback",element:(0,Ne.jsx)(hh,{})})]})})]})):(0,Ne.jsx)(je,{})},mh=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:a}=t;n(e),r(e),i(e),o(e),a(e)})};window.addEventListener("error",e=>{if(e.message&&(e.message.includes("ResizeObserver loop")||e.message.includes("ResizeObserver loop completed with undelivered notifications")))return e.stopImmediatePropagation(),!1});a.createRoot(document.getElementById("root")).render((0,Ne.jsx)(i.StrictMode,{children:(0,Ne.jsx)(fh,{})})),mh()})();
//# sourceMappingURL=main.636fe04a.js.map